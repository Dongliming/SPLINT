resolved_date,issue_id,resolution,description,priority,assignee,assignee_username,created_date,summary,status,mapped_type,type
2017-05-29T05:43:41.000-0400,DROOLS-1585,Done,"In a nested context scenario containing anonymous entry, the type inference resolve to the parent Decision/BKM node instead of returning the parent ContextEntry where a variable might actually be defined.

For example in this scenario
!Workspace 1_181.png! 

the anonymous entry type inference for the expression {{AgePlus1Minus1 + 0}} is given the type of the BKM node itself, instead of being inferred as the type for the context entry ""Age"".",Major,Matteo Mortari,,2017-05-26T04:59:39.000-0400,DMNEvaluatorCompiler wrong type inference for nested context anonymous entry,Resolved,bug,Bug
2017-05-29T02:45:02.000-0400,DROOLS-1587,Done,"Similarly to the ""for"" loop, there is the need to enable dynamic resolution for ""every"" and ""some"" FEEL construct.",Minor,Matteo Mortari,,2017-05-26T08:40:28.000-0400,FEEL constructs leveraging iterationContexts are not type aware,Resolved,bug,Bug
2020-10-15T11:45:32.000-0400,DROOLS-5713,Done,"Facts examples:
Value holder:
{code:java}
public class LongFact implements Serializable {
    private long value;

    public LongFact(long value) {
        this.value = value;
    }

    public long getValue() {
        return value;
    }

    public void setValue(long value) {
        this.value = value;
    }
}
{code}

List holder:

{code:java}

public class LongFacts implements Serializable {
    private List<LongFact> facts;

    public LongFacts() {
        this.facts = new ArrayList<>();
    }

    public List<LongFact> getFacts() {
        return facts;
    }

    public void setFacts(List<LongFact> facts) {
        this.facts = facts;
    }
}
{code}

And rule example:
{code:java}
package org.examples.rules;

import org.example.facts.data.LongFact
import org.example.facts.data.LongFacts

query getLongs()
    val: LongFact()
end

rule ""Extract long facts""
when
    LongFacts($lfs: facts)
    $lf: LongFact() from $lfs
then
    insertLogical($lf);
end
{code}

Now, if I create a persisted kie-session and insert info LongFacts object with at least one fact in list:

{code:java}
String id = UUID.randomUUID().toString();
LongFacts longFacts = new LongFacts();
longFacts.getFacts().add(new LongFact(123456));

// Further in the transaction
KieSession kieSession = kieStoreServices.newKieSession(kieBase, kieSessionConfiguration,
                createEnvironment(entityManagerFactory, transactionManager));
kieSession.execute(CommandFactory.newInsert(longFacts));
kieSession.fireAllRules();
// Commit transaction
{code}

Then, if I try to load this session I will get an exception:

{code:java}
java.lang.IllegalStateException: java.lang.reflect.InvocationTargetException

	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.buildCommandService(KnowledgeStoreServiceImpl.java:137)
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.loadKieSession(KnowledgeStoreServiceImpl.java:104)
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.loadKieSession(KnowledgeStoreServiceImpl.java:36)
	at org.example.drools_persistance_spring.service.DroolsService.loadSession(DroolsService.java:210)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:741)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at org.example.drools_persistance_spring.service.DroolsService$$EnhancerBySpringCGLIB$$1d26e7ef.loadSession(<generated>)
	at org.example.drools_persistance_spring.service.DroolsService.getOrCreate(DroolsService.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:741)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)
	at org.example.drools_persistance_spring.service.DroolsService$$EnhancerBySpringCGLIB$$1d26e7ef.getOrCreate(<generated>)
	at org.example.drools_persistance_spring.service.DroolsService.sessionDump(DroolsService.java:216)
	at org.example.drools_persistance_spring.service.DroolsService$$FastClassBySpringCGLIB$$73fd435e.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:669)
	at org.example.drools_persistance_spring.service.DroolsService$$EnhancerBySpringCGLIB$$1d26e7ef.sessionDump(<generated>)
	at org.example.drools_persistance_spring.service.DroolsServiceTest.singleSessionWriteTest_withCacheDrop(DroolsServiceTest.java:190)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.buildCommandService(KnowledgeStoreServiceImpl.java:122)
	... 58 more
Caused by: java.lang.RuntimeException: Unable to load session snapshot
	at org.drools.persistence.api.SessionMarshallingHelper.loadSnapshot(SessionMarshallingHelper.java:104)
	at org.drools.persistence.PersistableRunner.initExistingKnowledgeSession(PersistableRunner.java:254)
	at org.drools.persistence.PersistableRunner.<init>(PersistableRunner.java:192)
	... 63 more
Caused by: java.lang.NullPointerException
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readBeliefSet(ProtobufInputMarshaller.java:625)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readTruthMaintenanceSystem(ProtobufInputMarshaller.java:598)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:253)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:166)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshallWithMessage(ProtobufMarshaller.java:141)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:92)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:50)
	at org.drools.persistence.api.SessionMarshallingHelper.loadSnapshot(SessionMarshallingHelper.java:99)
	... 65 more
{code}

If I change *insertLogical* on just *insert* kie session will be loaded correctly. But I need to use *insertLogical*.
",Major,Mario Fusco,,2020-10-09T05:55:51.000-0400,NPE when loading saved kie-session,Resolved,bug,Bug
2020-10-14T18:00:25.000-0400,DROOLS-5707,Done,"When users create a new DRD, the information requirement entry is being duplicated into the DMN XML.

Steps to reproduce:
- Create the Traffic Violation example
- Create a new DRD from the ""Driver"" node
- Open the DMN xml
- *Actual*: Notice that some information requirements are duplicated
- *Expected*: Information requirements shouldn't be duplicated",Critical,Guilherme Gomes,,2020-10-08T08:41:54.000-0400,[DMN Designer] Multiple DRDs support - Information requirements are duplicated into the DMN XML,Resolved,bug,Bug
2020-10-15T12:06:06.000-0400,DROOLS-5717,Done,None,Major,Luca Molteni,,2020-10-12T06:19:02.000-0400,ZipKieModule should support 0-byte resources,Resolved,bug,Bug
2020-10-15T12:03:17.000-0400,DROOLS-2836,Done,"RemoveRuleTest.testRemoveBigRule

java.lang.RuntimeException: This is a bug. Please contact the development team:
[org/drools/core/reteoo/compiled/Compiledorg_drools_compiler_test_SimpleFactNetwork8aecdf1db7f9b4f4abcbafdd301c63d7c.java (6279:25) : package org.drools.compiler.test does not exist, org/drools/core/reteoo/compiled/Compiledorg_drools_compiler_test_SimpleFactNetwork8aecdf1db7f9b4f4abcbafdd301c63d7c.java (6279:69) : package org.drools.compiler.test does not exist, org/drools/core/reteoo/compiled/Compiledorg_drools_compiler_test_SimpleFactNetwork8aecdf1db7f9b4f4abcbafdd301c63d7c.java (7899:25) : package org.drools.compiler.test does not exist, org/drools/core/reteoo/compiled/Compiledorg_drools_compiler_test_SimpleFactNetwork8aecdf1db7f9b4f4abcbafdd301c63d7c.java (7899:69) : package org.drools.compiler.test does not exist]
",Major,Luca Molteni,,2018-08-06T10:59:52.000-0400,Support compiling of a Big Rule,Resolved,bug,Bug
2020-10-14T11:20:31.000-0400,DROOLS-5705,Rejected,"See [https://github.com/triceo/drools/blob/0dc31d698de4a43b0e29f307d42f25a1bd0de6fb/drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/GroupByTest.java#L719]

 

Also see the comment here, which may be hiding another issue:

https://github.com/triceo/drools/blob/0dc31d698de4a43b0e29f307d42f25a1bd0de6fb/drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/GroupByTest.java#L736",Major,Mario Fusco,,2020-10-08T04:18:00.000-0400,GroupBy: custom accumulate function receives SubNetworkTuple,Resolved,bug,Bug
2020-10-14T12:40:14.000-0400,DROOLS-5704,Done,"See reproducer here:

https://github.com/triceo/drools/blob/0dc31d698de4a43b0e29f307d42f25a1bd0de6fb/drools-model/drools-model-compiler/src/test/java/org/drools/modelcompiler/GroupByTest.java#L677",Major,Mario Fusco,,2020-10-07T11:27:27.000-0400,GroupBy: Exception with 2 patterns and 2 expressions on the second pattern,Resolved,bug,Bug
2020-10-14T05:33:03.000-0400,DROOLS-5681,Done,"When using Java standard serialization mechanism, we can see that ByteArrayResource is now written twice

in ByteArrayResource
{code:java}
@Override
public void writeExternal(ObjectOutput out) throws IOException {
 super.writeExternal( out );
 out.writeObject( bytes );
 out.writeObject(this.encoding);
}{code}
And super class writeExternal:
{code:java}
public void writeExternal(ObjectOutput out) throws IOException {
//...
 out.writeObject( bytes );
}{code}
It works as it also read twice in ByteArrayResource#readExternal and ByteArrayResource#readExternal.

Anyway, moving the bytes attribute from child class to super class in [bb5e421df|https://github.com/kiegroup/drools/commit/bb5e421df8950cb2355071863b2c47886b323c01#diff-76e7c08df32cd05e6e52f3067b91e7a5] broke our project serialization as we rely on java serialization for our KieBase resources. Seems ok as we'll address it by some tweaking on serialVersionUID, but fixing this issue (read/write once instead of twice) will also break deserialization for projects which rely on it from 7.34.0.Final.


Don't know if it's ok to fix it in the next version. I can make a PR for this case.

 

 ",Major,Mario Fusco,,2020-09-29T10:03:47.000-0400,ByteArrayResource bytes attribute read/write twice,Resolved,bug,Bug
2020-10-12T12:17:33.000-0400,DROOLS-5711,Done,"h3. Summary:

When evaluating a decision model that contains a MultiInstanceDecision, the result will often times be {{[null]}}, because the engine will not evaluate the decision dependencies of the MID first, and simply execute the MID with empty inputs instead.
h3. Details:

The statement that will cause decisions to consider their requirements during evaluation is missing for MultiInstanceDecisions:
{code:java}
compiler.linkRequirements( model, di );{code}
 Inside {{org.kie.dmn.signavio.MultiInstanceDecisionLogic.MultiInstanceDecisionNodeCompiler#compileEvaluator}}",Minor,Matteo Mortari,,2020-10-09T04:45:04.000-0400,[DMN XML] Signavio Profile - MultiInstanceDecisionLogic: MID requirements are not linked,Resolved,bug,Bug
2020-10-12T12:18:25.000-0400,DROOLS-5710,Done,"If the DayDiff() function is called with a parameter of data type Date, an error is thrown during runtime.

Example:
{quote}dayDiff(myDate, today())
{quote}
h3. Acceptance Criteria:
 * DayDiff function can be called with datatypes Date and Datetime in any combination
 ** Date, Date
 ** Date, Datetime
 ** Datetime, Date
 ** Datetime, Datetime

h3.  Details:

The {{DayDiffFunction}} is implemented using {{Duration#between}} . This implementation will try to calculate the duration between the given {{Temporal}} s based on their nanoseconds or seconds, which can't be extracted from values of type Date that don't have a time component.

Suggestion: Manually convert the parameters to {{Instant}} s, using the start of the day as time component for Date values.",Minor,Matteo Mortari,,2020-10-09T04:33:30.000-0400,[DMN XML] Signavio Profile - DayDiffFunction: Should work with Date and DateTime values,Resolved,bug,Bug
2020-10-08T06:36:27.000-0400,DROOLS-5706,Done,None,Major,Lukáš Petrovický,,2020-10-08T04:55:17.000-0400,GroupBy: 4 patterns not supported due to a typo,Resolved,bug,Bug
2020-10-09T10:36:10.000-0400,DROOLS-3191,Won't Fix,"Align error reporting in the table as design proposal (add red borders around error cells)
https://issues.jboss.org/browse/DROOLS-3151",Major,Daniele Zonca,,2018-10-25T16:54:37.000-0400,Add highlight red borders to errors,Closed,bug,Bug
2020-10-08T12:47:50.000-0400,DROOLS-5687,Done,"When updating a {{KieContainer}} with {{updateToVersion}} with a change in a declared type two consecutive times, a {{NullPointerException}} is raised.

Minimal example DRL triggering the issue (notice at least two declared types are needed):

{noformat}
declare  FactType1
    x : int
end

declare  FactType2
    y : int
end
{noformat}


first update:


{noformat}
declare  FactType1
    x : int
    z : int
end

declare  FactType2
    y : int
end
{noformat}


second update:


{noformat}
declare  FactType1
    x : int
    z : int
    w : int
end

declare  FactType2
    y : int
end
{noformat}


The second update will raise the following exception:


{noformat}
java.lang.NullPointerException
	at org.drools.compiler.kie.util.ChangeSetBuilder.build(ChangeSetBuilder.java:106)
	at org.drools.compiler.kie.builder.impl.InternalKieModule.getChanges(InternalKieModule.java:132)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:241)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:237)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:195)
	at org.example.reproducer.KjarUpdateTest.update(KjarUpdateTest.java:37)
	at org.example.reproducer.KjarUpdateTest.testConsecutiveUpdates(KjarUpdateTest.java:48)
{noformat}
",Major,Mario Fusco,,2020-10-01T16:51:27.000-0400,NullPointerException on second consecutive declared type update,Resolved,bug,Bug
2020-10-06T08:08:09.000-0400,DROOLS-5692,Done,"Model compile generate code that inaccurately fires the rule in comparison to non executable model code created rulebase or in 6.x.


{code:java}
rule ""test_rule""
 dialect ""java""
 when
 $nanTest : DoubleNaNTest( $testDouble1 : testDouble1 , $testDouble2 : testDouble2 , $testDouble1 + 10 > $testDouble2 , testBoolean!=null, testBoolean==false) 
then
 System.out.println(""rule_a fired "");
 $nanTest.setTestBoolean(true);
 update($nanTest);
end



   DoubleNaNTest nan = new DoubleNaNTest();
   nan.setTestBoolean(false);
   nan.setTestDouble1(Double.NaN);//Double.NaN
   nan.setTestDouble2(100.0);
   KieSession ksession = sumKieBaseShort.newKieSession();
   ksession.insert(nan);
{code}
 

Expected: 
Above rule should not fired in executable model. 

Actual result:
Above rule  fired in executable model. ",Major,Mario Fusco,,2020-10-05T01:22:34.000-0400, Inaccurate rule execution in executable model in RHDM 7,Resolved,bug,Bug
2020-10-05T07:54:05.000-0400,DROOLS-5685,Done,"ClearActivationGroupCommand command in Kie server changed its behaviour, right now it doesn't seem to remove the activation group. This issue is caused by https://github.com/kiegroup/drools/pull/3125 , when I revert the commit then ClearActivationGroupCommand works again as before.

Can be reproduced using Kie server integration test [ActivationGroupIntegrationTest.testClearActivationGroup()|https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-tests/kie-server-integ-tests-drools/src/test/java/org/kie/server/integrationtests/drools/ActivationGroupIntegrationTest.java#L68].
",Major,Matteo Mortari,,2020-10-01T04:42:24.000-0400,ClearActivationGroup command changed its behaviour,Resolved,bug,Bug
2020-10-05T07:48:49.000-0400,DROOLS-5684,Done,"The original definition is:

bq. P tables can be “misleading” when rule contains hyphen  input entry (“irrelevant”) and output is not lowest priority

as in the following example:

 !screenshot-2.png|thumbnail! 

which was implemented with [DROOLS-3785].

( ref: https://youtu.be/eQRDc6fq2yw?t=1293 )

Further refinements checked to avoid duplicating ""Misleading rule"" reports when in fact the rules were already reported as ""Masked"", with: [DROOLS-5368]

However, a table such as the below would inadvertently still report misleading rules:

 !screenshot-1.png|thumbnail! 

So the new definition is refined to:

{quote}P tables can be “misleading” when:
* rule contains hyphen  input entry (“irrelevant”)
* and output is not lowest priority
* the hyphen in the misleading rule, correspond to a value (not an hyphen) in the mislead('d) rule
{quote}",Major,Matteo Mortari,,2020-10-01T03:33:35.000-0400,DMN DT Analysis Misleading rule definition refinements,Resolved,bug,Bug
2020-10-05T07:48:15.000-0400,DROOLS-5678,Done,None,Major,Matteo Mortari,,2020-09-28T06:36:36.000-0400,Align exec model behaviour for @Annotation(value),Resolved,bug,Bug
2020-10-05T07:47:05.000-0400,DROOLS-5663,Done,"h2. Executive Summary

IFF the user do NOT specify the {{generateModel}} configuration flag for the kie-maven-plugin, the KJAR project ends up being built twice.

h2. Details

Take note of ""Steps to Reproduce"".

We can observe that, at first, {{GenerateModelMojo}} is invoked, and then {{BuildMojo}} is ALSO invoked. With the end result that the {{drools-model}} file is generated anyway in the final JAR (kjar) artifact.

In details, from the attached log, we notice at first the {{GenerateModelMojo}} is invoked:
 !screenshot-1.png|thumbnail! 

accordingly the mojo is generating the exec model classes sources:

{code:java}
[INFO] --- kie-maven-plugin:7.44.0-SNAPSHOT:generateModel (default-generateModel) @ kie-maven-plugin-example ---
[INFO] Artifact not fetched from maven: org.drools:drools-model-compiler:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-canonical-model:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-compiler:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-backend:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-feel:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-api:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-core:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-model:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-core:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-api:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Found 36 generated files in Canonical Model
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/P01/LambdaPredicate01D5F3DAA2D9F6094AE615B9F2841BE2.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/PE1/LambdaConsequenceE181A33F2423D9B3ED83D2764CD9D7CC.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/DomainClassesMetadata58cc6133a88c41de80943de1b39e3585.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/DomainClassesMetadatad1f96973064a44cabb6a83fbe9979fa0.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/P4B/LambdaExtractor4BD2450C83C7C6D99B9E58FC68BF23B8.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/P04/LambdaConsequence04E3132F35C1152F539B6ED4644AC6B3.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/Alarm.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PD0/LambdaPredicateD0D10C330E24C798AB29B50316181DA1.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/Rules58cc6133a88c41de80943de1b39e3585.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/FactA.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/P4D/LambdaExtractor4D55E2E04863B396216330AEDCAD1569.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/PA9/LambdaPredicateA93B7F5E8D7190496BC805E26AB3F457.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PBE/LambdaExtractorBEF0BEA5560B29CBC89C4FC70B9C6D9D.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PD1/LambdaExtractorD1AAF936ED8E4AEEE13080EE8245A712.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/P57/LambdaExtractor57699C62EC50788820BA4075F6A28AE6.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/P40/LambdaPredicate403C96BCAA32F72ADA05B19CC1ADBEB2.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/FactB.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/Rules58cc6133a88c41de80943de1b39e3585RuleMethods0.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PD5/LambdaConsequenceD5F3898CC43A37A798CA2E0DEAB2CEB4.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/P99/LambdaPredicate995D77A8EF2B24CA352A136704291984.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/P5A/LambdaConsequence5A1A7E4CF87C795DC59A8363371B8CE2.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/P6B/LambdaConsequence6B7C3E3CA04C944169886E6E213AC0BD.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PC7/LambdaConsequenceC7E285F358A4D3AD09E21A8F3D321D55.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PE8/LambdaExtractorE84DAABE5D3F16E8E69999DC112E2009.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/Rules88d814b4ebe641c58821fd70dab846a5.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PFF/LambdaExtractorFFC29BD91606D6EE3BFE77BA2739B262.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/P33/LambdaExtractor338B6BF83B0E840B16074D6B7DC05F5E.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/Rulesd1f96973064a44cabb6a83fbe9979fa0RuleMethods0.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/PF1/LambdaPredicateF1676D603D66F7F6A116F4D6C8760F76.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/acme/test_generateModel_kjararchetype/P23/LambdaExtractor2320785F70F7E8677188D3E84D56AEAC.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/P10/LambdaPredicate100D2C06CA08502866BCD5764D55E146.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/DomainClassesMetadata88d814b4ebe641c58821fd70dab846a5.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PC7/LambdaConsequenceC73928745AC647142A4A98CC7D45D334.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/PC4/LambdaPredicateC4023187C0F98EA3ABBF5261828864D9.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/example/Rules88d814b4ebe641c58821fd70dab846a5RuleMethods0.java
[INFO] Generating /Users/mmortari/git/droolsjbpm-integration/kie-maven-plugin-example/target/generated-sources/drools-model-compiler/main/java/./org/kie/firealarm/Rulesd1f96973064a44cabb6a83fbe9979fa0.java
[INFO] DSL successfully generated
[INFO] 
{code}

then we get the classic BuildMojo kicking in:
 !screenshot-2.png|thumbnail! 

and from the log:

{code:java}
[INFO] --- kie-maven-plugin:7.44.0-SNAPSHOT:build (default-build) @ kie-maven-plugin-example ---
[INFO] Artifact not fetched from maven: org.drools:drools-model-compiler:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-canonical-model:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-compiler:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-backend:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-feel:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-api:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.drools:drools-core:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-model:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-dmn-core:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] Artifact not fetched from maven: org.kie:kie-api:7.44.0-SNAPSHOT. To enable the KieScanner you need kie-ci on the classpath
[INFO] kieMap not present
[INFO] KieModule successfully built!
[INFO] 
{code}

So the KJAR project is actually built twice",Major,Matteo Mortari,,2020-09-23T05:57:39.000-0400,align kie-maven-plugin default value for generateModel configuration flag,Resolved,bug,Bug
2020-10-05T07:50:04.000-0400,DROOLS-5691,Done,"following [KOGITO-2853] the test failure:

org.kie.integration.testcoverage.instrumentation.InstrumentationTest.testMetaInfoExists

can be traced back to missing to update the (classic) BuildMojo following the protobuf descope work as documented here: https://github.com/kiegroup/droolsjbpm-integration/pull/2256#issuecomment-703228932",Major,Matteo Mortari,,2020-10-04T06:21:59.000-0400,Fix (classic) BuildMojo no exec model after descope protobuf,Resolved,bug,Bug
2020-10-01T08:01:49.000-0400,DROOLS-5686,Done,None,Major,Mario Fusco,,2020-10-01T06:19:08.000-0400,False accumulate node sharing when 2 accumulates bind the same variable name to different declarations,Resolved,bug,Bug
2020-09-30T07:57:26.000-0400,DROOLS-5682,Done,"As of Drools {{7.32.0.Final}}, {{forall}} patterns with ""empty list"" constraints combined with other constraints through {{||}} will fail to match as expected.

For example the following rule:

{noformat}
rule ""forall with not equal""
when forall($p : Pojo(y == 1)
            Pojo(x.empty || x contains 2, z == 3, this == $p))
then
end
{noformat}

will not fire against following facts:

{noformat}
Pojo{x=[2], y=0, z=0}
Pojo{x=[], y=1, z=3}
Pojo{x=[3], y=0, z=3}
Pojo{x=[2], y=1, z=3}
{noformat}


We suspect a problem with the rewriting of the {{forall}} clause. It appears the clause is rewritten as:

{{not Pojo(y == 1, (x.empty && !(x contains 2)) || !(z == 3))}}

instead of the expected:

{{not Pojo(y == 1, (!(x.empty) && !(x contains 2)) || !(z == 3))}}

This is working fine when using Drools {{<= 7.31.0.Final}}.",Major,Mario Fusco,,2020-09-29T11:46:16.000-0400,Forall with empty list constraint combined with or does not fire as expected,Resolved,bug,Bug
2020-09-30T06:12:21.000-0400,DROOLS-5638,Done,"Majority vote operator does not work in new PMML implementation. Evaluation fails with the following exception:

java.lang.NullPointerException
 at org.drools.core.rule.constraint.MvelConstraint.equals(MvelConstraint.java:675)
 at org.drools.core.reteoo.AlphaNode.equals(AlphaNode.java:198)
 at java.base/java.util.HashMap.getNode(HashMap.java:567)
 at java.base/java.util.HashMap.get(HashMap.java:552)
 at org.drools.core.reteoo.CompositeObjectSinkAdapter.getMatchingNode(CompositeObjectSinkAdapter.java:523)
 at org.drools.core.reteoo.builder.BuildUtils.attachNode(BuildUtils.java:117)",Major,Gabriele Cardosi,,2020-09-14T08:06:07.000-0400,Majority vote operator does not work in mining model,Closed,bug,Bug
2020-09-29T11:21:10.000-0400,DROOLS-5677,Done,"When a constraint expression has multiple properties, standard drl (MvelConstraint.calculateMaskFromExpression()) enlists only the first property for property reactivity (e.g. 'age' in the below case) while executable model can react on both.
{noformat}
$p : Person( age > salary )
{noformat}
",Major,Mario Fusco,,2020-09-28T05:43:30.000-0400,STANDARD_DRL property reactivity doesn't recognize multiple properties in an expression,Resolved,bug,Bug
2020-09-24T12:14:18.000-0400,DROOLS-5671,Duplicate Issue,"Creating Text annotation causes unexpected system error.

Error details:

{code:java}
Uncaught exception: Exception caught: CDI Event exception: CommandType=CDIEvent, BeanType=org.kie.workbench.common.stunner.core.client.canvas.controls.event.BuildCanvasShapeEvent, BeanReference=BuildCanvasShapeEvent [definition=org.kie.workbench.common.dmn.api.definition.model.TextAnnotation@85a8abd2, factory=org.kie.workbench.common.dmn.client.shape.factory.DMNShapeFactory@4941, clientX=674, clientY=350], FromClient=1 sent to [unavailable] Caused by: CDI Event exception: CommandType=CDIEvent, BeanType=org.kie.workbench.common.stunner.core.client.canvas.controls.event.BuildCanvasShapeEvent, BeanReference=BuildCanvasShapeEvent [definition=org.kie.workbench.common.dmn.api.definition.model.TextAnnotation@85a8abd2, factory=org.kie.workbench.common.dmn.client.shape.factory.DMNShapeFactory@4941, clientX=674, clientY=350], FromClient=1 sent to [unavailable] Caused by: CDI Event exception: CommandType=CDIEvent, BeanType=org.kie.workbench.common.stunner.core.client.canvas.event.selection.CanvasSelectionEvent, BeanReference=org.kie.workbench.common.stunner.core.client.canvas.event.selection.CanvasSelectionEvent@4bb7, FromClient=1 sent to [unavailable] Caused by: CDI Event exception: CommandType=CDIEvent, BeanType=org.kie.workbench.common.stunner.core.client.canvas.event.selection.CanvasSelectionEvent, BeanReference=org.kie.workbench.common.stunner.core.client.canvas.event.selection.CanvasSelectionEvent@4bb6, FromClient=1 sent to [unavailable] Caused by: (TypeError) : c is null
{code}
",Major,Guilherme Gomes,,2020-09-24T11:47:35.000-0400,[DMN Designer] Text annotation causes unexpected system error,Closed,bug,Bug
2020-09-24T21:17:49.000-0400,DROOLS-5667,Done,"When Annotation is added to canvas and editor is saved and reopened, the Annotation is missing.",Critical,Daniel José dos Santos,,2020-09-23T09:29:49.000-0400,DMN editor not saving Annotation in Business Central,Resolved,bug,Bug
2020-09-25T10:50:36.000-0400,DROOLS-5668,Done,"Latest drools minor versions broke deserialization from earliest 7.x version due to changes made on the serialization/deserialization
of node memories. For instance it happens if a serialization has been done with earliest version and accumulate node.",Major,Mario Fusco,,2020-09-23T16:02:28.000-0400,Latest drools minor versions broke deserialization from earliest 7.x version due to changes made on the serialization/deserialization of node memories,Resolved,bug,Bug
2020-09-25T16:31:25.000-0400,DROOLS-5673,Done," Validation is failing when users add an included node is into a DRD.

Actual: When users try to add a included node on a DRD, the ""Decision Components"" component shows duplicated elements, and the diagram validation fails with an infinite loading:
 !bug.gif|width=600! 

Expected: Users should not see duplicated elements, and the validation shouldn't fail.

To reproduce, import both models on this JIRA, and open the ""reproducer.dmn"" by following the steps in the GIF.",Blocker,Guilherme Gomes,,2020-09-25T01:25:36.000-0400,[DMN Designer] Validation fails when an included node is added on a DRD,Resolved,bug,Bug
2020-09-23T08:49:13.000-0400,DROOLS-5656,Done,"After the multiple DRDs support changes, the editor is showing duplicated file extensions for DMN assets on BC.",Major,Guilherme Gomes,,2020-09-18T09:05:54.000-0400,[DMN Designer] Multiple DRDs support - Editor shows duplicated file extension on BC,Resolved,bug,Bug
2020-09-23T05:31:42.000-0400,DROOLS-5644,Done,"Running a Test Scenario, we expect to reach 100% test coverage. However, if the project contains DRL files with queries only, these files are counted in the coverage. As these files don't have any rule, it is not run and the test coverage is affected.",Major,Yeser Amer,,2020-09-15T08:27:22.000-0400,[Test Scenario Editor] Queries should be not considered on RULE based Test Scenario,Resolved,bug,Bug
2020-09-23T03:11:49.000-0400,DROOLS-5652,Done,"String relational comparison fails with executable-model

{noformat}
Person( name > ""Bob"" )
{noformat}

generates Predicate like this:

{code:java}
@org.drools.compiler.kie.builder.MaterializedLambda()
public enum LambdaPredicate23581163B2FDAA9B650DDB3B8C587DE2 implements org.drools.model.functions.Predicate1<org.drools.modelcompiler.domain.Person> {
   ...
    @Override()
    public boolean test(org.drools.modelcompiler.domain.Person _this) throws java.lang.Exception {
        return org.drools.modelcompiler.util.EvaluationUtil.greaterThanStringsAsNumbers(_this.getName(), ""Bob"");
    }
}
{code}

then, fails with this error:

{noformat}
java.lang.RuntimeException: java.lang.NumberFormatException: Character J is neither a decimal digit number, decimal point, nor ""e"" notation exponential mark.
	at org.drools.modelcompiler.constraints.ConstraintEvaluator.evaluate(ConstraintEvaluator.java:95)
	at org.drools.modelcompiler.constraints.LambdaConstraint.isAllowed(LambdaConstraint.java:133)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:136)
	...
Caused by: java.lang.NumberFormatException: Character J is neither a decimal digit number, decimal point, nor ""e"" notation exponential mark.
	at java.base/java.math.BigDecimal.<init>(BigDecimal.java:518)
	at java.base/java.math.BigDecimal.<init>(BigDecimal.java:401)
	at java.base/java.math.BigDecimal.<init>(BigDecimal.java:834)
	at org.drools.modelcompiler.util.EvaluationUtil.greaterThanStringsAsNumbers(EvaluationUtil.java:113)
	at defaultpkg.P23.LambdaPredicate23581163B2FDAA9B650DDB3B8C587DE2.test(LambdaPredicate23581163B2FDAA9B650DDB3B8C587DE2.java:17)
	at defaultpkg.P23.LambdaPredicate23581163B2FDAA9B650DDB3B8C587DE2.test(LambdaPredicate23581163B2FDAA9B650DDB3B8C587DE2.java:8)
	at org.drools.model.functions.Predicate1$Impl.test(Predicate1.java:39)
	at org.drools.modelcompiler.constraints.ConstraintEvaluator.evaluate(ConstraintEvaluator.java:92)
	... 48 more
{noformat}

FYI) It should be supported
https://docs.jboss.org/drools/release/latest/drools-docs/html_single/index.html#drl-operators-ref_drl-rules

{noformat}
4.1.8.6. Supported operators in DRL pattern constraints

<, <=, >, >=
Use these operators on properties with natural ordering. For example, for Date fields, the < operator means before, and for String fields, the operator means alphabetically before. These properties apply only to comparable properties.

Example constraints with before operator

Person( birthDate < $otherBirthDate )
Person( firstName < $otherFirstName )
{noformat}",Major,Toshiya Kobayashi,,2020-09-18T02:18:08.000-0400,String relational comparison fails with executable-model,Resolved,bug,Bug
2020-09-12T10:24:57.000-0400,DROOLS-5635,Done,"Using an existental pattern in an accumulate and binding the accumulated value with a from like in the following LHS
{code:java}
accumulate ( $p: Person ( getName().startsWith(\""M\"") ) and exists(String());
  $sum : sum($p.getAge())
)
 $s: String() from $sum.toString()  {code}
causes this NPE in the executable model
{code:java}
java.lang.NullPointerException
	at org.drools.core.rule.LogicTransformer.processElement(LogicTransformer.java:193)
	at org.drools.core.rule.LogicTransformer.processElement(LogicTransformer.java:168)
	at org.drools.core.rule.LogicTransformer.processElement(LogicTransformer.java:250)
	at org.drools.core.rule.LogicTransformer.fixClonedDeclarations(LogicTransformer.java:153)
	at org.drools.core.rule.LogicTransformer.transform(LogicTransformer.java:96)
	at org.drools.core.definitions.rule.impl.RuleImpl.getTransformedLhs(RuleImpl.java:601)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:115)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110){code}",Major,Mario Fusco,,2020-09-11T06:13:33.000-0400,NPE in executable model using an existental pattern in an accumulate and binding the accumulated value with a from,Resolved,bug,Bug
2020-09-16T08:04:08.000-0400,DROOLS-5584,Done,"following the Traffic Violation tutorial I got the error. I worked around the issue by closing all , Build the project, and try it again.


{code:java}
10:35:57,461 ERROR [org.guvnor.common.services.backend.exceptions.ExceptionUtilities] (default task-7) Exception thrown: Retrieving the DMNModel has failed. Make sure the used DMN asset does not produce any compilation errors and that the project does not contain multiple DMN assets with the same name and namespace. In addition, check if the reference to the DMN file is correct in the Settings panel. After addressing the issues, build the project again.: org.drools.scenariosimulation.backend.util.ImpossibleToFindDMNException: Retrieving the DMNModel has failed. Make sure the used DMN asset does not produce any compilation errors and that the project does not contain multiple DMN assets with the same name and namespace. In addition, check if the reference to the DMN file is correct in the Settings panel. After addressing the issues, build the project again.
	at deployment.business-central.war//org.drools.scenariosimulation.backend.util.DMNSimulationUtils.findDMNModel(DMNSimulationUtils.java:56)
	at deployment.business-central.war//org.drools.scenariosimulation.backend.util.DMNSimulationUtils.extractDMNModel(DMNSimulationUtils.java:39)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl.getDMNModel(DMNTypeServiceImpl.java:98)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl.retrieveFactModelTuple(DMNTypeServiceImpl.java:62)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl$Proxy$_$$_WeldClientProxy.retrieveFactModelTuple(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy.getFactModelTuple(DMNSimulationSettingsCreationStrategy.java:145)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy.createSimulation(DMNSimulationSettingsCreationStrategy.java:58)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy$Proxy$_$$_WeldClientProxy.createSimulation(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.ScenarioSimulationBuilder.createSimulation(ScenarioSimulationBuilder.java:41)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.ScenarioSimulationBuilder$Proxy$_$$_WeldClientProxy.createSimulation(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.ScenarioSimulationServiceImpl.create(ScenarioSimulationServiceImpl.java:176)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.ScenarioSimulationServiceImpl$Proxy$_$$_WeldClientProxy.create(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.AbstractRPCMethodCallback.invokeMethodFromMessage(AbstractRPCMethodCallback.java:65)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.ValueReplyRPCEndpointCallback.callback(ValueReplyRPCEndpointCallback.java:40)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.RemoteServiceCallback.callback(RemoteServiceCallback.java:54)
	at deployment.business-central.war//org.jboss.errai.cdi.server.CDIExtensionPoints$2.callback(CDIExtensionPoints.java:448)
	at deployment.business-central.war//org.jboss.errai.bus.server.DeliveryPlan.deliver(DeliveryPlan.java:47)
	at deployment.business-central.war//org.jboss.errai.bus.server.ServerMessageBusImpl.sendGlobal(ServerMessageBusImpl.java:297)
	at deployment.business-central.war//org.jboss.errai.bus.server.SimpleDispatcher.dispatchGlobal(SimpleDispatcher.java:46)
	at deployment.business-central.war//org.jboss.errai.bus.server.service.ErraiServiceImpl.store(ErraiServiceImpl.java:96)
	at deployment.business-central.war//org.jboss.errai.bus.server.service.ErraiServiceImpl.store(ErraiServiceImpl.java:113)
	at deployment.business-central.war//org.jboss.errai.bus.server.servlet.DefaultBlockingServlet.doPost(DefaultBlockingServlet.java:144)
	at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:523)
	at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
	at io.undertow.websocket@2.1.0.Final//io.undertow.websockets.jsr.JsrWebSocketFilter.doFilter(JsrWebSocketFilter.java:173)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.opentracing.contrib.opentracing-jaxrs2//io.opentracing.contrib.jaxrs2.server.SpanFinishingFilter.doFilter(SpanFinishingFilter.java:52)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at deployment.business-central.war//org.uberfire.ext.security.server.SecureHeadersFilter.doFilter(SecureHeadersFilter.java:110)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at deployment.business-central.war//org.uberfire.ext.security.server.SecurityIntegrationFilter.doFilter(SecurityIntegrationFilter.java:70)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.DisableCacheHandler.handleRequest(DisableCacheHandler.java:33)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
	at io.undertow.core@2.1.0.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:370)
	at io.undertow.core@2.1.0.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.base/java.lang.Thread.run(Thread.java:834)

10:36:12,521 ERROR [org.guvnor.common.services.backend.exceptions.ExceptionUtilities] (default task-7) Exception thrown: Retrieving the DMNModel has failed. Make sure the used DMN asset does not produce any compilation errors and that the project does not contain multiple DMN assets with the same name and namespace. In addition, check if the reference to the DMN file is correct in the Settings panel. After addressing the issues, build the project again.: org.drools.scenariosimulation.backend.util.ImpossibleToFindDMNException: Retrieving the DMNModel has failed. Make sure the used DMN asset does not produce any compilation errors and that the project does not contain multiple DMN assets with the same name and namespace. In addition, check if the reference to the DMN file is correct in the Settings panel. After addressing the issues, build the project again.
	at deployment.business-central.war//org.drools.scenariosimulation.backend.util.DMNSimulationUtils.findDMNModel(DMNSimulationUtils.java:56)
	at deployment.business-central.war//org.drools.scenariosimulation.backend.util.DMNSimulationUtils.extractDMNModel(DMNSimulationUtils.java:39)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl.getDMNModel(DMNTypeServiceImpl.java:98)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl.retrieveFactModelTuple(DMNTypeServiceImpl.java:62)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.DMNTypeServiceImpl$Proxy$_$$_WeldClientProxy.retrieveFactModelTuple(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy.getFactModelTuple(DMNSimulationSettingsCreationStrategy.java:145)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy.createSimulation(DMNSimulationSettingsCreationStrategy.java:58)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.DMNSimulationSettingsCreationStrategy$Proxy$_$$_WeldClientProxy.createSimulation(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.ScenarioSimulationBuilder.createSimulation(ScenarioSimulationBuilder.java:41)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.util.ScenarioSimulationBuilder$Proxy$_$$_WeldClientProxy.createSimulation(Unknown Source)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.ScenarioSimulationServiceImpl.create(ScenarioSimulationServiceImpl.java:176)
	at deployment.business-central.war//org.drools.workbench.screens.scenariosimulation.backend.server.ScenarioSimulationServiceImpl$Proxy$_$$_WeldClientProxy.create(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.AbstractRPCMethodCallback.invokeMethodFromMessage(AbstractRPCMethodCallback.java:65)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.ValueReplyRPCEndpointCallback.callback(ValueReplyRPCEndpointCallback.java:40)
	at deployment.business-central.war//org.jboss.errai.bus.server.io.RemoteServiceCallback.callback(RemoteServiceCallback.java:54)
	at deployment.business-central.war//org.jboss.errai.cdi.server.CDIExtensionPoints$2.callback(CDIExtensionPoints.java:448)
	at deployment.business-central.war//org.jboss.errai.bus.server.DeliveryPlan.deliver(DeliveryPlan.java:47)
	at deployment.business-central.war//org.jboss.errai.bus.server.ServerMessageBusImpl.sendGlobal(ServerMessageBusImpl.java:297)
	at deployment.business-central.war//org.jboss.errai.bus.server.SimpleDispatcher.dispatchGlobal(SimpleDispatcher.java:46)
	at deployment.business-central.war//org.jboss.errai.bus.server.service.ErraiServiceImpl.store(ErraiServiceImpl.java:96)
	at deployment.business-central.war//org.jboss.errai.bus.server.service.ErraiServiceImpl.store(ErraiServiceImpl.java:113)
	at deployment.business-central.war//org.jboss.errai.bus.server.servlet.DefaultBlockingServlet.doPost(DefaultBlockingServlet.java:144)
	at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:523)
	at javax.servlet.api@2.0.0.Final//javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
	at io.undertow.websocket@2.1.0.Final//io.undertow.websockets.jsr.JsrWebSocketFilter.doFilter(JsrWebSocketFilter.java:173)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.opentracing.contrib.opentracing-jaxrs2//io.opentracing.contrib.jaxrs2.server.SpanFinishingFilter.doFilter(SpanFinishingFilter.java:52)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at deployment.business-central.war//org.uberfire.ext.security.server.SecureHeadersFilter.doFilter(SecureHeadersFilter.java:110)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at deployment.business-central.war//org.uberfire.ext.security.server.SecurityIntegrationFilter.doFilter(SecurityIntegrationFilter.java:70)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.DisableCacheHandler.handleRequest(DisableCacheHandler.java:33)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)
	at io.undertow.core@2.1.0.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)
	at io.undertow.core@2.1.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at org.wildfly.extension.undertow@19.1.0.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1541)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
	at io.undertow.servlet@2.1.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
	at io.undertow.core@2.1.0.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:370)
	at io.undertow.core@2.1.0.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)
	at org.jboss.threads@2.3.3.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)
	at java.base/java.lang.Thread.run(Thread.java:834)

{code}

",Critical,Mario Fusco,,2020-08-18T04:59:22.000-0400,Retrieving the DMNModel has failed.,Resolved,bug,Bug
2020-09-21T10:40:02.000-0400,DROOLS-5209,Done,"Missing value replacement does not work correctly in new PMML regression model. See reproducer in ""MissingDataRegressionTest"". PR with test can be found here: https://github.com/kiegroup/drools/pull/2835",Major,Gabriele Cardosi,,2020-03-31T10:11:29.000-0400,Missing value replacement does not work correctly in new PMML regression model,Closed,bug,Bug
2020-09-18T06:18:01.000-0400,DROOLS-5486,Done,"With the below test, standard-drl fires but executable-model doesn't.
{code:java}
    @Test
    public void testAfterOnLongFields2() throws Exception {
        String str =
                ""import "" + StockTick.class.getCanonicalName() + "";\n"" +
                ""declare StockTick @timestamp(timeFieldAsLong) end\n"" +
                ""rule R when\n"" +
                ""    $a : StockTick( company == \""DROO\"" )\n"" +
                ""    $b : StockTick( company == \""ACME\"", $a.timeFieldAsLong after[5,8] timeFieldAsLong )\n"" +
                ""then\n"" +
                ""  System.out.println(\""fired\"");\n"" +
                ""end\n"";

        KieSession ksession = getKieSession(getCepKieModuleModel(), str);
        SessionPseudoClock clock = ksession.getSessionClock();
        
        ReteDumper.dumpRete(ksession);

        ksession.insert( new StockTick( ""ACME"" ).setTimeField( 0 ) );
        ksession.insert( new StockTick( ""DROO"" ).setTimeField( 6 ) );

        assertEquals( 1, ksession.fireAllRules() );
    }
{code}",Major,Toshiya Kobayashi,,2020-07-06T03:13:33.000-0400,CEP doesn't evaluate correctly when a bind variable is used as the first temporal parameter in executable model,Resolved,bug,Bug
2020-09-14T07:56:11.000-0400,DROOLS-5608,Done,"Given the sample rule below:
{code:java}
import java.util.*;

global java.util.Set controlSet;

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
 String() from Optional.of($colorVal).orElse(""blah"")
then
 controlSet.add($colorVal);
end{code}
 

Compiling the resulting model fails with:
{code:java}
.../target/generated-sources/drools-model-compiler/main/java/rules/Rules79f20b1c9ba841128eaf4b2dbb336819RuleMethods0.java:[24,129] cannot find symbol
[ERROR] symbol: variable $colorVal
[ERROR] location: class rules.Rules79f20b1c9ba841128eaf4b2dbb336819RuleMethods0{code}

Can be reproduced with _7.43.0-SNAPSHOT_

 ",Major,Luca Molteni,,2020-08-31T11:57:07.000-0400,Cannot use method chaining as source for facts,Resolved,bug,Bug
2020-09-18T11:07:30.000-0400,DROOLS-5106,Done,"Attempting to use an internal Nexus Repository, unable to load Drools KIE Modules using Maven.  This works with 7.29.Final.  Changing to 7.33.Final fails with the following stack trace;

{code:java}
WARNING: Environment variable M2_HOME is not set
Feb 24, 2020 5:12:30 PM org.kie.server.services.impl.KieServerImpl createContainer
SEVERE: Error creating container 'JUnit Test: kie-server' for module 'com.j2eeguys.demo:KieIssueDemo:0.1.0-SNAPSHOT'
java.lang.RuntimeException: Cannot find KieModule: com.j2eeguys.demo:KieIssueDemo:0.1.0-SNAPSHOT
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:186)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:176)
	at org.kie.server.services.impl.KieServerImpl.createContainer(KieServerImpl.java:281)
	at org.kie.server.remote.rest.common.resource.KieServerRestImpl.createContainer(KieServerRestImpl.java:157)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:140)
	at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:509)
	at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:399)
	at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:363)
	at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)
	at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:365)
	at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:337)
	at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:310)
	at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:443)
	at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:233)
	at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:139)
	at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)
	at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:142)
	at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:219)
	at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227)
	at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)
	at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
	at org.eclipse.jetty.servlet.ServletHolder$NotAsyncServlet.service(ServletHolder.java:1401)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:760)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1617)
	at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:226)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1604)
	at org.kie.server.services.impl.security.web.CaptureHttpRequestFilter.doFilter(CaptureHttpRequestFilter.java:42)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1596)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:545)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:501)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1296)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:485)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1562)
	at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1211)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:221)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)
	at org.eclipse.jetty.server.Server.handle(Server.java:500)
	at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:386)
	at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:562)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:378)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:270)
	at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)
	at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
	at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171)
	at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129)
	at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:388)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)
	at java.base/java.lang.Thread.run(Thread.java:834)
{code}
",Major,Luca Molteni,,2020-02-24T21:25:38.000-0500,Local/Internal Maven Repos can not be accessed,Closed,bug,Bug
2020-09-21T03:22:41.000-0400,DROOLS-5653,Done,None,Major,Matteo Mortari,,2020-09-18T03:31:42.000-0400,DMN fix stronglytyped deserialization for collection of temporals,Resolved,bug,Bug
2020-09-18T12:48:31.000-0400,DROOLS-5650,Rejected,"I am porting an existing application Java 7 to Java 11 (Drools 7.42.0). The application works as expected if I compile as Java 1.8 and deploy on Java 11 container (Weblogic 14). But if I compile the same code in Java 11, I get the following error. The only change between 1.8 and 11 is the java compiler level in Maven pom. I have ASM7 as a dependency in Maven.

{{}}

 

{{{{Caused by: java.lang.UnsupportedOperationException: This feature requires ASM7
        at org.mvel2.asm.ClassVisitor.visitNestMember(ClassVisitor.java:236)
        at org.mvel2.asm.ClassReader.accept(ClassReader.java:651)
        at org.mvel2.asm.ClassReader.accept(ClassReader.java:391)
        at org.drools.core.util.asm.ClassFieldInspector.processClassWithByteCode(ClassFieldInspector.java:107)
        at org.drools.core.util.asm.ClassFieldInspector.processClassWithByteCode(ClassFieldInspector.java:114)
        at org.drools.core.util.asm.ClassFieldInspector.<init>(ClassFieldInspector.java:86)
        at org.drools.core.util.asm.ClassFieldInspector.<init>(ClassFieldInspector.java:74)
        at org.drools.core.base.ClassFieldAccessorFactory.getClassFieldInspector(ClassFieldAccessorFactory.java:157)
        at org.drools.core.base.ClassFieldAccessorFactory.getFieldType(ClassFieldAccessorFactory.java:141)
        at org.drools.core.base.ClassFieldAccessorStore.getFieldType(ClassFieldAccessorStore.java:295)
        at org.drools.compiler.rule.builder.PatternBuilder.getValueType(PatternBuilder.java:1079)
        at org.drools.compiler.rule.builder.PatternBuilder.normalizeExpression(PatternBuilder.java:1047)
        at org.drools.compiler.rule.builder.PatternBuilder.buildExpression(PatternBuilder.java:965)
        at org.drools.compiler.rule.builder.PatternBuilder.buildCcdDescr(PatternBuilder.java:942)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:767)
        at org.drools.compiler.rule.builder.PatternBuilder.processConstraintsAndBinds(PatternBuilder.java:620)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:187)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:154)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:136)
        at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
        at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:107)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.internalAddRule(KnowledgeBuilderImpl.java:1183)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1178)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$null$3(KnowledgeBuilderImpl.java:1134)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)
        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
        at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)
        at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:746)}}}}

 

I noticed while debugging that this was caused by an ""enum"" in our code. Drools works fine if we remove the enum and use constants. The error seems to suggest that this could happen to any nested classes. Is there a better way to handle this other than changing our code to remove nested classes and enums?

I see that in the class {{org.drools.core.util.asm.ClassFieldInspector}}, the API is set to ASM5, but MVEL is expecting ASM7. But not sure why it would work in Java 8 and not in Java 11. Any suggestions?

 

{{ClassFieldVisitor(final Class< ? > cls,
                  final boolean includeFinalMethods,
                  final ClassFieldInspector inspector) \{
    super(Opcodes.ASM5);
    this.clazz = cls;
    this.includeFinalMethods = includeFinalMethods;
    this.inspector = inspector;
}}}",Major,Mario Fusco,,2020-09-17T11:30:03.000-0400,"UnsupportedOperationException when using enum in Java 11, works fine in Java 8",Resolved,bug,Bug
2020-09-18T03:27:36.000-0400,DROOLS-5637,Done,definedKeySet is introduced to InputSet/OutputSet by DROOLS-5517 but users should not see it in Swagger/OpenAPI example payload.,Major,Toshiya Kobayashi,,2020-09-14T07:35:55.000-0400,Hide definedKeySet of InputSet/OutputSet from Swagger/OpenApi,Resolved,bug,Bug
2020-09-18T10:25:19.000-0400,DROOLS-5655,Explained,"When trying to compile a rule template with a datasource, the compilers does not compiles  the rows with empty fields.

Here is the code I am using:
{code:java}
ObjectDataCompiler converter = new ObjectDataCompiler();
		
Collection<MyRule> rulesRep = rulerepo.findAll();
InputStream personInputStream = null;
        try {
        personInputStream = ResourceFactory.newClassPathResource(""rules.drt"").getInputStream(); // convert sample.drt in resource to input stream
        } catch (IOException e) {
            e.printStackTrace();
        }
         KieFileSystem kieFileSystem = kieServices.newKieFileSystem();
         
         String personDrl = converter.compile(rulesRep, personInputStream);
         kieFileSystem.write(""src/main/resources/person_rule.drl"", kieServices.getResources().newReaderResource(new StringReader(personDrl)));
        
{code}
This is my datasource, which have two empty fields in two rows.

!image-2020-09-18-11-31-28-879.png!

And this is the result i got for the two rows with an empty fields :
{code:java}
rule ""ageRule_1""
    when

    then
     $person.setStatus(""Infant"");
end
rule ""ageRule_8""
    when

    then
     $person.setStatus(""Old Aged"");
end
{code}
 As you see the LHS are is generated in two rules.

Am i missing something or this is a normal  behaviour when having empty fields.

Thanks in advance.",Major,Mario Fusco,,2020-09-18T06:36:53.000-0400,ObjectDataCompiler converter does not compile all template rules,Resolved,bug,Bug
2020-09-18T08:05:22.000-0400,DROOLS-5649,Done,"h2. 1. Synopsis

In order to allow the execution of dmn.xml files exported by the Signavio Process Manager, the Signavio Profile ([https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-signavio|https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-signavio/src/main/java/org/kie/dmn/signavio/feel/runtime/functions/ZipFunction.java]) contains all custom made functions.

The zip-function that is contained in this profile however expects its parameters in a different format then the Signavio Process Manager exports. This causes the parsing/execution of such dmn.xml files to fail. Customers have to manually adjust the xml file in order to get there executions running. This is both inconvenient and error prone and should be fixed.
h2. 2. Technical Details

As described above the parameters of the zip-function do not match

Signavio Process Manager Export:
{code:java}
zip([""name"", ""age""], [names, ages]){code}
Signavio Profiles expected parameters:
{code:java}
zip([""name"", ""age""], names, ages)
{code}
Codepointer:

[https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-signavio/src/main/java/org/kie/dmn/signavio/feel/runtime/functions/ZipFunction.java]
h2. 3. Acceptance Criteria
 # zip-function exported by the Signavio Process Manager should be executable without manual adjustments
 # [backwards compatible]existing dmn.xml files (with manual adjustments) should still be exectuable

 ",Minor,Matteo Mortari,,2020-09-17T05:28:22.000-0400,[DMN XML] Signavio Profile - ZipFunction: parameter do not match,Resolved,bug,Bug
2020-09-16T08:04:22.000-0400,DROOLS-5639,Done,"InternalKnowledgeBuilder.Empty should delegate all methods to real impl because it is possible to build an empty project and then incrementally add resources (this is what BC normally does)

https://github.com/kiegroup/drools/blob/master/drools-compiler/src/main/java/org/drools/compiler/builder/InternalKnowledgeBuilder.java#L92",Major,Mario Fusco,,2020-09-14T11:58:02.000-0400,InternalKnowledgeBuilder.Empty should delegate all the methods,Resolved,bug,Bug
2020-09-14T14:07:31.000-0400,DROOLS-5640,Done,None,Major,Mario Fusco,,2020-09-14T12:29:15.000-0400,Cannot use a binary expression as a source of a from in executable model,Resolved,bug,Bug
2020-09-10T03:30:06.000-0400,DROOLS-5606,Done,None,Major,Matteo Mortari,,2020-08-30T04:16:23.000-0400,DMN wrong rule index in message when not conforming,Resolved,bug,Bug
2020-09-08T07:43:27.000-0400,DROOLS-5620,Done,"org.drools.compiler.integrationtests.
SerializedPackageMergeTwoSteps2Test.testBuildAndSerializePackagesInTwoSteps2

Failed on [7.39.x daily build #74|https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/KIE/job/7.39.x/job/daily-build-prod/job/daily-build-prod-pipeline-7.39.x/74/testReport/junit/org.drools.compiler.integrationtests/SerializedPackageMergeTwoSteps2Test/testBuildAndSerializePackagesInTwoSteps2/] with java.io.EOFException.

The EOFException is raised when the resource files provided by the first step class (SerializedPackageMergeTwoSteps1Test) are not ready for the second class (SerializedPackageMergeTwoSteps2Test) to consume them.

It happened on #74 build that the second class tried to consume the files faster than the first class was able to finish writing them on disk.

The QE community test jobs ([this one for instance|https://rhba-qe-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/BxMS/job/RHDM-7.8-brew/job/certification/job/community-tests/job/blessed-community-tests-drools-jitting-single/7/testReport/org.drools.compiler.integrationtests/SerializedPackageMergeTwoSteps2Test/]) passed for 7.8.1 build.

 ",Minor,Daniel Rosa,,2020-09-01T10:52:32.000-0400,SerializedPackageMergeTwoSteps2Test random failure,Resolved,bug,Bug
2020-09-04T11:58:15.000-0400,DROOLS-5621,Done,"h3. Description

The serializable class org.drools.core.reteoo.KieComponentFactory declares a non static logger field (currently unused).
{code:java}
Logger logger = LoggerFactory.getLogger(KieComponentFactory.class);
{code}
When serializing the object this causes problems if the used slf4j logger is not serializable. This will also cause problems if the used logger is not available during deserialization.
h3. Desired solution

Either declare the logger field as static or remove it since it is unused.",Major,Mario Fusco,,2020-09-04T10:24:52.000-0400,KieComponentFactory should not declare non static logger field,Resolved,bug,Bug
2020-09-04T14:42:06.000-0400,DROOLS-5619,Done,The copy/past of Decision nodes throws an exception.,Critical,Roger Martinez,,2020-09-03T14:49:22.000-0400,[DMN Designer] Copy/paste is not working for Decision & BusinessKnowledgeModel nodes,Resolved,bug,Bug
2020-09-03T08:11:33.000-0400,DROOLS-5609,Done,"Given the following rule:

 
{code:java}
import java.util.*;

global java.util.Set controlSet;
global org.example.drools.service.DummyService dummyService;

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
 String() from dummyService.dummy(dummyService.dummy($colorVal))
then
 controlSet.add($colorVal);
end{code}
 

The compilation fails with:
{code:java}
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile-1) on project rules: Compilation failure
[ERROR] .../target/generated-sources/drools-model-compiler/main/java/rules/Rules38bbab4141b64289855d5e28d5f95ca6RuleMethods0.java:[24,111] no suitable method found for from(org.drools.model.Global<org.example.drools.service.DummyService>,org.drools.model.Global<org.example.drools.service.DummyService>,org.drools.model.Variable<java.lang.String>,rules.P4C.LambdaExtractor4CA52645EC5319D0363A23796D4739AE)
[ERROR] method org.drools.model.DSL.<T>from(T) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.functions.Function0<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>,org.drools.model.functions.Function1<T,?>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.functions.Function2<A,B,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B,C>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.Variable<C>,org.drools.model.functions.Function3<A,B,C,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,C
[ERROR] (argument mismatch; rules.P4C.LambdaExtractor4CA52645EC5319D0363A23796D4739AE cannot be converted to org.drools.model.functions.Function3<A,B,C,?>))
[ERROR] method org.drools.model.DSL.<A,B,C,D>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.Variable<C>,org.drools.model.Variable<D>,org.drools.model.functions.Function4<A,B,C,D,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,C,D
[ERROR] (actual and formal argument lists differ in length)){code}
This error can be reproduced with version _7.43.0-SNAPSHOT_",Major,Luca Molteni,,2020-08-31T12:10:20.000-0400,Cannot use as parameter of a function the result of another function receiving a parameter of its own,Resolved,bug,Bug
2020-09-02T09:46:31.000-0400,DROOLS-5607,Done,"The following valid accumulate clause:


{noformat}
Set(size>=1) from accumulate(
 $p1:Pattern1(...)
 and
 $p2:Pattern2(...)
 , collectSet($p1)
 ){noformat}

is modified as follows when parsed and re-serialized with DRLParser/DRLDumper:


{noformat}
Set(size>=1) from accumulate(
 ($p1:Pattern1(...)
 and
 $p2:Pattern2(...))
 , collectSet($p1)
 ){noformat}

The latter syntax is rejected by the Drools compiler with the following error:


{noformat}
Error Messages:
 Message [id=1, kieBase=defaultKieBase, level=ERROR, path=org/example/rules.drl, line=14, column=0
 text=Invalid accumulate pattern in rule 'round trips accumulate'.]{noformat}",Major,Mario Fusco,,2020-08-31T05:22:25.000-0400,DRLDumper corrupts accumulate over conjunction of patterns,Resolved,bug,Bug
2020-09-02T12:02:56.000-0400,DROOLS-4519,Out of Date,Do you have a working example of drools running on android?,Major,Mario Fusco,,2019-09-10T16:56:10.000-0400,drools-android example not working,Resolved,bug,Bug
2020-09-02T12:00:58.000-0400,DROOLS-5513,Incomplete Description,"Hi,

While calling buildAll() function, it throws the below error:

Caused by: java.lang.NoClassDefFoundError: org/codehaus/plexus/interpolation/InterpolationException
at org.apache.maven.settings.building.DefaultSettingsBuilderFactory.newInstance(DefaultSettingsBuilderFactory.java:62)
at org.appformer.maven.integration.embedder.MavenSettings.initSettings(MavenSettings.java:91)",Critical,Mario Fusco,,2020-07-17T02:46:13.000-0400,Issue while installing drools engine on wildfly,Resolved,bug,Bug
2020-09-02T10:46:22.000-0400,DROOLS-5615,Duplicate Issue,"Hi I am using 6.5.0.Final of drools and I have a deadlock situation that is hard to reproduce.  We are running about 4 threads each running its own rule engine with the same set of rules but different data.  Below is the deadlock on 3 of the threads and looks like the ProjectClassLoader is at the root of the problem:

 

Found one Java-level deadlock:Found one Java-level deadlock:=============================""InferenceThread-4"":  waiting to lock monitor 0x00007fd5cc044a38 (object 0x0000000081b0ee18, a org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader),  which is held by ""InferenceThread-2""""InferenceThread-2"":  waiting to lock monitor 0x00007fd5cc044ae8 (object 0x0000000081a2a4a8, a org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader),  which is held by ""InferenceThread-1""""InferenceThread-1"":  waiting to lock monitor 0x00007fd5bc01fd28 (object 0x0000000081acc610, a org.drools.core.common.ProjectClassLoader),  which is held by ""InferenceThread-2""
Java stack information for the threads listed above:===================================================""InferenceThread-4"": at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:348) at org.mvel2.util.ParseTools.forNameWithInner(ParseTools.java:2187) at org.mvel2.ParserConfiguration.checkForDynamicImport(ParserConfiguration.java:169) at org.mvel2.ParserConfiguration.hasImport(ParserConfiguration.java:197) at org.mvel2.ParserContext.hasImport(ParserContext.java:373) at org.mvel2.compiler.AbstractParser.createPropertyToken(AbstractParser.java:1399) at org.mvel2.compiler.AbstractParser.nextToken(AbstractParser.java:903) at org.mvel2.compiler.ExpressionCompiler._compile(ExpressionCompiler.java:111) at org.mvel2.compiler.ExpressionCompiler.compile(ExpressionCompiler.java:52) at org.mvel2.MVEL.compileExpression(MVEL.java:810) at org.drools.core.base.mvel.MVELCompilationUnit.compile(MVELCompilationUnit.java:451) at org.drools.core.base.mvel.MVELCompilationUnit.getCompiledExpression(MVELCompilationUnit.java:273) at org.drools.core.rule.constraint.MvelConstraint.createMvelConditionEvaluator(MvelConstraint.java:269) at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:249) at org.drools.core.rule.constraint.MvelConstraint.isAllowedCachedLeft(MvelConstraint.java:227) at org.drools.core.common.TripleBetaConstraints.isAllowedCachedLeft(TripleBetaConstraints.java:118) at org.drools.core.phreak.PhreakJoinNode.doLeftInserts(PhreakJoinNode.java:113) at org.drools.core.phreak.PhreakJoinNode.doNode(PhreakJoinNode.java:76) at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:519) at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:505) at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341) at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301) at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136) at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94) at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194) at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73) at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:970) at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1312) at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1251) at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1359) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1350) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1331) at ActivityInferenceSession.fireRules(ActivityInferenceSession.java:261) at InferenceRunnable.doTryInference(InferenceRunnable.java:226) at InferenceRunnable.doInference(InferenceRunnable.java:129) at InferenceRunnable.run(InferenceRunnable.java:100) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745)""InferenceThread-2"": at java.lang.ClassLoader.loadClass(ClassLoader.java:404) - waiting to lock <0x0000000081a2a4a8> (a org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader) at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadType(ProjectClassLoader.java:394) at org.drools.core.common.ProjectClassLoader.loadType(ProjectClassLoader.java:172) at org.drools.core.common.ProjectClassLoader.loadClass(ProjectClassLoader.java:143) - locked <0x0000000081acc610> (a org.drools.core.common.ProjectClassLoader) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.loadClass(JavaDialectRuntimeData.java:646) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:348) at org.mvel2.util.ParseTools.forNameWithInner(ParseTools.java:2187) at org.mvel2.ParserConfiguration.checkForDynamicImport(ParserConfiguration.java:169) at org.mvel2.ParserConfiguration.hasImport(ParserConfiguration.java:197) at org.mvel2.ParserContext.hasImport(ParserContext.java:373) at org.mvel2.compiler.AbstractParser.createPropertyToken(AbstractParser.java:1399) at org.mvel2.compiler.AbstractParser.nextToken(AbstractParser.java:903) at org.mvel2.compiler.ExpressionCompiler._compile(ExpressionCompiler.java:111) at org.mvel2.compiler.ExpressionCompiler.compile(ExpressionCompiler.java:52) at org.mvel2.MVEL.compileExpression(MVEL.java:810) at org.drools.core.base.mvel.MVELCompilationUnit.compile(MVELCompilationUnit.java:451) at org.drools.core.base.mvel.MVELCompilationUnit.getCompiledExpression(MVELCompilationUnit.java:273) at org.drools.core.rule.constraint.MvelConstraint.createMvelConditionEvaluator(MvelConstraint.java:269) at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:249) at org.drools.core.rule.constraint.MvelConstraint.isAllowedCachedLeft(MvelConstraint.java:227) at org.drools.core.common.TripleBetaConstraints.isAllowedCachedLeft(TripleBetaConstraints.java:118) at org.drools.core.phreak.PhreakJoinNode.doLeftInserts(PhreakJoinNode.java:113) at org.drools.core.phreak.PhreakJoinNode.doNode(PhreakJoinNode.java:76) at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:519) at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:505) at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341) at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301) at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136) at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94) at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194) at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73) at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:970) at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1312) at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1251) at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1359) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1350) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1331) at ActivityInferenceSession.fireRules(ActivityInferenceSession.java:261) at InferenceRunnable.doTryInference(InferenceRunnable.java:226) at InferenceRunnable.doInference(InferenceRunnable.java:129) at InferenceRunnable.run(InferenceRunnable.java:100) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745)""InferenceThread-1"": at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadClass(ProjectClassLoader.java:385) - waiting to lock <0x0000000081acc610> (a org.drools.core.common.ProjectClassLoader) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:348) at com.sun.beans.finder.ClassFinder.findClass(ClassFinder.java:103) at java.beans.Introspector.findCustomizerClass(Introspector.java:1301) at java.beans.Introspector.getTargetBeanDescriptor(Introspector.java:1295) at java.beans.Introspector.getBeanInfo(Introspector.java:425) at java.beans.Introspector.getBeanInfo(Introspector.java:173) at org.apache.commons.beanutils.PropertyUtilsBean.getPropertyDescriptors(PropertyUtilsBean.java:980) at org.apache.commons.beanutils.PropertyUtilsBean.getPropertyDescriptors(PropertyUtilsBean.java:1084) at org.apache.commons.beanutils.PropertyUtilsBean.getPropertyDescriptor(PropertyUtilsBean.java:912) at org.apache.commons.beanutils.PropertyUtilsBean.getSimpleProperty(PropertyUtilsBean.java:1319) at org.apache.commons.beanutils.PropertyUtilsBean.getNestedProperty(PropertyUtilsBean.java:770) at org.apache.commons.beanutils.PropertyUtilsBean.getProperty(PropertyUtilsBean.java:846) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getMethod(ReflectiveAccessorOptimizer.java:1120) at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getMethod(ReflectiveAccessorOptimizer.java:1003) at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain(ReflectiveAccessorOptimizer.java:396) at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor(ReflectiveAccessorOptimizer.java:163) at org.mvel2.ast.ASTNode.optimize(ASTNode.java:159) at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:115) at org.mvel2.ast.BinaryOperation.getReducedValueAccelerated(BinaryOperation.java:117) at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:38) at org.mvel2.ast.Substatement.getReducedValueAccelerated(Substatement.java:44) at org.mvel2.ast.Or.getReducedValueAccelerated(Or.java:34) at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:38) at org.mvel2.ast.Substatement.getReducedValueAccelerated(Substatement.java:44) at org.mvel2.ast.And.getReducedValueAccelerated(And.java:34) at org.mvel2.MVELRuntime.execute(MVELRuntime.java:85) at org.mvel2.compiler.CompiledExpression.getDirectValue(CompiledExpression.java:123) at org.mvel2.compiler.CompiledExpression.getValue(CompiledExpression.java:119) at org.mvel2.compiler.CompiledExpression.getValue(CompiledExpression.java:113) at org.mvel2.MVEL.executeExpression(MVEL.java:929) at org.drools.core.base.mvel.MVELEvalExpression.evaluate(MVELEvalExpression.java:104) at org.drools.core.rule.EvalCondition.isAllowed(EvalCondition.java:118) at org.drools.core.phreak.PhreakEvalNode.doLeftInserts(PhreakEvalNode.java:72) at org.drools.core.phreak.PhreakEvalNode.doNode(PhreakEvalNode.java:56) at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:349) at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301) at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136) at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94) at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194) at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73) at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:970) at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1312) at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1251) at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1359) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1350) at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1331) at ActivityInferenceSession.fireRules(ActivityInferenceSession.java:261) at InferenceRunnable.doTryInference(InferenceRunnable.java:226) at InferenceRunnable.doInference(InferenceRunnable.java:129) at InferenceRunnable.run(InferenceRunnable.java:100) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745)
Found 1 deadlock.

 

I know there has been other issues entered on deadlock with ProjectClassLoader and they have either been fixed in an earlier version or closed as not reproducible.  Its hard to reproduce this as it has only happened in production a few times.  In some of the rules we are running we are using PropertyUtilsBean as you can see in one of the deadlock threads so not sure if that is a cause for concern here or not but in our situation each thread has its own PropertyUtilsBean instance.

 ",Major,Mario Fusco,,2020-09-02T09:44:33.000-0400,Deadlock in ProjectClassLoader,Resolved,bug,Bug
2020-09-02T02:56:15.000-0400,DROOLS-5614,Done,None,Major,Mario Fusco,,2020-09-01T11:37:08.000-0400,Executable model generates a non-compiling beta index when in an equal constraint the left type is not assignable from the right one,Resolved,bug,Bug
2020-09-02T02:38:23.000-0400,DROOLS-5605,Won't Fix,"This issue is related to KOGITO-543. There are still two places to disable for Read Only mode.

h1. Navigate To Expression Editor
Currently an exception is thrown if user tries to open an expression editor for DMN node in read only mode. 
 !Screenshot from 2020-08-27 15-45-51.png|thumbnail! 

h1. Import Data Object
There is button to generate DMN data type according to a java class. This button should be disabled in Read Only mode.
 !Screenshot from 2020-08-27 15-46-21.png|thumbnail! 
",Major,Guilherme Gomes,,2020-08-27T09:52:57.000-0400,[DMN Designer] Enabled elements in Read Only Mode,Closed,bug,Bug
2020-08-31T05:30:34.000-0400,DROOLS-5535,Rejected,"I try to integrate a Drools project in a maven application. The Drools app is running perfectly on his own, but when I try to integrate it in the *quarkus project*, I get a java.lang.NullPointerException.

After some researches, it seems to happen because KieServices.Factory.get() return me null because of kie.conf. 

Drools Site Quote is: Many modules of Drools (e.g. drools-core, drools-compiler) have a file named {{kie.conf}} containing the names of the classes implementing the services provided by the corresponding module. When running Drools in a fat JAR, for example created by the Maven Shade Plugin, those various {{kie.conf}} files need to be merged, otherwise , the fat JAR will contain only 1 kie.conf from a single dependency, resulting into errors. You can merge resources in the Maven Shade Plugin using transformers, like this:

([https://docs.jboss.org/drools/release/7.14.0.Final/drools-docs/html_single/index.html#_building_and_running_drools_in_a_fat_jar])

how can we configure the same for Quarkus Project ? or is there any way to load these file externally ..

 ",Major,Mario Fusco,,2020-07-27T16:47:52.000-0400,Drools - KieServices.Factory.get() returns null,Resolved,bug,Bug
2020-08-27T03:45:56.000-0400,DROOLS-5590,Done,"When compiling the rules, _org.kie:kie-maven-plugin::generateModel_ fails with _sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl_

Given the rule below:
{code:java}
import java.util.Map;
import java.util.List;

global java.util.Set controlSet;


rule ""will execute per each Measurement having ID color""
no-loop
when
 $measurement: Measurement( id == ""color"", $colorVal : val )
 $lst : List() from collect(Measurement())
 $selectedList: List() from accumulate(Measurement($m: this) from $lst, collectList(Map.entry($m, $measurement.getListOfCodes())))

then
 controlSet.add($colorVal);
end{code}
Fails with the following stack exception:
{code:java}
Caused by: java.lang.ArrayStoreException: sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl
 at java.util.stream.Nodes$FixedNodeBuilder.accept (Nodes.java:1230)
 at java.util.stream.ReferencePipeline$3$1.accept (ReferencePipeline.java:195)
 at java.util.ArrayList$ArrayListSpliterator.forEachRemaining (ArrayList.java:1654)
 at java.util.stream.AbstractPipeline.copyInto (AbstractPipeline.java:484)
 at java.util.stream.AbstractPipeline.wrapAndCopyInto (AbstractPipeline.java:474)
 at java.util.stream.AbstractPipeline.evaluate (AbstractPipeline.java:550)
 at java.util.stream.AbstractPipeline.evaluateToArrayNode (AbstractPipeline.java:260)
 at java.util.stream.ReferencePipeline.toArray (ReferencePipeline.java:517)
 at org.drools.modelcompiler.builder.generator.DrlxParseUtil.returnTypeOfMethodCallExpr (DrlxParseUtil.java:186)
 at org.drools.modelcompiler.builder.generator.ToMethodCall.setCursorForMethodCall (ToMethodCall.java:128)
 at org.drools.modelcompiler.builder.generator.ToMethodCall.toMethodCallWithClassCheck (ToMethodCall.java:71)
 at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.methodCallExprParameter (AccumulateVisitor.java:262)
 at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.parseFirstParameter (AccumulateVisitor.java:206)
 at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.visit (AccumulateVisitor.java:186)
 at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.classicAccumulate (AccumulateVisitor.java:145)
 at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.visit (AccumulateVisitor.java:128)
 at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit (ModelGeneratorVisitor.java:139)
 at org.drools.compiler.lang.descr.PatternDescr.accept (PatternDescr.java:288)
 at org.drools.modelcompiler.builder.generator.visitor.AndVisitor.visit (AndVisitor.java:50)
 at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit (ModelGeneratorVisitor.java:86)
 at org.drools.modelcompiler.builder.generator.ModelGenerator.processRule (ModelGenerator.java:186)
 at org.drools.modelcompiler.builder.generator.ModelGenerator.generateModel (ModelGenerator.java:159)
 at org.drools.modelcompiler.builder.ModelBuilderImpl.compileKnowledgePackages (ModelBuilderImpl.java:281)
 at org.drools.modelcompiler.builder.ModelBuilderImpl.buildRules (ModelBuilderImpl.java:209)
 at org.drools.modelcompiler.builder.ModelBuilderImpl.postBuild (ModelBuilderImpl.java:129)
 at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build (CompositeKnowledgeBuilderImpl.java:111)
 at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build (CompositeKnowledgeBuilderImpl.java:97)
 at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages (AbstractKieProject.java:268)
 at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages (AbstractKieProject.java:216)
 at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify (AbstractKieProject.java:80)
 at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject (KieBuilderImpl.java:279)
 at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll (KieBuilderImpl.java:247)
 at org.kie.maven.plugin.GenerateModelMojo.generateModel (GenerateModelMojo.java:146)
 at org.kie.maven.plugin.GenerateModelMojo.execute (GenerateModelMojo.java:106)
 at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137){code}
 

As the title says, this error happens on the _7.43.0-SNAPSHOT_ version as well.",Major,Luca Molteni,,2020-08-20T10:54:11.000-0400, org.kie:kie-maven-plugin:7.43.0-SNAPSHOT:generateModel failed: sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl,Resolved,bug,Bug
2020-08-27T03:46:02.000-0400,DROOLS-5591,Done,"Given the following rule:
{code:java}
import java.util.Map;
import java.util.List;

global java.util.Set controlSet;
global org.example.drools.service.DummyService dummyService;

rule ""will execute per each Measurement having ID color""
no-loop
when
 $m: Measurement( id == ""color"", $colorVal : val )
 String() from dummyService.dummy($m.getId(), $m.getVal())
then
 controlSet.add($colorVal);
end{code}
 

Compiling the generated model throws:
{code:java}
[...]/drools-model-compiler/main/java/defaultpkg/Rules6348cbea36f646fc98d4712bf48686c6RuleMethods0.java:[25,111] no suitable method found for from(org.drools.model.Global<org.example.drools.service.DummyService>,org.drools.model.Variable<org.example.drools.model.Measurement>,org.drools.model.Variable<org.example.drools.model.Measurement>,defaultpkg.P6C.LambdaExtractor6C9C4CCEE9EF61AD2FF71F545BAC12C2)
[ERROR] method org.drools.model.DSL.<T>from(T) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.functions.Function0<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>,org.drools.model.functions.Function1<T,?>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.functions.Function2<A,B,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B,C>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.Variable<C>,org.drools.model.functions.Function3<A,B,C,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,C
[ERROR] (argument mismatch; defaultpkg.P6C.LambdaExtractor6C9C4CCEE9EF61AD2FF71F545BAC12C2 cannot be converted to org.drools.model.functions.Function3<A,B,C,?>))
[ERROR] method org.drools.model.DSL.<A,B,C,D>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.Variable<C>,org.drools.model.Variable<D>,org.drools.model.functions.Function4<A,B,C,D,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,C,D
[ERROR] (actual and formal argument lists differ in length)){code}
 

This error occurs as well with drools version _7.43.0-SNAPSHOT_

 ",Major,Luca Molteni,,2020-08-20T11:51:48.000-0400,Compilation fails on generated model,Resolved,bug,Bug
2020-08-27T03:06:37.000-0400,DROOLS-5592,Done,"Before [DROOLS-5438] the behaviour of sum() was not correct, since it was


{code:java}
sum([]) = 0
{code}


while DMNv1.3 specified that ought to be:


{code:java}
sum([]) = null
{code}

While [DROOLS-5438] fixed the correct result (null value) it was emitting an Error which was never required by the spec, since it mentions:

parameter:

bq. list of 0 or more numbers (...)

result: 

{quote} or null if list is empty{quote}",Major,Matteo Mortari,,2020-08-21T08:57:17.000-0400,DMN align sum([]) without error (followup DROOLS-5438),Resolved,bug,Bug
2020-08-26T02:23:19.000-0400,DROOLS-5596,Done,None,Major,Mario Fusco,,2020-08-25T12:33:02.000-0400,Constraint jitting fails when comparing a value taken from a map with a String literal ,Resolved,bug,Bug
2020-08-24T03:40:07.000-0400,DROOLS-5518,Done,"If we have node names where the difference is only ""First letter is capitalized or not"" (e.g. ""myPerson"" and ""MyPerson""), it will cause a compile error for InputSet and OutputSet. Note that it works fine without typesafe.

- DMNRuntimeTypesTest.testCapitalLetterConflict()
- DMNRuntimeTypesTest.testCapitalLetterConflictWithInputAndDecision()

https://github.com/kiegroup/drools/pull/2993#discussion_r456300584",Major,Toshiya Kobayashi,,2020-07-19T22:29:40.000-0400,DMN strongly typed class compile errors for capitalized/non-capitalized properties conflict,Resolved,bug,Bug
2020-08-14T02:52:46.000-0400,DROOLS-5574,Done,"The issue is after user import sample project and tries to open an Asset, multiple errors appear in server log and the UI is not responsive.",Blocker,Enrique González Martínez,,2020-08-12T10:30:00.000-0400,User can not work with project,Closed,bug,Bug
2020-08-17T07:42:21.000-0400,DROOLS-5576,Done,"In Rule based Test Scenario an alias in Given/Expect facts for either instance or property can be introduced (i.e. in header cells) and override the default instance/property names.
The header cell can be opened in editing mode by either double-clicking on it or arrow key navigation and pressing Enter.

When the editing mode is opened the changes can be either confirmed (by pressing Enter or Tab) or canceled (by pressing Esc).

When the editing mode is canceled using Esc, any consecutive attempt to edit that exact cell is not successful - the editing mode for the cell can't be opened neither by clicking nor pressing any keys.
For others (not yet hit by the issue) the editing mode opens fine up to the moment described above.

The issue is not present in ordinary cells (the lines for actual test scenario definitions below the header cells of the grid.)

The only workaround is to close and open the editor anew.",Major,Jozef Marko,,2020-08-13T03:18:01.000-0400,Unable to further edit scesim header cell when editing mode previously canceled with Esc,Resolved,bug,Bug
2020-08-18T06:16:23.000-0400,DROOLS-5537,Done,"The issue may be caused by RHDM-1393

The performance issue can be spotted when user will try to create a 'Test Scenario' for a DMN model, that includes a PMML model, notice it is not needed to use any logic from the PMML, just include it.

The creation time is an order of magnitude larger for CR2 than it was for CR1.

The attachment contains a project that can be used to follow steps to reproduce. 

The issue can not be reproduced if the DMN model doesn't include a PMML.",Critical,Toni Rikkola,,2020-07-28T05:24:47.000-0400,Performance issue - Test scenario creation for DMN & PMML model,Resolved,bug,Bug
2020-08-18T05:36:07.000-0400,DROOLS-5560,Done,"After updating a KieContainer with a change in a fact type _UnreferencedType_, if instances of another unrelated fact type _ReferencedType_ are modified in a rule, then setting any field of _ReferencedType_ through the _FactType_ API will throw a _ClassCastException_:
{noformat}
java.lang.ClassCastException: class org.example.facts.ReferencedType cannot be cast to class org.example.facts.ReferencedType (org.example.facts.ReferencedType is in unnamed module of loader org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader @59901c4d; org.example.facts.ReferencedType is in unnamed module of loader org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader @5e1fc2aa)
 
 at org.drools.base.org.example.facts.ReferencedType1921143808$setStr.setValue(Unknown Source)
 at org.drools.core.base.ClassFieldWriter.setValue(ClassFieldWriter.java:164)
 at org.drools.core.base.ClassFieldAccessor.setValue(ClassFieldAccessor.java:246)
 at org.drools.core.factmodel.ClassDefinition.set(ClassDefinition.java:278)
 at org.example.reproducer.FactTypeUpdateTest.testUpdateThenSetFactAttribute(FactTypeUpdateTest.java:132)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:566)
 at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
 at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
 at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
 at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
 at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
 at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
 at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)
 at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
 at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)
 at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)
 at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
 at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
 at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
 at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
 at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
 at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
 at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
 at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
 at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
 at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
 at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
 at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58){noformat}
Below the example DRL that triggers the issue.

Initial DRL:
{noformat}
 package org.example.facts 
 declare ReferencedType
 str : String
 end
 declare UnreferencedType
 x : int
 end
 
 package org.example.rules
 import org.example.facts.*;
 rule ""rule updating ReferencedType""
 when
 $x : ReferencedType( )
 then
 $x.setStr(""foo"");
 update($x);
 end{noformat}
Updated DRL:
{noformat}
 package org.example.facts 
 declare ReferencedType
 str : String
 end
 declare UnreferencedType
 x : int
 y : String // NEW ATTRIBUTE ADDED HERE
 end
 
 package org.example.rules
 import org.example.facts.*;
 rule ""rule updating ReferencedType""
 when
 $x : ReferencedType( )
 then
 $x.setStr(""foo"");
 update($x);
 end{noformat}
Throwing code example:
{noformat}
updateToVersion(); // Updates the KieContainer
KieBase kiebase = kieContainer.getKieBase(""ExampleKiebase"");
FactType referencedType = kiebase.getFactType(""org.example.facts"", ""ReferencedType""); 
Object instance = referencedType.newInstance();
referencedType.set(instance, ""str"", ""bar""); // Throws ClassCastException{noformat}
 

This is similar to DROOLS-5449, but in this case we instantiate the fact from the updated fact type, so we believe that there is no API misuse.",Major,Mario Fusco,,2020-08-05T11:33:26.000-0400,ClassCastException on Fact Attribute Set After UpdateToVersion,Resolved,bug,Bug
2020-08-17T08:37:59.000-0400,DROOLS-5579,Done,"As demonstrated by this test [https://github.com/kiegroup/drools/blob/master/drools-compiler/src/test/java/org/drools/compiler/common/MarshallerTest.java#L207] an accumulate rule doesn't refire after deserialization. However if the accumulate contains more than one accumulating function, e.g. the accumulate in that test is rewritten as 
{code:java}
 accumulate ( Person ( getName().startsWith(\""M\""), $age : age );
              $sum : sum( $age ), $max : max( $age )

{code}
it mistakenly fires once again after deserialization.",Major,Mario Fusco,,2020-08-17T03:15:27.000-0400,Unwanted refiring after deserialization of a rule contaning an accumulate with more than one accumulating function,Resolved,bug,Bug
2020-08-11T08:53:46.000-0400,DROOLS-5511,Done,"The Test scenario has a a collection editor popup to facilitate providing list of values.

The issue is once provided values are saved, the popup disappear however test scenario grid lost focus and user can not control it by keyboard.

For comparison, if user decides to discard changes in collection editor popup, and click just close, the grid does not lost focus and is still interactive. ",Minor,Jozef Marko,,2020-07-16T06:58:34.000-0400,Grid keyboard control after collection editor in use ,Resolved,bug,Bug
2020-08-07T04:51:43.000-0400,DROOLS-5538,Done,"If we have an itemDefinition with isCollection=""true"", it will cause a compile error for InputSet and OutputSet when typesafe is enabled. Note that itemComponent with isCollection=""true"" works fine.

    DMNRuntimeTypesTest.testCollectionType()

{code:xml}
  <semantic:itemDefinition label=""tPersonList"" name=""tPersonList"" isCollection=""true"">
    <semantic:typeRef>tPerson</semantic:typeRef>
  </semantic:itemDefinition>
{code}

Consider separating TypeSafe specific tests:
https://github.com/kiegroup/drools/pull/2993#discussion_r463500865",Major,Toshiya Kobayashi,,2020-07-28T22:45:07.000-0400,DMN strongly typed class compile errors for collection types,Resolved,bug,Bug
2020-08-07T07:12:34.000-0400,DROOLS-5516,Done,None,Major,Toni Rikkola,,2020-07-19T05:33:39.000-0400,Date field in Guided rule template is not displaying correct date,Resolved,bug,Bug
2020-08-05T02:34:49.000-0400,DROOLS-5534,Done,"A user's decision service deployed on KIE server receives REST commands from client, MarshallingException due to class loading failure occurs during JSON unmarshalling before the commands are processed. I attached a simplified reproducer reproducer_02699633_1.zip expressing the issue, and the error message is like below:
{noformat}
Caused by: com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve type id 'com.example.reproducer.common.params.ContactParam' as a subtype of [simple type, class com.example.reproducer.common.base.IRuleParam]: no such class found
at [Source: (String)""{  ""lookup"" : ""ksession-rules"",  ""commands"" : [ {    ""insert"" : {      ""object"" : {        ""com.example.reproducer.common.base.Fact1"": {          ""parameter"" : {            ""@class"" : ""com.example.reproducer.common.params.ContactParam"",            ""contactInfo"" : 123456789          }        }      }    }  },  { ""fire-all-rules"" : """" }  ]}""; line: 1, column: 185] (through reference chain: org.drools.core.command.runtime.BatchExecutionCommandImpl[""commands""]->java.util.ArrayList[0]->org.drools.core.command.runtime.rule.InsertObjectCommand[""object""]->com.example.reproducer.common.base.Fact1[""parameter""])
{noformat}
For full error messages, see full_error_messages.txt in Attachment.

The user's decision service (kjar) uses classes in another module jar as a library. ContactParam class which is a sub type of IRuleParam interface is in the kjar and IRuleParam interface is in the module jar.
 Also, @JsonTypeInfo(use = Id.CLASS) annotation is given to IRuleParam like below in order for JSON implementation to recognize a given class to Fact1.parameter as a sub type of IRuleParam.
{code:java}
@JsonTypeInfo(use = Id.CLASS)
public interface IRuleParam {
}
{code}
Both classes contained in the module jar and classes in the kjar should be loaded.",Major,Toshiya Kobayashi,,2020-07-27T02:26:01.000-0400,MarshallingException occurs during REST request (JSON) unmarshalling in KIE server.,Resolved,bug,Bug
2020-08-05T02:37:43.000-0400,DROOLS-5542,Done,"Given a rule as such (modified from the standard example):

 
{code:java}
global org.example.drools.service.DummyService dummyService;

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
 $var1: String() from dummyService.dummy(""a"");
 $var2: String() from dummyService.dummy(""b"");
 $var3: String() from dummyService.dummy(""c"");
 String() from dummyService.dummy($var1, $var2, $var3)
then
 controlSet.add($colorVal);
end{code}
The _org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile_ fails with:
{code:java}
no suitable method found for from(org.drools.model.Global<org.example.drools.service.DummyService>,org.drools.model.Variable<java.lang.String>,org.drools.model.Variable<java.lang.String>,org.drools.model.Variable<java.lang.String>,rules.PFD.LambdaExtractorFD1FA74D5FA8CFA329D97E34A42287FA)
[ERROR] method org.drools.model.DSL.<T>from(T) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.functions.Function0<T>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<T>from(org.drools.model.Variable<T>,org.drools.model.functions.Function1<T,?>) is not applicable
[ERROR] (cannot infer type-variable(s) T
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.functions.Function2<A,B,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B,C>from(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.Variable<C>,org.drools.model.functions.Function3<A,B,C,?>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,C
[ERROR] (actual and formal argument lists differ in length)){code}
 

So the DSL.from() cannot accept more than 2 variables.

 ",Major,Luca Molteni,,2020-07-29T10:40:16.000-0400,org.apache.maven.plugins:maven-compiler-plugin fails on the generated model,Resolved,bug,Bug
2020-08-05T02:37:57.000-0400,DROOLS-5549,Done,"Given the example rule below:
{code:java}
import org.example.drools.model.*;
import java.util.Map;
global java.util.Set controlSet;


function String dummyFunction(Map m) {
 return ""test"";
}

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
 $val: String() from dummyFunction(Map.of($colorVal, ""something""))))
then
 controlSet.add($colorVal);
end{code}
 

compiling the rule with kie-maven-plugin, it throws the error:
{code:java}
...target/generated-sources/drools-model-compiler/main/java/rules/Rules57a04348fad44377b9eacd9bb5741999RuleMethods0.java:[30,117] cannot find symbol
[ERROR] symbol: variable $colorVal
[ERROR] location: class rules.Rules57a04348fad44377b9eacd9bb5741999RuleMethods0{code}
 

Same rule when not pre-compiled runs fine.

 ",Major,Luca Molteni,,2020-07-30T09:39:43.000-0400,Drools model compilation fails when using object builders within method calls,Resolved,bug,Bug
2020-08-05T02:37:51.000-0400,DROOLS-5548,Done,"Given the example rule below (based on the drools example rule)

 
{code:java}
global java.util.Set controlSet;

declare A
 x: String
end

declare B
 a: A
end

function String dummyFunction(B b) {
 return ""test"";
}

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
 $b: B()
 $val: String() from dummyFunction($b.a)
then
 controlSet.add($colorVal);
end{code}
 

 

When compiling the rule with _kie-maven-plugin_ it fails with :
{noformat}
...target/generated-sources/drools-model-compiler/main/java/rules/Rules5937a2896da74f01bfa36d294bcf0858RuleMethods0.java:[32,107] cannot find symbol
[ERROR] symbol: variable $b
[ERROR] location: class rules.Rules5937a2896da74f01bfa36d294bcf0858RuleMethods0{noformat}
It transpiles and compiles fine with: 
{code:java}
$val: String() from dummyFunction($b){code}
 

This can probably be reproduced on all version. 

It works when the rules are not pre-compiled.",Major,Luca Molteni,,2020-07-30T09:23:29.000-0400,Model compiler cannot generate declaration from a function call,Resolved,bug,Bug
2020-08-05T09:28:08.000-0400,DROOLS-5550,Done,"Given the example rule:
{code:java}
global java.util.Set controlSet;


rule ""will execute per each Measurement having ID color""
salience Salience.NORMAL
no-loop
when
 Measurement( id == ""color"", $colorVal : val )
then
 controlSet.add($colorVal);
end{code}
when compiling the rules, the _org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile_  throws:
{code:java}
Compilation failure
[ERROR] .../target/generated-sources/drools-model-compiler/main/java/rules/Rules1b5c9512461f45df875fa525fff06227RuleMethods0.java:[28,109] no suitable method found for supply(int)
[ERROR] method org.drools.model.DSL.<A,R>supply(org.drools.model.Variable<A>,org.drools.model.functions.Function1<A,R>) is not applicable
[ERROR] (cannot infer type-variable(s) A,R
[ERROR] (actual and formal argument lists differ in length))
[ERROR] method org.drools.model.DSL.<A,B,R>supply(org.drools.model.Variable<A>,org.drools.model.Variable<B>,org.drools.model.functions.Function2<A,B,R>) is not applicable
[ERROR] (cannot infer type-variable(s) A,B,R
[ERROR] (actual and formal argument lists differ in length)){code}
 

The same rule works fine when the rule is not pre-compiled.",Major,Mario Fusco,,2020-07-30T09:53:10.000-0400,Drools model compiler fails when assigning salience from a static constant,Resolved,bug,Bug
2020-08-05T08:56:54.000-0400,DROOLS-5521,Done,"This issue is caused by DROOLS-5442.

It can be spotted when user start to edit last cell of DMN Decision table row and finish the edit mode by pressing TAB key. It causes an attempt to select next cell of the row and an exception is thrown. See the attached video.

It can be also spotted when editing last cell of Guided Decision Table or Test Scenario

h3. Acceptance criteria
Check pressing TAB when edit mode of last cell is active for:
- Guided Decision Table
- Test Scenario
- DMN Decision Table
- DMN Relation
- DMN Context
- DMN Function
- DMN Literal Expression
- DMN List",Major,Jozef Marko,,2020-07-22T07:53:39.000-0400,OutOfBound Exception for last Table cell,Resolved,bug,Bug
2020-08-03T11:34:29.000-0400,DROOLS-5543,Duplicate Issue,"Pressing <tab> to exit a cell in a Guided Decision Table throws a client-side exception.

See the attached screenshot. Pressing <tab> in the {{Fred}} cell throws the exception.

Clicking outside of it (to loose focus) is OK.",Major,Jozef Marko,,2020-07-29T10:49:49.000-0400,[Guided Decision Table Editor] Pressing <tab> to exit cell throws client-side exception,Closed,bug,Bug
2020-08-04T03:55:55.000-0400,DROOLS-2638,Won't Fix,"https://github.com/kiegroup/kie-wb-common/pull/1890

@Rikkola The issue reported in the JIRA seem to be resolved; however I noticed (given an enumeration defined as Person.name: ['a', '""b, c""', 'd']) that the generated DRL is Person( name == ""b, c"" ) whereas should it be Person( name == ""\""b, c\"""" )? Closing and re-opening the decision table keeps the correct values selected in the table. I also tried defining the BRL fragment to use a literal value for the enumeration and this gave the same results (DRL possibly incorrect, but re-opening and editing the column was OK).

I also checked Guided Rules and the DRL is equally wrong however re-opening the rule also led to the wrong enumeration value being selected in the editor (it selected the first option by default) and the DRL showing the same (i.e. I set it to ""b, c"" and re-opening the file selected a).",Major,Toni Rikkola,,2018-06-15T13:44:19.000-0400,Enumerations drop quotes when double quotes are used,Closed,bug,Bug
2020-08-03T10:48:41.000-0400,DROOLS-5457,Done,The upload first creates an empty file and then streams the content into the file. These is a gap where indexing can start before content is in place.,Major,Toni Rikkola,,2020-06-26T05:41:58.000-0400,XLS Decision table: File indexed before content is saved,Resolved,bug,Bug
2020-08-03T12:01:34.000-0400,DROOLS-5545,Done,"Drls no longer built.

Give the rule:

 
{code:java}
package rules;

import org.example.drools.model.*;

import org.apache.commons.lang3.StringUtils;

global java.util.Set controlSet;

rule ""will execute per each Measurement having ID color""
no-loop
when
 Measurement( id == ""color"", $colorVal : val );
then
 controlSet.add($colorVal);
end

rule ""will execute per each Measurement having ID color #2""
no-loop
when
 Measurement( !(StringUtils.isNotBlank(id)), $colorVal : val );
then
 controlSet.add($colorVal);
end

rule ""will execute per each Measurement having ID color #3""
no-loop
when
 Measurement( !(id != ""color""), $colorVal : val );
then
 controlSet.add($colorVal);
end{code}
When the engine starts it throws:
{code:java}
StringIndexOutOfBounds begin 0, end -1, length 18{code}
Commenting out the last rule, it works.",Major,Mario Fusco,,2020-07-29T11:36:55.000-0400,Cannot create KieBase - StringIndexOutOfBounds ,Resolved,bug,Bug
2020-08-04T05:19:30.000-0400,DROOLS-5553,Done,"Since the method getMetadata in DMNContextFPAImpl is returning every time a new object, the consumer that is setting a property in the metadata (like the kogito tracing addon that is storing the execution id) can not retrieve it back. ",Major,Jacopo Rota,,2020-07-30T12:41:05.000-0400,In DMNContextFPAImpl getMetadata returns always a new object,Resolved,bug,Bug
2020-08-03T11:49:24.000-0400,DROOLS-2722,Won't Fix,"*Problem:*
When the list of properties/attributes in a particular model are huge (more than 20), not able to drag the last property of the model to the decision tree after scrolling down to the page where the property reside.

*Steps to Reproduce:*
* Refer to the attached file “unable to drag model to decision tree.gif”
* Expand all the model in the Guided Decision Trees
* Unable to drag and add the bottom property to the decision 

*Expected Result:*
Just suggestion, screen should scroll to the top where the decision tree resides when drag toward to the decision tree, or the split the model and decision tree to two different section with different scroll bar.

*Justification:*
Having more than 20 properties/attributes under a model such as applicant / customer is common in the banking section for rule check. Even the decision tree is not officially released, everything works fantastic except this critical feature which prevent us from using it. 
",Major,Toni Rikkola,,2018-07-11T07:45:42.000-0400,[Guided Decision Tree] Unable to drag model to Decision tree when the model is huge,Closed,bug,Bug
2020-07-31T05:19:30.000-0400,DROOLS-5489,Done,"Reproducer: https://github.com/tarilabs/reproducer20200430

To reproduce:
{code}
mvn clean compile -X
{code}

Example:
 !image-2020-04-30-16-32-07-591.png! ",Major,Luca Molteni,,2020-07-06T07:56:34.000-0400,Support dmn-validation project with the executable model,Resolved,bug,Bug
2020-08-01T04:10:22.000-0400,DROOLS-5544,Done,"When rules are compiled using _kie-maven-compile_, the event handlers implementing 

_RuleRuntimeEventListener_ no longer have the rule that triggered them set (_ObjectInsertedEvent.getRule()_ is null) . 

 

 
{code:java}
public class MyListener implements RuleFactEventListener {

@Override
public void objectInserted(final ObjectInsertedEvent event) {
 System.out.println(event.getRule()); // Throws exception
}
{code}
 

 

It only happens when the compiler plugin is invoked. If the rules are used as such, the event is properly set.

 ",Major,Mario Fusco,,2020-07-29T11:01:25.000-0400,RuleRuntimeEventListener not containing the rule that triggered it when rules are compiled,Resolved,bug,Bug
2020-07-31T04:10:01.000-0400,DROOLS-5546,Done,"Reproducer
{code:java}
 @Test
public void testAccumulateWithManyBindings() {
    String str =
            ""import "" + Person.class.getCanonicalName() + "";\n"" +
            ""rule R when\n"" +
            ""  accumulate (\n"" +
            ""       Person($age : age, $name : name), $max : max( $name.length() ) "" +
            ""         )"" +
            ""then\n"" +
            ""  insert($max);\n"" +
            ""end"";

    KieSession ksession = getKieSession( str );

    ksession.insert( new Person( ""Mario"", 40 ) );
    ksession.insert( new Person( ""Mark"", 40 ) );
    ksession.insert( new Person( ""Luca"", 40 ) );

    ksession.fireAllRules();

    List<Number> results = getObjectsIntoList(ksession, Number.class);
    assertEquals(1, results.size());
    assertEquals(5, results.get(0).intValue());
}{code}",Major,Mario Fusco,,2020-07-30T05:26:46.000-0400,An accumulate with more than one binding is wrongly generated in the executable model,Resolved,bug,Bug
2020-07-31T05:19:15.000-0400,DROOLS-5536,Done,"Reproducer
{code:java}
@Test
public void testNotWithDereferencingConstraint() {
    final String drl1 =
            ""package org.drools.compiler\n"" +
            ""import "" + Person.class.getCanonicalName() + "";\n"" +
            ""rule R when\n"" +
            ""  $p: Person( $name : name )\n"" +
            ""  not Person( name.length == $name.length )\n"" +
            ""then\n"" +
            ""end\n"";

    KieSession ksession = getKieSession( drl1 );

    ksession.insert( new Person(""test"", 18) );
    assertEquals( 0, ksession.fireAllRules() );
} {code}",Major,Luca Molteni,,2020-07-28T03:08:19.000-0400,Not pattern dereferencing a variable in a constraint is wrongly evaluated using the executable model,Resolved,bug,Bug
2020-07-30T10:30:55.000-0400,DROOLS-5477,Done,None,Major,Luca Molteni,,2020-07-03T05:53:47.000-0400,Support instance of in the same way as Legacy Drools,Resolved,bug,Bug
2020-07-30T12:10:28.000-0400,DROOLS-5547,Done,None,Major,Mario Fusco,,2020-07-30T06:11:44.000-0400,Incremental compilation from an empty project fails with an UnsupportedOperationException,Resolved,bug,Bug
2020-07-30T06:38:36.000-0400,DROOLS-5541,Duplicate Issue,None,Major,Daniele Zonca,,2020-07-29T05:37:06.000-0400,Exception thrown after creating a DMN File on a new Project,Resolved,bug,Bug
2020-06-30T11:16:24.000-0400,DROOLS-5332,Done,"Using the referenced file:
https://kiegroup.github.io/kogito-online/?file=https://gist.githubusercontent.com/r00ta/89e8688889a36e16d74789cf3bb92565/raw/ba345e57efef37b4d180dd725cebeb80b5e214b6/fraud.dmn#/editor/dmn

The User is unable to edit the Business Knowledge Model nodes for the following nodes:
- Risk Rating for Last Transaction Amount
- Risk Rating for last 24 hours Transactions

The {{kogito-tooling}} version reports the following to the console.
{code}
Error: JavaScriptException: (TypeError) : Cannot read property 'd' of null
    at Xys (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:30330)
    at tes.a6r [as FW] (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:31966)
    at Ist (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:27657)
    at ntt.ptt [as yW] (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:31973)
    at Q4r (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:29779)
    at roy.soy [as J7] (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:31999)
    at _Vr (/kogito-online/org.kie.workbench.common.dmn.showcase.DMNKogitoRuntimeWebapp-0.js:13043)
{code}
Sorry I have no debugged myself further.

h3. Acceptance criteria:
- Open BKM editor on business central
- VS Code
- Online editor
- Desktop app
- Github extension
- Check the Documentation tab can be viewed too",Major,Valentino Pellegrino,,2020-05-14T11:11:08.000-0400,[DMN Designer] Unable to open BKM editor ,Resolved,bug,Bug
2020-06-15T07:56:00.000-0400,DROOLS-5391,Done,"When calling from DMN(BKM) an external static Java function,
and the java function parameters type is coming from an external (maven) dependencies,
the classloader used to resolve the type is not always the correct one.

This JIRA fixes this problem",Major,Matteo Mortari,,2020-05-31T06:10:35.000-0400,DMN external Java fn parameter resolution,Resolved,bug,Bug
2020-07-03T08:04:22.000-0400,DROOLS-5288,Done,"Reproducer: https://github.com/tarilabs/reproducer20200430

To reproduce:
{code}
mvn clean compile -X
{code}

Example:
 !image-2020-04-30-16-32-07-591.png! ",Major,Luca Molteni,,2020-04-30T10:32:20.000-0400,Execution default-generateModel ... failed: Scope expression for ... is not present!,Resolved,bug,Bug
2020-06-16T08:20:20.000-0400,DROOLS-3799,Done,"Check that i18n works for all widgets (menu, rightpanel, cheatsheet, etc) and eventually fix it.",Major,Yeser Amer,,2019-03-27T11:18:08.000-0400,Check and fix i18n,Resolved,bug,Bug
2020-07-24T01:57:07.000-0400,DROOLS-5317,Done,None,Major,Yeser Amer,,2020-05-11T10:23:48.000-0400,Scenario Simulation shows misleading data type if DMN applies a constraint,Resolved,bug,Bug
2020-06-15T08:46:41.000-0400,DROOLS-5229,Done,"The attached DMN decision project was built using Business Central 7.34.0.Final.  In this project, the dmn model `Math Functions.dmn` invokes business knowledge model `Quotient` from dmn model `Divide.dmn`. Invoking the ValidateDMN mojo (enabled by default) from the kie-maven-plugin fails XML Validation. One can get past this error by disabling DMNValidation with the following configuration in the pom (though disabling DMNValidation for an XML Schema validation also prevents finding FEEL parser errors):
```
  <build>
    <plugins>
      <plugin>
        <groupId>org.kie</groupId>
        <artifactId>kie-maven-plugin</artifactId>
        <version>7.34.0.Final</version>
        <extensions>true</extensions>
        <!-- Can get past xml validation error by disabling the ValidateDMN Mojo -->
        <configuration>
          <validateDMN>disabled</validateDMN>
        </configuration>
      </plugin>
    </plugins>
  </build>
```
When one combines the two dmn models into a single model, the XML Validation succeeds (this example is not supplied, but is trivial to re-build).",Major,Guilherme Gomes,,2020-04-08T12:29:25.000-0400,DMNValidate mojo fails XMLSchema validation with included models,Resolved,bug,Bug
2020-06-19T06:47:31.000-0400,DROOLS-5291,Done,"If user generate a scesim file using vs code extention it is not comparable with BC.
Use Vscode generated files [^Traffic.zip] 
",Minor,Yeser Amer,,2020-04-17T10:43:36.000-0400,Import of empty scesim file leads to Unexpected error,Resolved,bug,Bug
2020-06-15T10:36:40.000-0400,DROOLS-5423,Done,"Kie-pmml-new is broken when running under Java 11.

This is due to the missing jaxb api/implementations.

Solution should be to add a java-11 profile inside kie-pmml-compiler-commons/pom.xml

 
{code:java}
// <profiles>
  <profile>
    <id>java11-pmml</id>
    <activation>
      <jdk>[11,)</jdk>
    </activation>
    <properties>
      <jaxb.api.version>2.3.2</jaxb.api.version>
    </properties>
    <dependencies>
        <dependency>
      <groupId>org.jboss.spec.javax.xml.bind</groupId>
      <artifactId>jboss-jaxb-api_2.3_spec</artifactId>
    </dependency>
     <dependency>
      <groupId>org.glassfish.jaxb</groupId>
      <artifactId>jaxb-runtime</artifactId>
    </dependency>
    </dependencies>
  </profile>
</profiles>
{code}",Critical,Gabriele Cardosi,,2020-06-09T12:01:35.000-0400,Fix java 11 usage with kie-pmml-new,Closed,bug,Bug
2020-06-25T00:40:31.000-0400,DROOLS-3426,Won't Do,The search box for data types contains two crosses on Edge. See the attachement.,Optional,Daniel José dos Santos,,2018-12-12T06:41:44.000-0500,[DMN Designer] [Edge] Two crosses in search fields,Closed,bug,Bug
2020-07-17T03:54:08.000-0400,DROOLS-5419,Done,"Defect: If user renames Guided rules used in Test Scenario, then coverage report shows both original and renamed versions.
See  [^renamed.webm] ",Major,Toni Rikkola,,2020-06-08T10:58:46.000-0400,Scenario Coverage Report counts and shows previous names of renamed rules,Resolved,bug,Bug
2020-06-25T00:41:14.000-0400,DROOLS-3125,Won't Do,"If user tries to cancel data type edit operation, the unexpected error dialog appears and contains this error message:
*Uncaught exception: Exception caught: (Error) : Could not complete the operation due to error 800a025e. Caused by: (Error) : Could not complete the operation due to error 800a025e.*

Occurs just on Microsoft Edge",Major,Daniel José dos Santos,,2018-10-12T04:44:25.000-0400,[DMN Designer][Edge] Cancel data type edit operation throws an error,Closed,bug,Bug
2020-07-07T14:23:54.000-0400,DROOLS-3084,Done,"The expand/collapse feature is not keeping the state after a data type update. See:
 !DROOLS-3084-steps.gif|thumbnail! 
",Minor,Guilherme Gomes,,2018-10-05T18:34:14.000-0400,[DMN Designer] Data Types - The expand/collapse feature is not keeping the state after a data type update,Closed,bug,Bug
2020-07-10T13:58:22.000-0400,DROOLS-5384,Done,"When I import Traffic_Violation sample, opened a ""Fine"" decision table. The rightmost column's header is empty (""Enter Text"") and I get an error pop-up when clicked. (At the first time, it raises an error popup. After that, the header is unresponsive)

See screenshot.

Chrome 80.0.3987.122 
Firefox 60.6.2

h3. Acceptance criteria
- DMN grids are not affected
- GDST grid is unaffected
- Scesim grid is unaffected",Major,Daniel José dos Santos,,2020-05-27T06:45:41.000-0400,Clicking rightmost column's header in DMN decision table raises an error,Resolved,bug,Bug
2020-07-08T01:17:43.000-0400,DROOLS-3271,Cannot Reproduce,"Reported by [~tirelli]
{quote}
When I accidentally double clicked on a connector action in the DRD, I got a bunch of error messages on the screen.
{quote}",Minor,Guilherme Gomes,,2018-11-07T04:45:41.000-0500,[DMN Designer] Double-clicking connectors in DRD throws exceptions,Closed,bug,Bug
2020-07-14T09:51:49.000-0400,DROOLS-5262,Done,"When you delete java.lang.Number from project's imports in the business central and you create some asset in this project, java.lang.Number is still present in External imports of the created asset.",Optional,Jozef Marko,,2020-04-21T08:07:00.000-0400,java.lang.Number import remains in the list of imports after deletion,Resolved,bug,Bug
2020-06-15T03:14:55.000-0400,DROOLS-5409,Done,None,Major,Alessandro Costa,,2020-06-04T03:24:49.000-0400,AfterInvokeBKMEvent fired by DMN runtime doesn't contain metadata,Resolved,bug,Bug
2020-06-19T06:47:24.000-0400,DROOLS-5223,Done,"If user import Scesim file that have xml tag unclosed, 
then user gets warning, but loading popup is not disappearing 
and user cannot proceed. ",Major,Yeser Amer,,2020-04-06T11:16:31.000-0400,User cannot open malformed scesim file. Loading popup is spining infinitive times,Resolved,bug,Bug
2020-06-23T02:05:40.000-0400,DROOLS-5079,Explained,"it gives a compile error.
['one','two','something with a ' in its name','four']",Major,Guilherme Gomes,,2020-02-19T04:23:20.000-0500,enumeration in business central doens't handle well items with a ' in it,Closed,bug,Bug
2020-07-28T10:52:38.000-0400,DROOLS-5509,Duplicate,None,Major,Toni Rikkola,,2020-07-15T09:27:37.000-0400,Date field in Guided rule template is not displaying correct date,Closed,bug,Bug
2020-07-24T09:02:16.000-0400,DROOLS-5531,Done,None,Major,Mario Fusco,,2020-07-24T08:58:17.000-0400,Generation of executable model for large rule bases fail for a missing import,Resolved,bug,Bug
2020-07-21T09:51:55.000-0400,DROOLS-5507,Done,Issues needing fixing. ,Major,Toni Rikkola,,2020-07-14T12:35:42.000-0400,Converting excel spreadsheet to guided decision table causes an exception,Resolved,bug,Bug
2020-07-20T12:25:42.000-0400,DROOLS-5514,Done,None,Major,Mario Fusco,,2020-07-17T11:49:34.000-0400,Wrong behavior of @watch() annotation in property reactivity when excluding all but one property,Resolved,bug,Bug
2020-07-20T02:43:44.000-0400,DROOLS-5515,Out of Date,"[htt|https://docs.drools.org/5.2.0.Final/drools-expert-docs/html_single/???#d0e6150] [ps://docs.drools.org/5.2.0.Final/drools-expert-docs/html_single/???#d0e6150|https://docs.drools.org/5.2.0.Final/drools-expert-docs/html_single/???#d0e6150]

 

document ends with Chapter 5.8 but should have lots more.",Minor,Mario Fusco,,2020-07-17T17:06:50.000-0400,"Document Ends with Chapter 5.8, should have more",Resolved,bug,Bug
2020-07-15T12:40:02.000-0400,DROOLS-5494,Done,"Using Drools version 7.33.0.Final as well as 7.33.0.Final-redhat-00002.

When trying to upload an Excel Spreadsheet of type .xlsx I am getting a lot of error trying to upload the file. I am able to import the Excel file via the import Asset button, but not by using the ""Add Asset"" button and adding a new Spreadsheet asset and then uploading the Excel file.

So I am using OpenJDK 11.0.7 and I think that is the reason for the errors.

There are a lot of issues with the libraries from org.apache.poi version 3.17 (e.g. poi-3.17.jar, poi-ooxml-3.17.jar and poi-ooxml-schemas-3.17.jar) which are all part of the drools or decision-central war file. Using OpenJDK you have to use at least version 4.1.1 and update a few other dependancies like commons-compress-1.19.jar and xmlbeans-3.1.0.jar to get it to work.

 

I do not have a specific excel spreadsheet, but any spreadsheet of type .xlsx will cause the error when trying to upload it.",Major,Mario Fusco,,2020-07-07T19:09:02.000-0400,Uploading Excel Spreadsheets using OpenJDK 11,Resolved,bug,Bug
2020-07-16T05:18:11.000-0400,DROOLS-5495,Done,"1. Install eclipse (tested with eclipse-java-2020-03)
2. ""Install New Software"" to install ""Drools and jBPM"" plugin via https://download.jboss.org/drools/release/7.39.0.Final/org.drools.updatesite/
3. Create a project -> Other -> Drools -> Drools Project
  ->  Choose second icon (= a project with sample assets), Press Next
  -> For ""Build the project using:""
     A) Java and Drools runtime classes 
        -> Use ""Manage Runtime Definision"" to create a runtime which points to drools-distribution-7.39.0.Final/binaries
      B) Maven
  => The issue reproduced in both approaches
4. When you edit DRL or build a project in Eclipse, an error pop-up is raised. See attached DroolsBuilderError.png
{noformat}
Errors occurred during the build.
Errors running builder 'Drools Builder' on project 'Drools_2'.
org/apache/commons/math3/util/ArithmeticUtils
{noformat}

.metadata/.log 
{noformat}
!ENTRY org.eclipse.core.resources 4 75 2020-07-08 11:14:56.027
!MESSAGE Errors occurred during the build.
!SUBENTRY 1 org.drools.eclipse 4 75 2020-07-08 11:14:56.027
!MESSAGE Errors running builder 'Drools Builder' on project 'DroolsSampleProj3-maven'.
!STACK 0
java.lang.NoClassDefFoundError: org/apache/commons/math3/util/ArithmeticUtils
        at org.apache.poi.poifs.property.RootProperty.setSize(RootProperty.java:59)
        at org.apache.poi.poifs.property.DirectoryProperty.<init>(DirectoryProperty.java:52)
        at org.apache.poi.poifs.property.RootProperty.<init>(RootProperty.java:31)
        at org.apache.poi.poifs.property.PropertyTable.<init>(PropertyTable.java:58)
        at org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:102)
        at org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:274)
        at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:252)
        at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:221)
        at org.drools.decisiontable.parser.xls.ExcelParser.parseFile(ExcelParser.java:84)
        at org.drools.decisiontable.SpreadsheetCompiler.parseResource(SpreadsheetCompiler.java:136)
        at org.drools.decisiontable.SpreadsheetCompiler.compile(SpreadsheetCompiler.java:120)
        at org.drools.decisiontable.SpreadsheetCompiler.compile(SpreadsheetCompiler.java:93)
        at org.drools.decisiontable.DecisionTableProviderImpl.compileResource(DecisionTableProviderImpl.java:74)
        at org.drools.decisiontable.DecisionTableProviderImpl.loadFromResource(DecisionTableProviderImpl.java:42)
        at org.drools.compiler.compiler.DecisionTableFactory.loadFromResource(DecisionTableFactory.java:36)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.packageNameFromDtable(KieBuilderImpl.java:435)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.packageNameFromAsset(KieBuilderImpl.java:411)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.packageNameForFile(KieBuilderImpl.java:390)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.isFileInKieBase(KieBuilderImpl.java:381)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.filterFileInKBase(KieBuilderImpl.java:359)
        at org.drools.compiler.kie.builder.impl.AbstractKieProject.addFiles(AbstractKieProject.java:302)
        at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:251)
        at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:214)
        at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:78)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:279)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:247)
        at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:194)
        at org.drools.eclipse.builder.DroolsBuilder$DroolsBuilderVisitor.doBuildKieProject(DroolsBuilder.java:222)
        at org.drools.eclipse.builder.DroolsBuilder$DroolsBuilderVisitor.build(DroolsBuilder.java:197)
        at org.drools.eclipse.builder.DroolsBuilder.fullBuild(DroolsBuilder.java:155)
        at org.drools.eclipse.builder.DroolsBuilder.incrementalBuild(DroolsBuilder.java:172)
        at org.drools.eclipse.builder.DroolsBuilder.build(DroolsBuilder.java:108)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:832)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:220)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:263)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:316)
        at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:319)
        at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:371)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:392)
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:154)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:244)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)

{noformat}",Major,Kris Verlaenen,,2020-07-07T22:30:37.000-0400,"Drools Builder error ""org/apache/commons/math3/util/ArithmeticUtils"" by eclipse plugin",Resolved,bug,Bug
2020-07-16T02:36:59.000-0400,DROOLS-5483,Done,"Hello,

When I deploy KIE Application into Karaf which doesn't support build-in capability of TransactionSynchronizationRegistry, so it will fallback into implementation with ThreadLocal

[https://github.com/kiegroup/drools/blob/master/drools-persistence/drools-persistence-api/src/main/java/org/drools/persistence/jta/JtaTransactionManager.java]

 

What's happening is during commit, the transaction resource is always clear no matter the caller own the transaction or not.

 
{code:java}
public void commit(boolean transactionOwner) {
    if ( transactionOwner ) {
        try {
            this.ut.commit();
        } catch ( Exception e ) {
            logger.warn( ""Unable to commit transaction"", e);
            throw new RuntimeException( ""Unable to commit transaction"",
                                        e );
        }
    }
    transactionResources.get().clear();
}
{code}
This causes rulesbytearray field in sessioninfo table is not persisted.
Please refer to comment from ngs-mtech on [JtaTransactionManager.java|https://github.com/kiegroup/drools/commit/6189bdfaed78d540b464b83bcf6de5b34ee6888b#diff-247b587f2ee1112eda33c922619bb276]

[https://github.com/kiegroup/drools/commit/6189bdfaed78d540b464b83bcf6de5b34ee6888b]",Major,Mario Fusco,,2020-07-03T21:39:24.000-0400,RulesByteArray is never persistent into SessionInfo Table,Resolved,bug,Bug
2020-07-16T08:56:12.000-0400,DROOLS-5442,Done,"When user navigates among columns from Description to any other - he need to push right arrow key twice to skip a hidden column introduced recently for decision tables.
 !image-2020-06-18-15-04-15-605.png|thumbnail! ",Major,Jozef Marko,,2020-06-18T09:17:24.000-0400,[Guided Decision Table] Key navigation failure in Descision table,Resolved,bug,Bug
2020-07-15T02:52:35.000-0400,DROOLS-5458,Done,"For a Scenario Simulation that tests DRL rule and facts having an enum property a seemingly class-loading issue occurs in Business Central.

The ultimate error is in the DRL file validation:
{code:java|title=DRL file}
package org.jboss.qa.ba.scesim;

rule ""child ticket""
when
    t: Ticket ( type==TicketType.CHILD)
then
    t.setPrice(5.0);
end
{code}
{code:java|title=Validation error}
[KBase: defaultKieBase]: Unable to Analyse Expression type == TicketType.CHILD:
[Error: Comparison operation requires compatible types. Found class org.jboss.qa.ba.scesim.TicketType and class org.jboss.qa.ba.scesim.TicketType]
[Near : {... type == TicketType.CHILD ....}]
                     ^
{code}
The issue happens in given scenario:
 # import project
 # go to DRL file and run validation - succeeds
 # go to scenario simulation and run - succeeds
 # go back to DRL file and run validation - fails with the error above
 # go to scenario simulation and run again - fails due to the rule not being evaluated for given facts

The issue disappears when running Build of the project in the Project perspective.

 ",Blocker,Toni Rikkola,,2020-06-26T07:46:56.000-0400,Running tests should not affect incremental build,Resolved,bug,Bug
2020-07-06T09:18:16.000-0400,DROOLS-5488,Done,None,Major,Mario Fusco,,2020-07-06T05:41:44.000-0400,Drools accumulate is updating an irrelevant fact,Resolved,bug,Bug
2020-06-26T08:03:44.000-0400,DROOLS-5449,Explained,"After updating a declared type that is not referenced in the rules with _updateToVersion()_,
 running _fireAllRules()_ many times in a loop throws _ClassCastException_.

E.g., when the following DRL:
{noformat}
declare UnreferencedType
 x : int
end 
declare ReferencedType
 str : String
end
 
rule ""example rule""
when
 ReferencedType( str == ""A"" )
then
end{noformat}
is updated to:
{noformat}
declare UnreferencedType
 x : int
 newField : String
end 
declare ReferencedType
 str : String
end
 
rule ""example rule""
when
 ReferencedType( str == ""A"" )
then
end{noformat}
the following exception it thrown by _fireAllRules()_:
{noformat}
java.lang.RuntimeException: Error evaluating constraint 'str == ""A""' in [Rule ""example rule"" in org/example/rules.drl]
 at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:277)
 at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:225)
 at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:139)
 ...
 Caused by: java.lang.ClassCastException: class org.example.ReferencedType cannot be cast to class org.example.ReferencedType (org.example.ReferencedType is in unnamed module of loader org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader @46292372; org.example.ReferencedType is in unnamed module of loader org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader @23b8d9f3)
 at ConditionEvaluator7ed8b2c57cad4e74b856fdba30554aa1.evaluate(Unknown Source)
 at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:275)
 ... 43 more{noformat}",Major,Mario Fusco,,2020-06-24T04:44:12.000-0400,ClassCastException upon unreferenced declare update,Resolved,bug,Bug
2020-06-22T04:13:08.000-0400,DROOLS-5438,Done,from the DMN spec !image-2020-06-17-12-38-33-381.png! ,Major,Matteo Mortari,,2020-06-17T06:38:52.000-0400,DMN align FEEL behaviour when sum([]) ,Resolved,bug,Bug
2020-06-19T13:20:32.000-0400,DROOLS-5434,Done,"I am running Drools in a Spring-Boot jar and get the following warning statement _File 'BOOT-INF/classes/com/example/test/TEST.drl' is in folder 'BOOT-INF/classes/com/example/test' but declares package 'com.example.test'. It is advised to have a correspondance between package and folder names_. The package name in the drl file is correct, the problem is just that _BOOT-INF.classes._ isn't considered when evaluating if printing the warning or not.

I have tracked it down to *KieBuilderImpl.java*, method *isFileInKieBase*. The last 2 lines in that method calls:
{code:java}
// packageNameForFile prints warning if package in .drl file is not same as flatted directory structure
// Does not care about SUPPORTED_RESOURCES_ROOTS, thus prints the warning
String pkgNameForFile = packageNameForFile( fileName, folderNameForFile, !useFolders, file );

// Does care about SUPPORTED_RESOURCES_ROOTS, so the drl file is loaded
return isPackageInKieBase( kieBase, pkgNameForFile );
{code}
As it is implemented right now, the warning might either be a false-positive (and still get loaded), or the package is wrong (and the file is not loaded).

Voting to include the SUPPORTED_RESOURCES_ROOTS as valid prefixes when checking if the warning should be printed.",Major,Mario Fusco,,2020-06-16T03:19:49.000-0400,Incorrect warning about file declaring wrong package,Resolved,bug,Bug
2020-06-09T08:50:33.000-0400,DROOLS-5364,Done,"There is warning about data type change even when a test scenario is just created. The spotted behavior would be expected if user is reopening a a scenario but not creating a new one.

h2. Acceptance test
https://github.com/jboss-integration/bxms-qe-tests/pull/3283

 ",Major,Yeser Amer,,2020-05-25T02:11:01.000-0400,Test scenario reports data type change during creation,Resolved,bug,Bug
2020-06-08T02:42:50.000-0400,DROOLS-5345,Done,"When using Drools inside an *Equinox* OSGi container (Oxygen, org.eclipse.osgi-3.12.0.v20170512-1932.jar) the logic inside {{org.drools.relective.classloader.ProjectClassLoader#isOsgiClassLoader}} does not work properly, i.e. the OSGi runtime is not detected. This leads to ""The Eclipse JDT Core jar is not in the classpath"" because the shaded and packed compiler classes cannot be found.

Cause of the problem seems to be the fact that the {{EquinoxClassLoader}} does not implement {{BundleReference}} directly *but so does its superclass*. I tried and patched {{ProjectClassLoader}} with the following snippet and this seems to work:

{code:java}
private static boolean isOsgiClassLoader(final ClassLoader cl) {
    Class<?> clc = cl.getClass();
    while (clc != null && !clc.equals(ClassLoader.class)) {
        if (Stream.of(clc.getInterfaces()).map(Class::getSimpleName).anyMatch(name -> name.equals(""BundleReference""))) {
            return true;
        }
        clc = clc.getSuperclass();
    }
    return false;
}
{code}
",Major,Mario Fusco,,2020-05-19T04:11:05.000-0400,Class loading issue in Eclipse Equinox OSGi container,Resolved,bug,Bug
2020-06-04T13:21:43.000-0400,DROOLS-5400,Done,"Executable model compilation fails on declared types with both _@SerialVersionUID_ and _@key_ annotations.

Example of DRL that fails to compile:



{noformat}
    declare ServiceInformation
        @serialVersionUID( 0 )
        code: String @key
    end
    rule ""create new ServiceInformation""
    when
    then
       insert( new ServiceInformation(""123456"") );
    end
{noformat}

Error:

{noformat}
    Error Messages:
    Message [id=1, kieBase=binding-field-indexed-with-square-brackets, level=ERROR, path=null, line=56, column=0
       text=Duplicate method ServiceInformation(String) in type ServiceInformation]
    Message [id=2, kieBase=binding-field-indexed-with-square-brackets, level=ERROR, path=null, line=61, column=0
       text=Duplicate method ServiceInformation(String) in type ServiceInformation]
{noformat}

The example works fine when compiling without executable model.
",Minor,Mario Fusco,,2020-06-02T12:33:46.000-0400,Executable model build fails with SerialVersionUID and key annotations,Resolved,bug,Bug
2020-06-05T11:03:33.000-0400,DROOLS-4510,Explained,"kie server returns 500 to kie client when using kie-server-spring-boot-starter-drools

2019-09-08 21:51:45.643  INFO 11763 --- [0.1-8081-exec-1] o.k.s.api.marshalling.MarshallerFactory  : Marshaller extensions init
2019-09-08 21:53:01.971 ERROR 11763 --- [0.1-8081-exec-1] o.a.c.c.C.[.[.[/].[servletContainer]     : Servlet.service() for servlet [servletContainer] in context with path [] threw exception [org.glassfish.jersey.server.ContainerException: java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;] with root cause

java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;
	at org.kie.server.api.marshalling.json.JSONMarshaller.configureMarshaller(JSONMarshaller.java:155) ~[kie-server-api-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.api.marshalling.json.JSONMarshaller.<init>(JSONMarshaller.java:128) ~[kie-server-api-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.api.marshalling.BaseMarshallerBuilder.build(BaseMarshallerBuilder.java:43) ~[kie-server-api-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.api.marshalling.MarshallerFactory.getMarshaller(MarshallerFactory.java:52) ~[kie-server-api-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.services.impl.marshal.MarshallerHelper.marshal(MarshallerHelper.java:79) ~[kie-server-services-common-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.remote.rest.common.util.RestUtils.createCorrectVariant(RestUtils.java:55) ~[kie-server-rest-common-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.remote.rest.common.util.RestUtils.createCorrectVariant(RestUtils.java:44) ~[kie-server-rest-common-7.9.0.Final.jar:7.9.0.Final]
	at org.kie.server.remote.rest.common.resource.KieServerRestImpl.getInfo(KieServerRestImpl.java:94) ~[kie-server-rest-common-7.9.0.Final.jar:7.9.0.Final]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]
	at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:316) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:298) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.internal.Errors.process(Errors.java:268) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289) ~[jersey-common-2.26.jar:na]
	at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703) ~[jersey-server-2.26.jar:na]
	at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416) ~[jersey-container-servlet-core-2.26.jar:na]
	at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370) ~[jersey-container-servlet-core-2.26.jar:na]
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389) ~[jersey-container-servlet-core-2.26.jar:na]
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342) ~[jersey-container-servlet-core-2.26.jar:na]
	at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229) ~[jersey-container-servlet-core-2.26.jar:na]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.12.RELEASE.jar:5.0.12.RELEASE]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.13.RELEASE.jar:5.0.13.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_152]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.39.jar:8.5.39]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_152]
",Major,Mario Fusco,,2019-09-09T01:02:29.000-0400,Kie Client returns 500 when using kie spring boot drools ,Resolved,bug,Bug
2020-06-05T16:30:10.000-0400,DROOLS-5415,Done,"Today's nightly revealed problem with xsd for beans.xml
{{org.jboss.weld.exceptions.IllegalStateException: WELD-001202: Error parsing jar:file:/home/jenkins/.m2/repository/org/uberfire/uberfire-backend-cdi/7.39.0.20200604-050650/uberfire-backend-cdi-7.39.0.20200604-050650.jar!/META-INF/beans.xml}}

it seems that from today oracle URL redirected resource got a html page instead of XSD file

 {noformat}
Stack Trace:
org.jboss.weld.exceptions.IllegalStateException: WELD-001202: Error parsing jar:file:/home/jenkins/.m2/repository/org/uberfire/uberfire-commons/7.39.0.20200604-050650/uberfire-commons-7.39.0.20200604-050650.jar!/META-INF/beans.xml
	at org.jboss.weld.xml.BeansXmlParser.parse(BeansXmlParser.java:125)
	at org.jboss.weld.bootstrap.WeldBootstrap.parse(WeldBootstrap.java:131)
	at org.jboss.weld.environment.deployment.discovery.AbstractBeanArchiveScanner.parseBeansXml(AbstractBeanArchiveScanner.java:46)
	at org.jboss.weld.environment.deployment.discovery.DefaultBeanArchiveScanner.scan(DefaultBeanArchiveScanner.java:77)
	at org.jboss.weld.environment.deployment.discovery.AbstractDiscoveryStrategy.performDiscovery(AbstractDiscoveryStrategy.java:93)
	at org.jboss.weld.environment.se.Weld.createDeployment(Weld.java:705)
	at org.jboss.weld.environment.se.Weld.initialize(Weld.java:592)
	at org.guvnor.test.CDITestSetup.setUp(CDITestSetup.java:39)
	at org.drools.workbench.screens.drltext.backend.server.DRLTextEditorServiceImplCDITest.setUp(DRLTextEditorServiceImplCDITest.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.xml.sax.SAXParseException; systemId: http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/beans_1_2.xsd; lineNumber: 1; columnNumber: 134; The element type ""META"" must be terminated by the matching end-tag ""</META>"".
	at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:201)
	at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:175)
	at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:398)
	at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)
	at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:282)
	at org.apache.xerces.impl.XMLScanner.reportFatalError(XMLScanner.java:1496)
	at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(XMLNSDocumentScannerImpl.java:650)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1645)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
	at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:623)
	at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:679)
	at org.apache.xerces.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:527)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2168)
	at org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:558)
	at org.apache.xerces.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:580)
	at org.apache.xerces.impl.xs.XMLSchemaValidator.findSchemaGrammar(XMLSchemaValidator.java:2722)
	at org.apache.xerces.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2082)
	at org.apache.xerces.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:789)
	at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:283)
	at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(XMLNSDocumentScannerImpl.java:733)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1754)
	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
	at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:875)
	at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:798)
	at org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
	at org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1198)
	at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:564)
	at org.apache.xerces.jaxp.SAXParserImpl.parse(SAXParserImpl.java:298)
	at org.jboss.weld.xml.BeansXmlParser.parse(BeansXmlParser.java:119)
	... 34 more
{noformat}",Blocker,Marek Novotny,,2020-06-05T04:13:01.000-0400,beans.xml has wrong schemaLocation,Resolved,bug,Bug
2020-06-05T12:48:54.000-0400,DROOLS-4995,Done,"The error popup overlaps with collection dialog editor wlile navigating to the filing cell and releasing focus again (without clicking)
See the video",Minor,Yeser Amer,,2020-01-31T10:12:49.000-0500,Error popups when collection editor dialog is open ,Resolved,bug,Bug
2020-06-04T08:25:09.000-0400,DROOLS-5371,Done,"A rule of the form 

if (!A) {
	f1()
} else {
	f2()
}

does  not compile whereas a rule of the form

if (A) {
	f2()
} else {
	f1()
}

does",Major,Luca Molteni,,2020-05-25T05:36:59.000-0400,if (!A) { } does not compile,Resolved,bug,Bug
2020-06-03T09:23:06.000-0400,DROOLS-5168,Done,"There is issue in Test Scenarios when user invokes the collection editor for {{java.util.List<MyEnum>}} field. 
{code}Uncaught exception: (TypeError) : Cannot read property 'getSimpleProperties_1_g$' of null {code}",Major,Yeser Amer,,2020-03-16T12:05:14.000-0400,Collection editor for List of Enums,Resolved,bug,Bug
2020-06-03T09:25:15.000-0400,DROOLS-5078,Done,"I get the error : test failed with reason 
 !image-2020-02-19-10-13-01-440.png|thumbnail! 
see screenshot
'class.java.math.bigdecimal is not supported'",Major,Yeser Amer,,2020-02-19T04:17:44.000-0500,Can't test against bigdecimal value in test scenario in business central,Resolved,bug,Bug
2020-06-03T03:36:58.000-0400,DROOLS-5397,Done,It is possible to manage enum types in scenario simulation to do so in Rule based test scenario it is possible to have data object enum. But including at least one field that implements Enumeration interface breaks the model editor and fails to show fields on the UI See:  [^model view with enum types.webm] ,Major,Yeser Amer,,2020-06-02T11:05:08.000-0400,Data object containing at least one enum fails to be opend in Data model editor,Closed,bug,Bug
2020-06-01T06:04:28.000-0400,DROOLS-5386,Done,"This rule fails with PATTERN_DSL
{noformat}
rule R when
  accumulate (
       $p : Person(), $result : sum( MyUtil.add($p.getAge(), 10) )          )
then
  insert($result);
end
{noformat}

It generates a lambda with duplicated parameters ""_this"" and ""$p"" which are the same Pattern input bind variable.
{code:java}
org.drools.model.Rule rule = D.rule(""R"").build(D.accumulate(D.pattern(var_$p).bind(var_C6D512FA5D3AACA24A83BF1EE132C0B2,
                                                                                   var_$p,
                                                                                   (_this, $p) -> MyUtil.add($p.getAge(),10)),
{code}
So fails at runtime
{noformat}
[ERROR] testAccumulateStaticMethodWithPatternBindVar[PATTERN_DSL](org.drools.modelcompiler.AccumulateTest)  Time elapsed: 3.151 s  <<< ERROR!
java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:105)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:714)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:168)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:583)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:554)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:381)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:341)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:177)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:135)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:33)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1101)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1048)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1040)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1336)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1327)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
	at org.drools.modelcompiler.AccumulateTest.testAccumulateStaticMethodWithPatternBindVar(AccumulateTest.java:2058)
	...
Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 1
	at org.drools.model.view.BindViewItem2.eval(BindViewItem2.java:89)
	at org.drools.modelcompiler.constraints.BindingEvaluator.evaluate(BindingEvaluator.java:39)
	at org.drools.modelcompiler.constraints.BindingEvaluator.evaluate(BindingEvaluator.java:35)
	at org.drools.modelcompiler.constraints.LambdaAccumulator$BindingAcc.getAccumulatedObject(LambdaAccumulator.java:146)
	at org.drools.modelcompiler.constraints.LambdaAccumulator.accumulate(LambdaAccumulator.java:86)
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:97)
	... 53 more
{noformat}",Major,Toshiya Kobayashi,,2020-05-29T01:16:21.000-0400,Accumulate with static method with pettern bind variable,Resolved,bug,Bug
2020-05-31T22:23:13.000-0400,DROOLS-5284,Done,"MVELTest.testTypeCoercionLongDivByInt fails with IBM JDK 8
{noformat}
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.97 s <<< FAILURE! - in org.drools.compiler.integrationtests.MVELTest
[ERROR] testTypeCoercionLongDivByInt(org.drools.compiler.integrationtests.MVELTest)  Time elapsed: 0.962 s  <<< FAILURE!
java.lang.AssertionError: expected:<7.350000> but was:<7>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.drools.compiler.integrationtests.MVELTest.testTypeCoercionLongDivByInt(MVELTest.java:1150)
	...
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   MVELTest.testTypeCoercionLongDivByInt:1150 expected:<7.350000> but was:<7>
{noformat}",Major,Toshiya Kobayashi,,2020-04-29T22:31:44.000-0400,MVELTest.testTypeCoercionLongDivByInt fails with IBM JDK 8,Resolved,bug,Bug
2020-05-29T14:14:22.000-0400,DROOLS-5390,Done,None,Major,Mario Fusco,,2020-05-29T11:19:27.000-0400,Import of declared types with same name in different packages get mixed when generating the executable model,Resolved,bug,Bug
2020-05-27T14:53:01.000-0400,DROOLS-5349,Explained,"When adding an Attribute Column (eg: no-loop) and changing it's default value (from true to false or vice-versa) this change is not reflected on the table model nor in the source.

Please see the gif recording attached.

It can be non intuitive for newcomers. We should mention that changing column default value will affect just new added rows. ",Major,Jozef Marko,,2020-05-19T09:48:02.000-0400,Guided Decision Table Attribute Column default value not working  ,Resolved,bug,Bug
2020-05-25T08:11:19.000-0400,DROOLS-5352,Done,"The issue can be spotted when new decison table spreadsheet is created in business central. The proiblem is instead of showing xls/xlsx editor automatically when upload finishes we show some 'Other' file type editor.

Compare the attached videos.",Major,Jozef Marko,,2020-05-20T08:35:07.000-0400,Wrong navigation after spreadsheet decision table creation,Resolved,bug,Bug
2020-05-25T05:25:10.000-0400,DROOLS-5290,Done,"Customer is encountering  below issue while rule execution if they use executable model.

{code:java}
Exception in thread ""main"" java.lang.RuntimeException: java.lang.ClassCastException: org.drools.core.reteoo.SubnetworkTuple 
cannot be cast to java.lang.Long
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:105)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:714)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:168)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:581)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:552)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:379)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:237)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:180)

{code}
",Major,Luca Molteni,,2020-05-04T05:31:50.000-0400,Executable model compiled throws exception in accumulate pattern matching,Resolved,bug,Bug
2020-05-25T13:40:31.000-0400,DROOLS-3796,Done,"When using ClassObjectFilter in a command, the execution on kie-server fails with following stacktrace [1]. Reproducer can be found here [2].

[1] https://gist.github.com/baldimir/26bb33b18cc1cb15e72bde44e910b759
[2] https://github.com/kiegroup/droolsjbpm-integration/pull/1787",Major,Mario Fusco,,2019-03-26T08:53:35.000-0400,ClassNotFoundException when using ClassObjectFilter with kie-server,Resolved,bug,Bug
2020-05-28T03:21:06.000-0400,DROOLS-5264,Done,"Behavior before the fix:
 [^artifact-upload-not-cleared.webm] 

Behavior after fix:
 [^artifact-upload-cleared.webm] ",Minor,Jozef Marko,,2020-04-22T05:35:32.000-0400,Cancelling artifact upload dialog does not clear file chooser field,Resolved,bug,Bug
2020-05-27T05:15:42.000-0400,DROOLS-5327,Done,"During verification of DROOLS-5011  was spotted corner case that was not fixed.

In the original issue customer user attached project with enumeration for *String* field and used that field in guided rule template.

The issue is if user follow the same scenario but instead of *String* field, some number type is used, for example *Integer*. In such case, when user added data to rule template, multiselect dropdown was shown correctly, however in the grid was always shown 0.",Major,Jozef Marko,,2020-05-13T10:00:45.000-0400,Multiselect dropdown for enumerated values - numbers,Resolved,bug,Bug
2020-05-20T17:36:58.000-0400,DROOLS-5021,Done,"When attempting to send a Generic Data object in an Insert Command to be added to the Rule Agenda, the server fails to deserialize the Insert Command with the following;
Feb  6 11:09:30 thor jetty[21143]: Feb 06, 2020 11:09:30 AM org.kie.server.services.drools.DroolsKieContainerCommandServiceImpl callContainer
Feb  6 11:09:30 thor jetty[21143]: SEVERE: Error calling container 'JUnit Test: kie-server'
Feb  6 11:09:30 thor jetty[21143]: java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class org.kie.api.command.Command (java.util.LinkedHashMap is in module java.base of loader 'bootstrap'; org.kie.api.command.Command is in unnamed module of loader org.eclipse.jetty.webapp.WebAppClassLoader @51bd8b5c)
Feb  6 11:09:30 thor jetty[21143]: #011at org.kie.server.services.drools.DroolsKieContainerCommandServiceImpl.callContainer(DroolsKieContainerCommandServiceImpl.java:60)
Feb  6 11:09:30 thor jetty[21143]: #011at org.kie.server.remote.rest.drools.CommandResource.manageContainer(CommandResource.java:91)
Feb  6 11:09:30 thor jetty[21143]: #011at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Feb  6 11:09:30 thor jetty[21143]: #011at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
Feb  6 11:09:30 thor jetty[21143]: #011at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
Feb  6 11:09:30 thor jetty[21143]: #011at java.base/java.lang.reflect.Method.invoke(Method.java:566)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:140)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:509)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:399)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$0(ResourceMethodInvoker.java:363)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:365)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:337)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:310)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:443)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:233)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:139)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.interception.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:358)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:142)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:219)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:227)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)
Feb  6 11:09:30 thor jetty[21143]: #011at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)
Feb  6 11:09:30 thor jetty[21143]: #011at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHolder$NotAsyncServlet.service(ServletHolder.java:1401)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:760)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1617)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:226)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1604)
Feb  6 11:09:30 thor jetty[21143]: #011at org.kie.server.services.impl.security.web.CaptureHttpRequestFilter.doFilter(CaptureHttpRequestFilter.java:42)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1596)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:545)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:501)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1592)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1296)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:485)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1562)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1211)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:221)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.Server.handle(Server.java:500)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:386)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:562)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:378)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:270)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:336)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:313)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:171)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:129)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:388)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:806)
Feb  6 11:09:30 thor jetty[21143]: #011at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:938)
Feb  6 11:09:30 thor jetty[21143]: #011at java.base/java.lang.Thread.run(Thread.java:834)
",Major,Mario Fusco,,2020-02-06T13:02:15.000-0500,ClassCastException thrown when deserializing components of a Generic command,Closed,bug,Bug
2020-05-22T04:40:12.000-0400,DROOLS-2604,Explained,"
A lot of attempts to create different class instance after deployment of kjar to the kie server.  I hardly think, that com.couchbase.client.deps.io.netty.handler.ssl.Java9SslUtils$5 or other classes somehow related to deployed KJar.  Is it ""by design"" or unexpected behavior? 


   2018-05-30T17:35:44.83+0300 [APP/PROC/WEB/0] OUT [CONTAINER] ie.server.services.drools.DroolsKieServerExtension WARNING Unable to create instance of type org.apache.lucene.search.join.TermsIncludingScoreQuery$1 due to org.apache.lucene.search.join.TermsIncludingScoreQuery$1
.....
  2018-05-30T17:43:31.07+0300 [APP/PROC/WEB/0] OUT [CONTAINER] ie.server.services.drools.DroolsKieServerExtension WARNING Unable to create instance of type com.couchbase.client.deps.io.netty.handler.ssl.Java9SslUtils$6 due to com.couchbase.client.deps.io.netty.handler.ssl.Java9SslUtils$6

",Major,Maciej Swiderski,,2018-05-30T10:47:21.000-0400,Inappropriate behavior/logging after kjar deployment to the kie server,Closed,bug,Bug
2020-05-12T13:24:28.000-0400,DROOLS-4399,Done,Attempting to deploy KIE Server on Tomcat 9 fails with a ClassNotFoundException org.jboss.narayana.tomcat.jta.NarayanaJtaServletContextListener when trying to setup application listener,Major,Mario Fusco,,2019-08-04T18:34:20.000-0400,KIE Server kie-server-7.24.0.Final-webc fails with ClassNotFoundException,Resolved,bug,Bug
2020-05-21T02:06:48.000-0400,DROOLS-5249,Done,"Create GuidedRule which update field of type LocalDate LHS of rule.  Each time the rule is saved and reopened,   following free form DRL is added:

 java.time.format.DateTimeFormatter dtf = java.time.format.DateTimeFormatter.ofPattern(""dd-MMM-yyyy"");",Major,Jozef Marko,,2020-04-16T08:52:03.000-0400,java.time.format.DateTimeFormatter added to rule multiple times in Guided Rule editor if we use LocalDate,Resolved,bug,Bug
2020-05-22T05:01:22.000-0400,DROOLS-1709,Out of Date,"Hello,

I'm trying to make working drools 7.1.0 FINAL but I'm getting *unmarshalling input error* when I'm sending an object with a *joda DateTime* attribute to kie-server. Seems like a bug while serializing/deserializing datetime object to json. 

Can someone help me please?


org.kie.server.api.exception.KieServicesException: Error while deserializing data received from server!
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.deserialize(AbstractKieServicesClientImpl.java:592)
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.makeHttpPostRequestAndCreateServiceResponse(AbstractKieServicesClientImpl.java:286)
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.makeHttpPostRequestAndCreateServiceResponse(AbstractKieServicesClientImpl.java:264)
	at org.kie.server.client.impl.RuleServicesClientImpl.executeCommandsWithResults(RuleServicesClientImpl.java:66)
	at kettle.resources.KieServerClient.fireKettleRules(KieServerClient.java:135)
	at kettle.application.NegocioBean.aplicarReglas(NegocioBean.java:102)
	at kettle.services.KettleService.recieveDataJson(KettleService.java:72)
	at KettleTester.main(KettleTester.java:37)
Caused by: org.kie.server.api.marshalling.MarshallingException: Error unmarshalling input
	at org.kie.server.api.marshalling.json.JSONMarshaller.unmarshall(JSONMarshaller.java:279)
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.deserialize(AbstractKieServicesClientImpl.java:590)
	... 7 more
Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not construct instance of org.joda.time.Chronology, problem: abstract types either need to be mapped to concrete types, have custom deserializer, or be instantiated with additional type information
 at [Source: {
  ""type"" : ""SUCCESS"",
  ""msg"" : ""Container DEV successfully called."",
  ""result"" : {
    ""execution-results"" : {
      ""results"" : [ {
        ""value"" : [{
  ""kettle.model.MensajesError"" : {
    ""tipoError"" : null
  }
},{
  ""tws.hibernate.mappings.TmOt"" : {
    ""id"" : 150078,
    ""finishedAt"" : {
      ""dayOfMonth"" : 19,
      ""year"" : 2017,
      ""era"" : 1,
      ""dayOfYear"" : 231,
      ""dayOfWeek"" : 6,
      ""millisOfDay"" : 46800000,
      ""monthOfYear"" : 8,
      ""hourOfDay"" : 13,
      ""minuteOfHour"" : 0,
      ""secondOfMinute"" : 0,
      ""millisOfSecond"" : 0,
      ""weekOfWeekyear"" : 33,
      ""weekyear"" : 2017,
      ""yearOfEra"" : 2017,
      ""yearOfCentury"" : 17,
      ""centuryOfEra"" : 20,
      ""secondOfDay"" : 46800,
      ""minuteOfDay"" : 780,
      ""millis"" : 1503140400000,
      ""zone"" : {
        ""fixed"" : false,
        ""uncachedZone"" : {
          ""fixed"" : false,
          ""cachable"" : true,
          ""id"" : ""Europe/Madrid""
        },
        ""id"" : ""Europe/Madrid""
      },
      ""chronology"" : {
        ""zone"" : {
          ""fixed"" : false,
          ""uncachedZone"" : {
            ""fixed"" : false,
            ""cachable"" : true,
            ""id"" : ""Europe/Madrid""
          },
          ""id"" : ""Europe/Madrid""
        }
      },
      ""afterNow"" : false,
      ""beforeNow"" : true,
      ""equalNow"" : false
    },
    ""startedAt"" : {
      ""dayOfMonth"" : 19,
      ""year"" : 2017,
      ""era"" : 1,
      ""dayOfYear"" : 231,
      ""dayOfWeek"" : 6,
      ""millisOfDay"" : 34200000,
      ""monthOfYear"" : 8,
      ""hourOfDay"" : 9,
      ""minuteOfHour"" : 30,
      ""secondOfMinute"" : 0,
      ""millisOfSecond"" : 0,
      ""weekOfWeekyear"" : 33,
      ""weekyear"" : 2017,
      ""yearOfEra"" : 2017,
      ""yearOfCentury"" : 17,
      ""centuryOfEra"" : 20,
      ""secondOfDay"" : 34200,
      ""minuteOfDay"" : 570,
      ""millis"" : 1503127800000,
      ""zone"" : {
        ""fixed"" : false,
        ""uncachedZone"" : {
          ""fixed"" : false,
          ""cachable"" : true,
          ""id"" : ""Europe/Madrid""
        },
        ""id"" : ""Europe/Madrid""
      },
      ""chronology"" : {
        ""zone"" : {
          ""fixed"" : false,
          ""uncachedZone"" : {
            ""fixed"" : false,
            ""cachable"" : true,
            ""id"" : ""Europe/Madrid""
          },
          ""id"" : ""Europe/Madrid""
        }
      },
      ""afterNow"" : false,
      ""beforeNow"" : true,
      ""equalNow"" : false
    }
}},
        ""key"" : ""orden""
      }, {
        ""value"" : {""kettle.model.MensajesError"" : {
  ""tipoError"" : null
}},
        ""key"" : ""mensaje""
      } ],
      ""facts"" : [ {
        ""value"" : {""org.drools.core.common.DefaultFactHandle"":{
  ""external-form"" : ""0:1:242655221:1872950214:1:DEFAULT:NON_TRAIT:java.util.LinkedHashMap""
}},
        ""key"" : ""orden""
      }, {
        ""value"" : {""org.drools.core.common.DefaultFactHandle"":{
  ""external-form"" : ""0:2:1104605608:-2037841024:2:DEFAULT:NON_TRAIT:java.util.LinkedHashMap""
}},
        ""key"" : ""mensaje""
      } ]
    }
  }
}; line: 88, column: 8] (through reference chain: org.kie.server.api.model.ServiceResponse[""result""]->org.drools.core.runtime.impl.ExecutionResultImpl[""results""]->Object[][0]->org.drools.core.xml.jaxb.util.JaxbStringObjectPair[""value""]->tws.hibernate.mappings.TmOt[""finishedAt""]->org.joda.time.DateTime[""chronology""])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:148)
	at com.fasterxml.jackson.databind.DeserializationContext.instantiationException(DeserializationContext.java:889)
	at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:139)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:520)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:95)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:256)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:125)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:520)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:95)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:256)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:125)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3703)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2006)
	at org.kie.server.api.marshalling.json.JSONMarshaller$CustomObjectDeserializer.mapObject(JSONMarshaller.java:667)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:222)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer.mapArray(UntypedObjectDeserializer.java:356)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer.deserialize(UntypedObjectDeserializer.java:230)
	at com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:160)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:520)
	at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:101)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:256)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:125)
	at com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:156)
	at com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:17)
	at com.fasterxml.jackson.databind.deser.std.StdDelegatingDeserializer.deserialize(StdDelegatingDeserializer.java:160)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:520)
	at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:101)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:256)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:125)
	at com.fasterxml.jackson.databind.jsontype.impl.AsWrapperTypeDeserializer._deserialize(AsWrapperTypeDeserializer.java:114)
	at com.fasterxml.jackson.databind.jsontype.impl.AsWrapperTypeDeserializer.deserializeTypedFromAny(AsWrapperTypeDeserializer.java:64)
	at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer.deserializeWithType(UntypedObjectDeserializer.java:289)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:518)
	at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:101)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:256)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:125)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3731)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2724)
	at org.kie.server.api.marshalling.json.JSONMarshaller.unmarshall(JSONMarshaller.java:277)
	... 8 more
",Major,Maciej Swiderski,,2017-08-23T05:56:40.000-0400,KieServicesException: Error while deserializing data received from server!,Closed,bug,Bug
2020-05-06T10:51:48.000-0400,DROOLS-5228,Done,None,Major,Massimiliano Dessi,,2020-04-08T03:59:49.000-0400,Multiple Topic reassignment on updated status node,Resolved,bug,Bug
2020-05-14T23:52:49.000-0400,DROOLS-5245,Done,"Issue found during DROOLS-5148 review however it is probably not related.

",Minor,Valentino Pellegrino,,2020-04-16T05:05:01.000-0400,[DMN Designer] Literal cell value properties are not stored,Resolved,bug,Bug
2020-05-07T02:25:15.000-0400,DROOLS-5253,Done,"If user copy a DMN diagram node, the copy has exactly name name as the original node. It causes validation issues as the node names have to be unique. We should add some suffix to the copied node, probably numbers (-1, -2, -3 ...).

It will not break rule about node unique names and will help to distinguish original node from the copied one.",Minor,Valentino Pellegrino,,2020-04-20T02:04:38.000-0400,[DMN Designer] Copied node should be distinguished from original one,Resolved,bug,Bug
2020-05-11T08:52:19.000-0400,DROOLS-5252,Done,"This issue is related to two features of DMN editor.
- Copy and paste diagram node
- Nodes of imported model

If user imported another DMN model into his DMN model, he can use imported nodes in his diagram. They can be easily distinguished by prefix of the imported model. The issue is if we copy and paste such imported node. Created copy has same name as the original node. It is issue because the original-imported one can not be edited while the copy can be edited. Due to the same names it can be confusing why one node can not be edited and the second can be edited.",Minor,Valentino Pellegrino,,2020-04-20T01:58:29.000-0400,[DMN Designer] Copy of a imported node shouldn't have a prefix,Resolved,bug,Bug
2020-04-30T09:19:01.000-0400,DROOLS-5263,Done,"Defect: If user create a list - typed fact and puts it to the Test Scenario test passes but coverage is 0. 

This feature implemented other way in legacy test scenario.

Root case :
We removed initialization of the list by default .
Previously when you have been adding a fact to legacy test scenario - it was automatically initializing so in the end you got in GIVEN list with one empty element
Now If you add a list fact you are free to left it empty or initialize it with at least one element.

In that case if there was no rules fired we need to show a warning and mark the test as FAILED.

Workaround: put in GIVEN section for the list at least one empty element
",Major,Yeser Amer,,2020-04-21T09:28:30.000-0400,[Test Scenario Editor] Wrong test result status if rules have not been fired ,Resolved,bug,Bug
2020-05-20T17:39:38.000-0400,DROOLS-5309,Explained,"When a Drools Batch command has been processed, the conversion of the Kie ServiceResponse to JSON wraps the ServiceResponse.  The resulting message looks like:

{code:json}
{
  ""org.kie.server.api.model.ServiceResponse"" : {
    ""type"" : ""SUCCESS"",
    ""msg"" : ""Container Kie Demo: kie-server successfully called."",
    ""result"" : {
      ""ExecutionResultImpl"" : {
        ""results"" : [ ],
        ""facts"" : [ ]
      }
    }
  }
}
{code}
A good response doesn't wrap the ServiceResponse:
{code:json}
{
  ""type"" : ""SUCCESS"",
  ""msg"" : ""List of created containers"",
  ""result"" : {
    ""kie-containers"" : {
      ""kie-container"" : [ {
        ""container-id"" : ""Kie Demo: kie-server"",
        ""release-id"" : {
          ""group-id"" : ""com.j2eeguys.demo"",
          ""artifact-id"" : ""KieIssueDemo"",
          ""version"" : ""0.1.0-SNAPSHOT""
        },
        ""resolved-release-id"" : {
          ""group-id"" : ""com.j2eeguys.demo"",
          ""artifact-id"" : ""KieIssueDemo"",
          ""version"" : ""0.1.0-SNAPSHOT""
        },
        ""status"" : ""STARTED"",
        ""scanner"" : {
          ""status"" : ""DISPOSED"",
          ""poll-interval"" : null
        },
        ""config-items"" : [ ],
        ""messages"" : [ {
          ""severity"" : ""INFO"",
          ""timestamp"" : {
  ""java.util.Date"" : 1588885337926
},
          ""content"" : [ ""Container Kie Demo: kie-server successfully created with module com.j2eeguys.demo:KieIssueDemo:0.1.0-SNAPSHOT."" ]
        } ],
        ""container-alias"" : null
      } ]
    }
  }
}
{code}
",Major,Mario Fusco,,2020-05-08T12:52:45.000-0400,ServiceResponse is not properly serialized when ExecutionResultImpl,Closed,bug,Bug
2020-05-20T03:07:07.000-0400,DROOLS-5344,Done,spotted this wrong mask while dealing with Kogito serialization,Minor,Matteo Mortari,,2020-05-18T10:25:29.000-0400,DMN wrong serialization mask for FEEL years and month duration,Resolved,bug,Bug
2020-05-20T17:43:12.000-0400,DROOLS-5341,Explained,"When a Drools Batch command has been processed, the conversion of the Kie ServiceResponse to JSON incorrectly serializes the ExecutionResponseImple. The resulting message looks like:
{code:json}
{
  ""org.kie.server.api.model.ServiceResponse"" : {
    ""type"" : ""SUCCESS"",
    ""msg"" : ""Container Kie Demo: kie-server successfully called."",
    ""result"" : {
      ""ExecutionResultImpl"" : {
        ""results"" : [ ],
        ""facts"" : [ ]
      }
    }
  }
}
{code}
This results in deserialization failure of the client side as the type of the result can not be determined.  The correct response should be:
{code:json}
{
  ""org.kie.server.api.model.ServiceResponse"" : {
    ""type"" : ""SUCCESS"",
    ""msg"" : ""Container Kie Demo: kie-server successfully called."",
    ""result"" : {
      ""execution-results"" : {
        ""results"" : [ ],
        ""facts"" : [ ]
      }
    }
  }
}
{code}
",Major,Mario Fusco,,2020-05-15T15:15:33.000-0400,ExecutionResultImpl not properly serialized in JSon Response,Closed,bug,Bug
2020-05-18T09:27:33.000-0400,DROOLS-5343,Explained,"We have serious regression. User is unable to use operators ""is contained in comma separated list"" for collection fields.",Blocker,Toni Rikkola,,2020-05-18T08:54:57.000-0400,Operators for Collection fields are not correct,Closed,bug,Bug
2020-05-15T13:27:52.000-0400,DROOLS-5340,Done,"In the consequence (RHS) of the rule, when trying to insert a fact using a constructor with all declared (non-static) fields, Drools reports an error stating that no viable constructor was found.

",Minor,Mario Fusco,,2020-05-15T10:43:44.000-0400,serialVersionUID included in all-arguments constructor,Resolved,bug,Bug
2020-05-13T04:09:52.000-0400,DROOLS-5322,Done,None,Major,Matteo Mortari,,2020-05-12T06:30:38.000-0400,DMN Strongly fix codegen for FEEL id being Java keywords,Resolved,bug,Bug
2020-05-12T04:50:00.000-0400,DROOLS-5315,Done,"When executing rules with executable model, _contains_ constraints are not null-safe, whereas they are in DRL mode

Example of DRL that exhibits the behavior:


{noformat}
    rule ""contains constraint""
    when Pojo(integerList contains 3)
    then
    end
{noformat}


Error:


{noformat}
    java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NullPointerException
    
    	at org.drools.modelcompiler.constraints.ConstraintEvaluator.evaluate(ConstraintEvaluator.java:95)
    	at org.drools.modelcompiler.constraints.LambdaConstraint.isAllowed(LambdaConstraint.java:132)
    	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:139)
    	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:70)
    	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:329)
     ...

{noformat}


The example works fine when running without executable model.

The documentation is not explicit about whether _contains_ should be null safe or not, so we are unsure whether this is to be considered or not a regression.",Major,Mario Fusco,,2020-05-11T08:22:32.000-0400,"""Contains"" is not null-safe with executable model",Resolved,bug,Bug
2020-05-12T05:47:50.000-0400,DROOLS-5319,Done,None,Major,Matteo Mortari,,2020-05-11T10:50:02.000-0400,DMN name collision type value fix,Resolved,bug,Bug
2020-05-12T13:55:11.000-0400,DROOLS-5320,Done,"Similar to DROOLS-5216, but occurs when binding the field from a different Fact type.

Example:

{noformat}
    rule ""binding field indexed with square brackets from different fact type""
    when Pojo2($firstItem : simpleInt)
    Pojo($firstItem == integerList[this.integerList.size()-1])
    then
    end
{noformat}

Error:

{noformat}
    Message [id=1, kieBase=binding-field-indexed-with-square-brackets, level=ERROR, path=org/drools/reproducer/rules.drl, line=-1, column=0
       text=Comparison operation requires compatible types. Found int and class java.lang.Object]
{noformat}

The example works fine when compiling without executable model.",Major,Mario Fusco,,2020-05-11T12:28:39.000-0400,Rule compilation error when binding fields indexed with square brackets from different Fact types,Resolved,bug,Bug
2020-05-12T15:12:29.000-0400,DROOLS-5316,Done,"See reproducer  [^dmn-sandbox-master.zip] 

Test Scenario
 !image-2020-05-11-15-28-33-925.png|thumbnail! 

DMN
 !image-2020-05-11-15-28-55-186.png|thumbnail! 

{{11:45:04,120 ERROR [org.kie.dmn.core.ast.DMNDTExpressionEvaluator] (default task-60) Contract Type='{}' does not match any of the valid values null for decision table 'Contract Identification'.}}",Major,Daniele Zonca,,2020-05-11T09:51:05.000-0400,Test Scenario: wrong management of null values with simple types in DMN scenarios,Closed,bug,Bug
2020-05-12T08:15:03.000-0400,DROOLS-5310,Explained,"SAP Hybris Platform Version: 6.4.0.7 | RHDM7.4 Libraries used as client for Rules Rest API
JDK Version used in Hybris - 1.8

When integrating RHDM7.4 libraries for SAP Hybris e-commerce solution we got the following exception on server start up. Libraries modified are provided in step to reproduce section
*+Runtime Server reported issue+*
(...) INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | ERROR [BatchSelfHealingItemsRunner] [PoolableThread] Problems executing de.hybris.platform.directpersistence.selfhealing.impl.DefaultSelfHealingService$BatchSelfHealingItemsScheduledRunnable@6cf2a843 : org.drools.core.common.ProjectClassLoader.storeClasses(Ljava/util/Map;)V
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | java.lang.NoSuchMethodError: org.drools.core.common.ProjectClassLoader.storeClasses(Ljava/util/Map;)V
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at org.drools.compiler.kie.builder.impl.KieModuleKieProject.init(KieModuleKieProject.java:66)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:269)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:238)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:187)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.init.impl.DefaultRuleEngineKieModuleSwapper.createKieModule(DefaultRuleEngineKieModuleSwapper.java:279)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.init.impl.DefaultRuleEngineBootstrap.startup(DefaultRuleEngineBootstrap.java:73)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.event.OnTenantStartupProcessor.lambda$1(OnTenantStartupProcessor.java:111)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at java.util.ArrayList.forEach(ArrayList.java:1257)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.event.OnTenantStartupProcessor.activateRulesModules(OnTenantStartupProcessor.java:111)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.event.OnTenantStartupProcessor.processOnTenantStartup(OnTenantStartupProcessor.java:79)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.ruleengine.event.OnTenantStartupProcessor$DefaultRuleEngineTenantListener.afterTenantStartUp(OnTenantStartupProcessor.java:276)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.AbstractTenant.lambda$0(AbstractTenant.java:912)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.ClassLoaderUtils.executeWithWebClassLoaderParentIfNeeded(ClassLoaderUtils.java:34)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.AbstractTenant.executeStartupNotifyIfNecessary(AbstractTenant.java:898)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.AbstractTenant.executeInitsIfNecessary(AbstractTenant.java:1390)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.Registry.assureTenantStarted(Registry.java:667)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.Registry.activateTenant(Registry.java:708)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.Registry.setCurrentTenant(Registry.java:555)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.Registry.activateMasterTenant(Registry.java:615)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.Registry.activateMasterTenantAndFailIfAlreadySet(Registry.java:603)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.util.threadpool.ThreadPool.setTenant(ThreadPool.java:79)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.util.threadpool.PoolableThread.internalRun(PoolableThread.java:206)
INFO | jvm 1 | main | 2020/05/09 22:21:47.953 | at de.hybris.platform.core.threadregistry.RegistrableThread.run(RegistrableThread.java:135)
(...)""",Major,Mario Fusco,,2020-05-09T19:58:27.000-0400,java.lang.NoSuchMethodError: org.drools.core.common.ProjectClassLoader.storeClasses,Resolved,bug,Bug
2020-05-12T02:51:46.000-0400,DROOLS-5318,Done,In executable model reverse support is bound to the whole accumulate function instead of the single accumulate context thus causing inconsistencies when an accumulate has multiple contexts.,Major,Mario Fusco,,2020-05-11T10:24:10.000-0400,Reverse support is broken in executable model accumulate,Resolved,bug,Bug
2020-05-08T03:55:58.000-0400,DROOLS-5308,Done,"When we run scenarios for rules with name longer than 27 characters and click on the Coverage Report. We can’t read the number of times the rule ran because the rule name overlaps it, even if I expand the frame. Take a look at the attached screenshot.

Expected Result: The numbers should always be visible no matter how long the name or how narrow/wide the frame is.",Major,Yeser Amer,,2020-05-07T05:51:07.000-0400,Not able to read number of times rule fire in Scenario Coverage Report if rule name is longer than 27 characters,Resolved,bug,Bug
2020-05-05T08:37:32.000-0400,DROOLS-5293,Won't Fix,"when deploying the [business-central.war|https://repository.jboss.org/nexus/content/groups/public/org/kie/business-central/7.36.0.Final/business-central-7.36.0.Final-wildfly14.war] to a [Wildfly14|https://download.jboss.org/wildfly/14.0.1.Final/wildfly-14.0.1.Final.zip] and create a user with ./add-user.sh (i.e. michael) and start the application you can login as user michael.
When the user michael (added as user a) Management user or b) Application user) adds in the application a user X with a pwd Y this user can't login.
Seems to wrok only for the very fist time you add a user with ./add-user. If you repeat this for adding more user this doesn't work.",Major,Mario Fusco,,2020-05-04T10:59:11.000-0400,can't create new user in the aplication,Closed,bug,Bug
2020-04-29T08:12:53.000-0400,DROOLS-5280,Rejected,"the expression `addend + listOfStructure[field1=""some value""].numberField`, where `field1=""some value""` filters `listOfStructure` to a single item and `addend` and `numberField` are both non-null numbers, fails to evaluate. It's possible to work around this by placing `listOfStructure[field1=""some value""]` into a separate decision.",Major,Matteo Mortari,,2020-04-27T12:12:38.000-0400,List Filter expression returning single item and nested within arithmetic expression fails to evaluate,Resolved,bug,Bug
2020-04-28T08:51:09.000-0400,DROOLS-4431,Done,"When trying to run DMN via the rest endpoint, if the default KIE session is stateless, an error is returned stating that ""Cannot find a default KieSession"". If the stateful session is specified as default, the DMN execution works as expected. This forces you to specify stateless for all other requests.",Major,Matteo Mortari,,2019-08-13T16:03:20.000-0400,DMN REST endpoint requires stateful kie session,Resolved,bug,Bug
2020-04-28T05:21:04.000-0400,DROOLS-5277,Done,None,Major,Matteo Mortari,,2020-04-27T06:47:52.000-0400,"DMN codegen inner composite, recursion, Any fix",Resolved,bug,Bug
2020-04-29T03:25:29.000-0400,DROOLS-5283,Done,When the executable model processes a rule with 2 inline accumulates it generates 2 classes with the same name thus causing a compile time failure.,Major,Mario Fusco,,2020-04-28T13:19:48.000-0400,Code generation failure in executable model when processing a rule with 2 inline accumulates,Resolved,bug,Bug
2020-04-29T06:42:02.000-0400,DROOLS-2214,Done,"User has possibility to copy a DRG node by a CTRL+C shortcut, however the problem is that content of the node is not copied.",Major,Valentino Pellegrino,,2018-01-05T01:07:20.000-0500,[DMN Editor] Content of the Decision/BKM node is not copied,Resolved,bug,Bug
2020-04-28T09:38:47.000-0400,DROOLS-5250,Done,"When I create a data type in dmn like:
-tDriver (Structure)
--tNested (Structure)
---nested (string)
--contextType(context)
Then fact is generated as tNested.contextType.value but expect contextType.value
 !image-2020-04-03-11-47-11-708.png|thumbnail! ",Major,Yeser Amer,,2020-04-03T05:49:17.000-0400,[Scesim editor]  Wrong context type scesim generation,Resolved,bug,Bug
2020-04-29T06:42:37.000-0400,DROOLS-4424,Done,"User can create a diagram node copy by standard key compination *Ctrl+C* and  *Ctrl+V*. The issue is if a BKM node is copied in this way. Then if user navigates into expression editor of the copied node there are two issues:
# The content is not copied
# Any attempt to define an expression type throws an error, see the attachement

h2. Acceptance test
https://github.com/kiegroup/kie-wb-common/pull/3272",Major,Valentino Pellegrino,,2019-08-12T03:33:36.000-0400,[DMN Designer] Copy of BKM node throws an error,Resolved,bug,Bug
2020-04-27T05:35:14.000-0400,DROOLS-5271,Done,"The order of statements in RHS changes with executable model when modify block is involved. 
{code:java}
import org.drools.modelcompiler.domain.Person;global java.util.List list;
rule R when
  $p1 : Person(name == ""John"")
  $p2 : Person(name == ""Paul"")
then
  list.add($p1.getAge());
  list.add($p2.getAge());
  modify($p1) { setAge($p1.getAge()+1) }
  list.add($p1.getAge());
  list.add($p2.getAge());
  modify($p2) { setAge($p2.getAge()+5) }
  list.add($p1.getAge());
  list.add($p2.getAge());
end
{code}

Below is the generated code.

{code:java}
D.on(var_$p1,
    var_$p2,
    var_list).execute((org.drools.model.Drools drools, org.drools.modelcompiler.domain.Person $p1, org.drools.modelcompiler.domain.Person $p2, java.util.List list) -> {
   {
       {
           list.add($p1.getAge());
           list.add($p2.getAge());
           list.add($p1.getAge());
           list.add($p2.getAge());
           list.add($p1.getAge());
           list.add($p2.getAge());
           ($p1).setAge($p1.getAge() + 1);
           drools.update($p1,
                         mask_$p1);
           ($p2).setAge($p2.getAge() + 5);
           drools.update($p2,
                         mask_$p2);
       }
   }
}));
{code}",Major,Toshiya Kobayashi,,2020-04-24T01:09:14.000-0400,RHS statements ordering changes with modify block in executable model,Resolved,bug,Bug
2020-04-23T07:13:44.000-0400,DROOLS-5148,Done,"Ctrl + C / Ctrl + V is not working on DMN editor. When users try to copy and paste a node, the name and the boxed expression are not copied:

 !demo.gif|width=600! 

h5. Acceptance criteria
The copy/paste feature must work for
- text annotations (/)
- BKMs
-- FEEL (/)
-- Java (/)
-- PMML (x) DROOLS-5246
- Decisions
-- Literal (/)
-- Context (/)
-- Relation (/)
-- Decision Table (/)
-- Invocation (/)
-- List (/)
- Inputs (/)
- Knowledge sources (/)
- Decision services (/)",Major,Valentino Pellegrino,,2020-03-10T15:57:54.000-0400,[DMN Designer] Copy/Paste is not working,Resolved,bug,Bug
2020-04-22T13:18:53.000-0400,DROOLS-5190,Cannot Reproduce,"We are seeing ClasscastException while evaluating kie rules. Everytime we see this issue we have to restart the server to fix it. 

This doens't happen to all our kubernetes pods where same kie-server is running. This happens to either 1 or 2 pods all the time.

This issue is also not reproducible

Also we see different stack Trace with ClassCastException every time, Here I am pasting some of them:
ERROR 1 :
[className=DroolsKieContainerCommandServiceImpl]- Error calling container 'kie_personalization'java.lang.ClassCastException: null

ERROR 2:
 Error calling container 'kie_personalization'java.lang.ClassCastException: org.drools.core.reteoo.RuleTerminalNode cannot be cast to org.drools.core.reteoo.LeftInputAdapterNode

	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:109)

	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)

	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)

	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)

	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)

	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1062)

	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1009)

	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1001)

	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)

	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)

	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)

	at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:109)

	at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:34)

	at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:160)

	at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:66)

	at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:251)

	at org.kie.server.services.drools.RulesExecutionService.call(RulesExecutionService.java:61)

	at org.kie.server.services.drools.DroolsKieContainerCommandServiceImpl.callContainer(DroolsKieContainerCommandServiceImpl.java:70)

	at org.kie.server.remote.rest.drools.CommandResource.manageContainer(CommandResource.java:91)

	at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)

	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

	at java.lang.reflect.Method.invoke(Method.java:498)

	at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:179)

	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)

	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:193)

	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:103)

	at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:59)

	at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:96)

	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:308)

	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)

	at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:267)

	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:234)

	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:208)

	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:160)

	at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:216)

	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:301)

	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:220)

	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)

	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:276)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at com.intuit.v4.intlgntsys.recommender.personalizationrulesengine.services.util.MDCFilter.doFilter(MDCFilter.java:40)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)

	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)

	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)

	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)

	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)

	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)

	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:117)

	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:106)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)

	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)

	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)

	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)

	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)

	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)

	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493)

	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)

	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)

	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)

	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)

	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:798)

	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)

	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806)

	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498)

	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)

	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)

	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)

	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)

	at java.lang.Thread.run(Thread.java:748)

",Major,Mario Fusco,,2020-03-20T16:55:33.000-0400,ClassCastException while Evaluating rules,Resolved,bug,Bug
2020-04-23T03:58:47.000-0400,DROOLS-5255,Done,"There is an issue if dialog for inserting condition column into guided decision table is shown first time. In such case available fields for constraint are listed twice, see the attached screenshot and steps to reproduce.",Minor,Jozef Marko,,2020-04-20T05:28:43.000-0400,[Guided Decision Table] fields are listed twice,Resolved,bug,Bug
2020-04-20T04:58:11.000-0400,DROOLS-5236,Duplicate Issue,"In Business Central's DMN Modeler, a decision table with ""Unique"" Hit policy and overlapping rules, when placed into a context, produces a Runtime Exception on validate. Error Message is: ""[uuid] DMN: Validation of the DMN Model cannot be performed because of some runtime exception 'org.kie.dmn.model.v1_2.TContextEntry cannot be cast to org.kie.dmn.model.api.NamedElement'. (DMN Validation stopped on failed validation for some DMN Model)""

We expected to see 'DMN: Overlap detected: Overlap values: [...] for rules: [...]. UNIQUE hit policy decision tables can only have one matching rule' among the validation errors, and in fact this error is displayed when the decision table is not nested within a context.",Minor,Matteo Mortari,,2020-04-14T12:35:50.000-0400,Decision table validation produces runtime exception in Business Central,Resolved,bug,Bug
2020-04-17T05:21:13.000-0400,DROOLS-5237,Done,"DROOLS-5025 solved a case like this by excluding getter property from property reactivity mask.
{noformat}
rule R1 when
    $p : Person( name == ""Mario"" )
then
    System.out.println(""name = "" + $p.getName());
    modify($p) { setAge(41) };
end
{noformat}

However, there are still some cases which cause unexpected property reactivity.

For example, the rule below causes an infinite loop with executable model because ""name"" is considered as modified property. 
{noformat}
rule R1 when
    $p : Person( name == ""Mario"" )
then
    System.out.println(""name.length = "" + $p.getName().length());
    modify($p) { setAge(41) };
end
{noformat}

update() without modify block has the same issue.

In standard-drl (DialectUtil.parseModifiedProperties), ""getter + otherMethod"" chain is considered that the property is modified. So excutable model follows the same.

However, executable model evaluates all method calls in RHS while standard-drl evaluates only direct statements like ""setName(""AAA"");"" or ""getName().xxx();"". executable model also should follow.
",Major,Toshiya Kobayashi,,2020-04-15T04:53:47.000-0400,Wrong property reactivity with non getter chain of non-direct statements,Resolved,bug,Bug
2020-04-17T00:54:47.000-0400,DROOLS-1793,Won't Fix,There is problem with validation of the guided decision table if the table has defined DSL column (BRL column that is using DSL internally) and some row of the table is not using this column. For more details see the steps to reproduce.,Major,Michael Anstis,,2017-08-31T09:40:33.000-0400,[Guided Decision Table] Validation is not successfull if an unused DSL sentence is present,Closed,bug,Bug
2020-04-17T09:23:56.000-0400,DROOLS-5243,Done,"Users cannot insert new output columns by using the Decision Table header. See how to *reproduce*:

 !bug.gif|width=600! 

However, users can insert new output columns by using regular table cells. See the *workaround*:

 !workaround.gif|width=600! ",Blocker,Guilherme Gomes,,2020-04-15T19:08:47.000-0400,[DMN Designer] Boxed Expressions - Decision Table - Users cannot insert output columns by using the header,Resolved,bug,Bug
2020-04-17T00:51:55.000-0400,DROOLS-5219,Duplicate,"The issue is when user tries to create a decision table expression with multiple output columns.

To achieve this user needs to invoke context menu with items 'Insert left / Insert right'. User has two options. He can invoke such menu from 'data' cell and 'header' cell.

For data cells the feature works fine, however for header cells the operation fails and an error is shown. For more details see the video.",Major,Guilherme Gomes,,2020-04-06T02:05:40.000-0400,[DMN Designer] Multiple output columns in decision table,Closed,bug,Bug
2020-04-16T12:49:27.000-0400,DROOLS-5242,Done,"Normally a modify should be written like

{code}
modify($p) { setName(""Mark"") }
{code}

and in fact in drl if you try to use the name of the modifed variable also inside the modify block like in

{code}
modify($p) { $p.setName(""Mark"") }
{code}

it emits a compile time error. Conversely the executable model generator just ignores the modify statement and generates a model without it which is misleading. It has to also emit a compile time error.
",Major,Mario Fusco,,2020-04-15T11:32:54.000-0400,Executable model silently ignores a malformed modify statement,Resolved,bug,Bug
2020-04-15T00:32:57.000-0400,DROOLS-5231,Done,"When a nested property is modified in modify block like this:
{noformat}
rule R1
when 
  $pet : Pet(age == 3)
then
  modify ($pet) { getOwner().setLikes(""Cookie"") };
end
{noformat}
executable model creates BitMask for ""owner"" and ""likes"" thus causes a build error.

{noformat}
[ERROR] testNestedPropInRHS[PATTERN_DSL](org.drools.modelcompiler.PropertyReactivityTest)  Time elapsed: 2.702 s  <<< ERROR!
java.lang.RuntimeException: Unknown property 'likes' for class class class org.drools.modelcompiler.domain.Pet
	at org.drools.test.DomainClassesMetadata9429289867DBA6AE1EE0D6F3F6F68A4D$org_drools_modelcompiler_domain_Pet_Metadata.getPropertyIndex(DomainClassesMetadata9429289867DBA6AE1EE0D6F3F6F68A4D.java:24)
	at org.drools.model.bitmask.BitMaskUtil.calculatePatternMask(BitMaskUtil.java:61)
	at org.drools.model.BitMask.getPatternMask(BitMask.java:54)
	at org.drools.test.Rules9429289867DBA6AE1EE0D6F3F6F68A4DRuleMethods0.rule_R1(Rules9429289867DBA6AE1EE0D6F3F6F68A4DRuleMethods0.java:24)
	at org.drools.test.Rules9429289867DBA6AE1EE0D6F3F6F68A4D.getRulesList(Rules9429289867DBA6AE1EE0D6F3F6F68A4D.java:60)
	at org.drools.test.Rules9429289867DBA6AE1EE0D6F3F6F68A4D.<init>(Rules9429289867DBA6AE1EE0D6F3F6F68A4D.java:64)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)
	at java.base/java.lang.Class.newInstance(Class.java:584)
	at org.drools.modelcompiler.CanonicalKieModule.createInstance(CanonicalKieModule.java:410)
{noformat}",Major,Toshiya Kobayashi,,2020-04-08T23:59:59.000-0400,Wrong BitMask created by a nested property in modify block,Resolved,bug,Bug
2020-04-15T00:32:23.000-0400,DROOLS-5025,Done,"With a complex setter argument in modify block like this:
{noformat}
import org.drools.modelcompiler.domain.Person;
rule R 
when
    $p: Person(address.street == ""street1"")
then
    modify($p) { setLikes( String.valueOf(($p.getAddress().getStreet() + $p.getAddress().getCity()))) };
end
{noformat}

executable model creates BitMask for ""likes"" and ""address"" thus causes a wrong property reactivity behavior.
",Major,Toshiya Kobayashi,,2020-02-07T04:43:46.000-0500,Wrong BitMask created by a complex setter argument in modify block,Resolved,bug,Bug
2020-04-13T23:54:28.000-0400,DROOLS-5234,Won't Do,"version : `7.22.0.Final`
- this is my rule:
```
package org.zhangnix.droolsdemo;
import org.zhangnix.droolsdemo.model.DroolsContext;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import java.math.BigDecimal;
import java.util.List;
import java.util.Date;
import java.lang.Boolean;
import java.lang.String;
import java.lang.Integer;
function boolean checkGoodsCount(Integer currentGoodsCount,String jsonString) {
        JSONObject context = JSON.parseObject(jsonString);
        int goodsCount = context.getInteger(""goodsCount"");
        String compareType = context.getString(""compareType"");
        switch (compareType) {
            case ""M"":
                return currentGoodsCount > goodsCount;
            case ""E"":
                return currentGoodsCount == goodsCount;
            case ""EM"":
                return currentGoodsCount >= goodsCount;
            default:
                return false;
        }
    }

rule ""Activity conditions""
when
$droolsContext:DroolsContext();
eval(checkGoodsCount($droolsContext.getCurrentGoodsCount(),'{""compareType"":""EM"",""goodsCount"":3}'));
then
end
```
I use jsonString as the parameter of the function and i get a error:

> Syntax error on tokens, delete these tokens

this is my generate java file:
```
public static boolean eval0( org.zhangnix.droolsdemo.model.DroolsContext $droolsContext  
                                     ) throws java.lang.Exception {
    Boolean $eval$result$ = ( checkGoodsCount($droolsContext.getCurrentGoodsCount(),""{""compareType"":""EM"",""goodsCount"":3}"") );
    return $eval$result$ == null ? false : $eval$result$.booleanValue();
}
```

When parsing jsonString, there is no backslash (\\) before the quotes. Please tell me what should I do to pass jsonString correctly.",Major,Ant Stephenson,,2020-04-13T04:41:26.000-0400,"I use jsonString as the parameter of the function and i get a error:Syntax error on tokens, delete these tokens",Closed,bug,Bug
2020-04-08T13:12:38.000-0400,DROOLS-4963,Duplicate,"hiding the inspector on the right-hand side uncovers the save/cancel buttons

 !Screenshot from 2020-01-22 16-16-29.png|thumbnail! ",Minor,Toni Rikkola,,2020-01-22T10:52:37.000-0500,[DMN Designer] Data Types: Save/cancel icons not visible when there are many constraints and RHS dock open,Closed,bug,Bug
2020-04-07T13:18:37.000-0400,DROOLS-5225,Won't Fix,"Executable model rule compilation fails when trying to build a pattern using constraint grouping.

Example of DRL that fails to compile:

{noformat}
    rule ""TestBusiness""
    when $p : Pojo(departuretimedayofweek (== 1 || == 2 || == 7) )
    then
    end
{noformat}

Error:

{noformat}
    java.lang.StackOverflowError
    	at java.base/java.util.LinkedList.unlink(LinkedList.java:215)
    	at java.base/java.util.LinkedList.remove(LinkedList.java:530)
    	at com.github.javaparser.ast.Node.setParentNode(Node.java:389)
    	at com.github.javaparser.ast.Node.setAsParentNodeOf(Node.java:403)
    	at com.github.javaparser.ast.expr.BinaryExpr.setLeft(BinaryExpr.java:174)
    	at com.github.javaparser.ast.expr.BinaryExpr.<init>(BinaryExpr.java:131)
    	at com.github.javaparser.ast.expr.BinaryExpr.<init>(BinaryExpr.java:122)
    	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.trasformHalfBinaryToBinary(DrlxParseUtil.java:347)
    	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:194)
    	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:185)
    	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:195)
    	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:185)
     ...
{noformat}

The example works fine when compiling without executable model.",Major,Mario Fusco,,2020-04-06T12:13:10.000-0400,Constraint grouping fails with executable model,Resolved,bug,Bug
2020-04-07T10:35:03.000-0400,DROOLS-5222,Done,"Respect proper definition of closure and currying function definition as specified in the DMN specification

e.g.
* have currying function in FEEL
e.g.:  { f : function(a) function(b) a + b, r : f(1)(2) }
* have curried BKM boxed definition at DMN layer.",Major,Matteo Mortari,,2020-04-06T10:10:26.000-0400,DMN BKM / FEEL closure and currying support,Resolved,bug,Bug
2020-04-07T04:41:28.000-0400,DROOLS-5224,Done,"This is the same issue as https://issues.redhat.com/browse/DROOLS-5100, but on Dates.

As of Drools 7.33.0.Final, forall patterns with ""not equal"" (!=) constraints on Dates will break when building the KieBase.

For example the following DRL:

{noformat}
    rule ""forall with not equal""
    when forall(java.util.Date(this != ""29-Dec-2019""))
    then
    end
{noformat}
    
generates the following error:

{noformat}
    java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    
    	at java.lang.String.substring(String.java:1967)
    	at org.drools.core.rule.constraint.MvelConstraint.getLeftInExpression(MvelConstraint.java:608)
    	at org.drools.core.rule.constraint.MvelConstraint.hashCode(MvelConstraint.java:602)
    	at org.drools.core.reteoo.AlphaNode.calculateHashCode(AlphaNode.java:189)
    	at org.drools.core.reteoo.AlphaNode.<init>(AlphaNode.java:89)
    	at org.drools.core.reteoo.builder.PhreakNodeFactory.buildAlphaNode(PhreakNodeFactory.java:88)
    	at org.drools.core.reteoo.builder.PatternBuilder.buildAlphaNodeChain(PatternBuilder.java:360)
    	at org.drools.core.reteoo.builder.PatternBuilder.attachAlphaNodes(PatternBuilder.java:346)
    	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:136)
    	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:84)
    	at org.drools.core.reteoo.builder.GroupElementBuilder$NotBuilder.build(GroupElementBuilder.java:220)
    	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
    	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:108)
    	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
    	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:167)
    	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:139)
    	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
    	at org.drools.core.impl.KnowledgeBaseImpl.internalAddRule(KnowledgeBaseImpl.java:1525)
    	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:926)
    	at org.drools.core.impl.KnowledgeBaseImpl.lambda$addPackages$2(KnowledgeBaseImpl.java:728)
    	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:745)
    	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:728)
    	at org.drools.compiler.kie.builder.impl.AbstractKieModule.createKieBase(AbstractKieModule.java:226)
    	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:407)
    	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:375)
{noformat}

This is working fine when using Drools <= 7.32.0.Final.",Major,Mario Fusco,,2020-04-06T11:59:30.000-0400,"KieBase build fails with forall patterns containing ""not equal"" constraints on Dates",Resolved,bug,Bug
2020-04-06T13:10:28.000-0400,DROOLS-5217,Done,"Executable model rule compilation fails when trying to bind a _List_ from a double square bracket

Example of DRL that fails to compile:

{noformat}
    rule ""binding field indexed with square brackets""
    when $boundList: java.util.List() from [[1,2,3]]
         Pojo($boundList.containsAll(integerList))
    then
    end
{noformat}

Error:

{noformat}
    com.github.javaparser.ParseProblemException: Encountered unexpected token: ""["" ""[""
        at line 1, column 1.
    
    Was expecting one of:
    
        ""!""
        ""(""
        ""+""
        ""++""
     ...
{noformat}

The example works fine when compiling without executable model.

We acknowledge that there are better and more efficient ways to achieve the same result as the above example, but there are perhaps other use-cases for the double square bracket mvel expression. As it is supported in DRL, should it be supported with executable model too?
",Major,Mario Fusco,,2020-04-03T13:17:34.000-0400,Executable model compilation fails when binding a list from double square bracket,Resolved,bug,Bug
2020-04-06T17:28:36.000-0400,DROOLS-5045,Done,"DMN1.2 has RuleAnnotation in the DecisionTable expression.

Our marshallers (-backend and -client) do not support it and use the Expression's Description element for the DecisionRule description column. We also need to enhance the UI to support adding/deleting additional RuleAnnotations. 

Accordingly to the spec has no evaluation semantic. User can put in any value. is only text like ""code comments"".",Major,Daniel José dos Santos,,2020-02-11T10:03:01.000-0500,[DMN Designer] Marshaller does not support DMN1.2 DecisionTable RuleAnnotation ,Resolved,bug,Bug
2020-04-06T07:24:37.000-0400,DROOLS-3317,Cannot Reproduce,"Insert a fact with a boolean field in dtable RHS.
The DRL generated looks like this:

{code:java}
rule ""Row 3 The Table""
	dialect ""mvel""
	when
		s : Source( age >= 18 , kitten == ""Dog"" )
	then
		s.setRisk( ""ok"" );
		DroolsUtil fact0 = new DroolsUtil();
		fact0.setARuleFired( true );
		insert( fact0 );
end
{code}

The line 

{code:java}
fact0.setARuleFired( true );
{code}

does not compile. It should be ( for example ):

{code:java}
fact0.aRuleFired = true;
{code}

The above is done by inserting the fact with BRL action, but the same error bothers the ""Set the value of field"" option.


",Major,Guilherme Gomes,,2018-11-14T03:46:01.000-0500,Guided Decision Tables: Insert in RHS not creating valid code for boolean fields.,Closed,bug,Bug
2020-04-06T07:54:40.000-0400,DROOLS-3316,Won't Fix,Decided to change the variable name of the inserted fact and noticed it breaks the column edit.,Major,Guilherme Gomes,,2018-11-14T03:28:24.000-0500,Guided Decision Tables: Changing RHS insert fact type breaks the column,Closed,bug,Bug
2020-04-06T04:00:14.000-0400,DROOLS-4584,Done," !image-2019-10-01-11-24-36-774.png|thumbnail! 
Cell moves unexpectedly in editing mode
{color:red}*Failure*{color}
If you start edit any cell of a big grid and then scroll the input would move not in the right cell.

*Expected*
Input element moves with entire table",Major,Yeser Amer,,2019-10-01T05:37:19.000-0400,Scrolling during editing mode move cell in new position on the screen,Resolved,bug,Bug
2020-04-03T13:48:00.000-0400,DROOLS-5216,Done,"Executable model rule compilation fails on patters that bind a collection field indexed with square brackets

Example of DRL that fails to compile:

{noformat}
    rule ""binding field indexed with square brackets""
    when Pojo($firstItem : integerList[0])
         Pojo(integerList[this.integerList.size()-1] == $firstItem)
    then
    end
{noformat}

Error:

{noformat}
    Message [id=1, level=ERROR, path=src/main/java/org/drools/reproducer/RulesE96881902F91EBF30C7D6404720A1A94RuleMethods0.java, line=29, column=138
       text=no suitable method found for bind(org.drools.model.Variable<java.util.Map>,(org.drool[...]et(0))
        method org.drools.model.PatternDSL.PatternDef.<A>bind(org.drools.model.Variable<A>,org.drools.model.functions.Function1<org.drools.reproducer.Pojo,A>) is not applicable
          (inference variable A has incompatible bounds
            equality constraints: java.util.Map
            lower bounds: java.lang.Integer)
        method org.drools.model.PatternDSL.PatternDef.<A>bind(org.drools.model.Variable<A>,org.drools.model.functions.Function1<org.drools.reproducer.Pojo,A>,org.drools.model.PatternDSL.ReactOn) is not applicable
          (cannot infer type-variable(s) A
            (actual and formal argument lists differ in length))
        method org.drools.model.PatternDSL.PatternDef.<A,U>bind(org.drools.model.Variable<A>,org.drools.model.Variable<U>,org.drools.model.functions.Function1<U,A>) is not applicable
          (cannot infer type-variable(s) A,U
            (actual and formal argument lists differ in length))
{noformat}

The example works fine when compiling without executable model.

Furthermore, the same example expressed with OOPath fails to compile *both with and without executable model*:

{noformat}
    rule ""binding field indexed with square brackets in OOPath""
    when Pojo($firstItem : /integerList[0])
    Pojo(/integerList[this.integerList.size()-1] == $firstItem)
    then
    end
{noformat}

Error without executable model:

{noformat}
    Message [id=1, kieBase=binding-field-indexed-with-square-brackets, level=ERROR, path=org/drools/reproducer/rules.drl, line=4, column=0
       text=Unable to Analyse Expression /integerList[this.integerList.size()-1] == $firstItem:
    [Error: Missing left node]
    [Near : {... /integerList[this.integerList.size()-1] == $firstItem ....}]
{noformat}

Error with executable model:

{noformat}
    Message [id=1, kieBase=binding-field-indexed-with-square-brackets, level=ERROR, path=org/drools/reproducer/rules.drl, line=-1, column=0
       text=Unknown field integerList on class java.lang.Integer]
{noformat}",Major,Mario Fusco,,2020-04-03T09:14:56.000-0400,Rule compilation error when binding fields indexed with square brackets,Resolved,bug,Bug
2020-04-03T03:57:09.000-0400,DROOLS-5180,Explained,"We are using kie-server as a stand alone application. we use kie scanner to update kie container when there is a new DRL file in our .m2 folder. 

we don't have scanner polling but we use Scanner update container API to update kie container.

Every year when date changes after new year, we are facing issue where kie scanner is not able to update container with latest jar in m2 with new year date. 

When we check the container version it shows latest with new year date but internally kie is still using old jar.

We fixed this issue with create container API instead update container.

kie-server-spring-boot-starter-drools :7.18.0.Final

Please let me know if this issue is already fixed or discussed before or if you need more details.

",Critical,Mario Fusco,,2020-03-18T19:25:41.000-0400,Kie-scanner update container API doesn't refresh container with latest jar after new year,Resolved,bug,Bug
2020-04-02T13:28:45.000-0400,DROOLS-5207,Done,None,Major,Mario Fusco,,2020-03-31T04:17:11.000-0400,Binding in oopath works only on the first chuncks,Resolved,bug,Bug
2020-04-03T07:39:58.000-0400,DROOLS-5213,Done,"reproducer:
https://github.com/evacchi/kogito-examples/blob/oopath-bug-not/onboarding-example/hr/src/main/resources/org/kie/kogito/examples/hr/employeeValidation.drl

build the subproject",Major,Mario Fusco,,2020-04-03T03:51:26.000-0400,OOPath: cannot use ! in constraint with a boolean function,Resolved,bug,Bug
2020-04-03T10:16:53.000-0400,DROOLS-5214,Done,"Executable model rule compilation fails on patterns containing Java static method calls as constraints

Example of DRL that fails to compile:

{noformat}
    rule ""Array asList""
    when Pojo(java.util.Arrays.asList(1,5,2,3).containsAll(integerList))
    then
    end
{noformat}

or

{noformat}
    rule ""collections disjoint""
    when $p : Pojo($boundList : integerList)     Pojo(id > $p.id, !java.util.Collections.disjoint( integerList , $boundList ))
    then
    end
{noformat}

or

{noformat}
    rule ""containsAll""
    when Pojo(integerList.containsAll(java.util.Arrays.asList(1,3)), integerList.size() == 2)
    then
    end
{noformat}

All above examples work fine when compiling without executable model.",Major,Mario Fusco,,2020-04-03T06:30:17.000-0400,Executable model compilation fails with constraints containing static method calls,Resolved,bug,Bug
2020-04-03T11:11:21.000-0400,DROOLS-5215,Done,"Executable model rule compilation fails on rule consequents using the _drools_ keyword as a parameter of a method call.

Example of DRL that fails to compile:

{noformat}
    function printRuleName(String ruleName) {
      System.out.println(ruleName);
    }
    
    rule ""drools keyword in method call""
    when
    then
        printRuleName(drools.getRule().getName());
    end
{noformat}

The example works fine when compiling without executable model.",Major,Mario Fusco,,2020-04-03T06:58:10.000-0400,With executable model drools keyword is not found when used in a method call,Resolved,bug,Bug
2020-04-01T21:00:43.000-0400,DROOLS-4916,Done,"{noformat}
declare Application
    categories                    : Set        = new HashSet()
end
{noformat}

Then I had a modify statement scattered about:

{noformat}
modify ($a) {
   $a.getCategories().add(""hello"");
}
{noformat}

The ExecutableModel did not seem to like any of those.  I changed it to:

{noformat}
$a.getCategories().add(""hello"");
update($a);
{noformat}",Major,Toshiya Kobayashi,,2020-01-09T06:07:03.000-0500,Wrongly parse method chain in modify block in executable model,Resolved,bug,Bug
2020-03-30T03:59:12.000-0400,DROOLS-5201,Cannot Reproduce,"User is unable to work with guided editors. Always guided editor is opened, this exception is thrown.",Blocker,Michael Anstis,,2020-03-27T10:32:20.000-0400,ZipException is thrown when guided asset is opened,Closed,bug,Bug
2020-03-26T07:19:36.000-0400,DROOLS-5056,Cannot Reproduce,"Sometimes the nodes inside the Decision Service are positioned outside from the Decision Service when the .DMN is saved an open again.
I was unable to map exact when this happen, but I noticed that this happens depending on the changes you do in the position and size of the Decision Service and its inner nodes.

I recorded a video with 2 minutes when the issue happens in the last seconds.

As it can be notice it takes lots of trials to reproduce the issue.

Also I was unable to reproduce the issue in the Business Central, so I'm not sure if it is related to DMN Editor in VS Code or DMN Editor itself.",Minor,Michael Anstis,,2020-02-12T08:41:44.000-0500,[DMN Designer] Sometimes the nodes inside Decision Service are wrong positioned,Closed,bug,Bug
2020-03-24T11:00:13.000-0400,DROOLS-4848,Done,"When building droolsjbpm-knowledge repository using JDK 11, the build fails on JavaDoc generation with message: 

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:jar (default) on project kie-api: Execution default of goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:jar failed: version can neither be null, empty nor blank -> [Help 1]

This is caused by commit [1], which moved some properties to a separate bom. This bom is imported into kie-parent, but with imporing bom, its properties cannot be used, so they are not visible to javadoc plugin configuration at 2 places, e.g. here [2]. I expect the JavaDoc build fails similarly in all reopsitories where it is used, when running the build using JDK 11. 

[1] https://github.com/kiegroup/droolsjbpm-build-bootstrap/commit/5ef60cb79e9ab08612be17af8adaf4f8684db4a7
[2] https://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/master/pom.xml#L2024",Major,Marek Novotny,,2019-12-06T06:20:03.000-0500,JavaDoc generation doesn't work with JDK11 in droolsjbpm-knowledge repository,Closed,bug,Bug
2020-03-24T02:29:54.000-0400,DROOLS-5189,Done,"The community documentation generates few wrong links *href=""\_......""* instead of *href=""#\_.....""*

For example, in html page was generated link with text *_ch.kie.server*. However text of that link should be *KIE Execution Server*",Major,Jozef Marko,,2020-03-20T09:29:04.000-0400,Wrong links for some chapters,Resolved,bug,Bug
2020-03-20T16:54:51.000-0400,DROOLS-5178,Done,"Step to reproduce the problem:
1. Create a simple decision node with input: string output: string
2. Implement the decision node ad a table

it generates this DMN:  [^SampleModel2.dmn] 
the validation engine says 
bq. ""WARNING"",""[_95E9A8C2-34B5-453A-AAF2-9C8BDB092A03] DMN: Decision table with single output on node 'Decision-1' should not have an output type reference (DMN id: _95E9A8C2-34B5-453A-AAF2-9C8BDB092A03, The referenced element should not have a typeref set) "",""SampleModel2.dmn"",""0"",""0""

In fact, the dmn contains the following line:

{code:xml}
<dmn:output id=""_95E9A8C2-34B5-453A-AAF2-9C8BDB092A03"" typeRef=""string""/>
{code}

removing the {{typeRef=""string""}} the validation warning disappear.
",Minor,Michael Anstis,,2020-03-18T12:21:32.000-0400,[DMN Designer] Generate unnecessary typerRef on output tag,Resolved,bug,Bug
2020-03-20T15:15:11.000-0400,DROOLS-5006,Done,"When users leave it opened, it never disappears.

*Steps to reproduce:*
 !2020-02-04 15.34.09.gif|width=800! ",Major,Guilherme Gomes,,2020-02-04T13:35:24.000-0500,"[DMN Designer] Code Completion - When users leave it opened, it never disappears",Resolved,bug,Bug
2020-03-19T14:02:47.000-0400,DROOLS-5157,Done,"When User edit multy-linear Literal expression in some Descision
And scrolls down 
Then focus looses 
And User could not put any data to any edit field
See:  [^scroll.webm] 

Workaround:
Logout and login back",Major,Guilherme Gomes,,2020-03-12T10:19:06.000-0400,[DMN Designer] Monaco editor: Scrolling inside LiteralExpression editor breaks users ability to input data,Resolved,bug,Bug
2020-03-20T06:12:37.000-0400,DROOLS-5177,Done,"FEEL builtin date functions shall use a strict (and not ""smart"") resolver when parsing a date/time from a string",Major,Matteo Mortari,,2020-03-18T05:37:01.000-0400,DMN FEEL builtin date functions strict resolved,Resolved,bug,Bug
2020-03-18T13:39:57.000-0400,DROOLS-5135,Won't Do,"How can we do rule wise exception handling in the drools rule condition?  My scenario is how to handle scenarios when the schema of an event changes.

For example, let's say Initially  I have an event that has 5 members namely name,num1,num2,num3,num4. I started creating rules for the event and the rule engine is running for some time. After that let's assume there is a scenario in which one of the class members (say num4) is removed from the event because of some reason. Now what I can do now is to change the Event class, but all the rules associated with that member will give me exceptions. The exceptions will also affect other rules which can run with the current data. Is there any way to handle exception in rule condition for specific rule and restrict it to disturb the independent rules.",Major,Mario Fusco,,2020-03-09T02:29:06.000-0400, Drools Setup › Exception Handling in Drools Rule Condition,Resolved,bug,Bug
2020-03-17T10:33:43.000-0400,DROOLS-5125,Done,"In dmn diagram, each nodes has its data type. The issue affects all nodes, after reordering custom defined data types. After such reordering data types of diagram nodes are lost.",Critical,Daniel José dos Santos,,2020-03-04T13:55:41.000-0500,[DMN Designer] Node data type is lost after drag and drop in data type editor,Resolved,bug,Bug
2020-03-17T15:41:16.000-0400,DROOLS-5173,Explained,Can't create a child field under Data Types,Critical,Michael Anstis,,2020-03-17T11:08:39.000-0400,Can't create a child field under Data Types,Closed,bug,Bug
2020-03-18T03:09:55.000-0400,DROOLS-5174,Cannot Reproduce,There is an error thrown during creation of new field of data object.,Critical,Walter Medvedeo,,2020-03-17T11:43:35.000-0400,[Data Modeler] New field of data object throws an error,Closed,bug,Bug
2020-03-17T08:42:07.000-0400,DROOLS-4895,Done,"add {{RuleUnitDescription createRuleUnitDescription( KiePackage pkg, String ruleUnitSimpleName );}} it should be a no-op because it is only used in Kogito

also {{RuleUnitDescriptionLoader}} may use this method in case {{createRuleUnitDescription( KiePackage pkg, Class<?> ruleUnit );} fails. However, this cannot happen in Drools 7, as the RuleUnit is always described by a Class, so it will always return null (it's a no-op after all). Reasons for backport are only code alignment.",Major,Edoardo Vacchi,,2019-12-24T02:37:15.000-0500,"Backport RuleUnitComponentFactory#createRuleUnitDescription( KiePackage, String );",Resolved,bug,Bug
2020-03-17T09:55:00.000-0400,DROOLS-5138,Done,There is issue in Test Scenarios when user invokes the collection editor for {{java.util.List<java.lang.Object>}} field. ,Major,Yeser Amer,,2020-03-09T11:11:21.000-0400,Collection editor for List of Objects,Resolved,bug,Bug
2020-03-17T08:42:12.000-0400,DROOLS-5140,Done,follow up to KOGITO-1262: throw exception immediately when unit declaration cannot be found -- we cannot really proceed with processing otherwise,Major,Edoardo Vacchi,,2020-03-09T12:12:04.000-0400,Throw exception when unit declaration is not present,Resolved,bug,Bug
2020-03-17T08:07:20.000-0400,DROOLS-5170,Done,"User is unable to expand properties panel when editing DMN model.

Also kogito environment (kie-wb-common-dmn-webapp-kogito-rutime) is affected.",Blocker,David Gutierrez,,2020-03-17T04:22:07.000-0400,[DMN Designer] Properties panel can not be expanded,Resolved,bug,Bug
2020-03-16T11:08:01.000-0400,DROOLS-5119,Out of Date,"When I set up a Guided rule on Workbench having a comparison condition on one of the domain field of type Big Decimal then the int value entered through literal text disappears and turns into 0.0B.

For e.g. if you look at this Guided Rule screenshot the literal value 100 turned into 0.0.
 !Workbench-Guided-Rule.png|thumbnail! 

Also in the drools the value becomes 0.0B.
 !drools.png|thumbnail! 
",Major,Michael Anstis,,2020-03-02T16:22:40.000-0500,[Guided Rule Editor] Workbench BigDecimal value turns into 0.0 in DRL,Resolved,bug,Bug
2020-03-16T21:46:49.000-0400,DROOLS-4956,Done,"Having a constraint like
{code:java}
  Person(name == $customer)
{code}
is not really the same thing as
{code:java}
  Person($customer == name)
{code}
In the second case not only you don't have property reactivity, but also you don't have indexing. This an inconsistent behaviour and hoping to fix it with a ""normalization"" phase where the second constraint got rewritten like the first before being analyzed by property reactivity and indexing.",Major,Toshiya Kobayashi,,2020-01-20T22:03:33.000-0500,Normarize rule constraints for property reactivity and indexing,Resolved,bug,Bug
2020-03-16T03:50:54.000-0400,DROOLS-4997,Done,None,Major,Toni Rikkola,,2020-02-03T03:45:19.000-0500,DMN Validation: The Alerts panel should open when validation is ran,Resolved,bug,Bug
2020-03-12T11:47:13.000-0400,DROOLS-5154,Done,"Introduce the following new scesim kogito modules in DROOLS BOM of kie-parent repo:
drools-wb-scenario-simulation-editor-kogito-marshaller
drools-wb-scenario-simulation-editor-kogito-client
drools-wb-scenario-simulation-editor-kogito-webapp-common
drools-wb-scenario-simulation-editor-kogito-runtime
drools-wb-scenario-simulation-editor-kogito-testing",Minor,Yeser Amer,,2020-03-12T09:11:44.000-0400,Set new scesim kogito modules dependency on DROOLS BOM,Resolved,bug,Bug
2020-03-12T10:14:05.000-0400,DROOLS-5155,Duplicate Issue,"Regression Issue: compile failed when use a decision table as Context Entry value. 
The error message is :

DMN: Validation of the DMN Model cannot be performed because of some runtime exception 'org.kie.dmn.model.v1_2.TContextEntry cannot be cast to org.kie.dmn.model.api.NamedElement'. (DMN Validation stopped on failed validation for some DMN Model)",Blocker,Matteo Mortari,,2020-03-12T09:49:25.000-0400,Regression Issue: compile failed when use a decision table as Context Entry value,Closed,bug,Bug
2020-03-12T13:06:43.000-0400,DROOLS-5151,Duplicate Issue,"When user change something in *Expression Editor*
And lefts the *Expression Editor* unfocused
And goes to another  *Expression Editor* file
Then the  *Expression Editor* field and data shows from step 1

See:  [^unfocused.webm] ",Major,Guilherme Gomes,,2020-03-12T05:47:12.000-0400,[DMN editor]Edit fields that did not lost focus appears on different expression editors,Closed,bug,Bug
2020-03-11T04:21:04.000-0400,DROOLS-2278,Done,"We deployed Drools 7.5.0.Final libraries in a java container (commercial product) which specifies a security manager and a policy. 
When running the container with small Drools packages (i.e. number of rules is less than 10) processing goes very well. When it comes to more rules the following exception is issued:

SEVERE  Failed to instantiate <container_unit>; Caused by: org.jini.rio.core.JSBInstantiationException: 
java.security.AccessControlException: access denied (""java.lang.RuntimePermission"" ""createClassLoader"")
        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)
        at java.security.AccessController.checkPermission(AccessController.java:884)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
        at java.lang.SecurityManager.checkCreateClassLoader(SecurityManager.java:611)
        at java.lang.ClassLoader.checkCreateClassLoader(ClassLoader.java:274)
        at java.lang.ClassLoader.<init>(ClassLoader.java:316)
        at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.<init>(JavaDialectRuntimeData.java:573)
        at org.drools.core.rule.JavaDialectRuntimeData.makeClassLoader(JavaDialectRuntimeData.java:555)
        at org.drools.core.rule.JavaDialectRuntimeData.onAdd(JavaDialectRuntimeData.java:238)
        at org.drools.compiler.rule.builder.dialect.java.JavaDialect.<init>(JavaDialect.java:189)
        at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.newDialect(JavaDialectConfiguration.java:88)
        at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.buildDialectRegistry(KnowledgeBuilderConfigurationImpl.java:377)
        at org.drools.compiler.compiler.PackageRegistry.<init>(PackageRegistry.java:51)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.createPackageRegistry(.java:1051)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$getOrCreatePackageRegistry$0(KnowledgeBuilderImpl.java:1026)
        at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getOrCreatePackageRegistry(KnowledgeBuilderImpl.java:1026)
        at org.drools.compiler.builder.impl.TypeDeclarationCache.createTypeDeclarationForBean(TypeDeclarationCache.java:262)
        at org.drools.compiler.builder.impl.TypeDeclarationCache.getAndRegisterTypeDeclaration(TypeDeclarationCache.java:90)
        at org.drools.compiler.builder.impl.TypeDeclarationBuilder.getAndRegisterTypeDeclaration(TypeDeclarationBuilder.java:69)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getAndRegisterTypeDeclaration(KnowledgeBuilderImpl.java:1781)
        at org.drools.compiler.rule.builder.PatternBuilder.processClassObjectType(PatternBuilder.java:306)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:181)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:151)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:133)
        at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
        at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:105)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1202)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$compileRulesLevel$3(KnowledgeBuilderImpl.java:1163)
        at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
        at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1380)
        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
        at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:291)
        at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)
        at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
        at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)
        at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)
        at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)

It seems Drools 7.* version has introduced parallel compilation of rules using Java platform forkJoin threads that, according to its spec, are a bit security restrictive in the sense that container security policy or container class loader access control context is ignored. 
""If a SecurityManager is present and no factory is specified, then the default pool uses a factory supplying threads that have no Permissions enabled. The system class loader is used to load these classes."" https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html

Could Drools fix this serial-parallel asymmetric output of rules compilation logic? Or it's just a Java issue like https://bugs.java.com/view_bug.do?bug_id=8184335 ?
",Major,Mario Fusco,,2018-01-26T05:13:15.000-0500,Parallel rules compiling does not take into account JVM container security policy,Resolved,bug,Bug
2020-03-11T04:59:51.000-0400,DROOLS-5137,Done,Following changes for https://issues.redhat.com/browse/DROOLS-5060 use of a simple property for {{Name}} changed to use {{NameHolder}} and {{Name}}. Most uses were corrected however the Decision Navigator continues to use Stunner's {{DefinitionAdapter.getTitle(..)}} that looks up the property annotated with {{@Property(meta = PropertyMetaTypes.NAME)}} and returns its {{String}} value. ,Major,Michael Anstis,,2020-03-09T06:44:23.000-0400,[DMN Designer] Decision Navigator shows Name.toString() value for diagram,Resolved,bug,Bug
2020-03-11T04:35:36.000-0400,DROOLS-5136,Done,"In case of executable-module, a Map constraint with a literal value on left hand side:
{noformat}
  Person(""Value"" == itemsString[""Key""])
{noformat}
 generates redundant double-quotations hence results in a compile error.
{code:java}
org.drools.modelcompiler.util.EvaluationUtil.areNullSafeEquals(""Value"", ""_this.getItemsString().get(""Key"")"")
{code}",Major,Toshiya Kobayashi,,2020-03-09T02:38:41.000-0400,Compile error with String Map access and executable-model,Resolved,bug,Bug
2020-03-09T14:42:28.000-0400,DROOLS-1741,Won't Fix,"I am working with a project with nested objects.
I have a rule in which I need to make use of a function. If I use this function on a variable in a nested object it does not work (I get a compilation error):

Using the nested object accessor approach (compilation error ""Unable to Analyse Expression""):

        ObjectA( objectB. ( (someFunction(someVariable)) == 0 ) )

EDIT: The same compilation error occurs as well when just using a more complex operation on variables in nested objects as well (updated project on GitHub):

        ObjectA( objectB. ( (someVariable == 0 || someVariable == 1 ) || (someVariable > -1 || someVariable < 2 )) )",Minor,Mario Fusco,,2017-09-22T04:25:10.000-0400,Using a function in nested objects,Resolved,bug,Bug
2020-03-09T11:33:03.000-0400,DROOLS-5050,Done,"Alpha node based rules evaluated for expired events are not all executed during the inference cycle. 

With the following rules:

{noformat}
 declare DummyEvent
     @role( event )
     @timestamp( eventTimestamp )
     @expires( 1s )
 end
 rule R1
 when
     $evt : DummyEvent()
 then
 end
 rule R2
 when
    $evt : ApplicationEvent()
 then 
 end
{noformat}

and this code to execute:

{noformat}

    public interface ApplicationEvent { }
    public static class DummyEvent implements ApplicationEvent {...}

    /* .... */

        final KieSession kieSession = kieBase.newKieSession( sessionConfig, null );

        PseudoClockScheduler clock = kieSession.getSessionClock();
        final long currentTime = clock.getCurrentTime();
        clock.advanceTime(10, TimeUnit.SECONDS);

        kieSession.insert(new DummyEvent(10, currentTime));

        kieSession.fireAllRules()
{noformat}

then only the *R1* rule is executed, not R2. 

Note: the same test case passes on 7.2.0.Final and earlier versions.",Critical,Mario Fusco,,2020-02-11T15:43:41.000-0500,Issue with alpha node and expired events rule execution,Resolved,bug,Bug
2020-03-09T14:11:17.000-0400,DROOLS-2729,Done,"Method KieRepositoryScannerImpl#indexArtifacts first reads ALL dependencies and then tries to exclude those with scope test/provided/system. This is wrong since the nested dependencies might have different scope. Conseder this case:

A -> depends on B (with scope test)
B -> depends on C (with scope compile)

Asking for allDependencies will yield following descriptors:

A (compile scope)
B (test scope)
C (compile scope)

B gets discarded, but C remains and scanner will try to resolve it and add to class loader.

Instead of fitering the results of ArtifactResolver#getAllDependencies() (without parameters) you should use overloaded version of this method that accepts dependency filter.

I do not create rules via GUI, but have them in separate Maven project. This projects contains tests cases that check if the rules are OK. The tests create the knowlege base from filesystem and require drools-decisiontables in order to execute. ",Major,Mario Fusco,,2018-07-11T12:27:49.000-0400,KieScanner tries to read test dependencies,Resolved,bug,Bug
2020-03-06T08:12:58.000-0500,DROOLS-5112,Done,"
{code:java}
10:38:53,533 ERROR [org.kie.dmn.feel.runtime.functions.AbsFunction] (default task-26) Error trying to call function abs.: java.lang.ClassCastException: org.kie.server.services.prometheus.PrometheusMetricsDMNListener cannot be cast to org.kie.dmn.api.feel.runtime.events.FEELEventListener
	at java.lang.Iterable.forEach(Iterable.java:75)
	at org.kie.dmn.feel.lang.impl.FEELEventListenersManager.notifyListeners(FEELEventListenersManager.java:71)
	at org.kie.dmn.feel.lang.impl.FEELEventListenersManager.notifyListeners(FEELEventListenersManager.java:82)
	at org.kie.dmn.feel.lang.impl.EvaluationContextImpl.notifyEvt(EvaluationContextImpl.java:178)
	at org.kie.dmn.feel.runtime.functions.BaseFEELFunction.lambda$invokeReflectively$3(BaseFEELFunction.java:97)
	at org.kie.dmn.feel.util.Either.cata(Either.java:70)
	at org.kie.dmn.feel.runtime.functions.BaseFEELFunction.invokeReflectively(BaseFEELFunction.java:96)
	at org.kie.dmn.feel.lang.ast.FunctionInvocationNode.invokeTheFunction(FunctionInvocationNode.java:112)
	at org.kie.dmn.feel.lang.ast.FunctionInvocationNode.evaluate(FunctionInvocationNode.java:90)
	at org.kie.dmn.feel.lang.impl.CompiledExpressionImpl.apply(CompiledExpressionImpl.java:47)
	at org.kie.dmn.feel.lang.impl.InterpretedExecutableExpression.apply(InterpretedExecutableExpression.java:38)
	at org.kie.dmn.feel.lang.impl.InterpretedExecutableExpression.apply(InterpretedExecutableExpression.java:24)
	at org.kie.dmn.feel.codegen.feel11.ProcessedExpression.apply(ProcessedExpression.java:114)
	at org.kie.dmn.feel.codegen.feel11.ProcessedExpression.apply(ProcessedExpression.java:22)
	at org.kie.dmn.feel.lang.impl.FEELImpl.evaluate(FEELImpl.java:167)
	at org.kie.dmn.core.ast.DMNLiteralExpressionEvaluator.evaluate(DMNLiteralExpressionEvaluator.java:73)
	at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateDecision(DMNRuntimeImpl.java:664)
	at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateAll(DMNRuntimeImpl.java:163)
	at org.kie.dmn.core.internal.utils.DMNEvaluationUtils.evaluate(DMNEvaluationUtils.java:87)
	at org.kie.dmn.core.internal.utils.DMNEvaluationUtils.evaluate(DMNEvaluationUtils.java:51)
	at org.kie.server.services.dmn.ModelEvaluatorServiceBase.evaluateDecisions(ModelEvaluatorServiceBase.java:184)
	at org.kie.server.remote.rest.dmn.ModelEvaluatorResource.evaluateDecisions(ModelEvaluatorResource.java:108)
{code}
",Major,Matteo Mortari,,2020-02-28T04:51:09.000-0500,DMN kie-server wrong cast message reported on FEEL failure,Resolved,bug,Bug
2020-03-06T04:31:31.000-0500,DROOLS-5117,Done,"current impl: FEEL ERROR while evaluating literal expression 'median([])': The parameter 'list', in function median(), cannot be empty.

spec example Table 69: Semantics of list functions

bq. median( [ ] ) = null",Major,Matteo Mortari,,2020-03-02T04:27:58.000-0500,DMN built-in FEEL function median with empty list,Resolved,bug,Bug
2020-03-05T11:18:18.000-0500,DROOLS-5127,Done,None,Major,Mario Fusco,,2020-03-05T04:27:57.000-0500,DMNBuildBusinessKnowledgeModelBenchmark fails after resource refactor,Resolved,bug,Bug
2020-03-05T04:07:47.000-0500,DROOLS-5118,Done,"Accessing an empty component of a time/date time object.
Current impl. returnin null. This is correct.

Current impl. also reporting an Error. This is not correct.",Major,Matteo Mortari,,2020-03-02T04:32:52.000-0500,"DMN ""time offset"" property wrongly erroring",Resolved,bug,Bug
2020-03-05T04:39:53.000-0500,DROOLS-5126,Done,"When i created a simple drools project (version 7.33.0.final) in eclipse (plugin version 7.32.0 final), i ran into the following error.
(Note: drools file didn't specify ""dialect java"")


{code:java}
java.lang.RuntimeException: Unable to load dialect 'org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration'
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.addDialect(KnowledgeBuilderConfigurationImpl.java:405)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.buildDialectConfigurationMap(KnowledgeBuilderConfigurationImpl.java:391)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.init(KnowledgeBuilderConfigurationImpl.java:239)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.init(KnowledgeBuilderConfigurationImpl.java:191)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.<init>(KnowledgeBuilderConfigurationImpl.java:159)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.getBuilderConfiguration(AbstractKieProject.java:302)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.createKnowledgeBuilder(AbstractKieProject.java:288)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:213)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:75)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:274)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:242)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:192)
	at com.sample.RunnableTest.createKieBase(RunnableTest.java:67)
	at com.sample.RunnableTest.run(RunnableTest.java:36)
	at java.base/java.lang.Thread.run(Thread.java:844)
Caused by: java.lang.RuntimeException: value '9' is not a valid language level
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.setJavaLanguageLevel(JavaDialectConfiguration.java:102)
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.init(JavaDialectConfiguration.java:80)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.addDialect(KnowledgeBuilderConfigurationImpl.java:401)
	... 14 more
{code}

Once debugged, i saw that the ""LANGUAGE_LEVEL"" array in ""JavaDialectConfiguration"" stores the java versions as strings, and in the method that throws the exception ""setJavaLanguageLevel"", it uses binary search to locate the version from that array.
The problem with this is that it compares them lexicographically, so java version 9 would be greater than versions 10, 11 and 12.

So, out of the array {""1.5"", ""1.6"", ""1.7"", ""1.8"", ""9"", ""10"", ""11"", ""12""}, to find 9, the following values are tried out:
# Start: low=0, high=7
# Middle (index 3) is 1.8, smaller than 9, move middle to 10, low=4(mid + 1), high=7
# Middle (index 5) is 10, smaller than 9, move middle to 11, low=6(mid + 1), high=7
# Middle (index 6) is 11, smaller than 9, move middle to 12, low=7(mid + 1), high=7
# Middle is 12, smaller than 9, low > high, end search

The fix would be simple enough, either they should be sorted (lexicographically), or they should be floats.

My default workspace jre is 9.0.1.",Minor,Mario Fusco,,2020-03-04T20:29:21.000-0500,JavaDialectConfiguration.LANGUAGE_LEVELS being strings causes binary search to not properly locate version 9,Resolved,bug,Bug
2020-03-04T19:22:23.000-0500,DROOLS-5051,Done,"I have rule like as:

=========
rule ""My Rule""
     no-loop true
     dialect ""mvel""
     when
         $info : MyInfo()
     then
         modify ($info) {
             setResult(15 * Math.round( new BigDecimal(""49.4"") ) / 100 )
         }
end
=========

If I execute this rule in BRMS 6.4.x release (mvel 2.2.8), I will get 7.35 in the response . But if I execute same rule in RHDM 7.4.+ release (mvel 2.4.3) I will 7 in the response. ",Major,Toshiya Kobayashi,,2020-02-11T22:26:17.000-0500,Mvel type coercion and rounding behavior compatibility between mvel 2.2.8 and 2.4.3,Resolved,bug,Bug
2020-03-04T09:42:18.000-0500,DROOLS-4996,Done,"NotSerializableException is thrown at the serialization of KieBase when the 'when' part of a rule contains a query call.

InterceptorMap static subclass doesn't implement the Serializable interface.
When I corrected the source of MVELCompilationUnit and rebuild the drools-core.jar, the issue disappeared.
 

Caused by: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.drools.core.base.mvel.MVELCompilationUnit$InterceptorMap
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1576)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2286)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2210)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2068)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2286)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2210)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2068)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.rule.QueryArgument$Expression.readExternal(QueryArgument.java:145)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1974)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1566)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.rule.QueryElement.readExternal(QueryElement.java:75)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at java.util.ArrayList.readObject(ArrayList.java:797)
	at sun.reflect.GeneratedMethodAccessor112.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2177)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2068)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.rule.GroupElement.readExternal(GroupElement.java:64)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.definitions.rule.impl.RuleImpl.readExternal(RuleImpl.java:209)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.rule.JavaDialectRuntimeData.readExternal(JavaDialectRuntimeData.java:195)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at java.util.HashMap.readObject(HashMap.java:1412)
	at sun.reflect.GeneratedMethodAccessor73.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2177)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2068)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.rule.DialectRuntimeRegistry.readExternal(DialectRuntimeRegistry.java:60)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.definitions.impl.KnowledgePackageImpl.readExternal(KnowledgePackageImpl.java:306)
	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2117)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2066)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at java.util.HashMap.readObject(HashMap.java:1412)
	at sun.reflect.GeneratedMethodAccessor73.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1170)
	at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2177)
	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2068)
	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1572)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:430)
	at org.drools.core.impl.KnowledgeBaseImpl.readExternal(KnowledgeBaseImpl.java:442)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadNewObject(RiverUnmarshaller.java:1418)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:272)
	at org.jboss.marshalling.river.RiverUnmarshaller.doReadObject(RiverUnmarshaller.java:205)
	at org.jboss.marshalling.AbstractObjectInput.readObject(AbstractObjectInput.java:41)
	at org.jboss.ejb.protocol.remote.EJBClientChannel$MethodInvocation$MethodCallResultProducer.apply(EJBClientChannel.java:1208)
	... 64 more
Caused by: java.io.NotSerializableException: org.drools.core.base.mvel.MVELCompilationUnit$InterceptorMap
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.rule.QueryArgument$Expression.writeExternal(QueryArgument.java:138)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1378)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.rule.QueryElement.writeExternal(QueryElement.java:64)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.ArrayList.writeObject(ArrayList.java:762)
	at sun.reflect.GeneratedMethodAccessor308.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1028)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.rule.GroupElement.writeExternal(GroupElement.java:69)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.definitions.rule.impl.RuleImpl.writeExternal(RuleImpl.java:169)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.rule.JavaDialectRuntimeData.writeExternal(JavaDialectRuntimeData.java:132)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1785)
	at java.util.HashMap.writeObject(HashMap.java:1362)
	at sun.reflect.GeneratedMethodAccessor1251.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1028)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.rule.DialectRuntimeRegistry.writeExternal(DialectRuntimeRegistry.java:49)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.definitions.impl.KnowledgePackageImpl.writeExternal(KnowledgePackageImpl.java:257)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1785)
	at java.util.HashMap.writeObject(HashMap.java:1362)
	at sun.reflect.GeneratedMethodAccessor1251.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1028)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.impl.KnowledgeBaseImpl.writeExternal(KnowledgeBaseImpl.java:548)
	at org.jboss.marshalling.river.RiverMarshaller.doWriteObject(RiverMarshaller.java:908)
	at org.jboss.marshalling.AbstractObjectOutput.writeObject(AbstractObjectOutput.java:58)
	at org.jboss.marshalling.AbstractMarshaller.writeObject(AbstractMarshaller.java:111)
	at org.jboss.ejb.protocol.remote.EJBServerChannel$RemotingInvocationRequest$1.writeInvocationResult(EJBServerChannel.java:956)
	at org.jboss.as.ejb3.remote.AssociationImpl.lambda$receiveInvocationRequest$0(AssociationImpl.java:234)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: an exception which occurred:
	in object of type org.drools.core.impl.KnowledgeBaseImpl ",Minor,Mario Fusco,,2020-01-31T16:19:11.000-0500,NotSerializableException is thrown at the serialization of KieBase ,Resolved,bug,Bug
2020-03-03T21:15:42.000-0500,DROOLS-5115,Done,"When you have a rule like:
{noformat}
when
  $p : Person(!(money > 20))
{noformat}
, executable model fails with an error:
{noformat}
bad operand types for binary operator '>'
  first type:  java.math.BigDecimal
  second type: int
{noformat}

This is because the generated code doesn't use EvaluationUtil.
{code:java}
        org.drools.model.Rule rule = D.rule(""R"").build(D.pattern(var_$p).expr(""CE47D630E9C0B4A2A149ED40CEC3E3B0"",
                                                                              (org.drools.modelcompiler.domain.Person _this) -> !(_this.getMoney() > 20),
                                                                              D.reactOn(""money"")),
{code}",Major,Toshiya Kobayashi,,2020-03-01T21:50:46.000-0500,executable model fails with negation and BigDecimal,Resolved,bug,Bug
2020-03-04T07:51:41.000-0500,DROOLS-5100,Done,"as of Drools 7.33.0.Final, forall patterns with ""not equal"" (!=) constraints will break when building the KieBase.

For example the following DRL:

{noformat}
    rule ""forall with not equal""
    when forall(String(this != ""foo""))
    then
    end
{noformat}
    
generates the following error:

{noformat}
    java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    
    	at java.lang.String.substring(String.java:1967)
    	at org.drools.core.rule.constraint.MvelConstraint.getLeftInExpression(MvelConstraint.java:608)
    	at org.drools.core.rule.constraint.MvelConstraint.hashCode(MvelConstraint.java:602)
    	at org.drools.core.reteoo.AlphaNode.calculateHashCode(AlphaNode.java:189)
    	at org.drools.core.reteoo.AlphaNode.<init>(AlphaNode.java:89)
    	at org.drools.core.reteoo.builder.PhreakNodeFactory.buildAlphaNode(PhreakNodeFactory.java:88)
    	at org.drools.core.reteoo.builder.PatternBuilder.buildAlphaNodeChain(PatternBuilder.java:360)
    	at org.drools.core.reteoo.builder.PatternBuilder.attachAlphaNodes(PatternBuilder.java:346)
    	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:136)
    	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:84)
    	at org.drools.core.reteoo.builder.GroupElementBuilder$NotBuilder.build(GroupElementBuilder.java:220)
    	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
    	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:108)
    	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
    	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:167)
    	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:139)
    	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
    	at org.drools.core.impl.KnowledgeBaseImpl.internalAddRule(KnowledgeBaseImpl.java:1525)
    	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:926)
    	at org.drools.core.impl.KnowledgeBaseImpl.lambda$addPackages$2(KnowledgeBaseImpl.java:728)
    	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:745)
    	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:728)
    	at org.drools.compiler.kie.builder.impl.AbstractKieModule.createKieBase(AbstractKieModule.java:226)
    	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:407)
    	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:375)
{noformat}

This is working fine when using Drools <= 7.32.0.Final.",Major,Mario Fusco,,2020-02-21T09:56:54.000-0500,"KieBase build fails with forall patterns containing ""not equal"" constraints",Resolved,bug,Bug
2020-03-02T09:22:55.000-0500,DROOLS-5059,Done,"Not sure how the problem GDST is created, but it looks like there is a scenario where the value list for column is empty instead of null and the empty String as value list triggered the Verifier to think the column is an enumeration column.",Major,Toni Rikkola,,2020-02-12T15:08:05.000-0500,Verifier: GDST columns empty enumeration should be ignored,Resolved,bug,Bug
2020-03-02T05:04:46.000-0500,DROOLS-5114,Won't Fix,"Dockerfile use java-1.8.0-openjdk-headless the project is build using open jdk 1.8 but at the pod startup the following stacktrace is printed in the log and prevent the pod to start correctly

java.lang.UnsupportedClassVersionError: org/drools/cep/Rule_StockAverage302521058AccumulateExpression0Invoker has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:757)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.internalDefineClass(JavaDialectRuntimeData.java:617)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.fastFindClass(JavaDialectRuntimeData.java:588)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.loadClass(JavaDialectRuntimeData.java:565)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:352)
	at org.drools.core.rule.JavaDialectRuntimeData.wire(JavaDialectRuntimeData.java:459)
	at org.drools.core.rule.JavaDialectRuntimeData.wire(JavaDialectRuntimeData.java:450)
	at org.drools.core.rule.JavaDialectRuntimeData.wireAll(JavaDialectRuntimeData.java:280)
	at org.drools.core.rule.JavaDialectRuntimeData.onBeforeExecute(JavaDialectRuntimeData.java:252)
	at org.drools.core.rule.DialectRuntimeRegistry.onBeforeExecute(DialectRuntimeRegistry.java:137)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.reloadAll(KnowledgeBuilderImpl.java:1448)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.wireAllRules(KnowledgeBuilderImpl.java:927)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildRules(KnowledgeBuilderImpl.java:2504)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackages(KnowledgeBuilderImpl.java:2428)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:106)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:98)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:261)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:195)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.createKieBase(AbstractKieModule.java:209)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:407)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:375)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBaseFromKieSessionModel(KieContainerImpl.java:560)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:536)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:459)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:442)
	at org.kie.hacep.consumer.DroolsConsumerHandler.createAndInitializeSessionContextWithoutSnapshot(DroolsConsumerHandler.java:89)
	at org.kie.hacep.consumer.DroolsConsumerHandler.initializeKieSessionContext(DroolsConsumerHandler.java:69)
	at org.kie.hacep.consumer.DroolsConsumerHandler.<init>(DroolsConsumerHandler.java:57)
	at org.kie.hacep.core.infra.consumer.ConsumerController.<init>(ConsumerController.java:33)
	at org.kie.hacep.core.Bootstrap.startConsumers(Bootstrap.java:102)
	at org.kie.hacep.core.Bootstrap.startEngine(Bootstrap.java:47)
	at org.kie.hacep.endpoint.bootstrap.BootstrapListener.initServices(BootstrapListener.java:37)
	at org.kie.hacep.endpoint.bootstrap.BootstrapListener.contextInitialized(BootstrapListener.java:33)
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4683)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5146)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)",Major,Massimiliano Dessi,,2020-02-29T08:15:08.000-0500,Hacep on Openshift 4.3 with Drools 7.34.0-SNAPSHOT error on startup,Resolved,bug,Bug
2020-02-27T20:27:17.000-0500,DROOLS-5107,Done,"When you have a constraint with extra parentheses,
{noformat}
$p : Person((age > 30))
{noformat}
executable-model generates a pattern without a constraint expr method so it always fires.
{code:java}
    public static org.drools.model.Rule rule_R() {
        final org.drools.model.Variable<org.drools.modelcompiler.domain.Person> var_$p = D.declarationOf(org.drools.modelcompiler.domain.Person.class, DomainClassesMetadataFBDA1ED637C8B60C741C0BDB502EB8F0.org_drools_modelcompiler_domain_Person_Metadata_INSTANCE, ""$p"");
        org.drools.model.Rule rule = D.rule(""R"").build(D.pattern(var_$p),
                                                       D.execute(() -> {
                                                           {
                                                           }
                                                       }));
        return rule;
    }
{code}",Major,Toshiya Kobayashi,,2020-02-25T20:59:06.000-0500,A rule always fires with executable model for a constraint which has extra parentheses,Resolved,bug,Bug
2020-02-27T08:54:48.000-0500,DROOLS-5060,Done,"I understand [DROOLS-5017] has been re-purposed to allow Info and Warn level messages be displayed on Stunner Validation dialog. That is fine.

But, imho, an UX point is not being considered, where is necessary instead.

By the DMN spec, a node should not have a prefix/trailing space, as space insensitivity would mandate 1 trailing or 2 trailing spaces are simply ignored etc.
The engine is lenient to avoid this crashing the evaluation, but still is a bad designed model to persist the node name (DRGElement name and its corresponding variable name) with those extra spaces IMHO.

Further, I consider is just the Analyst which slipped a space.

In my perspective, the editor should just strip away the prefix/trailing space:
* -While Importing a DMN model from file Upload- (See [DROOLS-5062|https://issues.redhat.com/browse/DROOLS-5062])
* While editing a DRGElement and hitting OK to save its name

For your consideration, thanks.

h2. Manual acceptance test
- Rename a node, check undo/redo (/)
- Leading space (/)
- Trailing space (/)
- Save and reopen (/)
- Documentation tab (/)
- Rename via node popup (/)
- Rename via properties panel (/)
- Rename via expression grid - where applicable (/)",Major,Michael Anstis,,2020-02-12T17:19:55.000-0500,[DMN Designer] Editor allows node with prefix/trailing space,Resolved,bug,Bug
2020-02-27T09:57:17.000-0500,DROOLS-4868,Done,org.kie.hacep.PodAsLeaderSnapshotTest.processMessagesAsLeaderAndCreateSnapshotTest,Major,Massimiliano Dessi,,2019-12-11T04:09:32.000-0500,HA-CEP test with Executable Model,Resolved,bug,Bug
2020-02-27T04:11:02.000-0500,DROOLS-3448,Won't Fix,"Found out about this bug today, while trying to fix a full downstream build.  A test in {{kie-server-integ-tests-policy}}, {{KieServerPolicyDroolsIntegrationTest}}, broke with a {{ClassCastException}}. The cast however should have been legal.

h3.*tl;dr:* 
there is a class loading problem with {{kie-server-integ-tests-policy}} because of the way the Maven plugin is used there. 

h3. Suggested solution
{{KieServerPolicyDroolsIntegrationTest}} instantiates a {{MavenCli}} object, but (apparently) the classpath is inherited by the test runner, causing classloading issues (detailed later). We should probably fork a new JVM with a fresh classpath, limited to the dependencies of the Maven plugin so that spurious classes are not on the classpath of the test. 

h3. Other details

As part of DROOLS-3355, DROOLS-3307 I have moved CMMN package-building phase to the Assembler API. This highlighted an issue in the way the Maven plugin is tested (and/or the Service discovery mechanism, depending on how you want to see it)

This is what I have understood:

- CMMNAssemblerService is in its own package, which depends on jBPM.
- the Maven plugin injects its own ClassLoader, 
- then it calls {{KieServices.Factory.get()}}, 
- this causes the Service discovery to start, and all the services found in the {{kie.conf}}s that are on the current classpath
  Please notice that the classpath in the Full Downstream Build includes all the packages, so every kie.conf found in every project jar


In the test that broke {{KieServerPolicyDroolsIntegrationTest}}:

-    Maven instance is created; It is created a new class loader (@ BuildMojo#buildDrl() ) with the jars on which Maven plugin depends. 
     Before my fix, this *DID not* include the dependency on CMMN 
-    *however* kie.conf for CMMNAssemblerService is in the class path of full downstream build!
-    because it is not a direct Maven dependency, it is *not* in the class loader of the Maven build
-    CMMNAssemblerService is therefore loaded from the *root classloader*
-    when KieAssemblerServices are processed, all assembler services *except CMMN* are found in the maven classpath, so they are loaded from that class loader
-    ClassCastException is raised when CMMNAssemblerService is used because it is not an instance of KieAssemblerService (really, it is: but the class KieAssemblerService has now been loaded from the maven class loader, while CMMNAssemblerService has been loaded from the root classloader)

The problem is that the chain of classloaders AND the service discovery mechanism:
- The classloader delegates to the root classloader, which loads from the full downstream classpath, which includes everything and loads a service that should not be found; this in turn causes the ClassCastException 
- the service discovery mechanism loads {{kie.conf}} from the full downstream classpath, which includes jars that should not be processed (as they would not be in the maven plugin classpath)


",Major,Massimiliano Dessi,,2018-12-20T11:08:10.000-0500,"kie-server-integ-tests-policy: Maven plugin loads spurious resources, classes from the classpath",Closed,bug,Bug
2020-02-27T05:13:02.000-0500,DROOLS-4764,Done,"There is randomly failing the test {{org.kie.hacep.PodAsLeaderTest.processOneSentMessageAsLeaderTest}} with exception like:

{{noformat}}
java.lang.RuntimeException
	at org.kie.hacep.PodAsLeaderTest.processOneSentMessageAsLeaderTest(PodAsLeaderTest.java:99)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.util.NoSuchElementException
	at org.apache.kafka.common.utils.AbstractIterator.next(AbstractIterator.java:52)
	at org.kie.hacep.PodAsLeaderTest.processOneSentMessageAsLeaderTest(PodAsLeaderTest.java:82)
	... 12 more
{{noformat}}

one of the reference https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/KIE/job/7.26.x/job/DailyBuild-prod/job/DailyBuild-prod-pipeline-7.26.x/22/",Major,Massimiliano Dessi,,2019-11-15T04:18:24.000-0500,Enhance test org.kie.hacep.PodAsLeaderTest.processOneSentMessageAsLeaderTest to not randomly fail,Resolved,bug,Bug
2020-02-26T10:23:56.000-0500,DROOLS-5065,Done,"Several testes are failing on org.drools.modelcompiler.util.lambdareplace package due the md5Hash function called on className method on classes which extend MatarializedLamda class because Windows consider \r\n as line endings. So the md5Hash results different hashcodes than the expected on assertions. 

If there is any customer's use case related to this usage, I believe that the software should deal with the compatibility between different operating systems.
If the hash isn't stored and computed only on runtime, the test approch might be changed to compute the hash on the same way it is in production instead of loading it from stored files. Or a different solution might stood up.

Failing tests:
* MaterializedLambdaPredicateTest.createClassWithOneParameter
* MaterializedLambdaPredicateTest.createClassWithTwoParameters
* MaterializedLambdaExtractorTest.createExtractor
* MaterializedLambdaConsequenceTest.createConsequence
* ExecModelLambdaPostProcessorTest.convertFlowLambdaDoNotConvertConsequenceWhenDrools
* ExecModelLambdaPostProcessorTest.convertPatternLambda

If the \r is removed when calling md5Hash function, all testes pass. See the attachment [materialized_lambda_hash.patch].

Stacktrace here: https://gist.github.com/hellowdan/fc1ceb5b640239a4f284c980540eeaca 
or see the attached file [materialized_lambda_jenkins_output.pdf] for the full output.
",Minor,Luca Molteni,,2020-02-13T07:39:48.000-0500,md5Hash results with line endings \r\n on MaterializedLambda tests on Windows,Resolved,bug,Bug
2020-02-27T04:13:29.000-0500,DROOLS-1762,Won't Fix,"Suppose I use a guided decision table, which contains a custom Planner RHS IAction (e.g. [ActionSimpleConstraintMatch|https://github.com/kiegroup/optaplanner/blob/master/optaplanner-integration/optaplanner-workbench-models/optaplanner-workbench-models-datamodel-api/src/main/java/org/optaplanner/workbench/models/datamodel/rule/ActionSimpleConstraintMatch.java]). The Planner IAction is located in the following module:


{code:xml}
<dependency>
      <groupId>org.optaplanner</groupId>
      <artifactId>optaplanner-workbench-models-datamodel-api</artifactId>
</dependency>
{code}

My project depends on the optaplanner-workbench-models-datamodel-api module, so does kie-maven-plugin, see the [link|https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-maven-plugin/pom.xml#L203]. If I remove the dependency from kie-maven-plugin, the build of my project fails with the following error:

{code:xml}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:8.0.0-SNAPSHOT:build (default-build) on project dinnerparty: Execution default-build of goal org.kie:kie-maven-plugin:8.0.0-SNAPSHOT:build failed:
[ERROR] ---- Debugging information ----
[ERROR] cause-exception     : com.thoughtworks.xstream.mapper.CannotResolveClassException
[ERROR] cause-message       : org.optaplanner.workbench.models.datamodel.rule.ActionSimpleConstraintMatch
[ERROR] class               : java.util.ArrayList
[ERROR] required-type       : java.util.ArrayList
[ERROR] converter-type      : com.thoughtworks.xstream.converters.collections.CollectionConverter
[ERROR] path                : /decision-table52/actionCols/org.drools.workbench.models.guided.dtable.shared.model.BRLActionColumn/definition/org.optaplanner.workbench.models.datamodel.rule.ActionSimpleConstraintMatch
[ERROR] class[1]            : org.drools.workbench.models.guided.dtable.shared.model.BRLActionColumn
[ERROR] converter-type[1]   : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
[ERROR] class[2]            : org.drools.workbench.models.guided.dtable.shared.model.GuidedDecisionTable52
[ERROR] version             : 1.4.10
[ERROR] -------------------------------
{code}

I tried to load the org.optaplanner.workbench.models.datamodel.rule.ActionSimpleConstraintMatch class inside org.drools.workbench.models.guided.dtable.backend.GuidedDTXMLPersistence using getClass().getClassLoader().loadClass(""org.optaplanner.workbench.models.datamodel.rule.ActionSimpleConstraintMatch""), leading to ClassNotFoundException.

Expected behavior:
Be able to use external classes in a kie project without the need to declare them directly in kie-maven-plugin. It should be enough to declare those dependencies in the project that I'm building.

Attaching a reproducer (dinnerparty.zip). Should build fine out of the box. Now try to make a local build of kie-maven-plugin with org.optaplanner:optaplanner-workbench-models-datamodel-api dependency removed. Build dinnerparty project again, the issue described above should pop up.
",Major,Massimiliano Dessi,,2017-10-13T09:07:56.000-0400,kie-maven-plugin: Make use of project dependencies to avoid their declaration inside kie-maven-plugin,Closed,bug,Bug
2020-02-26T10:23:50.000-0500,DROOLS-5023,Done,"With a rule like this, (see that white spaces around ""=="" in the second rule are trimmed)
{noformat}
rule R1 when
   Person( $name: name == ""Mark"", $age: age ) or
   Person( $name: name == ""Mario"", $age : age )
then
  list.add( $name + "" is "" + $age);
end
rule R2 when
   $p: Person( name==""Mark"", $age: age ) or
   $p: Person( name==""Mario"", $age : age )
then
  list.add( $p + "" has "" + $age + "" years"");
end
{noformat}

when you insert a fact,
{code:java}
ksession.insert( new Person( ""Mark"", 37 ) );
{code}
only one rule fires.",Major,Luca Molteni,,2020-02-07T00:32:14.000-0500,executable model doesn't fire when Or with trimmed duplicate constraints,Resolved,bug,Bug
2020-02-26T03:20:50.000-0500,DROOLS-5108,Out of Date,"Tried build with 230 rules, it is taking nearly 10 seconds

{code:java}
org.kie.internal.utils.KieHelper kieHelper = new org.kie.internal.utils.KieHelper();
kieHelper.setClassLoader(this.getClass().getClassLoader());
kieHelper.addContent( drlContent, ResourceType.DRL );

Results res = kieHelper.verify();
if ( res.hasMessages( Message.Level.ERROR ) ) {
    throw new DroolsCompilationException(""Exception while compiling rule "");
}

if ( kbConf == null ) {
    kbConf = KieServices.Factory.get().newKieBaseConfiguration();
}
kbConf.setOption( EqualityBehaviorOption.EQUALITY );

KieBase kieBase = kieHelper.build( kbConf );
{code}
",Major,Mario Fusco,,2020-02-26T00:50:09.000-0500,KieHelper.build is very slow on Drools 6.4.0.Final,Resolved,bug,Bug
2020-02-25T05:19:09.000-0500,DROOLS-5102,Done,"If you execute the DMN table in attach in the last version you will have a NullPointerException in case your input value is not matching any output.
We are moving from version 23 to 33 and one of our tests are catching this issue

The ProcessedExpression Class seems can be responsible of causing this NullPointerException.

{code:java}
this.ast = (BaseNode)tree.accept(new ASTBuilderVisitor(ctx.getInputVariableTypes(), ctx.getFEELFeelTypeRegistry()))
{code}

If you try with 

""inputString"", ""hi""
""inputInteger"", 12
""inputBoolean"", false
""inputDate"", ""2019-09-26T00:00:00.000+0000""

you can replicate the error

I guess the expected behavior should be a null output as before
",Major,Matteo Mortari,,2020-02-21T11:26:36.000-0500,DMN npe when xml defines empty default expression for DT,Resolved,bug,Bug
2020-02-25T05:19:39.000-0500,DROOLS-5081,Done,"Avoid NPE if FEEL expression fails parsing due to heuristics checks:

{code:java}
java.lang.NullPointerException

       at org.kie.dmn.feel.codegen.feel11.ProcessedExpression.<init>(ProcessedExpression.java:44)

       at org.kie.dmn.feel.lang.impl.FEELImpl.compile(FEELImpl.java:111)

       at org.kie.dmn.core.compiler.DMNFEELHelper.compileFeelExpression(DMNFEELHelper.java:137)

       at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileDecisionTable(DMNEvaluatorCompiler.java:717)

       at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileExpression(DMNEvaluatorCompiler.java:159)

       at org.kie.dmn.core.compiler.DecisionCompiler.compileEvaluator(DecisionCompiler.java:74)

       at org.kie.dmn.core.compiler.DMNCompilerImpl.processDrgElements(DMNCompilerImpl.java:418)

       at org.kie.dmn.core.compiler.DMNCompilerImpl.compile(DMNCompilerImpl.java:226)

       at org.kie.dmn.validation.DMNValidatorImpl$ValidatorBuilderImpl.validateDefinitions(DMNValidatorImpl.java:329)

       at org.kie.dmn.validation.DMNValidatorImpl$ValidatorBuilderImpl.theseModels(DMNValidatorImpl.java:297)
{code}


Also improve error message, alignment to Decision Table input clause message reporting.",Major,Matteo Mortari,,2020-02-19T14:19:36.000-0500,DMN avoid NPE if failing FEEL parsing,Resolved,bug,Bug
2020-02-21T11:57:26.000-0500,DROOLS-5076,Done,"As of Drools 7.32.0.Final, patterns containing constraints on nested dates won't compile.

For instance, given the following drl:

{noformat}
declare Fact
    n : Nested
end
declare Nested
    d : java.util.Date
end

rule ""with nested date""
     when
      Fact(n!.d >= ""01-Jan-2020"", n!.d <= ""10-Jan-2020"")
     then
     end    
{noformat}

we get the following error:

{noformat}
Message [id=1, kieBase=forall-date-constraint, level=ERROR, path=org/drools/reproducer/rules.drl, line=-1, column=0
   text=Unable to Analyse Expression n.d >= ""01-Jan-2020"":
[Error: Comparison operation requires compatible types. Found class java.util.Date and class java.lang.String]
[Near : {... n.d >= ""01-Jan-2020"" ....}]
                    ^]
Message [id=2, kieBase=forall-date-constraint, level=ERROR, path=org/drools/reproducer/rules.drl, line=-1, column=0
   text=Unable to Analyse Expression n.d <= ""10-Jan-2020"":
[Error: Comparison operation requires compatible types. Found class java.util.Date and class java.lang.String]
[Near : {... n.d <= ""10-Jan-2020"" ....}]
                    ^]
{noformat}

We don't reproduce with Drools <= 7.31.0.Final
",Major,Mario Fusco,,2020-02-18T06:13:35.000-0500,Rule compilation fails with date constraints on nested fact types,Resolved,bug,Bug
2020-02-21T09:00:54.000-0500,DROOLS-3402,Cannot Reproduce,"In my drl file, I'm using German characters such as Umlauts or ß. Thus, I am setting the encoding to UTF-8 with the overloaded constructor when creating the Resource for the Kie File System. However, after firing the rules on the inserted Fact Drools does not seem to apply the specified encoding. I insert the fact, and if the condition is true to that fact it should modify the Action1 (String) attribute of the fact to ""Rückfrage"" and return the modified fact. However, when I look at the retrieved bean's Action1 attribute I am seeing ""RÃ¼ckfrage"" instead of ""Rückfrage"". I tried both UTF-8 and ISO-8859-1 encoding. Any ideas what's wrong?

Drools 7.13

*KieSessionGenerator*:

public KieSessionGenerator() {
    KieServices kieServices = KieServices.Factory.get();

    KieFileSystem kieFileSystem = kieServices.newKieFileSystem();
    kieFileSystem.write(ResourceFactory.newClassPathResource(drlFile, ""UTF-8""));

    KieBuilder kieBuilder = kieServices.newKieBuilder(kieFileSystem);
    kieBuilder.buildAll();
    KieModule kieModule = kieBuilder.getKieModule();

    KieContainer kieContainer = kieServices.newKieContainer(kieModule.getReleaseId());

    kieSession = kieContainer.newKieSession();
}
*Snippet from DRL:*

rule ""813""
when
    $bean : Bean(longDesc == ""Infektion"")
then
    $bean.setAction1(""Rückfrage"");
end

*Inserting the fact:*

public Bean lookupBean(Bean bean) {
    kieSessionGenerator.getKieSession().insert(bean);
    kieSessionGenerator.getKieSession().fireAllRules();
    return bean;
}

UPDATE: After some further investigation it looks the issue can be reproduced only when the default system encoding is set to CP-1252. 
Since the system default was CP-1252, the JVM was running with that encoding and the KIE Resource also had used this encoding, even though I set UTF-8 in its conctructor.
Once I changed the system default to UTF-8, the special characters (ä, etc.) were shown correctly.",Major,Tibor Zimanyi,,2018-12-04T07:03:36.000-0500,Encoding set in constructor not taking effect,Closed,bug,Bug
2020-02-20T12:05:36.000-0500,DROOLS-5058,Done,"h2. Manual acceptance test

h3. Business central
Edit in parallel passed but seems the performance is decreased  [^switch-dmn.webm] 
# Two dmn files, two decisions (/)
# Two dmn files, decision and bkm (/)
# One dmn file, decision table and context (/)


h3. VS Code
Edit in parallel
# Two dmn files, two decisions (/)
# Two dmn files, decision and bkm (/)
# One dmn file, decision table and context (/)",Major,Michael Anstis,,2020-02-12T12:03:10.000-0500,[DMN Designer] Impossible to open a decision if another opened DMN is editing a decision,Resolved,bug,Bug
2020-02-19T04:20:19.000-0500,DROOLS-5017,Done,"The attached DMN file is invalid as it contains a trailing space in one of its decision nodes (Base Vacation Days). I've checked with [~tari_manga], and according to him, the backend DMN validator is capable of detecting the problem and giving a proper error message. However the DMN editor in the workbench does not give any user friendly hint what the problem is, and hence it's almost impossible for a user to figure out what's wrong.

I've attached both the DMN model and  a screenshot of the error message displayed by our editor.",Major,Michael Anstis,,2020-02-06T07:33:56.000-0500,[DMN Designer] Validation issues are not shown in Alerts panel,Resolved,bug,Bug
2020-02-18T04:47:23.000-0500,DROOLS-5073,Out of Date,"Menu didn't pop up when right-click the cell in decition table if there are lot of columns (more then 18).
This happened on my macbook pro. If I use a External display.  The things will be better but still hit the issue if the columns is more than 25。 
But this isn't happend on my new windows machine(i7 9th , GTX1660ti)

So I guess this a a performance issue, when shortage of  the hardware resource， the UI will refreshed when right click the cell and caused the right-click menu gone.

Please help to check this . Thanks a lot !",Major,Michael Anstis,,2020-02-17T20:55:35.000-0500,menu didn't pop up when right-click  the cell in decition table if there are lot of columns (more then 18),Closed,bug,Bug
2020-02-18T03:00:27.000-0500,DROOLS-4967,Done,"When compiling xls decision table, wrong ruleset name is parsed from the xls file. This can lead to multiple issues, like rules being filtered out by kmodule.xml configuration.

According to documentation, decision table begins with a cell at second or third column, having value RuleSet. The cell on the right of this one contains the name of the rule set, which we want to use as a package name.

The problem lies in naive approach to parsing the package name from the xls file. As you can see in project drools-compiler, class org.drools.compiler.kie.builder.impl.KieBuilderImpl method packageNameFromDtable, it execute as follows:
# find ""RuleSet"" string in the binary data
# find and return the nearest string which can act as a valid java package name

The problem is, the string returned from packageNameFromDtable is NOT the value of the cell next to the RuleSet. It is actually a value of a random cell.

To understand the problem, we need to understand the binary content of the actual xls file. Every cell is presented as a few bytes, containing cell's value, position, and other information. The ""problematic"" thing here is, the _order_ of the cells in the binary data is NOT constant. BUT the code really just reads the cell _binary_ next to the ""RuleSet"" cell.

Problem is present since version 7.21 as it is caused by a fix for DROOLS-3888 - commit 9a179b6e6b955889200b0258ccd18cd1a5f14b46

In our case, this results in rules not being loaded, as they are filtered out by kmodule.xml configuration. We have a lot of decision tables we want to migrate from an older drools version, and most of them are now ignored due to this bug.",Blocker,Mario Fusco,,2020-01-22T13:08:35.000-0500,decision table rules are not loaded into kiebase,Resolved,bug,Bug
2020-02-18T07:49:10.000-0500,DROOLS-5075,Duplicate Issue,"The issue was found during RHDM-1181 review, however it is probably not related.

The DMN Decision table expression can have complex output - structure/context. In such case output header cells are in two levels. The issue is if the top level output header cell is selected, the properties panel is not refreshed. It is an issue if previously was selected for example input header cell, then after selection change, an inappropriate information is shown in the properties panel.

",Minor,Jozef Marko,,2020-02-18T05:55:40.000-0500,[DMN Designer] properties panel is not refreshed for top level output header,Closed,bug,Bug
2020-02-18T08:27:48.000-0500,DROOLS-5043,Done,"CME is thrown from org.drools.modelcompiler.constraints.LambdaAccumulator.hashCode in OptaPlanner KIE Server extension tests. One of the failing tests is for example [1].

The executable model is switched on because the test creates SolverFactory from KieContainer [2], that is already compiler via a kie-maven-plugin - see the corresponding testing KJAR [3].

[1] https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-tests/kie-server-integ-tests-optaplanner/src/test/java/org/kie/server/integrationtests/optaplanner/OptaplannerIntegrationTest.java#L201
[2] https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-services/kie-server-services-optaplanner/src/main/java/org/kie/server/services/optaplanner/SolverServiceBase.java#L97
[3] https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-server-parent/kie-server-tests/kie-server-integ-tests-optaplanner/src/test/filtered-resources/kjars-sources/cloudbalance

",Critical,Luca Molteni,,2020-02-11T07:02:12.000-0500,ConcurrentModificationException thrown from org.drools.modelcompiler.constraints.LambdaAccumulator.hashCode,Resolved,bug,Bug
2020-02-17T18:57:54.000-0500,DROOLS-4870,Done,"Currently consequences using Drools are not materialized (extracted in a different lambda) because they are capturing, as they use the relative bitmask instance.

We should find a way to pass the bitmask instance to the consequence so that we can materialize them. 

This means we should probably not change only the compiler, but also the interpreter of the DSL",Major,Toshiya Kobayashi,,2019-12-13T03:15:07.000-0500,Materialize consequences using Drools,Resolved,bug,Bug
2020-02-17T04:58:15.000-0500,DROOLS-3502,Won't Do,"When running mentioned tests on Windows environment, it fails with following output [1].

[1] https://gist.github.com/baldimir/f93f32a8e3855205433153712cb3baae",Major,Gabriele Cardosi,,2019-01-10T03:24:30.000-0500,"ScoringStrategiesTest, ScorecardProviderTest, ExternalObjectModelTest, ScoreCardProviderPMMLTest, ScoreCardReasonCodeTest fail on Windows",Closed,bug,Bug
2020-02-17T03:49:38.000-0500,DROOLS-5070,Duplicate Issue,"""Discard unsaved changes and proceed"" pop up is displayed even if we close the editor after clicking on ""Save"" button for guided rule editor. 

Changes seem to be getting saved on the click of ""Save"" button in the back end but still if click on close icon popup is displayed. Editor gets closed successfully if we click the save button again.",Major,Michael Anstis,,2020-02-17T01:30:22.000-0500,"""Discard unsaved changes and proceed"" pop up is displayed even if we close the editor after clicking on ""Save"" button for guided rule editor.",Closed,bug,Bug
2020-02-17T04:28:10.000-0500,DROOLS-5068,Done,"Building a KieModule with executable model fails when executed in a wildfly container with the following error:

{noformat}
Error Messages:
Message [id=1, level=ERROR, path=src/main/java/org.drools.reproducer/DomainClassesMetadata71E36BCC7D89430EC0E872CFFD5B8B5D.java, line=2, column=44
   text=The type DomainClassesMetadata71E36BCC7D89430EC0E872CFFD5B8B5D collides with a package]
Message [id=2, level=ERROR, path=src/main/java/org.drools.reproducer/DomainClassesMetadata71E36BCC7D89430EC0E872CFFD5B8B5D.java, line=0, column=0
   text=Java source of src/main/java/org.drools.reproducer/DomainClassesMetadata71E36BCC7D89430EC0E872CFFD5B8B5D.java in error:
package org.drools.reproducer;
public class DomainClassesMetadata71E36BCC7D89430EC0E872CFFD5B8B5D {

    public static final org.drools.model.DomainClassMetadata java_lang_String_Metadata_INSTANCE = new java_lang_String_Metadata();
    private static class java_lang_String_Metadata implements org.drools.model.DomainClassMetadata {

        @Override
        public Class<?> getDomainClass() {
            return java.lang.String.class;
        }

        @Override
        public int getPropertiesSize() {
            return 2;
        }

        @Override
        public int getPropertyIndex( String name ) {
            switch(name) {
                case ""bytes"": return 0;
                case ""empty"": return 1;
             }
             throw new RuntimeException(""Unknown property '"" + name + ""' for class class class java.lang.String"");
        }
    }

}]
{noformat}",Major,Mario Fusco,,2020-02-14T03:22:37.000-0500,Unable to build KieModule with executable model in wildfly,Resolved,bug,Bug
2020-02-14T08:47:05.000-0500,DROOLS-5011,Done,"In earlier versions business central editor for a Guided Rule Template would display list (multiselect drop down )of enumerated values in Data tab if the user added a Template Key of type Enumerations, but in latest version it's shown as a normal text field not displaying enum values drop down .",Major,Toni Rikkola,,2020-02-05T15:55:01.000-0500,Multiselect dropdown for enumerated values,Resolved,bug,Bug
2020-02-13T07:37:15.000-0500,DROOLS-5064,Explained,"DMN based Test Scenario cheatsheet contains incorrect entry:
_numbers and strings (strings must be delimited by quotation marks), for example ""John Doe"" or """"_

Numbers don't need to be wrapped by quotes.",Trivial,Jozef Marko,,2020-02-13T07:32:05.000-0500,DMN based Test Scenario has incorrect hint about number format,Closed,bug,Bug
2020-02-13T06:33:34.000-0500,DROOLS-5052,Done,"The version of the remote container overlays with the url of container. See the attached screenshot [1]. The proposed fix changes the rendering to [2].

[1]
 !Screenshot from 2020-02-12 10-15-11.png|thumbnail! 

[2]
 !Screenshot from 2020-02-12 10-18-37.png|thumbnail! ",Minor,Jozef Marko,,2020-02-12T04:20:00.000-0500,Remote kie container version overlays with the url,Resolved,bug,Bug
2020-02-12T11:39:13.000-0500,DROOLS-5055,Duplicate,"if you run the test you have modified:
in 6.5.0-Final it gives you:

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0
SUCCESS

in 7.26.0-Final (and above):
Tests run: 3, Failures: 3, Errors: 0, Skipped: 0

which means that there is a *breaking change issue between 6.5.0-Final and >7.26.0-Final *",Major,Luca Molteni,,2020-02-12T06:15:39.000-0500,We are currently migrating our project from 6.5.0.Final-redhat-25 to 7.x and struggling with a breaking change,Closed,bug,Bug
2020-02-11T08:08:17.000-0500,DROOLS-2397,Won't Fix,"The drools PMML modules (drools-pmml and kie-pmml) both suffer from a few class loader issues when running inside an OSGi container.

The KieBase built for transforming the PMML model to Drools model selects the wrong class loader (based on the context class loader). The JAXB instance creator fails with the same problem.",Major,Gabriele Cardosi,,2018-03-16T09:09:01.000-0400,PMML modules have classloader issues in OSGi,Closed,bug,Bug
2020-02-10T05:13:23.000-0500,DROOLS-4671,Done,"Scenario keyboard control needs to work immediately after opening Model or Background tab, see the [comment|https://github.com/kiegroup/drools-wb/pull/1239#discussion_r336385888].",Major,Yeser Amer,,2019-10-21T10:42:52.000-0400,Scenario Grids keyboard control,Resolved,bug,Bug
2020-02-09T21:24:31.000-0500,DROOLS-4600,Done,"When having and embedded Camel endpoint it DRL, it doesn't work with executable model. Reproducer can be found here [1]. For the test to reproduce the issue, it is needed to use executable model project in the buildAll() call here [2].

[1] https://github.com/kiegroup/droolsjbpm-integration/blob/5f95febee0c08131080537b3e804711d0db126ca/kie-camel/src/test/java/org/kie/camel/embedded/camel/component/KieEmbeddedEndpointChannelTest.java#L90
[2] https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-camel/src/test/java/org/kie/camel/embedded/camel/component/KieCamelTestSupport.java#L99",Major,Toshiya Kobayashi,,2019-10-03T04:48:49.000-0400,Embedded Camel endpoints don't work with executable model,Resolved,bug,Bug
2020-02-10T10:55:19.000-0500,DROOLS-4912,Done,"Change the behavior and tooltip for the inline add icon-button (+). Currently it converts the type to Structure before adding a row below. Instead, we want it to add another row without converting the type. 

Acceptance criteria:
* Tooltip: ""Add row below (Ctrl + B)"" 

Behavior - Clicking the (+) inline add button:
* from a type defined as Structure, will add a field row below.
* from a Field row (within a Structure), will add another field row below. 
* from a Simple type, such as ""Person(string)"", will add another row of the same type below. ",Minor,Guilherme Gomes,,2020-01-08T19:23:52.000-0500,[DMN Designer] Data Types - Inline add action button,Resolved,bug,Bug
2020-02-10T05:13:35.000-0500,DROOLS-5004,Done,"Once a Test Scenario file is opened, user is not able to use keyboard to navigate trough the grid. We should fix this by selecting the:
- First description cell in case of the Model tab
- First data cell in case of Background tab

The behavior described above will align behavior of Test Scenario and DMN editors.

h3. Acceptance criteria
- User can use keyboard right afterwards opening Test Scenario without need to click to canvas",Blocker,Yeser Amer,,2020-02-04T09:44:28.000-0500,Select first cell of Test Scenario,Resolved,bug,Bug
2020-02-10T10:54:59.000-0500,DROOLS-4971,Done,There is unexpected ordering of entries in Data Type editor when user add structure into structure. See the attached dmn model and screenshots.,Minor,Guilherme Gomes,,2020-01-24T03:36:51.000-0500,[DMN Designer] Adding entries to structure,Resolved,bug,Bug
2020-02-07T02:57:47.000-0500,DROOLS-5000,Done,"jBPM uses this utility method in Knowledge Helper

package org.drools.bpmn2

import org.kie.api.runtime.process.ProcessContext

rule ""Auto-activate Hello1"" ruleflow-group ""Hello""
when
then
System.out.println(drools);
System.out.println(drools.getContext(ProcessContext.class)); System.out.println(drools.getContext(ProcessContext.class).getProcessInstance());
drools.getContext(ProcessContext.class).getProcessInstance().signalEvent(""Hello1"", null);
end
",Major,Luca Molteni,,2020-02-03T06:31:04.000-0500,Support getContext in Drools' executable model,Resolved,bug,Bug
2020-02-07T08:26:39.000-0500,DROOLS-5027,Cannot Reproduce,"Open drools-wb-showcase.
Import Traffic violation example project.
Open Traffic violation DMN file.
",Blocker,Michael Anstis,,2020-02-07T07:16:11.000-0500,DMN Editor: Traffic Violation throws an NPE when opened,Resolved,bug,Bug
2020-02-07T02:58:05.000-0500,DROOLS-4990,Done,"Executing a rule containing accumulate max, eg:

{code}
rule AccumulateMaxDate
  when
  $max1 : Number() from accumulate(
  StockTick(isSetDueDate == true
        ,$time : dueDate);
       max($time.getTime().getTime()))
  then
  end
{code}

fails with a NPE at runtime if the StockDate.dueDate field is null:

{noformat}
Caused by: java.lang.NullPointerException
	at defaultpkg.RulesA0DFC3D10EA29F3818B87E11918D8020RuleMethods0.lambda$rule_AccumulateMaxDate$c9e019d8$1(RulesA0DFC3D10EA29F3818B87E11918D8020RuleMethods0.java:34)
	at org.drools.model.functions.Function1$Impl.apply(Function1.java:35)
	at org.drools.model.view.BindViewItem1.eval(BindViewItem1.java:85)
	at org.drools.modelcompiler.constraints.BindingEvaluator.evaluate(BindingEvaluator.java:39)
	at org.drools.modelcompiler.constraints.BindingEvaluator.evaluate(BindingEvaluator.java:35)
	at org.drools.modelcompiler.constraints.LambdaAccumulator$BindingAcc.getAccumulatedObject(LambdaAccumulator.java:154)
	at org.drools.modelcompiler.constraints.LambdaAccumulator.accumulate(LambdaAccumulator.java:88)
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:97)
	... 53 more
{noformat}",Major,Luca Molteni,,2020-01-30T13:50:49.000-0500,NullPointerException with executable model using accumulate max with null Date field,Resolved,bug,Bug
2020-02-07T08:34:17.000-0500,DROOLS-4585,Done,"{color:red}*Failure*{color} 
If you navigate cell that is obscured by the right panel in header then it dosen't automatically scrolls to it as it done for grid body.

*Expected*
Viewed part of grid follows the selected cell",Major,Yeser Amer,,2019-10-01T05:48:56.000-0400,Focus doesn't moves after the selected header cell,Resolved,bug,Bug
2020-02-07T12:06:46.000-0500,DROOLS-4645,Cannot Reproduce,"Employee Rostering example for OptaPlanner shows excessive memory consumption, which is connected with Drools score calculation.

Please see the reproducer - running it without drools JIT finishes on time with 3GB of memory while with drools JIT being active it fails due to ""GC overhead limit exceeded"" despite the fact it god twice as much memory.

Logging (add -Dlogback.level.org.optaplanner=trace to the execute_jit.sh script) showed there is a huge pillar move changing ~hundreds of entities which takes seconds to calculate score. During this move's evaluation, the memory consumption increases to a point when GC takes over and later fails. 

Memory sampling and heap dump investigation showed there are ~10^7 objects of org.drools.core.reteoo.FromNodeLeftTuple class, taking more memory than any other data type in the VM.

See the attached screenshots.

",Critical,Mario Fusco,,2019-10-15T04:36:35.000-0400,High memory consumption with JIT,Resolved,bug,Bug
2020-02-07T06:34:47.000-0500,DROOLS-5019,Done,"As of Drools 7.29.0.Final, rules with a forall pattern sometimes won't match as expected.

In particular we notice that adding an extra (apparently unrelated) rule causes the rule containing forall to fire when it is not expected to. No inference is involved.

Example of DRL behaving as expected:

{noformat}
package org.drools.reproducer
declare Request
    skippne : boolean
    pneeligid : String
    applicableAirlines : java.util.List
    officeid : String
end
declare Flight
    id : int
    marketingairlinecode : String
    cabin : String
end
declare Offer
    id : int
    flightIds : java.util.List
    boundIds : java.util.List
    passengerId : int
    notificationFlightId : int
    stayDurationBeforeDeparture : int
end
declare Passenger
    id : int
end

rule ""53_54_55_NotificationTestInterlineAllFlight""
when
    Offer( $thisOfferId: id, $offerFlightIds : flightIds, $offerBoundIds : boundIds, $thisPassengerId: passengerId, $thisNotificationFlightId: notificationFlightId )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id )
    Passenger( id == $thisPassengerId )
    Request( $skippne: skippne, pneeligid == ""100000053"" || skippne, $applicableAirlines: applicableAirlines )
    forall(
    $fact : Flight( $applicableAirlines contains marketingairlinecode )
    Flight( this == $fact, cabin == ""Y"" )   )
then
System.out.println(""53_54_55_NotificationTestInterlineAllFlight"");
end

rule ""2_SmsNotificationCheckinTestFNDCall""
when
    Offer( $thisOfferId: id, $thisPassengerId: passengerId, $thisNotificationFlightId: notificationFlightId, $offerFlightIds : flightIds, $offerBoundIds : boundIds, $stayDurationBeforeDeparture: stayDurationBeforeDeparture )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $thisFlightId: id )
    Passenger( id == $thisPassengerId )
    Request( $skippne: skippne, pneeligid == ""checkin"" || skippne, $applicableAirlines: applicableAirlines )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $applicableAirlines contains marketingairlinecode, cabin == ""L"" )
then
System.out.println(""2_SmsNotificationCheckinTestFNDCall"");
end
{noformat}

Example of DRL not behaving as expected (the 53_54_55_NotificationTestInterlineAllFlight rule will now fire when the forall clause is not satisfied):

{noformat}
package org.drools.reproducer
declare Request
    skippne : boolean
    pneeligid : String
    applicableAirlines : java.util.List
    officeid : String
end
declare Flight
    id : int
    marketingairlinecode : String
    cabin : String
end
declare Offer
    id : int
    flightIds : java.util.List
    boundIds : java.util.List
    passengerId : int
    notificationFlightId : int
    stayDurationBeforeDeparture : int
end
declare Passenger
    id : int
end

rule ""53_54_55_NotificationTestInterlineAllFlight""
when
    Offer( $thisOfferId: id, $offerFlightIds : flightIds, $offerBoundIds : boundIds, $thisPassengerId: passengerId, $thisNotificationFlightId: notificationFlightId )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id )
    Passenger( id == $thisPassengerId )
    Request( $skippne: skippne, pneeligid == ""100000053"" || skippne, $applicableAirlines: applicableAirlines )
    forall(
    $fact : Flight( $applicableAirlines contains marketingairlinecode )
    Flight( this == $fact, cabin == ""Y"" )   )
then
System.out.println(""53_54_55_NotificationTestInterlineAllFlight"");
end

rule ""2_SmsNotificationCheckinTestFNDCall""
when
    Offer( $thisOfferId: id, $thisPassengerId: passengerId, $thisNotificationFlightId: notificationFlightId, $offerFlightIds : flightIds, $offerBoundIds : boundIds, $stayDurationBeforeDeparture: stayDurationBeforeDeparture )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $thisFlightId: id )
    Passenger( id == $thisPassengerId )
    Request( $skippne: skippne, pneeligid == ""checkin"" || skippne, $applicableAirlines: applicableAirlines )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $applicableAirlines contains marketingairlinecode, cabin == ""L"" )
then
System.out.println(""2_SmsNotificationCheckinTestFNDCall"");
end

rule ""3_XmlNotificationCheckinTestFNDCall""
when
    Offer( $thisOfferId: id, $thisPassengerId: passengerId, $thisNotificationFlightId: notificationFlightId, $offerFlightIds : flightIds, $offerBoundIds : boundIds, $stayDurationBeforeDeparture: stayDurationBeforeDeparture )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $thisFlightId: id )
    Passenger( id == $thisPassengerId )
    Request( $skippne: skippne, pneeligid == ""checkin"" || skippne, $applicableAirlines: applicableAirlines )
    Flight( id == $thisNotificationFlightId, $offerFlightIds contains id, $applicableAirlines contains marketingairlinecode, cabin == ""Q"" )
then
System.out.println(""3_XmlNotificationCheckinTestFNDCall"");
end
{noformat}

The issue does not occur when using Drools <= 7.28.0.Final.",Major,Mario Fusco,,2020-02-06T10:15:49.000-0500,Unexpected rule match with forall pattern,Resolved,bug,Bug
2020-02-04T08:10:43.000-0500,DROOLS-4922,Done,"In case of incremental compilation, say, a rule is changed:

- A lambda consequence (or a lambda predicate) has the same expression
- But an ""import"" statement is added  to the rule

It will results in
{noformat}
[ERROR] testIdenticalConsequenceButImportChange[PATTERN_DSL](org.drools.modelcompiler.IncrementalCompilationTest)  Time elapsed: 3.135 s  <<< ERROR!
java.lang.LinkageError: loader org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader @2b0dc227 (instance of org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader, child of 'app' jdk.internal.loader.ClassLoaders$AppClassLoader) attempted duplicate class definition for org.drools.test.LambdaConsequence6F5B5EC739B778AE0EE14FA22BAFE144.
	at java.base/java.lang.ClassLoader.defineClass1(Native Method)
	at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016)
	at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:877)
	at org.drools.dynamic.DynamicProjectClassLoader$DefaultInternalTypesClassLoader.defineClass(DynamicProjectClassLoader.java:97)
	at org.drools.reflective.classloader.ProjectClassLoader.defineType(ProjectClassLoader.java:183)
	at org.drools.reflective.classloader.ProjectClassLoader.defineClass(ProjectClassLoader.java:195)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.reinitModifiedClasses(KieContainerImpl.java:323)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:243)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:236)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:194)
	at org.drools.modelcompiler.IncrementalCompilationTest.testIdenticalConsequenceButImportChange(IncrementalCompilationTest.java:257)
...
{noformat}",Major,Toshiya Kobayashi,,2020-01-10T03:17:17.000-0500,LinkageError: attempted duplicate class definition for materialized Lambda during incremental compilation,Resolved,bug,Bug
2020-02-04T09:59:39.000-0500,DROOLS-4980,Done,"Parameter content type in swagger doc for */server/containers/{containerId}/scesim* is only *application/json* but the expected body content that is *application/xml*

 !image-2020-01-27-10-09-23-636.png|thumbnail! ",Trivial,Daniele Zonca,,2020-01-27T04:11:58.000-0500,Parameter content type in swagger doc for /server/containers/{containerId}/scesim is application/json,Resolved,bug,Bug
2020-02-03T10:37:38.000-0500,DROOLS-4726,Cannot Reproduce,See the attached video. The bound facts from main model tab are available in the Background tab.,Major,Yeser Amer,,2019-11-05T05:54:46.000-0500,Bound facts from model are available on Background,Closed,bug,Bug
2020-02-03T10:41:33.000-0500,DROOLS-3451,Cannot Reproduce,"It is not possible to select the {{FunctionGrid}} _expression_ cell.

Left-single-click does not select cell:

 !function-grid-left-click.png|thumbnail! 

Whereas right-single-click does (and shows _context_ menu):

 !function-grid-right-click.png|thumbnail! 

It should be possible to select the cell with single-left-click too.

h2. Acceptance criteria
Select function expression cell by
- Left Single click
- Right Single click
- Keyboard navigation",Minor,Daniel José dos Santos,,2018-12-21T15:10:26.000-0500,[DMN Designer] Function: Not possible to select _expression_ cell,Closed,bug,Bug
2020-02-04T09:19:36.000-0500,DROOLS-4920,Done,"If a user tries  to create a test scenario for  [^urgent.dmn] he will get a [1] even when he is creating test scenario for the first time.

[1]
!Screenshot from 2020-01-08 14-14-05.png|thumbnail!

h3. Acceptance criteria
https://github.com/jboss-integration/bxms-qe-tests/pull/3048",Major,Daniele Zonca,,2020-01-10T01:37:45.000-0500,Scenario simulation for DMN with collections throws en error,Resolved,bug,Bug
2020-02-03T03:33:12.000-0500,DROOLS-4962,Duplicate,"1. Create a ""test_functions"" project in the ""MySpace"" space.
2. Create a ""Person"" Data Object

{code:java}
package com.myspace.test_functions;

/**
 * This class was automatically generated by the data modeler tool.
 */

public class Person implements java.io.Serializable {

	static final long serialVersionUID = 1L;

	@org.kie.api.definition.type.Label(""Gender"")
	private java.lang.String gender;
	@org.kie.api.definition.type.Label(""Is Married"")
	private java.lang.Boolean married;
	@org.kie.api.definition.type.Label(""Name"")
	private java.lang.String name;

	@org.kie.api.definition.type.Label(value = ""Message"")
	private java.lang.String message;

	public Person() {
	}

	public void setHelloMsg(String arg) {
		this.message = arg;
	}
	public java.lang.String getGender() {
		return this.gender;
	}

	public void setGender(java.lang.String gender) {
		this.gender = gender;
	}

	public java.lang.Boolean getMarried() {
		return this.married;
	}

	public void setMarried(java.lang.Boolean married) {
		this.married = married;
	}

	public java.lang.String getName() {
		return this.name;
	}

	public void setName(java.lang.String name) {
		this.name = name;
	}

	public java.lang.String getMessage() {
		return this.message;
	}

	public void setMessage(java.lang.String message) {
		this.message = message;
	}

	public Person(java.lang.String gender, java.lang.Boolean married,
			java.lang.String name, java.lang.String message) {
		this.gender = gender;
		this.married = married;
		this.name = name;
		this.message = message;
	}

}
{code}

3. Import the ""test_functions.xlsx""
4. Convert the ""test_functions.xlsx""
5. Check the result files

",Major,Toni Rikkola,,2020-01-22T05:02:53.000-0500,[GSS](7.z) A Spreadsheet decision tables does not convert to a DRL file correctly when a Function is being used in the RuleTable constraints,Resolved,bug,Bug
2020-01-31T09:27:58.000-0500,DROOLS-4975,Duplicate,"Import the attached project and click Build, then Test. 

The re are defined equivalent tests. One test has a collection unary check defined with UI editor and one test defined a collection unary check with textual editor. The issue is tests with the unary check defined via textual editor does not pass.",Critical,Daniele Zonca,,2020-01-24T05:58:59.000-0500,Defined Rule collection unary checks do not pass,Closed,bug,Bug
2020-02-03T02:47:03.000-0500,DROOLS-4972,Done,"If user starts to create list using UI editor, then he decides to switch to textual editor - define list as expression, the buttons are disabled if user didn't canceled items 'in progress' in the UI editor. See the attached video.",Minor,Yeser Amer,,2020-01-24T04:33:48.000-0500,Buttons stay disabled when switching to textual collection editor,Resolved,bug,Bug
2020-01-29T18:55:56.000-0500,DROOLS-4924,Done,"LambdaConsequence like this is not materialized.
{code:java}
D.execute(() -> {
   System.out.println(""Hello"");
}
{code}",Major,Toshiya Kobayashi,,2020-01-10T05:24:51.000-0500,LambdaConsequence without bind variable is not materialized,Resolved,bug,Bug
2020-01-31T02:18:04.000-0500,DROOLS-4985,Done,"The attached ""test_functions.xlsx"" spreadsheet which is being used for creating a “Spreadsheet decision tables” asset. This spreadsheet  contains a “Function” and has some rules. These rules use the “Function” in the constraints. When this XLSX Decision Table is converted to a “Guided Decision Table”, the constraints are missing the “Function” calls. Surprisingly if the “Function” call is used in a System.out.println statement, the generated DRL correctly contains it.

A wrongly generated DRL rule
{code}
rule ""Row 3 Hello RuleTable""
                dialect ""mvel""
                when
                                $person : Person( gender == ""Female"" , married == true )
                then
                                $person.setHelloMsg( ""Miss"" );
                                System.out.println(hello($person.getName(), ""Miss"", ""how are you doing""));
end
{code}

Expected correct DRL rule
{code}
rule ""Row 3 Hello RuleTable  DRL""
                dialect ""mvel""
                when
                                $person : Person( gender == ""Female"" , married == true )
                then
                                $person.setHelloMsg( hello($person.getName(), ""Miss"", ""how are you doing"") );
                                System.out.println(hello($person.getName(), ""Miss"", ""how are you doing""));
end
{code}

Regards,
Oscar.
",Major,Toni Rikkola,,2020-01-27T13:05:26.000-0500,A Spreadsheet decision tables does not convert to a DRL file correctly when a Function is being used in the RuleTable constraints,Resolved,bug,Bug
2020-01-31T08:25:17.000-0500,DROOLS-4950,Won't Fix,"Issue was spotted during DROOLS-4698 review. However it can be handled separately.

There is issue that user can define collection unary test with UI editor [1] but also as plain text [2]. The problem is the result is different.

[1]
 !Screenshot from 2020-01-17 13-56-02.png|thumbnail! 

[2]
 !Screenshot from 2020-01-17 13-56-10.png|thumbnail! ",Critical,Anna Dupliak,,2020-01-17T07:51:06.000-0500,Different behavior of collection unary checks,Closed,bug,Bug
2020-01-31T12:26:16.000-0500,DROOLS-4921,Done,"Scrollbars in the popup do not work rolling wheel on mouse. User can just click on it and drag manually.
 !Screenshot from 2020-01-08 14-20-30.png|thumbnail! ",Major,Yeser Amer,,2020-01-10T01:44:10.000-0500,Scrollbars in collection editor popup do not work,Resolved,bug,Bug
2020-01-29T12:19:54.000-0500,DROOLS-4973,Done,"Import the attached project and click Build, then Test. 

The re are defined 2 groups of 2 equivalent tests. In each group one test has a collection unary check defined with UI editor and one test defined a collection unary check with textual editor. The issue is tests with the unary check defined via textual editor do not pass.",Critical,Yeser Amer,,2020-01-24T04:45:45.000-0500,Defined DMN collection unary checks do not pass,Resolved,bug,Bug
2020-01-29T10:51:41.000-0500,DROOLS-4727,Out of Date,See the attached video. There is confusing message when user bind a fact on Background tab and tries to continue work with the editor. The current message is  like _Can not read GJg undefined property_.,Major,Yeser Amer,,2019-11-05T05:58:57.000-0500,Unclear message when user tries to bind a fact on the Background tab,Closed,bug,Bug
2020-01-28T22:37:13.000-0500,DROOLS-4979,Done,"{code:java}
  @Test
    public void testAccumulateOfDurationBetweenDateTime() {
        final String drl =
                ""import java.time.Duration\n"" +
                        ""import "" + Interval.class.getCanonicalName() + "";\n"" +
                        ""global java.util.List result; \n"" +
                        ""\n"" +
                        ""rule \""Rule1\""\n"" +
                        ""when\n"" +
                        ""    $count : Number() from accumulate(\n"" +
                        ""       Interval($start : start, $end : end), "" +
                        ""       sum(Duration.between($start, $end).toMinutes())  "" +
                        ""    ) "" +
                        ""then\n"" +
                        ""       result.add($count);\n"" +
                        ""end\n"";

        List<Long> result = new ArrayList<>();

        KieSession ksession = getKieSession(drl);
        ksession.setGlobal(""result"", result);

        ksession.insert(new Interval(
                LocalDateTime.of(2020, 1, 22, 11, 43),
                LocalDateTime.of(2020, 1, 22, 12, 43)
        ));

        ksession.fireAllRules();

        assertEquals(60, result.iterator().next().longValue());

    }
{code}


  ",Major,Mario Fusco,,2020-01-27T04:09:39.000-0500,Support static method invocation in accumulate,Resolved,bug,Bug
2020-01-28T22:51:45.000-0500,DROOLS-4952,Explained,"I'm compiling/ running rules using expert (drools-7.31) and java 13.0.1, and getting errors like the following:

{code:java}
java.lang.NoClassDefFoundError: org/drools/reflective/classloader/ProjectClassLoader
[context - 1447]:   at org.drools.core.impl.KnowledgeBaseFactory.newKnowledgeBase(KnowledgeBaseFactory.java:106)
[context - 1447]:   at org.drools.core.impl.KnowledgeBaseFactory.newKnowledgeBase(KnowledgeBaseFactory.java:80)
[context - 1447]:   at org.drools.core.impl.KnowledgeBaseFactory.newKnowledgeBase(KnowledgeBaseFactory.java:64)
[context - 1447]:   at Reason$Descriptor.reason(Reason.java:459)
[context - 1447]:   at Reason.lambda$run$1(Reason.java:82)
[context - 1447]:   at io.javalin.core.security.SecurityUtil.noopAccessManager(SecurityUtil.kt:22)
[context - 1447]:   at io.javalin.http.JavalinServlet$addHandler$protectedHandler$1.handle(JavalinServlet.kt:116)
[context - 1447]:   at io.javalin.http.JavalinServlet$service$2$1.invoke(JavalinServlet.kt:45)
[context - 1447]:   at io.javalin.http.JavalinServlet$service$2$1.invoke(JavalinServlet.kt:24)
[context - 1447]:   at io.javalin.http.JavalinServlet$service$1.invoke(JavalinServlet.kt:123)
[context - 1447]:   at io.javalin.http.JavalinServlet$service$2.invoke(JavalinServlet.kt:40)
[context - 1447]:   at io.javalin.http.JavalinServlet.service(JavalinServlet.kt:75)
[context - 1447]:   at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
[context - 1447]:   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:867)
[context - 1447]:   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:542)
[context - 1447]:   at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
[context - 1447]:   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1588)
[context - 1447]:   at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255)
[context - 1447]:   at io.javalin.core.JavalinServer$start$httpHandler$1.doHandle(JavalinServer.kt:53)
[context - 1447]:   at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203)
[context - 1447]:   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480)
[context - 1447]:   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1557)
[context - 1447]:   at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201)
[context - 1447]:   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247)
[context - 1447]:   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144)
[context - 1447]:   at org.eclipse.jetty.server.handler.HandlerList.handle(HandlerList.java:61)
[context - 1447]:   at org.eclipse.jetty.server.handler.StatisticsHandler.handle(StatisticsHandler.java:174)
[context - 1447]:   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132)
[context - 1447]:   at org.eclipse.jetty.server.Server.handle(Server.java:502)
[context - 1447]:   at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:364)
[context - 1447]:   at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260)
[context - 1447]:   at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305)
[context - 1447]:   at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103)
[context - 1447]:   at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118)
[context - 1447]:   at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333)
[context - 1447]:   at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310)
[context - 1447]:   at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168)
[context - 1447]:   at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126)
[context - 1447]:   at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366)
[context - 1447]:   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765)
[context - 1447]:   at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683)
[context - 1447]:   at java.base/java.lang.Thread.run(Thread.java:830)
[context - 1447]: Caused by: java.lang.ClassNotFoundException: org.drools.reflective.classloader.ProjectClassLoader
[context - 1447]:   at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:602)
[context - 1447]:   at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
[context - 1447]:   at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
[context - 1447]:   ... 42 more

{code}

Is this class missing or removed from the distribution? The related release notes don't mention anything, and things work fine in drools-7.30 (class located in drools-core-7.30.0.Final.jar).",Major,Mario Fusco,,2020-01-18T12:37:52.000-0500,drools-7.31 expert missing/ dropped ProjectClassLoader class?,Resolved,bug,Bug
2020-01-28T12:18:44.000-0500,DROOLS-4968,Done,"A rdrl file containing the following constraint is changed after being opened with the Guided Rule Editor in business central:

* before:

{code}
FactA(type == ""A"", (symbol != null && matches ""P.*"") || (symbol != null && matches ""p.*"") )
{code}

* after:

{code}
FactA(type == ""A"", (symbol != null && ) || (symbol != null && ) )
{code}",Major,Daniel José dos Santos,,2020-01-22T13:29:59.000-0500,Guided Rule Editor removes matches statement from rule,Resolved,bug,Bug
2020-01-28T16:24:58.000-0500,DROOLS-4976,Done,"Users are no longer able to create Guided Decision Table Graphs.

A {{Parameter named 'analysisReportScreen' should be not null!}} error is thrown when trying to ""open"" an existing Guided Decision Table to the graph. 

h3. Manual Test (/)
# Open sample Mortgages
# Crete new graph
# Open existing 'Pricing Loans'
# Create new table
# Swithh between them
# Check analysis is synced during sync",Critical,Toni Rikkola,,2020-01-24T07:15:30.000-0500,Guided Decision Table Graphs do not work,Resolved,bug,Bug
2020-01-28T05:56:11.000-0500,DROOLS-4858,Done,None,Major,Luca Molteni,,2019-12-09T07:08:07.000-0500,"Avoid materialized nested lambdas of method called ""execute""",Resolved,bug,Bug
2020-01-28T09:04:12.000-0500,DROOLS-4878,Done,"How to reproduce:
- edit kmodule.xml and create only a default stateless session
{code:java}
<kmodule xmlns=""http://www.drools.org/xsd/kmodule"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">
  <kbase name=""myKieBase"">
    <ksession name=""mySession"" type=""stateless"" default=""true""/>
  </kbase>
</kmodule>
{code}
- create a Rule test scenario and specify in Setting panel {{stateless}}
- run

Without the fix:
Test failed with this exception ""Impossible to find a KieSession with name null""

With the fix:
The test should be able to run because that kmodule configuration is valid",Major,Daniele Zonca,,2019-12-18T07:33:00.000-0500,Test Scenario: fix support for default stateless kieSession,Resolved,bug,Bug
2020-01-23T11:06:09.000-0500,DROOLS-4936,Done,"Open a GRE file. Add a fact pattern. Save.
Close and the editor still thinks it has not been saved.",Major,Toni Rikkola,,2020-01-15T09:39:55.000-0500,Unsaved changes dialog appears even if it just have been saved,Resolved,bug,Bug
2020-01-22T06:13:28.000-0500,DROOLS-4943,Cannot Reproduce,None,Blocker,Toni Rikkola,,2020-01-16T10:03:42.000-0500,Guided Decision Table Validation and Verification feature is broken,Closed,bug,Bug
2020-01-22T05:23:03.000-0500,DROOLS-4927,Done,"Prometheus Kie server extensions contains support for custom metrics [1].
These metrics are added when a new container is called [2].
However when container is removed then these metrics stay active. Agenda event listener has container instance as a HashMap key. This container instance is quite big, causing memory leak.

[1] https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-services/kie-server-services-prometheus/src/main/java/org/kie/server/services/prometheus/PrometheusCustomMetricsSupport.java
[2] https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-services/kie-server-services-prometheus/src/main/java/org/kie/server/services/prometheus/PrometheusCustomMetricsSupport.java#L78-L94",Major,Luca Molteni,,2020-01-11T13:58:42.000-0500,Memory leak in PrometheusKieServerExtension,Resolved,bug,Bug
2020-01-21T08:01:26.000-0500,DROOLS-4913,Duplicate Issue,"Change the behavior and tooltip for the inline add icon-button (+). Currently it converts the type to Structure before adding a row below. Instead, we want it to add another row without converting the type. 

Acceptance criteria:
*Tooltip: ""Add row below (Ctrl + B)"" 

Behavior - Clicking the (+) inline add button:
* from a type defined as Structure, will add a field row below.
* from a Field row (within a Structure), will add a field row below. 
* from a Simple type, such as ""Person(string)"", will add another row of the same type below. ",Minor,Guilherme Gomes,,2020-01-08T19:25:12.000-0500,DMN Data type editor - inline add action button. ,Closed,bug,Bug
2020-01-21T06:53:22.000-0500,DROOLS-4945,Done,"When creating a Guided Decision Table where one of the columns references a ParentObject->List->ChildObject->Field. The validator gives a warning that all rows are deficient rows
 !image-2020-01-08-10-03-52-210.png|thumbnail! 
 !image-2020-01-08-10-05-17-751.png|thumbnail! ",Minor,Toni Rikkola,,2020-01-16T12:29:54.000-0500,Deficient Rows warning shows when Decision Table references items in a list,Resolved,bug,Bug
2020-01-21T09:19:10.000-0500,DROOLS-4949,Done,"Issue was spotted during DROOLS-4698 review. However it can be handled separately.

There appears misleading blue rectangle above the collection editor popup once when the editor has focus / is clicked.",Minor,Yeser Amer,,2020-01-17T06:34:57.000-0500,Blue rectangle above test scenario collection editor,Resolved,bug,Bug
2020-01-20T08:59:27.000-0500,DROOLS-4946,Done,"Karaf integration tests from [module|https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-osgi/kie-karaf-itests] fails with the error attached.

Also https://github.com/kiegroup/jbpm-work-items/blob/master/karaf-itests/src/test/java/org/jbpm/process/workitem/camel/karaf/itests/CamelWorkitemIntegrationTest.java is affected",Blocker,Marian Macik,,2020-01-17T02:17:34.000-0500,Karaf integration tests fail,Resolved,bug,Bug
2020-01-20T03:52:48.000-0500,DROOLS-4736,Done,"The drools-model modules contain dashes in their JPMS module name, making it impossible to use them on the module path:

{code}
org.drools.canonical-model
org.drools.mvel-compiler
org.drools.mvel-parser
org.drools.model-compiler
{code}

See [sormuras/modules|https://github.com/sormuras/modules#about-java-module-names] for details about Java module names.",Major,Jiri Petrlik,,2019-11-10T14:50:11.000-0500,Invalid JPMS module names,Resolved,bug,Bug
2020-01-15T10:18:11.000-0500,DROOLS-3510,Explained,"When second condition refers to a field of a variable bound in first condition and there exists row/rule without condition constraint than decision table compiler fails to generate rules. See attachment.

Expected rules to be generated:


{code:java}
rule ""Test_1""
	when
		$factA:FactA(hasSomething == ""true"")
		$numberOfFactsB: Number(this > 0, this <= 1) from accumulate(FactB(x == 1) from $factA.listOfFactsB,count(1))	
	then
		insert(X);
end

rule ""Test_2""
	when
		$factA:FactA(hasSomething == ""true"")
		$numberOfFactsB: Number(this > 1, this <= 2) from accumulate(FactB(x == 1) from $factA.listOfFactsB,count(1))	
	then
		insert(X);
end

rule ""Test_3""
	when
		$factA:FactA()
		$numberOfFactsB: Number(this > 2, this <= 3) from accumulate(FactB(x == 1) from $factA.listOfFactsB,count(1))	
	then
		insert(Y);
end

{code}

Also, there does not seem an alternative way to generate following rule using decision table:


{code:java}
rule ""Test""
	when
		$factA:FactA($factsB: listOfFactsB)
		$numberOfFactsB: Number(this > 1) from accumulate(FactB(x == 1) from $factsB,count(1))	
	then
		insert(Y);
end
{code}

",Minor,Mario Fusco,,2019-01-11T12:29:17.000-0500,Decision table unable to generate rule for row with pattern without constraint,Resolved,bug,Bug
2020-01-17T08:51:07.000-0500,DROOLS-4944,Done,Maven has switched to HTTPS only which means the default Maven Central in Aether stopped working.,Major,Marian Macik,,2020-01-16T12:10:18.000-0500,Change Maven Central to HTTPS in Aether,Resolved,bug,Bug
2020-01-15T07:34:18.000-0500,DROOLS-4803,Done,"If user wants to reorder the items of a DMN structure, the dragged item is always taken out from the Structure between top level data types.",Major,Guilherme Gomes,,2019-11-25T05:30:53.000-0500,[DMN Designer] Data Types - Drag and Drop - User is unable to reorder structure items,Resolved,bug,Bug
2020-01-17T10:02:13.000-0500,DROOLS-4906,Done,None,Blocker,Massimiliano Dessi,,2020-01-07T10:01:26.000-0500,Maven configuration script is not able to start in HA-CEP image in Openshift,Resolved,bug,Bug
2020-01-15T04:04:36.000-0500,DROOLS-4169,Explained,"Reproduction repository: https://github.com/AussieGuy0/drools-bug

*Summary*
When large rule (.drl) files are complied **with** the security manager turned
on in a servlet container (e.g. Tomcat), it causes `AccessControlExceptions`, which causes `NoClassDefFoundErrors`.

*Steps*
Prereqs: Program is run in servlet context (e.g .war file in tomcat)
1. Turn on security manager
2. Provide policy files through the properties `java.security.policy` and `kie.security.policy`
3. Compile a `.drl` file that has more than `parallelRulesBuildThreshold` (default: 10) rules

*Expected Result*
Rules are compiled successfully

*Actual Result*
No class def error

*Cause*
In `KnowledgeBuilderImpl`, a `ForkJoinPool` is created and used for parallel building. 
A `ForkJoinPool` with no `ForkJoinWorkerThreadFactory` specified, it will use a default factory
that provides it's own permissions. These permissions are not sufficient for compiling
drl files in a servlet context.

*Potential Fix*
A potential fix is to allow the user to provide their own `ForkJoinWorkerThreadFactory` as a 
configuration option for drools.
",Major,Mario Fusco,,2019-06-12T21:54:45.000-0400,Can't compile large .drl files with security manager turned on in tomcat,Resolved,bug,Bug
2020-01-15T06:20:32.000-0500,DROOLS-4882,Done,If the guided decision table uses fact field that has form 'xXxxx' then the generated getters and setters are incorrect.,Major,Toni Rikkola,,2017-06-02T01:10:32.000-0400,[Guided DecisionTable] Incorrect getters and setters for fields that starts with one lowercase letter,Resolved,bug,Bug
2020-01-14T05:22:36.000-0500,DROOLS-4929,Done,Either using the single model Validation API or the Fluent API for multiple models (yet validating only a single model) should result in the same KIE Message being reported. This is linked to Workbench behavior which relies on Kie Message level and not typed-message for DT Analysis,Major,Matteo Mortari,,2020-01-13T10:01:05.000-0500,DMN DT Analysis to report all Kie Messages,Resolved,bug,Bug
2020-01-14T05:32:00.000-0500,DROOLS-4917,Done,None,Major,Yeser Amer,,2020-01-09T09:23:45.000-0500,Multistatement support for MVEL Expressions,Resolved,bug,Bug
2020-01-14T03:52:00.000-0500,DROOLS-4611,Done,It is impossible to use infinity values.,Major,Daniele Zonca,,2019-10-07T07:27:47.000-0400,It is impossible to use infinity values,Resolved,bug,Bug
2020-01-14T04:22:12.000-0500,DROOLS-4925,Done,"As of Drools 7.29.0.Final, {{forall}} patterns containing equality constraints on dates won't match as expected.

For instance, given the following drl

{noformat}
    declare Fact
      d : java.util.Date
    end
    
    rule ""forall with date""
    when
      forall(Fact(d == ""01-Jan-2020""))
    then
    end
{noformat}

and the following working memory:

{noformat}
    Fact( d=Wed Jan 01 00:00:00 CET 2020 )
    Fact( d=Wed Jan 01 00:00:00 CET 2020 )
    Fact( d=Wed Jan 01 00:00:00 CET 2020 )
{noformat}

Drools <= 7.28.0.Final will fire 1 rule, whereas Drools >= 7.29.0.Final will fire 0 rules.

This is probably due to the fact that the rewriting implemented in [DROOLS-4632] fails to negate the constraint on the date, as visible in the attached picture of the network.

I am wondering whether there would be an equivalent problem with any constraint on dates (e.g.,  >=, <=, ...)?
",Major,Mario Fusco,,2020-01-10T08:37:10.000-0500,forall pattern with date constraint fail to match,Resolved,bug,Bug
2020-01-13T07:26:29.000-0500,DROOLS-4856,Done,On Jenkins the tests are slower so we need to raise the timeout. If this doesn't help we need to investigate more.,Major,Daniel Rosa,,2019-12-09T03:40:05.000-0500,Raise the timeout for concurrency tests - backport to 7.6,Resolved,bug,Bug
2020-01-13T07:25:49.000-0500,DROOLS-4817,Done,On Jenkins the generated tests are slower so we need to raise the timeout. If this doesn't help we need to investigate more.,Major,Daniel Rosa,,2019-11-27T10:12:27.000-0500,Raise the timeout for generated tests,Resolved,bug,Bug
2020-01-13T07:26:05.000-0500,DROOLS-4835,Done,On Jenkins the generated tests are slower so we need to raise the timeout. If this doesn't help we need to investigate more.,Major,Daniel Rosa,,2019-12-03T10:07:31.000-0500,Raise the timeout for generated tests - backport only this changes to 7.6,Resolved,bug,Bug
2020-01-13T07:26:18.000-0500,DROOLS-4834,Done,On Jenkins the tests are slower so we need to raise the timeout. If this doesn't help we need to investigate more.,Major,Daniel Rosa,,2019-12-03T04:02:00.000-0500,Raise the timeout for concurrency tests ,Resolved,bug,Bug
2020-01-13T08:23:14.000-0500,DROOLS-4833,Cannot Reproduce,"There is an inconsistent behavior of the ""edit"" mode according to the way in invoke it. See the video. Once started by mouse, once by keyboard.",Major,Daniel José dos Santos,,2019-12-02T10:10:37.000-0500,[DMN Designer] Data Types - edit is not consistent,Closed,bug,Bug
2020-01-09T09:22:02.000-0500,DROOLS-4934,Done,None,Major,Yeser Amer,,2020-01-09T09:21:14.000-0500,Multistatement support for MVEL Expressions,Closed,bug,Bug
2020-01-09T05:26:45.000-0500,DROOLS-4555,Done,"Hi,
this is my first issue, so I hope I did everything right. We have been using version 7.21.0.Final of Drools for the last few months. A few weeks ago we switched to the latest version and could not import a few of our decision models (.dmn) anymore. According to our own research the bug seems to be present since 7.22.0.t042 and is still present in the latest snapshot.

This is the relevant logging output: [https://gist.github.com/oas/ec0f70585411d8c3f0266b7d2fd02ebc|https://gist.github.com/oas/ec0f70585411d8c3f0266b7d2fd02ebc]

I tried to narrow down the exception and it seems to be in the method {{checkVariableName}} of {{org.kie.dmn.feel.parser.feel11.FEELParser}}. {{errorChecker.hasErrors()}} is false, but it is not catched by the if statement in line 111. Because of this, {{errorChecker.getErrors()}} returns null instead of a {{List<FEELEvent>}}.

The method {{checkVariableName}} in {{org.kie.dmn.core.compiler.DMNCompilerHelper}}, assumes that a list will be returned and calls {{isEmpty()}}. This throws the {{NullPointerException}}.",Major,Matteo Mortari,,2019-09-20T10:48:34.000-0400,functionDefinition parameter with trailing space causes NPE,Resolved,bug,Bug
2020-01-08T09:31:27.000-0500,DROOLS-4909,Explained,"https://issues.redhat.com/browse/DROOLS-4288

The problem is not fully solved, I got a forever loop on my KB since 7.21.0.Final, I tried with 7.25.0.Final but without success, and the issue is still here with 7.31.0.Final. Will go back to release 7.20.0.Final 
(the only fix I can apply is to add no-loop clause to my rules although it shouldn't be necessary).

I can't share the affected KB, and unfortunately I was unable to reproduce the issue loop on a smaller example 

The affected rule looks like :

{{rule ""reset metric to max score when no more issues are present""
//no-loop // TODO - no-loop TO BE REMOVED AS IT SHOULDN'T BE NECESSARY
when
Something($id:identity, $origin:origin)
not Issue($id == identity, $origin == origin, category!=""metrics"")
$scoring: Scoring(name == ""performance"", $id == identity, $origin == origin)
then
modify($scoring)

{ setValue(100.0); }
end}}


----
from https://issues.redhat.com/browse/DROOLS-4288 :

When there is a version change in drools-compiler from `7.20.0.Final` to `7.21.0.Final` some rules are looping recursively.

*Code in github:*

[The working version|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.20]

[The recursively looping version|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.21]

[The change between working and looping version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21]



*More details*

When I fire a rule whose `then` part modifies a fact that is already checked in the `when` part:

{code:java}
rule ""rule 1.1""
  when
    $sampleDomain: SampleDomain(instanceVariable2 == ""Value of instance variable"")
  then
    System.out.println(""Rule 1.1 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}
it doesn't loop recursively.



But when I call another rule which call a static function from another class:

{code:java}
rule ""rule 1.2""
  when
    $sampleDomain: SampleDomain(CoreUtils.anotherFunction())
  then
    System.out.println(""Rule 1.2 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}

it loops recursively.

The class with static function is

{code:java}
import com.drool_issue.domain.SampleDomain;

public class CoreUtils {
	
	public static boolean anotherFunction() {
		System.out.println(""anotherFunction() inside CoreUtils"");
		return true;
	}
	
	public static boolean anotherFunction(SampleDomain sampleDomain) {
		System.out.println(""anotherFunction(SampleDomain sampleDomain) inside CoreUtils"");
		return true;
	}

}
{code}

My domain file is:

{code:java}
public class SampleDomain {
	private int instanceVariable1;
	private String instanceVariable2;
	private int instanceVariable3;
	
	
	public int getInstanceVariable1() {
		return instanceVariable1;
	}
	public void setInstanceVariable1(int instanceVariable1) {
		this.instanceVariable1 = instanceVariable1;
	}
	public String getInstanceVariable2() {
		return instanceVariable2;
	}
	public void setInstanceVariable2(String instanceVariable2) {
		this.instanceVariable2 = instanceVariable2;
	}
	public int getInstanceVariable3() {
		return instanceVariable3;
	}
	public void setInstanceVariable3(int instanceVariable3) {
		this.instanceVariable3 = instanceVariable3;
	}
	
	

}
{code}

This is only caused after version change from `7.20.0.Final` to `7.21.0.Final`.  Any guess on what the problem might be?


When I further looked into the problem I saw this too.

When we add two functions into the `SampleDomain` class ie

{code:java}
    public boolean anotherFunction() {
		return true;
	}
	
	public boolean anotherFunction(SampleDomain sampleDomain) {
		return true;
	}
{code}

and use this in the rule like:

{code:java}
rule ""rule 1.4""
  when
    $sampleDomain: SampleDomain(anotherFunction())
  then
    System.out.println(""Rule 1.4 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}

and


{code:java}
rule ""rule 1.5""
  when
    $sampleDomain: SampleDomain(anotherFunction($sampleDomain))
  then
    System.out.println(""Rule 1.5 fired"");
    modify($sampleDomain){
    		setInstanceVariable3(4)
    }
end
{code}

these also loops recursively.

*Code in github:*

[The recursive looping when using non static methods|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.20_non_static_methodes]

[The change between working and above version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.20_non_static_methodes]

Also when any of the static method is made non static then method from the domain class is called even though the static method is specified in the rule.

*Code portions to be noted here are:*

[Rule where static method is called.|https://github.com/padippist/DroolsIssueReporting/blob/bde2804b250babf11cf5d3cf48640d9e6c88f5b3/src/main/resources/rules/rule1.drl#L21]

[Another rule which also call the static method.|https://github.com/padippist/DroolsIssueReporting/blob/bde2804b250babf11cf5d3cf48640d9e6c88f5b3/src/main/resources/rules/rule1.drl#L32]

[The static access modifier removed from the functions which where previously static.|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21_weird_behaviors#diff-4e0f238b1184e2267cb5663b9afeaa6fL7]

*Code in github:*

[Weird behaviour when removing static modifier for the functions.|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.21_weird_behaviors]

[The change between working and above version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21_weird_behaviors]


*All this are caused in versions after `7.20.0.Final`, ie `7.21.0.Final`, `7.22.0.Final` and `7.23.0.Final`*",Major,Mario Fusco,,2020-01-08T04:17:57.000-0500,Infinite recursion in drools after version change from v7.20 to v7.21,Resolved,bug,Bug
2020-01-09T07:49:59.000-0500,DROOLS-4876,Done,"If you use the Column creator and add an alias for any other column type than String, the aliases do not show up.",Major,Toni Rikkola,,2019-12-17T11:33:38.000-0500,GDST: Aliases only work for Strings,Resolved,bug,Bug
2020-01-09T07:15:41.000-0500,DROOLS-4641,Done,"As per title. Following the Traffic Violation tutorial. Closing the DMN editor. the Zoom bar persist on screen as per screenshot.
 !image-2019-10-11-11-16-50-339.png|thumbnail! 
Not sure this is the correct JIRA component, please move this JIRA as necessary",Major,Michael Anstis,,2019-10-11T05:17:10.000-0400,Running the Traffic Violation tutorial closing DMN editor Zoom toolbar persisted,Resolved,bug,Bug
2020-01-08T04:45:49.000-0500,DROOLS-4847,Done,"Data types entries are unexpectedly expanded when user click edit button of structures in a row. See the attached video.

The issue was found during DROOLS-4795 review, however probably it is not related.",Major,Daniel José dos Santos,,2019-12-06T01:57:33.000-0500,[DMN Designer] Entries are expanded when user edit structures in a  row,Resolved,bug,Bug
2020-01-07T15:00:57.000-0500,DROOLS-4807,Done,"The V&V results are grouped by UUID. See attached screen-shot.

These items are reported individually by {{kie-dmn-validation}} but grouped by {{org.kie.workbench.common.dmn.showcase.backend.validation.ValidationServiceImpl}} in the _standalone_ webapp however I fear Stunner's generic {{ValidationService}} does the same in Business Central and hence reporting DMN V&V per-line may be more troublesum.

See [here|https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-dmn/kie-wb-common-dmn-webapp-standalone/src/main/java/org/kie/workbench/common/dmn/showcase/backend/validation/ValidationServiceImpl.java#L56] that should more correctly be:-
{code}
    @Override
    public Collection<DiagramElementViolation<RuleViolation>> validate(Diagram diagram) {
        return domainViolations(diagram).stream()
                .filter(v -> Objects.nonNull(v.getUUID()))
                .filter(v -> !""null"".equals(v.getUUID()))
                .map(v -> new ElementViolationImpl.Builder().setUuid(v.getUUID()).setDomainViolations(Collections.singletonList(v)).build())
                .collect(Collectors.toList());
    }
{code}

h3. Acceptance criteria
- Create a DMN file
- Add a Decision node with no content
- Validate it
- Each validation message should be a separate item in the Alert panel",Major,Michael Anstis,,2019-11-26T09:55:29.000-0500,[DMN Designer] Do not group V&V messages by UUID,Resolved,bug,Bug
2020-01-07T15:01:53.000-0500,DROOLS-3048,Done,"A {{Popover}} used to edit a cell or column header (or any other DOM-based editor for that matter) disappears following a change in the widget that causes a {{Layer.draw()}} if the grid is sufficiently wide that there is a column not visible on screen.

All cells/columns that use {{CellEditorControls}} (containing, for example, the {{Popover}}) share a single instance from {{CellEditorControl}} and hence although the User makes a change in a visible column the invisible column (scrolled off screen) has its DOM resources destroyed that is the same instance as that for the visible column.

See https://github.com/kiegroup/appformer/blob/master/uberfire-extensions/uberfire-wires/uberfire-wires-core/uberfire-wires-core-grids/src/main/java/org/uberfire/ext/wires/core/grids/client/widget/grid/impl/BaseGridWidget.java#L341. If a column is not in the _body_ or _floating_ columns collection its DOM resources are destroyed.

I probably need to ensure different instances of {{CellEditorControl}} are created for each column/cell where we currently share the same instance. Also check for destruction of DOM elements in {{Document}} when grids/columns etc are destroyed.

h3. Acceptance criteria
# Create a DMN model
# Add a Decision
# Set its expression to a Decision Table
# Add multiple Input and Output columns so that the table is wider than the visible screen space (i.e. some columns are not rendered)
# Click on the header of a visible column
# The Name/Data-type popup should appear
# Repeat for expression type of Relation",Major,Michael Anstis,,2018-09-27T09:57:37.000-0400,[DMN Designer] CellEditorControl needs to issue a new instance per use,Resolved,bug,Bug
2020-01-07T13:24:22.000-0500,DROOLS-4056,Done,"Keyboard shortcut works only when arrow keys are used to focus on the DMN type element. If the user start editing a field with mouse and type ""CTRL-S"" to save it, the shortcut does not work. 
Note: Team invested CTRL-S, but there was some potential conflict with built in browser controls. ",Major,Daniel José dos Santos,,2019-05-20T12:04:07.000-0400,DMN Editor: Keyboard shortcut functionality on mouse initiated focus.,Closed,bug,Bug
2020-01-07T13:23:56.000-0500,DROOLS-3761,Done,"The attached video shows the user interaction with enumeration constraint component. We can see if user fill valid values and clicks somewhere outside of the entry in edit mode, the values are lost. The only way how to save values is to click the *check* button. User should not lost filled in values if he clicks outside of input fields.

Please compare the same behavior with data types list view component. It means  [^focus_lost.webm] vs  [^lost_focus_data_types.webm] .",Minor,Daniel José dos Santos,,2019-03-12T05:14:55.000-0400,[DMN Designer] Data Types - Constraints - Enumeration constraint entry on edit mode - Fix buttons behavior,Closed,bug,Bug
2020-01-07T13:24:37.000-0500,DROOLS-4713,Done,"This issue is caused by DROOLS-4484
After intensive usage of Drag and Drop feature, the data types was completely lost for all DMN diagrams.",Critical,Guilherme Gomes,,2019-10-31T04:04:07.000-0400,[DMN Designer] Data Types Page is lost,Closed,bug,Bug
2020-01-07T11:46:56.000-0500,DROOLS-4903,Done,"It appears that the KieBuilder fails to compile the following pattern:

{noformat}
    Pojo(!(x in (1,2,3)))
{noformat}

returning the following error:

{noformat}
    Error Messages:
    Message [id=1, kieBase=defaultKieBase, level=ERROR, path=rules.drl, line=4, column=0
       text=Unable to Analyse Expression !(x in (1,2,3)):
    [Error: unexpected token: ,2]
    [Near : {... !(x in (1,2,3)) ....}]
{noformat}

Furthermore, as of Drools 7.29.0.Final, the following form will also fail to compile:

{noformat}
    forall(Pojo(y==42, x in (1,2,3)))
{noformat}

with the following error:

{noformat}
    Error Messages:
    Message [id=1, kieBase=defaultKieBase, level=ERROR, path=rules.drl, line=4, column=0
       text=Unable to Analyse Expression !(y==42) || !(x in (1,2,3)):
    [Error: unexpected token: ,2]
    [Near : {... !(y==42) || !(x in (1,2,3)) ....}]
{noformat}

The latter is likely a consequence of the negation introduced by [DROOLS-4632], [DROOLS-4633]
",Major,Mario Fusco,,2020-01-06T12:01:01.000-0500,In constraints fail to compile if negated or inside a forall pattern,Resolved,bug,Bug
2020-01-07T06:57:20.000-0500,DROOLS-4752,Done,"This bug was created by this comment: https://github.com/kiegroup/kie-wb-common/pull/3000#issuecomment-553442743

{quote}*Reported by Jozef:*
Once completions are shown, then pressing Escape hides them however cancel also edit mode of the cell, I am not sure what customers will think about this.
{quote}
Check with UX the expected behaviour, and implement the expected behaviour for the Escape key in the described case


The severity of the issue is higher if we follow this steps:
- Put some value into cell, confirm it == finish edit mode
- Edit the same cell, type new expression
- Very probably autocompletions will be shown
- However imagine you do not want to use any hint, so you press *Escape*
- Now the completions are hidden, however also edit mode was canceled and typed value was not stored",Major,Guilherme Gomes,,2019-11-13T10:35:01.000-0500,[DMN Designer] Code Completion - When users press Escape on suggestions the edit mode is closed,Resolved,bug,Bug
2020-01-07T06:00:58.000-0500,DROOLS-4846,Done,"There is scenario causing user is not able to save the DMN file anymore. If is editing some multilevel structure field, but he decides in the middle of editing to remove whole top level structure, the save button of the designer remains disabled. See the attached video.

We should either fix this scenario or drop the *disable save button* feature.",Minor,Daniel José dos Santos,,2019-12-06T01:54:01.000-0500,[DMN Designer] User is unable to save model when multilevel structure is removed,Resolved,bug,Bug
2020-01-07T03:21:08.000-0500,DROOLS-4902,Done,"When I study drools , I write a rule use divide operator

{code:java}
rule ""Buzz"" salience 2
 when
  $n: Number( this / 5 == 3 )
 then
  System.out.println(""Buzz"");
end
{code}
It's OK.

But:

{code:java}
rule ""Buzz"" salience 2
 when
  $n: Number( this % 5 == 0 )
 then
  System.out.println(""Buzz"");
end
{code}

Report parser error: Unable to Analyse Expression this % 5 == 0:

The drools document mentioned the same example:

Person( age > 100 && ( age % 10 == 0 ) )
% is Multiplicative operators, why parser error?


",Major,Mario Fusco,,2020-01-06T03:23:45.000-0500,Can not use mod operators (%) in when clause.,Resolved,bug,Bug
2020-01-06T08:52:58.000-0500,DROOLS-4871,Done,"This issue was found during RHPAM-2323 review. It is slightly different however related.

The issue can be spotted on multiple places:
- Guided Rule
- Guided Rule Template
- Guided Decision Table - BRL condition fragment


If user wants to define constraint with operator *is contained in ([list of values])* then there is issue if the *[list of values]* is complex -  it contains additional quotes or brackets. 

h2. Reproducer Test
https://github.com/kiegroup/drools/pull/2588",Major,Toni Rikkola,,2019-12-13T08:29:13.000-0500,Complex value list doesn't work in guided rule editor,Resolved,bug,Bug
2020-01-03T11:39:19.000-0500,DROOLS-3531,Out of Date,"drools-template example changes packaging tag with kjar in pom.xml, adding maven-compiler-plugin. When executes maven install command(-X install), outputs following exception:

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  24.247 s
[INFO] Finished at: 2019-01-18T17:28:50+08:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.16.0.Final:build (default-build) on project drools-rule-mer: Execution default-build of goal org.kie:kie-maven-plugin:7.16.0.Final:build failed.: NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.kie:kie-maven-plugin:7.16.0.Final:build (default-build) on project drools-rule-mer: Execution default-build of goal org.kie:kie-maven-plugin:7.16.0.Final:build failed.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-build of goal org.kie:kie-maven-plugin:7.16.0.Final:build failed.
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)
Caused by: java.lang.NullPointerException
    at org.drools.decisiontable.parser.DefaultRuleSheetListener.flushRule (DefaultRuleSheetListener.java:304)
    at org.drools.decisiontable.parser.DefaultRuleSheetListener.finishSheet (DefaultRuleSheetListener.java:284)
    at org.drools.decisiontable.parser.xls.ExcelParser.finishSheet (ExcelParser.java:285)
    at org.drools.decisiontable.parser.xls.ExcelParser.processSheet (ExcelParser.java:220)
    at org.drools.decisiontable.parser.xls.ExcelParser.parseWorkbook (ExcelParser.java:111)
    at org.drools.decisiontable.parser.xls.ExcelParser.parseFile (ExcelParser.java:85)
    at org.drools.decisiontable.SpreadsheetCompiler.parseResource (SpreadsheetCompiler.java:126)
    at org.drools.decisiontable.SpreadsheetCompiler.compile (SpreadsheetCompiler.java:110)
    at org.drools.decisiontable.SpreadsheetCompiler.compile (SpreadsheetCompiler.java:83)
    at org.drools.decisiontable.DecisionTableProviderImpl.compileResource (DecisionTableProviderImpl.java:78)
    at org.drools.decisiontable.DecisionTableProviderImpl.loadFromResource (DecisionTableProviderImpl.java:44)
    at org.drools.compiler.compiler.DecisionTableFactory.loadFromResource (DecisionTableFactory.java:36)
    at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.decisionTableToPackageDescr (KnowledgeBuilderImpl.java:399)
    at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl$ResourceToPkgDescrMapper.lambda$static$4 (CompositeKnowledgeBuilderImpl.java:327)
    at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildResource (CompositeKnowledgeBuilderImpl.java:199)
    at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackageDescr (CompositeKnowledgeBuilderImpl.java:186)
    at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build (CompositeKnowledgeBuilderImpl.java:108)
    at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build (CompositeKnowledgeBuilderImpl.java:100)
    at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages (AbstractKieProject.java:251)
    at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify (AbstractKieProject.java:74)
    at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject (KieBuilderImpl.java:267)
    at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll (KieBuilderImpl.java:235)
    at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll (KieBuilderImpl.java:184)
    at org.drools.compiler.kie.builder.impl.KieBuilderImpl.getKieModule (KieBuilderImpl.java:438)
    at org.drools.compiler.kie.builder.impl.KieBuilderImpl.getKieModule (KieBuilderImpl.java:428)
    at org.kie.maven.plugin.BuildMojo.buildDrl (BuildMojo.java:169)
    at org.kie.maven.plugin.BuildMojo.execute (BuildMojo.java:118)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:956)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:498)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)

",Major,Mario Fusco,,2019-01-18T04:51:30.000-0500,template example nullpointexception when execute maven install command in kjar project,Resolved,bug,Bug
2020-01-03T02:47:00.000-0500,DROOLS-4888,Done,"I'm trying to run drools 7.30.0.Final with Spring Boot 2.2.2.RELEASE.I configured drools as the documentation says. My drools-config.xml configuration file is where I keep the drools beans and looks like this:

{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<beans xmlns=""http://www.springframework.org/schema/beans""
       xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
       xmlns:kie=""http://drools.org/schema/kie-spring""
       xsi:schemaLocation=""http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd http://drools.org/schema/kie-spring http://drools.org/schema/kie-spring.xsd"">
    <kie:kmodule id=""sample_module"">
        <kie:kbase name=""testRules"" packages=""rules"" declarativeAgenda=""true"">
            <kie:ksession name=""ksession1"" type=""stateless""/>
            <kie:ksession name=""ksession2"" scope=""prototype"">
                <kie:ruleRuntimeEventListener ref=""mockRuleRuntimeEventListener"" />
                <kie:consoleLogger />
            </kie:ksession>
        </kie:kbase>
    </kie:kmodule>

    <!-- https://docs.jboss.org/drools/release/7.30.0.Final/drools-docs/html_single/index.html#_important_note -->
    <!-- <bean id=""kiePostProcessor"" class=""org.kie.spring.KModuleBeanFactoryPostProcessor""/> -->
    <bean class=""org.kie.spring.annotations.KModuleAnnotationPostProcessor""/>
</beans>
{code}

occur a warn looks: 

2019-12-19 14:44:25.231  WARN 9916 --- [           main] o.d.c.kie.builder.impl.KieProject        : No files found for KieBase testRules

when i try debug org.kie.spring.KModuleBeanFactoryPostProcessor. Trace to ZipKieModule at line 133. cannot uncompress,get variable urlPath value is ""/BOOT-INF/classes"" jarFile values is ""\Users\user\Desktop\springdrools\target\spring-drools-1.0.jar!\BOOT-INF\classes"". lead to cannot load resource.
",Major,Mario Fusco,,2019-12-19T02:08:15.000-0500,spring boot and drools integration occur path error and cannot load rule,Resolved,bug,Bug
2020-01-02T11:01:54.000-0500,DROOLS-4892,Done,"The constraint like  the following does not match when using executable model.

{noformat}
rule ""Double nnn""
    when
        f : Fact( doubleVal in ( 100, 200, 300 ) )
    then
       ...
end
{noformat}

This rule can fire if executable model is not used.",Major,Mario Fusco,,2019-12-23T04:21:51.000-0500, in evaluators for type Double does not work with executable model,Resolved,bug,Bug
2020-01-03T09:28:45.000-0500,DROOLS-4884,Done,"When a variable is reassigned in a consequence (not a good practice in general) the property reactivity for the correspondent fact should be ignored. In other word the following test should succeed.

{code}
    @Test
    public void testReassignment() {
        final String str1 =
                ""package com.example\n"" +
                ""\n"" +
                ""declare Counter\n"" +
                ""    value1: int\n"" +
                ""    value2: int\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule \""Init\"" when\n"" +
                ""    not Counter()\n"" +
                ""then\n"" +
                ""    drools.insert(new Counter(0, 0));\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule \""Loop\""\n"" +
                ""when\n"" +
                ""    $c: Counter( value1 == 0 )\n"" +
                ""then\n"" +
                ""    $c = new Counter(0, 0);\n"" +
                ""    $c.setValue2(1);\n"" +
                ""    update($c);\n"" +
                ""end\n\n"";

        final KieSession ksession = new KieHelper().addContent( str1, ResourceType.DRL )
                .build()
                .newKieSession();

        assertEquals( 5, ksession.fireAllRules(5) );
    }
{code}",Major,Mario Fusco,,2019-12-18T09:18:52.000-0500,When a variable is reassigned in a consequence the property reactivity for the correspondent fact should be ignored,Resolved,bug,Bug
2020-01-03T11:15:34.000-0500,DROOLS-4386,Explained,"In JDK 1.7 we were using Drools 5.3.0.Final version and we are migrating to jdk 1.8 so drools 5.3.0.Final was not supported in which we were using Package Builder.
We migrated JDK 1.8 with drools  6.5.0.Final which uses Kie API to implement rules

Below is the decision table I am using:

Customer Rule:

                      Condition             Condition          Action
                  ---------------------------------------------------
Rule NO.          Type                     Years              Discount
                  ---------------------------------------------------
1                    ""Individual""                   5                    15
2                    ""Individual""                   3                    10
3                    ""Individual""                                         20

if I insert customer object  as ""Type"" = Individual and ""Years"" = 5
after fireAllRules
It fires two rules i.e Rule no. 1 and 3 and gives the 3rd Rule number as result instead of Rule number 1, inturn gives Discount as 20 instead of 15 which is wrong result.
if I insert customer object  as ""Type"" = Individual and ""Years"" = 3
after fireAllRules
It fires two rules i.e Rule no. 2 and 3 and gives the 3rd rule number as result instead of Rule number 2, inturn gives Discount as 20 instead of 10 which is wrong result.

Exact rule match is not happening and providing wrong results.

Could you please give the solution for this it is breaking so many rules in the application. 
",Major,Mario Fusco,,2019-08-01T05:29:15.000-0400,Wrong matched rules set were fired when one of the condition having empty cell in drools 6.5.0 using Jdk 1.8,Resolved,bug,Bug
2020-01-02T05:31:18.000-0500,DROOLS-4898,Done,"The following rules does not work with specific facts.

{noformat}
rule ""rule1_long""
    when
        accumulate( Fact( $longVal: longVal), $minVal : min($longVal))
        accumulate( Fact( $longVal2: longVal, $longVal2 > $minVal), $minVal2 : min($longVal2))

        $minFact: Fact( longVal == $minVal)
        $minFact2: Fact( longVal == $minVal2)

    then
		System.out.println(""Rule [""+kcontext.getRule().getName()+ ""] fires!"");        
		Long $diff = (Long)$minVal2 - (Long)$minVal;
		$minFact2.setDiff($diff);
//		update($minFact2);
 		String errmsg = $diff == 0?  "" !!!!! ERROR !!!!!"" : """";
		System.out.println( drools.getRule().getName() + "" diff："" + $minFact2.getLongVal()  + "" - "" + $minFact.getLongVal() + "" = "" + $diff + errmsg);
		System.out.println(""\tretract <= ""+$minFact );
		retract($minFact);			

end
{noformat}

There seems to be 2 kind of issues (root cause might be same though).
- 2nd accumulate return same min value with 1st one. 
- rule fire count is less than expected.

This does not work with specific set of facts, but works with another set of facts.
If update is called for the fact like above commented out line, this does not happen.



",Major,Mario Fusco,,2019-12-26T01:20:00.000-0500,Accumulates: min does not work after retracting fact.,Resolved,bug,Bug
2020-01-02T05:27:10.000-0500,DROOLS-4896,Done,"Regarding accumulate, min function with BigDecimal does not work as expected when drools.propertySpecific is ""ALLOWED"".

The following rule worked with BRMS6.1.4(6.2.0.Final-redhat-13).

{noformat}
rule ""rule1_BigDecimal""
    agenda-group ""BigDecimal""
    when  
        accumulate( Fact( $bdVal: bdVal), $minVal : min($bdVal))
        accumulate( Fact( $bdVal2: bdVal, $bdVal2 > $minVal), $minVal2 : min($bdVal2))
     
        $minFact: Fact( bdVal == new BigDecimal($minVal.intValue()))
        $minFact2: Fact( bdVal == new BigDecimal($minVal2.intValue()))
    then
    ...
 end
{noformat}

But after upgrading to RHPAM 7 and setting drools.propertySpecific=ALLOWED, this does not work.
i.e. rule  fires one more time than expected even though there is only one fact at the last iteration. 

This does not happen at least with Long type.",Major,Mario Fusco,,2019-12-26T00:42:33.000-0500,Accumulate: min with BigDecimal doesn't work as expected when drools.propertySpecific=ALLOWED,Resolved,bug,Bug
2019-12-23T05:06:16.000-0500,DROOLS-4829,Done,"When a rule has ""not"" in the middle of LHS patterns, the rule is not fired after disposing a ksession from KieSessionsPool (= ksession.reset()).

This is a slightly different scenario from DROOLS-3228.
",Major,Toshiya Kobayashi,,2019-12-02T01:51:55.000-0500,Rule with NotNode in the middle is not fired after ksession.reset(),Resolved,bug,Bug
2019-12-20T09:46:04.000-0500,DROOLS-4886,Done,"When using rules evaluating nested facts, the rule which is supposed to match against the updated (nested) declared type is not fired after an incremental update. The same rule is fired if the KieBase is built from scratch and not updated. See linked PR for a test case.",Major,Mario Fusco,,2019-12-19T00:57:22.000-0500,Rule not fired when modifying a Nested declared type during an incremental update,Resolved,bug,Bug
2019-12-19T07:53:04.000-0500,DROOLS-4340,Done,"Use the expression editor and check for example person.name.contains(""ABC"").
Save, close the editor and reopen. ""contains(""ABC"")"" does not show up in the editor.",Critical,Toni Rikkola,,2019-07-18T05:26:56.000-0400,Contains can not be used for String with the Expression editor,Resolved,bug,Bug
2019-12-18T11:23:45.000-0500,DROOLS-2474,Duplicate Issue,"There is no Karaf feature for new Kie Camel component [1] in kie-karaf-features xml [2].

[1] https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-camel
[2] https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-osgi/kie-karaf-features",Major,Mario Fusco,,2018-04-13T10:12:17.000-0400,Missing Karaf feature for new Kie Camel component,Resolved,bug,Bug
2019-12-18T09:42:38.000-0500,DROOLS-3583,Done,"This rule file makes the engine stuck in an infinite loop.
{code:drools}
package com.example

declare Counter
    value: int
end

rule ""Init"" when
    not Counter()
then
    drools.insert(new Counter(0));
end

rule ""Loop""
when
    c: Counter()
then
// removing this comment line removes the loop
    c.setValue(1);
    update(c);
end
{code}
But the loop is not an issue.
The issue is that if the commented line is removed the loop is gone.
This code doesn't cause the loop.
{code:drools}
package com.example

declare Counter
    value: int
end

rule ""Init"" when
    not Counter()
then
    drools.insert(new Counter(0));
end

rule ""Loop""
when
    c: Counter()
then
    c.setValue(1);
    update(c);
end
{code}
Java code used to run the engine.
{code:java}
public class DroolsLoopingTest {
    public static class LoopError extends RuntimeException {
    }

    public static void main(String[] args) {
        System.setProperty(""drools.dump.dir"", ""."");

        final KieServices ks = KieServices.Factory.get();
        final KieRepository kr = ks.getRepository();
        final KieFileSystem kfs = ks.newKieFileSystem();

        kfs.write(""src/main/resources/loop.drl"", new ClassPathResource(""loop.drl""));

        final KieBuilder kb = ks.newKieBuilder(kfs);
        kb.buildAll();
        if (kb.getResults().hasMessages(Message.Level.ERROR))
            throw new RuntimeException(kb.getResults().toString());

        final KieContainer kContainer = ks.newKieContainer(kr.getDefaultReleaseId());
        KieSession kSession = kContainer.newKieSession();

        kSession.addEventListener(new DefaultAgendaEventListener() {
            private int i = 0;

            @Override
            public void afterMatchFired(AfterMatchFiredEvent event) {
                System.out.println(event);
                if (++i > 10) throw new LoopError();
            }
        });

        try {
            kSession.fireAllRules();
            throw new RuntimeException(""Expected loop error"");
        } catch (LoopError e) {
            System.out.println(""Loop detected"");
        }
    }
}
{code}
I noticed a difference in generated code.
The rule file with the comment line generates this code
{code:java}
public static void defaultConsequence(KnowledgeHelper drools,  com.example.Counter c, org.kie.api.runtime.rule.FactHandle c__Handle__   ) throws java.lang.Exception { org.kie.api.runtime.rule.RuleContext kcontext = drools;
    // removing this comment line removes the loop
    c.setValue(1);
    { drools.update( c__Handle__, org.drools.core.util.bitmask.AllSetButLastBitMask.get(), com.example.Counter.class ); };
}
{code}
While the rule file without the comment line generates this code
{code:java}
public static void defaultConsequence(KnowledgeHelper drools,  com.example.Counter c, org.kie.api.runtime.rule.FactHandle c__Handle__   ) throws java.lang.Exception { org.kie.api.runtime.rule.RuleContext kcontext = drools;
    c.setValue(1);
    { drools.update( c__Handle__, new org.drools.core.util.bitmask.LongBitMask(2L), com.example.Counter.class ); };
}
{code}

Expected result is that comments should not affect engine behavior.",Minor,Mario Fusco,,2019-01-30T07:57:51.000-0500,A comment creates an infinite loop,Resolved,bug,Bug
2019-12-18T10:53:29.000-0500,DROOLS-4662,Cannot Reproduce,"When a resource is added using {{KieHelper.addResource}}, any specified encoding is ignored when it is added to the {{MemoryFileSystem}} by {{KieFileSystemImpl.write(Resource)}} (effectively assuming the {{InputStream}} is already encoded in UTF-8).

Additionally, when the resource is read again by {{AbstractKieModule.getResource}}, it constructs a {{Resource}} object with no encoding specified, whereas it should probably specify an encoding of UTF-8, since it seems that sources are considered to be UTF-8 already at least in the case of the {{MemoryKieModule}}.

I've attached a fairly minimal test case where the rules bytes are passed in UTF-8 with the encoding explicitly specified. This currently produces an error when the default file encoding is not UTF-8 (eg, by passing {{-Dfile.encoding=latin1}} as a JVM argument, or by using the default arguments on Windows).",Major,Mario Fusco,,2019-10-20T22:48:24.000-0400,Resources added through KieHelper get interpreted using the default character set,Resolved,bug,Bug
2019-12-16T13:00:21.000-0500,DROOLS-3707,Cannot Reproduce,"drools 7.70 Final throws below exception when KieModule is created with below configuration , with 6,00,000 fact objects:
kieHelper.build(
            SequentialAgendaOption.DYNAMIC,
            SequentialOption.YES,
            MultithreadEvaluationOption.YES,
            MaxThreadsOption.get(20)));

java.lang.NullPointerException: null
        at org.drools.core.phreak.PhreakFromNode.doLeftUpdates(PhreakFromNode.java:199) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.PhreakFromNode.doNode(PhreakFromNode.java:64) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:393) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.doRiaNode(RuleNetworkEvaluator.java:620) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:547) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:379) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:175) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:133) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1066) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1013) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1005) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305) ~[drools-core-7.17.0.Final.jar!/:7.17.0.Final]
",Blocker,Mario Fusco,,2019-02-26T06:18:07.000-0500,exception thrown in drools 7.7.0 Final,Resolved,bug,Bug
2019-12-16T12:41:01.000-0500,DROOLS-4786,Done,"NullPointer occures when using drools with java 11.

The eclipse DRL editor logs warning in 'Debug' perspective since an attempt to install breakpoint support for java 11 natured projects fails. As the integrated ASM libs support up to java 12, it seems like a false positive.

{{java.lang.RuntimeException: value '11' is not a valid language level
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.setJavaLanguageLevel(JavaDialectConfiguration.java:102)
	at org.drools.eclipse.DroolsEclipsePlugin.generateParsedResource(DroolsEclipsePlugin.java:618)
	at org.drools.eclipse.DroolsEclipsePlugin.generateParsedResource(DroolsEclipsePlugin.java:587)
	at org.drools.eclipse.DroolsEclipsePlugin.parseResource(DroolsEclipsePlugin.java:492)
	at org.drools.eclipse.editors.DroolsLineBreakpointAdapter.canToggleLineBreakpoints(DroolsLineBreakpointAdapter.java:44)
	at org.eclipse.debug.internal.ui.actions.breakpoints.RetargetToggleBreakpointAction.canPerformAction(RetargetToggleBreakpointAction.java:46)
	at org.eclipse.debug.internal.ui.actions.RetargetAction.isTargetEnabled(RetargetAction.java:223)
	at org.eclipse.debug.internal.ui.actions.RetargetAction.partActivated(RetargetAction.java:162)
	at org.eclipse.debug.internal.ui.actions.RetargetAction.init(RetargetAction.java:94)
	at org.eclipse.debug.internal.ui.actions.breakpoints.RetargetBreakpointAction.init(RetargetBreakpointAction.java:56)
	at org.eclipse.ui.internal.WWinPluginAction.initDelegate(WWinPluginAction.java:175)
	at org.eclipse.ui.internal.PluginAction.createDelegate(PluginAction.java:121)
	at org.eclipse.ui.internal.PluginAction.selectionChanged(PluginAction.java:255)
	at org.eclipse.ui.internal.WWinPluginAction.refreshSelection(WWinPluginAction.java:263)
	at org.eclipse.ui.internal.WWinPluginAction.<init>(WWinPluginAction.java:111)
	at org.eclipse.ui.internal.ActionDescriptor.createAction(ActionDescriptor.java:259)
	at org.eclipse.ui.internal.ActionDescriptor.<init>(ActionDescriptor.java:177)
	at org.eclipse.ui.internal.PluginActionSetBuilder.createActionDescriptor(PluginActionSetBuilder.java:130)
	at org.eclipse.ui.internal.PluginActionBuilder.readElement(PluginActionBuilder.java:160)
	at org.eclipse.ui.internal.registry.RegistryReader.readElements(RegistryReader.java:123)
	at org.eclipse.ui.internal.registry.RegistryReader.readElementChildren(RegistryReader.java:112)
	at org.eclipse.ui.internal.PluginActionBuilder.readElement(PluginActionBuilder.java:143)
	at org.eclipse.ui.internal.registry.RegistryReader.readElements(RegistryReader.java:123)
	at org.eclipse.ui.internal.PluginActionSetBuilder.readActionExtensions(PluginActionSetBuilder.java:248)
	at org.eclipse.ui.internal.PluginActionSetBuilder.processActionSets(PluginActionSetBuilder.java:215)
	at org.eclipse.ui.internal.ActionPresentation.setActionSets(ActionPresentation.java:190)
	at org.eclipse.ui.internal.WorkbenchWindow.updateActionSets(WorkbenchWindow.java:2586)
	at org.eclipse.ui.internal.WorkbenchPage.lambda$3(WorkbenchPage.java:2978)
	at org.eclipse.e4.ui.services.internal.events.UIEventHandler.lambda$0(UIEventHandler.java:38)
	at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:236)
	at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:146)
	at org.eclipse.swt.widgets.Display.syncExec_aroundBody16(Display.java:5728)
}}

*Another Exception is thrown when switching from DRL edit to 'RETE TREE' tab.*
{{java.lang.Exception: Unable to parse rules to show RETE view! 2 parser errors
	at org.drools.eclipse.editors.rete.ReteViewer.loadReteModel(ReteViewer.java:161)
	at org.drools.eclipse.editors.DRLRuleEditor2$3.run(DRLRuleEditor2.java:240)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:122)
java.lang.RuntimeException: unknown version 11
	at org.drools.compiler.commons.jci.compilers.EclipseJavaCompilerSettings.toNativeVersion(EclipseJavaCompilerSettings.java:101)
	at org.drools.compiler.commons.jci.compilers.EclipseJavaCompilerSettings.toNativeSettings(EclipseJavaCompilerSettings.java:112)
	at org.drools.compiler.commons.jci.compilers.EclipseJavaCompilerSettings.<init>(EclipseJavaCompilerSettings.java:73)
	at org.drools.compiler.commons.jci.compilers.EclipseJavaCompiler.compile(EclipseJavaCompiler.java:383)
	at org.drools.compiler.commons.jci.compilers.AbstractJavaCompiler.compile(AbstractJavaCompiler.java:49)
	at org.drools.compiler.rule.builder.dialect.java.JavaDialect.compileAll(JavaDialect.java:420)
	at org.drools.compiler.compiler.DialectCompiletimeRegistry.compileAll(DialectCompiletimeRegistry.java:61)
	at org.drools.compiler.compiler.PackageRegistry.compileAll(PackageRegistry.java:84)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAll(KnowledgeBuilderImpl.java:1442)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.wireAllRules(KnowledgeBuilderImpl.java:925)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:913)
	at org.drools.eclipse.DroolsEclipsePlugin.generateParsedResource(DroolsEclipsePlugin.java:663)
	at org.drools.eclipse.DroolsEclipsePlugin.parseResource(DroolsEclipsePlugin.java:518)
	at org.drools.eclipse.editors.rete.ReteViewer.loadReteModel(ReteViewer.java:141)
	at org.drools.eclipse.editors.DRLRuleEditor2$3.run(DRLRuleEditor2.java:240)
	at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:122)

}}",Major,Mario Fusco,,2019-11-19T08:38:40.000-0500,Support Java 11 projects,Resolved,bug,Bug
2019-12-16T12:33:26.000-0500,DROOLS-2148,Cannot Reproduce,"Hi all,

I have created a simplest rule project in KIE workbench 7.2, After build and deploy i am able to download the jar for my project from the artifact repository. now i want to execute the rules from a java maven project. I have put the jar in the resources folder of the maven project, scanning the jar and trying to load all the rule artifacts in the kie base. but i am not able to execute the rules inside the drl file which is inside the jar file. I have attached the drl file, jar structure, eclipse project structure and debug in eclipse. please help, pls update if any further details required.
Thanks 
Vardhaman ",Major,Mario Fusco,,2017-11-23T02:24:19.000-0500,not able to execute a drl file when packaged inside a jar file,Resolved,bug,Bug
2019-12-16T12:59:05.000-0500,DROOLS-3734,Cannot Reproduce,"If using the executable model (building with -DgenerateModel=YES) compilation errors occur for types defined in Java being used in DRL of the same maven model.

When attempting to import a Java class defined under the same pom.xml module as the current rules file 'CompilationProblemErrorResult: cannot find symbol' errors are observed. Even when the import is not needed (Java type defined in same package as DRL rules), if the type is used in a type declaration the 'cannot find symbol' error is still observed.

Errors are of the form:
{code}
[ERROR] Unable to build KieBaseModel:all
CompilationProblemErrorResult: cannot find symbol
  symbol:   class MyFact
  location: package olijohns
CompilationProblemErrorResult: cannot find symbol
  symbol: class MyFact
{code}",Major,Mario Fusco,,2019-03-06T06:49:05.000-0500,Executable model: Imports not evaluated correctly for fact declarations,Resolved,bug,Bug
2019-12-16T13:03:45.000-0500,DROOLS-3597,Cannot Reproduce,"Please create huge knowledge base (4GB) where the tomcat memory is 8GB and try to refresh the engine multiple time every 3hr 

You will see the drools will stop responding sporadically 

it will be nice if you can help and do some memory manage ",Critical,Mario Fusco,,2019-02-04T05:27:10.000-0500,Drools Refresh KB gives error,Resolved,bug,Bug
2019-12-16T12:52:46.000-0500,DROOLS-4300,Out of Date,"In order to install KIE in Fuse,
one needs to run:

features:install kie

This requires adding a URL first:
features:addurl mvn:org.kie/kie-karaf-features/7.11.0.Final/xml/features

This however adds: 
mvn:org.apache.camel.karaf/apache-camel/RELEASE/xml/features
and
mvn:org.apache.cxf.karaf/apache-cxf/3.2.7.fuse-sb2-740011/xml/features

to my feature:repo-list

These are Red Hat Fuse 7.4 features, because the maven special word, RELEASE, grabs the latest versions available.  I'm using Fuse 7.3 though, and it crashes a bunch of our applications, and spews errors.

For example, it automatically tries to update all of the installed features to use the latest, and then gets into a loop of 
""Error resolving artifact org.apache.cxf.xjc-utils:cxf-xjc-runtime:jar:3.2.4.fuse-740013"" for whatever reason.


How does one work around this?  What is a safe way to use KIE in Fuse?",Major,Mario Fusco,,2019-07-08T08:13:52.000-0400,Karaf KIE features contains special maven keywords RELEASE,Resolved,bug,Bug
2019-12-16T13:03:15.000-0500,DROOLS-3611,Explained,"We have two rules each modifying separate properties but.
 

As long as we are using PropertyReactive with builtin operators like contains, matches the updates are restricted. There is no infinite recursion.

We have created a custom operator that checks the value in the when condition eg: when DClass( collectionSet matchesInSet ""value"")
       then modify $c( setDataPoint( ""s"" );

This usage of custom operator is making rule execution go in infinite loop. Enabling drools trace we see: Fired rule Rule 1 Fired rule Rule 2 Fired rule Rule 1 Fired rule Rule 2..... infinitely.

As PropertyReactive is working properly with collections (Contains works well - there is no recursion)  this looks like some fix is required in rule engine.",Major,Mario Fusco,,2019-02-07T00:32:48.000-0500,PropertyReactive with custom operator going in recursion on modify,Resolved,bug,Bug
2019-12-16T13:07:11.000-0500,DROOLS-3277,Explained,"The configuration required for all the KIE related components wired together with Sisu and in Plexus is spread out among many files with the same name/location in various library jars.

The SBT assembly plugin is the standard for building a Scala fat-jar application. When it multiple versions of the same file when squashing the jars together it attempts to apply a merge strategy to them. For the Sisu configuration, it is simple enough to apply a ""concat"" merge strategy. However, the META-INF/plexus/components.xml cannot be automatically merged. Unless all the elements are present, various component lookups will fail when using the KieScanner.

I've provided the following attachments related to this case:

||File||Description||
|out.log|Output of starting the fat-jar application without properly merging the Sisu and Plexus configuration files|
|components.xml|The merged components.xml file I created that resolves this issue.|
",Major,Mario Fusco,,2018-11-07T16:38:40.000-0500,KieScanner in Scala fat-jar application does not work due to Plexus configuration,Resolved,bug,Bug
2019-12-16T12:35:25.000-0500,DROOLS-2348,Out of Date,"Hi,

We have deployed the drools engine and KIE workbench on Tomcat container.

droolsEngine - All the jars from ""drools-distribution-7.6.0.Final"" are copied into the <tomcat_home>/lib folder
KIE Workbench - kie-drools-wb-7.6.0.Final-tomcat8.war deployment on <tomcat_home>/webapps folder.

Now the issue is, we are getting the below error, so that KIE Workbench is not deploying on tomcat.

Caused by: java.lang.ClassCastException: org.drools.beliefs.bayes.assembler.BayesAssemblerService cannot be cast to org.kie.api.internal.assembler.KieAssemblerService

If we exculde drools-beliefs-7.6.0.Final.jar jar from <tomcat_home>/lib folder then the KIE workbench is deployed successfully.

But, both the deployments of drools 7.4.1 is succeeded without excluding drools-beliefs-7.4.1.Final.jar.

Can any one help me in this issue..
Is there any restriction to deploy both on a single container (tomcat).

Thanks
Senthil",Major,Mario Fusco,,2018-02-23T04:45:45.000-0500,KIE Workbench deployment on Tomcat fails when already droolsEngine jars are in tomcat/lib folder,Resolved,bug,Bug
2019-12-16T12:50:44.000-0500,DROOLS-4444,Cannot Reproduce,"I am seeing an issue where the first time the rules are fired, causing a NullPointerException. This exception also only appears to be triggered the first time the rules are fired.  Subsequent requests do not appear to cause the same exception.

Any help as to what might be causing this issue would be much appreciated!

Below is the stack trace:

java.lang.NullPointerException
at org.drools.core.rule.constraint.MvelConstraint$ExecutorHolder.<clinit>(MvelConstraint.java:327)
[wrapped] java.lang.ExceptionInInitializerError
at org.drools.core.rule.constraint.MvelConstraint.jitEvaluator(MvelConstraint.java:301)
at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:268)
at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:222)
at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:139)
at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:70)
at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:320)
at org.drools.core.phreak.PropagationEntry$Insert.propagate(PropagationEntry.java:161)
at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:166)
at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:91)
at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1051)
at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1318)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1309)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293)
at com.elasticpath.service.rules.impl.AbstractRuleEngineImpl.firePromotionRulesForGroup(AbstractRuleEngineImpl.java:158)
at com.elasticpath.service.rules.impl.AbstractRuleEngineImpl.fireOrderPromotionSubtotalRules(AbstractRuleEngineImpl.java:122)
at com.elasticpath.service.shoppingcart.impl.PricingSnapshotServiceImpl.fireRules(PricingSnapshotServiceImpl.java:107)
at com.elasticpath.service.shoppingcart.impl.PricingSnapshotServiceImpl.getPricingSnapshotForCart(PricingSnapshotServiceImpl.java:67)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)
at org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.doInvoke(ServiceInvoker.java:56)
at org.eclipse.gemini.blueprint.service.importer.support.internal.aop.ServiceInvoker.invoke(ServiceInvoker.java:60)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invokeUnprivileged(ServiceTCCLInterceptor.java:70)
at org.eclipse.gemini.blueprint.service.util.internal.aop.ServiceTCCLInterceptor.invoke(ServiceTCCLInterceptor.java:53)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.eclipse.gemini.blueprint.service.importer.support.LocalBundleContextAdvice.invoke(LocalBundleContextAdvice.java:57)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:133)
at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:121)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)
at com.sun.proxy.$Proxy435.getPricingSnapshotForCart(Unknown Source)
at com.elasticpath.rest.resource.integration.epcommerce.repository.cartorder.impl.PricingSnapshotRepositoryImpl.lambda$getShoppingCartPricingSnapshotSingle$0(PricingSnapshotRepositoryImpl.java:70)
at io.reactivex.internal.operators.observable.ObservableFromCallable.subscribeActual(ObservableFromCallable.java:42)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.ObservableOnErrorNext.subscribeActual(ObservableOnErrorNext.java:38)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.ObservableOnErrorNext.subscribeActual(ObservableOnErrorNext.java:38)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.ObservableSingleMaybe.subscribeActual(ObservableSingleMaybe.java:30)
at io.reactivex.Maybe.subscribe(Maybe.java:3725)
at io.reactivex.internal.operators.maybe.MaybeToSingle.subscribeActual(MaybeToSingle.java:46)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleCache.subscribeActual(SingleCache.java:65)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:33)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleFlatMap$SingleFlatMapCallback.onSuccess(SingleFlatMap.java:84)
at io.reactivex.internal.operators.single.SingleCache.onSuccess(SingleCache.java:134)
at io.reactivex.internal.operators.single.SingleFlatMap$SingleFlatMapCallback$FlatMapSingleObserver.onSuccess(SingleFlatMap.java:111)
at io.reactivex.internal.operators.single.SingleCache.onSuccess(SingleCache.java:134)
at io.reactivex.internal.operators.single.SingleMap$MapSingleObserver.onSuccess(SingleMap.java:63)
at io.reactivex.internal.operators.single.SingleMap$MapSingleObserver.onSuccess(SingleMap.java:63)
at io.reactivex.internal.operators.single.SingleCache.subscribeActual(SingleCache.java:59)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:33)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:33)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleCache.subscribeActual(SingleCache.java:65)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleFlatMap$SingleFlatMapCallback.onSuccess(SingleFlatMap.java:84)
at io.reactivex.internal.operators.single.SingleJust.subscribeActual(SingleJust.java:30)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleDefer.subscribeActual(SingleDefer.java:43)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleFlatMap.subscribeActual(SingleFlatMap.java:36)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleCache.subscribeActual(SingleCache.java:65)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleFlatMap.subscribeActual(SingleFlatMap.java:36)
at io.reactivex.Single.subscribe(Single.java:2703)
at io.reactivex.internal.operators.single.SingleToObservable.subscribeActual(SingleToObservable.java:34)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.ObservableFlatMap.subscribeActual(ObservableFlatMap.java:55)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.ObservableMap.subscribeActual(ObservableMap.java:33)
at io.reactivex.Observable.subscribe(Observable.java:10842)
at io.reactivex.internal.operators.observable.BlockingObservableIterable.iterator(BlockingObservableIterable.java:39)
at com.google.common.collect.Iterables.addAll(Iterables.java:320)
at com.google.common.collect.Sets.newLinkedHashSet(Sets.java:366)
at com.elasticpath.rest.schema.ResourceState$Builder.withLinks(ResourceState.java:192)
at com.elasticpath.rest.helix.client.transformer.prototype.list.ReadOperationTransformer.transform(ReadOperationTransformer.java:72)
at com.elasticpath.rest.helix.client.transformer.prototype.list.ReadOperationTransformer.transform(ReadOperationTransformer.java:31)
at com.elasticpath.rest.helix.client.registry.impl.HandlerProxyImpl.invoke(HandlerProxyImpl.java:76)
at com.elasticpath.rest.helix.client.server.BootstrapResourceServerImpl.invokeProxy(BootstrapResourceServerImpl.java:99)
at java.util.Optional.map(Optional.java:215)
at com.elasticpath.rest.helix.client.server.BootstrapResourceServerImpl.processOperation(BootstrapResourceServerImpl.java:93)
at com.elasticpath.rest.helix.runtime.registry.PrototypeContext.execute(PrototypeContext.java:72)
at com.elasticpath.rest.helix.runtime.server.execution.SingleExecutionStrategy.execute(SingleExecutionStrategy.java:29)
at com.elasticpath.rest.helix.runtime.server.execution.ExecutionStrategyExecutor.executeStrategy(ExecutionStrategyExecutor.java:84)
at com.elasticpath.rest.helix.runtime.server.execution.ExecutionStrategyExecutor.lambda$executePrototype$0(ExecutionStrategyExecutor.java:59)
at java.util.Optional.map(Optional.java:215)
at com.elasticpath.rest.helix.runtime.server.execution.ExecutionStrategyExecutor.executePrototype(ExecutionStrategyExecutor.java:58)
at com.elasticpath.rest.helix.runtime.server.PrototypeDispatcherResourceServer.processOperation(PrototypeDispatcherResourceServer.java:89)
at com.elasticpath.rest.relos.kernel.processor.impl.TerminusOperationProcessor.processOperation(TerminusOperationProcessor.java:38)
at com.elasticpath.rest.relos.kernel.processor.impl.AuthorizingOperationProcessor.processOperation(AuthorizingOperationProcessor.java:40)
at com.elasticpath.rest.relos.kernel.processor.impl.CachingOperationProcessor.lambda$processOperation$0(CachingOperationProcessor.java:30)
at com.elasticpath.rest.relos.kernel.cache.impl.OperationResultCacheImpl.get(OperationResultCacheImpl.java:107)
at com.elasticpath.rest.relos.kernel.processor.impl.CachingOperationProcessor.processOperation(CachingOperationProcessor.java:30)
at com.elasticpath.rest.relos.kernel.impl.ResourceKernelImpl.submitOperation(ResourceKernelImpl.java:72)
at com.elasticpath.rest.relos.kernel.impl.ResourceKernelImpl.submitOperation(ResourceKernelImpl.java:60)
at com.elasticpath.rest.relos.kernel.impl.ReadOperationExecutor.submitOperation(ReadOperationExecutor.java:74)
at com.elasticpath.rest.relos.kernel.impl.ResourceServerKernelDelegate.submitOperation(ResourceServerKernelDelegate.java:68)
at com.elasticpath.rest.relos.kernel.impl.ExternalResourceKernelDelegateImpl.submitOperation(ExternalResourceKernelDelegateImpl.java:76)
at com.elasticpath.rest.relos.kernel.impl.ExternalResourceKernelDelegateImpl.submitExternalOperation(ExternalResourceKernelDelegateImpl.java:63)
at com.elasticpath.rest.relos.kernel.delegate.KernelBridgeImpl.continueOperation(KernelBridgeImpl.java:78)
at com.elasticpath.rest.relos.rs.SubjectSupplyingKernelBridge.continueOperation(SubjectSupplyingKernelBridge.java:59)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.fetchOperationResultFromKernel(FetchZoomTask.java:213)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.fetchResourceFromKernel(FetchZoomTask.java:180)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.fetchResourceState(FetchZoomTask.java:116)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.call(FetchZoomTask.java:82)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.call(FetchZoomTask.java:31)
at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)
at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)
at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
at java.util.concurrent.FutureTask.run(FutureTask.java)
at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:258)
at java.util.concurrent.ExecutorCompletionService.submit(ExecutorCompletionService.java:181)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTaskContext.submitTask(FetchZoomTaskContext.java:112)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.lambda$handleZoomChildren$0(FetchZoomTask.java:156)
at java.util.HashMap.forEach(HashMap.java:1289)
at java.util.Collections$UnmodifiableMap.forEach(Collections.java:1505)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.handleZoomChildren(FetchZoomTask.java:145)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTask.processResourceState(FetchZoomTask.java:136)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchTopTask.call(FetchTopTask.java:49)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchTopTask.call(FetchTopTask.java:13)
at com.google.common.util.concurrent.TrustedListenableFutureTask$TrustedFutureInterruptibleTask.runInterruptibly(TrustedListenableFutureTask.java:125)
at com.google.common.util.concurrent.InterruptibleTask.run(InterruptibleTask.java:57)
at com.google.common.util.concurrent.TrustedListenableFutureTask.run(TrustedListenableFutureTask.java:78)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
at java.util.concurrent.FutureTask.run(FutureTask.java)
at com.google.common.util.concurrent.MoreExecutors$DirectExecutorService.execute(MoreExecutors.java:258)
at java.util.concurrent.ExecutorCompletionService.submit(ExecutorCompletionService.java:181)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.FetchZoomTaskContext.submitTask(FetchZoomTaskContext.java:112)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.ZoomHandlerImpl.fetchAllZoomedResources(ZoomHandlerImpl.java:172)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.ZoomHandlerImpl.processZoom(ZoomHandlerImpl.java:142)
at com.elasticpath.rest.relos.rs.handler.parameter.zoom.impl.ZoomHandlerImpl.handleZoom(ZoomHandlerImpl.java:106)
at com.elasticpath.rest.relos.rs.impl.RestResourceImpl.processGetRequest(RestResourceImpl.java:135)
at sun.reflect.GeneratedMethodAccessor250.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:498)
at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:76)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:148)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:191)
at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:200)
at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:103)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:493)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:415)
at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:104)
at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:277)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:272)
at org.glassfish.jersey.internal.Errors$1.call(Errors.java:268)
at org.glassfish.jersey.internal.Errors.process(Errors.java:316)
at org.glassfish.jersey.internal.Errors.process(Errors.java:298)
at org.glassfish.jersey.internal.Errors.process(Errors.java:268)
at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:289)
at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:256)
at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:703)
at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:416)
at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:370)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:389)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:342)
at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:229)
at org.apache.felix.http.base.internal.handler.ServletHandler.doHandle(ServletHandler.java:339)
at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:300)
at org.apache.felix.http.base.internal.dispatch.ServletPipeline.handle(ServletPipeline.java:93)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:50)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.extensions.uuid.filter.UuidFilter.doFilter(UuidFilter.java:50)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.subject.header.filter.HeaderToSubjectLifecycleFilter.doFilter(HeaderToSubjectLifecycleFilter.java:62)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.authentication.springoauth2.filter.OAuth2TokenAuthenticationFilter.doFilter(OAuth2TokenAuthenticationFilter.java:81)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.extensions.rest.resource.integration.epcommerce.repository.oauthac.verification.filter.OAuth2TokenVerificationFilter.doFilter(OAuth2TokenVerificationFilter.java:91)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.authentication.web.filter.HeadersRemoverFilter.doFilter(HeadersRemoverFilter.java:107)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:84)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.filter.CharsetEncodingFilter.doFilter(CharsetEncodingFilter.java:43)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.filter.SystemReadyFilter.doFilter(SystemReadyFilter.java:42)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at com.elasticpath.rest.relos.rs.filter.ExceptionTranslatingFilter.doFilter(ExceptionTranslatingFilter.java:45)
at org.apache.felix.http.base.internal.handler.FilterHandler.doHandle(FilterHandler.java:108)
at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:80)
at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:46)
at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
at org.apache.felix.http.base.internal.dispatch.FilterPipeline.dispatch(FilterPipeline.java:76)
at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:49)
at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:67)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:731)
at org.apache.felix.http.proxy.ProxyServlet.service(ProxyServlet.java:60)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:731)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:110)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:506)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:169)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:962)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:445)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1115)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:637)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:748)",Blocker,Mario Fusco,,2019-08-19T13:55:14.000-0400,First time firing rules causes NullPointerExecption,Resolved,bug,Bug
2019-12-16T12:47:44.000-0500,DROOLS-4624,Explained,"I have to sum one field on all objects of ""Resource"" class. And I found out that accumulate's behavior is odd when before accumulating I am modifying that field.",Optional,Mario Fusco,,2019-10-09T06:20:41.000-0400,Accumulate doesn't get modified and parsed to double String correctly,Resolved,bug,Bug
2019-12-12T07:58:19.000-0500,DROOLS-4866,Done,"Hi.

While serializing a session with ProtobufOutputMarshaller we've encountered an exception in a few rare cases when the activations are sorted by {{Collections.sort( dormant, ActivationsSorter.INSTANCE )}}:

{code}
Caused by: java.lang.IllegalArgumentException: Comparison method violates its general contract!
	at java.util.TimSort.mergeHi(TimSort.java:899)
	at java.util.TimSort.mergeAt(TimSort.java:516)
	at java.util.TimSort.mergeForceCollapse(TimSort.java:457)
	at java.util.TimSort.sort(TimSort.java:254)
	at java.util.Arrays.sort(Arrays.java:1512)
	at java.util.ArrayList.sort(ArrayList.java:1462)
	at java.util.Collections.sort(Collections.java:175)
	(...)
{code}",Major,Mario Fusco,,2019-12-11T03:37:11.000-0500,ActivationsSorter: Comparison method violates its general contract!,Resolved,bug,Bug
2019-12-12T05:10:15.000-0500,DROOLS-4864,Done,"NullPointerException is thrown in AddRemoveRule::iterateLeftTuple when *removing* a rule that contains *accumulate* with *max* function and a *source pattern that matches no object*. 

{noformat}
Caused by: java.lang.NullPointerException
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.iterateLeftTuple(AddRemoveRule.java:1040)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.iterateLeftTuple(AddRemoveRule.java:1047)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.iterateLeftTuple(AddRemoveRule.java:1053)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.iterateLeftTuple(AddRemoveRule.java:1053)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.visitChild(AddRemoveRule.java:969)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.lambda$processLeftTuples$1(AddRemoveRule.java:927)
	at deployment.my-full-bundle.ear//org.drools.core.common.DefaultFactHandle$SingleLinkedTuples.forEachLeftTuple(DefaultFactHandle.java:728)
	at deployment.my-full-bundle.ear//org.drools.core.common.DefaultFactHandle.forEachLeftTuple(DefaultFactHandle.java:924)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.processLeftTuples(AddRemoveRule.java:922)
	at deployment.my-full-bundle.ear//org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:178)
	at deployment.my-full-bundle.ear//org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:191)
	at deployment.my-full-bundle.ear//org.drools.core.reteoo.ReteooBuilder.removeRules(ReteooBuilder.java:177)
	at deployment.my-full-bundle.ear//org.drools.core.impl.KnowledgeBaseImpl.removeObjectsGeneratedFromResource(KnowledgeBaseImpl.java:1735)
	at deployment.my-full-bundle.ear//org.drools.compiler.builder.impl.KnowledgeBuilderImpl.removeObjectsGeneratedFromResource(KnowledgeBuilderImpl.java:2151)
	at deployment.my-full-bundle.ear//org.drools.compiler.kie.builder.impl.KieBaseUpdater.removeResources(KieBaseUpdater.java:121)
	at deployment.my-full-bundle.ear//org.drools.compiler.kie.builder.impl.KieBaseUpdater.run(KieBaseUpdater.java:66)
	at deployment.my-full-bundle.ear//org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:745)
	at deployment.my-full-bundle.ear//org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:267)
	at deployment.my-full-bundle.ear//org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:237)
	at deployment.my-full-bundle.ear//org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:195)
	at deployment.my-full-bundle.ear.rules-comp-impl.jar//com.my.rules.RuleKnowledgeBase.removeRuleFromKnowledgeBase(RuleKnowledgeBase.java:481)
{noformat}
",Blocker,Mario Fusco,,2019-12-10T05:44:21.000-0500,accumulate causes NullPointerException,Resolved,bug,Bug
2019-12-10T03:10:05.000-0500,DROOLS-4723,Cannot Reproduce,See the attached video. The Scenario designer is not closed after file deletion.,Major,Jozef Marko,,2019-11-01T03:36:52.000-0400,Scenario is not closed after deleting,Closed,bug,Bug
2019-12-09T05:31:42.000-0500,DROOLS-4766,Done,None,Major,Yeser Amer,,2019-11-15T05:33:55.000-0500,Adding expression type column don't shows the correct placeholder and the correct cell factory,Resolved,bug,Bug
2019-12-10T02:46:29.000-0500,DROOLS-4665,Cannot Reproduce,"The Scenario Background tab disable some toolbar buttons, however they stay disabled depending on the order of selecting editor tabs. See the [comment|https://github.com/kiegroup/drools-wb/pull/1239#discussion_r336366932].",Major,Jozef Marko,,2019-10-21T03:53:38.000-0400,Scenario Background toolbar buttons state,Closed,bug,Bug
2019-12-10T02:43:17.000-0500,DROOLS-4664,Cannot Reproduce,"Currently the Scenario Background table row duplication doesn't work, for more details, see the [comment|https://github.com/kiegroup/drools-wb/pull/1239#issuecomment-543671401].",Major,Jozef Marko,,2019-10-21T02:56:17.000-0400,Scenario Background Table row duplication,Closed,bug,Bug
2019-12-09T08:13:07.000-0500,DROOLS-4687,Done,None,Major,Massimiliano Dessi,,2019-10-28T07:51:37.000-0400,k8s won't kill a pod who expose not available flag after n-attempts to read a snapshot,Resolved,bug,Bug
2019-12-06T14:08:11.000-0500,DROOLS-4714,Done,"This issue is caused by DROOLS-4484
See the attached video, when user filter a field of a structure, results are shown inappropriately.

h2. Acceptance criteria
- Issue from video fixed (/)
- Filter data type entry, navigate trough results (x)  [^filter-navigate-trough.webm] ",Major,Daniel José dos Santos,,2019-10-31T04:12:20.000-0400,[DMN Designer] Filtering doesn't show results properly,Resolved,bug,Bug
2019-12-05T12:17:07.000-0500,DROOLS-4767,Done,"When there is only one column on the grid, the popover is show to the left. But if there is not enough space to the left, the popover is not visible.
Proposed solution, for this situation, is to show the popover _above_ the cell.


The final position preference order will be (respect the cell):

RIGHT -> LEFT -> ABOVE
 ",Major,Gabriele Cardosi,,2019-11-15T05:40:24.000-0500,Fix error-popover position on simulation/background grids,Resolved,bug,Bug
2019-12-06T14:08:00.000-0500,DROOLS-4711,Done,"This issue is caused by DROOLS-4484
If there is single data type entry user is able to drag in horizontally.

h2. Acceptance Criteria
- Drag structure (/)
- Drag structure field (/)
- Drag simple type (/)
",Optional,Daniel José dos Santos,,2019-10-31T03:31:14.000-0400,[DMN Designer] User is able to drag single data type entry horizontally,Resolved,bug,Bug
2019-12-06T04:11:23.000-0500,DROOLS-4623,Done,None,Major,Toshiya Kobayashi,,2019-10-09T05:26:38.000-0400,Using a negated constraint in a not pattern doesn't work with executable model ,Resolved,bug,Bug
2019-12-06T09:42:40.000-0500,DROOLS-4805,Done,"When running our engine in STREAM mode, we notice a number of Drools internal object references increasing time even though the fact count stays relatively constant.

jmap -histo <pid> shows:
{noformat}

 num     #instances         #bytes  class name
----------------------------------------------
   1:      17478466     1258449552  java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask
   2:      17475174      699006960  org.drools.core.time.impl.JDKTimerService$JDKJobHandle
   3:      17762331      568394592  java.util.concurrent.ConcurrentHashMap$Node
   4:      17475174      559205568  org.drools.core.rule.SlidingTimeWindow$BehaviorJobContext
   5:      17475174      559205568  org.drools.core.time.impl.DefaultTimerJobInstance
   6:       8596776      551411680  [C
   7:      18898675      453568200  java.lang.Long
   8:      17475174      419404176  org.drools.core.time.SelfRemovalJobContext
   9:      17475174      279602784  org.drools.core.time.SelfRemovalJob
  10:      17475174      279602784  org.drools.core.time.impl.PointInTimeTrigger
  11:       9263698      222328752  java.lang.String
  12:       4584671      146709472  java.util.HashMap$Node
  13:        246658      138804176  [B
{noformat}

These number continue to increase over time until the system OOMs.

Graph for # of facts in the session looks like:
 !image-2019-11-25-10-31-07-281.png|thumbnail! 

The engine is fairly busy - we're constantly adding and removing facts.

Our rules are available here:
https://github.com/OpenNMS/opennms/blob/opennms-25.0.0-1/opennms-base-assembly/src/main/filtered/etc/alarmd/drools-rules.d/alarmd.drl#L234
",Major,Mario Fusco,,2019-11-25T10:36:10.000-0500,Memory leak in STREAM mode (# PointInTimeTriggers growing),Resolved,bug,Bug
2019-12-06T08:07:33.000-0500,DROOLS-4795,Done,"There is scenario causing user is not able to save the DMN file anymore. If is editing some structure field, but he decides in the middle of editing to rmeove whole structure, the save button of the designer remains disabled.

We should either fix this scenario or drop the *disable save button* feature.",Major,Daniel José dos Santos,,2019-11-21T06:27:34.000-0500,[DMN Designer] User is unable to save model when structure is removed,Resolved,bug,Bug
2019-12-05T08:26:38.000-0500,DROOLS-4617,Won't Fix,fix long literal when an uppercase L is used instead of lowercase,Major,Luca Molteni,,2019-10-08T05:01:44.000-0400,"Fix coercion with uppercase ""L"" as Long literal",Resolved,bug,Bug
2019-12-05T08:20:39.000-0500,DROOLS-4310,Done,"In the Data Types search input, replace the placeholder and use ""Filter by"". As illustrated at: https://www.patternfly.org/v3/pattern-library/content-views/list-view/",Minor,Jozef Marko,,2019-07-12T15:34:12.000-0400,[DMN Designer] Data Types - Search - Replace the placeholder,Resolved,bug,Bug
2019-12-05T03:26:45.000-0500,DROOLS-4797,Done,None,Major,Matteo Mortari,,2019-11-22T05:31:19.000-0500,DMN itemdef resolution in xml namespaces,Resolved,bug,Bug
2019-12-03T07:50:27.000-0500,DROOLS-4762,Done,"There are a couple of keyboard problems related to tab index:
- When adding or editing a row, you can't tab the focus onto the save/cancel buttons (/)
- After selecting from the dropdown, the focus jumps back to the text field for some reason (/)
- The focus ring is not shown on the list toggle (/)
",Major,Daniel José dos Santos,,2019-11-14T13:22:27.000-0500,[DMN Designer] Data Types - Tab index is not working on Data Type rows,Resolved,bug,Bug
2019-12-02T08:03:00.000-0500,DROOLS-4754,Done,"If the value in Background section made a scenario DRL to fall with exception then the scenario fails and alerts is viewing in alerts table, but the caused cell are not getting red.
",Major,Daniele Zonca,,2019-11-13T11:43:48.000-0500,Background cell doesn't highlites if passed vallue to DRL returns scenario failure,Closed,bug,Bug
2019-12-02T09:26:47.000-0500,DROOLS-4819,Done,The issue is shown in the attached video. It is not expected to change collapsed/expanded state during canceling edit mode.,Optional,Jozef Marko,,2019-11-28T03:36:55.000-0500,[DMN Designer] Structure is toggled when edit mode is canceled,Resolved,bug,Bug
2019-12-02T10:04:01.000-0500,DROOLS-4804,Done,"This Jira encorporates two issues:
1) the ""search"" is not cleared when switching tab
2) the ""Insert Data Object"" is enabled even when there is not any selected column 

Proposed solutions by [~gabriolo]:
1) clear the search when switching tab, fix the ""automatic filter"" on tab switch, so that results are automatically filtered (I would prefer that) 
",Minor,Yeser Amer,,2019-11-25T07:41:21.000-0500,Test Tools pannel doesn't fully update its fields after switching between Background and Model tab,Resolved,bug,Bug
2019-11-28T16:08:44.000-0500,DROOLS-4791,Done,"User is not able to invoke cell edito mode if he scrolled the dmn grid before.

*Acceptance criteria*

*_DMN_* (/)
- Import the attached file.
- Follow general steps below.
- Try to Drag and Drop Data type, Data Type Enumeration Constraint

*_Guided Decision Table_* (/)
- Create/open existing asset.
- Follow general steps below.

*_Scenario Simulation_* (/)
- Create/open existing asset.
- Follow general steps below.

*_General steps_*
(?) Double-click in cell to edit.
(?) Press {{<Tab>}} keyboard operation should work.
(?) Double-click in cell to edit.
(?) Press {{<Escape>}} keyboard operation should work.
(?) Click _elsewhere _ e.g. browser address bar.
(?) Keyboard operation should not work (editor does not have focus)
(?) Click on grid.
(?) Keyboard operation should work.
(?) Scroll the grid, Edit the cell, Keyboard Operation needs to work afterwards
(?) Search the grid, Edit the cell, Keyboard Operation needs to work afterwards



",Critical,Michael Anstis,,2019-11-20T02:37:33.000-0500,[DMN Designer] Not able to edit by double click after scroll,Resolved,bug,Bug
2019-11-29T06:03:44.000-0500,DROOLS-4802,Done,None,Major,Massimiliano Dessi,,2019-11-22T11:31:48.000-0500,Fix topic partition check Hacep,Resolved,bug,Bug
2019-11-27T02:34:22.000-0500,DROOLS-4806,Explained,"Isn't possible to create a  column ""Set the value of a field"", the menulist doesn't show the field of the data object chosen as a pattern.",Major,Toni Rikkola,,2019-11-26T06:08:20.000-0500,The fields of a DataObject used in a pattern aren't presented in the menu list,Closed,bug,Bug
2019-11-27T03:48:57.000-0500,DROOLS-4753,Done,"
Unexpected exception throws if user runs test scenario that was previously imported s a scesim file.
 !image-2019-11-13-16-59-18-340.png|thumbnail! ",Major,Anna Dupliak,,2019-11-13T11:03:12.000-0500,NPE shows in scesim editor when user runs imported scesim,Closed,bug,Bug
2019-11-26T10:26:15.000-0500,DROOLS-4517,Done,"There is an issue with contextual menus in ScenarioSimalation and DMN designers. When user wants to show the contextual menu after scrolling was done:

h3. ScenarioSimulation
Menu is shown at inappropriate place
 !Screenshot from 2019-09-10 09-48-27.png|thumbnail! 

h3. DMN
Menu is not shown at all
 !Screenshot from 2019-09-10 09-53-24.png|thumbnail! 
",Major,Michael Anstis,,2019-09-10T03:56:08.000-0400,Contextual Menus after scrolling,Resolved,bug,Bug
2019-11-25T13:16:44.000-0500,DROOLS-4750,Explained,"In documentation 

https://docs.jboss.org/drools/release/7.23.0.Final/drools-docs/html_single/#drl-rules-WHEN-con_drl-rules

operator str[endsWith] is supposed to be supported, it it is not working.

Fails with:


{code:java}
java.lang.Exception: Rule contains errors![[5,19]: [ERR 102] Line 5:19 mismatched input 'str' in rule ""pnr first name end with""]
	at com.mdw.bzr.drools_reproducer.StrWithFailOnFirstCompilationErrorReproducerTest.parse(StrWithFailOnFirstCompilationErrorReproducerTest.java:58)
	at com.mdw.bzr.drools_reproducer.StrWithFailOnFirstCompilationErrorReproducerTest._03_parseStrWith(StrWithFailOnFirstCompilationErrorReproducerTest.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
{code}",Major,Mario Fusco,,2019-11-13T06:11:36.000-0500,DrlParser fails to parse str[endsWith] operator,Resolved,bug,Bug
2019-11-22T14:59:24.000-0500,DROOLS-4735,Done,"There have been reports that the performance of the DMN editor's grids does not scale. On examination performance for anything other than simple examples is pretty dire.. something is seriously wrong.

On closer inspection the following issues were found:
- Multiple {{NodeMouseDownHandler}}, {{NodeMouseMoveHandler}} and {{NodeMouseUpHandler}} are registered because multiple {{DMNGridLayer}} are (incorrectly) instantiated due to a flaw in {{GridLienzoPanel}} and {{GridLienzoScrollHandler}}.
- Calls to {{GridWidget.getHeight()}} and {{GridRow.getHeight()}} can be _very_ expensive for due to the dynamic calculation in {{ExpressionEditorGridRow}} and {{LiteralExpressionGridRow}} rows.

h2. Manual Acceptance test
Environment: wildfly14 with following memory settings: {{JAVA_OPTS=""-Xms64m -Xmx1024m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=1024m -Djava.net.preferIPv4Stack=true""}}

h3. GDT
- Merge view (/)
- Pinned mode (/)
- Change column width, save and reopen (/)
- Search the table (/)
- Scroll the table (/)
- Edit the cell (/)
- Reorder columns (/)
- Reorder rows (/)

h3. DMN decision table
- Save and reopen (x) not able to save in reasonable time
- Change column width (/)
- Search the grid (/)  
- Scroll the grid (/)
- Reorder columns (/)
- Reorder rows (/)
- Adding column (/)
- Removing column (/) 
- Edit the cell (x) not able to invoke edit mode by double click, if the table was scrolled   [^edit-cell.webm] ",Critical,Michael Anstis,,2019-11-08T11:24:59.000-0500,[DMN Designer] Grid performance is dire,Resolved,bug,Bug
2019-11-20T10:27:06.000-0500,DROOLS-4788,Done,"When there is new line in rule cell with specific condition, new line('\n') is included as a value.

Here is generated  problematic DRL.

{noformat}
rule ""newlineInCell_11""
when
m:Message(map[""Key1""]  == var1,
map[""\nKey2""]  == var2)                     <== HERE                   
then
System.out.println(m.getMessage());
m.setMessage(""Goodbye cruel world"");
m.setStatus(Message.GOODBYE);
end
{noformat}

This does happen with 7.26.0.Final(RHDM7.5.0), but not with 7.23.0.Final(7.4.x).",Major,Mario Fusco,,2019-11-19T22:16:19.000-0500,newline within the rule cell of spreadsheet is included as a value incorrectly,Resolved,bug,Bug
2019-11-19T09:22:18.000-0500,DROOLS-4763,Done,"- Create two GIVEN columns
- Map column1 to the whole object (expression)
- Map column2 to a field
- Write an expression in column1 and a value in column2
- Run

The GIVEN object should be the composition of expression + value

For example:
- Expression: new Person(""name"", 10);
- Value (age): 15
- Result: a Person instance with name ""name"" and age 15 ",Major,Daniele Zonca,,2019-11-15T01:31:26.000-0500,Test Scenario: consider all columns of an instance even if an expression is available,Closed,bug,Bug
2019-11-20T03:28:48.000-0500,DROOLS-3120,Out of Date,The is sequence of steps the error validation state of node remains active. It is shown in the attachment.,Optional,Michael Anstis,,2018-10-11T11:54:20.000-0400,[DMN Designer] Validation Error State remains active,Closed,bug,Bug
2019-11-18T07:50:21.000-0500,DROOLS-4684,Done,"See reproducer here: https://github.com/DuncanDoyle/drools-conditional-named-consequence-issue

When you use a Conditional Named Consequence {code}if{code} definition directly after an {code}accumulate{code}, Drools gives the following error when parsing the DRL:

{code}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.28.0.Final:build (default-build) on project drools-conditional-named-consequence-issue: Execution default-build of goal org.kie:kie-maven-plugin:7.28.0.Final:build failed: Unable to get KieModule, Errors Existed: Error Messages:
[ERROR] Message [id=1, kieBase=defaultKieBase, level=ERROR, path=rules.drl, line=19, column=0
[ERROR]    text=Unable to resolve ObjectType 'if']
[ERROR] ---
[ERROR] Warning Messages:
[ERROR] ---
[ERROR] Info Messages:
[ERROR]
{code}

When you add a constraint between the {code}accumulate{code} and the {code}if{code} statement of the Conditional Named Consequence, it works fine.

Also when you try to generate the canonical model from a DRL that contains a Conditional Named Consequence, you get the following error:
{code}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.28.0.Final:generateModel (default-generateModel) on project drools-conditional-named-consequence-issue: A type incompatibility occurred while executing org.kie:kie-maven-plugin:7.28.0.Final:generateModel: org.drools.compiler.lang.descr.NamedConsequenceDescr cannot be cast to org.drools.compiler.lang.descr.PatternDescr
{code}

{code}
",Major,Luca Molteni,,2019-10-28T05:05:43.000-0400,Parser and Canonical Model Compiler error on Conditional Named Consequence,Resolved,bug,Bug
2019-11-18T10:25:13.000-0500,DROOLS-4773,Done,None,Major,Matteo Mortari,,2019-11-18T05:27:28.000-0500,DMN Validator fluent builder to validate schema and static analysis using reader,Resolved,bug,Bug
2019-11-18T08:09:19.000-0500,DROOLS-4768,Done,"{{noformat}}
org.junit.runners.model.TestTimedOutException: test timed out after 40000 milliseconds
	at java.util.zip.ZipFile.freeEntry(Native Method)
	at java.util.zip.ZipFile.access$1000(ZipFile.java:60)
	at java.util.zip.ZipFile$ZipEntryIterator.next(ZipFile.java:540)
	at java.util.zip.ZipFile$ZipEntryIterator.nextElement(ZipFile.java:514)
	at java.util.zip.ZipFile$ZipEntryIterator.nextElement(ZipFile.java:495)
	at java.util.jar.JarFile$JarEntryIterator.next(JarFile.java:257)
	at java.util.jar.JarFile$JarEntryIterator.nextElement(JarFile.java:266)
	at java.util.jar.JarFile$JarEntryIterator.nextElement(JarFile.java:247)
	at sun.misc.URLClassPath$JarLoader.validIndex(URLClassPath.java:1017)
	at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:1150)
	at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:1062)
	at sun.misc.URLClassPath.getResource(URLClassPath.java:249)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:363)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:362)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:763)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)
	at java.net.URLClassLoader.access$100(URLClassLoader.java:74)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:369)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:363)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:362)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at org.drools.core.common.CompositeDefaultAgenda.halt(CompositeDefaultAgenda.java:232)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.halt(StatefulKnowledgeSessionImpl.java:1301)
	at org.drools.compiler.integrationtests.CompositeAgendaTest.testCreateHaltDisposeAgenda(CompositeAgendaTest.java:115)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:748)

Standard Output

14:02:49.576 [Time-limited test] INFO  o.d.c.k.b.impl.KieRepositoryImpl.addKieModule:111 - KieModule was added: MemoryKieModule[releaseId=org.default:artifact:1.0.0]
14:02:49.636 [Time-limited test] DEBUG o.d.c.m.DroolsManagementAgent.registerMBean:210 - Registered org.kie:kcontainerId=""f6789948-81a7-428a-8941-6af6283f6219"",kbaseId=""defaultKieBase"" into the platform MBean Server
{{noformat}}

detaiils at 
https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/KIE/job/7.26.x/job/DailyBuild-prod/job/DailyBuild-prod-pipeline-7.26.x/22/testReport/org.drools.compiler.integrationtests/CompositeAgendaTest/testCreateHaltDisposeAgenda/",Major,Daniel Rosa,,2019-11-15T07:14:55.000-0500,org.drools.compiler.integrationtests.CompositeAgendaTest.testCreateHaltDisposeAgenda timeouts,Resolved,bug,Bug
2019-11-18T06:32:31.000-0500,DROOLS-4730,Done,When User goes to Background tab there should be only one column with given. But for Dmn based scenarios there is also description column.,Major,Gabriele Cardosi,,2019-11-05T12:58:39.000-0500,Scenario description column appears on breakdown tab when creating DMN based scenario,Closed,bug,Bug
2019-11-18T12:48:31.000-0500,DROOLS-4784,Done,None,Major,Mario Fusco,,2019-11-18T12:43:16.000-0500,Wrong index generation in executable model when a bean property name is all uppercase,Resolved,bug,Bug
2019-11-15T05:26:09.000-0500,DROOLS-2583,Duplicate Issue,"Common HTML select boxes can be controlled by keyboard. KeyPress of the Arrow.DOWN or Arrow.UP moves one option one or down. This is not true for Type Ref select box. There by pressing Arrow.DOWN or Arrow.UP user is able to select just every second option.

Attaching screenshot of the select box just for record which select box I mean.",Optional,Michael Anstis,,2018-05-23T05:34:39.000-0400,[DMN Designer] Type Ref select box keyboard control,Resolved,bug,Bug
2019-11-15T07:04:55.000-0500,DROOLS-4751,Done,None,Major,Matteo Mortari,,2019-11-13T09:14:16.000-0500,DMN using imports on bkm node,Resolved,bug,Bug
2019-11-15T04:25:35.000-0500,DROOLS-3945,Duplicate Issue,"server.log as follows:
{code:java}
2019-04-29 11:14:03,802 INFO  [org.uberfire.ext.metadata.io.BatchIndex] (Thread-183) Starting indexing of MySpace/Test\master ...
2019-04-29 11:14:03,802 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-183) Preparing 23 indexers to analyze indexing jobs for cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,803 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-186) Completed indexing 0 events for indexer [id=org.jbpm.designer.server.indexing.BPMN2FileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,803 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-187) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.scorecard.backend.server.indexing.GuidedScoreCardFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,804 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-188) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dtablexls.backend.server.indexing.DecisionTableXLSXFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,804 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-186) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.drltext.backend.server.indexing.DslrFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,805 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-189) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtree.backend.server.indexing.GuidedDecisionTreeFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,805 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-190) Completed indexing 0 events for indexer [id=org.kie.workbench.common.stunner.bpmn.backend.indexing.BpmnFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,805 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-191) Completed indexing 0 events for indexer [id=org.kie.workbench.common.stunner.cm.backend.indexing.CaseManagementFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,805 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-192) Completed indexing 0 events for indexer [id=org.kie.workbench.common.forms.editor.backend.indexing.FormDefinitionIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,806 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-197) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.rule.backend.server.indexing.GuidedRuleDslrFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,806 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-196) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.globals.backend.server.indexing.GlobalsFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,806 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-201) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dtablexls.backend.server.indexing.DecisionTableXLSFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,806 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-204) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.testscenario.backend.server.indexing.TestScenarioFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,806 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-194) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtable.backend.server.indexing.GuidedDecisionTableGraphFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,807 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-205) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtable.backend.server.indexing.GuidedDecisionTableFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,807 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-195) Completed indexing 0 events for indexer [id=org.optaplanner.workbench.screens.solver.backend.server.indexing.SolverFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,807 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-198) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dsltext.backend.server.indexing.DslFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,808 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-206) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,808 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-202) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.rule.backend.server.indexing.GuidedRuleDrlFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,809 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-203) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.enums.backend.server.indexing.EnumFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/Test\master]].
2019-04-29 11:14:03,810 ERROR [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-185) Indexing error for indexer [id=org.kie.workbench.common.LibraryAssetIndexer]: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:04,074 ERROR [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-193) Indexing error for indexer [id=org.uberfire.ext.metadata.io.CoreIndexer]: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:04,328 INFO  [org.uberfire.ext.metadata.io.BatchIndex] (Thread-193) Starting indexing of MySpace/pingan-auto_article\master ...
2019-04-29 11:14:04,328 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-193) Preparing 23 indexers to analyze indexing jobs for cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-206) Completed indexing 0 events for indexer [id=org.kie.workbench.common.LibraryAssetIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-195) Completed indexing 0 events for indexer [id=org.jbpm.designer.server.indexing.BPMN2FileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-201) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dtablexls.backend.server.indexing.DecisionTableXLSXFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-204) Completed indexing 0 events for indexer [id=org.kie.workbench.common.stunner.bpmn.backend.indexing.BpmnFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-205) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.scorecard.backend.server.indexing.GuidedScoreCardFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-194) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtree.backend.server.indexing.GuidedDecisionTreeFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,330 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-196) Completed indexing 0 events for indexer [id=org.kie.workbench.common.stunner.cm.backend.indexing.CaseManagementFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,331 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-197) Completed indexing 0 events for indexer [id=org.kie.workbench.common.forms.editor.backend.indexing.FormDefinitionIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-192) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtable.backend.server.indexing.GuidedDecisionTableGraphFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-188) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.rule.backend.server.indexing.GuidedRuleDslrFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-189) Completed indexing 0 events for indexer [id=org.optaplanner.workbench.screens.solver.backend.server.indexing.SolverFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-191) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.globals.backend.server.indexing.GlobalsFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-186) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dsltext.backend.server.indexing.DslFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-187) Completed indexing 0 events for indexer [id=org.kie.workbench.common.screens.datamodeller.backend.server.indexing.JavaFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-183) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.drltext.backend.server.indexing.DrlFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,333 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-206) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.enums.backend.server.indexing.EnumFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,334 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-207) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.dtablexls.backend.server.indexing.DecisionTableXLSFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,335 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-208) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.rule.backend.server.indexing.GuidedRuleDrlFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,335 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-211) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,336 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-212) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.drltext.backend.server.indexing.DslrFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,344 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-210) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.guided.dtable.backend.server.indexing.GuidedDecisionTableFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,344 INFO  [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-209) Completed indexing 0 events for indexer [id=org.drools.workbench.screens.testscenario.backend.server.indexing.TestScenarioFileIndexer] in cluster [KClusterImpl [clusterId=MySpace/pingan-auto_article\master]].
2019-04-29 11:14:04,604 ERROR [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-190) Indexing error for indexer [id=org.uberfire.ext.metadata.io.CoreIndexer]: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\pingan-auto_article\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\pingan-auto_article\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:04,608 ERROR [org.uberfire.ext.metadata.io.BatchIndex] (Thread-190) Index fails. [@MySpace/pingan-auto_article\master]: java.util.concurrent.CompletionException: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\pingan-auto_article\master\write.lock
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273)
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1592)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\pingan-auto_article\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	... 3 more
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\pingan-auto_article\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:05,146 INFO  [org.uberfire.ext.security.management.BackendUserSystemManager] (default task-4) Using the user management service named 'WildflyCLIUserManagementService'
2019-04-29 11:14:06,299 INFO  [org.drools.compiler.kie.builder.impl.KieRepositoryImpl] (Thread-199) KieModule was added: MemoryKieModule[releaseId=com.myspace:Test:1.0.0-SNAPSHOT]
2019-04-29 11:14:06,299 INFO  [org.drools.compiler.kie.builder.impl.KieRepositoryImpl] (Thread-200) KieModule was added: MemoryKieModule[releaseId=com.myspace:Test:1.0.0-SNAPSHOT]
2019-04-29 11:14:06,545 WARN  [org.kie.server.common.KeyStoreHelperUtil] (Thread-122) Unable to load key store. Using password from configuration
2019-04-29 11:14:06,759 ERROR [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-199) Indexing error for indexer [id=org.kie.workbench.common.screens.datamodeller.backend.server.indexing.JavaFileIndexer]: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:07,006 ERROR [org.uberfire.ext.metadata.io.IndexerDispatcher] (Thread-200) Indexing error for indexer [id=org.drools.workbench.screens.drltext.backend.server.indexing.DrlFileIndexer]: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more

2019-04-29 11:14:07,010 ERROR [org.uberfire.ext.metadata.io.BatchIndex] (Thread-200) Index fails. [@MySpace/Test\master]: java.util.concurrent.CompletionException: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273)
	at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:280)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1592)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:56)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryType$2.newIndex(DirectoryType.java:74)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryFactory.newCluster(DirectoryFactory.java:122)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:66)
	at org.uberfire.ext.metadata.backend.lucene.index.LuceneIndexManager.indexOf(LuceneIndexManager.java:42)
	at org.uberfire.ext.metadata.backend.lucene.provider.LuceneIndexProvider.index(LuceneIndexProvider.java:73)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doIndex(MetadataIndexEngine.java:157)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doAction(MetadataIndexEngine.java:136)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.doCommit(MetadataIndexEngine.java:256)
	at org.uberfire.ext.metadata.io.index.MetadataIndexEngine.commit(MetadataIndexEngine.java:239)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:189)
	at org.uberfire.ext.metadata.io.IndexerDispatcher$IndexerJob.get(IndexerDispatcher.java:159)
	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1590)
	... 3 more
Caused by: org.apache.lucene.store.LockObtainFailedException: Lock held by this virtual machine: D:\install_tools\wildfly-14.0.1.Final\bin\.index\MySpace\Test\master\write.lock
	at org.apache.lucene.store.NativeFSLockFactory.obtainFSLock(NativeFSLockFactory.java:127)
	at org.apache.lucene.store.FSLockFactory.obtainLock(FSLockFactory.java:41)
	at org.apache.lucene.store.BaseDirectory.obtainLock(BaseDirectory.java:45)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:800)
	at org.uberfire.ext.metadata.backend.lucene.index.directory.DirectoryLuceneIndex.<init>(DirectoryLuceneIndex.java:52)
	... 16 more
{code}
",Major,Eder Ignatowicz,,2019-04-28T23:30:15.000-0400,Project Indexing error for indexer when restart business central in wildfly,Closed,bug,Bug
2019-11-13T08:27:49.000-0500,DROOLS-4743,Done,"During 1.7 -> 1.8 migration background model is created but without empty background data - must add otherwise backend code is broken
*UPD*
The idea is to add an initial empty row in *Background* tab for imported assets.",Blocker,Gabriele Cardosi,,2019-11-11T09:22:16.000-0500,Add empty background data row on migration,Resolved,bug,Bug
2019-11-13T10:08:24.000-0500,DROOLS-4749,Done,"kie-soup build fails with error on JDK 11: 

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:javadoc (default-cli) on project assertj-core: An error has occurred in Javadoc report generation: 
[ERROR] Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.",Major,Tibor Zimanyi,,2019-11-13T04:13:59.000-0500,kie-soup build fails on JDK 11 due to Javadoc plugin,Resolved,bug,Bug
2019-11-13T10:08:13.000-0500,DROOLS-4748,Done,"droolsjbpm-knowledge build fails with error on JDK 11: 

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.1:javadoc (default-cli) on project assertj-core: An error has occurred in Javadoc report generation: 
[ERROR] Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.",Major,Tibor Zimanyi,,2019-11-13T04:01:34.000-0500,droolsjbpm-knowledge build fails on JDK 11 due to Javadoc plugin,Resolved,bug,Bug
2019-11-14T04:19:58.000-0500,DROOLS-4756,Done,"JavaDoc generation in our builds doesn't work with JDK 11. It fails with 

Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.

javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.",Major,Tibor Zimanyi,,2019-11-14T03:54:11.000-0500,JavaDoc generation doesn't work with JDK 11,Resolved,bug,Bug
2019-11-12T08:57:07.000-0500,DROOLS-1672,Done,"When trying this test case:
{code}{ is not exactly 18 : != 18, bob is not exactly 18 : is not exactly 18(16) }.bob is not exactly 18""{code}

the parser fails like this [1] 

[1] https://gist.github.com/baldimir/7c13b9c76087d44f95802ded8b72877f

Will provide a PR with a reproducer. ",Major,Edson Tirelli,,2017-07-21T10:12:22.000-0400,"""not"" in variable name doesn't work",Closed,bug,Bug
2019-11-12T08:58:26.000-0500,DROOLS-2388,Done,"When using DMNValidator.validate method that takes a DMN file as a parameter, the validation results are sometimes different from results of validate method that takes Definitions as an input parameter. The main difference looks to be namespace parsing.

Reproducer can be found here: https://github.com/kiegroup/drools/pull/1814",Minor,Fedor Gavrilov,,2018-03-14T05:30:34.000-0400,DMN Namespace unmarshalling differs from standard one when calling DMNValidator.validate method with File param,Resolved,bug,Bug
2019-11-11T10:24:49.000-0500,DROOLS-4715,Done,"This issue is caused by DROOLS-4484
If user drag a structure not enough == no reordering/reorganization caused by that drag, the structure is lost. See the attached video.

---

⚠️ Notice: this issue is caused by the absence of reference, like the the scenario mentioned on DROOLS-4710. This JIRA must be marked as resolved only when both scenarios are solved.
",Major,Guilherme Gomes,,2019-10-31T04:25:22.000-0400,[DMN Designer] Structure is lost when user doesn't drag it enough,Resolved,bug,Bug
2019-11-11T10:02:56.000-0500,DROOLS-4731,Rejected,"Setting long field value in THEN:
This are 3 different problems:
1) package as kjar with 'mvn clean install' result in ""Error: unable to resolve method using strict-mode: org.drools.core.spi.Activation.setValue(java.lang.Integer)""
RESULT:
IntInRuleJava.drl - FAIL
IntInRuleMvel.drl - FAIL
LongInRuleJava.drl - OK
LongInRuleMvel.drl - FAIL
LongError.gdst - FAIL

2) package as kjar with 'mvn clean install -Ddrools.dialect.mvel.strict=false', same error on different files:
IntInRuleJava.drl - FAIL
IntInRuleMvel.drl - OK
LongInRuleJava.drl - OK
LongInRuleMvel.drl - OK
LongError.gdst - OK

3) with 'mvn clean install -DgenerateModel=YES' it result in 'incompatible types: int cannot be converted to java.lang.Long', setting strict false have no influence on result
IntInRuleJava.drl - FAIL
IntInRuleMvel.drl - FAIL
LongInRuleJava.drl - OK
LongInRuleMvel.drl - OK
LongError.gdst - FAIL

Setting 'drools.dialect.mvel.strict' in kmodule.xml doesn't work.

Example project attached.",Major,Mario Fusco,,2019-11-07T04:35:52.000-0500,Working with Long field,Resolved,bug,Bug
2019-11-11T09:44:48.000-0500,DROOLS-4669,Cannot Reproduce,"I had issue with standard Spring project. My configuration ended with following exception:
{code:java}
Caused by: java.lang.RuntimeException: The Eclipse JDT Core jar is not in the classpath
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.setCompiler(JavaDialectConfiguration.java:117)
{code}
Because of this I have to setup KieSession this way:
{code:java}
KieServices kieServices = KieServices.Factory.get();
ReleaseId kieRelease = kieServices.newReleaseId(""sk.f4s"", ""encounter-rule"", ""1.0.0-SNAPSHOT"");
KieContainer kieContainer = kieServices.newKieContainer(kieRelease, this.getClass().getClassLoader());
kieSession = kieContainer.newStatelessKieSession();
{code}
After this everything works fine. However I want to reload my kBase with scanner. I add following two lines:
{code:java}
kieScanner = kieServices.newKieScanner(kieContainer);
kieScanner.start(1000l);
{code}
After this following exception is raised:
{code}
Exception in thread ""Timer-0"" java.lang.RuntimeException: Unable to load dialect 'org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration:java:org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration'
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.addDialect(KnowledgeBuilderConfigurationImpl.java:394)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.buildDialectConfigurationMap(KnowledgeBuilderConfigurationImpl.java:380)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.init(KnowledgeBuilderConfigurationImpl.java:235)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.init(KnowledgeBuilderConfigurationImpl.java:187)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.<init>(KnowledgeBuilderConfigurationImpl.java:155)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.getBuilderConfiguration(AbstractKieProject.java:302)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.createKnowledgeBuilder(AbstractKieProject.java:288)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:213)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:75)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:271)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieModule(KieBuilderImpl.java:264)
	at org.drools.compiler.kie.builder.impl.InternalKieModule.build(InternalKieModule.java:120)
	at org.kie.scanner.KieRepositoryScannerImpl.updateKieModule(KieRepositoryScannerImpl.java:200)
	at org.kie.scanner.KieRepositoryScannerImpl.internalUpdate(KieRepositoryScannerImpl.java:185)
	at org.kie.scanner.KieRepositoryScannerImpl.internalUpdate(KieRepositoryScannerImpl.java:55)
	at org.drools.compiler.kie.builder.impl.AbstractKieScanner.scanNow(AbstractKieScanner.java:147)
	at org.drools.compiler.kie.builder.impl.AbstractKieScanner$ScanTask.run(AbstractKieScanner.java:127)
	at java.util.TimerThread.mainLoop(Timer.java:555)
	at java.util.TimerThread.run(Timer.java:505)
Caused by: java.lang.RuntimeException: The Eclipse JDT Core jar is not in the classpath
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.setCompiler(JavaDialectConfiguration.java:117)
	at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.init(JavaDialectConfiguration.java:78)
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.addDialect(KnowledgeBuilderConfigurationImpl.java:390)
	... 18 more
{code}
I guess reason is that scanner is not using ClassLoader from KieContainer. Of course it will be better to fix reason why 'The Eclipse JDT Core jar is not in the classpath' is raised anyway because I'm using just standard Spring Web project with two Spring contexts (application and Web) what is very standard approach. Compiler IS awailable on classpath only Drools classloader doesn't see it.",Major,Mario Fusco,,2019-10-21T09:23:46.000-0400,Scanner is not using container ClassLoader,Resolved,bug,Bug
2019-11-11T09:26:17.000-0500,DROOLS-4717,Done,Using Double.valueOf(1) works in RHS but not in LHS. The executable model is not able to parse the expression and allow the promotion fo the int into a double.,Major,Mario Fusco,,2019-10-31T09:06:10.000-0400,int value don't get promoted to double when necessary to invoke a method in LHS with executable model,Resolved,bug,Bug
2019-11-11T06:36:39.000-0500,DROOLS-4737,Done,Push and pop expressions on context's stack are not paired correctly when processing an inline accumulate thus leading to code generation problem in the executable model when parsing a second pattern following the accumulate itself.,Major,Mario Fusco,,2019-11-11T04:33:02.000-0500,Inline accumulate with more than one variable follwed by another pattern doesn't work in executable model,Resolved,bug,Bug
2019-11-04T10:42:54.000-0500,DROOLS-4712,Out of Date,"This issue is caused by DROOLS-4484
When user drag and drop a data type entry  and context menu was shown before, the context menu remains shown. It should be either closed or moved to proper location.",Optional,Guilherme Gomes,,2019-10-31T03:34:30.000-0400,[DMN Designer] Context menu remains shown after drag and drop,Closed,bug,Bug
2019-11-04T12:49:24.000-0500,DROOLS-4710,Duplicate Issue,"This issue is caused by DROOLS-4484
When user drags a data type entry outside of the drag area the data type entry is lost. See the video.",Major,Guilherme Gomes,,2019-10-31T03:29:08.000-0400,[DMN Designer] User is able to drag data type entry out of drag area and lost it,Closed,bug,Bug
2019-10-29T11:43:20.000-0400,DROOLS-4702,Duplicate Issue,"The search is not working in expression grids.

[Source|https://github.com/kiegroup/kie-wb-common/pull/2973#discussion_r339945821].",Major,Guilherme Gomes,,2019-10-29T09:26:22.000-0400,[DMN Designer] The search is not working in grids,Resolved,bug,Bug
2019-10-29T13:25:04.000-0400,DROOLS-4705,Done,"We're upgrading our business-central server from 7.23.0 to 7.28.0. We're noticing that our kie-servers can no longer connect via websocket to business-central:

Server logs:
{quote}
Oct 28 12:56:43 business-central-1 business-central[18870]: #033[0m#033[0m12:56:43,962 INFO  [org.kie.server.controller.websocket.notification.WebSocketNotificationService] (Thread-123) WebSocket notify on updated :: Updated server template{serverTemplate=ServerTemplateKey{id='host.subdomain.x.com', name='host.subdomain.x.com'}, resetBeforeUpdate=false}
Oct 28 12:56:43 business-central-1 business-central[18870]: #033[0m#033[0m12:56:43,963 INFO  [org.kie.server.controller.websocket.notification.WebSocketNotificationService] (Thread-123) WebSocket notify on instance disconnected :: ServerInstanceDisconnected{serverInstanceId='host.subdomain.x.com@host.subdomain.x.com:36204'}
{quote}

Client logs:
{quote}
Oct 28 20:21:53 host kie-server[1375]: #033[0m#033[33m20:21:53,090 WARN  [org.kie.server.common.KeyStoreHelperUtil] (KieServer-ControllerConnect) Unable to load key store. Using password from configuration
Oct 28 20:21:53 host kie-server[1375]: #033[0m#033[33m20:21:53,146 WARN  [org.kie.server.controller.websocket.client.WebSocketKieServerControllerImpl] (KieServer-ControllerConnect) Exception encountered while syncing with controller at wss://business-central-1.x.com/business-central/websocket/controller/host.subdomain.x.com error Invalid response code 403
{quote}

The actual break occurred between 7.23.0 and 7.24.0, as 7.24.0 produces the same error message: Invalid response code 403.

The user that kie-server is connecting to business-central with has kie-server as a group, but that doesn't seem to help. We're running business-central on Wildfly 14.0.1.

I'm looking through the commits for a web.xml change for filtering web reources but can't seem to find anything. Actually, I'm not even sure which github project I should be looking in: https://github.com/kiegroup

tcpdump from 7.24.0+ versions(none worked):
{quote}
GET /business-central/websocket/controller/apps-3-staging HTTP/1.1
Authorization: Basic <base64-stuff-here>
Sec-WebSocket-Key: YZ5r8liCJKut6VJ2YG7sPQ==
Connection: upgrade
Sec-WebSocket-Version: 13
Upgrade: websocket
Host: localhost:8080

HTTP/1.1 403 Forbidden
Expires: 0
Cache-Control: no-cache, no-store, must-revalidate
X-Powered-By: JSP/2.3
Set-Cookie: JSESSIONID=cBz0q1sK09Fq2jtXA8Mad1FHPKxvQ38akKGNMP9R.business-central-1; path=/business-central; HttpOnly; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:00 GMT
Pragma: no-cache
Date: Mon, 28 Oct 2019 18:23:21 GMT
Connection: keep-alive
Content-Type: text/html;charset=UTF-8
Content-Length: 1102
Content-Language: en-
{quote}

tcpdump from 7.23.0 version(which works):
{quote}
GET /business-central/websocket/controller/apps-3-staging HTTP/1.1
Authorization: Basic <base64-stuff-here>
Sec-WebSocket-Key: yhykxYXh0z+KF0Zv/8P76g==
Connection: upgrade
Sec-WebSocket-Version: 13
Host: localhost:8080
Upgrade: websocket

HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Set-Cookie: JSESSIONID=UCZsXbdV1ZUjTBTOcbP9j-ppd3y2NH0mzOqPQcjP.business-central; path=/business-central; HttpOnly
Sec-WebSocket-Location: wss://business-central-1/business-central/websocket/controller/apps-3-staging
X-XSS-Protection: 1; mode=block
Upgrade: WebSocket
X-FRAME-OPTIONS: SAMEORIGIN
Sec-WebSocket-Accept: 6qSH/TZNvoukpIE+ZJYulWzGge0=
Date: Mon, 28 Oct 2019 17:21:57 GMT
{quote}",Major,Maciej Swiderski,,2019-10-29T12:52:39.000-0400,Drools/Kie-Server/Busines-Central 7.28.0 Is getting a 403 when kie-server accesses the websocket controller on business-central,Closed,bug,Bug
2019-10-24T09:09:02.000-0400,DROOLS-4650,Done,The equals and hashcode implementations do not return equal results for BRL columns or equals expects the objects to be the same instance.,Major,Toni Rikkola,,2019-10-16T03:29:39.000-0400,GDST: Re-editing BRL columns causes NPE,Resolved,bug,Bug
2019-10-25T07:46:12.000-0400,DROOLS-4569,Done,"It is impossible to save metadata changes without a Save button. You can however update the XLS file by uploading it each time.

h2. Manual acceptance test
Save metadata of:
- Business Process  (/)
- Business process legacy (x) no changes dialog
- Data Object (/)
- DT spreadsheet (/)
- Scorecard spreadsheet (/)
- Guided DT, Guided DT Graph (/)
- DMN (/)
- DRL,  Guided Rule Template, Guided Rule (/)
- DSL (/)
- Enum (/)
- Form (x)  !form-load-fail.png|thumbnail!  [^form-load.log] 
- Global variable (/)
- Guided Decision Tree (/)
- Guided Scorecard (/)
- Solver conf (/)
- Test Scenario, Test Scenario Legacy (/)
- Work Item Definition (/)
- Case Definition Legacy (x) - no changes dialog
- Other - png,svg (/)
- Plain text - pom.xml (/)",Major,Toni Rikkola,,2019-09-26T11:36:14.000-0400,XLS editor should have a save button,Resolved,bug,Bug
2019-10-24T12:43:41.000-0400,DROOLS-4660,Done,"Migrating a project from Drools 6.5.x to 7.x. Issue with STREAM mode, expired events and instanceof. This was not the case with the last 6.5 version.",Major,Mario Fusco,,2019-10-17T11:58:31.000-0400,"Issue with STREAM mode, expired events and instanceof",Resolved,bug,Bug
2019-10-25T11:58:05.000-0400,DROOLS-4508,Done,Incremental compilation doesn't work properly when there is a changed Java class in the kjar. Simple project that reproduces the problem can be found here https://github.com/baldimir/incrcompexecmodel,Major,Luca Molteni,,2019-09-06T07:32:04.000-0400,Classloading issue during incremental compilation with executable model,Resolved,bug,Bug
2019-10-24T10:35:39.000-0400,DROOLS-4676,Done,"Unexpected error happen when user removes colons navigating by keys on it.  
{code}
{""ToSubject"":""org.drools.workbench.screens.scenariosimulation.service.ScenarioSimulationService:RPC.runScenario:org.uberfire.backend.vfs.Path:org.drools.scenariosimulation.api.model.SimulationDescriptor:java.util.List::119:RespondTo:RPC""} | Uncaught exception: Client-side exception occurred although RPC call succeeded. Caused by: Index: 11, Size: 11
{code}",Critical,Yeser Amer,,2019-10-23T13:05:08.000-0400,Scenario run failed when user deletes columns,Resolved,bug,Bug
2019-10-24T11:14:56.000-0400,DROOLS-4679,Done,Fix proper invocation for FEEL list contains() built-in function when invoked from DMN layer for a list containing FEEL number(s).,Major,Matteo Mortari,,2019-10-24T05:07:08.000-0400,DMN FEEL list contains() invocation from DMN layer fixes,Resolved,bug,Bug
2019-10-24T08:05:19.000-0400,DROOLS-4658,Done,"A rule containing the following constraint:

{noformat}
  when
  $customer : Customer( code == ""RHT"" )
  $max1 : Number() from accumulate(
    StockTick( company == $customer.code
    , $time : dueDate);
    max($time.getTime().getTime()))
{noformat}

fails with a ClassCastException when building with the executable model:

{noformat}
java.lang.ClassCastException: com.github.javaparser.ast.expr.NameExpr cannot be cast to com.github.javaparser.ast.expr.LambdaExpr
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitorPatternDSL.lambda$composeTwoBindings$4(AccumulateVisitorPatternDSL.java:67)
	at java.util.Optional.ifPresent(Optional.java:159)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitorPatternDSL.composeTwoBindings(AccumulateVisitorPatternDSL.java:64)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitorPatternDSL.lambda$null$1(AccumulateVisitorPatternDSL.java:53)
	at java.util.Optional.ifPresent(Optional.java:159)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitorPatternDSL.lambda$processNewBinding$3(AccumulateVisitorPatternDSL.java:53)
	at java.util.Optional.ifPresent(Optional.java:159)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitorPatternDSL.processNewBinding(AccumulateVisitorPatternDSL.java:44)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.classicAccumulate(AccumulateVisitor.java:129)
	at org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.visit(AccumulateVisitor.java:107)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:122)
	at org.drools.compiler.lang.descr.PatternDescr.accept(PatternDescr.java:272)
	at org.drools.modelcompiler.builder.generator.visitor.AndVisitor.visit(AndVisitor.java:29)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:69)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.processRule(ModelGenerator.java:176)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.generateModel(ModelGenerator.java:156)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.compileKnowledgePackages(ModelBuilderImpl.java:176)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildRules(ModelBuilderImpl.java:121)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildPackages(ModelBuilderImpl.java:71)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:108)
{noformat}",Major,Luca Molteni,,2019-10-17T11:23:07.000-0400,Executable model compilation fails with ClassCastException when using accumulate and additional constraint,Resolved,bug,Bug
2019-10-25T11:58:45.000-0400,DROOLS-4672,Done,"A rule with the following RHS fails to compile in the executable model:

{noformat}
$input.setNo12Count(functions.sumOf(new Object[]{$no1Count_1, $no2Count_1, $no3Count_1, $no4Count_1, $no5Count_1, $no6Count_1, $no7Count_1, $no8Count_1, $no9Count_1, $no10Count_1, $no11Count_1}).intValue());
{noformat}

Failure:
{noformat}
   text=cannot find symbol
  symbol:   method execute((drools,$n[...]t); })
{noformat}

Compilation is successful if one of the input parameters (eg. {{$no11Count_1}}) is removed.",Major,Luca Molteni,,2019-10-21T16:48:59.000-0400,Executable model compilation fails with function call and large input array,Resolved,bug,Bug
2019-10-23T14:34:59.000-0400,DROOLS-4620,Done,"A rule containing the following accumulate constraint:

{noformat}
  when
  $max1 : Number() from accumulate(
    StockTick($time : dueDate);
    max($time.getTime().getTime()))

// object model:
public class StockTick {
...
    public Calendar getDueDate() {
        return dueDate;
    }
{noformat}

fails to compile:

{noformat}
  reason: varargs mismatch; inference variable A has incompatible bounds
      equality constraints: java.lang.Long
      lower bounds: java.util.Date], Message [id=3, level=ERROR, path=src/main/java/defaultpkg/RulesE50E409E17279CAE524E8EC1D671D39BRuleMethods0.java, line=0, column=0
{noformat}
",Major,Luca Molteni,,2019-10-08T16:58:12.000-0400,Executable model compilation fails with 'inference variable A has incompatible bounds' when using accumulate,Resolved,bug,Bug
2019-10-24T03:53:31.000-0400,DROOLS-4656,Done,"Migrating a project from Drools 6.5.x to 7.x. Issue with rules sharing same constraint involving expired events and mvel. This was not the case with the last 6.5 version.
",Major,Mario Fusco,,2019-10-17T11:07:35.000-0400,Issue with rules sharing same constraint involving expired events and mvel,Resolved,bug,Bug
2019-10-23T03:33:57.000-0400,DROOLS-4539,Done,"h2. Acceptance criteria
- Date equal to (/)
- Date not equal to (/)
- LocalDate equal to (/)
- LocalDate not equal to (/)
- Save and reopen rule with local date (/)",Major,Toni Rikkola,,2019-09-17T05:43:35.000-0400,Legacy Test Scenario is failing when using java.time.LocalDate type field in expect part.,Resolved,bug,Bug
2019-10-22T10:46:19.000-0400,DROOLS-4513,Done,"If multiple ksession are defined in kmodule.xml and Event Lister is set more than one ksession, s2i build fails at KieServerContainerVerifier with the following error.

{noformat}
[main] ERROR org.kie.server.services.impl.KieServerContainerVerifier - Cannot find KieModule: com.redhat.gss:ruleTest:1.0.0-SNAPSHOT
java.lang.RuntimeException: Cannot find KieModule: com.redhat.gss:ruleTest:1.0.0-SNAPSHOT
        at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:186)
        at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:172)
        at org.kie.server.services.impl.KieServerContainerVerifier.verify(KieServerContainerVerifier.java:65)
        at org.kie.server.services.impl.KieServerContainerVerifier.verify(KieServerContainerVerifier.java:53)
        at org.kie.server.services.impl.KieServerContainerVerifier.verify(KieServerContainerVerifier.java:40)
        at org.kie.server.services.impl.KieServerContainerVerifier.main(KieServerContainerVerifier.java:119)
        at org.kie.server.services.impl.KieServerContainerVerifier.main(KieServerContainerVerifier.java:101)
        at org.jboss.modules.Module.run(Module.java:352)
        at org.jboss.modules.Module.run(Module.java:320)
        at org.jboss.modules.Main.main(Main.java:593)
[main] ERROR org.kie.server.services.impl.KieServerContainerVerifier - com.redhat.gss:ruleTest:1.0.0-SNAPSHOT not verified.
ERROR Aborting due to error code 1 from kie server container verification
{noformat}
",Major,Filippe Spolti,,2019-09-09T09:23:58.000-0400,s2i build fails at KieServerContainerVerifier without appropriate logging when kmodule.xml schema validation fails,Resolved,bug,Bug
2019-10-22T06:50:52.000-0400,DROOLS-4599,Done,The _drop down_ component of the Hit Policy _select_ component remains visible if the popover is dismissed by clicking elsewhere (outside the popover).,Major,Guilherme Gomes,,2019-10-02T17:34:32.000-0400,[DMN Designer] Decision Tables: Hit Policy select drop-down remains visible if popover closed,Resolved,bug,Bug
2019-10-21T12:50:18.000-0400,DROOLS-4667,Explained,"Depending on the facts being verified, the test produces the following errors:
* ArrayIndexOutOfBoundsException;
* ClassCastException;
* double rule execution.

if you replace ""A or B"" with ""!(!A and !B)"" than all tests pass successfully.

{code:none}
java.lang.RuntimeException: java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2

	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:114)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:709)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:168)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:581)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:552)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:379)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:237)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:180)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:133)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1101)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1048)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1040)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at org.drools.compiler.integrationtests.ConditionOrTest.doTest0(ConditionOrTest.java:288)
	at org.drools.compiler.integrationtests.ConditionOrTest.doTest(ConditionOrTest.java:268)
	at org.drools.compiler.integrationtests.ConditionOrTest.test_1_01_00(ConditionOrTest.java:123)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.lang.ArrayIndexOutOfBoundsException: Index 2 out of bounds for length 2
	at org.drools.core.base.mvel.MVELCompilationUnit.updateFactory(MVELCompilationUnit.java:406)
	at org.drools.core.base.mvel.MVELCompilationUnit.getFactory(MVELCompilationUnit.java:324)
	at org.drools.core.base.accumulators.MVELAccumulatorFunctionExecutor.accumulate(MVELAccumulatorFunctionExecutor.java:120)
	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:105)
	... 45 more
{code}

{code:none}
java.lang.RuntimeException: java.lang.ClassCastException: class org.drools.compiler.integrationtests.ConditionOrTest$Dog cannot be cast to class [Ljava.lang.Object; (org.drools.compiler.integrationtests.ConditionOrTest$Dog is in unnamed module of loader 'app'; [Ljava.lang.Object; is in module java.base of loader 'bootstrap')

	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:114)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:709)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:168)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:581)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:552)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:379)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:237)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:180)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:133)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1101)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1048)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1040)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at org.drools.compiler.integrationtests.ConditionOrTest.doTest0(ConditionOrTest.java:288)
	at org.drools.compiler.integrationtests.ConditionOrTest.doTest(ConditionOrTest.java:268)
	at org.drools.compiler.integrationtests.ConditionOrTest.test_1_10_00(ConditionOrTest.java:143)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.lang.ClassCastException: class org.drools.compiler.integrationtests.ConditionOrTest$Dog cannot be cast to class [Ljava.lang.Object; (org.drools.compiler.integrationtests.ConditionOrTest$Dog is in unnamed module of loader 'app'; [Ljava.lang.Object; is in module java.base of loader 'bootstrap')
	at org.drools.core.base.extractors.ArrayElementReader.getValue(ArrayElementReader.java:162)
	at org.drools.core.rule.Declaration.getValue(Declaration.java:222)
	at org.drools.core.base.mvel.MVELCompilationUnit.updateFactory(MVELCompilationUnit.java:405)
	at org.drools.core.base.mvel.MVELCompilationUnit.getFactory(MVELCompilationUnit.java:324)
	at org.drools.core.base.accumulators.MVELAccumulatorFunctionExecutor.accumulate(MVELAccumulatorFunctionExecutor.java:120)
	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:105)
	... 45 more
{code}
",Major,Mario Fusco,,2019-10-21T04:43:32.000-0400,Exception while processing 'or' condition,Resolved,bug,Bug
2019-10-21T07:45:27.000-0400,DROOLS-4666,Done,DroolsMvelParserTest.testModifyLambda fails on Windows because there is an assert that doesn't use OS independent line separator. ,Major,Tibor Zimanyi,,2019-10-21T04:26:26.000-0400,DroolsMvelParserTest.testModifyLambda fails on Windows,Resolved,bug,Bug
2019-10-21T13:20:12.000-0400,DROOLS-3460,Done,"Filtering the facts in the GetObjectsCommand doesn't do any object filtering!.

Here are the two code pieces that were used to set the ObjectFilter into GetObjectsCommand, but didn't produce the expected filtered results. 

*+Trial 1:+*

{code:java}
ObjectFilter filter = new ObjectFilter() {
			@Override
			public boolean accept(Object object) {
				return object.getClass().getName().equals(""a.b.c.PotentialFraudFact"");
			}
		};

		Command<?> getObjects = commandsFactory.newGetObjects(filter, ""out"");

{code}

*+Trial 2:+*
		
{code:java}
ClassObjectSerializationFilter filter = new ClassObjectSerializationFilter(PotentialFraudFact.class);
		Command<?> getObjects = commandsFactory.newGetObjects(filter, ""out"");

{code}

In the response, the ""out"" identifier has *all* facts, not just the ones matching the given filter.  It's as if it ignores the filter.  Also, no error messages appear in the console. 

When a ClassObjectFilter is used instead of the aforementioned implementations, a ClassNotFoundException (_shown below_) for the a.b.c.PotentialFraudFact.class occurs.  This is incorrect as the deployed container/KJAR has this class!.
	
{code:java}
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.ClassNotFoundException: a.b.c.PotentialFraudFact from [Module ""deployment.kie-server.war"" from Service Module Loader]
	at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:412)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:400)
	at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:264)
	at org.drools.core.ClassObjectSerializationFilter.accept(ClassObjectSerializationFilter.java:50)
	... 73 more

{code}

The issue is with this line https://github.com/kiegroup/drools/blob/4c6856223b8be47b4fc52c35423be8b50e46b501/drools-core/src/main/java/org/drools/core/ClassObjectSerializationFilter.java#L50 where the class loader used to find the class couldn't find the class that corresponds to the given Fact. ",Major,Mario Fusco,,2018-12-27T04:34:45.000-0500,KIE Server REST Command GetObjects with ObjectFilter not working,Resolved,bug,Bug
2019-10-18T02:48:48.000-0400,DROOLS-4601,Done,"In guided rules, if you create a rule with a comma separated list, quotes are automatically added to the text box when saving the rule. If you then need to edit the values, quotes are again added, which results in escape characters in the source code making the rule no longer work",Major,Toni Rikkola,,2019-10-03T14:39:02.000-0400,Escape characters added to code after editing comma separated list in guided rule editor,Resolved,bug,Bug
2019-10-17T04:27:06.000-0400,DROOLS-4545,Done,"Problem: If the project does not compile, you can edit the table, but editing fires errors in the Verifier Webworker. This is because the Verifier needs a project that compiles and creates a valid DMO.

The fix will be to shutdown the Verifier when an error happens. The fix will not care what the error was, since usually it the errors are caused by missing or corrupt data and the verifier can not recover from this anyway.",Major,Toni Rikkola,,2019-09-18T09:39:47.000-0400,GDST V&V: Clean up situations where the webworker fails,Resolved,bug,Bug
2019-10-15T08:46:40.000-0400,DROOLS-4626,Done,"Migrating a project from Drools 6.5.x to 7.x, if we insert already expired events, they are not taken into account in the collect operation in the first fireAllRules. Expired event in STREAM mode are not taken into account when using collect operation. it seems not to be aligned with drools design requirement: ""Expired events does not cancel rule activations"". This was not the case with the last 6.5 version.
",Major,Mario Fusco,,2019-10-09T08:37:37.000-0400,Inserting already expired events are not taken into account in the collect operation in the first fireAllRules,Resolved,bug,Bug
2019-10-15T07:29:38.000-0400,DROOLS-4638,Done,"A user without write permission is able to make changes in test scenario assets via settings

Check the code ScenarioEditorPresenter#makeMenuBar in drools-wb. The save button in the menu bar is only added if the user can update the project. Similarly, it should be done for the save button in the settings dock as well.",Critical,Gabriele Cardosi,,2019-10-10T14:13:39.000-0400,A user without write permission is able to make changes in test scenario assets via settings,Resolved,bug,Bug
2019-10-14T06:49:48.000-0400,DROOLS-4250,Done,Raise better errors when parsing OOPath and refactor some type-handling ,Major,Edoardo Vacchi,,2019-06-25T06:42:53.000-0400,Improve data source type resolving in OOPath,Resolved,bug,Bug
2019-10-14T07:17:45.000-0400,DROOLS-4602,Done,"When we build 2 kjars and one kbase ""includes"" another, kie-maven-plugin fails to resolve the sub kbase if the dependency version is declared in a common bom:

{noformat}
Running test with rules version 7.27.0.Final and -DgenerateModel=NO
13:01:05,903 [ERROR] Unable to build KieBase, could not find include: subkbase
13:01:05,908 [ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.27.0.Final:build (default-build) on project kbase-parent: Execution default-build of goal org.kie:kie-maven-plugin:7.27.0.Final:build failed: Unable to get KieModule, Errors Existed: Error Messages:
13:01:05,910 [ERROR] Message [id=1, kieBase=parentkbase, level=ERROR, path=src/main/resources/META-INF/kmodule.xml, line=0, column=0
13:01:05,911 [ERROR]    text=Unable to build KieBase, could not find include: subkbase]
{noformat}

Note that such a build is successful with RHDM 7.3.1 if the executable model is *not* used (see reproducer).",Major,Tibor Zimanyi,,2019-10-03T15:06:12.000-0400,kie-maven-plugin fails with nested kbases and dependency versions declared in bom,Resolved,bug,Bug
2019-10-14T04:53:02.000-0400,DROOLS-3923,Out of Date,"we are currently doing {{ try { Class.forName(""...ApplicationScoped"") } }} which is 
(1) pretty hackish (2) won't work in Maven because maven's ClassPath is not the same of the target application

We should rather use a config param or any better way to detect if we're going to use DI. Currently we have added a config param + ""auto detect"" using the technique above (in maven only the config param works) but auto-detect should be better.

Besides ApplicationScoped only work for CDI, while JSR-330 @Inject is independent from CDI so using ApplicationScoped as a signal is too limited.

",Major,Edoardo Vacchi,,2019-04-19T04:31:48.000-0400,(C)DI detection should be more reliable/standard for codegen,Closed,bug,Bug
2019-10-10T11:57:35.000-0400,DROOLS-4627,Done,Wrong parameter name reported in message (type of message is correct),Major,Matteo Mortari,,2019-10-09T08:38:52.000-0400,DMN DS invocation message for parameter name coercion,Resolved,bug,Bug
2019-10-11T07:39:54.000-0400,DROOLS-4551,Won't Fix,"If condition contains '(' and ')' separately as different value in value cell, build fails with error like:

{noformat}
[main] ERROR Unable to build KieBaseModel:dtables
Unable to Analyse Expression $2:
[Error: unable to resolve method using strict-mode: com.sample.Message.$2()]
[Near : {... $2 ....}]
             ^
[Line: 6, Column: 2] : [Rule name='HelloWorld_11']
{noformat}

This worked with 7.18.0.Final-redhat-00004 (RHDM7.4.1),  but fails with 7.25.0.Final or 7.26.0.Final.

Condition in DRL generated by spreadsheet compiler are different per these version.

- 7.25.0.Final/7.26.0.Final

{noformat}
		m:Message(status in (Message.HELLO), errorMessage in (""Hello"", ""Hi""), $2)
{noformat}

- 7.24.0.Final/7.18.0.Final

{noformat}
		m:Message(status in (Message.HELLO), errorMessage in (""Hello"",  ""Hi""))
{noformat}
",Major,Luca Molteni,,2019-09-19T10:13:20.000-0400,Build fails when condition in spreadsheet contains '(' and ')' separately as a value,Resolved,bug,Bug
2019-10-11T16:12:24.000-0400,DROOLS-4628,Done,None,Major,Massimiliano Dessi,,2019-10-09T09:06:13.000-0400,[Drools-4628] Fix PodAsALeaderSnapshotTest random failure,Resolved,bug,Bug
2019-10-07T05:43:43.000-0400,DROOLS-4542,Done,"The following expression on update of Map in RHS causes an error when building executable model.

* Pattern1
{noformat}
              m.mapVal[""rule1""] = ""value1"";
{noformat}

* Error1 (NPE)

{noformat}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.24.0.Final:generateModel (default-generateModel) on project build-error: Execution default-generateModel of goal org.kie:kie-maven-plugin:7.24.0.Final:generateModel failed.: NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.kie:kie-maven-plugin:7.24.0.Final:generateModel (default-generateModel) on project build-error: Execution default-generateModel of goal org.kie:kie-maven-plugin:7.24.0.Final:generateModel failed.
{noformat}

or

* Pattern2
{noformat}
              m.getMapVal().put( ""rule2"", ""value2"" );
{noformat}

* Error2

{noformat}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.24.0.Final:generateModel (default-generateModel) on project build-error: A type incompatibility occurred while executing org.kie:kie-maven-plugin:7.24.0.Final:generateModel: sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl cannot be cast to java.lang.Class
{noformat}

This does not happen with 7.23.0.Final.",Major,Luca Molteni,,2019-09-17T23:44:27.000-0400,Executable model compilation fails with map modification in action,Resolved,bug,Bug
2019-10-07T05:43:52.000-0400,DROOLS-4558,Done,"When a pattern has multiple lines, executable-model doesn't fully parse its conditions.
{noformat}
rule R1 when
  $p : Person(age == 30
  || employed == true)
then
end
{noformat}
 Looking at the generated Java code, only the first line is parsed. 

It doesn't have a problem in 7.23.0.Final so it seems to be a regression after that.",Major,Luca Molteni,,2019-09-23T23:06:26.000-0400,executable-model doesn't fully parse multi-line pattern ,Resolved,bug,Bug
2019-10-07T05:43:36.000-0400,DROOLS-4534,Done,"A rule containing the following accumulate constraint:

{noformat}
  $max1 : Number() from accumulate(
    StockTick($time : getTimeFieldAsDate());
    max($time.getTime()))
{noformat}

is successfully compiled using the executable model, but fails at runtime:

{noformat}
java.lang.RuntimeException: java.lang.ClassCastException: java.util.Date cannot be cast to java.lang.Long
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:105)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:750)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:168)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:581)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:552)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:379)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:339)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:175)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:133)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1062)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1009)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1001)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at org.drools.modelcompiler.CompilerTest.testAccumulateWithMax(CompilerTest.java:2006)
{noformat}",Major,Luca Molteni,,2019-09-15T15:15:42.000-0400,ClassCastException using accumulate max in executable model,Resolved,bug,Bug
2019-10-07T08:23:32.000-0400,DROOLS-4573,Done,"If you select a spanned cell, only the subcell which belongs to the selected column is marked as selected",Major,Yeser Amer,,2019-09-27T09:23:23.000-0400,Cell selection doesn't span the entire cell,Resolved,bug,Bug
2019-10-07T06:07:09.000-0400,DROOLS-4604,Done,"The Drools _query_ code generated by the test method below is not including the query parameter ({{String eventId}}) specified via {{PackageDescrBuilder}}.

Note that parameters to Drools _functions_ constructed through the same process are correctly included. See _org.drools.compiler.lang.api.DescrBuilderTest#testFunctions_.
 
h3. Generated code
{code:java}
package org.test.rules 

import org.test.event.TemporalEvent

query ""getTemporalEventById""
    TemporalEvent( id == eventId ) from entry-point ""TemporalEventStream"" 
end
{code}

h3. Test
{code:java}
    @Test
    public void testFluentQuery() {
        PackageDescrBuilder packBuilder =
                DescrFactory.newPackage()
                        .name(""org.test.rules"")
                        .newImport()
                            .target(""org.test.event.TemporalEvent"")
                            .end()
                        .newQuery()
                            .name(""getTemporalEventById"")
                            .parameter(""String"", ""eventId"")
                            .lhs()
                                .pattern( ""TemporalEvent"")
                                    .constraint(""id == eventId"")
                                    .from()
                                        .entryPoint(""EventStream"")
                                .end()
                            .end()
                        .end()
                    .end();

        String query = new DrlDumper().dump(packBuilder.getDescr());
        System.out.println(query);
    }
{code}
",Minor,Mario Fusco,,2019-10-04T11:32:55.000-0400,Query code generation neglects query parameter(s),Resolved,bug,Bug
2019-10-07T05:43:59.000-0400,DROOLS-4560,Done,"executable-model wrongly calculates in eval with parenthesis.

For example, with this rule,
{noformat}
import org.drools.modelcompiler.domain.CalcFact;rule R when
  $p : CalcFact( $v1 : value1, $v2 : value2 )
  eval( ($v1 / ($v2 * 10) * 10) > 25 )
then
end
{noformat}

if $v1 = 1 and $v2 = 1, ($v1 / ($v2 * 10) * 10) is 1. So the rule should not fire.

However, executable-model generates Java code:
{code:java}
public class Rules4A265EF484FEEE0E4E84E77B3DEB48F9RuleMethods0 {

    /**
     * Rule name: R
     */
    public static org.drools.model.Rule rule_R() {
        final org.drools.model.Variable<org.drools.modelcompiler.domain.CalcFact> var_$p = D.declarationOf(org.drools.modelcompiler.domain.CalcFact.class,
                                                                                                           ""$p"");
        final org.drools.model.Variable<Double> var_$v1 = D.declarationOf(Double.class,
                                                                          ""$v1"");
        final org.drools.model.Variable<Double> var_$v2 = D.declarationOf(Double.class,
                                                                          ""$v2"");
        org.drools.model.Rule rule = D.rule(""R"").build(D.bind(var_$v1).as(var_$p,
                                                                          (_this) -> _this.getValue1()).reactOn(""value1""),
                                                       D.bind(var_$v2).as(var_$p,
                                                                          (_this) -> _this.getValue2()).reactOn(""value2""),
                                                       D.expr(""454A1C822808AC7491268E4F381F0EDA"",
                                                              var_$v1,
                                                              var_$v2,
                                                              ($v1, $v2) -> org.drools.modelcompiler.util.EvaluationUtil.greaterThanNumbers($v1 / $v2 * 10 * 10,
                                                                                                                                            25d)),
                                                       D.execute(() -> {
                                                       }));
        return rule;
    }
}
{code}

See that parentheses are removed so ($v1 / $v2 * 10 * 10) becomes 100.
",Major,Luca Molteni,,2019-09-24T03:52:56.000-0400,executable-model wrongly calculates in eval with parenthesis,Resolved,bug,Bug
2019-10-07T03:27:54.000-0400,DROOLS-4371,Done,"09:26:43 [ERROR] Incorrect lazy initialization and update of static field org.kie.hacep.Config.config in org.kie.hacep.Config.getStatic() [org.kie.hacep.Config] At Config.java:[lines 99-100] LI_LAZY_INIT_UPDATE_STATIC
09:26:43 [ERROR] Integer is incompatible with expected argument type org.apache.kafka.common.TopicPartition in org.kie.hacep.core.infra.DeafultSessionSnapShooter.configConsumer() [org.kie.hacep.core.infra.DeafultSessionSnapShooter] At DeafultSessionSnapShooter.java:[line 121] GC_UNRELATED_TYPES

These two types are different so this will never succeed {{partitions.contains(partition.partition())}}
Please fix and remove duplication too
https://github.com/kiegroup/openshift-drools-hacep/blob/2ac305ab2ccc5d2cae9a257eec84730c2e2c1879/hacep/src/main/java/org/kie/hacep/core/infra/consumer/DefaultKafkaConsumer.java#L163
https://github.com/kiegroup/openshift-drools-hacep/blob/2ac305ab2ccc5d2cae9a257eec84730c2e2c1879/hacep/src/main/java/org/kie/hacep/core/infra/consumer/DefaultKafkaConsumer.java#L163",Major,Massimiliano Dessi,,2019-07-26T10:23:29.000-0400,HACEP: Fix issue reported by findbugs,Resolved,bug,Bug
2019-10-02T08:13:36.000-0400,DROOLS-4572,Done,"Under the conditions:

- executable-model
- ""drools.propertySpecific"" = ""ALLOWED""
- A fact which has more than 128 properties
- A rule with ""not"" which joins facts

""not"" doesn't match so the rule results in an unexpected firing (e.g. an infinite loop)",Major,Mario Fusco,,2019-09-27T05:21:12.000-0400,"a fact with many properties causes a problem with ""not"" rule in executable-model",Resolved,bug,Bug
2019-10-01T12:18:27.000-0400,DROOLS-4571,Done,"In Scenario Test, it is currently possibile to set an empty label as Instance name or property name. This should be forbidden.",Major,Yeser Amer,,2019-09-27T02:31:19.000-0400,It's possible to set an empty title header,Resolved,bug,Bug
2019-10-01T08:40:31.000-0400,DROOLS-4580,Done,"Building a rule base where two rules have identical constraints fails with a ClassCastException:

{noformat}
java.lang.ClassCastException: org.drools.core.rule.constraint.EvaluatorConstraint cannot be cast to org.drools.core.rule.constraint.MvelConstraint
	at org.drools.core.reteoo.builder.BuildUtils.mergeNodes(BuildUtils.java:176)
	at org.drools.core.reteoo.builder.BuildUtils.attachNode(BuildUtils.java:152)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.buildJoinNode(GroupElementBuilder.java:143)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:110)
	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:167)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:139)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddRule(KnowledgeBaseImpl.java:1523)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:913)
	at org.drools.core.impl.KnowledgeBaseImpl.lambda$addPackages$2(KnowledgeBaseImpl.java:715)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:732)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:715)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.createKieBase(AbstractKieModule.java:215)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:406)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieBase(KieContainerImpl.java:396)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieBase(KieContainerImpl.java:391)
	at org.kie.internal.utils.KieHelper.build(KieHelper.java:80)
	at org.drools.compiler.integrationtests.ExpirationTest.testEventSameContraint(ExpirationTest.java:595)
{noformat}",Major,Mario Fusco,,2019-09-30T13:27:33.000-0400,ClassCastException at BuildUtils.mergeNodes with two rules having identical constraints,Resolved,bug,Bug
2019-09-30T09:15:51.000-0400,DROOLS-4477,Done,"When a decision service is deleted in the model, all associated decisions are deleted with it. The inner nodes shouldn't be deleted.

DMN Spec: “Decision services are defined as overlays and therefore do not encapsulate the decisions within them.“ (section 6.2.5, p44)

h3. Manual acceptance test
- Edges crossing ds (/)
- Edges outgoing from ds (/)
- Edges incoming to ds (/)",Major,Daniel José dos Santos,,2019-08-26T15:48:53.000-0400,[DMN Designer] Decision Services - When a decision service is deleted all associated decisions are also deleted,Resolved,bug,Bug
2019-09-30T09:15:44.000-0400,DROOLS-4479,Done,"The Automatic Layout feature does not work with models imported to other vendors. See the demo:

 !2019-08-26 16.55.43.gif|width=800! ",Major,Daniel José dos Santos,,2019-08-26T16:08:45.000-0400,[DMN Designer] Automatic Layout - The Automatic Layout feature does not work with models imported to other vendors,Resolved,bug,Bug
2019-09-30T08:39:57.000-0400,DROOLS-4486,Cannot Reproduce,"Building a project in business-central which contains a DMN file from the drools test codebase fails with the following exception:

{noformat}
07:48:29,886 ERROR [org.kie.dmn.backend.marshalling.v1x.XStreamMarshaller] (EJB default - 3) Error unmarshalling DMN model from reader.: com.thoughtworks.xstream.io.StreamException: 
	at org.kie.dmn.backend.marshalling.CustomStaxReader.pullNextEvent(CustomStaxReader.java:118)
	at com.thoughtworks.xstream.io.xml.AbstractPullReader.readRealEvent(AbstractPullReader.java:148)
	at com.thoughtworks.xstream.io.xml.AbstractPullReader.readEvent(AbstractPullReader.java:141)
	at com.thoughtworks.xstream.io.xml.AbstractPullReader.move(AbstractPullReader.java:118)
	at com.thoughtworks.xstream.io.xml.AbstractPullReader.moveDown(AbstractPullReader.java:103)
	at org.kie.dmn.backend.marshalling.CustomStaxReader.moveDown(CustomStaxReader.java:97)
	at org.kie.dmn.backend.marshalling.CustomStaxReader.<init>(CustomStaxReader.java:31)
	at org.kie.dmn.backend.marshalling.v1x.XStreamMarshaller.inferDMNVersion(XStreamMarshaller.java:86)
	at org.kie.dmn.backend.marshalling.v1x.XStreamMarshaller.unmarshal(XStreamMarshaller.java:62)
	at org.kie.dmn.backend.marshalling.v1x.XStreamMarshaller.unmarshal(XStreamMarshaller.java:106)
	at org.kie.dmn.core.assembler.DMNAssemblerService.addResources(DMNAssemblerService.java:93)
	at org.kie.internal.services.KieAssemblersImpl.addResources(KieAssemblersImpl.java:60)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageForExternalType(KnowledgeBuilderImpl.java:813)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildOthers(CompositeKnowledgeBuilderImpl.java:161)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:113)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:100)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.buildChanges(KieBuilderSetImpl.java:152)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.build(KieBuilderSetImpl.java:94)
	at org.kie.workbench.common.services.backend.builder.core.Builder.buildIncrementally(Builder.java:533)
	at org.kie.workbench.common.services.backend.builder.core.Builder.addResource(Builder.java:354)
	at org.kie.workbench.common.services.backend.builder.core.Builder.addResource(Builder.java:320)
	at org.kie.workbench.common.services.backend.builder.core.Builder.updateResource(Builder.java:414)
	at org.kie.workbench.common.services.backend.builder.core.BuildHelper.updatePackageResource(BuildHelper.java:167)
	at org.kie.workbench.common.services.backend.builder.core.BuildHelper$Proxy$_$$_WeldClientProxy.updatePackageResource(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor.apply(LocalBuildExecConfigExecutor.java:70)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor.apply(LocalBuildExecConfigExecutor.java:32)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor$Proxy$_$$_WeldClientProxy.apply(Unknown Source)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.lambda$continuePipeline$0(PipelineExecutor.java:109)
	at org.guvnor.ala.pipeline.StageUtil$1.execute(StageUtil.java:38)
	at org.guvnor.ala.pipeline.StageUtil$1.execute(StageUtil.java:33)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.continuePipeline(PipelineExecutor.java:94)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.execute(PipelineExecutor.java:76)
	at org.kie.workbench.common.services.backend.builder.ala.BuildPipelineInvoker.invokeLocalBuildPipeLine(BuildPipelineInvoker.java:88)
	at org.kie.workbench.common.services.backend.builder.ala.BuildPipelineInvoker$Proxy$_$$_WeldClientProxy.invokeLocalBuildPipeLine(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper.invokeLocalBuildPipeLine(BuildServiceHelper.java:163)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper.localBuild(BuildServiceHelper.java:98)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper$Proxy$_$$_WeldClientProxy.localBuild(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl.buildIncrementally(BuildServiceImpl.java:136)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl.updatePackageResource(BuildServiceImpl.java:126)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl$Proxy$_$$_WeldClientProxy.updatePackageResource(Unknown Source)
	at org.guvnor.common.services.builder.ResourceChangeIncrementalBuilder$4.execute(ResourceChangeIncrementalBuilder.java:262)
	at org.guvnor.common.services.builder.IncrementalBuilderExecutorManager.execute(IncrementalBuilderExecutorManager.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:90)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:101)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInNoTx(CMTTxInterceptor.java:216)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.notSupported(CMTTxInterceptor.java:345)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:142)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.weld.module.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:81)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.ejb3.component.singleton.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:106)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)
	at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:619)
	at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LogDiagnosticContextRecoveryInterceptor.processInvocation(LogDiagnosticContextRecoveryInterceptor.java:82)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AsyncFutureInterceptorFactory$2$2.runInvocation(AsyncFutureInterceptorFactory.java:152)
	at org.jboss.as.ejb3.component.interceptors.AsyncInvocationTask.run(AsyncInvocationTask.java:81)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:485)
Caused by: com.ctc.wstx.exc.WstxParsingException: Duplicate default namespace declaration.
 at [row,col {unknown-source}]: [2,72]
	at com.ctc.wstx.sr.StreamScanner.constructWfcException(StreamScanner.java:621)
	at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:491)
	at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:475)
	at com.ctc.wstx.sr.BasicStreamReader.handleNsAttrs(BasicStreamReader.java:3140)
	at com.ctc.wstx.sr.BasicStreamReader.handleStartElem(BasicStreamReader.java:3043)
	at com.ctc.wstx.sr.BasicStreamReader.handleRootElem(BasicStreamReader.java:2179)
	at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2159)
	at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1181)
	at org.kie.dmn.backend.marshalling.CustomStaxReader.pullNextEvent(CustomStaxReader.java:102)
	... 108 more

{noformat}

Upon re-opening the DMN file it fails to render the file in the DMN editor, and the following changes to the original xml file can be observed:

a) new default xmlns attribute in definitions element has been added to the dmn file:
{{xmlns=""http://www.trisotech.com/definitions/_4e0f0b70-d31c-471c-bd52-5ca709ed362b""}}
b) ""tns:"" has been changed to ""tns."" ",Major,Guilherme Gomes,,2019-08-27T12:22:04.000-0400,Duplicate default namespace declaration exception after importing DMN file,Closed,bug,Bug
2019-09-30T06:08:49.000-0400,DROOLS-4579,Done,"In previous versions of Drools, the {{drools}} keyword gave access to the {{KnowledgeHelper}} instance, which allowed you to, for example, access the {{Match}} of a rule in the RHS.

In Kogito, the {{drools}} keyword gives access to {{org.drools.model.Drools}}, which does not provide a {{getMatch()}} method, and hence, the {{Match}} object is no longer accessible.

Compilation fails with the following exception:
{code}
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile-1) on project kogito-drools-keyword-rhs-reproducer: Compilation failure
[ERROR] /Users/ddoyle/Development/github/kogito-drools-keyword-rhs-reproducer/target/generated-sources/kogito/A/RulesF7B5F428120C17D6910155537EA75A75RuleMethods0.java:[35,74] cannot find symbol
[ERROR]   symbol:   method getMatch()
[ERROR]   location: variable drools of type org.drools.model.Drools
{code}

Reproducer here: https://github.com/DuncanDoyle/kogito-drools-keyword-rhs-reproducer",Major,Mario Fusco,,2019-09-11T06:17:09.000-0400,drools keyword in RHS does no longer provide access to Match,Resolved,bug,Bug
2019-09-30T04:40:04.000-0400,DROOLS-4577,Done,"Migrating a project from Drools 6.5.x to 7.x results in a rule getting fired incorrectly when the following is involved:
* expired event
* additional constraint",Major,Mario Fusco,,2019-09-29T12:41:15.000-0400,Rule containing expired event and additional constraint incorrectly fired,Resolved,bug,Bug
2019-09-27T12:41:10.000-0400,DROOLS-4565,Done,"MVELDialectRuntimeData#mvelReaders is accessed concurrently but is not thread safe due to the usage of a HashSet. This may cause lost updates. (See  [^ForkJoinPool-1-worker-1.txt] and  [^main.txt] )

If this happens and the kie base is serialized and deserialized it results in a NullPointerException at runtime. (See  [^NPE.txt] )

We observed that the entries in this Set (mvelReaders) are serialized and important for the deserialization step because they contain information about transient objects that have to be re-initialized after deserialization.
While losing this information due to concurrent access does not cause problems during compilation, serialization and deserialization of a kie base, they may cause NullPointerExceptions at runtime when transient fields remain uninitialized.

",Major,Mario Fusco,,2019-09-25T10:02:30.000-0400,MVELDialectRuntimeData is not thread safe,Resolved,bug,Bug
2019-09-26T09:04:52.000-0400,DROOLS-2632,Won't Do,Using Thread.sleep() can introduce nondeterminism to tests. We need to get rid of all Thread.sleep() calls in tests. ,Minor,Tibor Zimanyi,,2018-06-14T03:49:52.000-0400,Get rid of Thread.sleep() calls in tests,Closed,bug,Bug
2019-09-26T02:05:51.000-0400,DROOLS-4554,Done,"SonarCloud fixes from kogito-runtimes [1] must be ported to Drools. 

[1] https://github.com/kiegroup/kogito-runtimes/pull/164",Major,Tibor Zimanyi,,2019-09-20T08:15:20.000-0400,Backport SonarCloud fixes from kogito-runtimes to drools,Resolved,bug,Bug
2019-09-25T08:13:51.000-0400,DROOLS-4536,Done,"In test scenarios (Legacy test scenario) expect section, if we don't edit the default numeric values in expect section then test scenario fails, but if we edit and enter the same value it passes, sometimes we have to type a different value, run the test, then retype 0/0.0 for it to pass.

The issue is always reproducible.

h2. Acceptance test
- Default empty text (/)
- Default int zero (x), (/) passed in re-review
- Default double zero (x), (/) passed in re-review
- Default boolean true (/)
",Minor,Toni Rikkola,,2019-08-14T00:51:37.000-0400,Test scenarios fails with default values,Resolved,bug,Bug
2019-09-23T07:38:44.000-0400,DROOLS-4532,Done,"A rule containing a function call with a negative argument:

{noformat}
eval( functions.add($age, -1).compareTo(10) < 0)
{noformat}

fails to compile when using the executable model:

{noformat}
java.lang.RuntimeException: Unknown expression type: -1
	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.getExpressionType(DrlxParseUtil.java:245)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.processFirstNode(ExpressionTyper.java:562)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionFromMethodCallOrField(ExpressionTyper.java:380)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.parseNodeArguments(ExpressionTyper.java:679)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.parseMethodCallExpr(ExpressionTyper.java:647)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.methodCallExpr(ExpressionTyper.java:635)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionFromMethodCallOrField(ExpressionTyper.java:416)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:191)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpression(ExpressionTyper.java:121)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.parseBinaryExpr(ConstraintParser.java:269)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.getDrlxParseResult(ConstraintParser.java:89)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.drlxParse(ConstraintParser.java:56)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.drlxParse(ConstraintParser.java:51)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.drlxParse(ConstraintParser.java:47)
	at org.drools.modelcompiler.builder.generator.visitor.EvalVisitor.visit(EvalVisitor.java:25)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:94)
	at org.drools.compiler.lang.descr.EvalDescr.accept(EvalDescr.java:97)
	at org.drools.modelcompiler.builder.generator.visitor.AndVisitor.visit(AndVisitor.java:29)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:69)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.processRule(ModelGenerator.java:173)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.generateModel(ModelGenerator.java:153)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.compileKnowledgePackages(ModelBuilderImpl.java:169)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildRules(ModelBuilderImpl.java:119)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildPackages(ModelBuilderImpl.java:69)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:108)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:100)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:261)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:75)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:271)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:239)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:208)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:196)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:144)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:125)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:114)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:107)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:103)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:99)
	at org.drools.modelcompiler.CompilerTest.testEvalExprWithFunctionCall(CompilerTest.java:1997)
{noformat}",Major,Luca Molteni,,2019-09-15T13:45:21.000-0400,Executable model compilation fails with java.lang.RuntimeException: Unknown expression type: -1,Resolved,bug,Bug
2019-09-23T15:46:19.000-0400,DROOLS-4550,Done,None,Critical,Massimiliano Dessi,,2019-09-19T03:37:12.000-0400,openshift-ha-cep manages different or wrong versions of GAVs,Resolved,bug,Bug
2019-09-17T02:27:33.000-0400,DROOLS-4503,Done,"When the expected value for a field is a java long, the error popup reports

""The expected value is '2' but the actual one is '3L'.""
 !ErrorPopup.png|thumbnail! 

That means the java literal is used for the suggested (correct) value, while the inserted value as-is is shown as the one to correct. _Of course it is possible that this apply to all types whose java literal representation is different then ""absolute"" value._
This is a little bit inconsistent and confusing, especially for someone not knowing java.
The worst consequence is that when user click ""Apply"", that literal is put inside the cell, 
 !InsertedValue.png|thumbnail! 

and when sent to server it raise error (because server is expecting a number, not a string)
 !FollowError.png|thumbnail! 


",Major,Yeser Amer,,2019-09-04T03:16:17.000-0400,"""Error"" popup report java literal for suggested number",Resolved,bug,Bug
2019-09-17T10:03:17.000-0400,DROOLS-4540,Duplicate Issue,"With the Data Model: 
!image-2019-09-17-14-32-30-899.png|thumbnail! 

The following rule does not compile:
 !image-2019-09-17-14-33-46-872.png|thumbnail! 

Source:
 !image-2019-09-17-14-34-14-290.png|thumbnail! 
",Major,Toni Rikkola,,2019-09-17T07:34:33.000-0400,Guided rule editor can not manage Double and Integer fields in RHS,Closed,bug,Bug
2019-09-16T09:04:26.000-0400,DROOLS-4467,Done,"PMML files that contain field names with the first letter capitalized do not generate the proper POJOs, and consequently do not work. ",Major,Lance Leverich,,2019-08-23T19:32:17.000-0400,PMML with capitalized field names does not work,Resolved,bug,Bug
2019-09-16T03:55:12.000-0400,DROOLS-4529,Done,"When using executable model in a kjar that contains BPMN process definitions in the form of bpmn files, the processes don't work. 

To reproduce the problem, run RuleFlowIntegrationTest [1], with executable model enabled in the ruleflow-group kjar.

[1] https://github.com/kiegroup/droolsjbpm-integration/blob/78cb770577679cb46b1f5bbf3e38124499d3cba6/kie-server-parent/kie-server-tests/kie-server-integ-tests-drools/src/test/java/org/kie/server/integrationtests/drools/RuleFlowIntegrationTest.java#L35",Major,Tibor Zimanyi,,2019-09-13T09:51:16.000-0400,BPMN processes don't work when CanonicalKieModule is used,Resolved,bug,Bug
2019-09-11T12:32:35.000-0400,DROOLS-4525,Done,"A rule has the following constraint:
{noformat}
$p : Person(likes matches ""^[0-9]{3}.*$"")
{noformat}

If a Person object is inserted into the working memory with the {{likes}} field unset, this results in a NullPointerException when using the executable model:

{noformat}
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.NullPointerException
	at org.drools.modelcompiler.constraints.ConstraintEvaluator.evaluate(ConstraintEvaluator.java:77)
	at org.drools.modelcompiler.constraints.LambdaConstraint.isAllowed(LambdaConstraint.java:108)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:139)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:501)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:399)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:324)
	at org.drools.core.phreak.PropagationEntry$Insert.propagate(PropagationEntry.java:161)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:166)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:91)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1046)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1009)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1001)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at org.drools.modelcompiler.CompilerTest.testMatchesOnNullString(CompilerTest.java:2003)
...
Caused by: java.lang.RuntimeException: java.lang.NullPointerException
	at org.drools.model.DSL.eval(DSL.java:715)
	at defaultpkg.RulesD6C04ACCB409930058C1DE751731F5EDRuleMethods0.lambda$rule_R2$8e86359d$1(RulesD6C04ACCB409930058C1DE751731F5EDRuleMethods0.java:39)
	at org.drools.model.functions.Predicate1$Impl.test(Predicate1.java:18)
	at org.drools.model.constraints.SingleConstraint1.lambda$getPredicate$8a56b796$1(SingleConstraint1.java:40)
	at org.drools.modelcompiler.constraints.ConstraintEvaluator.evaluate(ConstraintEvaluator.java:73)
	... 49 more
Caused by: java.lang.NullPointerException
	at org.drools.model.operators.MatchesOperator.eval(MatchesOperator.java:27)
	at org.drools.model.operators.MatchesOperator.eval(MatchesOperator.java:21)
	at org.drools.model.functions.Operator$SingleValue.test(Operator.java:41)
	at org.drools.model.functions.Operator$SingleValue.test(Operator.java:39)
	at org.drools.model.DSL.eval(DSL.java:713)
	... 53 more
{noformat}",Major,Mario Fusco,,2019-09-11T11:14:08.000-0400,NullPointerException in MatchesOperator with executable model,Resolved,bug,Bug
2019-09-11T14:26:07.000-0400,DROOLS-4478,Done,"When users import models from other vendors, an extra decision service is added.

*Actual:*
 !extra-ds.png|thumbnail! 

*Expected:*
The node should not be there, since it doesn't have a DMNDI associated with it.",Major,Daniel José dos Santos,,2019-08-26T16:05:06.000-0400,[DMN Designer] Decision Service - Models from other vendors are being imported with extra decision services,Resolved,bug,Bug
2019-09-13T08:15:07.000-0400,DROOLS-4307,Done,"I am finding inconsistent behaviour between drools reading rules from a local file (as a fileSystemResource) as opposed to pre compiling the rules into a kjar.

This happens if I use an enum declared within the drl file in the ""when"" or ""then"" section of a rule within the same drl file. 

The rule runs perfectly as expected if I load the rule from the filesystem, but fails to run if I have pre-compiled the rule. For this reason I think this is a bug as I would expect the same behaviour for both ways of running rules.

I outlined the problem in more detail stackoverflow:

https://stackoverflow.com/questions/56989080/drools-maven-plugin-not-understanding-locally-declared-enums-when-compiling-drl

This is running JAVA8 and drools 7.23.0.Final

",Major,Luca Molteni,,2019-07-11T11:23:25.000-0400,Drools unable to compile rules when using a declared enum in the DRL file,Resolved,bug,Bug
2019-09-06T10:19:29.000-0400,DROOLS-4509,Done,None,Major,Mario Fusco,,2019-09-06T09:44:19.000-0400,Annotation @watch on an alpha node before a from node has no effect,Resolved,bug,Bug
2019-09-05T12:21:26.000-0400,DROOLS-4496,Done,"Steps to reproduce:
- Create a custom data type: a Structure with no sub-fields (delete the one that gets created automatically).
- Save and close
- Create an input and assign said data type
- Create a decision and connect it to the input
- Open the decision and select Decision Table
- An error is thrown
- the editor is rendered unusable until it is closed and reopened
",Blocker,Guilherme Gomes,,2019-09-02T05:57:14.000-0400,Empty Structure causes DMN editor to crash,Resolved,bug,Bug
2019-09-05T05:53:47.000-0400,DROOLS-4504,Done,None,Major,Matteo Mortari,,2019-09-04T18:53:45.000-0400,DMN time offset accessor from decl variable type,Resolved,bug,Bug
2019-09-04T10:05:17.000-0400,DROOLS-4395,Done,There is an issue when user imports a PMML model into a DMN model. Then saving/validation of the DMN throws an error.,Critical,Guilherme Gomes,,2019-08-02T08:05:39.000-0400,[DMN Designer] Validation fails for included PMML model,Resolved,bug,Bug
2019-09-04T05:07:28.000-0400,DROOLS-4453,Done,"See this project as reproducer
https://github.com/juliaaano/temp",Major,Daniele Zonca,,2019-08-21T16:39:42.000-0400,Test Scenario: empty values in collection should be always skipped,Resolved,bug,Bug
2019-09-03T08:28:44.000-0400,DROOLS-4500,Done,None,Blocker,Massimiliano Dessi,,2019-09-02T11:55:41.000-0400,Fix  ClientProducerDemo misconfiguration,Resolved,bug,Bug
2019-08-29T10:52:35.000-0400,DROOLS-4489,Done,None,Major,Massimiliano Dessi,,2019-08-29T03:49:38.000-0400,Thorntail http enpoint broken,Resolved,bug,Bug
2019-08-30T04:49:26.000-0400,DROOLS-4492,Done,None,Major,Mario Fusco,,2019-08-30T03:38:46.000-0400,Executable model is not able to compile a declared window on an event implemented as a Java pojo,Resolved,bug,Bug
2019-08-28T11:02:58.000-0400,DROOLS-4430,Cannot Reproduce,"java.lang.ClassNotFoundException: Unable to find class 'ksLoggers.newFileLogger'
	at org.kie.soup.project.datamodel.commons.types.ClassTypeResolver.resolveType(ClassTypeResolver.java:268)
	at org.kie.soup.project.datamodel.commons.types.ClassTypeResolver.resolveType(ClassTypeResolver.java:153)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.processGlobals(KnowledgeBuilderImpl.java:1686)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.processOtherDeclarations(KnowledgeBuilderImpl.java:1668)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildOtherDeclarations(KnowledgeBuilderImpl.java:2511)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackagesWithoutRules(KnowledgeBuilderImpl.java:2458)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackages(KnowledgeBuilderImpl.java:2449)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:108)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:100)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:261)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:201)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.createKieBase(AbstractKieModule.java:215)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:406)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:374)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBaseFromKieSessionModel(KieContainerImpl.java:575)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:551)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:458)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:441)
	at CAKnowledgeBase.CAKB.initializeRuleEngine(CAKB.java:269)
	at chemistryAdvisor.ChemistryAdvisor.main(ChemistryAdvisor.java:217)

SOurce code:

try
        {
        	// define a KieModule
        	//KieModuleModel CAproj = ks.newKieModuleModel();
        	
        	// get a container for the KieBases
        	chemistryAdvisorSession = CAks.newKieClasspathContainer().newKieSession();
        	if (debugKB)
        	{
        		System.out.println(""\ninitialized KieContainer:\t"" + CAContainer);
        	}
        }
        catch (NoClassDefFoundError fe)
        {
        	fe.printStackTrace();
        }

where CAks is a KieSession.",Major,Mario Fusco,,2019-08-13T12:48:41.000-0400,Unable to find class 'ksLoggers.newFileLogger',Resolved,bug,Bug
2019-08-28T10:36:42.000-0400,DROOLS-4447,Done,"The following code in the RHS of a rule fails with mvel dialect:

{noformat}
+                ""    modify($p) { addresses.add(address) }\n"" +
+                ""    //$p.getAddresses().add(address); update($p);\n"" +
{noformat}

Exception:

{noformat}
Exception executing consequence for rule ""addAddress"" in defaultpkg: java.lang.ClassCastException: org.mvel2.optimizers.impl.refl.nodes.GetterAccessor cannot be cast to org.mvel2.optimizers.impl.refl.nodes.MethodAccessor
	at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
	at org.drools.core.common.DefaultAgenda.handleException(DefaultAgenda.java:1242)
	at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:439)
	at org.drools.core.phreak.RuleExecutor.fireActivation(RuleExecutor.java:380)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:136)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:89)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1062)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1009)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1001)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1330)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1321)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at org.drools.compiler.integrationtests.Misc2Test.testModifyAddToList(Misc2Test.java:9139)
{noformat}

Notes:
* The same rule worked in Drools 6.5.x
* The alternative syntax (commented out in the snippet above) works",Critical,Mario Fusco,,2019-08-20T10:07:11.000-0400,ClassCastException in mvel when updating a List property with modify,Resolved,bug,Bug
2019-08-28T06:27:53.000-0400,DROOLS-4454,Done,"After an updateToVersion where a rule is removed from the KieBase,
fireAllRules fails with the exception below.

Note: This happens with versions 6.4.0.Final-redhat-6 and later
(including latest master)

The following commit seems to be causing the NPE:
https://issues.jboss.org/browse/DROOLS-1147
https://github.com/kiegroup/drools/commit/8897a8dcccce10a93803d7073ecf499f3d4656ec

{noformat}
java.lang.NullPointerException
	at org.drools.core.phreak.SegmentUtilities.createChildSegments(SegmentUtilities.java:305)
	at org.drools.core.reteoo.LeftInputAdapterNode.doInsertObject(LeftInputAdapterNode.java:185)
	at org.drools.core.reteoo.LeftInputAdapterNode.assertObject(LeftInputAdapterNode.java:169)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:63)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:304)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:120)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:82)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:77)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2044)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1334)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1288)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1333)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1324)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1305)
	at CreateChildSegmentNpeTest.fireAllRules(CreateChildSegmentNpeTest.java:91)
	at CreateChildSegmentNpeTest.reproducer(CreateChildSegmentNpeTest.java:126)
{noformat}


",Major,Mario Fusco,,2019-08-21T18:03:37.000-0400,NullPointerException at org.drools.core.phreak.SegmentUtilities.createChildSegments with a removed rule in updateToVersion,Resolved,bug,Bug
2019-08-27T12:19:46.000-0400,DROOLS-4475,Done,None,Major,Mario Fusco,,2019-08-26T12:34:37.000-0400,Executable model doesn't generate stable ids for indexes across different compilations,Resolved,bug,Bug
2019-08-28T09:37:31.000-0400,DROOLS-4468,Done,"A rule updates a list in a fact:

{noformat}
rule ""Init""
    dialect ""mvel""
    when
        $fl: FactWithList(items.size()==0)
    then
        $fl.getItems().add(""A"");
        $fl.getItems().add(""B"");
        update($fl);
end
{noformat}

A second rule verifies if other facts exist, matching the items in the updated list:

{noformat}
rule ""Expected Outcome""
    dialect ""mvel""
    when
        $fl: FactWithList($itemList : items != null)
        $l: java.util.ArrayList(size > 0) from collect(FactWithString($itemList contains stringValue));
    then
        System.out.println(""--> Rule: "" + kcontext.getRule().getName() + "" fired, "" + $fl + "", collect list: "" + $l.size());
end
{noformat}

This rule is *not* fired if 
* mvel dialect is used *and*
* Drools is executed with {{ForceEagerActivationOption.YES}} (jBPM use case)

Note: This worked in 7.17 and earlier!",Major,Mario Fusco,,2019-08-25T15:09:31.000-0400,"Invalid result with collect, mvel and ForceEagerActivationOption.YES",Resolved,bug,Bug
2019-08-26T10:43:56.000-0400,DROOLS-4448,Done,"User is unable to create guided rule with constraint over {{LocalDate}} field.

h2. Acceptance criteria
Save and reopen all these column types
- Free form DRL, constraint (/)
- Simple condition column, literal value constraint (/)
- BRL condition column, literal value constrain (/)
- BRL condition column, template key constraint (/) 
- Simple action column (/)
- BRL action column, literal value (/)
- BRL action column, template key (/)",Major,Toni Rikkola,,2019-08-20T12:10:14.000-0400,[Guided Rule] Local Date constraint is lost,Resolved,bug,Bug
2019-08-26T05:12:37.000-0400,DROOLS-4458,Done,"When having constraint like this: 

Person(booleanAttribute == ""true"")

a build using executable model ends with an exception [1]. This is because the constraint parser doesn't coerce ""true"" to a boolean true. 

[1] https://gist.github.com/baldimir/e0f1aa27d194b750148f779370d13560",Major,Tibor Zimanyi,,2019-08-22T08:44:25.000-0400,String to Boolean coercion doesn't work in executable model,Resolved,bug,Bug
2019-08-26T05:12:22.000-0400,DROOLS-4464,Done,"Having a constraint like (addresses == 2 || \r\n addresses == 3) fails begin parsed [1] by drools-mvel-parser. To reproduce, use test testBinaryWithNewLine [2] with Windows line endings. 

[1] https://gist.github.com/baldimir/dbe79d4bab6542e3d0e4b251f482e08b
[2] https://github.com/kiegroup/drools/blob/master/drools-model/drools-mvel-parser/src/test/java/org/drools/mvel/parser/DroolsMvelParserTest.java#L80",Major,Tibor Zimanyi,,2019-08-23T07:10:07.000-0400,|| constraint followed by Windows new line fails to be parsed by drools-mvel-parser,Resolved,bug,Bug
2019-08-22T13:07:45.000-0400,DROOLS-4437,Done,"There is an issue when user decides to edit an *non-top* level data structure. In such case during saving also new nested field is added into structure, for steps to reproduce see the attached video.

h2. Acceptance test
- Edit top level structure (/)
- Add top level structure (/)
- Edit nested structure (/)
- Add nested structure (/)",Major,Guilherme Gomes,,2019-08-15T01:43:01.000-0400,[DMN Designer] Nested Structure update causes field addition,Resolved,bug,Bug
2019-08-23T02:49:51.000-0400,DROOLS-4440,Done,"When building KJar2 that has a dependency on KJar1 and its KieBase uses includes attribute to include the KieBase from KJar1, the build fails with message ""Unable to build KieBase, could not find include"". ",Major,Tibor Zimanyi,,2019-08-16T03:23:39.000-0400,KJar dependencies not correctly set in kie-maven-plugin build,Resolved,bug,Bug
2019-08-23T10:34:55.000-0400,DROOLS-4462,Done,"DroolsMvelParserTest contains non OS independent line endings, therefore majority of tests from this class fail on Windows. ",Major,Tibor Zimanyi,,2019-08-23T03:14:49.000-0400,DroolsMvelParserTest contains non OS independent line endings,Resolved,bug,Bug
2019-08-22T08:03:14.000-0400,DROOLS-4457,Won't Fix,"If you have fact types:
* org.Person
* org.test.Person

It will not be possible to use these in the same rule package even if they are used in different guided assets. This is since the package imports both and the compiler does not know what is the one that is referenced in the generated DRL code.

The fix requires:
* to update the exiting fact type selectors so that they show what the package of the fact that is used is.
* to use the FQCN in the DRL source.
* add the support for asset visitors 
* add the support for DMO
",Major,Toni Rikkola,,2019-08-22T02:33:01.000-0400,Can not use classes with same name from different packages in the same rule package,Closed,bug,Bug
2019-08-22T04:14:47.000-0400,DROOLS-4452,Done,"If the column uses class Person. The FQCN resolver that fills the DMO uses the first import that end with the class name.

For example if the list contains:
* org.test.AnotherPerson
* org.test.Person

Then first item is selected instead of the second.",Major,Toni Rikkola,,2019-08-21T09:08:01.000-0400,[GDST] Wrong FQCN is selected if the end matches.,Resolved,bug,Bug
2019-08-21T08:32:59.000-0400,DROOLS-4450,Done,"The tooltips are not showing the text properly in the DMN graph:
 !DROOLS-4450.png|width=300! 
",Critical,Guilherme Gomes,,2019-08-20T20:19:46.000-0400,[DMN Designer] DMN Graph - Tooltips are not showing the text properly,Resolved,bug,Bug
2019-08-21T08:33:16.000-0400,DROOLS-4243,Done,"Create a map of simple type as value (i.e. Map<String, String>) and try to use it",Critical,Lance Leverich,,2019-06-24T13:03:34.000-0400,Test Scenario: rule scenarios with maps of simple types are failing,Resolved,bug,Bug
2019-08-21T05:05:32.000-0400,DROOLS-4061,Done,Test scenario is not executing rules from guided score card in RHPAM 7.3  GA release . I can see similar issue with both test scenario(new and legacy),Major,Toni Rikkola,,2019-05-21T12:51:18.000-0400,Guided Score card rules not executed via test scenario.,Resolved,bug,Bug
2019-08-20T08:23:31.000-0400,DROOLS-4426,Explained,"The property ""version.org.kie"" is already defined in the kie-parent project and it should removed from droolsjbpm-build-bootstrap project
https://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/bc4de568cac276b1087d6e8f3ecbce9a02107fe2/pom.xml#L343",Major,Mario Fusco,,2019-08-13T03:05:20.000-0400,Remove version.org.kie property from droolsjbpm-build-bootstrap project,Closed,bug,Bug
2019-08-20T09:33:10.000-0400,DROOLS-4396,Done,There is a keyboard control for the dmn expression editor. However this keyboard control stop working after search is closed.,Major,Jozef Marko,,2019-08-02T08:27:04.000-0400,[DMN Designer] Grid keyboard Control doesn't work after search is closed,Resolved,bug,Bug
2019-08-19T03:49:14.000-0400,DROOLS-4414,Done,"There is an incompatibility between Scenario Simulation 1.5 and 1.6 versions.

The incompatibility can be spotted for example:
- Create project on the RHPAM product 7.4.0, there is Scenario Simulation model version 1.5
- Import such project into business central 7.25.0-SNAPSHOT, There is Scenario Simulation model version 1.6
- Try to open the *test-salary.scesim* file
- The error user will see is attached

h2. Acceptance Test
Import attached projects into business-central and open all *scesim* files",Major,Gabriele Cardosi,,2019-08-06T05:47:10.000-0400,Scenario Simulation model versions are incompatible,Resolved,bug,Bug
2019-08-20T01:10:43.000-0400,DROOLS-4433,Done,"h2. Acceptance test
- Guided Rule, move constrain (/)
- Guided Rule Template, move constraint (/)
- Guided Decision table, BRL Constraint, move constraint (/)
- Move, Save and Reopen (/)
- Move and Check Source (/)",Major,Toni Rikkola,,2019-08-14T00:52:07.000-0400,Add the ability to move constraints within patterns in the same way we can move patterns within rules to Guided Rules and Guided Rule Templates,Resolved,bug,Bug
2019-08-19T03:43:11.000-0400,DROOLS-4259,Done,"Scenario Designer can not access parent data object fields, even if the field has public getter and setter. If you check the attached project there are two fields - *price* and *size* while *size* is declared in parent class. If you try to run the scenario, error about not possible initialization of the data object appears. 

If you move the *size* field from *Picture* into *Advertisement* class and rerun the scenario, everything works fine.",Critical,Daniele Zonca,,2019-06-26T02:57:57.000-0400,Scenario can not access parent data object fields,Resolved,bug,Bug
2019-08-18T10:39:12.000-0400,DROOLS-4178,Done,"User has possibility to export documentation of a dmn diagram. Such documentation contains a picture of the diagram. The issue is the picture has highlighted some nodes, if those were selected in the designer model tab.

h2. Acceptance test
- Select one node, check documentation (/)
- Select multiple nodes, check documentation (x) - fixed in re-review
- Select node, check documentation, return to model (x) - explained it works as designed",Minor,Guilherme Gomes,,2019-06-14T01:19:34.000-0400,[DMN Designer] Selected Node Is selected also in Documentation,Resolved,bug,Bug
2019-08-18T10:38:33.000-0400,DROOLS-4409,Done,"The performance of dmn structures edit seems to be downgraded. Just adding another field into a existing structure takes ~5 seconds. The attached video demonstrates just saving added field however also other operations, like remove field performance was downgraded.

h2. Acceptance test
- Define 5 simple data types (/)
- Define 3 structures, each 3 fields, one is dependent on other two (/)
- Invoke constraint dialog multiple times in a row, confirm changes, discard changes (/)",Critical,Guilherme Gomes,,2019-08-05T12:02:06.000-0400,[DMN Designer] Data Type Structure update is slow,Resolved,bug,Bug
2019-08-13T08:32:53.000-0400,DROOLS-4374,Done,"If we miss a semicolon in init() of ""from accumulate"", 

for example)
{noformat}
import org.drools.modelcompiler.domain.Person;
rule R when
  $sum : Integer() from accumulate (
            Person( age > 18, $age : age ),
                init( int sum = 0 ),
                action( sum += $age; ),
                reverse( sum -= $age; ),
                result( sum )
         )
then
  insert($sum);
end
{noformat}

- Not executable-model -> The DRL is compiled and executed successfully
- Executable-model -> Throws ParseProblemException

{noformat}
com.github.javaparser.ParseProblemException: (line 1,col 12) Parse error. Found ""}"", expected one of  ""!="" ""%"" ""%="" ""&"" ""&&"" ""&="" ""*"" ""*="" ""+"" ""+="" "","" ""-"" ""-="" ""->"" ""/"" ""/="" ""::"" "";"" ""<"" ""<<="" ""<="" ""="" ""=="" "">"" "">="" "">>="" "">>>="" ""?"" ""^"" ""^="" ""instanceof"" ""|"" ""|="" ""||""
Problem stacktrace : 
  com.github.javaparser.GeneratedJavaParser.generateParseException(GeneratedJavaParser.java:10567)
  com.github.javaparser.GeneratedJavaParser.jj_consume_token(GeneratedJavaParser.java:10426)
  com.github.javaparser.GeneratedJavaParser.BlockStatement(GeneratedJavaParser.java:3847)
  com.github.javaparser.GeneratedJavaParser.Statements(GeneratedJavaParser.java:1644)
  com.github.javaparser.GeneratedJavaParser.Block(GeneratedJavaParser.java:3822)
  com.github.javaparser.GeneratedJavaParser.BlockParseStart(GeneratedJavaParser.java:5687)
  com.github.javaparser.JavaParser.parse(JavaParser.java:115)
  com.github.javaparser.JavaParser.parseBlock(JavaParser.java:309)
  com.github.javaparser.StaticJavaParser.parseBlock(StaticJavaParser.java:240)
  org.drools.modelcompiler.builder.generator.visitor.accumulate.AccumulateVisitor.visitAccInlineCustomCode(AccumulateVisitor.java:434)
  ...
{noformat}

I'm not very sure how it should be fixed. I filed this because of discrepancy between Executable-model and Not executable-model

Poosible choices are:

- Fail even in case of Not executable-model

- Success in case of Executable-model


Additonal Note: If we miss a semicolon in action(), a more understandable error message is thrown.

{noformat}
[Message [id=1, kieBase=defaultKieBase, level=ERROR, path=r0.drl, line=2, column=0
   text=Rule Compilation error Syntax error, insert "":: IdentifierOrNew"" to complete Expression
Syntax error, insert "";"" to complete Statement]]
{noformat}",Minor,Luca Molteni,,2019-07-30T00:45:07.000-0400,"Compilation error for ""from accumulate"" init() with executable-model or not",Resolved,bug,Bug
2019-08-13T09:17:20.000-0400,DROOLS-4415,Done,"Steps to reproduce it:
- Create a new ScenarioSimulation
- Insert 5/6 additional columns (randomly, not in the same position)
- Assign a instance and a property in one of the first columns
-> Some cells of the row are empty, without the placeholder (typically you can find ""Define valid type"").

It doesn't reproduce in all cases.  
",Minor,Yeser Amer,,2019-08-06T08:45:54.000-0400,Cell placeholder disappear in some cases,Resolved,bug,Bug
2019-08-12T09:58:19.000-0400,DROOLS-4381,Done,"When you compare BigDecimal (but the field type is Object) with primitive int,

{noformat}
import org.drools.modelcompiler.domain.Result;
rule ""rule1""
when
    $r : Result( value <= 20 )
then
end
{noformat}

executable-model build fails.

{noformat}
[ERROR] Failures: 
[ERROR]   CompilerTest.testBigDecimalIntCoercion:1901->BaseModelTest.getKieSession:99->BaseModelTest.getKieSession:103->BaseModelTest.getKieContainer:107->BaseModelTest.getKieContainer:114->BaseModelTest.createKieBuilder:125->BaseModelTest.createKieBuilder:152 [Message [id=1, level=ERROR, path=src/main/java/defaultpkg/RulesC992C95703C3473926B5B025D30097DARuleMethods0.java, line=24, column=122
   text=no suitable method found for lessOrEqualNumbers(java.lang.Object,int)
    method org.drools.modelcompiler.util.EvaluationUtil.lessOrEqualNumbers(java.lang.Number,java.lang.Number) is not applicable
      (argument mismatch; java.lang.Object cannot be converted to java.lang.Number)
    method org.drools.modelcompiler.util.EvaluationUtil.lessOrEqualNumbers(java.lang.Long,java.lang.Long) is not applicable
      (argument mismatch; java.lang.Object cannot be converted to java.lang.Long)], Message [id=2, level=ERROR, path=src/main/java/defaultpkg/RulesC992C95703C3473926B5B025D30097DARuleMethods0.java, line=0, column=0
   text=Java source of src/main/java/defaultpkg/RulesC992C95703C3473926B5B025D30097DARuleMethods0.java in error:
{noformat}

Non executable-model works with the rule.",Major,Luca Molteni,,2019-07-30T23:04:30.000-0400,BigDecimal and primitive comparison error in executable-model build,Resolved,bug,Bug
2019-08-12T10:01:54.000-0400,DROOLS-4375,Done,"When ""from accumulate"" uses BigDecimal with Mvel syntax,

for example)
{noformat}
import org.drools.modelcompiler.domain.Person;
import java.math.BigDecimal;
global java.util.List list;
dialect ""mvel""
rule R when
  $b : BigDecimal() from accumulate (
            Person( $money : money ),
                init( BigDecimal sum = 0; ),
                action( sum += $money; ),
                reverse( sum -= $money; ),
                result( sum )
         )
then
  list.add($b);
end
{noformat}

It works with non executable-model but fails with executable-model.

{noformat}
[ERROR] Failures: 
[ERROR]   AccumulateTest.testFromAccumulateBigDecimalMvel:1273->BaseModelTest.getKieSession:99->BaseModelTest.getKieSession:103->BaseModelTest.getKieContainer:107->BaseModelTest.getKieContainer:114->BaseModelTest.createKieBuilder:125->BaseModelTest.createKieBuilder:152 [Message [id=1, level=ERROR, path=src/main/java/defaultpkg/RAccumulate6.java, line=28, column=20
   text=incompatible types: int cannot be converted to java.math.BigDecimal], Message [id=2, level=ERROR, path=src/main/java/defaultpkg/RAccumulate6.java, line=32, column=18
   text=bad operand types for binary operator '+'
  first type:  java.math.BigDecimal
  second type: java.math.BigDecimal], Message [id=3, level=ERROR, path=src/main/java/defaultpkg/RAccumulate6.java, line=36, column=18
   text=bad operand types for binary operator '-'
  first type:  java.math.BigDecimal
  second type: java.math.BigDecimal], Message [id=4, level=ERROR, path=src/main/java/defaultpkg/RAccumulate6.java, line=0, column=0
   text=Java source of src/main/java/defaultpkg/RAccumulate6.java in error:
package defaultpkg
{noformat}",Major,Luca Molteni,,2019-07-30T01:52:01.000-0400,BigDecimal in from accumulate with MVEL with executable-model,Resolved,bug,Bug
2019-08-12T09:58:09.000-0400,DROOLS-4376,Done,"When we write abbreviated comparison with Map,
{noformat}
import java.util.Map;
rule R1 when
    Map(this['money'] >= 65 && <= 75)
then
end
{noformat}

 executable-model build fails.

{noformat}
[ERROR] testMapAbbreviatedComparison[FLOW_DSL](org.drools.modelcompiler.CompilerTest)  Time elapsed: 0.258 s  <<< ERROR!
java.lang.UnsupportedOperationException: Unknown expression: this[""money""]
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.findLeftLeafOfNameExpr(ExpressionTyper.java:875)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.findLeftLeafOfNameExpr(ExpressionTyper.java:867)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.findLeftLeafOfNameExpr(ExpressionTyper.java:867)
	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.trasformHalfBinaryToBinary(DrlxParseUtil.java:331)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:170)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpression(ExpressionTyper.java:118)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.parseBinaryExpr(ConstraintParser.java:309)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.getDrlxParseResult(ConstraintParser.java:114)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.drlxParse(ConstraintParser.java:81)
	at org.drools.modelcompiler.builder.generator.visitor.pattern.PatternDSL.findAllConstraint(PatternDSL.java:124)
	at org.drools.modelcompiler.builder.generator.visitor.pattern.PatternDSL.buildPattern(PatternDSL.java:191)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:128)
	at org.drools.compiler.lang.descr.PatternDescr.accept(PatternDescr.java:267)
{noformat}",Major,Luca Molteni,,2019-07-30T03:28:05.000-0400,Abbreviated comparison with Map fails in executable-model,Resolved,bug,Bug
2019-08-12T09:58:14.000-0400,DROOLS-4377,Done,"When comparing a primitive int with an Integer inside a Map,

{noformat}
import java.util.Map;
import org.drools.modelcompiler.domain.Person;
rule R1 when
    $m : Map()
    Person(age == $m['age'] )
then
end
{noformat}

executable-model build fails with ""Comparison operation requires compatible types. Found int and class java.lang.Object"" even though the Map's value is Integer.

{noformat}
[ERROR] Failures: 
[ERROR]   CompilerTest.testMapPrimitiveComparison:1905->BaseModelTest.getKieSession:99->BaseModelTest.getKieSession:103->BaseModelTest.getKieContainer:107->BaseModelTest.getKieContainer:114->BaseModelTest.createKieBuilder:125->BaseModelTest.createKieBuilder:152 [Message [id=1, kieBase=defaultKieBase, level=ERROR, path=r0.drl, line=-1, column=0
   text=Comparison operation requires compatible types. Found int and class java.lang.Object]]
{noformat}

Non executable-model has no issue with the rule.
",Major,Luca Molteni,,2019-07-30T04:31:11.000-0400,Comparison error with primitive and Map in executable-model,Resolved,bug,Bug
2019-08-12T10:27:48.000-0400,DROOLS-3617,Done,"If user declares *boolean* or a *Structure* indirectly, he is able to set a constarint for such data type entry, however he shouldn't be able to set the constraint in such case. Please see the attached screenshot. There are 4 entries while 2 has constraints and 2 have not. Expected is no of those 4 entries has constraint.",Major,Daniel José dos Santos,,2019-02-08T06:07:50.000-0500,[DMN Designer] Indirect boolean and structure has a constraint,Resolved,bug,Bug
2019-08-12T04:01:05.000-0400,DROOLS-4187,Done,"If I have a DMN file with {{Definitions}} attribute {{namespace}} and {{name}} both populated imported into another DMN file that does not use the {{drools:modelName}} extension in the {{Import}} node; validation of the imported model fails.

See https://github.com/kiegroup/drools/commit/d057e0113c8e519a07554569f51204565836f86d#r33963734 ",Critical,Matteo Mortari,,2019-06-17T08:44:24.000-0400,kie-dmn-validation: Incorrect import detection,Resolved,bug,Bug
2019-08-09T03:59:26.000-0400,DROOLS-4422,Rejected,"The procedure initialise of BasicXARecovery incorrectly calculates the name of the XA recovery properties file if a number of connections is included

The current code is
fileName = parameter.substring(0, breakPosition - 1);

The correct code should be
fileName = parameter.substring(0, breakPosition);",Trivial,Mario Fusco,,2019-08-08T22:30:08.000-0400,BasicXARecovery calculates the name of the XA recovery properties file incorrectly if a number of connections is included,Resolved,bug,Bug
2019-08-09T14:16:40.000-0400,DROOLS-4413,Done,"See attached test case that reproduces the problem.

I'm expecting that a thread calling fireUntilHalt will exit after the session is halted and disposed, but it continues to block. If the code block that performs the marshalling is ignored, then the thread exists as expected.

Stack is:

{code:java}
""Thread-1"" #14 daemon prio=5 os_prio=0 tid=0x00007f5a7c683000 nid=0x1c028 in Object.wait() [0x00007f5acc170000]
   java.lang.Thread.State: WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x00000000ecfc67b0> (a org.drools.core.phreak.SynchronizedPropagationList)
	at java.lang.Object.wait(Object.java:502)
	at org.drools.core.phreak.SynchronizedPropagationList.waitOnRest(SynchronizedPropagationList.java:128)
	- locked <0x00000000ecfc67b0> (a org.drools.core.phreak.SynchronizedPropagationList)
	at org.drools.core.common.DefaultAgenda$RestHandler$FireUntilHaltRestHandler.handleRest(DefaultAgenda.java:1133)
	- locked <0x00000000ecfc67b0> (a org.drools.core.phreak.SynchronizedPropagationList)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1074)
	at org.drools.core.common.DefaultAgenda.internalFireUntilHalt(DefaultAgenda.java:991)
	at org.drools.core.common.DefaultAgenda.fireUntilHalt(DefaultAgenda.java:983)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1369)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1348)
	at org.drools.compiler.integrationtests.WhatsWrongWithMeTest.lambda$canReturnWhenHalted$0(WhatsWrongWithMeTest.java:78)
	at org.drools.compiler.integrationtests.WhatsWrongWithMeTest$$Lambda$60/994541328.run(Unknown Source)
	at java.lang.Thread.run(Thread.java:748)
{code}
",Major,Mario Fusco,,2019-08-05T22:44:20.000-0400,fireUntilHalt continues to block after session disposed,Resolved,bug,Bug
2019-08-09T09:47:45.000-0400,DROOLS-2315,Cannot Reproduce,"Hi,

I've a problem with Drools 7.4.1.Final. I'm using a decision table to write my
rules and I need to use more than 9 parameters in the same action, but
something doesn't work. In fact the $10 parameter is interpreted by Drools
as the first parameter ($1) with 0 appended on queue.
Does exist a different way to write the tenth (or greater) parameter?

Thanks.   ",Minor,Mario Fusco,,2018-02-09T16:59:19.000-0500,Decision Table with more than 9 parameters,Resolved,bug,Bug
2019-08-07T09:47:35.000-0400,DROOLS-4315,Done,"h3. Context:

Today users can:

1) Download the diagram picture by using this component:
 !component-1.png|thumbnail! 

2) Download the DMN file by using this component:
 !component-2.png|thumbnail! 

3) Print or Download the documentation as PDF by using the *Print* button (into the Documentation tab):
 !component-3.png|thumbnail! 

4) Download the documentation as DOC by using the *Download .doc file* button (into the Documentation tab):
 !component-3.png|thumbnail! 

----

h3. Problem:

The ""Download"" concept is getting confusing for users.

As a user, I want to be able to:
- Download the documentation as a .PDF file
- Download the documentation as a .DOC file
- Print the documentation


----
h3. Notice:

This component can be removed (if UX considers that it's necessary):
 !component-1.png|thumbnail! 
",Major,Margot Menestrot,,2019-07-15T12:40:27.000-0400,[DMN Designer] Documentation - Download buttons UX,Resolved,bug,Bug
2019-08-07T06:22:09.000-0400,DROOLS-4416,Done,See https://github.com/wildfly-extras/wildfly-camel/issues/2831,Major,Mario Fusco,,2019-08-07T04:19:08.000-0400,ProjectClassLoader is no longer compatible with Wildfly modular ClassLoader,Resolved,bug,Bug
2019-08-07T06:33:58.000-0400,DROOLS-4393,Done,"Is there any option to expire the facts before fireAllRules()?

A reproducer for drools 6.5.0.Final-redhat-25 (tested too on 7.23.0.Final-redhat-00002 and 7.24.0.Final) shows that facts are not expired until we run fireAllRules().

Trying reproducer:

Show facts are expired after fireAllRules():

```
unzip -d reproducer reproducer-02425402.zip
cd reproducer
git checkout master
./run.sh
```

Show facts are not expired before fireAllRules():

```
git checkout original
./run.sh
```

",Major,Mario Fusco,,2019-08-02T06:08:12.000-0400,Expired events can be present in the collect result,Resolved,bug,Bug
2019-08-07T11:07:01.000-0400,DROOLS-4388,Done,See https://github.com/kiegroup/drools/blob/master/drools-core/src/main/java/org/drools/core/command/runtime/rule/FireAllRulesCommand.java#L42,Major,Mario Fusco,,2019-08-02T03:58:38.000-0400,Make sure that all drools AgendaFilter implementations are serializable,Resolved,bug,Bug
2019-08-05T15:58:10.000-0400,DROOLS-4314,Done,"h3. Acceptance test
- Build the kie-wb-common
- Build the kie-wb-distributions/business-central-parent/business-central-webapp
- Deploy the obtained war on eap
- Create new project, create new DMN asset, create some nodes in this asset, build the project
- Try to import and open  [^Vacation Day Count - Solution 1.dmn] that comes from external DMN modeler",Major,Guilherme Gomes,,2019-07-15T10:17:16.000-0400,[DMN Designer] Rename 1.1 package to a generic name (since it covers DMN 1.2 too),Resolved,bug,Bug
2019-08-05T12:14:46.000-0400,DROOLS-4356,Done,"Steps to reproduce


cd droolsjbpm-integration/kie-maven-plugin-example
mvn clean install

expected output

[ERROR] Failures: 
[ERROR]   DMNTest.testDMNv1_2_ch11Modified:131 Message [id=0, level=WARNING, path=null, line=1478, column=-1
   text=DMN: Error while evaluating node 'Routing rules': the declared result type is 'DMNType{ http://www.omg.org/spec/DMN/20180521/FEEL/ : number }' but the actual value 'ACCEPT' is not an instance of that type (DMN id: b_RoutingRules, Error evaluating node) ]
Message [id=0, level=ERROR, path=null, line=492, column=-1
   text=DMN: Error while evaluating node 'Routing': the declared result type is 'DMNType{ http://www.trisotech.com/definitions/_3068644b-d2c7-4b81-ab9d-64f011f81f47 : tRouting }' but the actual value 'null' is not an instance of that type (DMN id: d_Routing, Error evaluating node) ]
Message [id=0, level=ERROR, path=null, line=537, column=-1
   text=DMN: Unable to evaluate decision 'Adjudication' as it depends on decision 'Routing' (DMN id: d_Adjudication, The referenced node was not found) ]
Expected: is <false>
     but: was <true>

",Major,Matteo Mortari,,2019-07-23T06:18:31.000-0400,Failing test in kie-maven-plugin-example,Resolved,bug,Bug
2019-08-05T13:45:48.000-0400,DROOLS-4382,Done,"When a rule uses ""matches"" and class function and its argument is a property of the fact,

for example)
{noformat}
import org.drools.modelcompiler.domain.Person;
import static org.drools.modelcompiler.domain.MyFunctions.*;

rule R when
    $a : Person( name matches testMatch(likes) )
then
end
{noformat}

It fails to build in executable-model

{noformat}
[ERROR] testMatchesClassFunctionWithArg[FLOW_DSL](org.drools.modelcompiler.CompilerTest)  Time elapsed: 0.346 s  <<< ERROR!
java.lang.IllegalArgumentException: Cannot get expression type by name _this!
	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.lambda$expressionTypeNameExpr$2(DrlxParseUtil.java:246)
	at java.util.Optional.orElseThrow(Optional.java:290)
	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.expressionTypeNameExpr(DrlxParseUtil.java:246)
	at org.drools.modelcompiler.builder.generator.DrlxParseUtil.getExpressionType(DrlxParseUtil.java:180)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.processFirstNode(ExpressionTyper.java:549)
{noformat}

It works with non-executable-model.

Additonal note: When running kie-maven-plugin with -DgenerateModel=YES in 7.23.0.Final-redhat-00002 (RHDM 7.4.0), the error message is ""No value present"".
{noformat}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.23.0.Final-redhat-00002:generateModel (default-generateModel) on project model-map-evaluation-rule: Execution default-generateModel of goal org.kie:kie-maven-plugin:7.23.0.Final-redhat-00002:generateModel failed: No value present -> [Help 1]
{noformat}
",Major,Mario Fusco,,2019-07-31T01:37:29.000-0400,"Executable-model build error with ""matches"" and fuction with a fact property as an argument",Resolved,bug,Bug
2019-08-05T09:01:18.000-0400,DROOLS-4398,Done,"Test ""RemoteKieSessionImplTest"" in HA CEP reference implementation is freezing time to time.",Major,Massimiliano Dessi,,2019-08-02T09:46:40.000-0400,"Freezing test ""RemoteKieSessionImplTest"" in HA CEP reference implementation",Resolved,bug,Bug
2019-08-05T10:17:50.000-0400,DROOLS-4405,Cannot Reproduce,"The issue is that user can not change/define the expression of any node. The context menu for choosing expression type can not be displayed.

# Create new dmn model
# Put new Decision node to the canvas
# Open the expression editor of the Decision node
# Try to change the expression type either by mouse or keyboard",Blocker,Michael Anstis,,2019-08-05T10:07:19.000-0400,[DMN Designer] Can not change/define decision expression,Closed,bug,Bug
2019-08-05T06:30:43.000-0400,DROOLS-4390,Done,None,Major,Matteo Mortari,,2019-08-02T04:45:26.000-0400,DMN correct FEEL grammar exclusion,Resolved,bug,Bug
2019-08-05T04:48:53.000-0400,DROOLS-4400,Done,"The latest version (1.6) of Scenario Simulation model is not compatible with previous Scenario Simulation model (1.5). If user tries to open Scenario Simulation created on older product version, an error is thrown. For more detail see the attache Plane Boarding project. There are *.scesim* files with Scenario Simulation model version 1.5, however they can not be opened in business central that has the latest Scenario Simulation model version 1.6.

h2. Reproducer/Accepetance test
https://github.com/jboss-integration/bxms-qe-tests/blob/master/test-kie-wb/src/test/java/org/jboss/qa/brms/authoring/guided/editors/PlaneBoardingTest.java",Critical,Gabriele Cardosi,,2019-08-05T03:46:19.000-0400,Can not open a Scenario Simulation model version 1.5,Closed,bug,Bug
2019-08-02T05:30:42.000-0400,DROOLS-4379,Done,None,Major,Matteo Mortari,,2019-07-30T11:18:33.000-0400,DMN decision table input expr collection with allowedValues,Resolved,bug,Bug
2019-08-02T12:11:00.000-0400,DROOLS-4054,Done,"JBPM-8506 fixes logging issues related to Kie server. However it also reveals that [ServiceDiscoveryImpl|https://github.com/kiegroup/droolsjbpm-knowledge/blob/master/kie-api/src/main/java/org/kie/api/internal/utils/ServiceDiscoveryImpl.java#L105] logs content of classloader into application server log. This becomes quite annoying specially on WebSphere as the log contain all the classpath entries. 

You can see the result the logging in attachment, search for entries done by ServiceDiscoveryImpl.",Major,Mario Fusco,,2019-05-20T07:52:58.000-0400,Classloader content is printed when kie.conf files are loaded,Resolved,bug,Bug
2019-07-29T03:26:16.000-0400,DROOLS-4305,Explained,"We have built a logger file for our rules that implements org.kie.api.event.rule.RuleRuntimeEventListener.

Whenever the objectUpdated(ObjectUpdatedEvent) method is called, the ObjectUpdatedEvent contains the values of both the old Object and new object (or getOldObject() and getObject() )

However, it seems that getOldObject() is always returning the same value as getObject().

Having both values would be very helpful in debugging rules.",Optional,Mario Fusco,,2019-07-10T11:38:31.000-0400,getOldObject() of ObjectUpdatedEvent is returning same value as getObject(),Resolved,bug,Bug
2019-07-26T16:21:03.000-0400,DROOLS-4364,Done,"h3. Need to update the DMN toolbar download buttons based on the context described in initial issue. 

Implementation suggestions can be found in this slide deck. https://docs.google.com/presentation/d/1uq3DZ95LWODhmdL8p9A-xaw8sufe3lBVCWF8E_qVn_g/edit?usp=sharing

Suggestions are as follows:
1. Remove download button that appears as icon dropdown, and leave the Download button that appears spelt out.
2. Make that download button a drop down meny that includes all possible downloading options, separated into two parts - download DMN model and download documentation.
3. Remove download button in the documentation sub tab (that appears on top right of documentation example) to avoid repetition, and just leave the print button there. 

---------------
h3. Context:

Today users can:

1) Download the diagram picture by using this component:
 !component-1.png|thumbnail! 

2) Download the DMN file by using this component:
 !component-2.png|thumbnail! 

3) Print or Download the documentation as PDF by using the *Print* button (into the Documentation tab):
 !component-3.png|thumbnail! 

4) Download the documentation as DOC by using the *Download .doc file* button (into the Documentation tab):
 !component-3.png|thumbnail! 

----

h3. Problem:

The ""Download"" concept is getting confusing for users.

As a user, I want to be able to:
- Download the documentation as a .PDF file
- Download the documentation as a .DOC file
- Print the documentation


----
h3. Notice:

This component can be removed (if UX considers that it's necessary):
 !component-1.png|thumbnail! 
",Major,Guilherme Gomes,,2019-07-24T11:56:44.000-0400,[DMN Designer] Download buttons UX (Development task),Closed,bug,Bug
2019-07-30T00:42:16.000-0400,DROOLS-4369,Done,See the attached picture. The cancel button in add global variable dialog is not styled properly.,Trivial,Jozef Marko,,2019-07-26T06:59:55.000-0400,Global Variable Dialog - Cancel button style,Resolved,bug,Bug
2019-07-26T11:10:33.000-0400,DROOLS-4358,Done,"If there are several lines in a cell of CONDITION(LHS), line separators are escaped, and results in  build failure.

Output from SpredSheetCompiler:

{noformat}
rule ""multiple lines in action_12""
    when
        $fact:Person(name == ""John"",\nage >= 20)
    then
　　...
end
{noformat}

Error when building:

{noformat}
java.lang.AssertionError: [7,30]: [ERR 101] Line 7:30 no viable alternative at input '\' in rule ""multiple lines in action_12""
[0,0]: Parser returned a null Package
{noformat}

Escaping should be done only for literal String?",Major,Mario Fusco,,2019-07-23T11:53:11.000-0400,line separators in CONDITION column  in spreadsheet are escaped,Resolved,bug,Bug
2019-07-25T13:04:34.000-0400,DROOLS-4354,Done,"A NoSuchMethod exception is thrown when user tries to expand the diagram properties panel and having some dmn diagram node selected at the same time.

h3. Manual Acceptance test
On both Chrome and Firefox
- Select node, expand diagram properties (/)
- Select diagram, expand diagram properties (/)
- Expand diagram properties, select node (/)
- Expand diagram properties, select diagram (/)
- Expand diagram properties, switch between multiple nodes (/)",Blocker,Paulo Rego,,2019-07-22T07:58:37.000-0400,[DMN Designer] No Such Method exception is thrown,Resolved,bug,Bug
2019-07-29T03:13:00.000-0400,DROOLS-2150,Cannot Reproduce,"2017-11-23 10:52:11,064 INFO  [org.quartz.core.JobRunShell] (JbpmScheduler_Worker-4)    Job jbpm.Timer-ExpireJobContext-6 threw a JobExecutionException:   : org.quartz.JobExecutionException: Exception when executing scheduled job [See nested exception: java.lang.NullPointerException]
	at org.jbpm.process.core.timer.impl.QuartzSchedulerService$QuartzJob.execute(QuartzSchedulerService.java:341)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:216)
	at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:549)
Caused by: java.lang.NullPointerException
	at org.jbpm.process.core.timer.impl.QuartzSchedulerService$InmemoryTimerJobInstanceDelegate.call(QuartzSchedulerService.java:401)
	at org.jbpm.process.core.timer.impl.QuartzSchedulerService$InmemoryTimerJobInstanceDelegate.call(QuartzSchedulerService.java:348)
	at org.jbpm.process.core.timer.impl.QuartzSchedulerService$QuartzJob.execute(QuartzSchedulerService.java:322)
	... 2 more
",Major,Mario Fusco,,2017-11-23T08:17:44.000-0500,QuartzSchedulerService NullPointerException,Resolved,bug,Bug
2019-07-25T09:32:59.000-0400,DROOLS-4357,Done,"There is two ""Download"" buttons in Guided Decision Tables Editor, both are working",Major,Toni Rikkola,,2019-07-23T08:52:32.000-0400,Two download buttons are in Guided Decision Tables,Resolved,bug,Bug
2019-07-25T17:30:22.000-0400,DROOLS-3964,Done,Issue spotted during DROOLS-3832 review. The included nodes should be read-only. However the included node can be renamed by double click on canvas.,Major,Daniel José dos Santos,,2019-05-03T04:04:45.000-0400,[DMN Designer] Included Models - Node can be renamed,Resolved,bug,Bug
2019-07-29T03:14:59.000-0400,DROOLS-2319,Cannot Reproduce,"Hi,

When I pass an object as parameter to my decison table. this object is set (populated with already assigned values) in conditions but not in action columns. When I call some getters in Action columns already set before , I got a null value in all fields ! It works fine in version 7.4.1.Final : I got all values , but when I switch to the version  7.6.0.Final , it doesn't work  !

I thank you,
Adil
",Critical,Mario Fusco,,2018-02-12T11:24:33.000-0500,Object passed to Decision Table not set in Action columns,Resolved,bug,Bug
2019-07-24T03:50:44.000-0400,DROOLS-4344,Done,"In a table such as
 !image-2019-07-19-09-11-29-910.png|thumbnail! 

rule 3, 6 are not in 2NF and this is already correctly reported.

Was missing to report rules 4,5,6 are also violating 2NF because of input 2.",Major,Matteo Mortari,,2019-07-19T03:12:21.000-0400,DMN DT Analysis normalize Contractions for complete 2NF check,Resolved,bug,Bug
2019-07-24T03:51:20.000-0400,DROOLS-4333,Done,None,Major,Matteo Mortari,,2019-07-17T12:04:27.000-0400,DMN PMML integration wrong lookup when null field name,Resolved,bug,Bug
2019-07-25T03:35:30.000-0400,DROOLS-4362,Done,"When parsing a date in a rule, e.g. in constraint _ChildFactWithObject( date < ""10-Jul-1974"" )_, the parsing fails with exception: java.time.format.DateTimeParseException: Text '10-Jul-1974' could not be parsed at index 3. 

This is caused by not providing English locale to the date formatter created in PackageModel. ",Major,Tibor Zimanyi,,2019-07-24T07:33:13.000-0400,Fix date parsing in executable model on non English locale,Resolved,bug,Bug
2019-07-24T03:29:32.000-0400,DROOLS-4342,Done,"When written a rule that does a sum using ‘from accumulate’. The rule validates successfully. However, when trying to test it, is returned a very generic error message: Error: argument type mismatch.",Major,Luca Molteni,,2019-07-18T10:13:07.000-0400,"Using BigDecimal with From Accumulate causes an ""Error: argument type mismatch""",Resolved,bug,Bug
2019-07-25T04:18:37.000-0400,DROOLS-4251,Done,"User is unable to save the DMN diagram if there is a validation error, for example non existing variable reference.",Major,Michael Anstis,,2019-06-25T07:02:05.000-0400,[DMN Designer] User can not save diagram with validation errors,Resolved,bug,Bug
2019-07-24T03:52:16.000-0400,DROOLS-4338,Done,"In a case such as
 !image-2019-07-18-10-45-22-044.png|thumbnail! 

BEFORE:
 !image-2019-07-18-10-45-52-165.png|thumbnail! 

EXPECTED
{code:java}
Message [id=0, level=WARNING, path=null, line=17, column=-1
   text=DMN: Overlap detected: Overlap values: [ <60, >=30 ] for rules: [3, 1] (DMN id: _eb02106a-cee1-47f5-a9d9-3160c5ac868b, DMN Validation, Decision Table Analysis, Overlap Analysis) ]
Message [id=0, level=WARNING, path=null, line=17, column=-1
   text=DMN: Overlap detected: Overlap values: [ >=60, <30 ] for rules: [2, 3] (DMN id: _eb02106a-cee1-47f5-a9d9-3160c5ac868b, DMN Validation, Decision Table Analysis, Overlap Analysis) ]
Message [id=0, level=WARNING, path=null, line=17, column=-1
   text=DMN: Overlap detected: Overlap values: [ >=60, >=30 ] for rules: [2, 3, 1] (DMN id: _eb02106a-cee1-47f5-a9d9-3160c5ac868b, DMN Validation, Decision Table Analysis, Overlap Analysis) ]
Message [id=0, level=WARNING, path=null, line=17, column=-1
   text=DMN: First Normal Form Violation: hit policy Rule Order is a violation of First Normal Form; consider changing for example to Output Order or Collect (DMN id: _eb02106a-cee1-47f5-a9d9-3160c5ac868b, DMN Validation, Decision Table Analysis, First Normal Form Violation) ]

...

10:42:35.190 [main] DEBUG o.k.d.v.d.AbstractDTAnalysisTest.debugAnalysis:95 - 
Overlaps:
Overlap values [ -Inf .. 60 ) [ 30 .. +Inf ] for rules: [3, 1]
Overlap values [ 60 .. +Inf ] [ -Inf .. 30 ) for rules: [2, 3]
Overlap values [ 60 .. +Inf ] [ 30 .. +Inf ] for rules: [2, 3, 1]
{code}
",Major,Matteo Mortari,,2019-07-18T04:46:54.000-0400,DMN DT Analysis normalize redundant overlaps skip no-interval,Resolved,bug,Bug
2019-07-24T12:03:52.000-0400,DROOLS-4360,Done,"In Spreadsheet decision tables,  RuleSet property SequentialMaxPriority and SequentialMinPriority are for controlling the salience number range of Rules generated from Decision Tables.

https://access.redhat.com/documentation/en-us/red_hat_decision_manager/7.4/html/designing_a_decision_service_using_spreadsheet_decision_tables/decision-tables-defining-proc#decision-tables-rule-set-entries-ref

By setting Sequential=true without SequentialMaxPriority and SequentialMinPriority, the salience starts with 65535 and it's decremented one by one through all rules across multiple RuleTables.

On the other hand, by setting Sequential=true WITH SequentialMaxPriority,
every RuleTables starts with value specified by  SequentialMaxPriority as salience.
i.e. first rule of each RuleTebles has same salience if there are multiple RuleTables.

In other words, when SequentialMaxPriority is set, start value of salience is reset per RuleTables, but this is unexpected.",Major,Mario Fusco,,2019-07-24T04:54:49.000-0400,Salience assignment behaviour is different when SequentialMaxPriority is set,Resolved,bug,Bug
2019-07-24T11:01:17.000-0400,DROOLS-4188,Done,It appears the problem is when using different kmodules,Major,Luca Molteni,,2019-06-17T09:10:00.000-0400,Error while using Declared Types in different packages,Resolved,bug,Bug
2019-07-19T03:38:04.000-0400,DROOLS-4207,Done,None,Major,Luca Molteni,,2019-06-21T12:03:07.000-0400,Error while beta joining short and integer fields,Resolved,bug,Bug
2019-07-19T10:07:49.000-0400,DROOLS-4284,Done,"When variables are used on the fact patterns above adding ""the following does not exist"" below throws NPE.",Major,Toni Rikkola,,2019-07-02T08:58:01.000-0400,"Adding ""The following does not exist:"" to LHS of the rule causes exception",Resolved,bug,Bug
2019-07-19T13:06:38.000-0400,DROOLS-4288,Done,"When there is a version change in drools-compiler from `7.20.0.Final` to `7.21.0.Final` some rules are looping recursively.

*Code in github:*

[The working version|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.20]

[The recursively looping version|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.21]

[The change between working and looping version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21]



*More details*

When I fire a rule whose `then` part modifies a fact that is already checked in the `when` part:

{code:java}
rule ""rule 1.1""
  when
    $sampleDomain: SampleDomain(instanceVariable2 == ""Value of instance variable"")
  then
    System.out.println(""Rule 1.1 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}
it doesn't loop recursively.



But when I call another rule which call a static function from another class:

{code:java}
rule ""rule 1.2""
  when
    $sampleDomain: SampleDomain(CoreUtils.anotherFunction())
  then
    System.out.println(""Rule 1.2 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}

it loops recursively.

The class with static function is

{code:java}
import com.drool_issue.domain.SampleDomain;

public class CoreUtils {
	
	public static boolean anotherFunction() {
		System.out.println(""anotherFunction() inside CoreUtils"");
		return true;
	}
	
	public static boolean anotherFunction(SampleDomain sampleDomain) {
		System.out.println(""anotherFunction(SampleDomain sampleDomain) inside CoreUtils"");
		return true;
	}

}
{code}

My domain file is:

{code:java}
public class SampleDomain {
	private int instanceVariable1;
	private String instanceVariable2;
	private int instanceVariable3;
	
	
	public int getInstanceVariable1() {
		return instanceVariable1;
	}
	public void setInstanceVariable1(int instanceVariable1) {
		this.instanceVariable1 = instanceVariable1;
	}
	public String getInstanceVariable2() {
		return instanceVariable2;
	}
	public void setInstanceVariable2(String instanceVariable2) {
		this.instanceVariable2 = instanceVariable2;
	}
	public int getInstanceVariable3() {
		return instanceVariable3;
	}
	public void setInstanceVariable3(int instanceVariable3) {
		this.instanceVariable3 = instanceVariable3;
	}
	
	

}
{code}

This is only caused after version change from `7.20.0.Final` to `7.21.0.Final`.  Any guess on what the problem might be?


When I further looked into the problem I saw this too.

When we add two functions into the `SampleDomain` class ie

{code:java}
    public boolean anotherFunction() {
		return true;
	}
	
	public boolean anotherFunction(SampleDomain sampleDomain) {
		return true;
	}
{code}

and use this in the rule like:

{code:java}
rule ""rule 1.4""
  when
    $sampleDomain: SampleDomain(anotherFunction())
  then
    System.out.println(""Rule 1.4 fired"");
    modify($sampleDomain){
    		setInstanceVariable1(3)
    }
end
{code}

and


{code:java}
rule ""rule 1.5""
  when
    $sampleDomain: SampleDomain(anotherFunction($sampleDomain))
  then
    System.out.println(""Rule 1.5 fired"");
    modify($sampleDomain){
    		setInstanceVariable3(4)
    }
end
{code}

these also loops recursively.

*Code in github:*

[The recursive looping when using non static methods|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.20_non_static_methodes]

[The change between working and above version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.20_non_static_methodes]

Also when any of the static method is made non static then method from the domain class is called even though the static method is specified in the rule.

*Code portions to be noted here are:*

[Rule where static method is called.|https://github.com/padippist/DroolsIssueReporting/blob/bde2804b250babf11cf5d3cf48640d9e6c88f5b3/src/main/resources/rules/rule1.drl#L21]

[Another rule which also call the static method.|https://github.com/padippist/DroolsIssueReporting/blob/bde2804b250babf11cf5d3cf48640d9e6c88f5b3/src/main/resources/rules/rule1.drl#L32]

[The static access modifier removed from the functions which where previously static.|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21_weird_behaviors#diff-4e0f238b1184e2267cb5663b9afeaa6fL7]

*Code in github:*

[Weird behaviour when removing static modifier for the functions.|https://github.com/padippist/DroolsIssueReporting/tree/issue_v_7.21_weird_behaviors]

[The change between working and above version|https://github.com/padippist/DroolsIssueReporting/compare/issue_v_7.20...issue_v_7.21_weird_behaviors]


*All this are caused in versions after `7.20.0.Final`, ie `7.21.0.Final`, `7.22.0.Final` and `7.23.0.Final`*",Major,Mario Fusco,,2019-07-03T14:43:51.000-0400,Infinite recursion in drools after version change from v7.20 to v7.21,Closed,bug,Bug
2019-07-19T04:54:31.000-0400,DROOLS-4272,Done,describe the design of the doc DROOLS-3819 in a publicly-available blog post for general public consumption ,Major,Edoardo Vacchi,,2019-07-01T04:08:37.000-0400,Blog post about Rule Units,Resolved,bug,Bug
2019-07-20T06:14:58.000-0400,DROOLS-4278,Done,"If a kjar contains multiple KieBases, and that kjar is loaded into a container owned by a KieServer, calling the ApplyPmmlModelCommand results in a ClassCastException when the command tries to cast the org.kie.api.runtime.Context to a org.drools.core.command.RequestContextImpl. ",Major,Lance Leverich,,2019-07-01T21:58:26.000-0400,Applying PMML model on kie-server fails,Resolved,bug,Bug
2019-07-19T03:59:52.000-0400,DROOLS-4297,Done,"When Strings are concatenated in the WHEN clause of a Guided Rule Template, the leading and trailing quotation marks are removed, resulting in invalid syntax.",Major,Toni Rikkola,,2019-07-05T13:26:09.000-0400,Guided Rule Template removes quotation marks in concatenated String,Resolved,bug,Bug
2019-07-19T05:36:07.000-0400,DROOLS-2548,Done,"org.kie.workbench.common.services.refactoring.backend.server.indexing.AbstractFileIndexer.toKObject Unable to index 'default://master@Repo/rules/src/main/resources/rules/*****.template'.
 java.lang.IllegalStateException: Unknown PartType: dialect
        at org.kie.workbench.common.services.refactoring.service.PartType.getPartTypeFromAttribueDescrName(PartType.java:164)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateIndexVisitor.visitRuleAttribute(GuidedRuleTemplateIndexVisitor.java:104)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateIndexVisitor.visit(GuidedRuleTemplateIndexVisitor.java:75)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateIndexVisitor.visitRuleModel(GuidedRuleTemplateIndexVisitor.java:194)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateIndexVisitor.visit(GuidedRuleTemplateIndexVisitor.java:73)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateIndexVisitor.visit(GuidedRuleTemplateIndexVisitor.java:67)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateFileIndexer.fillIndexBuilder(GuidedRuleTemplateFileIndexer.java:55)
        at org.kie.workbench.common.services.refactoring.backend.server.indexing.AbstractFileIndexer.toKObject(AbstractFileIndexer.java:78)
        at org.drools.workbench.screens.guided.template.server.indexing.GuidedRuleTemplateFileIndexer$Proxy$_$$_WeldClientProxy.toKObject(Unknown Source)
        at org.uberfire.ext.metadata.io.BatchIndex$3.visitFile(BatchIndex.java:178)
        at org.uberfire.ext.metadata.io.BatchIndex$3.visitFile(BatchIndex.java:144)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:71)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:96)
        at org.uberfire.java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:48)
        at org.uberfire.java.nio.file.Files.walkFileTree(Files.java:1031)
        at org.uberfire.java.nio.file.Files.walkFileTree(Files.java:1052)
        at org.uberfire.ext.metadata.io.BatchIndex.run(BatchIndex.java:142)
        at org.uberfire.ext.metadata.io.BatchIndex.run(BatchIndex.java:127)
        at org.uberfire.ext.metadata.io.BatchIndex$1.run(BatchIndex.java:98)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:748)",Major,Toni Rikkola,,2018-05-14T15:26:14.000-0400,java.lang.IllegalStateException: Unknown PartType: dialect,Resolved,bug,Bug
2019-07-18T08:08:20.000-0400,DROOLS-4334,Done,"When comparing an Integer taken from Map.get() with a String, Mvel coerces the type so they are compared as Integers.

For example, here $map.get(""key"") returns Integer 5, $status is String ""10"". So it doesn't match (expected).
{noformat}
rule R when
  FactWithMap( $map : valueMap )
  Person( $status : status, $map.get(""key"") >= $status)
then
end
{noformat}

However, after jitting, the constraint is evaluated as true so the rule is fired (unexpected).",Major,Mario Fusco,,2019-07-18T00:35:00.000-0400,Type coercion with Map.get() after jitting,Resolved,bug,Bug
2019-07-18T10:38:12.000-0400,DROOLS-4331,Done,"When copying a guided rule that contains a BigDecimal field, it adds another letter ""B"" in the drools file. 

Initial file: 

package com.myspace.reproducer_02415008;

import java.lang.Number;

rule ""GuidedRule""
	dialect ""mvel""
	when
		DataObject( field == 0.0B )
	then
end



--------

Copied file source result code. Note the two B's :

package com.myspace.reproducer_02415008;

import java.lang.Number;

rule ""teste""
	dialect ""mvel""
	when
		DataObject( field == 0.0BB )
	then
end


",Critical,Toni Rikkola,,2019-07-17T03:45:07.000-0400,Error when copying Guided Rule with Bigdecimal,Resolved,bug,Bug
2019-07-15T11:54:28.000-0400,DROOLS-4289,Done,None,Major,Mario Fusco,,2019-07-04T04:31:02.000-0400,Multiple session serialization cycles can cause an overflow in the FactHandle id,Resolved,bug,Bug
2019-07-15T07:22:29.000-0400,DROOLS-4275,Done,Drools-wb webapp jboss does not start due to ambiguous dependencies at WELD ,Blocker,Gabriele Cardosi,,2019-07-01T10:19:28.000-0400,Drools-wb webapp does not start,Closed,bug,Bug
2019-07-15T05:08:27.000-0400,DROOLS-4312,Done,None,Blocker,Yeser Amer,,2019-07-15T03:48:44.000-0400,Impossibile to deploy drools-wb application with gwt:run ,Resolved,bug,Bug
2019-07-12T06:00:34.000-0400,DROOLS-3515,Done,"The ""validate"" button at the top does nit seem to be validating feel expressions:
 !image-2019-01-14-09-24-07-415.png|thumbnail! 

The input of this Decision is a ""person"" object:
 !image-2019-01-14-09-25-01-777.png|thumbnail! 
and this is the DRG:
 !image-2019-01-14-09-25-16-907.png|thumbnail! 

The validation should say that this literal expression is not valid.

h2. Acceptance test
Validation button should report
- Non existing variable name (/)
- Existing variable name, but not connected (/)
- Invalid operator (+++, &&, ..) (/)
- Unknown keyword (switch) (/)
- Multiple diagrams opened (/)",Major,Michael Anstis,,2019-01-14T03:25:55.000-0500,[DMN Designer] Validation: Validate button should compile the DMN file and report issues,Resolved,bug,Bug
2019-07-10T12:22:09.000-0400,DROOLS-4276,Done,Executable model generated for rules with accumulates uses reflection and then cannot be compiled natively. ,Major,Mario Fusco,,2019-07-01T11:46:25.000-0400,Rules with accumulate cannot be compiled natively,Resolved,bug,Bug
2019-07-10T08:20:04.000-0400,DROOLS-4292,Done,"executable-model build fails when a query defined with more than 5 arguments.

for example)
{noformat}
query peeps( String name, int age, long ageLong, int id, String likes )
   Person( name := name, age := age, ageLong := ageLong, id := id, likes := likes )
end
{noformat}

{noformat}
java.lang.ArrayIndexOutOfBoundsException: 5
	at org.drools.model.QueryDef.getQueryClassByArity(QueryDef.java:30)
	at org.drools.modelcompiler.builder.generator.QueryGenerator.getQueryType(QueryGenerator.java:120)
	at org.drools.modelcompiler.builder.generator.QueryGenerator.processQueryDef(QueryGenerator.java:42)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.generateModel(ModelGenerator.java:143)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.compileKnowledgePackages(ModelBuilderImpl.java:147)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildRules(ModelBuilderImpl.java:97)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildPackages(ModelBuilderImpl.java:66)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:108)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:100)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:261)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:75)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:271)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:239)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:208)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:196)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:144)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:125)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:114)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:107)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:103)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:99)
	at org.drools.modelcompiler.QueryTest.testQuery5Args(QueryTest.java:884)
{noformat}",Major,Luca Molteni,,2019-07-05T03:40:25.000-0400,executable-model fails with more than 5 arguments query,Resolved,bug,Bug
2019-07-10T08:35:01.000-0400,DROOLS-4123,Done,"When I want to build a project using kjar packaging type, with drools versions higher than 7.7.0,by typing the command ""mvn clean package"" it throws an error message. However, for lower versions of drools, for example 7.6.0, build is successful.  I tried all versions up to 7.22.0",Major,Luca Molteni,,2019-06-04T07:02:28.000-0400,Drools project build failure with kjar packaging starting from version 7.7,Resolved,bug,Bug
2019-07-10T08:19:46.000-0400,DROOLS-2830,Done,"The kie-maven-plugin fails to build a KieBase when it uses a custom operator defined in the projects' kmodule.xml. 

As far as I can tell, it seems like the kie-maven-plugin is not even using the project's kmodule.xml but it is using a predefined one.

The same project works when using Drools 6.5.

I'm attaching a simple project showing this problem. The project won't build when using version 7.9 but it will work fine then using version 6.5. Just unzip the .zip file and run _mvn clean package_",Major,Luca Molteni,,2018-08-06T03:19:13.000-0400,kie-maven-plugin can't resolve custom operators declared in project's kmodule.xml,Resolved,bug,Bug
2019-07-02T09:30:35.000-0400,DROOLS-4277,Done,"An expression with an incompatible accumulate pattern like 

$max : Double() from accumulate ( $num : Integer(); max($num) )

should not compile.",Major,Mario Fusco,,2019-07-01T12:56:31.000-0400,Incompatible pattern for accumulate expression shouldn't compile,Resolved,bug,Bug
2019-07-04T04:29:30.000-0400,DROOLS-4285,Done,"In a live environment with ~1300 assets, the project build takes ~20 minutes when invoked in decision-central. 

Using a debugger, I observe that one execution of KieModuleMetaInfo.unmarshallMetaInfos() takes 20 seconds. It's called from EnumServiceImpl.validate().

{noformat}
at org.drools.core.rule.KieModuleMetaInfo.unmarshallMetaInfos(KieModuleMetaInfo.java:49)
at org.kie.scanner.KieModuleMetaDataImpl.indexMetaInfo(KieModuleMetaDataImpl.java:251)
at org.kie.scanner.KieModuleMetaDataImpl.indexKieModule(KieModuleMetaDataImpl.java:100)
at org.kie.scanner.KieModuleMetaDataImpl.<init>(KieModuleMetaDataImpl.java:85)
at org.kie.scanner.KieModuleMetaData$Factory.newKieModuleMetaData(KieModuleMetaData.java:60)
at org.kie.scanner.KieModuleMetaData$Factory.newKieModuleMetaData(KieModuleMetaData.java:48)
at org.drools.workbench.screens.enums.backend.server.EnumServiceImpl.doValidation(EnumServiceImpl.java:272)
at org.drools.workbench.screens.enums.backend.server.EnumServiceImpl.validate(EnumServiceImpl.java:263)
at org.drools.workbench.screens.enums.backend.server.EnumServiceImpl.validate(EnumServiceImpl.java:253)
at org.drools.workbench.screens.enums.backend.server.EnumServiceImpl$Proxy$_$$_WeldClientProxy.validate(Unknown Source)
at org.kie.workbench.common.services.backend.builder.core.Builder.build(Builder.java:238)
{noformat}

However, {{EnumServiceImpl.validate()}} is repeatedly called in a loop in Builder.build(). So all "".enumeration"" files call this method (this project has 18 .enumeration files). It results in 6 min in my env.

Probably the unmarshalled KieModuleMetaInfo can be cached?
",Critical,Michael Anstis,,2019-07-02T09:48:27.000-0400,Slow build due to inefficient EnumServiceImpl.doValidation() call,Resolved,bug,Bug
2019-07-02T09:32:11.000-0400,DROOLS-4244,Done,"When user click on header cell, test tool dock should be opened and focused",Major,Yeser Amer,,2019-06-24T13:05:41.000-0400,Test Scenario: test tool dock is not automatically opened when click on header,Resolved,bug,Bug
2019-07-01T06:38:59.000-0400,DROOLS-4263,Done,"kie-maven-plugin doesn't generate kbase.cache since 7.10.0.Final. It was generated in 7.9.0.Final.

The change was introduced by this commit:

https://github.com/kiegroup/droolsjbpm-integration/commit/e2129e0d

It seems to presume ""container == null"" in kie-maven-plugin but actually not null so writeKieModuleMetaInfo() is not executed.

",Major,Massimiliano Dessi,,2019-06-26T23:10:37.000-0400,kbase.cache is not generated in kjar by kie-maven-plugin,Resolved,bug,Bug
2019-06-26T03:26:40.000-0400,DROOLS-4072,Done,In the attached video is shown sequence of steps that shows search query is ignored.,Major,Yeser Amer,,2019-05-23T05:57:40.000-0400,Search query is not empty but all data objects listed,Resolved,bug,Bug
2019-06-25T08:39:52.000-0400,DROOLS-4217,Done,If a scenario fails with a wrong expect value on a collection the actual value suggested to accept is wrong and if accepted the scenario corrupts,Blocker,Daniele Zonca,,2019-06-24T07:41:23.000-0400,Test Scenario: corrupted scenario when user accepts error suggestion for collection,Closed,bug,Bug
2019-06-25T07:01:06.000-0400,DROOLS-4246,Done,"Test testProxy() fails randomly. Problem is that it checks for size from all repositories, however it needs to check just the count of test repositories that needs to be proxied. 

[1] https://github.com/kiegroup/kie-soup/blob/master/kie-soup-maven-utils/kie-soup-maven-integration/src/test/java/org/appformer/maven/integration/MavenRepositoryTest.java#L52",Major,Tibor Zimanyi,,2019-06-25T03:55:21.000-0400,testProxy in MavenRepositoryTest in kie-soup fails randomly,Resolved,bug,Bug
2019-06-26T01:13:53.000-0400,DROOLS-4131,Done,"Can't use  ""Template key"" as a list when using option ""is contained in the (comma separated) list"" for Integer field of Data Object in Guided Rule Templates",Major,Jozef Marko,,2019-06-05T10:18:05.000-0400,"Can't use ""is contained in the list"" for Integer field",Resolved,bug,Bug
2019-06-24T05:12:22.000-0400,DROOLS-4175,Done,"When beta joining two fields with a BigDecimal or BigInteger field, if a field is assigned as a binding the drools-model-compiler fails the compilation.

                ""import "" + Result.class.getCanonicalName() + "";"" +
                        ""import "" + Person.class.getCanonicalName() + "";"" +
                        ""rule R when\n"" +
                        ""  $r : Result()\n"" +
                        ""  $markV : Person(name == \""Mark\"", $markMoney : money)\n"" +
                        ""  $richerV : Person(name != \""Mark\"", money > $markMoney)\n"" +
                        ""then\n"" +
                        ""  $r.setValue($richerV.getName() + \"" is richer than \"" + $markV.getName());\n"" +
                        ""end"";",Major,Luca Molteni,,2019-06-13T11:12:16.000-0400,Error in compiling BigLiteral binding as literal,Resolved,bug,Bug
2019-06-24T04:29:57.000-0400,DROOLS-4078,Done,"To reproduce the issue:
Load Prova.dmn
Create a Scenario based on prova.dmn
Try to remove ""list/value"" column (this column represents a simple List<String> )
Try to add it again and double click on value cell: an exception is thrown.",Major,Yeser Amer,,2019-05-27T05:42:05.000-0400,Adding a deleted 'simple type list' in DMN type scenario throws an error,Resolved,bug,Bug
2019-06-24T05:22:16.000-0400,DROOLS-4193,Done,None,Major,Matteo Mortari,,2019-06-18T04:47:36.000-0400,DMN DT Analysis handling of explicit null in InputClause enum,Resolved,bug,Bug
2019-06-20T01:01:06.000-0400,DROOLS-4144,Done,When user imports some dmn model (see the attahced a.dmn and a-2.dmn) then he do some changes and save such imported model. He is unable to reopen such model. There is error in the server log.,Critical,Daniel José dos Santos,,2019-06-07T06:09:04.000-0400,[DMN Designer] Imported model is broken after saving changes,Resolved,bug,Bug
2019-06-19T03:27:04.000-0400,DROOLS-4186,Done,"The Guided Rule is omitting one parenthesis from the generated DRL source. This behavior only happens on LHS.

No errors are raised on the server logs.

Expected source code:
{code:java}
		Silverware( type in  (""Spoon"", ""Spoon (fancy)"") )
{code}
Generated source code:
{code:java}
		Silverware( type in  (""Spoon"", ""Spoon (fancy"") )
{code}

h3. Acceptance test
Set up column with *is contained in* operator and type value
- a, b ,c (/)
- (a, b, c) (/)
- a(), b(), c() (/)
- (a(), b(), c()) (/)
",Major,Toni Rikkola,,2019-06-17T05:31:26.000-0400,Guided Rules does not output parenthesis in DRL,Resolved,bug,Bug
2019-06-18T15:30:31.000-0400,DROOLS-4155,Done,"If user included a *PMML* model into a DMN diagram, then he has possibility to define PMML function invocation. Grid for such invocation contains placeholders saying that document and model needs to be specified. The issue is placeholders doesn't column width and thus are not readable. See the attached picture.

h3. Acceptance test
- Function column width, resizeable (/)
- Change Expression type to Function (/)
- Change Function Type (FEEL / JAVA / PMML) (/)
- Undo function column width resize (/)
- Decision > Context > Function column width, resizeable (/)
- BKM > Function column width, resizeable (x) DROOLS-4165",Minor,Michael Anstis,,2019-06-11T03:13:47.000-0400,[DMN Designer] Placeholder doesn't fit a column,Resolved,bug,Bug
2019-06-18T11:59:02.000-0400,DROOLS-4143,Won't Fix,"Reproducer
https://github.com/danielezonca/tempproject/

Change in the pom.xml generateModel to NO to have the error",Major,Mario Fusco,,2019-06-07T04:19:37.000-0400,Strange error when generateModel=NO,Resolved,bug,Bug
2019-06-18T08:12:28.000-0400,DROOLS-4154,Done,"During testing of the WB changes for PMML support [~jomarko] found the example PMML files referenced by our KIE documentation failed to have a number of models listed against their document definition.

On examination {{PMMLInfo.from(..)}} throws a NPE if the PMML model lacks an _output_ (see L#57 that throws the NPE if the model has a {{null}} _output_). I've attached the files [~jomarko] used for his testing.",Major,Matteo Mortari,,2019-06-10T15:29:12.000-0400,kie-dmn-core: PMMLInfo NPE when model has null output,Resolved,bug,Bug
2019-06-18T08:13:11.000-0400,DROOLS-4156,Done,"This issue was revealed as part of DROOLS-4042 review.

- Please create function invocation like shown below:
-- !no-doc-no-model.png|thumbnail! 
- Please notice *no* Document and *no* Model are provided
- Save the asset and notice the alerts panel has message about required both Document and Model
- Now provide the Document and save the asset
- The previously shown message is completely gone, I would expect message about still missing Model",Major,Matteo Mortari,,2019-06-11T03:22:13.000-0400,Compilation requires PMML Document and Model but passes even if just Document is present,Resolved,bug,Bug
2019-06-18T04:12:48.000-0400,DROOLS-4165,Done,"BKM Function column width is not preserved between reopening the DMN diagram. For more details see the attached video.

h3. Acceptance test
- Width preserved, BKM (/)
- Width preserved, Decision (/)
- Width preserved, Decision > Context (/)
- Width preserved, Function change (/)",Minor,Michael Anstis,,2019-06-12T09:07:44.000-0400,[DMN Designer] BKM Function column width,Resolved,bug,Bug
2019-06-17T09:11:59.000-0400,DROOLS-4120,Done,"When generating executable model with option -DgenerateModel=Yes,
.drl is included in generated jar.
This does not happen always, but surely happens some times, especially generating on JBDS. Once issue happens , it also happens with high probability when building it by command 'mvn clean install -DgenerateModel=YES' from command line.",Major,Luca Molteni,,2019-06-04T02:35:12.000-0400,executable-model: .drl is included in jar even with -DgenerateModel=YES,Resolved,bug,Bug
2019-06-17T09:34:08.000-0400,DROOLS-4140,Done,"If global's method name starts with modify, the first character of the method name is lost during code generation.
Compilation then fails.

{code:java}
org.drools.model.Rule rule = D.rule(""Rule 1"").build(D.on(var_g).execute((g) -> {
            g.odifyIsTheFirstWordInTheMethodName();
        }));
{code}

(It does not seem to happen with method names starting with keywords insert, delete.)
",Major,Luca Molteni,,2019-06-06T06:49:21.000-0400,Global's method names starting with word modify are truncated,Resolved,bug,Bug
2019-06-17T04:39:03.000-0400,DROOLS-4183,Done,None,Critical,Matteo Mortari,,2019-06-15T16:14:17.000-0400,Wrongly placed logback config causes user logging conf be ignored,Resolved,bug,Bug
2019-06-13T08:12:28.000-0400,DROOLS-4171,Done,"In kjar project, there are many rules per folder under resources directory and
filtered these rules by  using packages attribute in kmodule.xml.

e.g.
- file structure
{noformat}
src/main/resources/
├── logback-test.xml
├── META-INF
│   ├── kmodule.xml
│   └── maven
│       └── pom.properties
└── rules
    ├── aws
    │   └── Sample1.drl
    ├── test1
    │   └── Sample1.drl
    └── test2
        └── Sample2.drl
{noformat}

- kmodule.xml

{noformat}
<?xml version=""1.0"" encoding=""UTF-8""?>
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
    <kbase name=""rules"" packages=""rules.aws"">
        <ksession name=""ksession-rules""/>
    </kbase>
</kmodule>
{noformat}

This could be built with library version 7.5.0.Final.
But after upgrading 7.11.0.Final or later, it fails.
",Major,Mario Fusco,,2019-06-13T04:05:50.000-0400,rule filtering by folder-type packages attribute  does not work after upgrading to 7.11.0.Final ,Resolved,bug,Bug
2019-06-13T04:26:23.000-0400,DROOLS-4164,Done,None,Major,Matteo Mortari,,2019-06-12T08:16:53.000-0400,DMN invoke PMML noname NN,Resolved,bug,Bug
2019-06-13T04:26:49.000-0400,DROOLS-4157,Done,User is Unable to use dmn & pmml in real world scenario.,Blocker,Matteo Mortari,,2019-06-11T03:44:41.000-0400,[DMN Designer] project with pmml can not be built,Resolved,bug,Bug
2019-06-12T12:09:06.000-0400,DROOLS-3924,Done,"by following the manual https://books.sonatype.com/mvnref-book/pdf/mvnref-pdf.pdf
Sect.11.4+

Our plugin uses non-namespaced, stringly-typed properties to be configured:

{{-DgenerateModel=YES}}

while most plugin use typed namespaced, dot-cased properties, e.g.:

{{-Dkie.generate.model[=true]}}

investigate proper conventions by reading the manual and implement the solution

**deliverable** a PR",Major,Edoardo Vacchi,,2019-04-19T04:43:39.000-0400,Refactor Maven plugin to adopt best practices,Resolved,bug,Bug
2019-06-12T04:42:59.000-0400,DROOLS-4085,Done,"There is still online validation of XSD. With later switching from http to https some of services referenced in code this showed up as a real problem.

We should bundle all schemas in drools jars and validate them only from that location.",Blocker,Luca Molteni,,2019-05-28T07:53:44.000-0400,Validate all XSD validation offline with embedded schemas,Resolved,bug,Bug
2019-06-11T03:35:54.000-0400,DROOLS-4151,Done,"When repositories are read from settings.xml file and an active proxy is defined, the created repositories don't contain a proxy settings [1].

[1] https://github.com/kiegroup/kie-soup/blob/master/kie-soup-maven-utils/kie-soup-maven-integration/src/main/java/org/appformer/maven/integration/MavenRepositoryConfiguration.java#L132",Critical,Tibor Zimanyi,,2019-06-10T06:26:48.000-0400,Add proxy to Maven repositories read from settings.xml if an active proxy is set up,Resolved,bug,Bug
2019-06-10T10:34:56.000-0400,DROOLS-4100,Done,"The keyboard shortcuts for managing DMN data types stop working after constraint dialog was Opened & Closed.

h3. Acceptance test
Both on firefox and chrome
- Steps to reproduce fixed
- add new type, set it by keyboard, save by keyboard
- add new type, set it with mouse, save by keyboard
- edit existing type, start edit by mouse, save with keyboard
- edit existing type, search via search box, navigate trough results by keyboard, edit by keyboard, save by keyboard",Major,Daniel José dos Santos,,2019-06-03T05:34:18.000-0400,[DMN Designer] Data Type Shortcuts after constraint dialog was in use,Resolved,bug,Bug
2019-06-07T05:37:44.000-0400,DROOLS-4138,Rejected,"Steps to building a new KJar by defining Resource objects and adding then using KieFileSystem.write(), if a Decision Table Template resource type is added then we get a null pointer exception when the KieBuilder.buildAll() method is invoked.

Sample code that demonstrates this error can be found here: https://github.com/carlmes/decision-table-template, specifically the notes in [TestDecisionTableBuild.java|https://github.com/carlmes/decision-table-template/blob/a68ddd1374f08695fe8d770f0b89bdf76d806e71/src/test/java/test/kjar/build/TestDecisionTableBuild.java#L70].

Red Hat support case: https://access.redhat.com/support/cases/#/case/02397413

I have created a proposed fix in [DecisionTableConfigurationImpl.java|https://github.com/kiegroup/drools/blob/f1091fb26d524b99632bad81497e8ad461e9d13f/drools-core/src/main/java/org/drools/core/builder/conf/impl/DecisionTableConfigurationImpl.java#L86], by implementing the missing properties in the fromProperties and toProperties methods. Please see attached updated file that has been tested to fix the issue locally.",Critical,Mario Fusco,,2019-06-05T20:05:37.000-0400,Building a KJAR using Decision Table Templates throws NPE,Closed,bug,Bug
2019-06-06T03:50:21.000-0400,DROOLS-4137,Explained,"I would like to have kie-maven-plugin build the KJar with a serialized KieBase so that it takes less time to boot strap drools. It appears that the maven configuration used by the kie-maven-plugin is broken, or at least there is not sufficient documentation to set it up.

See https://groups.google.com/forum/#!topic/drools-setup/0TZvE5lpcto for more information.

Documentation is VERY limited / scattered in different areas. It probably needs updates. If we can get help to get the build working / bug fixed, we would be happy to submit a doc fix.

We are trying to use drools in a severless environment (though not quite ready for Quarkus). If we are unable to use this build feature, we may be unable to use drools.
",Major,Mario Fusco,,2019-06-05T16:58:05.000-0400,KIE Maven Plugin Fails to Load Dependencies for KieBase when Serializing KieBase During Build,Resolved,bug,Bug
2019-06-05T10:56:36.000-0400,DROOLS-4125,Done,KnowledgePackageImpl is not serializing the RuleUnitDescriptionLoader and then rule units don't work anymore after serialization.,Major,Mario Fusco,,2019-06-04T08:09:50.000-0400,Packages serialization doesn't work with rule units,Resolved,bug,Bug
2019-06-03T02:57:07.000-0400,DROOLS-2992,Done,"Can't compile the kie module which has guided scorecard by maven plugin
There are a lot of error
[ERROR] Message [id=1, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=447, column=0
[ERROR]    text=New declaration of org.kie.pmml.pmml_4_2.model.scorecard.Score redeclared field value :
[ERROR] existing : java.lang.Double vs declared : double]
[ERROR] Message [id=2, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=447, column=0
[ERROR]    text=New declaration of org.kie.pmml.pmml_4_2.model.scorecard.Score does not include field scoreCard]
[ERROR] Message [id=3, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=447, column=0
[ERROR]    text=New declaration of org.kie.pmml.pmml_4_2.model.scorecard.Score can't declare a different set of fields
[ERROR] existing : [scoreCard, value]
[ERROR] declared : [displayValue, tgtValue, value, weight]
[ERROR] diff : [--scoreCard, ++displayValue, ++tgtValue, ++weight]]
[ERROR] Message [id=4, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=92, column=0
[ERROR]    text=Unable to process type DataField]
[ERROR] Message [id=5, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1020, column=0
[ERROR]    text=Unable to process type ScardOutput]
[ERROR] Message [id=6, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=104, column=0
[ERROR]    text=Unable to process type OutputField]
[ERROR] Message [id=7, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=132, column=0
[ERROR]    text=Unable to process type Scorecard__calculatedScore]
[ERROR] Message [id=8, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=196, column=0
[ERROR]    text=Unable to process type Age]
[ERROR] Message [id=9, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=89, column=0
[ERROR]    text=Unable to process type PMML4AbstractField]
[ERROR] Message [id=10, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=447, column=0
[ERROR]    text=Unable to process type Score]
[ERROR] Message [id=11, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=814, column=0
[ERROR]    text=Unable to process type Scard]
[ERROR] Message [id=12, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=580, column=0
[ERROR]    text=Unable to Analyse Expression context == ctx:
[ERROR] [Error: unable to resolve method using strict-mode: org.kie.pmml.pmml_4_2.model.scorecard.Score.context()]
[ERROR] [Near : {... context == ctx ....}]
[ERROR]              ^
[ERROR] [Line: 580, Column: 4]]
[ERROR] Message [id=13, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=677, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scorecard__calculatedScore']
[ERROR] Message [id=14, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=288, column=0
[ERROR]    text=Unable to resolve ObjectType 'DataField']
[ERROR] Message [id=15, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=864, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scorecard__calculatedScore']
[ERROR] Message [id=16, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=865, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scard']
[ERROR] Message [id=17, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=-1, column=0
[ERROR]    text=Unable to Analyse Expression boundInput == $x:
[ERROR] [Error: unable to resolve method using strict-mode: org.kie.pmml.pmml_4_2.ModelMarker.$x()]
[ERROR] [Near : {... boundInput == $x ....}]
[ERROR]                            ^]
[ERROR] Message [id=18, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1052, column=0
[ERROR]    text=Unable to resolve ObjectType 'ScardOutput']
[ERROR] Message [id=19, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=832, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scard']
[ERROR] Message [id=20, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=694, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scorecard__calculatedScore']
[ERROR] Message [id=21, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=695, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scorecard__calculatedScore']
[ERROR] Message [id=22, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=521, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scorecard__calculatedScore']
[ERROR] Message [id=23, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=849, column=0
[ERROR]    text=Unable to resolve ObjectType 'Scard']
[ERROR] Message [id=24, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=742, column=0
[ERROR]    text=Unable to resolve ObjectType 'Age']
[ERROR] Message [id=25, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=743, column=0
[ERROR]    text=Unable to Analyse Expression (mAge == true && mAge != $m) || vAge != $v:
[ERROR] [Error: unable to resolve method using strict-mode: org.kie.pmml.pmml_4_2.model.ScardScoreCardData.$m()]
[ERROR] [Near : {... (mAge == true && mAge != $m) || vAge != $v ....}]
[ERROR]                                       ^
[ERROR] [Line: 743, Column: 4]]
[ERROR] Message [id=26, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1045, column=0
[ERROR]    text=Rule Compilation error $x cannot be resolved to a variable
[ERROR] The method setScore(Double) is undefined for the type Object]
[ERROR] Message [id=27, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=513, column=0
[ERROR]    text=Rule Compilation error $val cannot be resolved to a variable
[ERROR] $m cannot be resolved to a variable
[ERROR] $v cannot be resolved to a variable
[ERROR] The method setName(String) is undefined for the type Score
[ERROR] $ctx cannot be resolved to a variable
[ERROR] $wgt cannot be resolved to a variable]
[ERROR] Message [id=28, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1030, column=0
[ERROR]    text=Rule Compilation error ScardOutput cannot be resolved to a type]
[ERROR] Message [id=29, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=843, column=0
[ERROR]    text=Rule Compilation error $obj cannot be resolved to a variable]
[ERROR] Message [id=30, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=686, column=0
[ERROR]    text=Rule Compilation error $tgt cannot be resolved to a variable]
[ERROR] Message [id=31, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=670, column=0
[ERROR]    text=Rule Compilation error $tgt cannot be resolved to a variable]
[ERROR] Message [id=32, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=826, column=0
[ERROR]    text=Rule Compilation error _age cannot be resolved to a variable]
[ERROR] Message [id=33, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=653, column=0
[ERROR]    text=Rule Compilation error Scorecard__calculatedScore cannot be resolved to a type
[ERROR] Scorecard__calculatedScore cannot be resolved to a type]
[ERROR] Message [id=34, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=284, column=0
[ERROR]    text=Rule Compilation error $data cannot be resolved to a variable]
[ERROR] Message [id=35, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=736, column=0
[ERROR]    text=Rule Compilation error $m cannot be resolved to a variable
[ERROR] $v cannot be resolved to a variable]
[ERROR] Message [id=36, kieBase=defaultKieBase, level=ERROR, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=858, column=0
[ERROR]    text=Rule Compilation error $x cannot be resolved to a variable
[ERROR] $val cannot be resolved to a variable]
[ERROR] ---
[ERROR] Warning Messages:
[ERROR] Message [id=37, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=653, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Scorecard Scard output - Scorecard__calculatedScore. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=38, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=772, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Init ScoreCard Scard. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=39, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=670, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Add PMMLResult with Scorecard output Scard - Scorecard__calculatedScore. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=40, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=790, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Scoring Complete. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=41, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=980, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Init ScoreCard Params Scard. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=42, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=225, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Valid_PMML4DataUnrestricted_Values_Age-null. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=43, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=626, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule RemoveMissing_PMML4Data_Scard_Age. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=44, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=610, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule InitAsMissing_PMML4Data_Scard_Age. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=45, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=161, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Valid_PMML4DataUnrestricted_Values_Scorecard__calculatedScore-null. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=46, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=954, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule PartialScore_Scard_age_14. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=47, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=858, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Link  Scard  Predicted Fields scorecard__calculatedScore . Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=48, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=927, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule PartialScore_Scard_age_13. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=49, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=900, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule PartialScore_Scard_age_12. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=50, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1045, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Link Scard  Output Fields score . Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=51, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=826, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Link  Scard  Bean Input. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=52, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=686, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Update PMMLResult containing Scorecard output Scard - Scorecard__calculatedScore. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=53, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=1030, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Create Scard Output Bean. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=54, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=513, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule simpleOutput_Scorecard__calculatedScore_to_Score. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=55, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=596, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule miningPmml4Data_Scard_Age. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=56, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=538, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Update PMML4Result with aliased output Score. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=57, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=719, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Bind_Scorecard_PMML4Data_Scard_Age. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=58, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=843, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Own Scard. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=59, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=360, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Sort Scorecard Reason Codes. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=60, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=474, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule update_Score_Scard. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=61, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=377, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Integrate Scorecard ReasonCode Map. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=62, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=736, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Bind_Scorecard_Scard_Age. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=63, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=346, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Detect Scorecard ReasonCode Change. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=64, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=304, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Score Card Scard. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
[ERROR] Message [id=65, kieBase=defaultKieBase, level=WARNING, path=Users/gongyi/src/sandbox/sandbox1/src/main/resources/com/myspace/sandbox1/scard.scgd, line=324, column=0
[ERROR]    text=Both an agenda-group (  ) and a ruleflow-group (  ) are defined for rule Cumulate Code Scores. Since version 6.x the two concepts have been unified, the ruleflow-group name will override the agenda-group. ]
",Major,Toni Rikkola,,2018-09-17T01:19:25.000-0400,Can't compile the kie module which has guided scorecard,Resolved,bug,Bug
2019-06-03T08:37:55.000-0400,DROOLS-3778,Done,There is InvocationTargetException on test classes if they are run on jdk11. The tests can be found in [module|https://github.com/kiegroup/kie-wb-common/tree/master/kie-wb-common-dmn/kie-wb-common-dmn-api],Major,Yevgeniy Fomin,,2019-03-19T08:05:04.000-0400,Receiving error InvocationTargetException on jdk11,Resolved,bug,Bug
2019-06-03T05:30:39.000-0400,DROOLS-3216,Done,"When user create the first scesim file in the project, the system creates the JUnit activator file and it adds the needed dependencies.
After that the system takes several seconds (5-6) to retrieve all the dependencies.
During this time the editor still blank without any indicator or information to the user about what is going on.
This happens only for the first scesim creation in the project",Major,Daniele Zonca,,2018-10-31T14:49:20.000-0400,Async dependencies resolution or add loading indicator during scesim creation,Closed,bug,Bug
2019-06-03T02:52:54.000-0400,DROOLS-3913,Done,"testPrettyPrinterCrashing is crashing due to JavaParser pretty printer

possible workaround:

- Disable pretty printing
- Update JavaParser
- Submit fix to JP",Major,Luca Molteni,,2019-04-18T04:55:29.000-0400,Fix error with Java Parser Pretty printer,Resolved,bug,Bug
2019-06-03T05:49:16.000-0400,DROOLS-4074,Done,If there is error in cell of *LocalDate* type. Such cell is not highlighted.,Major,Daniele Zonca,,2019-05-24T02:10:52.000-0400,LocalDate cell with error is not highlighted,Closed,bug,Bug
2019-06-04T04:23:00.000-0400,DROOLS-4107,Done,"User is unable to navigate expression editor, if the expression is decision table and the node output ref has been changed.

h3. Acceptance test (/)
https://github.com/jboss-integration/bxms-qe-tests/pull/2515
https://github.com/jboss-integration/bxms-qe-tests/pull/2523",Blocker,Michael Anstis,,2019-06-03T09:46:00.000-0400,[DMN Designer] Change data type of decision table,Resolved,bug,Bug
2019-05-31T08:28:59.000-0400,DROOLS-4060,Done,"In DMN Test scenario, if namespace is long there is a minor visual bug (see screenshot attached).
Use attached dmn file to reproduce it",Minor,Yeser Amer,,2019-05-21T12:15:03.000-0400,CSS bug in Test Scenario setting panel when namespace is long,Resolved,bug,Bug
2019-05-31T08:43:44.000-0400,DROOLS-4095,Done,None,Major,Mario Fusco,,2019-05-31T08:37:38.000-0400,Null-safe dereferencing operator cannot be used after a method invocation,Resolved,bug,Bug
2019-05-31T08:52:33.000-0400,DROOLS-4088,Done,None,Major,Matteo Mortari,,2019-05-29T05:05:40.000-0400,DMN FEEL instance of minor alignments,Resolved,bug,Bug
2019-05-31T09:06:43.000-0400,DROOLS-4093,Done,"Sometimes when user are adding and/or editing Data Types, the keyboard shortcuts (like CTRL +S) stop working. ",Major,Daniel José dos Santos,,2019-05-30T18:48:21.000-0400,[DMN Designer] Sometimes shortcuts does not work when editing DataType items,Resolved,bug,Bug
2019-05-31T13:25:11.000-0400,DROOLS-4089,Done,"We recently moved from Drools 7.9.0 to 7.20.

Some errors started appearing in ours tests when calling static methods in LHS drools.
This started happening when all tests were run simultaneously.

It seems the mvel JIT compiler kicks in and it incorrectly evaluates the property name:
A simple call to {noformat}ValidationUtils.isNullOrEmpty(interestedPartyNumber){noformat} ends up with this kind of error:
{noformat}
""java.lang.RuntimeException: Unknown property 'nullOrEmpty' on class tech.stage.utils.cwr.model.PublisherRecord""
{noformat}

Debugging info:
Related source-code: https://github.com/kiegroup/drools/blob/7.20.0.Final/drools-core/src/main/java/org/drools/core/rule/constraint/MvelConstraint.java#L489

 !debugging-1.png|full! 

1)  is the current evaluated property
2) Should be the right property of WriterRecord
3) Perhaps the expression which should be executed instead of invocations.get(0)

We fixed that somehow disabling JIT with {noformat}ConstraintJittingThresholdOption{noformat}

Is there any chance to this bug fixed?
Do you need more info?

Thanks in advance for your support.


{panel:title=Reproducer}
https://github.com/vp-stage/evaluatedexpressionandjit
{panel}
",Major,Mario Fusco,,2019-05-29T07:42:58.000-0400,EvaluatedExpression not well resolved  with JIT during race ,Resolved,bug,Bug
2019-05-31T09:06:57.000-0400,DROOLS-4081,Done,"Currently user is allowed to specify constraints even for *context* or *List* data type. See two attached cases. For both we should prohibit user from setting constraints. We should hide the constraints link/button.

h2. Manual acceptance test

||#||Chrome||Firefox||
|Top level context|(/)|(/)|
|Nested field context|(/)|(/)|
|Top level list|(/)|(/)|
|Nested field list|(/)|(/)|
",Major,Daniel José dos Santos,,2019-05-27T11:54:56.000-0400,[DMN Designer] Constraints are allowed for inappropriate data types,Resolved,bug,Bug
2019-05-31T03:53:15.000-0400,DROOLS-4039,Done,"There exist a way how user can bind scenario column inappropriately. For example property column of object A, can be bound to the property of totally different object. The way is shown in the attached video.",Major,Yeser Amer,,2019-05-16T05:12:54.000-0400,Columns can be bound inappropriately ,Resolved,bug,Bug
2019-05-29T04:58:55.000-0400,DROOLS-4082,Done,If you will try use duration with white spaces it causing crashing of format in Enumeration,Major,Daniel José dos Santos,,2019-05-27T12:03:33.000-0400,"Cant use whitespaces in expression duration(""P1Y"")",Resolved,bug,Bug
2019-05-30T03:57:37.000-0400,DROOLS-4046,Explained,"The test scenario run pass, even if non existing RuleFlowGroup is set. In the attached project there is single rule and scenario. the has not the RuleFlowGroup set, while scenario has - a non existing one. If you run the scenario, it will pass regardless of the RuleFlowGroup set inside.

Expected: Scenario run fail if non-existing RuleFlowGroup is set in the attached project/scenario.",Major,Daniele Zonca,,2019-05-17T09:56:41.000-0400,Scenario Is Executed even if non existing RuleFlowGroup is set,Closed,bug,Bug
2019-05-29T07:58:44.000-0400,DROOLS-3432,Done,"When we use the same template in key for different object fields(different fields from the same fields from different objects), we get an exception after selecting the data tab, attaching the screen shot.

There is a workaround , we can give every template a unique name as a work around, but this slow down because we need to create different key names with the same information in the data table.
",Major,Toni Rikkola,,2018-12-13T02:13:43.000-0500,While using the same template key with difference objects/attributes causes an exception when switching to the Data tab in a Guided Rule Template,Resolved,bug,Bug
2019-05-29T02:39:14.000-0400,DROOLS-3997,Done,"There is issue in marshalling, if the included model name contains *whitespace* character. In such case xml editor is opened instead of the dmn editor. See the attached picture and steps to reproduce for more details.

Issue spotted during review of DROOLS-3720 and DROOLS-3721. However it is probably not related.",Major,Daniel José dos Santos,,2019-05-10T02:29:14.000-0400,[DMN Designer] Included Model Name marshalling issues depending on imported model name,Resolved,bug,Bug
2019-05-29T04:55:46.000-0400,DROOLS-4063,Done,The issue is when user do some updates to the DMN and recretae new Scenario for the same DMN. The scenario assumes the first verison of the DMN.,Critical,Daniele Zonca,,2019-05-22T08:03:11.000-0400,DMN Node Update is not reflected in Scenario,Resolved,bug,Bug
2019-05-29T09:53:06.000-0400,DROOLS-4059,Done,"There is issue with scenario, that verifies dmn context. The attached scenario was created in the way shown in the picture. From the dialog with expected and actual value I clicked *Apply* button to fix scenarios. However after rerun, there is exception that value can not be parsed.",Major,Daniele Zonca,,2019-05-21T04:42:20.000-0400,Unable to test dmn context,Resolved,bug,Bug
2019-05-30T01:13:18.000-0400,DROOLS-3683,Done,"Data Types are not refreshing the properties panel.

Steps to reproduce
		- Add two input nodes (""Driver"" and ""Violation)
		- Add two decision nodes (""Suspended?"" and ""Fine?"")
		- Connect ""Drive"" to ""Suspended?""
		- Connect ""Violation"" to ""Fine?""
		- Connect ""Fine?"" to ""Suspended?""
		- Select ""Violation""
		- Create three new DTs with an input node selected
		- Go back to the graph
		- Noticed the ""Output data type"" dropdown is not updated",Major,Daniel José dos Santos,,2019-02-21T10:21:35.000-0500,[DMN Designer] Data Types - Properties panel must be refreshed when a Data Type is created,Resolved,bug,Bug
2019-05-28T07:54:30.000-0400,DROOLS-4071,Done,If you bind the instance header and then select that instance header by keyboard an error is thrown. Please use the sample *Mortgages* and follow the video.,Major,Yeser Amer,,2019-05-23T05:55:31.000-0400,Selecting instance header by keyboard throws an error,Resolved,bug,Bug
2019-05-27T08:46:16.000-0400,DROOLS-4016,Done,"The issue appears when user wants to use project explorer using guided rule editor in standalone mode. There are missing buttons for saving, renaming, removing ...

h3. Acceptance criteria
https://github.com/jboss-integration/bxms-qe-tests/pull/2492",Major,Paulo Rego,,2019-05-14T02:54:04.000-0400,[Guided Rules Editor] Missing toolbar buttons in standalone mode,Resolved,bug,Bug
2019-05-27T10:04:22.000-0400,DROOLS-4073,Done,"If the column is bound to a collection field and user tries to edit some data cell, an error is thrown.

The issue was spotted during DROOLS-3855 review however not sure if that one is the root cause.",Critical,Yeser Amer,,2019-05-23T08:41:09.000-0400,Scenario throw an error for columns bound to collection field,Resolved,bug,Bug
2019-05-27T08:46:12.000-0400,DROOLS-4015,Done,The issue appears when user wants to use project explorer using guided rule editor in standalone mode. I expect similar trouble for all editors in standalone mode.,Major,Paulo Rego,,2019-05-14T02:40:00.000-0400,[Guided Rules Editor] Project Explorer throws an Error in standalone mode,Resolved,bug,Bug
2019-05-23T12:19:01.000-0400,DROOLS-3198,Done,"If I have a maven pom that uses the kie maven plugin org.kie:kie-maven-plugin to build the kljar for deployment, and the project kjar has a ruleTemplate:
<ruleTemplate dtable=""rules/business/TermSearchQFRules.xls""
                  template=""rules/business/templates/TermSearchQF.drt""
    row=""2"" col=""1""/>
The build will fail with an error:
ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.8.0.Final:build (default-build) on project ba-search-kjar: Execution default-build of goal org.kie:kie-maven-plugin:7.8.0.Final:build failed: No RuleTable cells in spreadsheet. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.kie:kie-maven-plugin:7.8.0.Final:build (default-build) on project ba-search-kjar: Execution default-build of goal org.kie:kie-maven-plugin:7.8.0.Final:build failed: No RuleTable cells in spreadsheet.
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-build of goal org.kie:kie-maven-plugin:7.8.0.Final:build failed: No RuleTable cells in spreadsheet.
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	... 19 more
Caused by: org.drools.template.parser.DecisionTableParseException: No RuleTable cells in spreadsheet.

This is because the plugin doesn't understand the rule template, and treats the xls file as a decision table spreadsheet rather than a template spreadsheet.

The kie-maven-plugin is a useful tool that compiles the kjar are build time rather than load time, and gives good diagnostics.",Major,Mario Fusco,,2018-10-26T10:12:04.000-0400,kie maven plugin fails to build kjar if kmodule contains a ruleTemplate,Resolved,bug,Bug
2019-05-24T06:48:36.000-0400,DROOLS-3976,Done,"Issue revealed during DROOLS-3895 review, however it is probaly caused by DROOLS-3438. 
User can not start edit mode by *Key.Enter* press if he wants to edit nested *Literal Expression* grid and this nested grid has parent *Context*, *Function* or *Invocation* grid.

h3. Acceptance test

||#||Edit cell using mouse||Edit cell using keyboard||
|Literal Expression grid|(/)|(/)|
|Context grid|(/)|(/)|
|Invocation grid|(/)|(/)|
|Relation grid|(/)|(/)|
|Decision table grid|(/)|(/)|
",Major,Jozef Marko,,2019-05-06T03:58:28.000-0400,"[DMN Designer] edit cell by enter in Context, Function and Invocation",Resolved,bug,Bug
2019-05-23T03:55:18.000-0400,DROOLS-2311,Done," am using the Drools 7.5.0-final in the spring Boot project.

I am working on a multi-module Gradle project. Rules and kmodule.xml is present in the sub-module project. This module is packaged as a Jar inside a fat spring boot Jar file.

I am building the container from the classpath.

KieContainer kContainer = kieService.newKieClasspathContainer();
on server start-up (java -jar) it loads the Kmodule.xml and prints all the kbase and sessionName.

But when I fire rules it returns zero rules fired.

It works fine when I run as spring boot app from Eclipse. Please help.",Major,Mario Fusco,,2018-02-08T07:05:02.000-0500,Drools Engine not able to load rules in spring-Boot project,Resolved,bug,Bug
2019-05-23T03:34:18.000-0400,DROOLS-4062,Done,None,Major,Matteo Mortari,,2019-05-22T02:50:59.000-0400,DMN KieContainer upgrade missing DMN Import resolution strategy,Resolved,bug,Bug
2019-05-21T05:01:56.000-0400,DROOLS-4000,Done,"Once scenario is run, there can be multiple cells with some issues. All those cells are highlighted. This jira is for case when user fix the value of one of those cells. In such case highlight of all cells of the given row is lost. See the attached video.

Related to https://issues.jboss.org/browse/DROOLS-3838",Minor,Yeser Amer,,2019-05-10T04:44:32.000-0400,Highlight of cells with issue is lost when one cell is fixed,Resolved,bug,Bug
2019-05-20T10:45:31.000-0400,DROOLS-4020,Done,"The DMN Designer generates empty variable name for literal expressions.

Current state:
{code}
<dmn:decision id=""_9AF9596C-BA60-4C45-9531-F6B6FD7BC008"" name=""constant"">
    <dmn:variable id=""_782DDC9C-8B8B-4D18-9711-40634A46864C"" name="""" typeRef=""string""/>
    <dmn:literalExpression id=""_F7C245A2-9CE3-4CFE-AAD5-D6B98C502CE9"">
      <dmn:text>""abc""</dmn:text>
    </dmn:literalExpression>
  </dmn:decision>
{code}

Expected state:
{code:xml}
<dmn:decision id=""_9AF9596C-BA60-4C45-9531-F6B6FD7BC008"" name=""constant"">
    <dmn:variable id=""_782DDC9C-8B8B-4D18-9711-40634A46864C"" name=""constant"" typeRef=""string""/>
    <dmn:literalExpression id=""_F7C245A2-9CE3-4CFE-AAD5-D6B98C502CE9"">
      <dmn:text>""abc""</dmn:text>
    </dmn:literalExpression>
  </dmn:decision>
{code}
",Blocker,Michael Anstis,,2019-05-14T06:16:28.000-0400,[DMN Designer] Literal expression variable name is missing,Resolved,bug,Bug
2019-05-21T09:51:19.000-0400,DROOLS-4047,Done,"I believe there is a bug where you cannot use a CSV file to use as a decision table to drive a ruleTemplate. Our issue appears to be a duplicate of the one mentioned in this pull request -https://github.com/kiegroup/drools/pull/1920

The drools version we're using is 6.50.FINAL, but the reproducer I've attached is for the latest released version.

We'd like to move away from binary files as they're opaque to most version control and it makes branching difficult. ",Major,Tibor Zimanyi,,2019-05-17T15:01:56.000-0400,Unable to use CSV in a ruleTemplate,Resolved,bug,Bug
2019-05-20T13:12:44.000-0400,DROOLS-4051,Won't Fix,"I defined a drl file that declare a type like :
{code}
package com.test.rules.model.process;

// Process related objects 

declare Process
	caseRef		: String	 @key
	owner		: String	 @key
end
{code}

At rules compile time, Drools throws the following exception :
{code}
Caused by: java.lang.IllegalArgumentException: Error parsing bootstrap resources : New declaration of java.lang.Process can't declare a different set of fields
existing : []
declared : [caseRef]
diff : [++caseRef]
Unable to process type Process
{code}

Drools compiles *java.lang.Process* instead of my customized type.",Major,Mario Fusco,,2019-05-20T06:06:53.000-0400,Wrong compiled type definition,Resolved,bug,Bug
2019-05-20T11:48:07.000-0400,DROOLS-4050,Out of Date,"If the test scenario computes with date fields, there is an exceptio0n if the expected value differs from the actual. If the expected value is same as actual, scenario works fine.",Major,Daniele Zonca,,2019-05-20T05:54:46.000-0400,Error is thrown when DMN expected date value differs from the actual value,Closed,bug,Bug
2019-05-21T08:07:47.000-0400,DROOLS-4048,Done,None,Major,Matteo Mortari,,2019-05-20T05:04:53.000-0400,DMN decision service invocation as literal expression typecheck,Resolved,bug,Bug
2019-05-20T13:14:15.000-0400,DROOLS-4043,Done,"When bulding kjar, warning something like the following appear.

{noformat}
[WARNING] File 'src/main/resources//work/buildKjar/src/main/resources/com/sample/rules2' is in folder '.work.buildKjar.src.main.resources.com.sample.rules2' but declares package 'com.sample.rules2'. It is advised to have a correspondance between package and folder names.
[WARNING] File 'src/main/resources//work/buildKjar/src/main/resources/com/sample/rules' is in folder '.work.buildKjar.src.main.resources.com.sample.rules' but declares package 'com.sample.rules'. It is advised to have a correspondance between package and folder names.
[WARNING] File 'work/buildKjar/src/main/resources/com/sample/rules2' is in folder 'work.buildKjar.src.main.resources.com.sample.rules2' but declares package 'com.sample.rules2'. It is advised to have a correspondance between package and folder names.
[WARNING] File 'work/buildKjar/src/main/resources/com/sample/rules' is in folder 'work.buildKjar.src.main.resources.com.sample.rules' but declares package 'com.sample.rules'. It is advised to have a correspondance between package and folder names.
{noformat}

But  drl are put under appropriate path which matches declared package.
{noformat}
src/main/resources/
├── com
│   └── sample
│       ├── rules
│       │   └── Sample.drl
│       └── rules2
│           └── Sample2.drl
{noformat}

This warning should not appear for this example.

In addition, path of File which is shown in this warning message looks wired.
e.g.
{noformat}
 File 'src/main/resources//work/buildKjarTest2/src/main/resources/com/sample/rules2'
{noformat}

i.e. prefix ('src/main/resources/') is added to absolute path. 
Therefore, it's hard to understand what is exactly wrong and warned.
",Major,Mario Fusco,,2019-05-16T23:00:07.000-0400,inappropriate warning appear while building kjar,Resolved,bug,Bug
2019-05-20T11:49:48.000-0400,DROOLS-3972,Done,When I modify amount in an example below from 5 to 20 (both are Strings) and then try to evaluate this fact parsing it to Double - the third rule doesn't fire. But it fires when use 'update()' instead of 'modify() {}',Major,Mario Fusco,,2019-05-04T00:30:18.000-0400,Evaluation of facts hasn't been affected by 'modify()'  when parsing String to Double,Resolved,bug,Bug
2019-05-20T04:24:55.000-0400,DROOLS-4028,Done,"The issue is in the value correction feature, when the scenarios is dmn based and we check a string value. Such value needs to be quoted for dmn. If the scenario fails and feature offers value correction, the value is updated but it is not quoted what is an issue. It is shown also in the attached video. Next I attach also the used project.",Major,Daniele Zonca,,2019-05-15T02:15:14.000-0400,Value correction doesn't add quotes for dmn strings,Resolved,bug,Bug
2019-05-20T04:34:00.000-0400,DROOLS-4034,Done,"Open a new TestScenario editor.
Try to assign an instance to a column. Instance only, without a property (eg. Author).
An exception is thown.

Issue introduced with fix of ticket DROOLS-3890",Major,Yeser Amer,,2019-05-15T09:39:28.000-0400,Add an Instance to a Scenario Column leads to an exception,Resolved,bug,Bug
2019-05-17T04:25:33.000-0400,DROOLS-3994,Done,"When opening a DMN file the connectors do not align with the Node boundaries.

h3. Acceptance criteria
Reopen diagrams where
- Source centered, target not centered (/)
- Source not centered, target centered (x)
- Source not centered, target not centered (x)
- Autolayout applied (/)
- Connections crossing decision service (x)
",Critical,Michael Anstis,,2019-05-09T10:05:34.000-0400,[DMN Designer] Connectors to do align with Node boundaries,Resolved,bug,Bug
2019-05-13T11:40:03.000-0400,DROOLS-3825,Done,"If you don't {{mvn clean}} each time you generate the executable model, new files will be generated at each run.

These seem to be the culprit:

{{PackageModel#getPackageUUID}}

{code}
    private String generateRulesFileName() {

        return RULES_FILE_NAME + generateUUID();

    }
{code}

solution: use a counter; the compiler is single-threaded, two runs produce the same output, existing files will be just overwritten

deliverable: test case verifying files do not grow in number across runs
",Major,Mario Fusco,,2019-04-01T10:16:01.000-0400,Model compiler should not duplicate files across runs,Resolved,bug,Bug
2019-05-14T04:36:48.000-0400,DROOLS-3974,Done,"Customer is trying to fetch some data from database and populate it into Guided Decision Table, but it does not update properly with the current data until the server is restarted. 

In the sample project in attach it is generating random data without connecting to database just to demonstrate that behavior.

See attached project and the reproducer video.",Major,Toni Rikkola,,2019-05-06T01:13:26.000-0400,Guided Decision Table is not getting updated,Resolved,bug,Bug
2019-05-13T06:08:57.000-0400,DROOLS-3960,Done,"Trying to generate a fully compiled kmodule with kie-maven-plugin. It works when all facts are defined in DRL, but fails when some facts are defined as Java POJOs. It appears to not find Java classes when compiling DRL.

Sample project is attached.",Blocker,Luca Molteni,,2019-05-02T10:02:53.000-0400,Executable Model - kie-maven-plugin fails to generate model with a mix of Java and DRL facts,Resolved,bug,Bug
2019-05-13T06:08:50.000-0400,DROOLS-3800,Done,"When MAP literal expression is used in LHS like the following

{noformat}
  when
    $fact: Fact(
      calc([""src"":name, ""target"":""TEST""])
    )
 ...
{noformat}

KieBase build as Executable Model fails with parser error like:

{noformat}
org.drools.javaparser.ParseProblemException: 
Encountered unexpected token: ""["" ""[""
    at line 1, column 6.

Was expecting one of:

    "")""
{noformat}

This error does not happen when building this rule as normal kjar.",Major,Luca Molteni,,2019-03-28T02:51:17.000-0400,Parser error with executable-model on Map literal expression in constraint,Resolved,bug,Bug
2019-05-13T05:36:21.000-0400,DROOLS-3875,Done,"When building and running a maven multi-module project using several kjar modules the class-path container is incorrect and differs from the container created when not built with the executable model.

See steps to reproduce and attached project.",Blocker,Luca Molteni,,2019-04-10T12:42:41.000-0400,Executable model - Invalid packages loaded for classpath container,Resolved,bug,Bug
2019-05-13T03:57:41.000-0400,DROOLS-3984,Cannot Reproduce,"This Iss was spotted during review of [PR|https://github.com/kiegroup/kie-wb-common/pull/2620] for DROOLS-3829 and DROOLS-3934.

The attached project contains two dmn files. The *routes.dmn* imports *traffic.dmn* and use a decision node from there.  If you navigate to expression editor, the properties panel is not readonly.

Expected behavior:
If you navigate to expression editor of an imported node, the properties panel is readonly.",Major,Guilherme Gomes,,2019-05-07T07:45:13.000-0400,[DMN Editor] Expression Grids on imported nodes are not read only,Closed,bug,Bug
2019-05-13T04:46:53.000-0400,DROOLS-3973,Done,"native binary generation NPEs upon reflective operations on unit's POJO; but no reflective operations should occur, because code generation should override the body of the method doing reflection with a code generated version. However, this part was implemented in jBPM for processes, but not in rules.",Major,Edoardo Vacchi,,2019-05-04T04:40:07.000-0400,Codegen'd rule unit should override reflective bind,Resolved,bug,Bug
2019-05-10T14:50:23.000-0400,DROOLS-3985,Done,"This Iss was spotted during review of [PR|https://github.com/kiegroup/kie-wb-common/pull/2620] for DROOLS-3829 and DROOLS-3934.

If user deploy a model with imported node, and this node miss inputs, no build error appears. However there is error if user tries to execute such model, for example via rest.

h3. Steps To Reproduce
# Deploy the attached project to kie server
# Try to execute the model as:
{code:sh}
curl -u testadmin:'admin1234;' -H ""accept: application/json"" -H ""content-type: application/json"" -X POST ""http://localhost:8080/kie-server/services/rest/server/containers/dmn.imports/dmn"" -d ""{ \""model-namespace\"" : \""https://github.com/kiegroup/drools/kie-dmn/_547C193C-0B52-45F5-877E-F74A7DD29838\"", \""model-name\"" : \""routes\"", \""decision-name\"" : [\""Traffic.Traffic\"" ], \""decision-id\"" : [ ], \""dmn-context\"" : {\""Cars Per Hour\"" : 10}}""
{code}
# You will get reuslt:
{code:json}

{
  ""type"" : ""SUCCESS"",
  ""msg"" : ""OK from container 'dmn.imports'"",
  ""result"" : {
    ""dmn-evaluation-result"" : {
      ""messages"" : [ {
        ""dmn-message-severity"" : ""ERROR"",
        ""message"" : ""Required dependency 'Cars Per Hour' not found on node 'Traffic'"",
        ""message-type"" : ""REQ_NOT_FOUND"",
        ""source-id"" : ""_6BA74389-CBF7-4D6A-99B1-9F494DCC323A""
      } ],
      ""model-namespace"" : ""https://github.com/kiegroup/drools/kie-dmn/_547C193C-0B52-45F5-877E-F74A7DD29838"",
      ""model-name"" : ""routes"",
      ""decision-name"" : ""Traffic.Traffic"",
      ""dmn-context"" : {
        ""Cars Per Hour"" : 10,
        ""Traffic"" : { }
      },
      ""decision-results"" : {
        ""https://github.com/kiegroup/drools/kie-dmn/_1876D3A2-0972-4AE8-AF59-A56AD8D4FF5F#_6BA74389-CBF7-4D6A-99B1-9F494DCC323A"" : {
          ""messages"" : [ {
            ""dmn-message-severity"" : ""ERROR"",
            ""message"" : ""Required dependency 'Cars Per Hour' not found on node 'Traffic'"",
            ""message-type"" : ""REQ_NOT_FOUND"",
            ""source-id"" : ""_6BA74389-CBF7-4D6A-99B1-9F494DCC323A""
          } ],
          ""decision-id"" : ""https://github.com/kiegroup/drools/kie-dmn/_1876D3A2-0972-4AE8-AF59-A56AD8D4FF5F#_6BA74389-CBF7-4D6A-99B1-9F494DCC323A"",
          ""decision-name"" : ""Traffic.Traffic"",
          ""result"" : null,
          ""status"" : ""SKIPPED""
        }
      }
    }
  }
}{code}

h3. Actual result
There is response error message about missing dependency but no build error message

h3. Expected result
There is built error message
",Major,Guilherme Gomes,,2019-05-07T07:48:44.000-0400,[DMN Editor] No Build Error about missing inputs for imported node,Closed,bug,Bug
2019-05-10T15:48:36.000-0400,DROOLS-3966,Done,"Issue spotted during DROOLS-3832 review. The issue is if the included node has type ref to custom data type. In this case the type ref is not loaded. On the other hand, if it the included node has type ref to built in data type (number, string ...), the type ref is loaded fine. ",Blocker,Guilherme Gomes,,2019-05-03T04:16:28.000-0400,[DMN Designer] Included Models - Custom Data Types not loaded,Resolved,bug,Bug
2019-05-10T15:48:27.000-0400,DROOLS-3805,Done,"By DROOLS-3396, line separators in RHS are now escaped.

https://github.com/kiegroup/drools/blob/7.18.0.Final/drools-decisiontables/src/main/java/org/drools/decisiontable/parser/RhsBuilder.java#L92

However, it affects entire RHS so if you have multiple lines in ACTION, the result would be like this.

Output from SpreadSheetCompiler:
{noformat}
rule ""multiple lines in action_12""
	when
		$fact:Person(name == ""John"")
	then
		modify($fact){\n setAge(30),\n setAlive(false)\n}
		/* DEBUG */\nSystem.out.println(""  **  "" +drools.getRule().getName() + "", $fact = "" + $fact);
end
{noformat}


Error when building:
{noformat}
line 1:15 no viable alternative at character '\'
line 1:29 no viable alternative at character '\'
line 1:47 no viable alternative at character '\'
line 2:13 no viable alternative at character '\'
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.63 s <<< FAILURE! - in org.drools.decisiontable.LineBreakXLSTest
[ERROR] testMultipleLinesInAction(org.drools.decisiontable.LineBreakXLSTest)  Time elapsed: 0.257 s  <<< ERROR!
java.lang.NullPointerException
	at java.lang.String.indexOf(String.java:1718)
	at org.drools.compiler.rule.builder.dialect.DialectUtil.rewriteModifyDescr(DialectUtil.java:631)
	at org.drools.compiler.rule.builder.dialect.DialectUtil.rewriteDescr(DialectUtil.java:580)
	at org.drools.compiler.rule.builder.dialect.DialectUtil.fixBlockDescr(DialectUtil.java:161)
	at org.drools.compiler.rule.builder.dialect.DialectUtil.fixBlockDescr(DialectUtil.java:119)
	at org.drools.compiler.rule.builder.dialect.asm.AbstractASMConsequenceBuilder.consequenceContext(AbstractASMConsequenceBuilder.java:57)
	at org.drools.compiler.rule.builder.dialect.asm.AbstractASMConsequenceBuilder.build(AbstractASMConsequenceBuilder.java:33)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:126)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.internalAddRule(KnowledgeBuilderImpl.java:1204)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1195)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRulesLevel(KnowledgeBuilderImpl.java:1173)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1121)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileKnowledgePackages(KnowledgeBuilderImpl.java:946)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:937)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDecisionTable(KnowledgeBuilderImpl.java:371)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addKnowledgeResource(KnowledgeBuilderImpl.java:759)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2288)
	at org.drools.decisiontable.LineBreakXLSTest.testMultipleLinesInAction(LineBreakXLSTest.java:53)
	...
{noformat}

Escaping should be done only for literal String?
",Major,Toni Rikkola,,2019-03-29T03:42:49.000-0400,All line separators in RHS in spreadsheet are escaped,Resolved,bug,Bug
2019-05-10T09:33:32.000-0400,DROOLS-3998,Done,None,Major,Matteo Mortari,,2019-05-10T03:39:36.000-0400,DMN FEEL parser Table61 error with aliased type,Resolved,bug,Bug
2019-05-10T14:48:53.000-0400,DROOLS-3934,Done,"Currently, users are not able to see a boxed expression from an imported node.

The DMNMarshaller must fetch information about external boxed expressions, and users must be able to see those boxed expressions in the DMN editor.

[UPDATE]
During checking DROOLS-3832 I was able to see expression of imported nodes, however I had to save and reopen the diagram.",Major,Guilherme Gomes,,2019-04-23T10:01:17.000-0400,[DMN Designer] Included Models - Boxed Expressions does not work for imported DRG Elements,Resolved,bug,Bug
2019-05-10T03:36:03.000-0400,DROOLS-3991,Done,"I deployed 2 war files in wildfly 14. Both of them are drools projects that are trying to execute some rules. The problem is that only one of the war file is able to execute drools rule. The other fails with the below Internal Server Error:

Caused by: java.lang.IllegalStateException: There's already another KieContainer created from a different ClassLoader
        at org.drools.compiler.kie.builder.impl.KieServicesImpl.getKieClasspathContainer(KieServicesImpl.java:107)
        at org.drools.compiler.kie.builder.impl.KieServicesImpl.getKieClasspathContainer(KieServicesImpl.java:79)
        at org.drools.examples.helloworld.HelloWorldExample.drools(HelloWorldExample.java:49)
        at com.sample.rest.MessageRestService.Testdrools(MessageRestService.java:26)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
",Critical,Maciej Swiderski,,2019-05-08T04:53:07.000-0400,java.lang.IllegalStateException: There's already another KieContainer created from a different ClassLoader,Closed,bug,Bug
2019-05-09T03:16:02.000-0400,DROOLS-3988,Done,"Looks like change-set XSD which used to be available on this URL [1] is now only available through https. All usage occurrences of this must be updated to use https. 

[1] http://anonsvn.jboss.org/repos/labs/labs/jbossrules/trunk/drools-api/src/main/resources/change-set-1.0.0.xsd",Major,Tibor Zimanyi,,2019-05-07T08:48:24.000-0400,XMLs using change-set don't work,Resolved,bug,Bug
2019-05-09T05:39:55.000-0400,DROOLS-3986,Cannot Reproduce,"This Iss was spotted during review of [PR|https://github.com/kiegroup/kie-wb-common/pull/2620] for DROOLS-3829 and DROOLS-3934.

User is not able to execute model with imported nodes.

h3. Steps To Reproduce
# Deploy the attached project to kie server
# Try to execute the model as:
{code:sh}
curl -u testadmin:'admin1234;' -H ""accept: application/json"" -H ""content-type: application/json"" -X POST ""http://localhost:8080/kie-server/services/rest/server/containers/dmn.imports/dmn"" -d ""{ \""model-namespace\"" : \""https://github.com/kiegroup/drools/kie-dmn/_547C193C-0B52-45F5-877E-F74A7DD29838\"", \""model-name\"" : \""routes\"", \""decision-name\"" : [\""Traffic.Traffic\"" ], \""decision-id\"" : [ ], \""dmn-context\"" : {\""cars per hour\"" : 10}}""
{code}
# You will get result:
{code:json}
{
  ""type"" : ""FAILURE"",
  ""msg"" : ""Error from container 'dmn.imports'Unable to locate DMN Model to evaluate"",
  ""result"" : null
}{code}
# Error appears in server log:  [^error.log] 

h3. Actual result
There is response error message and error in server log

h3. Expected result
Model is executed
",Major,Guilherme Gomes,,2019-05-07T08:08:52.000-0400,[DMN Editor] Unable to Execute model with imported nodes,Closed,bug,Bug
2019-05-07T11:27:58.000-0400,DROOLS-3983,Done,"The loading of the *change-set file is throwing a SaxParseException* since yesterday when starting our application, it didnt gave errors during the last 5 years and it remains untouched.

We saw that this happened yesterday to the user Greg on this same forum, it suddenly started to happend to us yesterday too, so we were wondering what steps did you guys followed to fix the problem? We have a production system running OK, but our local machines are giving error when starting tomcat/websphere instances, we're scared that production machines will start to fail when restarting the services.. We're open to hearing suggestions or related fixes. Thanks in advance.

UPDATE: 07/05/19: We found out that the JBPM service starts if we add this to our Tomcats/Websphere's For the people suffering the same problem that us *""-Ddrools.schema.validating=false""*. We believe that is a error in something related to the XMLParser library from the drools versión itself, maybe this can bring attention to the devs to this case.",Major,Mario Fusco,,2019-05-07T06:53:34.000-0400,SAXParser error premature file on Change Set with Drools 5.3.1.Final,Resolved,bug,Bug
2019-05-07T08:25:03.000-0400,DROOLS-3895,Done,"{{TextAreaSingletonDOMElementFactory}} extends {{BaseSingletonDOMElementFactory}} that attaches a {{KeyDownHandlerCommon}} handler.

This handler intercepts {{KeyCodes.KEY_ENTER}} that flushes the content of the editor.

The {{KeyDownHandlerCommon}} handler should not respond to {{KeyCodes.KEY_ENTER}} for {{TextAreas}}.

h2. Accetance criteria
User can put multiline for 
- Literal expression (/)
- Context (/)
- Relation (/)
- Invocation (/)
- Function (/)
- Decision Table (/)",Major,Michael Anstis,,2019-04-16T11:53:46.000-0400,[DMN Designer] TextAreas can no longer be multi-line,Resolved,bug,Bug
2019-05-06T14:55:38.000-0400,DROOLS-3980,Won't Fix,"The loading of the change-set file is throwing a SaxParseException.  I believe the problem is due to the fact that the following url is no longer available:
[http://drools.org/drools-5.0/change-set|http://drools.org/drools-5.0/change-set]

Can that URL be made available again? Or can the information formerly available there be provide so that we can host it?

We have several production systems that are non-functioning due to this issue. So, this is a very high priority for us.

",Major,Mario Fusco,,2019-05-06T11:42:36.000-0400,Unavailable URL: http://drools.org/drools-5.0/change-set,Closed,bug,Bug
2019-05-06T03:55:08.000-0400,DROOLS-3941,Done,None,Major,Matteo Mortari,,2019-04-26T04:43:17.000-0400,DMN Alignments to DMN13-125 Disambiguation for Modulo / Remainder function,Resolved,bug,Bug
2019-05-05T19:15:26.000-0400,DROOLS-3963,Done,Issue spotted during DROOLS-3832 review. The issue is if user connect nodes from included model. Then after reopening these connections are gone.,Blocker,Daniel José dos Santos,,2019-05-03T04:03:12.000-0400,[DMN Designer] Included Models - Connections are lost after reopening,Closed,bug,Bug
2019-05-03T07:13:27.000-0400,DROOLS-3438,Done,"User is able to edit grid cell by pressing an enter. Currently the edit mode is cancelled by *Shift + Tab* combination. We have to change this to:
- *Tab* for cancel edit mode and *store* the value
- *Esc* for cancel edit mode and *discard* the value

This defect is caused by keyboard shortcuts implemented as part of DROOLS-2932.

",Critical,Jozef Marko,,2018-12-13T11:13:31.000-0500,Cancel Scenario Simulation edit mode,Resolved,bug,Bug
2019-05-02T12:35:32.000-0400,DROOLS-3961,Done,None,Major,Mario Fusco,,2019-05-02T12:32:03.000-0400,Missing node sharing in executable model when model sources are generated in multiple stages,Resolved,bug,Bug
2019-05-03T15:55:27.000-0400,DROOLS-3962,Out of Date,"The attached dmn file fails to compile, though it complies with the dmn schema def found here: https://www.omg.org/spec/DMN/20180505/DMN12.xsd. If one removes the <di:extension/> tag found on line 68, then the file compiles",Critical,Matteo Mortari,,2019-05-02T21:07:43.000-0400,dmn model fails to compile when <di:extension> tag is included in a dmndi:DMNDiagram,Resolved,bug,Bug
2019-05-02T08:16:40.000-0400,DROOLS-3922,Done,"Import of external classes in Test Scenario doesn't work until you have a class in your package.

If you import an Integer or similar, you will not find it in the right panel until you create a custom DO in your same package",Major,Gabriele Cardosi,,2019-04-18T10:38:28.000-0400,Import of external classes in Test Scenario doesn't work until you have a class in your package,Resolved,bug,Bug
2019-04-30T10:07:01.000-0400,DROOLS-3942,Done,None,Major,Matteo Mortari,,2019-04-26T10:49:05.000-0400,DMN Fix wrong snippet for XML/JAXB request/response Traffic Violation,Resolved,bug,Bug
2019-04-30T13:39:05.000-0400,DROOLS-3850,Done,See CompilerTest.testErrorTwoPatterns ignored test,Major,Mario Fusco,,2019-04-03T06:22:06.000-0400,Pattern DSL not evaluating with two constraints,Resolved,bug,Bug
2019-04-30T15:27:15.000-0400,DROOLS-2866,Done,"Any editor depending on the need of Docks needs a Perspective around it to have the Docks included.

This means the Appformer standalone editor perspective or any custom perspective that uses these screens does not show the Docks panel and the editor lacks editing features.

Areas hit by this issue:
* DMN Editor
* Data Modeller
* Scenario Simulation editor
* Case management editor
* BPMN Process editor
* Page authoring editor
* Form layout editor
* Manage section

Possible fixes:
* Add a dock for the editor
* Add a dock for appformer standalone perspective

Might be it is enough to add the dock for standalone perspective. This needs some investigation.",Major,Toni Rikkola,,2018-08-08T08:03:42.000-0400,Docks used by editors are broken in embed enviroments,Resolved,bug,Bug
2019-04-30T10:39:49.000-0400,DROOLS-3888,Done,"In 7.18.0.Final (RHDM7.3.0), the change introduced by [DROOLS-3523|https://issues.jboss.org/browse/DROOLS-3523] as stated in the following knowledge.

 Rules don't fire after upgrading to RHDM 7.3.0
 https://access.redhat.com/solutions/4014541

Therefore, DroolsTest.java in JBDS Drools sample project does not fire rules as expected.
However,  DecisionTableTest.java still works even tough 'packages' attribute in kmodule.xml still specify folder instead of package, which is inconsistent behavior with DRL sample.


",Major,Mario Fusco,,2019-04-15T20:45:07.000-0400,rules in spreadsheet does not behave same way with drl.,Closed,bug,Bug
2019-04-30T02:06:18.000-0400,DROOLS-3949,Done,"The ""Diagram properties"" is empty in any step of creation diagram(see attach), also you will receive an error after attempting to click on ""Business Central"" after using ""Diagram properties"".

Please notice the issue affects also Business Processes. If user create new business process, the diagram properties panel is always empty.",Blocker,Michael Anstis,,2019-04-29T09:47:32.000-0400,"""Diagram properties"" is empty, if you'll go to Business Central you'll get error",Resolved,bug,Bug
2019-04-29T10:08:56.000-0400,DROOLS-3899,Done,"-runtimes PR fails to run -example REST Quarkus test, when Quarkus version >0.12
As demonstrated by history of Jenkins runs of this PR:
https://github.com/kiegroup/submarine-runtimes/pull/26
which as part of CI will also run this:
https://github.com/kiegroup/submarine-examples/pull/15

Error was:
[ERROR] testGET  Time elapsed: 0.007 s  <<< ERROR!
org.junit.jupiter.api.extension.TestInstantiationException: TestInstanceFactory [io.quarkus.test.junit.QuarkusTestExtension] failed to instantiate test class [org.kie.dmn.submarine.quarkus.example.ByNameDMNEndpointTest]: Failed to create the boostrap class loader
Caused by: java.lang.IllegalStateException: Failed to create the boostrap class loader
Caused by: io.quarkus.bootstrap.BootstrapException: Failed to locate current project among the loaded local projects

Please notice especially the last line.
I had the same problem locally with 0.13.1, but that was fixed locally with 0.13.3
But trying with 0.13.3 keep failing on Jenkins CI when running -runtimes.",Major,Tibor Zimanyi,,2019-04-17T06:10:13.000-0400,"Submarine Jenkins fails the Quarkus REST test, using Quarkus >0.12",Resolved,bug,Bug
2019-04-29T03:49:11.000-0400,DROOLS-3848,Done,"can compare days and time duration:
max(duration(""PT6M""), duration(""PT5M"")) => PT6M
but can’t copmapre year and month duration:
max(duration(""P6Y""), duration(""P5Y"")) => null",Major,Matteo Mortari,,2019-04-03T05:38:42.000-0400,Internals may expect value is Comparable,Resolved,bug,Bug
2019-04-23T05:11:43.000-0400,DROOLS-3927,Done,Using codegen via maven plugin with the attached model fails compilation.,Major,Matteo Mortari,,2019-04-23T03:37:28.000-0400,DMN compile error in codegen when maven plugin and expression in input clause,Resolved,bug,Bug
2019-04-26T06:34:58.000-0400,DROOLS-3930,Done,"When editing a guided rule template, at the Data tab, the table UX needs improvement.

Adjusting column size is difficult. 
Text is not fully displayed within columns.

Screenshot attached with reproducer. 

To reproduce: 
- Start PAM
- Import project
- Author  GuidedRuleTemplateExample
- Click on Data tab
- Try to resize colums and use lenghty fields.

",Critical,Michael Anstis,,2019-04-23T06:31:09.000-0400,Improve usability from Guided Rule Template - Can't resize column,Resolved,bug,Bug
2019-04-24T09:43:25.000-0400,DROOLS-3896,Done,"{{EditableHeaderGridWidgetEditCellMouseEventHandler}} needs to get the meta-data block start.

The issue is only reproducible using the mouse and not keyboard.",Major,Michael Anstis,,2019-04-16T12:03:34.000-0400,[DMN Designer] Editing a merged header cell positions editor at the wrong location,Resolved,bug,Bug
2019-04-25T08:02:56.000-0400,DROOLS-3900,Done,"Quarkus guidelines are for having Native image test in this form:

{code:java}
import io.quarkus.test.junit.SubstrateTest;

@SubstrateTest
public class NativeByNameDMNEndpointIT extends ByNameDMNEndpointTest {

    // Execute the same tests but in native mode.
}
{code}

When the dmn example is inheriting from the submarine-examples bom, it causes those IT-ending tests to run anyway even on normal JVM.
See this commit exhibit the issue even locally: https://github.com/kiegroup/submarine-examples/pull/15/commits/1bdd53d89fed28821d21d29fd610402761463514

Removing the pom inheritance, the test behavior is back Quarkus guideline
",Major,Tibor Zimanyi,,2019-04-17T06:14:33.000-0400,Inheriting submarine-examples bom causes Quarkus Native Image integration tests to run anyway on normal JVM,Resolved,bug,Bug
2019-04-25T01:54:57.000-0400,DROOLS-3591,Done,"The following navigation between types must work in all supported browsers:
 !2019-01-31 15.02.26.gif|thumbnail! 

[~tirelli] reported that in some scenarios this navigation doesn't work.

---

*Steps to reproduce:*
- Add new DT
- Insert the name
- Dropdown component navigation doesn't work *(expected: dropdown navigation should work)*		
- Dropdown component element unselects the DT *(expected: the DT row should stay selected)*
- Dropdown component focus on input element when the new type selected *(expected: dropdown should stay focused)*",Major,Michael Anstis,,2019-01-31T12:04:19.000-0500,[DMN Designer] Data Types - Type dropdown is not navigable by keyboard,Resolved,bug,Bug
2019-04-25T03:47:54.000-0400,DROOLS-3932,Done,"When opening an invalid DMN file (one that fails parsing) the editor displays the error message ""An error was produced during process diagram parsing. There might be bpm nodes not yet supported by current Process Designer version, or the xml content can contain errors. You can try to open the file with the Legacy Process Designer or repair it manually"". This needs changing to something more DMN friendly.",Major,Michael Anstis,,2019-04-23T09:33:13.000-0400,[DMN Designer] Replace BPMN specific parsing error message,Resolved,bug,Bug
2019-04-17T02:20:59.000-0400,DROOLS-3880,Rejected,"When one inserts a new object in drl file and afterward wants to compare its String representation of a number with another number in next rules Drools gives an exception. It is much clearer with an example (below in code section)

Interesting that when you compare it as a String (amount == ""10"") - it works fine. But when you try to parse ""amount"" to Double then Java doesn't know that there is any value at all (thinks amount == null and therefore cannot parse it). The second interesting thing is that if you created this object (resource) in java and inserted it before ""fireAllRules()"" - ""amount"" field become visible to the parser and it works.
But the matter is that I cannot create this object before firing rules because I don't know wheter there will be a need of it. And my fields must be String as well. And I have to compare it like ""more than"" or ""less than"", so comparing strings doesn't apply. ",Major,Mario Fusco,,2019-04-15T00:31:20.000-0400,Bug when parsing fact from String to Double in Drools,Resolved,bug,Bug
2019-04-18T05:19:16.000-0400,DROOLS-3802,Done,"Build of Executable Model fails with the following conditions in LHS:

* multi-bytes property name (or started with capital letter)
* accessing the property by the name without using getter.
* accessing nested property by `.`

e.g.
{noformat}
when
    $fact : Fact( 住所.zipCode == ""1000001"")
 ...
{noformat}

",Major,Luca Molteni,,2019-03-28T03:38:39.000-0400,"Build error with executable-model, nested property with double-bytes property name",Resolved,bug,Bug
2019-04-17T05:31:21.000-0400,DROOLS-3893,Done,"The guided decision tables does not generate the code of *call method on* brl action. User is able to select a method of bound data object, however in the generated source, the *call method on* action is missing.

h4. Reproducer tests
https://github.com/jboss-integration/bxms-qe-tests/pull/2442
https://github.com/jboss-integration/bxms-qe-tests/pull/2443",Major,Toni Rikkola,,2019-04-16T09:24:36.000-0400,[Guided Decision Table] Call method on is not generated,Resolved,bug,Bug
2019-04-15T09:31:42.000-0400,DROOLS-3702,Done,"1. Add a `Decision Node`
2. Add a `Input Data Node` bellow `Decision Node`
3. Connect `Input Data Node` to `Decision Node`
4. Save
5. Close
6. Open againThe arrow from `Input Data Node` to `Decision Node` will be at right of the `Decision Node` and if you move the `Input Data Node`, the arrow is not repositioned.
I noticed this in DMN Showcase and in drools-wb.
And if you add a new `Decision Node` and a new `Input Data Node`, without save and close, it behaves as expected.",Major,Michael Anstis,,2019-02-25T12:10:33.000-0500,[Stunner] Arrows are incorrectly positioned when save-open diagram,Resolved,bug,Bug
2019-04-11T08:58:55.000-0400,DROOLS-3770,Done,"The property editing information for a given column (included the DOMELEmentFactory) are set inside SetPropertyHeaderColumn.
If the property is a collection, its generic type is retrieved with informations from the context.
Currently, this mechanism uses the ""steps"" stored inside ""elements"", that point to full path of the property (and a mapped entry must exists).
This is broken for top-level collection because are mapped in a different way, so a compatible method for different situations must be implemented",Major,Gabriele Cardosi,,2019-03-18T06:17:55.000-0400,Fix generic type retrieval inside SetPropertyHeaderCommand,Closed,bug,Bug
2019-04-10T08:59:12.000-0400,DROOLS-1782,Rejected,"If multiple columns use the same variable name, one of the cell values wins and overwrites the content defined in other cells using the same variable. This can be observed in the ""Source"" tab of the editor.  ",Major,Michael Anstis,,2017-07-26T06:43:11.000-0400,Guided DT: Variable substitution doesn't work correctly if multiple columns share the same variable name ,Closed,bug,Bug
2019-04-12T03:10:53.000-0400,DROOLS-3869,Done,None,Major,Mario Fusco,,2019-04-10T05:15:59.000-0400,ServiceDiscovery doesn't work with Fuse,Resolved,bug,Bug
2019-04-12T09:33:43.000-0400,DROOLS-3873,Done,"Invoking a collection editor popup from a nested object causes the following unexpected error:

{{Uncaught exception: Index: 0, Size: 0}}

 !bug1.png|thumbnail! ",Major,Gabriele Cardosi,,2019-04-10T08:05:01.000-0400,Invoking a collection editor popup from a nested object causes an unexpected error,Resolved,bug,Bug
2019-04-10T07:13:29.000-0400,DROOLS-3470,Rejected,"Two attachments show the problem. One picture shows all checkboxes of limited entry decision table are shown correctly. The second picture shows checkboxes are not visible when description is in edit mode. See steps to reproduce.

This issue occurs just for limited entry decision table. Extended entry decision table works fine. Next this problem occurs just if the description column edit mode is started by pressing enter. Double click by mouse doesn't cause this issue.

h2. Acceptance criteria
There exists [selenium test|https://github.com/jboss-integration/bxms-qe-tests/blob/master/test-kie-wb/src/test/java/org/jboss/qa/brms/authoring/dt/feature/LimitedEntryWebDTTest.java] for limited entry tables, however due to this DROOLS-3470 issue it has to be ignored, see [PR|https://github.com/jboss-integration/bxms-qe-tests/pull/2150].",Minor,Michael Anstis,,2019-01-04T03:00:11.000-0500,"[GDT] Limited Entry Table, checkboxes are not rendered when enter is pressed",Closed,bug,Bug
2019-04-11T07:43:28.000-0400,DROOLS-3876,Done,None,Major,Matteo Mortari,,2019-04-11T04:43:15.000-0400,DMN kie server get models endpoint when inputdata typeref empty,Resolved,bug,Bug
2019-04-09T09:54:57.000-0400,DROOLS-3415,Rejected,"I have a guided decision tree where I am trying to update a ENUM field but once I click OK on the workbench, it is taking the default value. I am using KIE workbench 7.12.0.

I have given complete screenshot and details in
https://groups.google.com/forum/#!topic/drools-usage/xjVBBtyPbdc",Major,Toni Rikkola,,2018-12-07T03:21:26.000-0500,guided decision tree updation is not hapening,Closed,bug,Bug
2019-04-08T08:38:11.000-0400,DROOLS-1783,Rejected,None,Trivial,Michael Anstis,,2017-08-09T09:03:32.000-0400,[Guided Decision Table] Focus is lost after renaming the GDT,Closed,bug,Bug
2019-04-10T02:27:30.000-0400,DROOLS-3834,Done,"When the Process Mojo plugin is active, DRL files are compiled in memory. This is usually skipped when the Drools Mojo is running. We should probably do the same in the Process Mojo.",Major,Edoardo Vacchi,,2019-04-02T03:15:27.000-0400,Process generation in jBPM Mojo should not cause DRL file in-memory compilation,Resolved,bug,Bug
2019-04-08T08:30:56.000-0400,DROOLS-2141,Rejected,"The ""pinned mode"" indicator (following https://issues.jboss.org/browse/DROOLS-1828) is incorrect if the ""description"" column has been resized. See the attached.",Minor,Guilherme Gomes,,2017-11-16T06:10:44.000-0500,[Guided Decision Table] Pinned mode indicator position wrong,Closed,bug,Bug
2019-04-08T12:51:29.000-0400,DROOLS-3794,Done,"A condition such as {{list contains item}} or {{item memberOf list}} seems to correspond to {{EvaluatorHelper.contains(list, item)}}, but when this has been compiled through {{ASMConditionEvaluatorJitter}}, the condition includes the additional constraint, {{item != null}}. This differs to the non-JITed condition, which does not require {{item}} to be non-null.

Attached an example {{.drl}} file as an example case, and a simple runner. Running {{java DroolsTest 14}} triggers the issue for me (resulting in an infinite loop in this case), but since the recompilation is asynchronous, it might require a larger number.

Decompiled {{ConditionalEvaluator}} for the test case below:
{code:java}
import droolstest.Bar;
import droolstest.Foo;
import java.util.List;
import org.drools.core.common.InternalFactHandle;
import org.drools.core.common.InternalWorkingMemory;
import org.drools.core.rule.Declaration;
import org.drools.core.rule.constraint.ConditionEvaluator;
import org.drools.core.rule.constraint.EvaluatorHelper;
import org.drools.core.spi.Tuple;

public class ConditionEvaluator4471f59df9b54235ba1be708b5c480da
implements ConditionEvaluator {
    private static final String EXPRESSION = ""!( foo.barNames contains name )"";
    private final Declaration[] declarations;

    public boolean evaluate(InternalFactHandle internalFactHandle, InternalWorkingMemory internalWorkingMemory, Tuple tuple) {
        Tuple tuple2 = tuple;
        Foo foo = (Foo)this.declarations[0].getValue(internalWorkingMemory, tuple2.getFactHandle().getObject());
        List list = foo.getBarNames();
        String string = ((Bar)internalFactHandle.getObject()).getName();
        return !(list == null ? false : (string == null ? false : EvaluatorHelper.contains((Object)list, (Object)string)));
    }

    public ConditionEvaluator4471f59df9b54235ba1be708b5c480da(Declaration[] arrdeclaration) {
        this.declarations = arrdeclaration;
    }
}
{code}",Major,Mario Fusco,,2019-03-25T20:23:48.000-0400,"Inconsistent null check between JITed and non-JITed ""contains""/""memberOf"" condition",Resolved,bug,Bug
2019-04-09T08:05:14.000-0400,DROOLS-1790,Rejected,"If you have a model with ""dependent enumerations"" defined the ""Row Expander"" page of the ""New Guided Decision Table"" Wizard throws a NPE. The workaround is to untick the ""Expand all"" checkbox before clicking ""Finish"". The ""New Guided Decision Table"" Wizard should ideally expand correctly for dependent enumerations or, at the very least, not throw the NPE! ",Major,Michael Anstis,,2017-08-04T07:25:51.000-0400,[Guided Decision Table] Row Expander page throws NPE with dependent enumerations,Closed,bug,Bug
2019-04-09T09:50:22.000-0400,DROOLS-3440,Rejected,"Type ""1"" into a ""Value list (optional):"" field and the table shows a drowdown without content.",Major,Toni Rikkola,,2018-12-17T09:27:38.000-0500,Guided decision tables: Single 'comma separated value' does not work,Closed,bug,Bug
2019-04-05T11:54:42.000-0400,DROOLS-3858,Done,None,Major,Matteo Mortari,,2019-04-05T06:07:18.000-0400,DMN large memory allocation bug,Resolved,bug,Bug
2019-04-04T05:17:48.000-0400,DROOLS-3818,Done,"Steps to reproduce it:
- Open a new scenario asset
- Assign a instance (eg . Author)
- Rename it (eg. Author_test)
- Try to assign a Complex type as a property (eg. a Collection)
- A NPE is thown.",Major,Yeser Amer,,2019-04-01T07:11:22.000-0400,Assign a complex type object to a property with modified label leads to NPE,Resolved,bug,Bug
2019-04-03T06:40:53.000-0400,DROOLS-3836,Done,"When running test [1] in a loop, it fails on NullPointerException with the following stacktrace [2]. It is better reproducible using short event expiration (e.g 1ms). 

[1] https://github.com/kiegroup/drools/blob/4ce8431e43a3bcd55f367b247d9a4766a11f1b5a/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/CepEspTest.java#L2912
[2] https://gist.github.com/baldimir/dff726297026f15da9181df2bf4c79fb",Major,Tibor Zimanyi,,2019-04-02T04:24:43.000-0400,NullPointerException when serializing KieSession with a Timer,Resolved,bug,Bug
2019-04-02T08:38:20.000-0400,DROOLS-3837,Done,"Details here:
https://issues.jboss.org/browse/BXMSDOC-3864",Major,Mario Fusco,,2019-04-02T07:20:47.000-0400,Typos in DSL Editor screenshot,Resolved,bug,Bug
2019-04-02T03:17:22.000-0400,DROOLS-3833,Done,CDI annotations for generated code should be only generated when used in a maven build and not by the in-memory drools compiler,Major,Edoardo Vacchi,,2019-04-02T03:11:00.000-0400,Ensure CDI annotations are only generated in Maven plugin,Resolved,bug,Bug
2019-04-01T04:21:06.000-0400,DROOLS-3809,Done,"Normalization causing ConcurrentModificationException
Wrong Bound sorting leads to wrong analysis of Gaps and Overlaps
Fixing human friendly representation of single value in discrete domain",Major,Matteo Mortari,,2019-03-29T11:11:05.000-0400,DMN DT Analysis Bound sort for gaps overlaps and normalization,Resolved,bug,Bug
2019-04-01T10:12:29.000-0400,DROOLS-3449,Out of Date,None,Major,Edoardo Vacchi,,2018-12-21T02:25:01.000-0500,Creating a kjar with the maven pluging the executable model classes are generated twice,Resolved,bug,Bug
2019-03-28T11:40:25.000-0400,DROOLS-3425,Done,"When multiple assets are opened in different editors, their docks incorrectly interfere. After opening two assets in a row, the Business Central freezes with an unexpected error. Closing one asset causes unexpected disappearance of the left panel.

See the attached screencast for detailed information. After the assets are opened for the first time, everything seems correct. Once the {{.dmn}} file is opened for the second time, the issues start to occur.",Critical,Toni Rikkola,,2018-12-11T06:23:14.000-0500,Unexpected behavior of docks when multiple editors are opened,Resolved,bug,Bug
2019-03-29T04:23:56.000-0400,DROOLS-3787,Done,"Under the condition:
- Windows
- executable-model build (mvn clean install -DgenerateModel=YES -DskipTests)

The build tries to resolve java source under ""src/test/java"" then failed with the error
{noformat}
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.20.0-SNAPSHOT:generateModel (default-generateModel) on project
 with-test-sources: Execution default-generateModel of goal org.kie:kie-maven-plugin:7.20.0-SNAPSHOT:generateModel faile
d: Unable to get KieModule, Errors Existed: Error Messages:
[ERROR] Message [id=1, level=ERROR, path=src/test/java/com/sample/SampleTest.java, line=15, column=372
[ERROR] text=Only a type can be imported. org.mockito.Mockito resolves to a package]
[ERROR] Message [id=2, level=ERROR, path=src/test/java/com/sample/SampleTest.java, line=22, column=563
[ERROR] text=Mockito cannot be resolved]
[ERROR] ---
{noformat}

It doesn't happen in MacOS/RHEL7",Major,Luca Molteni,,2019-03-24T22:17:21.000-0400,executable-model build failed because trying to resolve test case in Windows,Resolved,bug,Bug
2019-03-25T17:34:16.000-0400,DROOLS-3767,Done,"Our _ScenarioGridCell_ has an _isEditingMode_ flag.
If the flag is _true_, the editing does not start.
When starting editing a grid celll, the _isEditingMode_ flag is set to  _true_.
Normally, this flag is set back to _false_ when editing finish.
Currently, if for some reason an exception is thrown soon after start editing, the flag remains  _true_, and it is not possible to start editing the cell again (unless closing and reopening the asset).
This should be fixed.
",Major,Yeser Amer,,2019-03-15T06:46:48.000-0400,"Reset ""isEditing"" status flag inside gridcell",Resolved,bug,Bug
2019-03-25T12:32:05.000-0400,DROOLS-3604,Done,"Remaining from https://issues.jboss.org/browse/DROOLS-3377

- Horizontal scrollbar does not disappear even after resizing the last column to the proper width.
- Width is restored as default when user set the binding of a column. This happens only if he already changed manually the width",Major,Daniele Zonca,,2019-02-05T08:32:13.000-0500,Improvements of table/column width,Resolved,bug,Bug
2019-03-27T10:03:06.000-0400,DROOLS-3760,Done,"This issue was spotted during review of the DROOLS-3666 task, however not sure if it is related to changes introduced there.

If user adds enumeration constraints and they do not fit the dialog size, there appears vertical scrollbar. However  the scrollbar moves to the beginning of the list every time the add button is pressed. This forces user to scroll to the latest added entry every time the add button is pressed. 

We have already this functionality of scrolling to latest in the data types list view component - list of all declared data types.

h3. Current state
The attached picture show the state of dialog when new constraint was just added and the entries count doesn't fit the dialog size.

h3. Expected state
The scrollbar in the attached dialog is  scrolled down. (/) checked with linked PR",Minor,Guilherme Gomes,,2019-03-12T04:57:11.000-0400,[DMN Designer] Enumeration constraint dialog doesn't scroll to latest entry,Resolved,bug,Bug
2019-03-25T04:17:22.000-0400,DROOLS-3715,Done,"o   During ZipKieModule loading in “org.drools.compiler.kie.builder.impl.ZipKieModule:142” nullpointerexception is thrown:

 

    urlPath = urlPath.substring( urlPath.lastIndexOf( '!' ) + 1 );

    ArrayList<ZipEntry> entries = new ArrayList<>();

    // read jar file from uber-jar

    InputStream in = this.getClass().getResourceAsStream(urlPath); // nullpointerexception

 

For example full UrlPath on windows to internal .jar is:

C:\Users\xbbnv0c\IdeaProjects\ais-data-exchange\data-exchange-app\target\data-exchange-app-1.0.1-SNAPSHOT.jar!\BOOT-INF\lib\data-exchange-brms-1.0.1-SNAPSHOT.jar

So the result of this first line will be:

\BOOT-INF\lib\data-exchange-brms-1.0.1-SNAPSHOT.jar

It will be perfect, but during accessing internal resource file separator should be “/” not “\”. So InputStream in = null.",Major,Tibor Zimanyi,,2019-02-28T08:10:10.000-0500,Zipkiemodule nullpointerexception,Resolved,bug,Bug
2019-03-25T04:04:24.000-0400,DROOLS-3559,Duplicate Issue,"When a rule has a non-existing method in RHS modify block with mvel dialect, executable-model misses to raise an error so the rule is compiled.

{noformat}
rule R
when
  $p : Person()
then
  modify($p) {likes = nonExistingMethod()};
end
{noformat}",Major,Luca Molteni,,2019-01-28T02:12:12.000-0500,executable-model misses to raise an error for a non-exisiting method with Mvel dialect,Closed,bug,Bug
2019-03-27T09:50:10.000-0400,DROOLS-3735,Done,"If the data type constraint is set as {{[date( ""2016-07-29"" )..date( ""2016-07-30"" )]}} [0], it is not recognized as an range in the [1]. 

The problem is that our {{ParseService}} for parsing Range, doesn't check deeply, what is the type of {{StartNode}} [3]. And then the {{DateValueFormatter}} component fails to replace the leading {color:red}{{date(}}{color} [4].

[0]
 !Screenshot from 2019-03-07 11-11-18.png|thumbnail! 

[1]
 !Screenshot from 2019-03-07 11-11-30.png|thumbnail! 

[3]
https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-dmn/kie-wb-common-dmn-backend/src/main/java/org/kie/workbench/common/dmn/backend/editors/types/DMNParseServiceImpl.java#L54

[4]
https://github.com/kiegroup/kie-wb-common/pull/2508/files#diff-e199e1e595037dcb4b465ff36dd13a1f",Minor,Jozef Marko,,2019-03-07T05:19:52.000-0500,[DMN Designer] Expression constraint is not parsed to Range constraint,Resolved,bug,Bug
2019-03-11T04:43:51.000-0400,DROOLS-3205,Done,"The *manage custom data type* dialog misses the *Structure* option for the IE11, see the attached screenshot. Other browsers works fine.",Minor,Daniel José dos Santos,,2018-10-30T04:15:01.000-0400,[DMN Designer][IE11] Missing Structure option,Closed,bug,Bug
2019-03-11T14:42:34.000-0400,DROOLS-3113,Done,"*Prerequisite:*
- Existing custom item definitions in the model

*Step to reproduce:*
- Open manage custom data type dialog
- Click edit to entry 1
- Insert above from entry 2
- Notice entry 1 will stay in edit mode
- Insert above from entry 1
- Notice the edit mode of entry 1 will be canceled and changes done in name will be saved, changes in data type will be lost

*Expected scenario:*
- We should keep edit mode active regardless of the creation type.

Source: https://issues.jboss.org/browse/DROOLS-3024?focusedCommentId=13645851&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13645851",Minor,Guilherme Gomes,,2018-10-11T08:50:31.000-0400,[DMN Designer] Data Types - Edit mode inconsistency,Closed,bug,Bug
2019-03-04T07:01:27.000-0500,DROOLS-3724,Done,"If I use the Settings of a project to created a Kie Base and Kie Session I end up with the UI hanging, and I can't continue until I do a control-R to reload the web application.  Web Applications should never hang.

Given a DRL like this:
package com.myspace.annual_rent_decision;

import com.myspace.annual_rent_decision.Lease;

rule ""Is signoff required""

when 
  lease : Lease(leaseAgreementAmount >= 80000)
   
//   eval(true)
then 
   System.out.println(""Setting signOffRequired to True"");
   lease.setSignOffRequired(true);
end

A simple fact model to support it.  You will find the below issue.",Blocker,Toni Rikkola,,2019-03-01T14:27:21.000-0500,Defining non default Kie Base and Kie Session results in a hang in the Test Scenario Runner,Resolved,bug,Bug
2019-03-01T02:30:49.000-0500,DROOLS-3716,Done,"When building drools-constraint-parser with JDK 11, it fails on compilation errors, not having annotation classes on classpath. 

This should be added to the dependencies list of the module:

<dependency>
      <groupId>javax.annotation</groupId>
      <artifactId>javax.annotation-api</artifactId>
    </dependency>",Major,Tibor Zimanyi,,2019-02-28T08:24:57.000-0500,drools-constraint-parser module cannot be built with JDK 11,Resolved,bug,Bug
2019-03-01T02:30:24.000-0500,DROOLS-3717,Done,"When running SmokeParserTest on IBM JDK, some combinations fail with the following stacktrace [1].

[1] https://gist.github.com/baldimir/db3c5f150ef32a703a726be2ef8c4701",Major,Tibor Zimanyi,,2019-02-28T09:05:45.000-0500,SmokeParserTest fails on IBM JDK,Resolved,bug,Bug
2019-02-28T06:04:43.000-0500,DROOLS-3670,Done,"Please see the linked [PR|https://github.com/kiegroup/drools/pull/2261/files]. There is created test that evalutes expression {{now() between dateTimeA and dateTimeB}}. The test passes arguments to evaluate the decision as {{false}}, however the decision is returning {{null}}.",Major,Matteo Mortari,,2019-02-18T12:09:55.000-0500,DMN `between` FEEL operator alignments,Resolved,bug,Bug
2019-02-28T05:49:52.000-0500,DROOLS-3682,Explained,"{color:red}+*CONFIGURATION*+{color}
Rules File SIZE *10MB+*
Tomcat max memory is set to *4GB*
AWS - *M5-Large Serve* 

When we try to serialize the KB generated using following code gives us the error 
This code use to wor when we used Drools 6.3.0 version 

Will be really happy to hear from you on possible fix as this blocking us from drools upgrade to 7.17.0 

*{color:red}+CODE+{color}*
KieBase kbTemp = buildKnowledgeBase(files);	
ByteArrayOutputStream bos = new ByteArrayOutputStream();	
DroolsObjectOutputStream out = new DroolsObjectOutputStream(bos);
out.writeObject(kbTemp); -------------------> {color:red}+*Line causing the ERROR*+{color}
out.close();
buildResults.setCompiledKnowledgeBase(bos.toByteArray());

{color:red}*+ERROR+*{color}
21-Feb-2019 00:49:09.251 SEVERE [http-apr-9090-exec-7] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [org.glassfish.jersey.server.ContainerException: java.lang.StackOverflowError] with root cause
java.lang.StackOverflowError
               at java.lang.Exception.<init>(Unknown Source)
               at java.lang.ReflectiveOperationException.<init>(Unknown Source)
               at java.lang.reflect.InvocationTargetException.<init>(Unknown Source)
               at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)
               at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
               at java.lang.reflect.Method.invoke(Unknown Source)
               at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.common.BaseNode.writeExternal(BaseNode.java:90)
               at org.drools.core.reteoo.AbstractTerminalNode.writeExternal(AbstractTerminalNode.java:75)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:161)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)

21-Feb-2019 00:54:18.330 SEVERE [http-apr-9090-exec-8] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [Momentum] in context with path [/MomentEngine] threw exception [org.glassfish.jersey.server.ContainerException: java.lang.StackOverflowError] with root cause
java.lang.StackOverflowError
               at java.io.ObjectOutputStream$BlockDataOutputStream.write(Unknown Source)
               at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at java.util.HashMap.internalWriteEntries(Unknown Source)
               at java.util.HashMap.writeObject(Unknown Source)
               at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)
               at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
               at java.lang.reflect.Method.invoke(Unknown Source)
               at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.common.BaseNode.writeExternal(BaseNode.java:90)
               at org.drools.core.reteoo.AbstractTerminalNode.writeExternal(AbstractTerminalNode.java:75)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:161)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:166)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)

21-Feb-2019 01:12:21.908 SEVERE [http-apr-9090-exec-1] org.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [Momentum] in context with path [/MomentEngine] threw exception [org.glassfish.jersey.server.ContainerException: java.lang.StackOverflowError] with root cause
java.lang.StackOverflowError
               at java.lang.Exception.<init>(Unknown Source)
               at java.lang.ReflectiveOperationException.<init>(Unknown Source)
               at java.lang.reflect.InvocationTargetException.<init>(Unknown Source)
               at sun.reflect.GeneratedMethodAccessor38.invoke(Unknown Source)
               at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
               at java.lang.reflect.Method.invoke(Unknown Source)
               at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
               at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.common.BaseNode.writeExternal(BaseNode.java:90)
               at org.drools.core.reteoo.AbstractTerminalNode.writeExternal(AbstractTerminalNode.java:75)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:161)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
               at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
               at java.io.ObjectOutputStream.writeObject0(Unknown Source)
               at java.io.ObjectOutputStream.writeObject(Unknown Source)
               at org.drools.core.reteoo.RuleTerminalNode.writeExternal(RuleTerminalNode.java:165)
               at java.io.ObjectOutputStream.writeExternalData(Unknown Source)
",Blocker,Mario Fusco,,2019-02-21T08:16:00.000-0500,DroolsObjectOutputStream Stack-overflow error ,Resolved,bug,Bug
2019-02-22T11:14:05.000-0500,DROOLS-3678,Done,"The rule below expects that  ""B#"" is set to value of the fact. However,   ""B;#""(i.e. ';' added before '#"") is set incorrectly

{noformat}
dialect ""mvel""
 
rule ""testRule""
    when
        $fact : Fact();
    then
        $fact.name = ""A#"";
        $fact.value = ""B#"";
        System.out.println( $fact );
end
{noformat}

Here is output.

{noformat}
Fact [name=A#, value=B;#]
{noformat}

'#' within the value at 2nd appearance is  treated as a start of comment.",Major,Mario Fusco,,2019-02-21T02:00:09.000-0500,MVELConcequenceBuilder treats '#' within String incorrectly as a comment  at 2nd appearance,Resolved,bug,Bug
2019-02-19T10:39:37.000-0500,DROOLS-3671,Done,testEventWithShortExpiration fails randomly in Jenkins environment. It have to be refactored so this doesn't happen. ,Major,Tibor Zimanyi,,2019-02-19T06:25:04.000-0500,Test testEventWithShortExpiration from CepJavaTypeTest and CepEspTest fails randomly,Resolved,bug,Bug
2019-02-21T08:51:55.000-0500,DROOLS-3661,Done,"Having a following test case [1], executable model fails with a following stacktrace [2]. PR with a reproducer can be found here [3].

[1] https://gist.github.com/baldimir/e5a6af0221f2f6784802be7529b5e4f7
[2] https://gist.github.com/baldimir/8a57c0dbd1dc5f0482c44339f8eba354
[3] https://github.com/kiegroup/drools/pull/2259",Major,Luca Molteni,,2019-02-18T07:17:08.000-0500,Executable model cannot parse enum in a constraint with from,Resolved,bug,Bug
2019-02-19T08:00:30.000-0500,DROOLS-2114,Won't Do,"User can upload new version of sxls score card, however the toolbar menu with version is not refreshed. User has to reopen the editor to see correct (up to date) list of versions.",Optional,Jozef Marko,,2017-11-08T05:41:09.000-0500,[SXLS Score Card] Version is not refreshed after upload,Closed,bug,Bug
2019-02-18T06:15:18.000-0500,DROOLS-3646,Done,"When users update a DMN file, don't save it, and try to update another DMN file, an error appears. See the following scenarios:

*1*
 !1.gif|thumbnail! 

*2*
 !2.gif|thumbnail! 

h2. Manual PR Test
Check updating two dmn files
- Switch the file via project explorer (/)
- Switch the file clicking asset name in the toolbar (/)",Major,Daniel José dos Santos,,2019-02-12T16:25:43.000-0500,[DMN Designer] Updating two files in the editor raises an error,Resolved,bug,Bug
2019-02-15T14:51:54.000-0500,DROOLS-3656,Done,"There are cases, when *Select logic type* dialog misses the entries. Shown in the attached screenshot. There are different (unfortunately not straightforward) steps to reproduce.

The first steps to reproduce were reported my [~manstis] [here|https://github.com/kiegroup/kie-wb-common/pull/2471#issuecomment-463601501] and fixed by [PR|https://github.com/kiegroup/kie-wb-common/pull/2481]. However during verification of the same PR, I revealed second steps to reproduce, please see the attached video  [^select-logic-type-issue.webm] . ",Major,Michael Anstis,,2019-02-15T02:21:13.000-0500,[DMN Designer] Select logic type missing entries,Resolved,bug,Bug
2019-02-14T15:01:49.000-0500,DROOLS-3643,Done,"Currently, when users open the Constraints dialog and press ""Ctrl + S"", the value of the Constraint component is not persisted.",Major,Guilherme Gomes,,2019-02-12T16:20:45.000-0500,[DMN Designer] Data Types - Constraints - Disable Data Types shortcuts when users open the Constraint dialog,Resolved,bug,Bug
2019-02-14T13:20:40.000-0500,DROOLS-3655,Done,"Currently the kebab menu is not being rendered like this (in the {{kie-wb-distributions}} and {{drools-wb}}):
 !Screen Shot 2019-02-14 at 11.43.46.png|thumbnail! 

And it should be rendered like this:
 !Screen Shot 2019-02-14 at 12.12.19.png|thumbnail! 
(with in the arrow on the top and the visible tooltips)",Major,Guilherme Gomes,,2019-02-14T09:10:32.000-0500,[DMN Designer] Data Types - List - Kebab menu is not being correctly rendered in other webapps,Resolved,bug,Bug
2019-02-15T06:39:08.000-0500,DROOLS-3653,Done,"Under the condition:
- LHS has a constraint which calls a function
- The function's argument contains ""==""
- The constraint itself uses ""=="" for comparison

So the rules look like this:

{noformat}
package com.sample
import org.drools.compiler.Person;
function int myFunction(String expression, int value) {
  if (expression.equals(""param == 10"") && value == 10) {
    return 1;
  }
  return 0;
}
rule R1
    when
        $p: Person(myFunction(""param == 10"", age) == 1)
    then
end

rule R2
    when
        $p: Person(myFunction(""param == 20"", age) == 1)
    then
end
{noformat}

In this case, AlphaNodes are shared so both rules match against a fact which should match only R1 (Person(age = 10)).

Dump by ReteDumper
{noformat}
[EntryPointNode(1) EntryPoint::DEFAULT ] on Partition(MAIN)
    [ObjectTypeNode(2)::EntryPoint::DEFAULT objectType=[ClassObjectType class=org.drools.core.reteoo.InitialFactImpl] expiration=-1ms ] on Partition(MAIN)
    [ObjectTypeNode(3)::EntryPoint::DEFAULT objectType=[ClassObjectType class=org.drools.compiler.Person] expiration=-1ms ] on Partition(MAIN)
        [AlphaNode(4) constraint=myFunction(""param == 10"", age) == 1] on Partition(1) d 0 i 0
            [LeftInputAdapterNode(5)] on Partition(1) Ld 0 Li 0
                [RuleTerminalNode(6): rule=R1] on Partition(1) d 0 i 0
                [RuleTerminalNode(7): rule=R2] on Partition(1) d 0 i 0
{noformat}

It seems to relate to MvelConstraint.equals() logic. (It doesn't take account of the text between ""=="" and ""=="")

https://github.com/kiegroup/drools/blob/master/drools-core/src/main/java/org/drools/core/rule/constraint/MvelConstraint.java#L615-L616
",Major,Mario Fusco,,2019-02-14T02:02:57.000-0500,Unexpected node sharing by function with equals,Resolved,bug,Bug
2019-02-14T14:09:44.000-0500,DROOLS-3633,Done,"In the {{DMN Editor > Data Types tab > Range component}}, checkboxes for include start and end value must be enabled by default:
 !DROOLS-3633.png|thumbnail! ",Major,Daniel José dos Santos,,2019-02-11T13:44:00.000-0500,[DMN Designer] Data Types - Constraints - Range - Checkboxes for include start and end value must be enabled by default,Resolved,bug,Bug
2019-02-15T04:12:59.000-0500,DROOLS-3221,Done,"See the attached picture. The Edit Parameters popup size is static and long parameter data type name causes overlay of widgets.

h2. Manual Acceptance test
Test long parameter names
- Edge
- Chrome
- Firefox",Major,Michael Anstis,,2018-11-01T03:31:03.000-0400,[DMN Designer] Edit Parameters static size,Resolved,bug,Bug
2019-02-14T10:05:49.000-0500,DROOLS-3589,Done,Sometimes the tooltip with the shortcut shows up and never disappears.,Major,Guilherme Gomes,,2019-01-31T11:52:39.000-0500,[DMN Designer] Data Types - Shortcut tooltip remains opened in some scenarios,Resolved,bug,Bug
2019-02-14T10:05:43.000-0500,DROOLS-3590,Done,"After a Data Type creation, highlight the created item to enable the shortcut feature for it.",Major,Guilherme Gomes,,2019-01-31T11:58:24.000-0500,"[DMN Designer] Data Types - When users create a Data Type, they must be able to perform shortcut operations in the last created DT",Resolved,bug,Bug
2019-02-14T09:05:57.000-0500,DROOLS-3642,Done,"When user creates the first scenario in the project, there is a BC dependency resolution routine that takes 5 to 10 seconds and in the meanwhile the editor seems broken (empty).

Add an indicator during the whole loading process to warn the user about the additional time to wait",Critical,Gabriele Cardosi,,2019-02-12T09:40:16.000-0500,Add indicator during project dependency resolution after first scenario creation,Resolved,bug,Bug
2019-02-14T07:56:06.000-0500,DROOLS-3624,Done,"If you click multiple times on ""Add item"" button in the collection popup, it should open only one new item form",Critical,Anna Baker,,2019-02-08T08:50:35.000-0500,In a scenario it should be possible to create & edit only one item at a time in a collection,Resolved,bug,Bug
2019-02-14T01:45:25.000-0500,DROOLS-3632,Done,"If user tries to set last (result) row of a *context* as a *decision table* [1] there appears an error [2].

[1]
 !Screenshot from 2019-02-11 17-57-20.png|thumbnail! 

[2]
 !Screenshot from 2019-02-11 17-57-29.png|thumbnail! ",Critical,Michael Anstis,,2019-02-11T12:02:41.000-0500,[DMN Designer] Context result row can not be a decision table,Resolved,bug,Bug
2019-02-13T06:10:13.000-0500,DROOLS-3535,Done,"We are using Drools compiler to compile DRL and create KieSession. Internally, when we try to compile large number of Spreadsheet (e.g. say 500), each containing about 30 rules, we get Out of memory error as shown in logs below:

java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached

	at java.base/java.lang.Thread.start0(Native Method)
	at java.base/java.lang.Thread.start(Thread.java:803)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRulesLevel(KnowledgeBuilderImpl.java:1155)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1135)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileKnowledgePackages(KnowledgeBuilderImpl.java:973)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildRules(KnowledgeBuilderImpl.java:2554)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackages(KnowledgeBuilderImpl.java:2489)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:113)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:103)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:251)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:74)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:267)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:235)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:184)
	at org.kie.internal.utils.KieHelper.verify(KieHelper.java:94)
	at abc.xyz.KnowledgeBaseCreator.createKnowledgeBaseFromDrl(KnowledgeBaseCreator.java:319)

This issue can be traced to KnowledgeBuilderImpl.java as shown below:

 Map<String, RuleBuildContext> ruleCxts = new ConcurrentHashMap<>();
            ForkJoinPool pool = new ForkJoinPool(); // avoid common pool
            try {
                pool.submit(() -> 
                rules.stream().parallel()
                        .filter(ruleDescr -> filterAccepts(ResourceChange.Type.RULE, ruleDescr.getNamespace(), ruleDescr.getName()))
                        .forEach(ruleDescr -> {
                            initRuleDescr(packageDescr, pkgRegistry, ruleDescr);
                            RuleBuildContext context = buildRuleBuilderContext(pkgRegistry, ruleDescr);
                            ruleCxts.put(ruleDescr.getName(), context);
                            List<? extends KnowledgeBuilderResult> results = addRule(context);
                            if (!results.isEmpty()) {
                            synchronized (this.results) {
                                    this.results.addAll(results);
                                }
                            }
                        })
                ).get();
            } catch (InterruptedException | ExecutionException e) { 
                throw new RuntimeException(""Rules compilation failed or interrupted"", e);
            }
            for (RuleDescr ruleDescr : rules) {
                RuleBuildContext context = ruleCxts.get(ruleDescr.getName());
                if (context != null) {
                    pkgRegistry.getPackage().addRule(context.getRule());
                }
            }

Here ForkJoinPool is created without specifying any parallelism limit as well as without shutting it down. Moreover, since its avoiding common pool, anyone who is using it in a loop will face the issue as discussed above.",Blocker,Mario Fusco,,2019-01-18T16:32:13.000-0500,Out of Memory Error when creating KieSession,Resolved,bug,Bug
2019-02-13T05:06:10.000-0500,DROOLS-3630,Done,Unexpected error when user tries to open a nested complex object in the right panel in a Rule scenario,Blocker,Daniele Zonca,,2019-02-11T10:02:44.000-0500,Right panel not working with nested fields in Rule scenario,Resolved,bug,Bug
2019-02-13T08:06:07.000-0500,DROOLS-3651,Cannot Reproduce,"The dmn designer has a feature of autogeneration *input clauses* for a *decision table*, if this one is connected with *input nodes*, however this feature doesn't work if a *decision node* is placed inside a *decision service* node.",Minor,Michael Anstis,,2019-02-13T06:22:28.000-0500,[DMN Designer] Table input clause generation in a decision service,Closed,bug,Bug
2019-02-13T09:34:49.000-0500,DROOLS-3477,Done,"Similar issue was reported and fixed in DROOLS-2854, there is another pattern which does not work.
When MVEL evaluates 

   m.setStatus( 1 + 2 * 3 + 4 * m.getStatus() );

the following exception happens.

{noformat}
Exception executing consequence for rule ""Hello World"" in com.sample: [Error: no such method or function: m]
[Near : {... m.setStatus( 1 + 2 * 3 + 4 * m.getStatus() ); ....}]
{noformat}
",Major,Mario Fusco,,2019-01-07T04:50:09.000-0500,"MVEL: expression (1 + 2 * 3 + 4 * $v )  causes ""no such method or function "" for bind variable ",Resolved,bug,Bug
2019-02-12T08:01:23.000-0500,DROOLS-3582,Duplicate Issue,Sometimes it happens tooltip of data types operation remains shown. See steps to reproduce how to achieve this.,Minor,Guilherme Gomes,,2019-01-30T05:33:50.000-0500,[DMN Designer] Data Type operation tooltips remain shown,Closed,bug,Bug
2019-02-12T04:08:57.000-0500,DROOLS-3574,Done,"compilation fails with the following DRL.

{noformat}
package com.sample;
//generated from Decision Table
import com.sample.Message;
// rule values at C11, header at C6
rule ""HelloWorldXLS_11""
	when
		m:Message(status == Message.HELLO)
	then
		System.out.println(m.getMsg());
		m.setMsg(""Goodbye cruel world"");update(m);
		m.setStatus(Message.GOODBYE);update(m);
end

// rule values at C12, header at C6
rule ""HelloWorldXLS_12""
	when
		m:Message(status == Message.GOODBYE)
	then
		System.out.println(m.getMsg());
end
{noformat}

Here is an ERROR.

[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile-1) on project HelloWorld: Compilation failure
[ERROR] /tmp/HelloWorld/target/generated-sources/drools-model-compiler/main/java/com/sample/Rules47274848713b466c9cc49fe299a57c35RuleMethods0.java:[76,40] variable mask_m is already defined in method rule_HelloWorldXLS__11()

and problematic source which is generated.

{noformat}
    public static org.drools.model.Rule rule_HelloWorldXLS__11() {
        final org.drools.model.Variable<com.sample.Message> var_m = D.declarationOf(com.sample.Message.class,
                                                                                    ""m"");
        final org.drools.model.BitMask mask_m = org.drools.model.BitMask.getPatternMask(com.sample.Message.class,
                                                                                        ""msg"");
        final org.drools.model.BitMask mask_m = org.drools.model.BitMask.getPatternMask(com.sample.Message.class,
                                                                                        ""msg"",
                                                                                        ""status"");
        org.drools.model.Rule rule = D.rule(""com.sample"",
                                            ""HelloWorldXLS_11"").build(D.pattern(var_m).expr(""$expr$1$"",
                                                                                            (_this) -> _this.getStatus() == Message.HELLO,
                                                                                            D.reactOn(""status"")),
                                                                      D.on(var_m).execute((drools, m) -> {
            System.out.println(m.getMsg());
            m.setMsg(""Goodbye cruel world"");
            drools.update(m,
                          mask_m);
            m.setStatus(Message.GOODBYE);
            drools.update(m,
                          mask_m);
        }));
        return rule;
    }
{noformat}

If first update() (which is just after m.setMsg()) is removed, compilation works.",Minor,Luca Molteni,,2019-01-30T02:27:53.000-0500,executable-model: compilation fails if there are multiple update() for the same object in RHS.,Closed,bug,Bug
2019-02-11T11:27:44.000-0500,DROOLS-3627,Done,None,Major,Matteo Mortari,,2019-02-11T07:14:37.000-0500,DMN compare FEEL time with tz,Resolved,bug,Bug
2019-02-09T16:54:57.000-0500,DROOLS-3618,Done,Header cells in expression editors don't react on the enter key.,Major,Michael Anstis,,2019-02-08T06:19:39.000-0500,[DMN Designer] Headers don't react on Enter key,Resolved,bug,Bug
2019-02-08T11:16:53.000-0500,DROOLS-3612,Done,"Spotted during DROOLS-2262 review, however probably it is not related.

If user save and reopen expression that is java function, the designer renders it as context expression after reopening. See the attached screenshots, there is unexpected *result* row after reopening.

h2. Manual PR check
- Save and reopen BKM, with java function (/)
- Save and reopen BKM, with PMML function (/)
- Save and reopen BKM, with feel function (/)
- Save and reopen Decision, with java function (/)
- Save and reopen Decision, with PMML function (/)
- Save and reopen Decision, with feel function (/)
- Save and reopen Decision, with context (/)",Minor,Michael Anstis,,2019-02-07T03:41:45.000-0500,[DMN Designer] Java Function is context after reopening,Resolved,bug,Bug
2019-02-08T03:53:27.000-0500,DROOLS-3613,Done,Fix serialization format from Map to string,Major,Gabriele Cardosi,,2019-02-07T08:37:10.000-0500,Error testing a rule scenario with a Map,Resolved,bug,Bug
2019-02-08T03:50:17.000-0500,DROOLS-2262,Done,"DND Grid Column don't preserve the width.

h2. Manual acceptance test
For all expressions:
- save and reopen
- undo redo
- import to trisotech
- build project

h3. Literal Expression (/)
Resize twice

h3. Relation (/)
Add two more columns, resize all, remove one, undo redo, check row now number column

h3. Function (/)
Resize, change language

h3. Context Entry (/)
Resize Key Column, Resize Value column, Change value column expression after was resized

h3. Decision table (/)
Resize input clause, resize output clause, delete column, reorder columns

h3. Invocation (/)
Resize Key Column, Resize Value column, Change value column expression after was resized",Major,Michael Anstis,,2018-01-23T05:03:37.000-0500,[DMN Designer] DRD Grid Column width is not preserved,Resolved,bug,Bug
2019-02-08T05:39:29.000-0500,DROOLS-3523,Done,"When we configure 'packages' attribute in kbase element in kmodule.xml, normal build works but executable-model build results in empty kbase.

{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<kmodule xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
  xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
  <kbase name=""mykbase"" packages=""rules"" default=""true"">
    <ksession name=""myksession"" default=""true"" />
  </kbase>
</kmodule>
{code}

 executable-model seems to expect that the kbase's packages value must match the ""package"" declaration in DRL.

Please confirm the behaviour with the attached execution-model-test-kbase-package.zip.

* Normal build
** mvn clean install -DskipTests
** mvn clean test
{noformat}
...
kiePackages = [[Package name=com.sample]]
Hello, john
...
{noformat}

* executable-model  build
** mvn clean install -DgenerateModel=YES -DskipTests
** mvn clean test
{noformat}
...
kiePackages = []
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 3.341 s <<< FAILURE! - in com.example.DroolsTest
...
{noformat}",Major,Mario Fusco,,2019-01-15T04:37:32.000-0500,kbase 'packages' in kmodule.xml works differently with executable-model,Resolved,bug,Bug
2019-02-08T08:44:39.000-0500,DROOLS-3616,Done,"If user tries to change name and data type of root Literal expression, the **Name && Data Type** popup is missing. Other expression types works fine.

h2. Manual PR Check (/)
Other expression are not affected
- LE
- Relation
- Context
- DT
- Invocation
- Function",Major,Michael Anstis,,2019-02-08T04:04:53.000-0500,[DMN Designer] Literal expression name and data type popup missing,Resolved,bug,Bug
2019-02-07T03:22:08.000-0500,DROOLS-3598,Done,"When generating a kjar for the executable model with the maven-plugin it generates some spurious and not relevant error messages like these

{code}
[ERROR] Cannot load artifact org.drools:drools-core:${kie.version}. You need kie-ci on the classpath to perform this operation
[ERROR] Cannot load artifact org.drools:drools-model-compiler:${kie.version}. You need kie-ci on the classpath to perform this operation
[ERROR] Cannot load artifact org.drools:drools-canonical-model:${kie.version}. You need kie-ci on the classpath to perform this operation
[ERROR] Cannot load artifact org.jbpm:jbpm-bpmn2:${kie.version}. You need kie-ci on the classpath to perform this operation
[ERROR] Cannot load artifact org.drools:drools-decisiontables:${kie.version}. You need kie-ci on the classpath to perform this operation
[ERROR] Cannot load artifact org.kie:kie-api:${kie.version}. You need kie-ci on the classpath to perform this operation
{code}",Minor,Luca Molteni,,2019-02-04T06:50:53.000-0500,Misleading error messagaes generated by maven plugin when creating an executable model kjar,Resolved,bug,Bug
2019-02-06T08:46:38.000-0500,DROOLS-3607,Done,None,Major,Mario Fusco,,2019-02-06T08:27:34.000-0500,Beans annotated with @propertyChangeSupport don't take count of property reactvity when propagating a modification,Resolved,bug,Bug
2019-02-06T06:49:20.000-0500,DROOLS-3606,Done,"The rules below expect that only ""R1"" is fired when Person (""John"", 20) is inserted. However, ""R2"" is also fired though age is set to 5 in modify block.

{noformat}
rule ""R1""
    salience 1
    when
        $p : Person()
        Person( age > 10 ) from $p 
    then
        modify ($p) {
          setAge(5);
        }
        System.out.println( ""R1, "" + $p);
end

rule ""R2""
    salience 0
    when
        $p : Person()
        Person( age > 10 ) from $p 
    then
        System.out.println( ""R2, "" + $p);
end
{noformat}
",Major,Mario Fusco,,2019-02-05T20:43:51.000-0500,From with modify fires unexpected rule,Resolved,bug,Bug
2019-02-05T10:28:37.000-0500,DROOLS-3554,Done,"Consider a rule with accumulate pattern in the LHS which logically inserts an object in the RHS. Build the KieModule from the KieFileSystem including this rule, create the KieContainer and the KieSession. Insert the facts. Everything works fine. 
Create a new KieModule excluding this rule from the KieFileSystem, update the KieContainer. Expect the logically inserted fact to be retracted, as the rule which trigged its creation is no longer present. Turns out that the fact is still present in the working memory",Major,Mario Fusco,,2019-01-25T06:07:18.000-0500,KieContainer#updateToVersion removing rules with accumulate,Resolved,bug,Bug
2019-02-04T12:11:03.000-0500,DROOLS-3558,Done,"When compiling a below rule with executable-model:

{noformat}
rule R1
  when
    $p : Person()
    $a : Address(number == $p.items[1])
  then
end
{noformat}

it fails with the following error:

{noformat}
[ERROR] Tests run: 165, Failures: 0, Errors: 2, Skipped: 3, Time elapsed: 20.794 s <<< FAILURE! - in org.drools.modelcompiler.CompilerTest
[ERROR] testMapWithBinding[FLOW_DSL](org.drools.modelcompiler.CompilerTest)  Time elapsed: 0.02 s  <<< ERROR!
java.util.NoSuchElementException: No value present
	at java.util.Optional.get(Optional.java:135)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionFromMethodCallOrField(ExpressionTyper.java:397)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpressionRec(ExpressionTyper.java:211)
	at org.drools.modelcompiler.builder.generator.expressiontyper.ExpressionTyper.toTypedExpression(ExpressionTyper.java:108)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.parseBinaryExpr(ConstraintParser.java:295)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.getDrlxParseResult(ConstraintParser.java:111)
	at org.drools.modelcompiler.builder.generator.drlxparse.ConstraintParser.drlxParse(ConstraintParser.java:78)
	at org.drools.modelcompiler.builder.generator.visitor.pattern.PatternDSL.findAllConstraint(PatternDSL.java:124)
	at org.drools.modelcompiler.builder.generator.visitor.pattern.PatternDSL.buildPattern(PatternDSL.java:191)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:128)
	at org.drools.compiler.lang.descr.PatternDescr.accept(PatternDescr.java:267)
	at org.drools.modelcompiler.builder.generator.visitor.AndVisitor.visit(AndVisitor.java:29)
	at org.drools.modelcompiler.builder.generator.visitor.ModelGeneratorVisitor.visit(ModelGeneratorVisitor.java:69)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.processRule(ModelGenerator.java:174)
	at org.drools.modelcompiler.builder.generator.ModelGenerator.generateModel(ModelGenerator.java:154)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.compileKnowledgePackages(ModelBuilderImpl.java:144)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildRules(ModelBuilderImpl.java:94)
	at org.drools.modelcompiler.builder.ModelBuilderImpl.buildPackages(ModelBuilderImpl.java:63)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:108)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:100)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:257)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:74)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:267)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:235)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:204)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:192)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:142)
	at org.drools.modelcompiler.BaseModelTest.createKieBuilder(BaseModelTest.java:125)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:114)
	at org.drools.modelcompiler.BaseModelTest.getKieContainer(BaseModelTest.java:107)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:103)
	at org.drools.modelcompiler.BaseModelTest.getKieSession(BaseModelTest.java:99)
	at org.drools.modelcompiler.CompilerTest.testMapWithBinding(CompilerTest.java:1457)
	...
{noformat}",Major,Luca Molteni,,2019-01-28T01:10:08.000-0500,"""NoSuchElementException: No value present"" with executable-model, Map and binding",Resolved,bug,Bug
2019-02-05T04:28:21.000-0500,DROOLS-3568,Done,None,Major,Gabriele Cardosi,,2019-01-29T03:56:03.000-0500,Refresh new scenario popup status for each new asset creation,Resolved,bug,Bug
2019-02-04T14:42:13.000-0500,DROOLS-3548,Done,"When KieServicesClient  fails to connect to KieServer,  LoadBalancer  is invoked to check availability of server like the following.
~~~
[2019/01/24 18:19:38.411] [pool-1-thread-1] [DEBUG] (LoadBalancer.java:149)                  - Starting to scan if any of the failed endpoints is back online 
org.kie.server.common.rest.NoEndpointFoundException: No available endpoints found
	at org.kie.server.client.balancer.impl.AbstractBalancerStrategy.checkEmpty(AbstractBalancerStrategy.java:27)
	at org.kie.server.client.balancer.impl.RoundRobinBalancerStrategy.next(RoundRobinBalancerStrategy.java:37)
	at org.kie.server.client.balancer.LoadBalancer.getUrl(LoadBalancer.java:52)
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.invoke(AbstractKieServicesClientImpl.java:809)
	at org.kie.server.client.impl.AbstractKieServicesClientImpl.makeHttpGetRequestAndCreateServiceResponse(AbstractKieServicesClientImpl.java:177)
	at org.kie.server.client.impl.KieServicesClientImpl.getServerInfo(KieServicesClientImpl.java:159)
	at org.kie.server.client.impl.KieServicesClientImpl.getCapabilitiesFromServer(KieServicesClientImpl.java:132)
	at org.kie.server.client.impl.KieServicesClientImpl.init(KieServicesClientImpl.java:87)
	at org.kie.server.client.impl.KieServicesClientImpl.<init>(KieServicesClientImpl.java:74)
	at org.kie.server.client.KieServicesFactory.newKieServicesClient(KieServicesFactory.java:101)
	at com.sample.rules.test.KieServerRestClientTest.connectionFailureTest(KieServerRestClientTest.java:55)
~~~

 But after that, the thread used by LoadBalancer remains until termination of client application as  LoadBalancer.close()  is not called.",Major,Maciej Swiderski,,2019-01-24T04:22:42.000-0500,Thread used by LoadBalancer remains when connection to kie-server fails during instantinating of KieServicesClient,Resolved,bug,Bug
2019-02-04T08:10:16.000-0500,DROOLS-3546,Done,Ref FEEL grammar rule 61,Major,Matteo Mortari,,2019-01-23T10:24:53.000-0500,DMN fix FEEL context entry when key is a string literal,Resolved,bug,Bug
2019-02-04T08:07:09.000-0500,DROOLS-3551,Done,"Semantics of properties in DMNv1.1 was defined in tables 
Table 52: General semantics of properties
Table 53: Specific semantics of date, time and duration properties

DMNv1.2 further refines semantics of properties in tables:
Table 59: General semantics of properties
Table 60: List of properties per type
Table 61: Specific semantics of date, time and duration properties

Calling `days` on YM duration and `timezone` output needs alignment.",Major,Matteo Mortari,,2019-01-24T08:39:04.000-0500,DMN v1.2 Table 61 FEEL properties alignment,Resolved,bug,Bug
2019-02-04T06:19:45.000-0500,DROOLS-3556,Done,"Behavior of  'update' is different from 'modify' when dialect ""mvel"" is used with property reactive.

In case of reproducer, when using update() after fact modification, the rule is continuously executed even though the condition no longer match.(i.e. re-evaluation does not work as expected)",Major,Mario Fusco,,2019-01-27T23:57:32.000-0500,"'update' works differently than 'modify' when using  dialect ""mvel"" with property reactive",Resolved,bug,Bug
2019-02-04T08:03:47.000-0500,DROOLS-3540,Done,"split() function according to DMNv1.2
get entries() and get value() according to DMNv1.2 and [https://issues.omg.org/browse/DMN12-315]",Major,Matteo Mortari,,2019-01-22T03:58:29.000-0500,DMN align FEEL built-in function parameters name,Resolved,bug,Bug
2019-02-04T03:14:07.000-0500,DROOLS-3595,Rejected,"[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Loading kie.conf from  jar:file:/C:/Users/bacharya/.m2/repository/org/drools/drools-core/7.17.0.Final/drools-core-7.17.0.Final.jar!/META-INF/kie.conf in classloader sun.misc.Launcher$AppClassLoader@18b4aac2
[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.core.io.impl.ResourceFactoryServiceImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.core.marshalling.impl.MarshallerProviderImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.core.concurrent.ExecutorProviderImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Loading kie.conf from  jar:file:/C:/Users/bacharya/.m2/repository/org/drools/drools-compiler/7.17.0.Final/drools-compiler-7.17.0.Final.jar!/META-INF/kie.conf in classloader sun.misc.Launcher$AppClassLoader@18b4aac2
[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.compiler.kie.builder.impl.KieServicesImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.compiler.builder.impl.KnowledgeBuilderFactoryServiceImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Loading kie.conf from  jar:file:/C:/Users/bacharya/.m2/repository/org/drools/drools-decisiontables/7.17.0.Final/drools-decisiontables-7.17.0.Final.jar!/META-INF/kie.conf in classloader sun.misc.Launcher$AppClassLoader@18b4aac2
[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.drools.decisiontable.DecisionTableProviderImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Loading kie.conf from  jar:file:/C:/Users/bacharya/.m2/repository/org/kie/kie-internal/7.17.0.Final/kie-internal-7.17.0.Final.jar!/META-INF/kie.conf in classloader sun.misc.Launcher$AppClassLoader@18b4aac2
[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.kie.internal.services.KieAssemblersImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.kie.internal.services.KieRuntimesImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.kie.internal.services.KieWeaversImpl

[main] INFO org.kie.api.internal.utils.ServiceDiscoveryImpl - Adding Service org.kie.internal.services.KieBeliefsImpl

",Blocker,Mario Fusco,,2019-02-04T02:45:08.000-0500,KIA error in 7.17.0,Resolved,bug,Bug
2019-02-04T08:03:03.000-0500,DROOLS-3538,Done,None,Major,Matteo Mortari,,2019-01-21T05:22:32.000-0500,DMN between FEEL operator for FEEL duration operands during interpreted,Resolved,bug,Bug
2019-02-04T08:02:02.000-0500,DROOLS-3534,Done,sample standard deviation for one sample by definition is undefined,Major,Matteo Mortari,,2019-01-18T10:10:53.000-0500,DMN built-in FEEL sample standard deviation for one sample,Resolved,bug,Bug
2019-02-04T08:01:19.000-0500,DROOLS-3533,Done,None,Major,Matteo Mortari,,2019-01-18T09:05:31.000-0500,DMN fix FEEL heuristic for method dispatch,Resolved,bug,Bug
2019-02-04T08:00:27.000-0500,DROOLS-3532,Done,None,Major,Matteo Mortari,,2019-01-18T05:38:36.000-0500,DMN fix FEEL var args function invocation when no params,Resolved,bug,Bug
2019-02-04T08:06:15.000-0500,DROOLS-3553,Done,None,Major,Matteo Mortari,,2019-01-25T04:56:40.000-0500,"DMN specific cases of Table 48 FEEL equality for time, datetime",Resolved,bug,Bug
2019-01-30T09:03:18.000-0500,DROOLS-3174,Duplicate Issue,"Once the Cell edition is finished (TAB pressed) the keyboard navigation stops working. User have to explicitly click to some cell to re-activate keyboard navigation.

The issue applies also to Scenario and Simulation designer.",Major,Jozef Marko,,2018-10-23T09:10:14.000-0400,"[DMN Designer] After Cell Edition, keyboard navigation stops working",Closed,bug,Bug
2019-01-30T08:43:56.000-0500,DROOLS-3573,Done,"When running test with pseudo clock and fireUntilHalt, it could end up in a livelock, where a while loop never ends [1]. The main problem in [1] is the isCancel() if statement. Current synchronization doesn't block cancelling the item during ongoing runCallBacksAndIncreaseTimer method call with [2]. That causes a livelock, because new item is not read in the loop, therefore it iterates over the same item again and again. This can be tested by running CepEspTest.testEventExpirationInSlidingWindow [3] more times in a row till it fails (it always fails after some time). 

I will create a PR for this. 

[1] https://github.com/kiegroup/drools/blob/04d58e7714844e73f68e6143e235bb55791c9888/drools-core/src/main/java/org/drools/core/time/impl/PseudoClockScheduler.java#L204
[2] https://github.com/kiegroup/drools/blob/04d58e7714844e73f68e6143e235bb55791c9888/drools-core/src/main/java/org/drools/core/time/impl/PseudoClockScheduler.java#L147
[3] https://github.com/kiegroup/drools/blob/2bf3c13de000864e7c45b9fd008af2f542674592/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/CepEspTest.java#L1933",Major,Tibor Zimanyi,,2019-01-29T11:14:12.000-0500,Livelock in PseudoClockScheduler,Resolved,bug,Bug
2019-01-30T11:25:38.000-0500,DROOLS-2948,Done,"When user changes the currently selected data type, this change is not propagated into properties panel. User has to reopen  the properties panel or reselect the element to load changes.

h2. Manual acceptance test
- Steps to reproduce fixed. (/)

- Check removed item definition is not present in output data-type select box.
-- Was selected as output data type (x)
-- Was selected as output data type of other node (/)
-- Was not selected as output data-type (/)
- Check added *top level* item definition *is present* in output data type select box (/)
- Check added *nested level* item definition *is not present* in output data type select box (/)

",Major,Guilherme Gomes,,2018-08-31T08:41:38.000-0400,[DMN Designer] Change of selected data structure,Resolved,bug,Bug
2019-01-29T09:38:27.000-0500,DROOLS-3437,Done,"It should not be possible to edit cells in columns whose type has not been set yet; these cells contain the Define valid type placeholder. Once you edit such a cell (you fill in any value) and then remove the value, the cell placeholder switches to Insert value, which is not correct. These cells should not be editable at all.

This defect is caused by keyboard shortcuts implemented as part of DROOLS-2932.

",Critical,Jozef Marko,,2018-12-13T11:09:19.000-0500,Edit Scenario Simulation data cells constraint,Closed,bug,Bug
2019-01-29T09:37:04.000-0500,DROOLS-3436,Done,"It should not be possible to edit the cells with row numbers. However it is using keyboard shortcuts implemented as part of DROOLS-2932.

",Major,Jozef Marko,,2018-12-13T11:08:09.000-0500,Edit Scenario Simulation row number,Closed,bug,Bug
2019-01-28T06:34:01.000-0500,DROOLS-3560,Done,"[ERROR] Unable to build KieBaseModel:rules
InvalidExpressionErrorResult: Unknown field HELLO on class java.lang.String
InvalidExpressionErrorResult: Unknown field GOODBYE on class java.lang.String

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.207 s
[INFO] Finished at: 2019-01-28T18:10:43+09:00
[INFO] Final Memory: 64M/657M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.kie:kie-maven-plugin:7.14.0.Final-redhat-00002:generateModel (default-generateModel) on project HelloWorld: Execution default-generateModel of goal org.kie:kie-maven-plugin:7.14.0.Final-redhat-00002:generateModel failed: Unable to get KieModule, Errors Existed: Error Messages:
[ERROR] Message [id=1, kieBase=rules, level=ERROR, path=com/sample/Sample.drl, line=-1, column=0
[ERROR]    text=Unknown field HELLO on class java.lang.String]
[ERROR] Message [id=2, kieBase=rules, level=ERROR, path=com/sample/Sample.drl, line=-1, column=0
[ERROR]    text=Unknown field GOODBYE on class java.lang.String]
[ERROR] ---
[ERROR] Warning Messages:
[ERROR] ---
[ERROR] Info Messages:
 ...

Here is problematic DRL.
{code}
package com.sample

import com.sample.Message;

rule ""Hello World""
    when
        m : Message( status == Message.HELLO, myMessage : message )
    then
        System.out.println( myMessage );
        m.setMessage( ""Goodbye cruel world"" );
        m.setStatus( Message.GOODBYE );
        update( m );
end

rule ""GoodBye""
    when
        Message( status == Message.GOODBYE, myMessage : message )
    then
        System.out.println( myMessage );
end
{code}",Major,Mario Fusco,,2019-01-28T06:24:13.000-0500,Compiler error in executable model when there is a clash between a field and a class name,Resolved,bug,Bug
2019-01-25T11:15:56.000-0500,DROOLS-3536,Done,"The ""isEditingMode"" flag is not cleared when clicking outside the grid. Verified on cell with CollectionEditor",Major,Gabriele Cardosi,,2019-01-21T03:30:51.000-0500,Update isEditingMode status on cells with CollectionEditor,Resolved,bug,Bug
2019-01-26T16:29:29.000-0500,DROOLS-3552,Migrated to another ITS,"To reproduce the error, I created a new repository, created a 300 Data Object in it. In each Data Object created 1000 fields of type Integer.
After restarting the server when opening any object, Drools Workbeanch writes an error: *write size larger than buffer can fit*
{noformat}
java.lang.RuntimeException: failed to enqueue message for delivery
    at org.jboss.errai.bus.server.ServerMessageBusImpl.enqueueForDelivery(ServerMessageBusImpl.java:443)
    at org.jboss.errai.bus.server.ServerMessageBusImpl.send(ServerMessageBusImpl.java:391)
    at org.jboss.errai.bus.server.ServerMessageBusImpl.send(ServerMessageBusImpl.java:337)
    at org.jboss.errai.bus.server.service.MessageBusProxy.send(MessageBusProxy.java:87)
    at org.jboss.errai.bus.client.api.base.ConversationMessageWrapper.sendNowWith(ConversationMessageWrapper.java:238)
    at org.jboss.errai.bus.client.api.base.DefaultMessageBuilder$1.sendNowWith(DefaultMessageBuilder.java:84)
    at org.jboss.errai.bus.server.io.ValueReplyRPCEndpointCallback.callback(ValueReplyRPCEndpointCallback.java:22)
    at org.jboss.errai.bus.server.io.RemoteServiceCallback.callback(RemoteServiceCallback.java:54)
    at org.jboss.errai.cdi.server.CDIExtensionPoints$2.callback(CDIExtensionPoints.java:396)
..
{noformat}
The full text of the error is attached in the file.
I know about the description https://developer.jboss.org/thread/220428 but I did not find the parameters under which you can open objects.

I found an error in the TransmissionBuffer.java class, but I don’t know how to fix the problem.",Major,Michael Anstis,,2019-01-24T09:58:18.000-0500,"Error: ""write size larger than buffer can fit"" when opening object in workbench",Closed,bug,Bug
2019-01-23T06:54:12.000-0500,DROOLS-1778,Done,"When running Drools tests on JDK 9, some tests exhibit runtime reflection warnings in the logs. These reflection usages must be fixed. I will provide a list with the current warnings.",Minor,Mario Fusco,,2017-10-26T04:40:37.000-0400,JDK 9: Runtime reflection usage warnings in drools,Resolved,bug,Bug
2019-01-23T06:34:11.000-0500,DROOLS-2084,Done,"{{kie-maven-plugin}} and {{kie-takari-plugin}} currently can not be build with JDK9. The complete error message is:
{code}
[ERROR] Failed to execute goal io.takari.maven.plugins:takari-lifecycle-plugin:1.13.3:mojo-annotation-processor (default-mojo-annotation-processor) on project kie-maven-plugin: 1 error(s) encountered:
[ERROR] /home/psiroky/work/git-repos/kie/droolsjbpm-integration/kie-maven-plugin/src/main/java/org/kie/maven/plugin/BytecodeInjectReactive.java:[0:0] The type java.lang.String cannot be resolved. It is indirectly referenced from required .class files
[ERROR] 
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal io.takari.maven.plugins:takari-lifecycle-plugin:1.13.3:mojo-annotation-processor (default-mojo-annotation-processor) on project kie-maven-plugin: 1 error(s) encountered:
/home/psiroky/work/git-repos/kie/droolsjbpm-integration/kie-maven-plugin/src/main/java/org/kie/maven/plugin/BytecodeInjectReactive.java:[0:0] The type java.lang.String cannot be resolved. It is indirectly referenced from required .class files

    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:564)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)
Caused by: org.apache.maven.plugin.MojoExecutionException: 1 error(s) encountered:
/home/psiroky/work/git-repos/kie/droolsjbpm-integration/kie-maven-plugin/src/main/java/org/kie/maven/plugin/BytecodeInjectReactive.java:[0:0] The type java.lang.String cannot be resolved. It is indirectly referenced from required .class files

    at io.takari.incrementalbuild.maven.internal.MavenBuildContextFinalizer.failBuild (MavenBuildContextFinalizer.java:109)
    at io.takari.incrementalbuild.maven.internal.MavenBuildContextFinalizer.afterMojoExecutionSuccess (MavenBuildContextFinalizer.java:86)
    at org.apache.maven.execution.scope.internal.MojoExecutionScope.afterMojoExecutionSuccess (MojoExecutionScope.java:163)
    at org.apache.maven.plugin.CompoundMojoExecutionListener.afterMojoExecutionSuccess (CompoundMojoExecutionListener.java:52)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:136)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:51)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:309)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:194)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:107)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:955)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:290)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:194)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:564)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)

{code}",Major,Mario Fusco,,2017-10-31T08:29:42.000-0400,JDK9: kie-maven-plugin and kie-takari-plugin fail to build,Resolved,bug,Bug
2019-01-21T10:08:09.000-0500,DROOLS-3527,Done,"When executable-model builds BigDecimal constraint, BigDecimal(double) constructor is used hence fails to compare at runtime.

It generates source code like this:
{code:java}
public class Rules64ef7d59a364454aa08fdda838c67ad1RuleMethods0 {

    /**
     * Rule name: R1
     */
    public static org.drools.model.Rule rule_R1() {
        final org.drools.model.Variable<com.sample.Customer> var_$customer = D.declarationOf(com.sample.Customer.class,
                                                                                             ""$customer"");
        org.drools.model.Rule rule = D.rule(""com.sample"",
                                            ""R1"").build(D.pattern(var_$customer).expr(""$expr$1$"",
                                                                                      (_this) -> org.drools.modelcompiler.util.EvaluationUtil.equals(org.drools.modelcompiler.util.EvaluationUtil.toBigDecimal(_this.getRate()),
                                                                                                                                                     org.drools.modelcompiler.util.EvaluationUtil.toBigDecimal(12.111)),
                                                                                      D.alphaIndexedBy(java.math.BigDecimal.class,
                                                                                                       org.drools.model.Index.ConstraintType.EQUAL,
                                                                                                       0,
                                                                                                       _this -> _this.getRate(),
                                                                                                       new java.math.BigDecimal(""12.111"")),
                                                                                      D.reactOn(""rate"")),
                                                        D.execute(() -> {
            System.out.println(""hello"");
        }));
        return rule;
    }
}
{code}

I think org.drools.modelcompiler.util.EvaluationUtil.toBigDecimal(12.111) is the problem.",Major,Luca Molteni,,2019-01-17T02:24:57.000-0500,executable-model fails to compare BigDecimal,Closed,bug,Bug
2019-01-21T16:46:03.000-0500,DROOLS-3537,Done,"An unexpected error dialog appears when user creates new DMN diagram. 

The unexpected error dialog contain an error:  [^error.log] 

Next the trouble can be spotted by missing data types tab. When user tries to navigate into expression editor, another error dialog appears.",Blocker,Michael Anstis,,2019-01-21T04:07:47.000-0500,[DMN Designer] Unexpected error appears when diagram is created,Resolved,bug,Bug
2019-01-21T10:09:22.000-0500,DROOLS-3505,Done,"With the conditions:
- Build by executable-model (-DgenerateModel=YES)
- java dialect
- Connect expressions with ""comma"" inside a modify block

You get a parse error.

{noformat}
[ERROR] testCommaInModify[PATTERN_DSL](org.drools.modelcompiler.CompilerTest)  Time elapsed: 0.033 s  <<< ERROR!
org.drools.javaparser.ParseProblemException: 
(line 1,col 10) Parse error. Found "","", expected one of  ""%="" ""&="" ""*="" ""++"" ""+="" ""--"" ""-="" ""/="" "";"" ""<<="" ""="" "">>="" "">>>="" ""^="" ""|=""
Problem stacktrace : 
  org.drools.javaparser.GeneratedJavaParser.generateParseException(GeneratedJavaParser.java:11597)
  org.drools.javaparser.GeneratedJavaParser.jj_consume_token(GeneratedJavaParser.java:11456)
  org.drools.javaparser.GeneratedJavaParser.StatementExpression(GeneratedJavaParser.java:4160)
  org.drools.javaparser.GeneratedJavaParser.Statement(GeneratedJavaParser.java:3798)
  org.drools.javaparser.GeneratedJavaParser.BlockStatement(GeneratedJavaParser.java:3977)
  org.drools.javaparser.GeneratedJavaParser.Statements(GeneratedJavaParser.java:1606)
  org.drools.javaparser.GeneratedJavaParser.Block(GeneratedJavaParser.java:3893)
  org.drools.javaparser.GeneratedJavaParser.BlockParseStart(GeneratedJavaParser.java:5193)
  org.drools.javaparser.JavaParser.parse(JavaParser.java:131)
  org.drools.javaparser.JavaParser.simplifiedParse(JavaParser.java:337)
  org.drools.javaparser.JavaParser.parseBlock(JavaParser.java:321)
  org.drools.modelcompiler.builder.generator.Consequence.rewriteConsequenceBlock(Consequence.java:255)
{noformat}
",Major,Luca Molteni,,2019-01-10T06:10:55.000-0500,"Parse error with executable-model, java dialect, modify block and comma",Closed,bug,Bug
2019-01-21T10:10:32.000-0500,DROOLS-3508,Done,"With the conditions:
- Build by executable-model (-DgenerateModel=YES)
- 2 DRL files of the same package
- One DRL declares dialect ""mvel"" at package level
- The other DRL uses mvel in RHS (not declares dialect explicitly)

Rules in the latter DRL is parsed as ""java"" dialect hence results in the error.

{noformat}
[ERROR] testMultiDrlWithSamePackageMvel[FLOW_DSL](org.drools.modelcompiler.MvelDialectTest)  Time elapsed: 1.185 s  <<< FAILURE!
java.lang.AssertionError: 
[Message [id=1, level=ERROR, path=src/main/java/org/pkg/Rules96a73300cc374c58aa6549f44675e57cRuleMethods0.java, line=36, column=15
   text=age has private access in org.drools.modelcompiler.domain.Person], Message [id=2, level=ERROR, path=src/main/java/org/pkg/Rules96a73300cc374c58aa6549f44675e57cRuleMethods0.java, line=0, column=0
   text=Java source of src/main/java/org/pkg/Rules96a73300cc374c58aa6549f44675e57cRuleMethods0.java in error:
...
{noformat}
",Major,Luca Molteni,,2019-01-11T04:04:12.000-0500,"Build error with executable-model, multiple DRLs of the same package, mvel dialect",Resolved,bug,Bug
2019-01-16T09:47:26.000-0500,DROOLS-3471,Done,It should be impossible to edit the header of a column in a DMN scenario but it is possible to edit them if you remove a column and you add it back again,Major,Gabriele Cardosi,,2019-01-04T06:02:22.000-0500,Header of DMN Scenarios should be readonly,Resolved,bug,Bug
2019-01-14T06:26:58.000-0500,DROOLS-3427,Done,"When user creates an connection between nodes, an exception is thrown if the user moves the cursor out of the target node after the click and before the connection was created.",Major,Daniel José dos Santos,,2018-12-12T08:44:43.000-0500,[DMN Designer] Connections between nodes throws an error if user moves the mouse too fast,Resolved,bug,Bug
2019-01-14T09:51:34.000-0500,DROOLS-3283,Duplicate Issue,"Imagine data model Person with attribute age.

If you create decision table and add two columns:

 - both are defined against ""age"" attribute
 - none of them have operator defined

then you add one row, and you fill in the operator and the value directly inside the row. 
For example:
>= 20
<= 30

The generated DRL looks like this:


{code:java}
package org;

//from row number: 1
rule ""Row 1 AnotherTest""
	dialect ""mvel""
	when
		p : Person( age >= 20 , age <= 30 )
	then
		p.setAgeGroup( ""whatever"" );
end

{code}


The V&V will report this as conflicting row:

!6iOx.png|thumbnail!

",Critical,Toni Rikkola,,2018-11-08T09:16:04.000-0500,Incorrect V&V results when operator is filled in the row (as opposed to column definition),Closed,bug,Bug
2019-01-14T08:34:03.000-0500,DROOLS-3488,Won't Do,"DMNDI coordinates of Decision Service's OutputDecision and EncapsulatedDecision is wrong marshalled.
To reproduce the issue, use Partner DMN Editor to cross-check DMNDI of DecisionService is respected and DMN Diagrams can be interchanged.",Major,Matteo Mortari,,2019-01-08T08:20:46.000-0500,DMN DecisionService DMNDI wrong positioning for Encapsulated/Output Decision,Resolved,bug,Bug
2019-01-14T06:26:47.000-0500,DROOLS-3430,Done,User can rename boxed expression elements by single click into given grid cell. Then the *Name and DataType dialog* is shown to the user where he can rename the given element. The problem on *Edge* is confirming this renaming. On other browsers renaming is confirmed with clicking somewhere into canvas. On the *Edge* clicking to canvas close the dialog and renaming is discarded.,Major,Daniel José dos Santos,,2018-12-13T01:52:20.000-0500,[DMN Designer] [Edge] Update Name via Name And DataType dialog,Resolved,bug,Bug
2019-01-14T07:41:57.000-0500,DROOLS-1980,Rejected,"In the test scenario editor, when I save a test scenario where the ""EXPECT"" clause points to a bound variable, the bound variable does not load correctly when the scenario is re-opened from a save.",Major,Toni Rikkola,,2017-06-07T14:05:15.000-0400,"""EXPECT"" Variable binding list is empty after saving/reloading test scenario",Closed,bug,Bug
2019-01-14T07:43:53.000-0500,DROOLS-1719,Rejected,"We detect two bugs:
1. When executing a test scenario in a KIE workbench in Spanish, a field defined as Date seems not to be parsed correctly and always enters the rule file as null.
2. When switching to English in the KIE workbench the test scenario we defined in Spanish does not load. When we change back to Spanish the page with the test scenario loads again.

Why is this a bug?
1. When we create the same test scenario in a KIE workbench in English, the field defined as Date has a value in the rule file and this value is the one that is provided in the test scenario .
2. When we switch the KIE workbench to Spanish, the test scenario defined in English does not load.",Minor,Toni Rikkola,,2017-09-01T06:36:00.000-0400,Problems when defining a test scenario in Spanish with a Date field,Closed,bug,Bug
2019-01-11T06:38:13.000-0500,DROOLS-2320,Out of Date,None,Major,Toni Rikkola,,2018-02-14T05:23:15.000-0500,[Project Oriented]  'Delete' does not work properly on a DRL file (the DRL file is deleted but the DRL editor is not closed after deletion),Closed,bug,Bug
2019-01-11T10:14:10.000-0500,DROOLS-1999,Out of Date,"When I run a test scenario in the KIE Workbench, the test scenario completes normally, but after it's completed, I get a pop-up error dialog:

_Unable to complete your request. The following exception occurred: write size larger than buffer can fit._

This looks like it may(?) be related to:
https://issues.jboss.org/browse/RHBPMS-1475
",Major,Toni Rikkola,,2017-06-06T16:11:25.000-0400,"Error: ""write size larger than buffer can fit"" when running test scenario in workbench",Closed,bug,Bug
2019-01-11T06:43:25.000-0500,DROOLS-2205,Explained,"There are some issues in KIE workbench 7.4.1 release

   1.  Creating group on KIE WB on tomcat throws exception sometimes, but the group is created.

  2.  When trying to delete the user from KIE WB, the user is not getting deleted.

  3.  Language support other than English is not complete: partial support

   4.  Sometimes, when I am trying to perform operation on ""newly created project"" in KIE Workbench, URL is redirected to other existing project.

    5.  KIE WB user creation: Unable to create new user gracefully from the GUI: error: Cannot read property 'p8b' of null.
     
     6.  The new user creation is failing if it is assigned to Groups and Roles.
           Received Error : Group not found.",Major,Toni Rikkola,,2018-01-03T04:25:15.000-0500,Issues in KIE WB,Closed,bug,Bug
2019-01-11T05:15:38.000-0500,DROOLS-3353,Cannot Reproduce,"From drools-usage mailing list:
https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!msg/drools-usage/Rms9SJjTJJk/yP4UzveMAgAJ

After the first few days, after each scenario's run I was presented with the error message ""Test Scenarios require Stateful KieSession to run."" (meaning - 1 successful run of rules and secondary click on ""run scenario"" would give the error).
This was still suffer-able as I could use a workaround - after a ""compile"" command in the project editor I could run one scenario (once).

Now, after a few more days, I get the same error message no matter what.",Major,Toni Rikkola,,2018-11-23T01:04:56.000-0500,Test scenarios stop working after few runs,Closed,bug,Bug
2019-01-11T06:36:37.000-0500,DROOLS-2325,Done,None,Major,Toni Rikkola,,2018-02-16T01:00:03.000-0500,[Project Oriented] REST Documentation needs an update,Resolved,bug,Bug
2019-01-11T05:51:54.000-0500,DROOLS-3509,Done,None,Major,Mario Fusco,,2019-01-11T05:48:46.000-0500,KieContainer ignores changes made to the KieSessionModel after the 1st KieSession has been created,Resolved,bug,Bug
2019-01-10T03:31:27.000-0500,DROOLS-3500,Done,The test is failing on security manager policies. ,Major,Tibor Zimanyi,,2019-01-09T09:45:07.000-0500,Fix SerializationSecurityPolicyTest,Resolved,bug,Bug
2019-01-10T04:37:48.000-0500,DROOLS-3467,Done,There appears two vertical scrollbars under some circumstances.,Minor,Michael Anstis,,2019-01-02T07:32:41.000-0500,[DMN Designer] Two vertical scrollbars,Resolved,bug,Bug
2019-01-09T06:14:35.000-0500,DROOLS-3478,Done,"Artifact drlx-parser contains classes from javax.annotation-api. These classes were brought by https://github.com/kiegroup/drlx-parser/commit/e100effcad56d6715e18c9840d9e5fea18d7a437 .

These classes cause classpath issues to Kie server deployed on WebSphere, causing failures in  JMS functionality.

Please remove javax.annotation-api classes from drlx-parser.",Critical,Mario Fusco,,2019-01-07T07:02:16.000-0500,drlx-parser contains content of javax.annotation-api,Resolved,bug,Bug
2019-01-08T13:35:40.000-0500,DROOLS-3479,Done,None,Major,Mario Fusco,,2019-01-07T07:48:00.000-0500,KieBase include of a KieBase defined in a different kjar is not supported by the executable model,Resolved,bug,Bug
2019-01-09T03:35:52.000-0500,DROOLS-3429,Done,"Our Drools setup:
- users write rules in a combination of DSL and Java code
- rules are compiled
- packages are stored in a database (rules are seldom changed but often ran)

This has been working fine but in order to improve security, we've enabled the SecurityManager. This throws an exception while trying to serialize the consequence part of the rule:


{code:java}
Caused by: java.io.NotSerializableException: com.redacted.Rule_Events_REDACTED61028857611DefaultConsequenceInvoker
	- field (class ""org.drools.core.definitions.rule.impl.RuleImpl$SafeConsequence"", name: ""delegate"", type: ""interface org.drools.core.spi.Consequence"")
	- object (class ""org.drools.core.definitions.rule.impl.RuleImpl$SafeConsequence"", org.drools.core.definitions.rule.impl.RuleImpl$SafeConsequence@93071816)
	- writeExternal data
	- object (class ""org.drools.core.definitions.rule.impl.RuleImpl"", [Rule name=REDACTED, agendaGroup=end, salience=0, no-loop=true])
	- writeExternal data
	- object (class ""org.drools.core.rule.JavaDialectRuntimeData"", org.drools.core.rule.JavaDialectRuntimeData{...})
	- custom writeObject data (class ""java.util.HashMap"")
	- object (class ""java.util.HashMap"", {java=org.drools.core.rule.JavaDialectRuntimeData{...}, mvel=org.drools.core.rule.MVELDialectRuntimeData@b99ea6b2})
	- writeExternal data
	- root object (class ""org.drools.core.rule.DialectRuntimeRegistry"", org.drools.core.rule.DialectRuntimeRegistry@2d9acae8)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1213)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1615)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1576)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1499)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1209)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:365)
	at org.drools.core.definitions.rule.impl.RuleImpl.writeExternal(RuleImpl.java:180)
{code}


Possible cause:
Class {{RuleImpl}}, method {{writeExternal}} will write out {{null}} if the consequence is of type {{CompiledInvoker}}. But if the SecurityManager is enabled, the method {{wire}} will wrap the Consequence inside a {{SafeConsequence}}. A {{SafeConsequence}}, in contrast to the wrapped consequence is not a {{CompiledInvoker}}, so {{writeExternal}} will attempt to serialize it, instead of just writing {{null}} and fails.",Major,Tibor Zimanyi,,2018-12-12T11:24:50.000-0500,Serialization of KiePackages fails when SecurityManager is enabled,Closed,bug,Bug
2019-01-09T11:03:23.000-0500,DROOLS-3468,Done,"User is not able to model a DMN model where he declare a Decision service and invoke this Decision Service from other node, because the Decision Service node doesn't allow any incoming nor outgoing connections.

h2. Acceptance criteria
- Import attached model *a1*
- Connect *mood* decision service and *Decision-1* decision node
- Deploy the model
- Try to evaluate model via a rest call
- Check the output json doesn't contain  [^error.log] 
- Check the server log doesn't contain  [^server-error.log] ",Blocker,Michael Anstis,,2019-01-02T09:01:29.000-0500,[DMN Designer] Support Decision Service invocation,Resolved,bug,Bug
2019-01-09T11:02:47.000-0500,DROOLS-3465,Done,"(Programmatic) selection of the ""first cell"" in both the {{ContextGrid}} and {{DecisionTableGrid}} has regressed. Selection should ignore the ""row number"" column however changes adding explicit ""Row number columns"" for the foregoing grids that do not extend {{RowNumberColumn}} have caused the expected behaviour to break.

h2. Acceptance criteria
# Create new Decision
# Set expression to either {{Context}} or {{DecisionTable}}
# The whole row should not be selected, only one cell.
# Check other expression types.",Major,Michael Anstis,,2019-01-02T05:51:27.000-0500,[DMN Designer] ContextGrid and DecisionTableGrid selectFirstCell() regression,Resolved,bug,Bug
2019-01-09T04:30:47.000-0500,DROOLS-2373,Done,"Google groups link: https://groups.google.com/forum/#!topic/drools-usage/VElZ3KAZMIs

*Edited*
The problem is that in the piece of code below the expression {{column.getOperator()}} returns null. 
{{BRLConditionVariableColumnConverter#convertColumn}}
{code:java}
if (OperatorsOracle.operatorRequiresList(column.getOperator())) {
                return newMultipleSelectEnumColumn(factType,
                                                   factField,
                                                   column,
                                                   access,
                                                   gridWidget);
            } else {
                return newSingleSelectionEnumColumn(factType,
                                                    factField,
                                                    dataType,
                                                    column,
                                                    access,
                                                    gridWidget);
            }
{code}",Major,Toni Rikkola,,2018-03-08T04:50:44.000-0500,"BRL ""is contained in the (comma separated) list"" does not produce multiselect dropdown",Resolved,bug,Bug
2019-01-07T06:42:49.000-0500,DROOLS-3131,Done,"*Prerequisite:*
- Existing DMN model

*Step to reproduce:*
- Open manage custom data type dialog
- Click blue *Add* button
- Added entry will be immediately in edit mode to allow user change name and type
- Now click Insert Below, Insert Above or Insert Nested next to any entry
- Added entry won't be in edit mode

*Expected scenario:*
- Adding entries either via blue *Add* button or entries context menu options should be consistent",Minor,Guilherme Gomes,,2018-10-12T15:59:01.000-0400,[DMN Designer] Data Types - Add Item inconsistency,Resolved,bug,Bug
2019-01-04T10:11:33.000-0500,DROOLS-3469,Done,None,Major,Matteo Mortari,,2019-01-03T10:46:50.000-0500,DMN xml NS definition on non-root xml elements,Resolved,bug,Bug
2018-12-21T10:59:56.000-0500,DROOLS-3039,Done,"Changes in item definition definitions don't make the designer dirty. User can then can easily overlook he should save changes before closing the designer.

h2. Acceptance test
Check editor is dirty:
- Definitions moved
- Definitions declared
- Definitions removed
- Definitions edited",Minor,Guilherme Gomes,,2018-09-26T07:08:30.000-0400,[DMN Designer] Item definition change doesn't make designer dirty,Resolved,bug,Bug
2018-12-18T15:53:28.000-0500,DROOLS-3431,Done,"There appears an unexpected error dialog when user reopen stored dmn diagram. Secodn reopening works fine. See the steps to reproduce and attached error.

This was spotted during [DROOL-3286 PR Review|https://github.com/kiegroup/kie-wb-common/pull/2344] however not sure if it is related.",Critical,Michael Anstis,,2018-12-13T02:11:47.000-0500,[DMN Designer] Error after reopening,Resolved,bug,Bug
2018-12-18T05:13:03.000-0500,DROOLS-3396,Done,"Customer runs rule on Windows environment.

They then want to include CRLF(\r\n) in ACTION cell of XLSX spreadsheet as a value in order to generate error message. They expect that '\r\n' is treated as is, but when the rule is fired, it converted to ';\n'. Please take a look at attached reproducer.
",Major,Toni Rikkola,,2018-12-03T02:03:21.000-0500,CRLF in ACTION cell of xlsx spreadsheet is not treated as is,Closed,bug,Bug
2018-12-17T05:15:27.000-0500,DROOLS-3419,Done,"FindBugs is crashing with OutOfMemory error. Known issue, we just need to add more memory.",Major,Edoardo Vacchi,,2018-12-10T09:02:29.000-0500,Bump heap size for findbugs in drools-compiler Maven build,Resolved,bug,Bug
2018-12-11T03:45:31.000-0500,DROOLS-3370,Duplicate Issue,"When you try to use the quick start from the catalog or create any kjar project the kie-maven-plugin is not recognised therefore project is not building by Eclipse, even if you try to build from command line and refresh, eclipse don't pick up forcing you to include a workaround in the pom file.

<pluginManagement>
    	<plugins>
    		<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
    		<plugin>
    			<groupId>org.eclipse.m2e</groupId>
    			<artifactId>lifecycle-mapping</artifactId>
    			<version>1.0.0</version>
    			<configuration>
    				<lifecycleMappingMetadata>
    					<pluginExecutions>
    						<pluginExecution>
    							<pluginExecutionFilter>
    								<groupId>org.kie</groupId>
    								<artifactId>
    									kie-maven-plugin
    								</artifactId>
    								<versionRange>
    									[7.14.0.Final,)
    								</versionRange>
    								<goals>
    									<goal>build</goal>
    									<goal>generateDMNModel</goal>
    								</goals>
    							</pluginExecutionFilter>
    							<action>
    								<ignore></ignore>
    							</action>
    						</pluginExecution>
    					</pluginExecutions>
    				</lifecycleMappingMetadata>
    			</configuration>
    		</plugin>
    	</plugins>
    </pluginManagement>

This is not necessary on other IDEs

This will also affect customer which use workbench to start they project and pull this to eclipse later on.

JBoss Developer Studio engineer pointed out this problem is an Issue is with the invalid M2E metadata in the downstream kie-maven-plugin as you can see in the jira below

https://issues.jboss.org/browse/JBDS-4745

 ",Minor,Ant Stephenson,,2018-11-27T07:57:57.000-0500,Issue is with the invalid M2E metadata in the downstream kie-maven-plugin,Closed,bug,Bug
2018-12-11T06:18:42.000-0500,DROOLS-3412,Done,"Hello,

We've today updates to Drools 7.15 and as discussed with DROOLS-3228 we changed our code from calling _StatefulKnowledgeSessionImpl.reset_ ourselves to _KieSessionsPool_. However we then recognized that our application quickly became slower and slower over time (roughly after a few minutes of uptime, or a couple of hundred session create/dispose cycles). 

I haven't yet found the reason what is causing the slow down. However I think there is a difference in how we reset our sessions before session pools and how session pools do it. Perhaps that is a lead.

*What we did*
# Create a session
# Use the session
# Dispose and reset the session and go back to 2 for the next facts

*What happens with session pools*
# Create a session
# Use the session
# Skip dispose (because of _pool != null_ in the dispose method), reset the session and go back to 2 for the next facts

So the difference seems to be that with session pools the session doesn't get disposed before reset it called. If I do the same without session pools then I also see the same slow down. So it seems that something is left behind and causes a slow down. The results however seem to be correct, so the right consequences appear to be triggered.

An example on how we use the session pool can be found here: https://github.com/liebharc/JavaRules/blob/master/src/main/java/com/github/liebharc/JavaRules/StatefulReusingDroolsEngine.java

Thanks once more for your help.",Major,Mario Fusco,,2018-12-05T11:54:31.000-0500,Performance degradation with session pools,Resolved,bug,Bug
2018-12-11T05:10:14.000-0500,DROOLS-3424,Done,DMN docs should be updated to reflect this change,Major,Edoardo Vacchi,,2018-12-11T05:09:43.000-0500,Update DMN docs with new KieRuntimeFactory API,Closed,bug,Bug
2018-12-12T04:04:28.000-0500,DROOLS-3058,Duplicate Issue,DMN model designer shows additional *Decision Navigator* dock next to *Project Explorer*. The issue is this additional dock remains opened also for *business process* or *scenario simulation*.,Minor,Guilherme Gomes,,2018-10-01T06:05:57.000-0400,[DMN Designer] Decision Navigator dock is shown for other stunner designers,Closed,bug,Bug
2018-12-12T06:09:25.000-0500,DROOLS-3386,Done,"The font settings are available in the properties panel when Boxed Expression editor is opened, however changed values are not reflected into DRD diagram neither boxed expression grid.

One of solution in top of my head is not to show those font settings when boxed expression editor is opened.

Spotted during DROOLS-3351 review, however I think it is not related.",Trivial,Michael Anstis,,2018-11-29T05:25:40.000-0500,[DMN Designer] Font settings available from Boxed Expression editor,Resolved,bug,Bug
2018-12-11T02:42:26.000-0500,DROOLS-3236,Done,"Since 7.10.0.Final the following error occurs when opening a KJAR project in Eclipse:

 !image-2018-11-05-10-28-50-255.png! 

Errors occurred during the build.
Errors running builder 'Maven Project Builder' on project '...'.
Missing parameter for pluginExecutionFilter. groupId, artifactId, versionRange and goals must be specificed, but found: groupId = 'org.kie'
artifactId = 'kie-maven-plugin'
versionRange = '7.10.0.Final'
goals = '[]'

Please notice kie-maven-plugin 7.9.0.Final and earlier do NOT exhibit this issue.",Major,Massimiliano Dessi,,2018-11-05T04:31:05.000-0500,"Unable to open KJAR project in eclipse due to ""Missing parameter for pluginExecutionFilter""",Resolved,bug,Bug
2018-12-10T08:09:39.000-0500,DROOLS-3414,Cannot Reproduce,"The ""Export"" drop-down button on the toolbar added by Stunner's {{AbstractProjectEditorMenuSessionItems}} (i.e. not the single ""Download"" button added by {{KieEditor}}) throws an exception whenever any option is selected. I could only replicate with the full ""Business Central"" WAR (i.e. not {{drools-wb-webapp}}).",Major,Michael Anstis,,2018-12-06T11:23:53.000-0500,[DMN Designer] (Stunner) Export throws exception,Resolved,bug,Bug
2018-12-10T08:29:18.000-0500,DROOLS-3417,Done,"After merging of https://github.com/kiegroup/appformer/pull/556, testGetUiHeaderRowIndexRow0() and testGetUiHeaderRowIndexRow1() methods enter an endless loop.",Blocker,Gabriele Cardosi,,2018-12-07T05:13:35.000-0500,Fix neverending loop on ScenarioSimulationGridHeaderUtilitiesTest,Resolved,bug,Bug
2018-12-07T05:25:01.000-0500,DROOLS-3385,Done,"We have a test failure in multithreaded solving in OptaPlanner (please see the linked issue for details). Interestingly, it happens only with JDK11.

java.util.ConcurrentModificationException: null
at java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1134)
at org.drools.core.impl.KnowledgeBaseImpl.getOrCreateExactTypeDeclaration(KnowledgeBaseImpl.java:1458)
at org.drools.core.common.NamedEntryPoint.update(NamedEntryPoint.java:324)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.update(StatefulKnowledgeSessionImpl.java:1570)
at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.update(DroolsScoreDirector.java:254)",Critical,Mario Fusco,,2018-11-29T02:41:51.000-0500,Stateful session is not thread safe for update operation on JDK11,Resolved,bug,Bug
2018-12-07T10:14:56.000-0500,DROOLS-3410,Out of Date,"After generating a drl from the attached scorecard model, attempt to load the drl file with the following code:
  KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
		kbuilder.add(ResourceFactory.newByteArrayResource(drl2.getBytes()), ResourceType.DRL);
		//kbuilder.add(ResourceFactory.newByteArrayResource(drl2.getBytes()));
		for (KnowledgeBuilderError error : kbuilder.getErrors()) {
			System.out.println(error.getMessage());
		}
		Assert.assertFalse(kbuilder.hasErrors());

	StatelessKieSession session = kbuilder.newKnowledgeBase().newStatelessKieSession();



Drools compiler gave the following exception:

Found duplicate declaration for type com.xxxx.xxxx.xxxx, unable to reconcile
Unable to process type BaselineScore
Unable to process type ScoreRow
Unable to process type PhoneScoreScoreCardData
Unable to process type ScoreRank
Unable to process type PhoneScoreOutput
Unable to process type DataField
Unable to process type PhoneMatch",Major,Lance Leverich,,2018-12-05T08:42:45.000-0500,Found duplicate declaration for type exception after generating drl from scorecards xls,Closed,bug,Bug
2018-12-07T04:58:18.000-0500,DROOLS-2333,Done,None,Major,Mario Fusco,,2018-02-19T05:37:57.000-0500,Automatic addition of join condition properties to property reactive watch doesn't work when the first pattern doesn't have any constraint,Resolved,bug,Bug
2018-12-06T08:02:09.000-0500,DROOLS-3395,Done,"Spotted during DROOLS-3371 review, however it is probably not related.

If user copies diagram node by CTRL+C and CTRL+V it results two copies of the given node are created.",Major,Michael Anstis,,2018-12-03T01:50:42.000-0500,[DMN Designer] Two copies of node are created,Resolved,bug,Bug
2018-12-06T08:01:26.000-0500,DROOLS-3381,Done,"During the work [~jomarko] is doing for [DROOLS-2932|https://issues.jboss.org/browse/DROOLS-2932] it became apparent that _hiding_ the {{Header}} for a _nested_ {{ContextGrid}} is wrong; as it allows keyboard navigation into the (invisible) {{Header}}. We should not add a {{Header}} at all for _nested_ {{ContextGrid}}.

",Major,Michael Anstis,,2018-11-28T10:36:32.000-0500,[DMN Designer] Do not add Header to nested ContextGrid,Resolved,bug,Bug
2018-12-03T03:56:55.000-0500,DROOLS-3394,Done,None,Major,Matteo Mortari,,2018-12-02T11:23:05.000-0500,DMN DMNCompiler#getNamespaceAndName for DMNv1.2 assumes default prefix is DMN model namespace,Resolved,bug,Bug
2018-12-03T08:04:38.000-0500,DROOLS-3319,Done,"With build https://rhba-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/KIE/job/master/job/pullrequest/job/drools-pullrequests/267/
Experienced this issue: https://github.com/kiegroup/drools/pull/2148#issuecomment-438612978
While building DRL rules.

As Tibor suggested it might require the concurrent version of the Set ?",Major,Mario Fusco,,2018-11-14T05:56:13.000-0500,Potential concurrency issue with ProjectClassloader,Resolved,bug,Bug
2018-11-30T12:38:10.000-0500,DROOLS-3049,Done,"The {{NameAndDataTypeEditorViewImpl}} contains a link to the ""Data Type Dialog"". When this is clicked on the dialog is displayed and the _source_ {{Popover}} remains visible. When the User clicks on the dialog a mouse event is detected that is not _over_ the {{Popover}} and it closes. The proposal is to close the {{Popover}} if the User clicks on the link to the ""Data Type Dialog"".",Minor,Guilherme Gomes,,2018-09-27T10:00:57.000-0400,[DMN Designer] NameAndDataTypeEditorViewImpl needs to hide if the User navigates to the Data Type dialog ,Resolved,bug,Bug
2018-11-30T06:43:36.000-0500,DROOLS-3351,Done,"When the user configures a bigger font size, the information is not persisted.

Steps to reproduce:
 !error.gif|thumbnail! ",Minor,Matteo Mortari,,2018-11-22T15:09:18.000-0500,[DMN Designer] Font size information is not being persisted,Resolved,bug,Bug
2018-11-29T08:28:26.000-0500,DROOLS-3155,Done,List of available data types remain shown if no data type was selected and user clicks to the canvas.,Critical,Michael Anstis,,2018-10-17T08:10:03.000-0400,[DMN Designer] Data Type Selectbox remains shown,Resolved,bug,Bug
2018-11-30T03:39:49.000-0500,DROOLS-3335,Done,"A broken DMN resource should inhibit creation instantiation and installation into KieRepository of a KJAR.
Additionally, DMN message of DMN compilation should be reported as a KieBuilder message.",Major,Matteo Mortari,,2018-11-20T04:25:09.000-0500,Broken DMN resource should inhibit KJAR and report KieBuilder message,Resolved,bug,Bug
2018-11-28T12:02:50.000-0500,DROOLS-2646,Done,"Consider two rules which have one of the patterns in common, each of which logically inserts an object in the RHS. Build the KieModule from the KieFileSystem including these rules, create the KieContainer and the KieSession. Insert the facts. Everything works fine. 
Create a new KieModule excluding these rules from the KieFileSystem, update the KieContainer. Expect the logically inserted facts to be retracted, as the rules which trigged their creation is no longer present. Turns out that is true for the facts inserted by the first rule, but not for the second one: the facts remain in the working memory.",Major,Mario Fusco,,2018-06-22T05:21:03.000-0400,KieContainer#updateToVersion removing rules: logically inserted objects not removed correctly,Resolved,bug,Bug
2018-11-28T02:35:10.000-0500,DROOLS-2210,Done,"We have a fairly large rule-base with temporal reasoning and sliding windows. 

While serializing the drools session we observe random null pointer exceptions as see below:

Exception in thread ""pool-92-thread-98"" java.lang.NullPointerException
	at org.drools.core.rule.SlidingTimeWindow$BehaviorJobContextTimerOutputMarshaller.serialize(SlidingTimeWindow.java:323)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.writeTimers(ProtobufOutputMarshaller.java:880)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.serializeSession(ProtobufOutputMarshaller.java:210)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.writeSession(ProtobufOutputMarshaller.java:118)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.marshall(ProtobufMarshaller.java:162)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.marshall(ProtobufMarshaller.java:146)
	at com.mlnms.common.fmwk.drools.impl.DroolsClientImpl.backupKieSession(DroolsClientImpl.java:743)
	at com.mlnms.common.fmwk.drools.impl.DroolsClientImpl.lambda$processStatefulEvents$0(DroolsClientImpl.java:506)
	at java.lang.Thread.run(Thread.java:745)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)",Critical,Mario Fusco,,2018-01-03T21:12:59.000-0500,Drools 7.3.0 serialization null pointer exceptions with sliding windows,Resolved,bug,Bug
2018-11-27T09:35:30.000-0500,DROOLS-3282,Rejected,"Current implementation moves to next agend group if current agenda group is empty. This is unexpected, and in part detrimental in the impl of units: it is not possible to suspend execution of rules by switching to an empty group, because the engine will move to the next group anyway:

{code}
return nextRule != null && (!ruleAgendaItem.getAgendaGroup().equals( nextRule.getAgendaGroup() ) || !isHigherSalience(nextRule));
{code}

because the change in behavior is potentially backwards incompatible we add a flag {{keepWhenEmpty}} that must be set to {{true}} when we want to enable this new behavior",Major,Edoardo Vacchi,,2018-11-08T09:14:23.000-0500,Should not move to next AgendaGroup even if current is empty,Closed,bug,Bug
2018-11-27T03:53:27.000-0500,DROOLS-2415,Won't Fix,"ClassAwareObjectStore size attribute is of type int [1],however entryPoint.getFactCount() (this gets the return value from the object store) is of type long. 

[1] https://github.com/kiegroup/drools/blob/91cb991a4db283ac00eaa2e16d606d72209b13e4/drools-core/src/main/java/org/drools/core/common/ClassAwareObjectStore.java#L49",Major,Mario Fusco,,2018-03-22T11:42:38.000-0400,ClassAwareObjectStore size attribute is of type int,Resolved,bug,Bug
2018-11-27T08:01:32.000-0500,DROOLS-3254,Done,"This ticket contains the missing part of the original ticket https://issues.jboss.org/browse/DROOLS-3154

See subtasks for details",Major,Daniele Zonca,,2018-11-06T08:02:37.000-0500,Additional UI improvement/bugfixes,Resolved,bug,Bug
2018-11-22T11:57:42.000-0500,DROOLS-3090,Cannot Reproduce,"We have published nee version of rules:

{noformat}
2018-10-09 10:44:58,785 INFO  [Timer-2][] ScannerListener Knowledge base scanner SCANNING
2018-10-09 10:44:59,019 INFO  [Timer-2][] ScannerListener Knowledge base scanner UPDATING
2018-10-09 10:45:00,236 INFO  [Timer-2][] KieRepositoryImpl KieModule was added: ZipKieModule[releaseId=cz.dimensiondata.o2:offline-rules:0.0.20,file=F:\GCTI8\assign_manager_2\repository\cz\dimensiondata\o2\offline-rules\0.0.20\offline-rules-0.0.20.jar]
2018-10-09 10:45:00,345 INFO  [Timer-2][] KieScanner The following artifacts have been updated: {cz.dimensiondata.o2:offline-rules:0.0.19=cz.dimensiondata.o2:offline-rules:jar:0.0.20}
2018-10-09 10:45:00,345 INFO  [Timer-2][] ScannerListener Knowledge base scanner RUNNING
2018-10-09 10:45:00,345 INFO  [Timer-2][] ScannerListener Knowledge base scanner RUNNING
{noformat}

As you can see the jar got downloaded to local M2 repository and replace. Yet drools still uses old rules.

We have 3 artefacts:
offline-facts - with classes inserted into operation memory
offline-rules - with rules in 1 DRL file and 2 XLSX file
offline-server - with the application code

offline-server depend on offline-facs (so it can create new insances)
offline-rules depend on offline-facts as well, but with provided scope (so the one on classpath is used)

I have found that Maven has its own caching mechanism so even if new version is published it wont check remote repository more ften than once a day. This can be solved by setting update policy to always.

{code}
<repositories>
	<repository>
		<id>public</id>
		<name>Public Repositories</name>
		<url>https://example.org/nexus/content/groups/public/</url>
			<releases>
				<updatePolicy>always</updatePolicy>
			</releases>
			<snapshots>
				<updatePolicy>always</updatePolicy>
			</snapshots>
	</repository>
</repositories>
{code}

Everything seems configred correctly. Fragments of spring configuration are added.

I'm bit confused what the message:

{code}
The following artifacts have been updated: {cz.dimensiondata.o2:offline-rules:0.0.19=cz.dimensiondata.o2:offline-rules:jar:0.0.20}
{code}

actually means.",Major,Mario Fusco,,2018-10-09T07:58:53.000-0400,KieScanner does not work as expected,Resolved,bug,Bug
2018-11-22T12:11:30.000-0500,DROOLS-3337,Explained,"I am using 6.1.0.Final version of Drool. I am getting


{code:java}
java.lang.ClassCastException: org.drools.core.time.impl.JDKTimerService cannot be cast to org.drools.core.time.SessionPseudoClock
{code}

exception when I am trying to get session clock from the KieSession.
I am using Persistence and getting the KieSession using this

{code:java}
val kieSession = kieServices.getStoreServices.newKieSession(kiebase,null,environment);
{code}


My kmodule.xml is:


{code:java}
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
    <kbase name=""rules"" packages=""rules"" eventProcessingMode=""stream"">
        <ksession name=""ksession-rules"" clockType=""pseudo""/>
    </kbase>
</kmodule>
{code}

",Major,Mario Fusco,,2018-11-20T06:27:41.000-0500,ClassCastException while using SessionPseudoClock,Resolved,bug,Bug
2018-11-26T04:20:10.000-0500,DROOLS-3321,Done,"Currently, kie-wb-common-comand-api has not ""GWT"" features, i.e. it has not the GWT xml declaration.
To make it usable by other clients, this should be fixed:
1) move everything inside the ""client"" package
2) create the CommonCommandAPI.gwt.xml file ",Major,Gabriele Cardosi,,2018-11-15T07:14:03.000-0500,Add GWT feature to kie-wb-common-command-api,Resolved,bug,Bug
2018-11-22T11:19:07.000-0500,DROOLS-3237,Done,"Usually the standard kie-maven-plugin mojo compiles any Drools resource at compile time in order to check for errors.
Using -DgenerateModel=YES instead generate the exec model, but skips resource compilation.

To replicate:
introduce a Drools resource which does NOT compile in the KJAR. Without the flag, it fail maven compilation. With the flag, maven compilation succeeds.",Major,Luca Molteni,,2018-11-05T05:44:28.000-0500,Using -DgenerateModel=YES skips resources compilation check,Resolved,bug,Bug
2018-11-23T07:31:15.000-0500,DROOLS-3352,Done,"This file was created in the Workbench DMN Editor:
 !wbdmneditor.png|thumbnail! 
(here's the DMN file:  [^wbdmn.dmn])

Then, it was imported in a third-party editor:
 !thirdparty.png|thumbnail! 

Notice that the association with the text notation cannot be seen.",Major,Michael Anstis,,2018-11-22T15:13:25.000-0500,[DMN Designer] Some associations don't appear in third-party editors,Resolved,bug,Bug
2018-11-22T09:58:59.000-0500,DROOLS-3345,Done,"Using the executable model, trying to invoke a function or static method from a pattern passing a field of the matched class (instead of using an accessor) causes an error message like the following

{code}
Error Messages:
Message [id=1, level=ERROR, path=src/main/java/com/middleware/bzr/ruleset/p2x_acr/r0/Rulese14c4bc3281a47218150a512c4578947RuleMethods0.java, line=160, column=86
   text=cannot find symbol
  symbol:   variable var_S_OPAIR
  location: class com.middleware.bzr.ruleset.p2x_acr.r0.Rulese14c4bc3281a47218150a512c4578947RuleMethods0]
{code}",Blocker,Mario Fusco,,2018-11-22T09:33:14.000-0500,Method and function invocation passing a field doesn't work in executable model,Resolved,bug,Bug
2018-11-22T11:14:24.000-0500,DROOLS-2174,Out of Date," I am getting a similar deadlock as the one in the cloned issue. We are using following dependencies:
<dependency>
<groupId>org.drools</groupId>
<artifactId>drools-templates</artifactId>
<version>$
{runtime.version}</version>
</dependency>
<dependency>
<groupId>org.kie</groupId>
<artifactId>kie-api</artifactId>
<version>${runtime.version}
</version>
</dependency>
<dependency>
<groupId>org.drools</groupId>
<artifactId>drools-core</artifactId>
<version>$
{runtime.version}</version>
</dependency>
<dependency>
<groupId>org.drools</groupId>
<artifactId>drools-compiler</artifactId>
<version>${runtime.version}
</version>
</dependency>
runtime.version = 6.5.0-Final
I have around 50 off threads stuck in a deadlock. 49 of them are having following stack trace:
""THREAD-4"" #124 prio=5 os_prio=0 tid=0x00000000015fc800 nid=0x3a5d waiting on condition [0x00007fc773e7b000]
java.lang.Thread.State: WAITING (parking)
at sun.misc.Unsafe.park(Native Method)
parking to wait for <0x000000074d189818> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:967)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1283)
at java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(ReentrantReadWriteLock.java:727)
at org.drools.core.impl.KnowledgeBaseImpl.readLock(KnowledgeBaseImpl.java:703)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulSession(KnowledgeBaseImpl.java:1434)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulSession(KnowledgeBaseImpl.java:1422)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:308)
at org.drools.core.impl.KnowledgeBaseImpl.newKieSession(KnowledgeBaseImpl.java:385)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:693)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:629)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:611)
And one of them is stuck in the following stack trace:
""THREAD-4"" #124 prio=5 os_prio=0 tid=0x00000000015fc800 nid=0x3a5d waiting on condition [0x00007fc773e7b000]
java.lang.Thread.State: WAITING (parking)
at sun.misc.Unsafe.park(Native Method)
parking to wait for <0x000000074d189818> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:967)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1283)
at java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(ReentrantReadWriteLock.java:727)
at org.drools.core.impl.KnowledgeBaseImpl.readLock(KnowledgeBaseImpl.java:703)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulSession(KnowledgeBaseImpl.java:1434)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulSession(KnowledgeBaseImpl.java:1422)
at org.drools.core.impl.KnowledgeBaseImpl.newStatefulKnowledgeSession(KnowledgeBaseImpl.java:308)
at org.drools.core.impl.KnowledgeBaseImpl.newKieSession(KnowledgeBaseImpl.java:385)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:693)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:629)
at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:611)
Please help us out in fixing this. Its a production system serving millions of users.
PS: This is was reproduced under a medium load where we create 50 stateful sessions in parallel and also some rule were also getting added in the KieContainer at the same time.

",Major,Mario Fusco,,2017-12-12T07:59:47.000-0500,Deadlock between AbstractWorkingMemory and DefaultAgenda,Resolved,bug,Bug
2018-11-26T05:58:58.000-0500,DROOLS-3334,Done,"Structure Data Types are being set as Undefined:
 !bug.png|thumbnail! 
",Major,Guilherme Gomes,,2018-11-19T12:05:53.000-0500,"[DMN Designer] Data Types - ""Structure"" Data Types are being set as ""Undefined""",Resolved,bug,Bug
2018-11-22T11:18:27.000-0500,DROOLS-2499,Cannot Reproduce,"java.lang.ClassCastException: org.drools.core.rule.constraint.EvaluatorConstraint cannot be cast to org.drools.core.rule.constraint.MvelConstraint
	at org.drools.core.reteoo.builder.BuildUtils.mergeNodes(BuildUtils.java:176)

",Critical,Mario Fusco,,2018-04-25T08:24:36.000-0400,ClassCastException in method mergeNodes in org.drools.core.reteoo.builder.BuildUtils class,Resolved,bug,Bug
2018-11-26T04:11:56.000-0500,DROOLS-3085,Done,Improve error reporting and use index as information instead of require scenario description,Major,Daniele Zonca,,2018-10-08T02:57:09.000-0400,Add index info to ScenarioException  ,Resolved,bug,Bug
2018-11-22T04:15:43.000-0500,DROOLS-2581,Done,"After install the RHDM 7.0 and started it, it's not possible to restart or stop, Java-level deadlock  cause this:
{code}
Found one Java-level deadlock:
=============================
""ForkJoinPool.commonPool-worker-1"":
  waiting to lock monitor 0x000000000418a588 (object 0x00000006e56789b8, a org.drools.core.common.ProjectClassLoader),
  which is held by ""EJB default - 1""
""EJB default - 1"":
  waiting to lock monitor 0x0000000007fd7bc8 (object 0x00000006e77d7a78, a org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader),
  which is held by ""ForkJoinPool.commonPool-worker-1""

Java stack information for the threads listed above:
===================================================
""ForkJoinPool.commonPool-worker-1"":
	at java.lang.ClassLoader.loadClass(ClassLoader.java:404)
	- waiting to lock <0x00000006e56789b8> (a org.drools.core.common.ProjectClassLoader)
	at org.drools.core.common.ProjectClassLoader.internalLoadClass(ProjectClassLoader.java:167)
	at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadClass(ProjectClassLoader.java:423)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at java.lang.Class.getDeclaredFields0(Native Method)
	at java.lang.Class.privateGetDeclaredFields(Class.java:2583)
	at java.lang.Class.getDeclaredFields(Class.java:1916)
	at org.drools.compiler.builder.impl.TypeDeclarationCache.processFieldsPosition(TypeDeclarationCache.java:206)
	at org.drools.compiler.builder.impl.TypeDeclarationCache.initTypeDeclaration(TypeDeclarationCache.java:151)
	at org.drools.compiler.builder.impl.TypeDeclarationCache.getAndRegisterTypeDeclaration(TypeDeclarationCache.java:91)
	at org.drools.compiler.builder.impl.TypeDeclarationBuilder.getAndRegisterTypeDeclaration(TypeDeclarationBuilder.java:69)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getAndRegisterTypeDeclaration(KnowledgeBuilderImpl.java:1860)
	at org.drools.compiler.rule.builder.PatternBuilder.processClassObjectType(PatternBuilder.java:306)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:181)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:151)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:133)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:105)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1281)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$compileRulesLevel$3(KnowledgeBuilderImpl.java:1242)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl$$Lambda$1035/1743914198.accept(Unknown Source)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:291)
	at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)
	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)
	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)
	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)
""EJB default - 1"":
	at java.lang.ClassLoader.loadClass(ClassLoader.java:404)
	- waiting to lock <0x00000006e77d7a78> (a org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader)
	at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadType(ProjectClassLoader.java:431)
	at org.drools.core.common.ProjectClassLoader.loadType(ProjectClassLoader.java:177)
	at org.drools.core.common.ProjectClassLoader.loadClass(ProjectClassLoader.java:149)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at java.lang.Class.forName0(Native Method)
	at java.lang.Class.forName(Class.java:348)
	at org.mvel2.util.ParseTools.forNameWithInner(ParseTools.java:2178)
	at org.mvel2.ParserConfiguration.checkForDynamicImport(ParserConfiguration.java:154)
	at org.mvel2.ParserConfiguration.hasImport(ParserConfiguration.java:175)
	at org.mvel2.ParserContext.hasImport(ParserContext.java:386)
	at org.mvel2.compiler.PropertyVerifier.getBeanProperty(PropertyVerifier.java:175)
	at org.mvel2.compiler.PropertyVerifier.analyze(PropertyVerifier.java:132)
	at org.mvel2.compiler.ExpressionCompiler.verify(ExpressionCompiler.java:392)
	at org.mvel2.compiler.ExpressionCompiler._compile(ExpressionCompiler.java:281)
	at org.mvel2.util.ParseTools.subCompileExpression(ParseTools.java:2064)
	at org.mvel2.ast.Negation.<init>(Negation.java:40)
	at org.mvel2.compiler.AbstractParser.nextToken(AbstractParser.java:1233)
	at org.mvel2.compiler.ExpressionCompiler._compile(ExpressionCompiler.java:126)
	at org.mvel2.compiler.ExpressionCompiler.compile(ExpressionCompiler.java:67)
	at org.mvel2.MVEL.analyze(MVEL.java:680)
	at org.mvel2.MVEL.analyze(MVEL.java:685)
	at org.drools.compiler.rule.builder.dialect.mvel.MVELExprAnalyzer.analyzeExpression(MVELExprAnalyzer.java:130)
	at org.drools.compiler.rule.builder.dialect.mvel.MVELDialect.analyzeExpression(MVELDialect.java:509)
	at org.drools.compiler.rule.builder.dialect.mvel.MVELDialect.analyzeExpression(MVELDialect.java:491)
	at org.drools.compiler.rule.builder.PatternBuilder.buildAnalysis(PatternBuilder.java:1602)
	at org.drools.compiler.rule.builder.PatternBuilder.buildEval(PatternBuilder.java:1497)
	at org.drools.compiler.rule.builder.PatternBuilder.createAndBuildPredicate(PatternBuilder.java:1339)
	at org.drools.compiler.rule.builder.PatternBuilder.buildExpression(PatternBuilder.java:974)
	at org.drools.compiler.rule.builder.PatternBuilder.buildCcdDescr(PatternBuilder.java:946)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:767)
	at org.drools.compiler.rule.builder.PatternBuilder.processConstraintsAndBinds(PatternBuilder.java:627)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:184)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:151)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:133)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:105)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1281)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$compileRulesLevel$3(KnowledgeBuilderImpl.java:1242)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl$$Lambda$1035/1743914198.accept(Unknown Source)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)
	at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:291)
	at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)
	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)
	at java.util.concurrent.ForkJoinTask.doInvoke(ForkJoinTask.java:401)
	at java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:734)
	at java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:160)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRulesLevel(KnowledgeBuilderImpl.java:1238)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1218)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileKnowledgePackages(KnowledgeBuilderImpl.java:1056)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildRules(KnowledgeBuilderImpl.java:2630)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackages(KnowledgeBuilderImpl.java:2565)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:109)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:99)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:238)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:65)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:356)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieModule(KieBuilderImpl.java:348)
	at org.kie.scanner.KieRepositoryScannerImpl.build(KieRepositoryScannerImpl.java:248)
	at org.kie.scanner.KieRepositoryScannerImpl.buildArtifact(KieRepositoryScannerImpl.java:198)
	at org.kie.scanner.KieRepositoryScannerImpl.loadArtifact(KieRepositoryScannerImpl.java:154)
	at org.kie.scanner.KieRepositoryScannerImpl.loadArtifact(KieRepositoryScannerImpl.java:149)
	- locked <0x00000006e6e94d50> (a org.kie.scanner.KieRepositoryScannerImpl)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.loadKieModuleFromMavenRepo(KieRepositoryImpl.java:192)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.getKieModule(KieRepositoryImpl.java:138)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.getKieModule(KieRepositoryImpl.java:115)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:184)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:176)
	at org.kie.server.services.impl.KieServerImpl.createContainer(KieServerImpl.java:269)
	- locked <0x00000006e6d9c1a0> (a org.kie.server.services.impl.KieContainerInstanceImpl)
	at org.kie.server.services.impl.ContainerManager.installContainersSync(ContainerManager.java:43)
	at org.kie.server.services.impl.ContainerManager.installContainers(ContainerManager.java:33)
	at org.kie.server.jms.ContainerManagerEJB.installContainers(ContainerManagerEJB.java:38)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:90)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:101)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.tx.EjbBMTInterceptor.handleInvocation(EjbBMTInterceptor.java:103)
	at org.jboss.as.ejb3.tx.BMTInterceptor.processInvocation(BMTInterceptor.java:58)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:110)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)
	at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:609)
	at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LogDiagnosticContextRecoveryInterceptor.processInvocation(LogDiagnosticContextRecoveryInterceptor.java:82)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AsyncFutureInterceptorFactory$2$2.runInvocation(AsyncFutureInterceptorFactory.java:152)
	at org.jboss.as.ejb3.component.interceptors.AsyncInvocationTask.run(AsyncInvocationTask.java:81)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)

Found 1 deadlock.

{code}",Critical,Mario Fusco,,2018-05-22T20:11:04.000-0400,Java-level deadlock in Drools ProjectClassLoader,Resolved,bug,Bug
2018-11-22T04:17:30.000-0500,DROOLS-2542,Won't Fix,"Calling org.kie.api.KieServices.newKieContainer(ReleaseId, ClassLoader), in the way it is done in org.kie.internal.utils.KieHelper.getKieContainer() can cause problems in situations where concurrent threads are in action. newKieContainer reads the latest KieModule from the repository that was written by a builder. If multiple builders for different rules are running in parallel, it's not predictable, which rules will be used when creating a new session (see my sample below).

I'm aware that I can work around this issue by using ReleaseIds, but nevertheless this behavior is cumbersome if you'd like to understand the relation between the KieFileSystem and the KieContainer in org.kie.internal.utils.KieHelper.getKieContainer() ",Major,Mario Fusco,,2018-05-10T09:58:21.000-0400,KieHelper.getKieContainer() is not thread-safe,Resolved,bug,Bug
2018-11-22T04:11:07.000-0500,DROOLS-2763,Cannot Reproduce,After running rule Engine for 2-3 hours with data every 2 milliseconds I am getting heap space Error. After doing heap dump analysis i found that org.drools.core.phreak.RightTupleEntry.{next} class is taking 3.84GB heap space. Space and class details are in the below screenshot. ,Major,Mario Fusco,,2018-07-19T03:11:28.000-0400,Heap Space Pile Up after some Time,Resolved,bug,Bug
2018-11-22T07:52:36.000-0500,DROOLS-3092,Done,"When editing ""Custom Data Types"", not all definitions are visible. This behaviour happens in all browsers.",Major,Daniel José dos Santos,,2018-10-09T13:04:19.000-0400,[DMN Designer] User can not see all the definition editing custom data types,Resolved,bug,Bug
2018-11-22T04:13:41.000-0500,DROOLS-2587,Cannot Reproduce,"I upgraded my Drools 5.x (drools-compiler 5.2.1.Final, drools-decisiontables 5.4.0.Final, and drools-templates 5.4.0.Final; jbpm-flow 5.1.1.Final, jbpm-bmpn2 5.1.1.Final and with their respective dependencies) Java 1.7.0_21 job to drools 7.5.0 and use kie-api/kie-ci and Java 1.8.0_162; I had to do some refactoring because now drools is part of the KIE (Knowledge Is Everything) umbrella, specifically the code below:

    KieServices ks = KieServices.Factory.get();
    KieContainer kc = ks.getKieClasspathContainer();
    KieSession ks = kc.newKieSession(""ksession-dtables"");  //stateful session
    FactHandle fh = ks.insert(fact);
    ks.fireAllRules();
....

I added the pom.properties file and kmodule.xml file.  The java job builds successfully.  When I run the java job the packages and rules are loaded into the Knowledge Base but only the first rules fire up and then it stops or ends.

This seems to be a bug in the decision table (spreadsheet), it works with Java 7/Drools 5 but not with Java 8/Drools 7

",Major,Mario Fusco,,2018-05-24T11:00:52.000-0400,Java 8 and Drools 7.5.0,Resolved,bug,Bug
2018-11-21T03:00:36.000-0500,DROOLS-3238,Done,"With the attachment zip file and use -DgenerateModel=YES flag.

Error will be reported as:
 !image-2018-11-05-11-45-49-430.png! 

It looks like generate exec model mojo is trying to compile classes and resources which belong to the test scope.",Major,Luca Molteni,,2018-11-05T05:48:41.000-0500,Using -DgenerateModel=YES try to compile using Drools compiler test classes,Resolved,bug,Bug
2018-11-20T08:21:43.000-0500,DROOLS-3325,Won't Fix,"When running test [1] SessionsPoolTest.testKieSessionsPoolInMultithreadEnv in a loop (it helps to raise the number of threads to 100), it fails, because the insert() operation that is done after session dispose ends without an exception. Stacktrace is here [2].

[1] https://github.com/kiegroup/drools/blob/83f0751f5ebf7bc75a6431bc00b1b82232b75206/drools-compiler/src/test/java/org/drools/compiler/integrationtests/session/SessionsPoolTest.java#L86
[2] https://gist.github.com/baldimir/7aaab506c0cd8c273097d71f847d8631",Major,Mario Fusco,,2018-11-16T08:28:40.000-0500,Insert operation on a disposed Kie session from session pool should fail,Resolved,bug,Bug
2018-11-20T09:51:11.000-0500,DROOLS-3332,Done,"When handling larger DRL files, executable model fails with this stacktrace: [1]. PR with a reproducer can be found here [2].

[1] https://gist.github.com/baldimir/6f84ef33052e4bf7df7c2ec8603ded67
[2] https://github.com/kiegroup/drools/pull/2157",Blocker,Mario Fusco,,2018-11-19T07:42:15.000-0500,"Executable model throws ""code too large"" error when processing large DRL file",Resolved,bug,Bug
2018-11-20T08:44:17.000-0500,DROOLS-3270,Duplicate Issue,When selecting a Decision node in the Graph view there is no quick action to add a BKM node. There should be.,Major,Daniel José dos Santos,,2018-11-07T04:41:25.000-0500,[DMN Designer] Cannot add BKM from Decision in DRG,Closed,bug,Bug
2018-11-20T11:26:22.000-0500,DROOLS-2552,Explained,"I have run into an issue with the KieBase serialization throwing a NullPointerException when using exists and parentheses around an or when rules are in a RuleFlowGroup.

Example rules:
package com.sample.rules

rule ""Your First Rule""
ruleflow-group ""group1""
    when
        exists ( String(this == ""Hello"") or String(this == ""World"") )
    then
        System.out.println(""Hello or World"");
end

rule ""Your Second Rule""
ruleflow-group ""group1""
    when
        $string: String(this == ""Hello World"")
    then
        System.out.println($string);
end

Having the first rule wrap the or in () will cause a deserialization NPE:
Exception in thread ""main"" java.lang.NullPointerException
	at org.drools.core.common.BaseNode.getSinks(BaseNode.java:241)
	at org.drools.core.impl.KnowledgeBaseImpl.rewireNodeAfterDeserialization(KnowledgeBaseImpl.java:494)
	at org.drools.core.impl.KnowledgeBaseImpl.rewireNodeAfterDeserialization(KnowledgeBaseImpl.java:511)
	at org.drools.core.impl.KnowledgeBaseImpl.rewireNodeAfterDeserialization(KnowledgeBaseImpl.java:511)
	at org.drools.core.impl.KnowledgeBaseImpl.rewireNodeAfterDeserialization(KnowledgeBaseImpl.java:511)
	at org.drools.core.impl.KnowledgeBaseImpl.rewireReteAfterDeserialization(KnowledgeBaseImpl.java:489)
	at org.drools.core.impl.KnowledgeBaseImpl.readExternal(KnowledgeBaseImpl.java:483)
....

Some testing shows this:
If the first rule is on its own then this error does *not* occur.
If the first rule does not use () the error does *not* occur. This of course means that the rule behaves differently
If the rules are not in an rfg this error does *not* occur
",Critical,Mario Fusco,,2018-05-15T16:20:41.000-0400,KieBase Deserialization: NullPointerException,Resolved,bug,Bug
2018-11-19T02:39:40.000-0500,DROOLS-3324,Done,With Narayana changes there is a need for additional properties in persistence.xml file from drools-persistence-jpa module. ,Blocker,Tibor Zimanyi,,2018-11-15T09:56:44.000-0500,Update persistence.xml with properties needed for Narayana,Resolved,bug,Bug
2018-11-16T11:10:18.000-0500,DROOLS-1940,Out of Date,"I don't know whether it's related to my problems with a object hierarchy and {{@FormField}} re-use; but fields annotated {{@FieldReadOnly}} do not appear as read-only in the ""Properties Panel"". For example:-
{code}
@FieldDefinition(labelMode = LabelMode.OVERRIDE_I18N_KEY)
public class Id implements DMNProperty {
    ...
    @ReadOnly
    @FieldReadOnly
    public static final Boolean readOnly = true;
    ...
}

public abstract class DMNModelInstrumentedBase implements DMNDefinition {
 
    //No @FormFields etc
 
}
 
public abstract class DMNElement extends DMNModelInstrumentedBase {
 
    @Property
    @FormField
    protected Id id;
    ....
}
 
public abstract class NamedElement extends DMNElement {
    ....
}
 
@FormDefinition(policy = FieldPolicy.ONLY_MARKED)
public class InformationItem extends NamedElement implements DMNPropertySet {
    ....
}
{code}
The ""Propeties"" widget for ""Id"" can still be edited; although changes are not persisted (i.e. if I change the ""Id"" to ""xyz"" and then click on a different node and back to the one I changed the ""Id"" property is not ""xyz""). I would however expected the {{TextBox}} to have been read-only and the value not editable.
",Major,Pere Fernandez Perez,,2017-06-26T06:22:30.000-0400,"[DMN Editor] Dynamic Form ""read only"" not working",Resolved,bug,Bug
2018-11-16T11:26:27.000-0500,DROOLS-3178,Done,"The top Level expression of a BKM node is always a Function, however the Decision Navigator Dock doesn't show this top level expression as a Function, see the attached screenshots.",Major,Guilherme Gomes,,2018-10-24T01:59:05.000-0400,[DMN Designer] Navigator Dock doesn't show function for BKM nodes,Resolved,bug,Bug
2018-11-14T05:30:34.000-0500,DROOLS-3313,Done,"Avoid double invocation of ""newScenarioGrid"" - replace it with PostConstruct/init",Major,Gabriele Cardosi,,2018-11-12T09:51:33.000-0500,Avoid double invocation of ScenarioGridPanelProduce.newScenarioGrid(),Resolved,bug,Bug
2018-11-13T11:40:50.000-0500,DROOLS-3212,Cannot Reproduce,"The problem is caused by the fact that running the simulation updates the model.

Steps to reproduce:
Open scesim asset.
Run the scenario.
Close the editor

You get a warning that there are unsaved changes.",Major,Gabriele Cardosi,,2018-10-31T07:21:17.000-0400,Scenario simulation can not be closed without a warning if it has been ran,Closed,bug,Bug
2018-11-12T06:55:35.000-0500,DROOLS-3252,Done,"Fix 

https://issues.jboss.org/browse/DROOLS-3190
https://issues.jboss.org/browse/DROOLS-3213",Minor,Gabriele Cardosi,,2018-11-06T05:50:09.000-0500,Minor fixes,Resolved,bug,Bug
2018-11-12T04:51:12.000-0500,DROOLS-3249,Done,"At the moment {{TypeRef}} is a mandatory field within the editor.

This is a hard limitation of use of the Properties Panel bean-binding (it cannot bind to {{null}} values). However the DMN Specification states that {{TypeRef}} are optional (and we are working around by changing the _default_ to {{Any}} - see [DROOLS-3248|https://issues.jboss.org/browse/DROOLS-3248]).

We need to change the UI and marshaller to be able to support _optional_ {{TypeRef}}. This would (probably) require adding a _magic_ value to {{BuiltInType}} representing a ""null"" selection. It would need to:

- Appear at the top of the ""Data Type selector"" widget (with label ""<None>"" or similar)
- Be the _selected_ option when the {{TypeRef}} is the new _magic_ value (this should happen automatically, but worth checking!)
- The marshaller should set the {{TypeRef}} to the _magic_ {{BuiltInType}} if the DMN model (coming from XML->{{kie-dmn-model}}->workbench model) has a {{null}} {{TypeRef}} - the _magic_ value is only to be used _client-side_.
- The marshaller should set the {{TypeRef}} to {{null}} when converting from the workbench model to {{kie-dmn-model}} and the workbench model {{TypeRef}} is the _magic_ value - again, the _magic_ value is only to be used _client-side_.
- Check that creating new data-types does not show the _magic_ value (it uses a different widget, but population of the widget probably iterates all {{BuiltInType}}.

[~tari_manga] [~karreiro] seem reasonable to you?",Blocker,Daniel José dos Santos,,2018-11-06T04:25:58.000-0500,[DMN Designer] Add support for optional typeRefs,Resolved,bug,Bug
2018-11-12T06:54:40.000-0500,DROOLS-3150,Done,None,Minor,Gabriele Cardosi,,2018-10-16T07:52:00.000-0400,"Avoid multiple ""editing"" cell in header",Resolved,bug,Bug
2018-11-09T05:51:28.000-0500,DROOLS-3248,Done,"At the moment the _default_ {{QName}} is {{string}} however [~tirelli] has requested it be changed to {{Any}}. Please also note that the the _name_ for {{Any}} should be ""*A*ny"" and not ""*a*ny"" as we currently have. See:

https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-dmn/kie-wb-common-dmn-api/src/main/java/org/kie/workbench/common/dmn/api/property/dmn/QName.java#L39

https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-dmn/kie-wb-common-dmn-api/src/main/java/org/kie/workbench/common/dmn/api/property/dmn/types/BuiltInType.java#L33
  ",Blocker,Daniel José dos Santos,,2018-11-06T04:11:09.000-0500,[DMN Designer] QName: Default to be 'Any' not 'string',Resolved,bug,Bug
2018-11-09T07:52:20.000-0500,DROOLS-3262,Done,"When the user persists the following diagram:
 !diagram.png|thumbnail! 

..with the following Decision Table:
 !dtable.png|thumbnail! 

..select the ""Can drink beer?"" header, and set no output:
 !no-outputs.png|thumbnail! 

..the persisted value will be something like this:
{quote}
      <dmn:output id=""_E9E45B42-9506-4D66-BAAF-44B161590B43"" name=""output-1"" typeRef=""string"">
        <dmn:outputValues id=""_F02DC5E5-ECCE-4B3A-87A8-9CDC74A7F81A"">
          <dmn:text></dmn:text>
        </dmn:outputValues>
        <dmn:defaultOutputEntry id=""_A7CFCB22-3D05-4CDB-925B-D4FD52F3D018"" typeRef=""string"">
          <dmn:text></dmn:text>
        </dmn:defaultOutputEntry>
      </dmn:output>
{quote}

..and the expected behaviour is to not have the tags `dmn:outputValues` and `dmn:defaultOutputEntry` when the value for them is empty, like this:
{quote}
      <dmn:output id=""_E9E45B42-9506-4D66-BAAF-44B161590B43"" name=""output-1"" typeRef=""string"">
      </dmn:output>
{quote}",Blocker,Matteo Mortari,,2018-11-06T14:15:10.000-0500,[DMN Designer] The `defaultOutputValue` and the `outputValue` are being persisted when the value is empty in the UI,Resolved,bug,Bug
2018-11-09T07:52:40.000-0500,DROOLS-3281,Done,"h2. Manual acceptance test
- Decision Table expression with single output, no name stored (/)
- Decision Table expression with multiple outputs, name stored (/)
",Blocker,Matteo Mortari,,2018-11-08T08:47:21.000-0500,[DMN Designer] The output name is valorized for single output decision table,Resolved,bug,Bug
2018-11-09T07:20:50.000-0500,DROOLS-3259,Done,"When the user persists the following diagram:
 !diagram.png|thumbnail! 

..with the following Decision Table:
 !dtable.png|thumbnail! 

..the {{inputData}} and {{variable}} tags don't have the same {{name}} value in the attribute {{name}}, see:
{quote}<dmn:inputData id=""_67412B2F-A661-48C6-971C-6E184A519592"" name=""Country"">
    <dmn:variable id=""_8F4476AB-1BEB-4FDB-8192-73BB0A520236"" name="""" typeRef=""string""></dmn:variable>{quote}

The expected behaviour is this:
{quote}<dmn:inputData id=""_67412B2F-A661-48C6-971C-6E184A519592"" name=""Country"">
    <dmn:variable id=""_8F4476AB-1BEB-4FDB-8192-73BB0A520236"" name=""Country"" typeRef=""string""></dmn:variable>{quote}",Blocker,Guilherme Gomes,,2018-11-06T13:15:08.000-0500,[DMN Designer] `inputData` and `variable` must have the same name value,Resolved,bug,Bug
2018-11-09T07:20:56.000-0500,DROOLS-3250,Done,"The properties of decision has two sections with *Name* property. One general *Decision Name* and one *Information Item Name*.

The second *Information Item Name* reflects in <variable/> tag of the backing xml file. Its value important for the runtime.

I think we should solve this issue doing two actions:
- Make *Information Item Name* readonly
- Set *Information Item Name* automatically according to *Decision Name*",Blocker,Guilherme Gomes,,2018-11-06T04:53:45.000-0500,[DMN Designer] Information Item name is empty by default,Resolved,bug,Bug
2018-11-09T05:59:44.000-0500,DROOLS-2569,Done,"When attaching connectors to different magnets (other than ""centre"") re-opening a DMN diagram resets connections to the ""centre"" magnet. IDK if this is an issue with writing magnet positions to the XML or recreating the connections from the XML.

[~tari_manga] could you please liaise with [~roger600] to understand where the issue is?

h2. PR Acceptance test
In DMN Designer, change magnet position in:
- Source node
-- BKM(/), BKS (/), Decision(/), Input (/)
- Target node
-- BKM(/), BKS(/), Decision (/), Annotation (/)",Major,Matteo Mortari,,2018-05-21T05:11:55.000-0400,[DMN Designer] Marshalling of magnet positions,Resolved,bug,Bug
2018-11-12T04:05:25.000-0500,DROOLS-3289,Done,"If the default output value of decision table is set, its {{typeRef}}  doesn't respect its parent {{typeRef}}, example below.

{code:xml}
<dmn:output id=""_8023A5BD-71A4-4C3F-A5B9-B62D5BC34345"" name=""output-1"" typeRef=""number"">
        <dmn:outputValues id=""_C9AEC57C-1F1E-4115-9449-F287F010EA07"">
          <dmn:text>456</dmn:text>
        </dmn:outputValues>
        <dmn:defaultOutputEntry id=""_36F46818-D5F9-4F58-A758-73B853EC418B"" typeRef=""string"">
          <dmn:text>123</dmn:text>
        </dmn:defaultOutputEntry>
      </dmn:output>
...
{code}",Major,Michael Anstis,,2018-11-09T02:05:11.000-0500,[DMN Designer] Default Output Value typeRef,Resolved,bug,Bug
2018-11-09T06:03:25.000-0500,DROOLS-3251,Done,The *Question* and *Allowed answers* properties are not marshalled.,Minor,Matteo Mortari,,2018-11-06T04:55:57.000-0500,[DMN Designer] Question and Allowed answers are not marshalled,Resolved,bug,Bug
2018-11-09T04:29:21.000-0500,DROOLS-3268,Done,"On the Data Types dialog, creating a type/field called ""Number"" with an uppercase ""N"" should be allowed. FEEL/DMN is type sensitive, and only ""number"" lower case is reserved word. Check if the problem also happens for other types, except for ""Any"" and ""Null"" that have an upper case initial.",Major,Daniel José dos Santos,,2018-11-07T04:37:30.000-0500,[DMN Designer] Data-types: Check for use of built-in-type should be case sensitive,Resolved,bug,Bug
2018-11-09T03:03:58.000-0500,DROOLS-3245,Done,"The ""<< Back to XYZ"" link text nor ""Decision Navigator"" node label update when the ""Name"" of a top-level {{DomainObject}} is changed via the ""Properties Panel"". This does not appear related to either [JBPM-7166|https://issues.jboss.org/browse/JBPM-7166] or [DROOLS-3231|https://issues.jboss.org/browse/DROOLS-3231]  but rather I suspect _masked_ by the cause of JBPM-7166. I tested with the latter reverted locally and the issue reported here remained.",Major,Michael Anstis,,2018-11-05T09:42:57.000-0500,"[DMN Designer] Updating ""Name"" from Properties Panel does not update '<< Back to XYZ' link or Decision Navigator ",Resolved,bug,Bug
2018-11-08T06:21:21.000-0500,DROOLS-3278,Done,"When there is only one data object defined in the project, none is shown in the right panel",Major,Gabriele Cardosi,,2018-11-08T03:56:44.000-0500,No DO shown on right panel if only one is defined in project,Closed,bug,Bug
2018-11-09T03:38:17.000-0500,DROOLS-3279,Done,None,Blocker,Matteo Mortari,,2018-11-08T05:14:51.000-0500,DMN DRGElement typeRef to allow FEEL Any,Resolved,bug,Bug
2018-11-08T06:34:17.000-0500,DROOLS-3082,Done,Sometimes during editing header cells they remains in edit mode unexpectedly. ,Minor,Gabriele Cardosi,,2018-10-05T09:27:04.000-0400,Header Edit Mode remains active,Closed,bug,Bug
2018-11-09T02:08:01.000-0500,DROOLS-3261,Done,"When the user persists the following diagram:
 !diagram.png|thumbnail! 

..with the following Decision Table:
 !dtable.png|thumbnail! 

.. select the ""Can drink beer?"" header, set the default value as {{false}} and the file:
{quote}
        <dmn:outputValues id=""_A117F7DC-508C-4132-8F5F-8F8F2B0B489F"">
          <dmn:text>false</dmn:text>
        </dmn:outputValues>
        <dmn:defaultOutputEntry id=""_A4881AD1-7EDC-4B4D-AC00-078626795BA7"" typeRef=""string"">
          <dmn:text></dmn:text>
        </dmn:defaultOutputEntry>
{quote}

..and the expected behaviour is to persist the value {{false}} in the {{defaultOutputEntry}}.",Blocker,Michael Anstis,,2018-11-06T14:03:28.000-0500,[DMN Designer] The `defaultOutputValue` is being persisted as an `outputValue`,Resolved,bug,Bug
2018-11-06T04:48:45.000-0500,DROOLS-3229,Done,Ought to align to interpreted version.,Major,Matteo Mortari,,2018-11-02T05:05:53.000-0400,"DMN compilation of DT with empty inputValues, outputValues, defaultOutputEntry NPEs",Resolved,bug,Bug
2018-11-06T08:52:14.000-0500,DROOLS-3148,Done,None,Blocker,Daniel José dos Santos,,2018-10-16T04:28:37.000-0400,[DMN Designer] Graph view is taking the Name from the InformationItem and not the Decision,Resolved,bug,Bug
2018-11-06T08:51:56.000-0500,DROOLS-3227,Done,"The decision table output column data type is not stored, if the decision table was generated according to some input data. 

An example of such table is attached  [^auto.dmn] . This table was created in steps below:
- Create new DMN diagram
- Add an Input Data node : *applicant*
- Add a Decision node: *applicant score*
- Connect them
- Define new data type: *tApplicant*.
-- lang:string (Constraints: ""c"", ""java"")
-- open source: boolean
- Set *applicant* node data type as *tApplicant*
- Set *applicant score* node data type as *number*
- Open expression editor for *applicant score* node
- Set its top level expression as Decision Table
- Save and download DMN model
- It will be like the attached

{code:xml}
      <dmn:output id=""_E6C7E5E6-45C5-4FC2-A37B-69806046893F"" name=""output-1"" typeRef=""string"">
        <dmn:outputValues id=""_B473BAB4-521D-4FD9-88BC-C28CD497F03A"">
          <dmn:text></dmn:text>
        </dmn:outputValues>
        <dmn:defaultOutputEntry id=""_85BF133E-380C-4F0E-9E2A-0C5C6493F6B4"" typeRef=""string"">
          <dmn:text></dmn:text>
        </dmn:defaultOutputEntry>
      </dmn:output>
{code}",Critical,Michael Anstis,,2018-11-02T03:53:27.000-0400,[DMN Designer] Decision table output data type is not stored if decision table is generated according to input data,Resolved,bug,Bug
2018-11-06T08:07:58.000-0500,DROOLS-3154,Done,"This item contains a list of general UI bugs to be fixed:
-Use grey borders for all the grid and not only for the header- Fixed in DROOLS-2684
-Add some padding to the cells of the grid- Fixed in DROOLS-2684
Add some padding to right panel the tab titles
-Remove scrolling bar from right panel- Fixed in DROOLS-3170
Review expression editor component HTML/CSS (paddings, indents, etc)
Review right panel padding (now it is hardcoded)
Use text area inputs instead of text box for inline editing
-Reduce the width of Index column- Fixed in DROOLS-3167",Major,Daniele Zonca,,2018-10-16T11:25:27.000-0400,Minor UI improvements/bugfixes for Scenario,Resolved,bug,Bug
2018-11-05T13:38:03.000-0500,DROOLS-3228,Done,"Hello,

A while ago I've created a test project to compare the different possibilities of session types and session polling/reusing. After an update to Drools 7.13.0.Final I found a performance improvement but also three issues. I would summarize all issues in this ticket, let me know if you have a different preference. I have also created a PR which helped me to continue with my tests: https://github.com/kiegroup/drools/pull/2135

*1. Incorrect results*
If you clone the project and execute [StatefulDroolsEngineUnitTest.java|https://github.com/liebharc/JavaRules/blob/master/src/test/java/com/github/liebharc/JavaRules/StatefulDroolsEngineUnitTest.java] then you will see test failures with 7.13.0.Final while the tests pass with 7.12.0.Final. I could trace the issue back to a recent change in ConcurrentNodeMemories. If I revert this change on a snapshot build of 7.14.0 then the tests pass again. 

*2. Reset doesn't bring a disposed session back to life*
With 7.12.0.Final it was possible to bring a disposed session back to life by calling the reset method. In 7.13.0.Final that doesn't work anymore because the checkAlive validation then fails. 
The new session pools seem to deal with that by just setting the alive flag back to true if a session is reused. While the new session pools are great, we would like to stick with our existing and simpler session pooling which makes use of the reset method. So would it be possible to set the alive flag to true on a session reset?

*3. A stateless sequential session doesn't execute any rules after a reset*

https://github.com/liebharc/JavaRules/blob/master/src/test/java/com/github/liebharc/JavaRules/StatelessSequentialDroolsEngineUnitTest.java fails as a stateless sequential session skips all adds to its agenda group queue after the session has been reset.",Major,Mario Fusco,,2018-11-02T04:34:27.000-0400,Rules don't produce the correct result anymore after a session reset,Resolved,bug,Bug
2018-11-05T09:16:48.000-0500,DROOLS-3231,Done,"When undo'ing the change to the {{Name}} on a top-level grid a stack-overflow occurs.

h2. Manual Acceptance test
Undo renaming of
- Literal Expression (/)
- Decision table (/)
- Input Column (/)
- Output Column (/)
- Context (/)
- Context entry (/)
- Function (/)
- Function Parameter (/)
- Relation (/)
- Relation Column (/)
- Invocation (/)
- Invocation Parameter (/)",Critical,Michael Anstis,,2018-11-02T08:06:41.000-0400,[DMN Designer] Stack overflow when undo'ing Name change in top-level grid ,Resolved,bug,Bug
2018-11-02T04:52:32.000-0400,DROOLS-3225,Done,"Issue spotted during DROOLS-3214, however probably not related.

If decision table output data type is changed, the change is not reflected in the xml.

Please follow my steps:
- Create new DMN diagram
- Add a decision node
- Set the decision node top level expression as a decision table
- Double click on Output header cell
- Select boolean lets say
- Save the diagram

Check the source, there will be still stored string output data type, like below:
{code:xml}
<dmn:decisionTable id=""_DE6CDA18-99D1-4259-9F6D-825209DF7DE8"" typeRef=""string"" hitPolicy=""ANY"" preferredOrientation=""Rule-as-Row"">
      <dmn:input id=""_EB7B7C02-4131-468C-B1B1-023C39045B66"">
        <dmn:inputExpression id=""_C72A9C94-130C-4BA5-A529-49BAE217DDFF"" typeRef=""string"">
          <dmn:text>input-1</dmn:text>
        </dmn:inputExpression>
        <dmn:inputValues id=""_1EC58DD6-21EB-4822-A333-581363BC325B"">
          <dmn:text></dmn:text>
        </dmn:inputValues>
      </dmn:input>
      <dmn:output id=""_81248A6E-0239-404A-B891-C7C0BEE6B501"" name=""output-1"" typeRef=""string"">
        <dmn:outputValues id=""_26301186-9EB2-43E8-B6F8-458361E99B45"">
          <dmn:text></dmn:text>
        </dmn:outputValues>
        <dmn:defaultOutputEntry id=""_EAC89F66-3B9E-4781-B670-1282975F4F1E"" typeRef=""string"">
          <dmn:text></dmn:text>
        </dmn:defaultOutputEntry>
      </dmn:output>
      <dmn:rule id=""_EC0CEE6B-E4D5-4DE2-9EE5-86C955933B4E"">
        <dmn:inputEntry id=""_91AA6110-0A85-4C95-B0B3-D1B084CB0089"">
          <dmn:text>""you are right""</dmn:text>
        </dmn:inputEntry>
        <dmn:outputEntry id=""_6FACD1CE-8301-413E-8C77-F04AD71B3C78"" typeRef=""string"">
          <dmn:text>true</dmn:text>
        </dmn:outputEntry>
      </dmn:rule>
    </dmn:decisionTable>
  </dmn:decision>
{code}

But the UI is like:
 !Screenshot from 2018-11-01 10-59-08.png|thumbnail! 
",Blocker,Michael Anstis,,2018-11-01T05:59:44.000-0400,[DMN Designer] Decision table output data type is not stored,Resolved,bug,Bug
2018-11-02T05:59:48.000-0400,DROOLS-3224,Done,"Autolayout is not applied when [asset|https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-core/src/test/resources/org/kie/dmn/core/hardcoded_function_definition.dmn] uploaded

h2. Manaul acceptance test
Autolayout is applied:
- for asset linked above (/)
- for  [^DMCommunity Challenge - March 2017.dmn] (/)
- For 1.2 based assets (/)
",Critical,Daniel José dos Santos,,2018-11-01T05:51:45.000-0400,[DMN Designer] Autolayout is not applied for 1.1 based DMN models,Resolved,bug,Bug
2018-11-02T06:37:33.000-0400,DROOLS-3219,Done,"The nodes can't be added to the DMN diagram, that was imported into workbench and didn't include layout information.

h2. Acceptance test
- Steps to reproduce fixed (/)
- Autolayout is applied when [asset|https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-core/src/test/resources/org/kie/dmn/core/hardcoded_function_definition.dmn] upleaded (/)
",Major,Daniel José dos Santos,,2018-11-01T01:24:36.000-0400,[DMN Designer] Nodes can not be added once autolayout applied,Resolved,bug,Bug
2018-11-02T02:42:42.000-0400,DROOLS-3220,Cannot Reproduce,"User is unable to invoke edit mode for context cells. Other expression types seems to work fine.

Spotted during DROOLS-3214 review, however don't think it is related.

h2. Acceptance test
Invoke edit mode of regular cell
- Literal
- Dec. Table
- Function
- Relation
- Invocation
- Context

Invoke edit mode of header cell - where applicable
- Literal
- Dec. Table
- Function
- Relation
- Invocation
- Context",Blocker,Daniel José dos Santos,,2018-11-01T02:55:46.000-0400,[DMN Designer] [Edge] Unable to edit context cell,Closed,bug,Bug
2018-11-02T08:55:49.000-0400,DROOLS-3226,Done,"Function header cell can be selected, but user can't set its properties in PropertiesPanel if the Function is the top level Expression of the BKM node. See below comparision of Function as the top level Expression. Once in decision node, then in BKM node.

h3. Decision node
 !Screenshot from 2018-11-01 13-25-03.png|thumbnail! 

h3. BKM node
 !Screenshot from 2018-11-01 13-25-21.png|thumbnail! 

h2. Manual Acceptance test
- Select Expression Header cell of BKM node (/)
- Change Properties via properties panel (/)
- Try to clear BKM node definition, shouldn't be possible (/)
- -Build and Deploy- decided not to check due to current issues on touched code
- -Runtime- decided not to check due to current issues on touched code",Major,Michael Anstis,,2018-11-01T08:28:18.000-0400,[DMN Designer] Function Header Cell in BKM,Resolved,bug,Bug
2018-11-02T10:51:57.000-0400,DROOLS-3230,Done,"This change [1] introduced the use of Path.toString() method, which returns OS dependent path string. However MemoryFileSystem works just with ""/"" path separators, so the compilation cannot find generated source files on Windows, because the paths contain ""\"" instead of ""/"". 

[1] https://github.com/kiegroup/drools/pull/2117/files#diff-10fdf1615822ed09a09cb551110c1921R118",Critical,Tibor Zimanyi,,2018-11-02T06:55:09.000-0400,DMN - Generating sources for executable model uses wrong paths on Windows,Resolved,bug,Bug
2018-11-01T11:25:46.000-0400,DROOLS-3215,Done,"When this test [1] is put into MemoryFileSystemTest and run, it ends with NullPointerException. The thing that triggers it is creating the folder with getFolder() method. 

[1] https://gist.github.com/baldimir/d6bac6de418eba1252e2d20cebaaad45",Major,Mario Fusco,,2018-10-31T09:58:52.000-0400,Copying an empty folder in MemoryFileSystem fails with NPE,Resolved,bug,Bug
2018-11-01T12:04:52.000-0400,DROOLS-3217,Done,"When a DT is inside a BKM or nested in an expression, the name lookup looks wrong and fails to locate the correct class.
Initial assessment it looks like a misalignment of name resolution algo between JIT compilation and compile-time-compilation",Major,Matteo Mortari,,2018-10-31T15:44:40.000-0400,DMN compilation via kie-maven-plugin wrong lookup at runtime,Resolved,bug,Bug
2018-11-01T01:02:19.000-0400,DROOLS-3211,Done,"Following the discussion on https://issues.jboss.org/browse/DROOLS-3038?focusedCommentId=13654791&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13654791 (opening a 1.1 file, saving, leading to lots of 'Unable to resolve type reference' errors for built-in types.

On investigation it appears a lot of our backend marshaller tests are also reporting the error following conversion from 1.1 to 1.2. ",Blocker,Matteo Mortari,,2018-10-31T07:09:55.000-0400,[DMN Designer] Marshaller: Conversion from 1.1 to 1.2 leads to 'Unable to resolve type reference' errors,Resolved,bug,Bug
2018-10-31T09:53:56.000-0400,DROOLS-3110,Done,"I created the  [^a1.dmn]  model using features of DROOLS-3024, however then I am not able to deploy the created dmn model, the attached  [^error.log] appears in server log.

h2. Another steps to reproduce
Run the code snippet below
{code:java}
final DMNRuntime runtime = DMNRuntimeUtil.createRuntime(""a2.dmn"", this.getClass() );
final DMNModel dmnModel = runtime.getModel(""https://github.com/kiegroup/drools/kie-dmn"", ""a2"" );
assertThat( DMNRuntimeUtil.formatMessages( dmnModel.getMessages() ), dmnModel.hasErrors(), is( false ) );
{code}",Blocker,Daniel José dos Santos,,2018-10-11T07:27:10.000-0400,[DMN Designer] Unable to deploy model with custom data type,Resolved,bug,Bug
2018-10-31T09:53:24.000-0400,DROOLS-3038,Done,"{{12:53:34,884 ERROR [org.kie.dmn.core.compiler.DMNCompilerImpl] (EJB default - 3) Unable to resolve type reference 'tNum' on node 'Decision-1'}} is error shown to user after reopening DMN model with used new defined item definition.",Blocker,Daniel José dos Santos,,2018-09-26T06:58:54.000-0400,[DMN Designer] Added type can not be resolved,Resolved,bug,Bug
2018-10-31T09:24:52.000-0400,DROOLS-3111,Done,"The decision table generation according to connected input data nodes fails if some custom input data is connected.

h2. Manual acceptance test
Check when connected input data is of type:
- Built in data type (/)
- Custom data type, just alias for Built in type (?)
-- Defined data type as
--  !Screenshot from 2018-10-31 13-13-54.png|thumbnail! 
-- In decision table shown the built in type
--  !Screenshot from 2018-10-31 13-14-19.png|thumbnail! 
- Custom data type, structure (/)
- Custom data type, structure containing another anonymous structure (/)
- Custom data type, structure containing another top level structure (?)
-- Defined data type as:
--  !Screenshot from 2018-10-31 13-29-03.png|thumbnail! 
-- Generated columns:
--  !Screenshot from 2018-10-31 13-28-43.png|thumbnail! 
- Custom data type, just alias for structure (/)",Major,Michael Anstis,,2018-10-11T07:30:57.000-0400,[DMN Designer] Decision table generation fails if custom input data connected,Resolved,bug,Bug
2018-10-31T08:21:15.000-0400,DROOLS-3122,Done,"The expression specific properties are not shown in the properties panel, if this panel is not expanded before accessing the expression editor.",Minor,Michael Anstis,,2018-10-12T02:13:32.000-0400,[DMN Designer] Properties Panel have to expanded before accessing expression editor,Resolved,bug,Bug
2018-10-31T07:18:34.000-0400,DROOLS-3199,Done,"The user of the DMN Designer has possibility to set properties of expression grid table cell via properties panel. The problem occurs if multiple cells are selected. Then properties panel shows properties bound to last selected cell what is not desired. Properties panel should be empty if multiple cells are selected.

h2. Manual acceptance test
Properties panel is empty if multiple cells (including headers) are selected
- Decision Table (/) - fixed after reviews
--  !Screenshot from 2018-10-30 13-06-22.png|thumbnail! 
-- Same for output columns
- Function (/)
- Context
-- Multiple cells of same entry ==> properties for whole entry (/)
-- Header and context entry (/) - fixed after reviews
--  !Screenshot from 2018-10-30 13-09-10.png|thumbnail! 
- Invocation (/)
- Relation (/) - fixed after reviews
--  !Screenshot from 2018-10-30 13-18-40.png|thumbnail! ",Minor,Michael Anstis,,2018-10-26T10:25:03.000-0400,[DMN Designer] Clear properties panel when multiple cells are selected,Resolved,bug,Bug
2018-10-30T09:01:19.000-0400,DROOLS-3185,Done,"When user changes Decision node top level expression from literal expression to decision table, that decision table misses InputClause columns.

h2. Manual Acceptance Test
Check steps to reproduce, while InputData node has data type
- Built in type (/)
- Custom type that has constraint (/)
- Custom type that is collection (?)
- Custom type that is recursive (/)
- Multiple InputData nodes (/)
- -Multiple input nodes, mixed InputData and Decision- doesn't work, not supported",Major,Michael Anstis,,2018-10-25T08:42:48.000-0400,[DMN Designer] Change Literal Expression to Decision Table,Resolved,bug,Bug
2018-10-30T05:45:08.000-0400,DROOLS-3182,Done,"{code:java}
16:59:13,571 ERROR [org.jboss.msc.service.fail] (ServerService Thread Pool -- 74) MSC000001: Failed to start service jboss.deployment.unit.""ROOT.war"".undertow-deployment: org.jboss.msc.service.StartException in service jboss.deployment.unit.""ROOT.war"".undertow-deployment: java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)
	at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)
	at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:485)
Caused by: java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;
	at org.kie.server.api.marshalling.json.JSONMarshaller.configureMarshaller(JSONMarshaller.java:155)
	at org.kie.server.api.marshalling.json.JSONMarshaller.<init>(JSONMarshaller.java:128)
	at org.kie.server.api.marshalling.BaseMarshallerBuilder.build(BaseMarshallerBuilder.java:43)
	at org.kie.server.api.marshalling.MarshallerFactory.getMarshaller(MarshallerFactory.java:52)
	at org.kie.server.api.marshalling.MarshallerFactory.getMarshaller(MarshallerFactory.java:41)
	at org.kie.server.services.jbpm.JbpmKieServerExtension.registerDefaultQueryDefinitions(JbpmKieServerExtension.java:760)
	at org.kie.server.services.jbpm.JbpmKieServerExtension.init(JbpmKieServerExtension.java:198)
	at org.kie.server.services.impl.KieServerImpl.init(KieServerImpl.java:126)
	at org.kie.server.services.impl.KieServerLocator.<clinit>(KieServerLocator.java:23)
	at org.kie.server.services.Bootstrap.contextInitialized(Bootstrap.java:51)
	at io.undertow.servlet.core.ApplicationListeners.contextInitialized(ApplicationListeners.java:187)
	at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:216)
	at io.undertow.servlet.core.DeploymentManagerImpl$1.call(DeploymentManagerImpl.java:185)
	at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:42)
	at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
	at org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1502)
	at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:250)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService.startContext(UndertowDeploymentService.java:96)
	at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:78)
	... 8 more

16:59:13,586 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (""deploy"") failed - address: ([(""deployment"" => ""ROOT.war"")]) - failure description: {""WFLYCTL0080: Failed services"" => {""jboss.deployment.unit.\""ROOT.war\"".undertow-deployment"" => ""java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;
    Caused by: java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with(Lcom/fasterxml/jackson/databind/AnnotationIntrospector;)Lcom/fasterxml/jackson/databind/SerializationConfig;""}}
{code}
",Major,Mario Fusco,,2018-10-24T13:02:30.000-0400,Kie server on eap72 java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.SerializationConfig.with,Resolved,bug,Bug
2018-10-29T11:12:44.000-0400,DROOLS-3184,Done,"The source of DMN model has same waypoint for edge source and target. If you open the attached  [^a1.dmn] model, there will be:
{code:xml}
<dmndi:DMNEdge id=""dmnedge-_594C4BE1-52D0-4009-9D4F-9960957539FB"" dmnElementRef=""_594C4BE1-52D0-4009-9D4F-9960957539FB"">
        <di:waypoint xmlns:di=""http://www.omg.org/spec/DMN/20180521/DI/"" x=""50"" y=""25""/>
        <di:waypoint xmlns:di=""http://www.omg.org/spec/DMN/20180521/DI/"" x=""50"" y=""25""/>
      </dmndi:DMNEdge>
{code}

However in our designer the edge has different waypoints:
 !Screenshot from 2018-10-25 12-12-20.png|thumbnail! 

In the external modeling tools, the edge is rendered according to real waypoints and this the edge is not visible:
 !image (2).png|thumbnail! 

h2. Manual acceptance test
- Save and reopen diagrams from sections below
- Import to external tool diagrams form sections below

h3. Nodes connected manually
- Default magnet points
- Explicit magnet points

h3. Nodes connected automatically
- Default magnet points
- Explicit magnet points",Blocker,Matteo Mortari,,2018-10-25T06:50:13.000-0400,[DMN Designer] Edge source and target WayPoints are same,Resolved,bug,Bug
2018-10-29T12:13:44.000-0400,DROOLS-3118,Done,Literal Expression specific properties are not shown if the literal expression cell is in Relation or Decision Table.,Major,Michael Anstis,,2018-10-11T11:22:27.000-0400,[DMN Designer] Literal Expression Cell in Decision Table or Relation,Resolved,bug,Bug
2018-10-24T11:21:18.000-0400,DROOLS-3171,Done,"The issue is reproducible for *invocation* and *function* if one of those contains some nested expression editor you can reproduce the issue as:
- Select a cell of that nested editor
- Click to header row of the parent editor
- Blue rectangle outline will be rendered in strange way",Minor,Michael Anstis,,2018-10-23T04:20:28.000-0400,[DMN Designer] Header selection after nested expression cell was selected,Resolved,bug,Bug
2018-10-24T10:33:52.000-0400,DROOLS-3181,Done,"The following error is logged in the server.log file when BPMS is installed on EAP 6.4.21:

{noformat}
ERROR [org.drools.compiler.kie.builder.impl.ClasspathKieProject] (MSC service thread 1-7) Error when reading virtual file from vfs:/home/user/6411/jboss-eap-6.4/standalone/deployments/business-central.war/WEB-INF/lib/drools-pmml-6.5.0.Final-redhat-25.jar/META-INF/kmodule.xml: java.lang.IllegalArgumentException: object is not an instance of declaring class
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_181]
	at org.drools.compiler.kie.builder.impl.ClasspathKieProject.getPathForVFS(ClasspathKieProject.java:426) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.ClasspathKieProject.fixURLFromKProjectPath(ClasspathKieProject.java:371) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.ClasspathKieProject.fetchKModule(ClasspathKieProject.java:141) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.ClasspathKieProject.discoverKieModules(ClasspathKieProject.java:112) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.ClasspathKieProject.init(ClasspathKieProject.java:84) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.<init>(KieContainerImpl.java:141) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieClasspathContainer(KieServicesImpl.java:131) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieClasspathContainer(KieServicesImpl.java:118) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
	at org.drools.compiler.cdi.KieCDIExtension.init(KieCDIExtension.java:90) [drools-compiler-6.5.0.Final-redhat-25.jar:6.5.0.Final-redhat-25]
{noformat}

Does not occur on EAP 6.4.20",Major,Mario Fusco,,2018-10-24T08:09:25.000-0400,"java.lang.IllegalArgumentException: object is not an instance of declaring class"" error in the server.log file when BPMS 6.4.11 is installed on EAP 6.4.21",Resolved,bug,Bug
2018-10-22T12:32:50.000-0400,DROOLS-3165,Done,None,Major,Matteo Mortari,,2018-10-22T04:32:55.000-0400,Various DMN serialization issues,Resolved,bug,Bug
2018-10-23T02:40:23.000-0400,DROOLS-3152,Done,"User can not save DMN diagram if it contains a decision node with *Context* as top level expression.

Spotted during DROOLS-3109 review, however not 100% sure it is the root cause.",Blocker,Matteo Mortari,,2018-10-16T09:07:30.000-0400,[DMN Designer] Context Expression can not be saved,Resolved,bug,Bug
2018-10-18T04:57:24.000-0400,DROOLS-3149,Done,"h2. Acceptance test
On Edge (/), Chrome (/) and Firefox (/)
- Steps to reproduce fixed
- Opposite way, clicking row doesn't show node specific properties",Minor,Michael Anstis,,2018-10-16T04:39:04.000-0400,[DMN Designer] Context top level data type,Resolved,bug,Bug
2018-10-17T06:43:07.000-0400,DROOLS-3117,Done,"If the output data type of Literal Expression is changed, the properties panel is refreshed and Literal Specific properties are not shown more.",Minor,Michael Anstis,,2018-10-11T10:49:19.000-0400,[DMN Designer] Change of output data type refresh properties ,Resolved,bug,Bug
2018-10-17T05:38:09.000-0400,DROOLS-2255,Cannot Reproduce,"The attachments shows DMN diagram before and after saving, it can be seen that node labels moved.",Major,Wagner Lemos,,2018-01-19T06:12:29.000-0500,[DMN designer] Node labels move between savings,Closed,bug,Bug
2018-10-17T08:59:44.000-0400,DROOLS-3132,Done,"Currently engine allow to assign null to ItemDefinition with allowedValues.
But DMN spec mentions:

 !image-2018-10-12-21-56-28-776.png! 

So assigning null to ItemDefinition with allowedValues(not expliciting null) should raise a typeCheck error, either when assigned to InputData, either when assigned to a DRGElement(Decision), with such typeRef.",Major,Matteo Mortari,,2018-10-12T16:03:34.000-0400,DMN assign null to ItemDefinition with allowedValues,Resolved,bug,Bug
2018-10-16T09:22:58.000-0400,DROOLS-3124,Done,"For some click/double click combination (not easy to reproduce) inside a gridcell, it seems that a nested GridCell or gridcellvallue will be created:
in the screenshot it is shown by the empty box inside the cell below do2.mydo1.myint1
",Major,Gabriele Cardosi,,2018-10-12T04:13:12.000-0400,Nested GridCell/GridCellValue,Resolved,bug,Bug
2018-10-16T01:21:04.000-0400,DROOLS-3116,Done,Literal Expression of decision node is not saved.,Blocker,Matteo Mortari,,2018-10-11T10:41:51.000-0400,[DMN Designer] Literal Expression is not saved,Resolved,bug,Bug
2018-10-16T02:29:21.000-0400,DROOLS-2947,Cannot Reproduce,If user changes some item in *Manage Custom Data Types* to *Structure* this change is not stored.,Major,Guilherme Gomes,,2018-08-31T08:17:05.000-0400,[DMN Designer] change to structure data type is not stored,Closed,bug,Bug
2018-10-16T03:52:16.000-0400,DROOLS-3144,Done,"If you configure ""org.drools.core.event.DebugRuleRuntimeEventListener"" in kmodule.xml,

{noformat}
        <ruleRuntimeEventListener type=""org.drools.core.event.DebugRuleRuntimeEventListener""/>
{noformat}

The log is printed with category ""org.kie.api.event.rule.DebugRuleRuntimeEventListener"".

{noformat}
2018-10-15 19:30:33,138 INFO  [org.kie.api.event.rule.DebugRuleRuntimeEventListener] (default task-60) ==>[ObjectDeletedEventImpl: getFactHandle()=[fact 0:1:1715966337:1715966337:1:DEFAULT:NON_TRAIT:...
{noformat}
",Optional,Mario Fusco,,2018-10-15T22:55:51.000-0400,Wrong logger category in DebugRuleRuntimeEventListener,Resolved,bug,Bug
2018-10-11T06:43:16.000-0400,DROOLS-2767,Done,"When running test KieModuleDeploymentHelperTest.testFluentDeploymentHelper on Windows, it fails on last assert about directories. This is because the test uses a temp file, which directory is OS dependent [1].

[1] https://github.com/kiegroup/drools/blob/e175b21cbef0ca8651c77338130ec24818dbe5e3/kie-ci/src/test/java/org/kie/api/builder/helper/KieModuleDeploymentHelperTest.java#L131",Major,Tibor Zimanyi,,2018-07-19T08:23:50.000-0400,Test KieModuleDeploymentHelperTest.testFluentDeploymentHelper fails on Windows,Resolved,bug,Bug
2018-10-10T04:48:51.000-0400,DROOLS-3073,Done,"Step to reproduce:
- Create a Data Object ""Object1"" in a specific package (i.e. com.myspace.myproject)
- Create a Test Scenario (Preview) ""Test1"" in a different package (i.e. com.myspace)
- Use Data Objects tab to import ""Object1"" to ""Test1""
- Reload the asset and map a field of ""Object1"" to a column
- Fill ""Test1"" with valid values
- Run the scenario

Result: Impossible to load class com.myspace.Object1

Minor bug: if ""Test1"" has been create in default package the error that you get is ""Impossible to load class *.*Object1"" so it should be impossible to create the asset into default package or it should consider it to avoid ""."" symbol at the beginning",Major,Gabriele Cardosi,,2018-10-03T09:45:39.000-0400,Wrong full package if you use classes from another folder ,Resolved,bug,Bug
2018-10-08T10:51:23.000-0400,DROOLS-3087,Done,None,Major,Matteo Mortari,,2018-10-08T08:14:38.000-0400,DMN Validation of DecisionService referencing a missing import,Resolved,bug,Bug
2018-10-08T08:47:28.000-0400,DROOLS-3080,Done,"When a Spreadsheet (xls) has CONDITION columns like:
- The first column doesn't have Fact (e.g. accumulate(...))
- The second column has Fact (e.g. $p:Person(...))
(See attached LhsOrder.xls)

, SpreadsheetCompiler generates a DRL with inverse order in LHS.
{noformat}
rule ""LhsOrder_11""
	when
		$p:Person(name == ""John"", age == $max)
		accumulate(Person(name == ""John"", $a : age); $max:max($a))
	then
		System.out.println(""hello, "" + $p.getName());
end

{noformat}",Major,Mario Fusco,,2018-10-05T03:48:53.000-0400,SpreadsheetCompiler generates wrong LHS order,Resolved,bug,Bug
2018-10-08T11:51:26.000-0400,DROOLS-2133,Done,"Please reference test {{testGuardAndRunBack}}

{code:java}
    public static class MainHouseUnit implements RuleUnit {

        private DataSource<Date> now;
        private DataSource<String> part;
        private DataSource<Boolean> switch1;

        public MainHouseUnit() {
            super();
        }

        public DataSource<Date> getNow() {
            return now;
        }

        public DataSource<String> getPart() {
            return part;
        }

        public DataSource<Boolean> getSwitch1() {
            return switch1;
        }

    }

    public static class DayPartUnit implements RuleUnit {

        private DataSource<Date> now;
        private DataSource<Date> aScopedDS;
        private DataSource<String> part;

        public DayPartUnit() {
            super();
        }

        public DataSource<Date> getNow() {
            return now;
        }

        public DataSource<String> getPart() {
            return part;
        }

        public DataSource<Date> getaScopedDS() {
            return aScopedDS;
        }

    }

    public static class SwitchUnit implements RuleUnit {

        private DataSource<String> part;
        private DataSource<Boolean> switch1;

        public SwitchUnit() {
            super();
        }

        public DataSource<String> getPart() {
            return part;
        }

        public DataSource<Boolean> getSwitch1() {
            return switch1;
        }

    }

    private KieBase kieBaseMainGuardSubunitRunBackToMain(boolean currentStyle) {
        // use ""hammer"" approach with external multiple call to fire, or ""drools.run()"" approach in rules.
        System.out.println(""Running with style: "" + currentStyle);
        String drl1 = ""package org.drools.compiler.integrationtests\n"" +
                      ""unit "" + getCanonicalSimpleName(MainHouseUnit.class) + ""\n"" +
                      ""import "" + DayPartUnit.class.getCanonicalName() + ""\n"" +
                      ""import "" + SwitchUnit.class.getCanonicalName() + ""\n"" +
                      ""rule GuardDayPartUnit when\n"" +
                      ""    Object() from now \n"" +
                      ""    not( String() from part ) \n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Guarding DayPartUnit\"");\n"" +
                      ""    drools.guard(DayPartUnit.class);\n"" +
                      ""end\n"" +
                      ""rule GuardSwitchUnit when\n"" +
                      ""    String() from part \n"" +
                      ""    not( Boolean() from switch1 ) \n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Guarding SwitchUnit\"");\n"" +
                      ""    drools.guard(SwitchUnit.class);\n"" +
                      ""end\n"";

        String drl2 = ""package org.drools.compiler.integrationtests\n"" +
                      ""unit "" + getCanonicalSimpleName(DayPartUnit.class) + ""\n"" +
                      ""import "" + MainHouseUnit.class.getCanonicalName() + ""\n"" +
                      ""rule doDayPartUnit when\n"" +
                      ""    $n : Object() from now \n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Inside DayPartUnit: \""+$n);\n"" +
                      ""    part.insert(\""Morning\"");\n"" +
                      (currentStyle ? ""//"" : """") + "" drools.run(MainHouseUnit.class);\n"" +
                      ""end\n"";

        String drl3 = ""package org.drools.compiler.integrationtests\n"" +
                      ""unit "" + getCanonicalSimpleName(SwitchUnit.class) + ""\n"" +
                      ""import "" + MainHouseUnit.class.getCanonicalName() + ""\n"" +
                      ""rule doSwitchUnit when\n"" +
                      ""    $n : String() from part \n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Inside SwitchUnit: \""+$n);\n"" +
                      ""    switch1.insert(true);\n"" +
                      (currentStyle ? ""//"" : """") + "" drools.run(MainHouseUnit.class);\n"" +
                      ""end\n"";

        KieBase kbase = new KieHelper().addContent(drl1, ResourceType.DRL)
                                       .addContent(drl2, ResourceType.DRL)
                                       .addContent(drl3, ResourceType.DRL)
                                       .build();

        return kbase;
    }

    @Test
    public void testMainGuardSubunitRunBackToMain_usingHammerStyle() throws Exception {

        KieBase kbase = kieBaseMainGuardSubunitRunBackToMain(true);
        RuleUnitExecutor executor = RuleUnitExecutor.create().bind(kbase);

        executor.newDataSource(""now"", LocalDateTime.now());
        executor.newDataSource(""part"");
        executor.newDataSource(""aScopedDS"");
        DataSource<Boolean> switch1 = executor.newDataSource(""switch1"");

        RuleUnit adultUnit = new MainHouseUnit();
        executor.run(adultUnit);

        // need a second, ""hammer"" run.
        executor.run(adultUnit);

        assertEquals(true, switch1.iterator().next());
    }

    @Test
    public void testMainGuardSubunitRunBackToMain_usingRunStyle() throws Exception {

        KieBase kbase = kieBaseMainGuardSubunitRunBackToMain(false);
        RuleUnitExecutor executor = RuleUnitExecutor.create().bind(kbase);

        executor.newDataSource(""now"", LocalDateTime.now());
        executor.newDataSource(""part"");
        executor.newDataSource(""aScopedDS"");
        DataSource<Boolean> switch1 = executor.newDataSource(""switch1"");

        RuleUnit adultUnit = new MainHouseUnit();
        executor.run(adultUnit); // FAILs with trying to lookup method getaScopedDS() on the MainHouseUnit (which is not correct unit). 

        // does NOT need a second, ""hammer"" run.

        assertEquals(true, switch1.iterator().next());
    }

    public static class EmptyUnit implements RuleUnit {

        public EmptyUnit() {
            // no-args constructor.
        }
    }

    public static class StringDSUnit implements RuleUnit {

        private DataSource<String> strings;

        public StringDSUnit() {
            // no-args constructor.
        }

        public DataSource<String> getStrings() {
            return strings;
        }

    }

    @Test
    public void testGuardAndRunBack() {
        String drl1 = ""package org.drools.compiler.integrationtests\n"" +
                      ""unit "" + getCanonicalSimpleName(EmptyUnit.class) + ""\n"" +
                      ""import "" + StringDSUnit.class.getCanonicalName() + ""\n"" +
                      ""rule RGuard when\n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Guarding StringDSUnit\"");\n"" +
                      ""    drools.guard(StringDSUnit.class);\n"" +
                      ""end\n"";

        String drl2 = ""package org.drools.compiler.integrationtests\n"" +
                      ""unit "" + getCanonicalSimpleName(StringDSUnit.class) + ""\n"" +
                      ""import "" + EmptyUnit.class.getCanonicalName() + ""\n"" +
                      ""rule RGoBack when\n"" +
                      ""then\n"" +
                      ""    System.out.println(\""Inside StringDSUnit: \"");\n"" +
                      ""    drools.run(EmptyUnit.class);\n"" +
                      ""end\n"";

        KieBase kbase = new KieHelper().addContent(drl1, ResourceType.DRL)
                                       .addContent(drl2, ResourceType.DRL)
                                       .build();
        RuleUnitExecutor executor = RuleUnitExecutor.create().bind(kbase);

        executor.newDataSource(""strings"", ""abc"", ""xyz"");

        RuleUnit adultUnit = new EmptyUnit();
        executor.run(adultUnit); // FAILs with trying to lookup method getStrings() on the EmptyUnit (which is not correct unit). 

    }
{code}
",Major,Mario Fusco,,2017-11-14T07:39:29.000-0500,Rule Unit unbind using `run` causes wrong lookup of DS on the wrong unit,Resolved,bug,Bug
2018-10-10T02:40:33.000-0400,DROOLS-2954,Done,"If user changes data type in *manage custom data type* dialog, there will remain selectbox shadow rendered. See the attached picture.",Minor,Daniel José dos Santos,,2018-09-03T06:27:03.000-0400,[DMN Designer] [IE11] Custom data type select box not rendered correctly after change,Resolved,bug,Bug
2018-10-10T02:40:19.000-0400,DROOLS-2953,Done,"If user invokes inline menu in the custom data type dialog and decide to hide it without any action performed, he is unable to do it. The menu remains shown partially. ",Minor,Daniel José dos Santos,,2018-09-03T06:24:19.000-0400,[DMN Designer] [IE11] Custom data type inline menu can not be hidden,Resolved,bug,Bug
2018-10-08T07:53:26.000-0400,DROOLS-3071,Done,None,Major,Edoardo Vacchi,,2018-10-03T03:32:04.000-0400,Some DMN TCK test are not compiling correctly with exec model,Resolved,bug,Bug
2018-10-04T07:03:33.000-0400,DROOLS-2735,Cannot Reproduce,"If user changes function definition in the context entry, while context grid contains multiple entries, then the layout of the context grid is broken.",Minor,Michael Anstis,,2018-07-13T05:33:44.000-0400,[DMN Editor] Function change breaks column layout,Closed,bug,Bug
2018-10-04T05:12:58.000-0400,DROOLS-2758,Done,"When the diagram is cleared, the Decision Navigator stops working. See:
 !demo-bug.gif|thumbnail! 
",Major,Guilherme Gomes,,2018-07-18T14:32:19.000-0400,"[DMN Editor] Decision Navigator - When the diagram is cleared, the Decision Navigator stops working",Resolved,bug,Bug
2018-10-04T04:28:02.000-0400,DROOLS-1669,Done,"The following DRL query passes build and validation in the workbench, but fails at runtime in KIE Server:

{code:java}
query ""questionsKnowledge"" ()
    $question: Question()
    $visible: QuestionVisible(question == $question) or not QuestionVisible(question == $question)
end
{code}

The intent is that $visible may or may not be bound, depending on whether QuestionVisible is present. It looks like this causes an error in FlatQueryResults.(init):

{code:java}

15:59:30.897 ERROR o.k.s.s.d.DroolsKieContainerCommandServiceImpl - Error calling container 'qna2'
java.lang.NullPointerException: null
        at org.drools.core.QueryResultsRowImpl.getFactHandle(QueryResultsRowImpl.java:99) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.QueryResultsRowImpl.getFactHandle(QueryResultsRowImpl.java:95) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.runtime.rule.impl.FlatQueryResults.<init>(FlatQueryResults.java:116) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.command.runtime.rule.QueryCommand.execute(QueryCommand.java:109) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.command.runtime.rule.QueryCommand.execute(QueryCommand.java:39) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:137) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:51) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:254) ~[drools-core-6.5.0.Final.jar:6.5.0.Final]
        at org.kie.server.services.drools.RulesExecutionService.call(RulesExecutionService.java:52) ~[kie-server-services-drools-6.5.0.Final.jar:6.5.0.Final]
        at org.kie.server.services.drools.DroolsKieContainerCommandServiceImpl.callContainer(DroolsKieContainerCommandServiceImpl.java:69) ~[kie-server-services-drools-6.5.0.Final.jar:6.5.0.Final
]
        at org.kie.server.remote.rest.drools.CommandResource.manageContainer(CommandResource.java:72) [kie-server-rest-drools-6.5.0.Final.jar:6.5.0.Final]
{code}




",Major,Mario Fusco,,2017-07-20T16:16:15.000-0400,"NullPointerException in FlatQueryResults.<init> (""left join"" query)",Resolved,bug,Bug
2018-10-03T10:03:22.000-0400,DROOLS-3069,Done,"To enable exec model DMN compilation, property `org.kie.dmn.compiler.execmodel` is used.
However kie-dmn-tck runner is ignoring this property and not passed down while running the TCK test from this module.",Major,Tibor Zimanyi,,2018-10-03T03:25:26.000-0400,DMN kie-dmn-tck runner is not passing down property  `compiler.execmodel`,Resolved,bug,Bug
2018-10-03T06:49:02.000-0400,DROOLS-2522,Done,"The palette css styling has changed. There appeared margins between items in palette, what is probably not problem, however even when user click to this margin (to space between two item in palette) still some palette item is selected. 

h2. Manual Acceptance test

h3. Stunner
- Chrome (/)
- Firefox (/)
- Edge (/)

h3. DMN
- Chrome (/)
- Firefox (/)
- Edge (/)",Major,Michael Anstis,,2018-05-03T02:22:05.000-0400,[DMN Designer] Palette aesthetics,Resolved,bug,Bug
2018-10-01T10:54:47.000-0400,DROOLS-2842,Done,"Opening DMN model with recursive item definition inside causes unexpected error dialog with the attached error inside.

h2. Acceptance test
- Opening model with recursive item definition informs user with reasonable message and opens plain xml editor (/)
- Edit data type in manage custom data type dialog that will lead to Recursive item definitions, save and reopen (/) but missing icon DROOLS-3037",Major,Guilherme Gomes,,2018-08-07T01:41:15.000-0400,[DMN Designer] Recursive item definitions,Resolved,bug,Bug
2018-10-02T03:52:00.000-0400,DROOLS-3044,Done,"Current design of ScenarioGridModel defines new methods to edit data of the grid and keep aligned internal Simulation model and parent ""default"" methods only update the grid (UI).
Implement the opposite logic to have default behaviour with methods that keep synced grid and Simulation and other optional methods that change only the UI.",Major,Gabriele Cardosi,,2018-09-26T09:22:18.000-0400,Update ScenarioGridModel inherited methods to align Simulation model,Resolved,bug,Bug
2018-10-01T09:37:36.000-0400,DROOLS-3055,Done,None,Major,Matteo Mortari,,2018-09-28T10:19:39.000-0400,DMN 1.2 compiler to support type alias,Resolved,bug,Bug
2018-10-01T12:53:38.000-0400,DROOLS-2996,Done,"After drools migration from 6.0.3 to 7.4.1.Final version , modify property in 1st rule not validating conditions in 2nd rule.

Ex: modify($alarm){setEVENTO_EN_TAREA(""YES"")} - In 1st rule then condition

$alarm: ALARMA_ERICSSON_2G(""NO"" == getEVENTO_EN_TAREA()) - When condition in 2nd rule.

If  getEVENTO_EN_TAREA() = ""YES"" then only it should go inside 2nd rule.But here in this case  getEVENTO_EN_TAREA()=""YES"" or ""NO"" - For both cases 2nd rule when condition is matched and going inside then condition.Which is wrong

 Please find the attached sample test project with logs.

Kindly let me know additional information is required.",Major,Mario Fusco,,2018-09-18T07:41:19.000-0400,Existing Rules are not working as expected after migrating the Drools version from 6.0.3 to 7.4.1.Final,Resolved,bug,Bug
2018-10-01T09:17:08.000-0400,DROOLS-3041,Done,"If user clears the diagram and then add new node, he is unable to edit this node.

h2. Acceptance test
h3. New diagram (/)
- Add nodes
- Clear 
- Add new decision node
- Put some expression inside

h3. Non empty existing diagram (/)
- Clear 
- Add new decision node
- Put some expression inside
- Save reopen",Major,Michael Anstis,,2018-09-26T07:23:13.000-0400,[DMN Designer] Can not edit node after diagram cleared,Resolved,bug,Bug
2018-09-27T03:17:11.000-0400,DROOLS-3005,Done,None,Major,Matteo Mortari,,2018-09-20T12:47:48.000-0400,DMN DecisionService having an imported requiredInput,Resolved,bug,Bug
2018-09-26T09:34:37.000-0400,DROOLS-2810,Done,"It is not possible to install kie-dmn OSGI feature. Installation fails with following exception:
Unable to resolve org.kie.dmn.core/7.10.0.201807310901: missing requirement [org.kie.dmn.core/7.10.0.201807310901] osgi.wiring.package; filter:=""(osgi.wiring.package=org.drools.model)""",Major,Jiri Petrlik,,2018-07-31T08:01:03.000-0400,Kie-dmn OSGI feature can not be installed,Resolved,bug,Bug
2018-09-27T03:16:17.000-0400,DROOLS-3026,Done,None,Major,Matteo Mortari,,2018-09-24T11:27:05.000-0400,DMN model get[Decision|Input]by[Name|Id] consistency,Resolved,bug,Bug
2018-09-25T05:45:14.000-0400,DROOLS-3033,Done,"Some modules have been moved to a different position and now are found as ""transitive dependency"" by maven - the enforcer forbid this",Blocker,Gabriele Cardosi,,2018-09-25T02:56:53.000-0400,Fix transitive dependencies declaration inside webapp pom,Resolved,bug,Bug
2018-09-25T14:04:07.000-0400,DROOLS-2950,Done,None,Major,Guilherme Gomes,,2018-08-31T14:19:29.000-0400,[DMN Editor] Custom data-types - ItemDefinitionRecordEngine - The QName instance should lookup the real prefix from the URI,Resolved,bug,Bug
2018-09-25T14:04:16.000-0400,DROOLS-2945,Done,"Opening *manage custom data types dialog* shows warning in the browser console.


{code}
org.kie.workbench.drools.KIEDroolsWebapp-0.js:22170 13:54:49 WARNING [TemplateUtil] Replacing Element type [SPAN] in org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListItemView.html  with type [TD] for type in org.kie.workbench.common.dmn.client.editors.types.listview.DataTypeListItemView
{code}


h3. Acceptance test
Check browser console after *manage custom data types* dialog opening in 
- IE11 (/)
- Chrome (/)
- Firefox (/)
",Minor,Guilherme Gomes,,2018-08-31T08:00:00.000-0400,DMN Designer - opening data type dialog shows warning in browser console,Resolved,bug,Bug
2018-09-24T08:11:18.000-0400,DROOLS-2819,Done,"When user tries to change expression type the Unexpected error appears: *Uncaught exception: Exception caught: Exception caught: (TypeError) : Object doesn't support property or method 'startsWith' Caused by: Exception caught: (TypeError) : Object doesn't support property or method 'startsWith' Caused by: (TypeError) : Object doesn't support property or method 'startsWith'*

h2. Manual Acceptance Test
With DROOLS-2818 check steps to reproduce
- IE (/)
- Chrome (/)
- Firefox (/)",Major,Daniel José dos Santos,,2018-08-01T07:27:19.000-0400,[DMN Designer] [IE11] Expression type change throws an Error,Resolved,bug,Bug
2018-09-24T07:03:06.000-0400,DROOLS-2823,Done,"*list contains([1,2,3,4,5,6], 3)* returns true
*not(list contains([1,2,3,4,5,6], 3))* returns “list contains([1,2,3,4,5,6], 3)”, it should return false

Most likely related to an issue with the parse tree branches",Major,Edoardo Vacchi,,2018-08-01T11:10:28.000-0400,FEEL Parser: refactor `not` unary negation and `not` function call; fix support to wildcard `?`,Resolved,bug,Bug
2018-09-24T05:09:28.000-0400,DROOLS-3013,Duplicate Issue,"Changes in manage custom data type dialog are not reflected into output data-type dialog until user reselects the node on canvas.

h2. Manual Acceptance test
Check removed item definition is not present in output data-type select box
- Was selected as output data type
- Was selected as output data type of other node
- Was not selected as output data-type",Major,Michael Anstis,,2018-09-24T04:56:16.000-0400,[DMN Designer] Output data-type list box is not reloaded,Closed,bug,Bug
2018-09-24T08:50:17.000-0400,DROOLS-3010,Done,"Following merge of PRs for https://issues.jboss.org/browse/DROOLS-2921 and https://issues.jboss.org/browse/DROOLS-2941 Users are unable to add {{InputClause}} columns to {{DecisionTables}}. One PR relied on the {{LiteralExpression}} being set on the clause; whilst the other removed the default creation of a {{LiteralExpression}} on the {{InputClause}}.

h2. Manual Acceptance test
- Check each type of expression editor that support addition of column/rows (/)",Critical,Michael Anstis,,2018-09-21T05:41:49.000-0400,[DMN Designer] Regression - Unable to add InputClause columns,Resolved,bug,Bug
2018-09-21T10:49:11.000-0400,DROOLS-2818,Done,"Rename via context menu throws an error dialog: *An error happened [com.google.gwt.core.client.JavaScriptException: (TypeError) : Object doesn't support property or method 'startsWith']. Do you want to undo the last action?*

Renaming in properties panel works.

h2. Manual Acceptance test
Rename via context dialog
- IE (/)
- Chrome (/)
- Firefox (/)

Rename via properties panel
- IE (/)
- Chrome (/)
- Firefox (/)",Major,Daniel José dos Santos,,2018-08-01T07:25:07.000-0400,[DMN Designer] [IE11] Rename throws an Error,Resolved,bug,Bug
2018-09-20T12:16:49.000-0400,DROOLS-2731,Cannot Reproduce,"We update rules at runtime. Sometimes the system reaches a state when it starts throwing error -

java.lang.ArrayIndexOutOfBoundsException: 1
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:349) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:71) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:887) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1061) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1318) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1309) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293) ~[drools-core-7.6.0.Final.jar:7.6.0.Final]
	at com.adobe.sophia.executionlayer.RuleEngine.client.RuleEngineSession.fireAllRules(RuleEngineSession.java:111) ~[Rule-Engine-0.5.4.jar:?]
	at com.adobe.sophia.executionlayer.RuleEngine.client.Evaluator.evaluate(Evaluator.java:416) ~[Rule-Engine-0.5.4.jar:?]
	at com.adobe.sophia.executionlayer.RuleEngine.client.Evaluator$$FastClassBySpringCGLIB$$cfed13fd.invoke(<generated>) ~[Rule-Engine-0.5.4.jar:?]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204) ~[spring-core-4.3.4.RELEASE.jar:4.3.4.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:720) ~[spring-aop-4.3.4.RELEASE.jar:4.3.4.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157) ~[spring-aop-4.3.4.RELEASE.jar:4.3.4.RELEASE]
	at org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:156) ~[spring-retry-1.2.2.RELEASE.jar:?]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.4.RELEASE.jar:4.3.4.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:655) ~[spring-aop-4.3.4.RELEASE.jar:4.3.4.RELEASE]
	at com.adobe.sophia.executionlayer.RuleEngine.client.Evaluator$$EnhancerBySpringCGLIB$$fb776e74.evaluate(<generated>) ~[Rule-Engine-0.5.4.jar:?]
	at com.adobe.sophia.executionlayer.psdk.RuleEngineEvaluator.RuleEvaluator.evaluate(RuleEvaluator.java:393) ~[RuleEvaluator.class:?]
	at com.adobe.sophia.executionlayer.psdk.RuleEngineEvaluator.CardRuleEvaluator.evaluate(CardRuleEvaluator.java:117) ~[CardRuleEvaluator.class:?]
	at com.adobe.sophia.executionlayer.psdk.content.service.ContentServiceImpl.fetchAllCardsUtilSophia(ContentServiceImpl.java:460) [ContentServiceImpl.class:?]
	at com.adobe.sophia.executionlayer.psdk.content.service.ContentServiceImpl.fetchContentGeneric(ContentServiceImpl.java:268) [ContentServiceImpl.class:?]
	at com.adobe.sophia.executionlayer.psdk.content.service.ContentServiceImpl.fetchContent(ContentServiceImpl.java:219) [ContentServiceImpl.class:?]
	at sun.reflect.GeneratedMethodAccessor269.invoke(Unknown Source) ~[?:?]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_51]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_51]
	at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:200) [cxf-rt-frontend-jaxrs-3.1.3.jar:3.1.3]
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:99) [cxf-rt-frontend-jaxrs-3.1.3.jar:3.1.3]
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:59) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:96) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:308) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121) [cxf-core-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:251) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:234) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:208) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:160) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:171) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:293) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:212) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:650) [tomcat7-servlet-3.0-api.jar:?]
	at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:268) [cxf-rt-transports-http-3.1.3.jar:3.1.3]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303) [catalina.jar:7.0.85]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [catalina.jar:7.0.85]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) [tomcat7-websocket.jar:7.0.85]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241) [catalina.jar:7.0.85]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208) [catalina.jar:7.0.85]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219) [catalina.jar:7.0.85]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:110) [catalina.jar:7.0.85]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498) [catalina.jar:7.0.85]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:169) [catalina.jar:7.0.85]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) [catalina.jar:7.0.85]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116) [catalina.jar:7.0.85]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:445) [catalina.jar:7.0.85]
	at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1115) [tomcat-coyote.jar:7.0.85]
	at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:637) [tomcat-coyote.jar:7.0.85]
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:318) [tomcat-coyote.jar:7.0.85]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_51]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_51]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-coyote.jar:7.0.85]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_51]",Blocker,Mario Fusco,,2018-07-11T13:43:16.000-0400,ArrayIndexOutOfBoundsException when updating the rules at the runtime,Resolved,bug,Bug
2018-09-20T16:31:00.000-0400,DROOLS-2921,Done,"Create a {{Context}} with two {{ContextEntries}}. Set both to be a {{Relation}}. Stack overflow :-(

You can have multiple {{Relation}} in different {{Contexts}} it only happens when within the same {{Context}}.

h2. Manual acceptance test
- Top level context, multiple entries of different kinds (/)
- Nested level context, multiple entries of different kinds (/)",Critical,Michael Anstis,,2018-08-23T10:22:36.000-0400,[DMN Designer] Stack overflow when a Context has two Relations,Resolved,bug,Bug
2018-09-21T10:50:35.000-0400,DROOLS-2820,Done,"After node deletion error dialo appears: *An error happened [com.google.gwt.core.client.JavaScriptException: (TypeError) : Object doesn't support property or method 'startsWith']. Do you want to undo the last action?*

h2. Manual Acceptance test
- Select in decision navigator dock, delete by `delete` key (/)
- Select in decision navigator dock, delete by toolbox trash icon (/)
- Select in decision navigator dock, delete by context trash icon (/)
- Select on canvas, delete by `delete` key (/)
- Select on canvas, delete by toolbox trash icon (/)
- Select on canvas, delete by context trash icon (/)",Major,Daniel José dos Santos,,2018-08-01T07:32:10.000-0400,[DMN Designer] [IE11] Node deletion throws an Error,Resolved,bug,Bug
2018-09-21T10:50:57.000-0400,DROOLS-2821,Done,"Icon for edit expression type is missing.

h2. Manual acceptance test
Check icon present and works on
- IE (/)
- Firefox (/)
- Chrome (/)",Major,Daniel José dos Santos,,2018-08-01T07:35:25.000-0400,[DMN Designer] [IE11] Missing Edit Expression type icon,Resolved,bug,Bug
2018-09-20T05:12:31.000-0400,DROOLS-2941,Done,"Save of an external dmn model in workbench throws an error in a server log.
- Before save:  [^LACE Scoring.dmn] 
- After save:  [^lace-scoring.dmn] 

h2. Acceptance test
- Check saving file created from scratch (x)
-- Description is not saved
-- JBPM-7166
- Check saving external files (/)
-- Used *LACE Scoring*
- Check saving of literal expression in
-- Top level (/)
-- Context (/)
-- Decision table (/)
- Try to add reproducer into community according to staktrace
-- https://github.com/manstis/kie-wb-common/pull/34",Major,Michael Anstis,,2018-08-30T04:33:13.000-0400,[DMN Designer] - Save external DMN model,Resolved,bug,Bug
2018-09-19T04:56:14.000-0400,DROOLS-2956,Done,"If user starts editing data type in *manage custom data type* dialog, then he cancel changes by the cross button, the unexpected error dialog will appear with error inside:
{code}
Uncaught exception: Exception caught: (TypeError) : Object doesn't support property or method 'remove' Caused by: (TypeError) : Object doesn't support property or method 'remove'
{code}

h2. Manual Acceptance test
- Steps to reproduce fixed (/)
-- DROOLS-2995
- Check other browsers works still fine (/)
-- IE, Chrome, Firefox
- No error in browser console (/)",Minor,Jozef Marko,,2018-09-03T06:41:04.000-0400,[DMN Designer] [IE11] Custom data type cancel changes throws an error,Resolved,bug,Bug
2018-09-20T03:19:37.000-0400,DROOLS-2995,Done,"If user edits custom data type with sub items, and he decides to cancel edit mode, the sub items are expanded even if they were collapsed previously.",Optional,Jozef Marko,,2018-09-18T03:32:24.000-0400,[DMN Designer] Cancel edit custom data type expand items,Closed,bug,Bug
2018-09-19T10:42:49.000-0400,DROOLS-2983,Rejected,Unable to checkout [droolsjbpm-integration|https://github.com/kiegroup/droolsjbpm-integration] on Windows 10 with NTFS file system. Filename {{kie-integration-test-coverage/kie-maven-plugin-separate-model-tests/kjar-with-separate-instrumentation-wrapper/src/test/resources/kjar-with-separate-instrumentation/src/main/resources/org/kie/integration/testcoverage/instrumentation}} is too long,Critical,Mario Fusco,,2018-09-10T07:04:13.000-0400,Failed to checkout droolsjbpm-integration project on Windows,Resolved,bug,Bug
2018-09-18T07:20:17.000-0400,DROOLS-2940,Done,"When trying to run all scenarios, and error dialog is produced:

{noformat}
Unable to complete your request. The following exception occurred: org.jboss.weld.exceptions.AmbiguousResolutionException:WELD-001318: Cannot resolve an ambiguous dependency between: - Managed Bean [class org.drools.workbench.screens.scenariosimulation.backend.server.ScenarioRunnerServiceImpl] with qualifiers [@Any @Default], - Managed Bean [class org.drools.workbench.screens.testscenario.backend.server.ScenarioRunnerService] with qualifiers [@Any @Default].
{noformat}

Currently only present in the drools-showcase (from obvious reasons).",Major,Toni Rikkola,,2018-08-29T13:10:32.000-0400,It is not possible to run all scenarios in the old test scenarios.,Resolved,bug,Bug
2018-09-14T04:02:35.000-0400,DROOLS-2592,Done,"When the ScorecardReasonCodeTest.testPointsBelow is run repeatedly, it sometimes fail with following assertion fail [1]. Setting this as critical, because the random fail causes build problems in the CI environment. Same applies for testPointsAbove, testReasonCodesCombination and probably others (I tested those 3 mentioned). 

[1] https://gist.github.com/baldimir/4c8ac4563fd17d13e4646fd60dd3a357",Blocker,Tibor Zimanyi,,2018-05-28T04:31:29.000-0400,PMML - tests in class ScorecardReasonCodeTest fail randomly,Resolved,bug,Bug
2018-09-17T10:24:58.000-0400,DROOLS-2625,Done,"Tests from these test classes from drools-compiler module fail (350 out of 1014 cases) with the executable model:
- AccumulateTest 
- AlphaNetworkModifyTest
- AlphaTest
- AnnotationsTest
- ArrayTest
- BackwardChainingTest

PR with tests: https://github.com/kiegroup/drools/pull/1941",Major,Luca Molteni,,2018-06-07T09:22:29.000-0400,Executable model - AccumulateTest and other tests fail with the model,Resolved,bug,Bug
2018-09-14T09:14:58.000-0400,DROOLS-2535,Done,No need to have the ProjectExplorer when your goal is to edit a single asset. If you want to edit multiple you want the LibraryPerspective.,Major,Toni Rikkola,,2018-05-09T07:05:55.000-0400,Standalone Authoring - Project Explorer should not show up with StandaloneAuthoringPerspective,Resolved,bug,Bug
2018-09-17T07:18:20.000-0400,DROOLS-2816,Done,"Undo of action throws and error dialog with title: *An error happened [com.google.gwt.core.client.JavaScriptException: (TypeError) : Object doesn't support property or method 'startsWith']. Do you want to undo the last action?*

h2. Manual Acceptance test
With DROOLS-2820 test steps to reproduce.
- IE (/)
- Chrome (/)
- Firefox (/)",Major,Daniel José dos Santos,,2018-08-01T07:21:31.000-0400,[DMN Designer] [IE11] Undo throws an Error,Resolved,bug,Bug
2018-09-14T13:04:10.000-0400,DROOLS-2990,Done,None,Blocker,Mario Fusco,,2018-09-14T11:46:14.000-0400,Wrong dsl generation of constraint calling a constructor in executable model,Resolved,bug,Bug
2018-09-17T06:06:48.000-0400,DROOLS-2817,Cannot Reproduce,Download as throws an Unexpected error: *Uncaught exception: (TypeError) : Unable to get property 'ext' of undefined or null reference*,Major,Daniel José dos Santos,,2018-08-01T07:22:56.000-0400,[DMN Designer] [IE11] Download as throws an Error,Closed,bug,Bug
2018-09-13T02:39:30.000-0400,DROOLS-2978,Done,"In Test Scenario editor, when setting EXPECTATION, rule which is defined in XLSX is not listed in selection list of rule like an attached image. 

h2. Acceptance test
- Upload valid XLSX
-- Check scenarios see rules (/)
-- check rule can extend rule (/)
-- check dtable can extend rule (/)
-- No error in server log (/)
-- Convert to gdst (/)",Critical,Toni Rikkola,,2018-09-07T01:30:08.000-0400,Test Scenario: unable to select rule defined in xlsx in EXPECTATION settings,Resolved,bug,Bug
2018-09-12T12:58:42.000-0400,DROOLS-2724,Done,"Having a test case like this [1], the executable model fails with:

""java.lang.AssertionError: [Message [id=1, kieBase=defaultKieBase, level=ERROR, path=r0.drl, line=-1, column=0
   text=Unable to parse left part of expression: aBcde == ""test""]]""

[1] https://gist.github.com/baldimir/7b4067d74d5fe32b0cb2360de14fd344",Major,Mario Fusco,,2018-07-11T09:00:47.000-0400,Executable model cannot handle fieldnames with second letter in uppercase,Resolved,bug,Bug
2018-09-12T03:39:17.000-0400,DROOLS-2972,Done,"Scorecards tests are failing randomly on Jenkins with following stacktrace [1].

[1] https://gist.github.com/baldimir/420bb0d3ca3ce15562a49132a4ad1661",Major,Tibor Zimanyi,,2018-09-06T03:00:43.000-0400,Scorecards tests from drools-scorecards are failing randomly,Resolved,bug,Bug
2018-09-12T03:35:38.000-0400,DROOLS-2987,Done,None,Major,Matteo Mortari,,2018-09-11T16:29:43.000-0400,DMN v1.2 marshaller failing marshalling DecisionService node and dmndi:DMNDecisionServiceDividerLine ,Resolved,bug,Bug
2018-09-11T04:07:06.000-0400,DROOLS-2634,Done,"When running tests from package org.drools.compiler.integrationtests that start with letter C [1] with executable model, many of them fail (~200 out of ~856). PR with failing test classes can be found here [2].

[1] https://github.com/kiegroup/drools/tree/d7ad4fb31647b5295c3cbc0321f0d8f89693ec63/drools-compiler/src/test/java/org/drools/compiler/integrationtests
[2] https://github.com/kiegroup/drools/pull/1947",Major,Mario Fusco,,2018-06-14T06:33:32.000-0400,Executable model: Test classes starting with C from package integrationtests fail with executable model,Resolved,bug,Bug
2018-09-05T13:39:59.000-0400,DROOLS-2363,Done,"'Build & deploy' button is visible to analyst role even if execution server option is restricted, and when clicked on it, will actually create and deploy new container.

Google group thread: https://groups.google.com/forum/#!topic/drools-usage/XsF7bUqYoyk
",Major,Ant Stephenson,,2018-03-05T03:47:35.000-0500,build & deploy button is visible to analyst role even if execution server option is restricted,Closed,bug,Bug
2018-09-04T07:51:53.000-0400,DROOLS-2931,Done,"If DMN node is added via shortcuts (see JBPM-6385), then the node name is not generated automatically. It is not consistent with addition nodes via palette or popup context menu.

h3. Acceptance test
- Node added via palette has autogenerated name
- Node added via popu context menu has autogenerated name
- Node added via keyboard shortcut has autogenerated name",Major,Jozef Marko,,2018-08-28T02:04:38.000-0400,DMN Designer - node names not generated when shortcuts used,Resolved,bug,Bug
2018-09-04T07:53:39.000-0400,DROOLS-2946,Done,"Following merge of https://issues.jboss.org/browse/DROOLS-2590 the Data-type selector is broken (it shows ""Nothing selected"" and selecting an item leads to a cell content to show an encoded form of the {{QName}}).

h3. Acceptance test (/)
- Change selected data type
- Save chenges
- Change changes reflected in source file",Critical,Michael Anstis,,2018-08-31T08:15:35.000-0400,[DMN Designer] Data-types: Data-type selector broken,Resolved,bug,Bug
2018-09-04T00:49:47.000-0400,DROOLS-2949,Duplicate Issue,"User is able to achieve inconsistent state in *Manage custom data type dialog* See the attached picture. There is changed top level itemDefinition *Address* to *Adress111* however the itemDefinition *Person* stil shows it address field as *Adress*, it should be *Adress111* too.",Major,Guilherme Gomes,,2018-08-31T09:05:17.000-0400,[DMN Designer] Change of data type is not propagated to manage dialog,Closed,bug,Bug
2018-09-03T07:12:56.000-0400,DROOLS-2777,Done,"If I set a Date Field in Guided Decision Table, then change the timezone, restart the server, log in again, the Date Field has *different* value

Expected: decision-central should never attempt to change the rules automatically without user's knowledge

h3. Acceptance test
- Check opening of old asset, created before this change (/)
- Run server on linux machine (timezone a) 
-- run host on win machine (timezone b) and create [#Assets] (/)
-- run host on win machine (timezone c) and check [#Assets] (/)

h4. Assets
- guided template
- guided rule
- guided table simple column
- guided table brl column",Major,Guilherme Gomes,,2018-07-24T04:25:53.000-0400,Guided Decision Table is changing date field value based on the timezone,Resolved,bug,Bug
2018-09-03T07:08:40.000-0400,DROOLS-2284,Done,None,Major,Mario Fusco,,2018-01-31T09:46:59.000-0500,Implement an executable model for drools and a java dsl to instance it,Resolved,bug,Bug
2018-08-31T16:10:52.000-0400,DROOLS-2936,Done,None,Major,Matteo Mortari,,2018-08-29T02:25:26.000-0400,DMN Validator is not sorting model files correctly when containing DMN Imports,Resolved,bug,Bug
2018-08-31T05:53:21.000-0400,DROOLS-2825,Explained,"Attached reproducer. Please check once,

I inserted 5 Fact POJO's. It should have deleted after 200s based on declaration in the rule file.

declare Fact
   @role( event )
   @expires(200s)
end

Heap dump shows the 5 entries even after I took the heap dump after 10 minutes. Please let me know regarding this.",Blocker,Mario Fusco,,2018-08-01T23:44:11.000-0400,Drools @Expires is not working with x seconds 7.4.1 Final Drools version,Resolved,bug,Bug
2018-08-31T16:13:27.000-0400,DROOLS-2943,Done,None,Major,Matteo Mortari,,2018-08-31T03:18:53.000-0400,DMN DecisionServiceCompiler not correctly wired for DMNv1.2 format,Resolved,bug,Bug
2018-08-30T14:28:28.000-0400,DROOLS-2884,Done,"Multiple build errors when creating a new simple Guided Score Card from UI. But works fine in 7.5.

10:51:26,427 ERROR [org.kie.workbench.common.services.backend.builder.core.Builder] (EJB default - 5) null: java.lang.NullPointerException
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.findResourcesWithErrors(KieBuilderSetImpl.java:105)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.buildChanges(KieBuilderSetImpl.java:153)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.build(KieBuilderSetImpl.java:95)
	at org.kie.workbench.common.services.backend.builder.core.Builder.buildIncrementally(Builder.java:533)
	at org.kie.workbench.common.services.backend.builder.core.Builder.addResource(Builder.java:354)
	at org.kie.workbench.common.services.backend.builder.core.Builder.addResource(Builder.java:320)
	at org.kie.workbench.common.services.backend.builder.core.Builder.updateResource(Builder.java:414)
	at org.kie.workbench.common.services.backend.builder.core.BuildHelper.updatePackageResource(BuildHelper.java:167)
	at org.kie.workbench.common.services.backend.builder.core.BuildHelper$Proxy$_$$_WeldClientProxy.updatePackageResource(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor.apply(LocalBuildExecConfigExecutor.java:70)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor.apply(LocalBuildExecConfigExecutor.java:32)
	at org.kie.workbench.common.services.backend.builder.ala.LocalBuildExecConfigExecutor$Proxy$_$$_WeldClientProxy.apply(Unknown Source)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.lambda$continuePipeline$0(PipelineExecutor.java:109)
	at org.guvnor.ala.pipeline.StageUtil$1.execute(StageUtil.java:38)
	at org.guvnor.ala.pipeline.StageUtil$1.execute(StageUtil.java:33)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.continuePipeline(PipelineExecutor.java:94)
	at org.guvnor.ala.pipeline.execution.PipelineExecutor.execute(PipelineExecutor.java:76)
	at org.kie.workbench.common.services.backend.builder.ala.BuildPipelineInvoker.invokeLocalBuildPipeLine(BuildPipelineInvoker.java:88)
	at org.kie.workbench.common.services.backend.builder.ala.BuildPipelineInvoker$Proxy$_$$_WeldClientProxy.invokeLocalBuildPipeLine(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper.invokeLocalBuildPipeLine(BuildServiceHelper.java:163)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper.localBuild(BuildServiceHelper.java:98)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceHelper$Proxy$_$$_WeldClientProxy.localBuild(Unknown Source)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl.buildIncrementally(BuildServiceImpl.java:136)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl.updatePackageResource(BuildServiceImpl.java:126)
	at org.kie.workbench.common.services.backend.builder.service.BuildServiceImpl$Proxy$_$$_WeldClientProxy.updatePackageResource(Unknown Source)
	at org.guvnor.common.services.builder.ResourceChangeIncrementalBuilder$4.execute(ResourceChangeIncrementalBuilder.java:262)
	at org.guvnor.common.services.builder.IncrementalBuilderExecutorManager.execute(IncrementalBuilderExecutorManager.java:90)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:90)
	at org.jboss.as.weld.interceptors.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:101)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:40)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInNoTx(CMTTxInterceptor.java:264)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.notSupported(CMTTxInterceptor.java:318)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:238)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:509)
	at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:110)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:60)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:438)
	at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:609)
	at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:57)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:53)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.LogDiagnosticContextRecoveryInterceptor.processInvocation(LogDiagnosticContextRecoveryInterceptor.java:82)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:422)
	at org.jboss.as.ejb3.component.interceptors.AsyncFutureInterceptorFactory$2$2.runInvocation(AsyncFutureInterceptorFactory.java:152)
	at org.jboss.as.ejb3.component.interceptors.AsyncInvocationTask.run(AsyncInvocationTask.java:81)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
	at org.jboss.threads.JBossThread.run(JBossThread.java:320)

10:51:28,413 INFO  [org.kie.workbench.common.screens.impl.LibraryServiceImpl] (default task-58) Asset lookup result: project [git://MySpace/ProjectDemo] is indexed with 2 index hits.
10:51:31,159 INFO  [stdout] (default task-61) Creating output structures!
10:51:33,819 ERROR [org.drools.compiler.kie.builder.impl.KieProject] (default task-61) Unable to build KieBaseModel:defaultKieBase
Only a type can be imported. org.kie.pmml.externalbean.Person resolves to a package : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
Person cannot be resolved to a type : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
Person cannot be resolved to a type : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
externalBeanPerson cannot be resolved or is not a field : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
Person cannot be resolved to a type : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
externalBeanPerson cannot be resolved to a variable : 
src/main/java/com/myspace/projectdemo/GuidedScoreCard/GuidedScoreCardScorecardRuleUnit.java
Unable to process type Result
Unable to process type Scorecard__calculatedScore
Unable to process type GuidedScoreCard
Unable to process type GuidedScoreCardOutput
Unable to process type DataField
Unable to process type OutputField
Unable to process type PMML4AbstractField
Unable to process type Age
com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Query name='Result']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Query name='Result']

Query's must use positional or bindings, not field constraints:
context == ctx : [Query name='Result']

Unable to compile expression: value : [Query name='Result']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Add PMMLResult with Scorecard output GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Add PMMLResult with Scorecard output GuidedScoreCard']

Unable to resolve ObjectType 'Scorecard__calculatedScore' : [Rule name='Add PMMLResult with Scorecard output GuidedScoreCard']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Add PMMLResult with Scorecard output GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']

Unable to resolve ObjectType 'Scorecard__calculatedScore' : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']

Unable to resolve ObjectType 'Scorecard__calculatedScore' : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='PartialScore_GuidedScoreCard_AgeScore_1']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='PartialScore_GuidedScoreCard_AgeScore_1']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Valid_PMML4DataUnrestricted_Values_Age-null']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Valid_PMML4DataUnrestricted_Values_Age-null']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='Valid_PMML4DataUnrestricted_Values_Age-null']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Mark_GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Mark_GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Sort Scorecard Reason Codes']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Sort Scorecard Reason Codes']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Init ScoreCard Params GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Init ScoreCard Params GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Create GuidedScoreCard Output Bean']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Create GuidedScoreCard Output Bean']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Integrate Scorecard ReasonCode Map']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Integrate Scorecard ReasonCode Map']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Integrate Scorecard ReasonCode Map']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Bind_Scorecard_PMML4Data_GuidedScoreCard_Age']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Bind_Scorecard_PMML4Data_GuidedScoreCard_Age']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='Bind_Scorecard_PMML4Data_GuidedScoreCard_Age']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Enable/Disable Model_GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Enable/Disable Model_GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Link GuidedScoreCard  Output Fields result ']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Link GuidedScoreCard  Output Fields result ']

named argument does not exist:
value : [Rule name='Link GuidedScoreCard  Output Fields result ']

Unable to resolve ObjectType 'GuidedScoreCardOutput' : [Rule name='Link GuidedScoreCard  Output Fields result ']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Bind_Scorecard_GuidedScoreCard_Age']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Bind_Scorecard_GuidedScoreCard_Age']

Unable to resolve ObjectType 'Age' : [Rule name='Bind_Scorecard_GuidedScoreCard_Age']

Unable to Analyse Expression (mAge == true && mAge != $m) || vAge != $v:
[Error: unable to resolve method using strict-mode: org.kie.pmml.pmml_4_2.model.GuidedScoreCardScoreCardData.$m()]
[Near : {... (mAge == true && mAge != $m) || vAge != $v ....}]
                                      ^
[Line: 737, Column: 4] : [Rule name='Bind_Scorecard_GuidedScoreCard_Age']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Cleanup data_GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Cleanup data_GuidedScoreCard']

Unable to resolve ObjectType 'DataField' : [Rule name='Cleanup data_GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Init ScoreCard GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Init ScoreCard GuidedScoreCard']

Unable to Analyse Expression request:
[Error: unable to resolve method using strict-mode: java.lang.Object.request()]
[Near : {... request ....}]
             ^ : [Rule name='Init ScoreCard GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='RemoveMissing_PMML4Data_GuidedScoreCard_Age']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='RemoveMissing_PMML4Data_GuidedScoreCard_Age']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='RemoveMissing_PMML4Data_GuidedScoreCard_Age']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='RemoveMissing_PMML4Data_GuidedScoreCard_Age']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Scorecard GuidedScoreCard output']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Scorecard GuidedScoreCard output']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='miningPmml4Data_GuidedScoreCard_Age']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='miningPmml4Data_GuidedScoreCard_Age']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='miningPmml4Data_GuidedScoreCard_Age']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='InitAsMissing_PMML4Data_GuidedScoreCard_Age']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='InitAsMissing_PMML4Data_GuidedScoreCard_Age']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='InitAsMissing_PMML4Data_GuidedScoreCard_Age']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Extract age from Person']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Extract age from Person']

Unable to Analyse Expression request:
[Error: unable to resolve method using strict-mode: java.lang.Object.request()]
[Near : {... request ....}]
             ^ : [Rule name='Extract age from Person']

Unable to resolve ObjectType 'org.kie.pmml.externalbean.Person' : [Rule name='Extract age from Person']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Bind result Output into Fact Person']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Bind result Output into Fact Person']

named argument does not exist:
value : [Rule name='Bind result Output into Fact Person']

Unable to resolve ObjectType 'Person' : [Rule name='Bind result Output into Fact Person']

Unable to Analyse Expression @Modify with ( $x ) { setResult( $val ); };:
[Error: unable to resolve method using strict-mode: org.drools.core.spi.KnowledgeHelper.$x()]
[Near : {... @Modify with ( $x ) { setResult( $val ); }; ....}]
                            ^
[Line: 493, Column: 1] : [Rule name='Bind result Output into Fact Person']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='simpleOutput_Scorecard__calculatedScore_to_Result']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='simpleOutput_Scorecard__calculatedScore_to_Result']

Unable to resolve ObjectType 'Scorecard__calculatedScore' : [Rule name='simpleOutput_Scorecard__calculatedScore_to_Result']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Own GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Own GuidedScoreCard']

Unable to resolve ObjectType 'GuidedScoreCard' : [Rule name='Own GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Update PMML4Result with aliased output Result']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Update PMML4Result with aliased output Result']

Query binding is not supported by non-abductive queries : $tgt : [Rule name='Update PMML4Result with aliased output Result']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Update PMML4Result with aliased output Result']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Update Scorecard in PMMLResult']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Update Scorecard in PMMLResult']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Update Scorecard in PMMLResult']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Score Card GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Score Card GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']

Unable to resolve ObjectType 'Scorecard__calculatedScore' : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']

Unable to resolve ObjectType 'GuidedScoreCard' : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']

Unable to Analyse Expression boundInput == $x:
[Error: unable to resolve method using strict-mode: org.kie.pmml.pmml_4_2.ModelMarker.$x()]
[Near : {... boundInput == $x ....}]
                           ^ : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Cumulate Code Scores']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Cumulate Code Scores']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Bind age Input from Fact Person']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Bind age Input from Fact Person']

Unable to resolve ObjectType 'Person' : [Rule name='Bind age Input from Fact Person']

Unable to Analyse Expression drools.getEntryPoint(""in_Age"").insert( $val );:
[Error: unable to resolve method using strict-mode: org.drools.core.spi.KnowledgeHelper.$val()]
[Near : {... drools.getEntryPoint(""in_Age"").insert( $val ); ....}]
                                                    ^
[Line: 874, Column: 1] : [Rule name='Bind age Input from Fact Person']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Scoring Complete']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Scoring Complete']

Unable to Analyse Expression results:
[Error: unable to resolve method using strict-mode: java.lang.Object.results()]
[Near : {... results ....}]
             ^ : [Rule name='Scoring Complete']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Link  GuidedScoreCard  Bean Input']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Link  GuidedScoreCard  Bean Input']

Unable to resolve ObjectType 'GuidedScoreCard' : [Rule name='Link  GuidedScoreCard  Bean Input']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='RuleUnitIndicator']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='RuleUnitIndicator']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Extract Parameter Info']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Extract Parameter Info']

Unable to Analyse Expression request:
[Error: unable to resolve method using strict-mode: java.lang.Object.request()]
[Near : {... request ....}]
             ^ : [Rule name='Extract Parameter Info']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Detect Scorecard ReasonCode Change']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Detect Scorecard ReasonCode Change']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='update_Result_GuidedScoreCard']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='update_Result_GuidedScoreCard']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='update_Result_GuidedScoreCard']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='update_Result_GuidedScoreCard']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Override Value']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Override Value']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='Override Value']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='Override Value']

com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit is not a valid RuleUnit class name : [Rule name='Valid_PMML4DataUnrestricted_Values_Scorecard__calculatedScore-null']

Unable to resolve ObjectType 'com.myspace.projectdemo.GuidedScoreCard.GuidedScoreCardScorecardRuleUnit' : [Rule name='Valid_PMML4DataUnrestricted_Values_Scorecard__calculatedScore-null']

Unable to Analyse Expression pmmlData:
[Error: unable to resolve method using strict-mode: java.lang.Object.pmmlData()]
[Near : {... pmmlData ....}]
             ^ : [Rule name='Valid_PMML4DataUnrestricted_Values_Scorecard__calculatedScore-null']

Rule Compilation error : [Rule name='simpleOutput_Scorecard__calculatedScore_to_Result']
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (8:1014) : Result cannot be resolved to a type
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (8:1029) : Result cannot be resolved to a type
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (9:1055) : $val cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (10:1081) : $m cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (11:1103) : $v cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (13:1154) : $ctx cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_simpleOutput_Scorecard__calculatedScore_to_Result28215628.java (14:1179) : $wgt cannot be resolved to a variable

Rule Compilation error : [Rule name='miningPmml4Data_GuidedScoreCard_Age']
	com/myspace/projectdemo/GuidedScoreCard/Rule_miningPmml4Data_GuidedScoreCard_Age791815586.java (9:1139) : pmmlData cannot be resolved

Rule Compilation error : [Rule name='Create GuidedScoreCard Output Bean']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Create_GuidedScoreCard_Output_Bean293196212.java (7:973) : GuidedScoreCardOutput cannot be resolved to a type

Rule Compilation error : [Rule name='Link GuidedScoreCard  Output Fields result ']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Link_GuidedScoreCard__Output_Fields_result_706560581.java (7:987) : $x cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_Link_GuidedScoreCard__Output_Fields_result_706560581.java (7:1099) : $val cannot be resolved to a variable

Rule Compilation error : [Rule name='Add PMMLResult with Scorecard output GuidedScoreCard']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Add_PMMLResult_with_Scorecard_output_GuidedScoreCard221492110.java (8:1142) : $tgt cannot be resolved to a variable

Rule Compilation error : [Rule name='Link  GuidedScoreCard  Bean Input']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Link__GuidedScoreCard__Bean_Input11610676.java (7:983) : _age cannot be resolved to a variable

Rule Compilation error : [Rule name='Cleanup data_GuidedScoreCard']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Cleanup_data_GuidedScoreCard1283344573.java (7:971) : $data cannot be resolved to a variable

Rule Compilation error : [Rule name='Own GuidedScoreCard']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Own_GuidedScoreCard801973129.java (7:1050) : $obj cannot be resolved to a variable

Rule Compilation error : [Rule name='Extract Parameter Info']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Extract_Parameter_Info209253815.java (9:1299) : pmmlData cannot be resolved

Rule Compilation error : [Rule name='Scorecard GuidedScoreCard output']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Scorecard_GuidedScoreCard_output1709810438.java (7:1016) : Scorecard__calculatedScore cannot be resolved to a type
	com/myspace/projectdemo/GuidedScoreCard/Rule_Scorecard_GuidedScoreCard_output1709810438.java (7:1051) : Scorecard__calculatedScore cannot be resolved to a type

Rule Compilation error : [Rule name='Bind_Scorecard_GuidedScoreCard_Age']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Bind_Scorecard_GuidedScoreCard_Age1384125906.java (8:1078) : $m cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_Bind_Scorecard_GuidedScoreCard_Age1384125906.java (9:1098) : $v cannot be resolved to a variable

Rule Compilation error : [Rule name='Update PMMLResult containing Scorecard output GuidedScoreCard']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Update_PMMLResult_containing_Scorecard_output_GuidedScoreCard374570524.java (7:1123) : $tgt cannot be resolved to a variable

Rule Compilation error : [Rule name='InitAsMissing_PMML4Data_GuidedScoreCard_Age']
	com/myspace/projectdemo/GuidedScoreCard/Rule_InitAsMissing_PMML4Data_GuidedScoreCard_Age2007342439.java (8:1048) : pmmlData cannot be resolved

Rule Compilation error : [Rule name='Update PMML4Result with aliased output Result']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Update_PMML4Result_with_aliased_output_Result1975799587.java (8:1116) : $tgt cannot be resolved to a variable

Rule Compilation error : [Rule name='Link  GuidedScoreCard  Predicted Fields scorecard__calculatedScore ']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Link__GuidedScoreCard__Predicted_Fields_scorecard__calculatedScore_1030365382.java (7:1012) : $x cannot be resolved to a variable
	com/myspace/projectdemo/GuidedScoreCard/Rule_Link__GuidedScoreCard__Predicted_Fields_scorecard__calculatedScore_1030365382.java (7:1144) : $val cannot be resolved to a variable

Rule Compilation error : [Rule name='Extract age from Person']
	com/myspace/projectdemo/GuidedScoreCard/Rule_Extract_age_from_Person309604676.java (7:1052) : $value cannot be resolved to a variable
",Blocker,Lance Leverich,,2018-08-11T07:10:39.000-0400,Guided Score Card build fails w/ multiple errors,Resolved,bug,Bug
2018-08-31T16:11:48.000-0400,DROOLS-2938,Done,None,Major,Matteo Mortari,,2018-08-29T09:51:26.000-0400,DMN Validator DMN<import> extended attributre drools:modelName error,Resolved,bug,Bug
2018-08-31T16:12:47.000-0400,DROOLS-2939,Done,None,Major,Matteo Mortari,,2018-08-29T11:26:10.000-0400,DMN v1.2 marshaller ignoring DMN<import> name attribute in the DMN (proper) namespace,Resolved,bug,Bug
2018-08-31T11:46:43.000-0400,DROOLS-2752,Done,"When creating a GuidedScoreCard that contains a reference to an external fact type, if the class name of the external fact type is not a fully qualified name (i.e. no package name) then a StringIndexOutOfBoundsException is thrown.",Major,Lance Leverich,,2018-07-18T10:34:15.000-0400,StringIndexOutOfBoundsException when creating GuidedScoreCard from workbench,Resolved,bug,Bug
2018-08-31T11:48:17.000-0400,DROOLS-2908,Done,Guided Score Card can't work in 7.9.0.Final and 7.10.0.Final,Blocker,Lance Leverich,,2018-08-22T03:10:49.000-0400,Guided Score Card can't works in 7.9.0.Final and 7.10.0.Final,Resolved,bug,Bug
2018-08-31T09:42:40.000-0400,DROOLS-2933,Rejected,I am executing window rule in my rule engine project. I am using Pseudo clock to take timestamp from data. While testing my code I found that after finishing off the window time (let's say 1s) random rules is also getting fired. I am not getting this behaviour with the real-time clock. ,Major,Mario Fusco,,2018-08-28T03:31:47.000-0400,Psuedo clock not working as expected,Resolved,bug,Bug
2018-08-31T16:13:56.000-0400,DROOLS-2944,Done,"A decision logic cannot correctly reference a DMN<import> InputData (even if considered ""antipattern) but still supported.",Major,Matteo Mortari,,2018-08-31T04:41:06.000-0400,DMN decision logic referencing DMN<import> InputData,Resolved,bug,Bug
2018-08-29T11:15:24.000-0400,DROOLS-2875,Done,"When multiple outputs are defined in the PMML the resource is not able to be compiled. Also, the mining schema for a mining model must contain entries for any elements used in any sub-model mining schema.",Major,Lance Leverich,,2018-08-10T11:53:16.000-0400,Problem compiling PMML when multiple output fields are present,Resolved,bug,Bug
2018-08-29T12:25:43.000-0400,DROOLS-2892,Done,"As discussed in https://groups.google.com/forum/#!topic/drools-usage/V8ypP1o5SwM : 

In order to reduce memory allocations we are calling _StatefulKnowledgeSessionImpl.reset()_ to bring a disposed session back into life. From our understanding this is the same method which the Drools session cache would use. During our tests we found that some of our rules don't trigger if we use this approach. We also found that the reset method leaves _PathMemory_ instances behind in the memory. As soon as we cleared the memory explicitly by calling  _session.getNodeMemories().clear()_ after every _session.reset()_ the rules fired again as usual. So we are wondering if the current implementation of _session.reset()_ is incomplete.

We are aware that _session.reset()_ is an internal method. However this issue should also affect the session cache feature of Drools. At the same time it would be nice to have a public interface to _session.reset()_ since in our application reusing a session is beneficial but we don't need the session cache as we can easily remember the last session which we used for processing and it seems more straightforward to just bring that one back to life instead of storing and retrieving it from a cache.",Major,Mario Fusco,,2018-08-14T09:30:03.000-0400,Session reset doesn't clear path memory,Closed,bug,Bug
2018-08-29T08:27:39.000-0400,DROOLS-2457,Won't Fix,"{{org.kie.camel.embedded.camel.component.CamelEndpointWith*}} tests fail with 
{{org.xml.sax.SAXNotRecognizedException: http://javax.xml.XMLConstants/feature/secure-processing}} with IBM JAVA 1.8 (ibm-java-x86_64-sdk-8.0.5.10)

+List of tests failing:+
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxWrapperCollectionTest.testWorkingSetGlobalTestSessionSetAndGetGlobal
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testQuery
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testProcess
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testInsertElements
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testSessionInsert
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testProcessInstanceSignalEvent
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testSessionGetObject
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbTest.testSessionRetractObject
* org.kie.camel.embedded.camel.component.CamelEndpointWithJaxbXSDModelTest.testSessionInsert

+Stacktrace (similar for other tests in fail):+
 java.lang.IllegalStateException: org.xml.sax.SAXNotRecognizedException: http://javax.xml.XMLConstants/feature/secure-processing
	at javax.xml.validation.SchemaFactory.setFeature(Unknown Source)
 	at com.sun.xml.bind.v2.util.XmlFactory.createSchemaFactory(XmlFactory.java:102)
 	at com.sun.tools.xjc.reader.xmlschema.parser.SchemaConstraintChecker.check(SchemaConstraintChecker.java:86)
 	at com.sun.tools.xjc.ModelLoader.loadXMLSchema(ModelLoader.java:360)
 	at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:174)
 	at com.sun.tools.xjc.ModelLoader.load(ModelLoader.java:119)
 	at org.drools.compiler.runtime.pipeline.impl.DroolsJaxbHelperProviderImpl.addXsdModel(DroolsJaxbHelperProviderImpl.java:121)
 	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromXSD(KnowledgeBuilderImpl.java:918)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl$ResourceBuilder.lambda$static$2(CompositeKnowledgeBuilderImpl.java:283)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl$ResourceBuilder$$Lambda$21.000000002566C640.build(Unknown Source)
 	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildResourceType(CompositeKnowledgeBuilderImpl.java:131)
 	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildResources(CompositeKnowledgeBuilderImpl.java:121)
 	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:98)
 	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:247)
 	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:74)
 	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:353)
 	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:265)
 	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:209)
 	at org.kie.camel.embedded.camel.component.CamelEndpointWithJaxWrapperCollectionTest.registerKnowledgeRuntime(CamelEndpointWithJaxWrapperCollectionTest.java:139)
 	at org.kie.camel.embedded.camel.component.CamelEndpointWithJaxWrapperCollectionTest.configureDroolsContext(CamelEndpointWithJaxWrapperCollectionTest.java:112) 

",Major,Mario Fusco,,2018-04-06T08:23:59.000-0400,CamelEndpointWith* tests failing with IBM JAVA (SAXNotRecognizedException),Resolved,bug,Bug
2018-08-28T09:47:36.000-0400,DROOLS-2927,Done,None,Major,Matteo Mortari,,2018-08-24T12:47:38.000-0400,DMN DecisionTable inputClause importing ItemDefinition throws NPE at compilation,Resolved,bug,Bug
2018-08-27T12:40:52.000-0400,DROOLS-2928,Done,"For a constraint like ""age > ((2*$age1)/3) "", Mvel Jitting generates a class like:
{code:java}
public class ConditionEvaluator251ed544c9124e1d99d3a8cae5048e1a
    implements ConditionEvaluator
{

    public boolean evaluate(InternalFactHandle internalfacthandle, InternalWorkingMemory internalworkingmemory, Tuple tuple)
    {
        Tuple tuple1 = tuple;
        int i = declarations[0].getIntValue(internalworkingmemory, tuple1.getFactHandle().getObject());
        return ((Person)internalfacthandle.getObject()).getAge() > 2 * i * 3;
    }

    public ConditionEvaluator251ed544c9124e1d99d3a8cae5048e1a(Declaration adeclaration[])
    {
        declarations = adeclaration;
    }

    private static final String EXPRESSION = ""age > ((2*$age1)/3)"";
    private final Declaration declarations[];
}
{code}
The division is wrongly generated like ""getAge() > 2 * i * 3"".",Major,Mario Fusco,,2018-08-27T01:52:17.000-0400,Wrong division calculation in Mvel Jitted constraint,Resolved,bug,Bug
2018-08-27T11:35:19.000-0400,DROOLS-2929,Done,"The NativeJavaCompiler is not able to compile the classes of the executable model when running inside JBoss EAP. In fact in that case it would need to be configured with an additional option setting in its classpath the jars containing the classes (both drools and user specific) that are necessary to perform the compilation like in

{code:java}
options.add(""-classpath"");
options.add(""/home/mfusco/.m2/repository/org/drools/drools-core/7.11.0-SNAPSHOT/drools-core-7.11.0-SNAPSHOT.jar:/home/mfusco/.m2/repository/org/kie/kie-api/7.11.0-SNAPSHOT/kie-api-7.11.0-SNAPSHOT.jar"");
{code}

Unfortunately those jars are contained in the unexploded war and and referenced by a virtual path like the following 

{code}
/content/webapp.war/WEB-INF/lib/drools-core-7.11.0-SNAPSHOT.jar
{code}

which cannot be used in -classpath option that requires a physical path.",Major,Mario Fusco,,2018-08-27T10:38:02.000-0400,Cannot compile the executable model from inside JBoss EAP,Resolved,bug,Bug
2018-08-24T03:29:07.000-0400,DROOLS-2917,Done,"The following stacktrace is reported

{code:java}
10:52:34.793 [main] ERROR org.kie.dmn.core.util.MsgUtil.logMessage:65 - Error compiling FEEL expression '""John""' for name 'First Name' on node 'an hardcoded Person': Exception raised: NullPointerException
10:52:34.796 [main] DEBUG org.kie.dmn.core.util.MsgUtil.logMessage:70 - Error compiling FEEL expression '""John""' for name 'First Name' on node 'an hardcoded Person': Exception raised: NullPointerException
java.lang.NullPointerException: null
	at org.kie.dmn.core.compiler.DMNFEELHelper.compileFeelExpression(DMNFEELHelper.java:120) ~[classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileLiteralExpression(DMNEvaluatorCompiler.java:738) [classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileExpression(DMNEvaluatorCompiler.java:109) [classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileContext(DMNEvaluatorCompiler.java:243) [classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileExpression(DMNEvaluatorCompiler.java:115) [classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileFunctionDefinition(DMNEvaluatorCompiler.java:305) [classes/:na]
	at org.kie.dmn.core.compiler.DMNEvaluatorCompiler.compileExpression(DMNEvaluatorCompiler.java:113) [classes/:na]
	at org.kie.dmn.core.compiler.BusinessKnowledgeModelCompiler.compileEvaluator(BusinessKnowledgeModelCompiler.java:77) [classes/:na]
	at org.kie.dmn.core.compiler.DMNCompilerImpl.processDrgElements(DMNCompilerImpl.java:308) [classes/:na]
	at org.kie.dmn.core.compiler.DMNCompilerImpl.compile(DMNCompilerImpl.java:220) [classes/:na]
	at org.kie.dmn.core.compiler.DMNCompilerImpl.compile(DMNCompilerImpl.java:152) [classes/:na]
	at org.kie.dmn.core.compiler.DMNCompilerImpl.compile(DMNCompilerImpl.java:135) [classes/:na]
	at org.kie.dmn.core.assembler.DMNAssemblerService.compileResourceToModel(DMNAssemblerService.java:140) [classes/:na]
	at org.kie.dmn.core.assembler.DMNAssemblerService.internalAddResource(DMNAssemblerService.java:116) [classes/:na]
	at org.kie.dmn.core.assembler.DMNAssemblerService.addResources(DMNAssemblerService.java:81) [classes/:na]
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageForExternalType(KnowledgeBuilderImpl.java:826) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildOthers(CompositeKnowledgeBuilderImpl.java:157) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:251) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:74) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:267) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:235) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:200) [drools-compiler-7.11.0-SNAPSHOT.jar:7.11.0-SNAPSHOT]
	at org.kie.dmn.core.util.KieHelper.createJar(KieHelper.java:57) [classes/:na]
	at org.kie.dmn.core.util.KieHelper.createAndDeployJar(KieHelper.java:43) [classes/:na]
	at org.kie.dmn.core.util.KieHelper.getKieContainer(KieHelper.java:36) [classes/:na]
	at org.kie.dmn.core.util.DMNRuntimeUtil.createRuntime(DMNRuntimeUtil.java:61) [test-classes/:na]
{code}
",Major,Matteo Mortari,,2018-08-23T04:52:22.000-0400,DMN resolveTypeRef returning null in BKM causes NPE during KieContainer compilation,Resolved,bug,Bug
2018-08-21T11:15:09.000-0400,DROOLS-2829,Done,"Decision and BKM elements holds some expression inside. This expression can be edited via expression grid editor. The expression grid editor shows the name of the parent element in its header cell. The problem is that this header cell is not updated if the element name is updated form the properties panel while expression grid editor is opened.

Spotted during DROOLS-2755 review. Not sure if it is related.",Optional,Michael Anstis,,2018-08-03T02:26:10.000-0400,[DMN Designer] Expression header cell is not updated from properties panel,Resolved,bug,Bug
2018-08-22T09:20:33.000-0400,DROOLS-2885,Done,"Package ""org.drools.core.fluent.impl"" is not imported by kie-api. This package is used in ExecutableRunner interface.",Major,Jiri Petrlik,,2018-08-12T14:21:35.000-0400,Missing import of org.drools.core.fluent.impl in kie-api OSGI metadata,Resolved,bug,Bug
2018-08-22T02:34:03.000-0400,DROOLS-2827,Done,"Each save operation in DMN designer produces new svg file in the workbench.

The requirement is to disable automatic generation completely. See [~tirelli] comment [here|https://issues.jboss.org/browse/DROOLS-2827?focusedCommentId=13616483&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13616483].

h3. Acceptance test
Check no svg(any image) present after
- Save (/)
- Save and Rename (/)
- Rename (/)
- Delete (/)
- Restore (/)",Major,Michael Anstis,,2018-08-02T04:58:12.000-0400,[DMN Designer] SVG produced for each save operation,Resolved,bug,Bug
2018-08-20T08:48:10.000-0400,DROOLS-2863,Done,"Running business-central standalone on a machine without internet access fails to start:

{noformat}
$ java -jar ~/Downloads/rhpam-7.0.0.GA-business-central-standalone.jar -s application-config.yaml

...
2018-06-26 12:38:32,597 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Swarm 7.1.0.redhat-72 (WildFly Core 3.0.12.Final-redhat-1) started in 1462ms - Started 187 of 214 services (52 services are lazy, passive or on-demand)
2018-06-26 12:38:35,342 ERROR [stderr] (main) org.wildfly.swarm.container.DeploymentException: java.lang.RuntimeException: org.jboss.shrinkwrap.descriptor.api.DescriptorImportException: Could not import XML from stream
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.java:301)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.java:174)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.java:107)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.container.runtime.RuntimeDeployer$Proxy$_$$_WeldClientProxy.deploy(Unknown Source)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.Swarm.deploy(Swarm.java:473)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at org.wildfly.swarm.Swarm.main(Swarm.java:744)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
2018-06-26 12:38:35,342 ERROR [stderr] (main) 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at java.lang.reflect.Method.invoke(Method.java:498)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.bootstrap.MainInvoker.invoke(MainInvoker.java:53)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.bootstrap.Main.run(Main.java:132)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.bootstrap.Main.main(Main.java:85)
2018-06-26 12:38:35,343 ERROR [stderr] (main) Caused by: java.lang.RuntimeException: org.jboss.shrinkwrap.descriptor.api.DescriptorImportException: Could not import XML from stream
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.spi.api.ClassLoading.withTCCL(ClassLoading.java:45)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.descriptors.JBossWebAsset.<init>(JBossWebAsset.java:41)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.descriptors.JBossWebContainer.findJbossWebAsset(JBossWebContainer.java:88)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.descriptors.JBossWebContainer.getContextRoot(JBossWebContainer.java:49)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.runtime.ContextPathArchivePreparer.process(ContextPathArchivePreparer.java:60)
2018-06-26 12:38:35,343 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.runtime.ContextPathArchivePreparer$Proxy$_$$_WeldClientProxy.process(Unknown Source)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.wildfly.swarm.container.runtime.RuntimeDeployer.deploy(RuntimeDeployer.java:233)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	... 12 more
2018-06-26 12:38:35,344 ERROR [stderr] (main) Caused by: org.jboss.shrinkwrap.descriptor.api.DescriptorImportException: Could not import XML from stream
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.jboss.shrinkwrap.descriptor.spi.node.dom.XmlDomNodeImporterImpl.importAsNode(XmlDomNodeImporterImpl.java:75)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.jboss.shrinkwrap.descriptor.spi.node.dom.XmlDomNodeImporter.importAsNode(XmlDomNodeImporter.java:45)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.jboss.shrinkwrap.descriptor.spi.node.NodeDescriptorImporterBase.fromStream(NodeDescriptorImporterBase.java:70)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.jboss.shrinkwrap.descriptor.spi.DescriptorImporterBase.fromStream(DescriptorImporterBase.java:147)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.wildfly.swarm.undertow.descriptors.JBossWebAsset.lambda$new$1(JBossWebAsset.java:43)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	at org.wildfly.swarm.spi.api.ClassLoading.withTCCL(ClassLoading.java:43)
2018-06-26 12:38:35,344 ERROR [stderr] (main) 	... 18 more
2018-06-26 12:38:35,345 ERROR [stderr] (main) Caused by: java.net.UnknownHostException: www.jboss.org
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at java.net.Socket.connect(Socket.java:589)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at java.net.Socket.connect(Socket.java:538)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.http.HttpClient.openServer(HttpClient.java:463)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.http.HttpClient.openServer(HttpClient.java:558)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.http.HttpClient.<init>(HttpClient.java:242)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.http.HttpClient.New(HttpClient.java:339)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.http.HttpClient.New(HttpClient.java:357)
2018-06-26 12:38:35,345 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1220)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1156)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1050)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:984)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1564)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:991)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLEntityManager.startEntity(XMLEntityManager.java:902)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:869)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:241)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(XMLDocumentScannerImpl.java:1001)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:324)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:875)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:798)
2018-06-26 12:38:35,346 ERROR [stderr] (main) 	at org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
2018-06-26 12:38:35,347 ERROR [stderr] (main) 	at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:230)
2018-06-26 12:38:35,347 ERROR [stderr] (main) 	at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:298)
2018-06-26 12:38:35,347 ERROR [stderr] (main) 	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)
2018-06-26 12:38:35,347 ERROR [stderr] (main) 	at org.jboss.shrinkwrap.descriptor.spi.node.dom.XmlDomNodeImporterImpl.importAsNode(XmlDomNodeImporterImpl.java:65)
2018-06-26 12:38:35,347 ERROR [stderr] (main) 	... 23 more
2018-06-26 12:38:35,355 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending
2018-06-26 12:38:35,357 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to [0:0:0:0:0:0:0:0]:8080
2018-06-26 12:38:35,359 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0004: Undertow 1.4.18.SP2-redhat-1 stopping
2018-06-26 12:38:35,377 INFO  [org.jboss.as] (MSC service thread 1-5) WFLYSRV0050: WildFly Swarm 7.1.0.redhat-72 (WildFly Core 3.0.12.Final-redhat-1) stopped in 23ms
{noformat}",Major,Toni Rikkola,,2018-08-08T06:27:14.000-0400,Unable to start standalone business central without internet access,Resolved,bug,Bug
2018-08-20T11:15:36.000-0400,DROOLS-2865,Done,"There is a dead space under canvas occurring when you use bigger screen (see the screenshot), which is disturbing for the eyes. Suggested is to make the canvas by default ""full screen"" as can be seen in other editors using canvas.",Major,Daniele Zonca,,2018-08-08T07:35:02.000-0400,Dead space under canvas.,Closed,bug,Bug
2018-08-20T11:12:29.000-0400,DROOLS-2864,Duplicate Issue,"When opening the right panel (https://issues.jboss.org/browse/DROOLS-2780) the Alerts panel does not change size (as e.g. in data modeler), see the attached video.",Major,Juraj Soltes,,2018-08-08T07:28:09.000-0400,Alerts are not changing size with the right panel.,Closed,bug,Bug
2018-08-16T03:13:37.000-0400,DROOLS-2607,Done,"ArithmeticException [1]  could happen in average function for BigDecimal type at the following code

https://github.com/kiegroup/drools/blob/7.5.x/drools-core/src/main/java/org/drools/core/base/accumulators/BigDecimalAverageAccumulateFunction.java#L98

[1]
java.lang.RuntimeException: java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result.
	at org.drools.core.rule.SingleAccumulate.getResult(SingleAccumulate.java:144)
	at org.drools.core.phreak.PhreakAccumulateNode.evaluateResultConstraints(PhreakAccumulateNode.java:654)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:97)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:567)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:538)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:373)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1318)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1309)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293)
	at com.sample.AccumulateExceptionTest.averageBigDecimalExceptionTest(AccumulateExceptionTest.java:43)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: java.lang.ArithmeticException: Non-terminating decimal expansion; no exact representable decimal result.
	at java.math.BigDecimal.divide(BigDecimal.java:1690)
	at org.drools.core.base.accumulators.BigDecimalAverageAccumulateFunction.getResult(BigDecimalAverageAccumulateFunction.java:98)
	at org.drools.core.base.accumulators.BigDecimalAverageAccumulateFunction.getResult(BigDecimalAverageAccumulateFunction.java:29)
	at org.drools.core.base.accumulators.JavaAccumulatorFunctionExecutor.getResult(JavaAccumulatorFunctionExecutor.java:145)
	at org.drools.core.rule.SingleAccumulate.getResult(SingleAccumulate.java:138)
	... 48 more

Please provide a way to specify  MathContext for BigDecimal.divide() in order to avoid this exception.",Major,Tibor Zimanyi,,2018-06-03T22:00:04.000-0400,ArithmeticException happens in average function with BigDecimal type,Resolved,bug,Bug
2018-08-10T10:48:18.000-0400,DROOLS-2870,Done,"If the project contains multiple dmn models, it can not be built.

h3. Manual acceptance test
- Prepare three models
-- Empty
-- Just graph nodes
-- Login inside graph nodes
- Check Deployment successful (/)",Blocker,Michael Anstis,,2018-08-09T04:25:44.000-0400,[DMN Designer] Can not build project with multiple models,Resolved,bug,Bug
2018-08-10T09:42:38.000-0400,DROOLS-2831,Done,"The EvaluatorWrapper (which is created in some cases when a constraint uses an mvel operator) holds a reference to one or two FactHandles. Those reference are retained even after the KieSession has been disposed, thus causing a memory leak.",Major,Mario Fusco,,2018-08-06T05:29:02.000-0400,Memory leak when a mvel operator creates an EvaluatorWrapper,Resolved,bug,Bug
2018-08-08T07:27:37.000-0400,DROOLS-2619,Done,"There are multiple tests in some of our repositories (namely drools and kie-wb-common repositories) with names not following the default wildcard patterns of maven-surefire-plugin and maven-failsafe-plugin. As a result, these tests are not executed on Jenkins. Proper names for test classes should follow these patterns:
- **/Test*.java, **/*Test.java, **/*TestCase.java for surefire plugin or
- **/IT*.java, **/*IT.java, **/*ITCase.java for failsafe plugin;",Major,Barbora Siskova,,2018-06-06T09:09:01.000-0400,Tests are not executed due to test name not following required pattern,Resolved,bug,Bug
2018-08-08T03:47:21.000-0400,DROOLS-2789,Cannot Reproduce,The attached dialog appears if user validates a rule with *soundslike* operator inside.,Major,Michael Anstis,,2018-07-25T04:10:08.000-0400,[Guided Rule] Can not validate sounds like,Closed,bug,Bug
2018-08-08T12:51:10.000-0400,DROOLS-2854,Done,"When MVEL evaluates 

   m.setStatus( 1 + 2 * 3 + m.getStatus() );

the following exception happens.

{noformat}
Exception executing consequence for rule ""Hello World"" in com.sample: [Error: no such method or function: m]
[Near : {... m.setStatus( 1 + 2 * 3 + m.getStatus() ); ....}]
{noformat}

If this is something like

Exception executing consequence for rule ""Hello World"" in com.sample: [Error: no such method or function: m]

   m.setStatus( 1 + 2 + 3 + m.getStatus() );  <==  Multiplication ""*"" is not used

it works without above exception.
This happens in both LHS and RHS with dialect ""mvel""",Major,Mario Fusco,,2018-08-07T05:51:28.000-0400,"MVEL: expression (1 + 2 * 3 + $v )  causes ""no such method or function "" for bind variable ",Resolved,bug,Bug
2018-08-06T17:29:34.000-0400,DROOLS-2826,Done,"During saving (also deploying) non empty dmn model, the error about resolving type reference appears in the server log.

h3. Manual acceptance test
- Save, Build and deploy dmn model from workbench (/)
- Save, Build and deploy dmn model from trisotech (/)",Critical,Michael Anstis,,2018-08-02T04:04:04.000-0400,[DMN Designer] Unable to resolve type reference,Resolved,bug,Bug
2018-08-06T23:08:13.000-0400,DROOLS-2840,Cannot Reproduce,"I deployed Kie workbench & Kie server at version 7.9.0.Final
and I am going to set up client by using websocket API as provided here:
   https://docs.jboss.org/drools/release/7.9.0.Final/drools-docs/html_single/index.html#_kie_server_controller_client_api



{code:java}
KieServerControllerClient client = KieServerControllerClientFactory.newWebSocketClient(URL_WS,
                USER,
                PASSWORD, new TestEventHandler());

        final ServerTemplateList serverTemplateList = client.listServerTemplates();
        System.out.println(String.format(""Found %s server template(s) at controller url: %s"",
                    serverTemplateList.getServerTemplates().length,
                    URL));
{code}


However, I got NPE since `serverTemplateList` is NULL.
I dig to the code and observed:

1. Server responses in JSON format:
    
{code:java}
'{
  ""type"" : ""SUCCESS"",
  ""msg"" : """",
  ""result"" : {
    ""server-template-list"" : {
      ""server-template"" : [ {
        ""server-id"" : ""kie-server-v1"",
        ""server-name"" : ""kie-server-v1"",
        ""container-specs"" : [ ],
        ""server-config"" : { },
        ""server-instances"" : [ {
          ""server-instance-id"" : ""kie-server-v1@192.168.1.6:8180"",
          ""server-name"" : ""kie-server-v1@192.168.1.6:8180"",
          ""server-template-id"" : ""kie-server-v1"",
          ""server-url"" : ""http://192.168.1.6:8180/kie-server/services/rest/server""
        } ],
        ""capabilities"" : [ ""RULE"", ""PROCESS"", ""PLANNING"" ]
      } ]
    }
  }
}'
{code}


2. But the decoder tries to unmarshall to the target object which is not defined well in JSON. It's defined in JAXB
   
   org.kie.server.controller.api.model.KieServerControllerServiceResponse

  
{code:java}
@XmlAttribute
    private ResponseType type;

    @XmlAttribute
    private String msg;

    @XmlElements({
            //Kie Server Controller model
            @XmlElement(name = ""server-template-list"", type = ServerTemplateList.class),
            @XmlElement(name = ""server-template-details"", type = ServerTemplate.class),
            @XmlElement(name = ""server-template-key-list"", type = ServerTemplateKeyList.class),
            @XmlElement(name = ""server-template-key"", type = ServerTemplateKey.class),
            @XmlElement(name = ""container-spec-list"", type = ContainerSpecList.class),
            @XmlElement(name = ""container-spec-details"", type = ContainerSpec.class),
            @XmlElement(name = ""server-instance-key-list"", type = ServerInstanceKeyList.class),
            @XmlElement(name = ""server-instance-key"", type = ServerInstanceKey.class),
            @XmlElement(name = ""container-details-list"", type = ContainerList.class)
    })
    private T result;
{code}

Similar issues when I tried to register Event notification from Websocket (given in above link). All values are null.

I am not sure I am missing some configuration. 
Any one help me please? Many Thanks.
   ",Major,Cristiano Nicolai,,2018-08-06T13:24:24.000-0400,Java Controller Client Websocket API - Unmarshal result/input incorrect,Closed,bug,Bug
2018-08-06T09:01:45.000-0400,DROOLS-2755,Done,"When the user switches between DMN files, the following error happens:
 !demo.gif|thumbnail! 

It's an intermittent problem, therefore the steps to reproduce the bug (showed in the GIF) don't propagate the error every time.

h3. Manual Acceptance Test
Switch between multiple files
- using library (/)
- using project explorer (/)",Major,Michael Anstis,,2018-07-18T11:48:01.000-0400,[DMN Designer] Error when the user switches between DMN files,Resolved,bug,Bug
2018-08-06T09:02:38.000-0400,DROOLS-2765,Done,"There occurs a {{JavaScriptException}} if user enters a read only session during an expression editor is shown.

h3. Manual Acceptance test (/)
# Prepare 3 files, each having multiple versions stored
# Open first, do not changes
# Open second (don't close first by close button, just hide), do some changes do not close
# Open third (don't close first and second by close button, just hide), do changes and save, swith to older version, do not restore
# Switch to second file, select older version, restore
# Switch to first, select older version, do not restore, select again the latest",Major,Michael Anstis,,2018-07-19T07:38:09.000-0400,[DMN Designer] Exception in read only session,Resolved,bug,Bug
2018-08-03T02:54:15.000-0400,DROOLS-2193,Duplicate Issue,"Attempting to use _modify_ on a fact that is retrieved from a DataSource will sometimes cause an error that reads:

{{Update error: handle not found for object: ...}}

Using dialect ""java"" fixes the issue.",Major,Mario Fusco,,2017-12-19T19:56:21.000-0500,MVEL Dialect cannot find the FH when using modify on a DataSource,Resolved,bug,Bug
2018-08-03T02:36:05.000-0400,DROOLS-2828,Done,"Trying to modify an object with mutable hashcode in equality mode and using mvel dialect causes an exception like the following: 

java.lang.RuntimeException: Update error: handle not found for object: org.drools.compiler.integrationtests.MVELTest$Human@a. Is it in the working memory?",Major,Mario Fusco,,2018-08-02T13:40:11.000-0400,Exception modify an object with mutable hashcode in equality mode and using mvel dialect,Resolved,bug,Bug
2018-08-03T04:25:14.000-0400,DROOLS-2705,Done,"Project contains Decision Tables which contains '+' sign in their names. After Build and Deploy of Project, these DTs were ignored and were not incorporated as a part of KJar.
",Major,Toni Rikkola,,2018-07-05T07:56:17.000-0400,Files having '+' sign in name are getting ignored in Build.,Resolved,bug,Bug
2018-08-02T09:59:16.000-0400,DROOLS-2745,Done,user is unable to save changes once the diagram is reopened.,Blocker,Michael Anstis,,2018-07-17T04:42:58.000-0400,[DMN Designer] Save after reopen,Resolved,bug,Bug
2018-08-02T03:06:30.000-0400,DROOLS-2812,Done,"The FEEL expression for typically ""Person.age"" should return a BigDecimal, not an int",Major,Matteo Mortari,,2018-08-01T00:26:50.000-0400,FEEL Translation number coercion for QualifiedName accessor,Resolved,bug,Bug
2018-08-01T12:28:54.000-0400,DROOLS-2814,Done,"When MVEL evaluates 

{noformat}
java.math.BigDecimal.valueOf(100)
{noformat}

, MVEL determines a method from valueOf(double val) or valueOf(long val).

The result is not consistent. Sometimes uses valueOf(double val), Sometimes uses valueOf(long val).

ParseTools.getMethodScore() gives the same score for double and long.

https://github.com/mvel/mvel/blob/master/src/main/java/org/mvel2/util/ParseTools.java#L312-L367

So a selected method will depend on the order of result of ""cls.getMethods()"".

Reproducer:

$ unzip BigDecimalMvelTest.zip
$ cd BigDecimalMvelTest
$ mvn compile
$ ./loop.sh

It runs the MVEL test 100 times:
{noformat}
$ ./loop.sh 
result = 100.0
result = 100.0
result = 100.0
result = 100
result = 100.0
result = 100.0
...
{noformat}

In my environment, ""100.0"" is the majority but randomly see ""100"" as well. (I couldn't reproduce with single run with java for loop)

Expectation is constantly ""100"" (using valueOf(long val)) because in case of usual Java ""java.math.BigDecimal.valueOf(100)"", Java compiler chooses valueOf(long val) if the parameter is int. (considering ""direct supertype"" https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.10)",Major,Mario Fusco,,2018-08-01T01:19:54.000-0400,MVEL uses random parameter type methods for BigDecimal.valueOf(100),Resolved,bug,Bug
2018-08-01T12:31:25.000-0400,DROOLS-2822,Done,"For the following expression not() heuristic is failing


{code:java}
not(list contains([1,2,3,4,5,6], 3))
{code}
",Major,Matteo Mortari,,2018-08-01T11:04:27.000-0400,FEEL augment not() heuristic for function invocation,Resolved,bug,Bug
2018-08-01T03:46:39.000-0400,DROOLS-2813,Done,None,Major,Matteo Mortari,,2018-08-01T00:54:23.000-0400,DMN boxed invocation missing expression NPE and Validator issue,Resolved,bug,Bug
2018-07-31T03:49:02.000-0400,DROOLS-2805,Done,None,Major,Daniele Zonca,,2018-07-30T12:25:22.000-0400,Release notes for 7.9.0 Final are not linked correctly,Resolved,bug,Bug
2018-07-30T05:13:09.000-0400,DROOLS-2781,Done,"{code:mvel}
package com.myspace.repr;

import java.lang.Number;

rule ""rule""
	dialect ""mvel""
	when
		DataObject( $stringField : sFieldOne == ""something"" )
		DataObjectTwo( sFieldTwo == $stringField )
	then
end
{code}

Assume the rdrl file above where both *sFieldOne* and *sFieldTwo* are both of *String* type. Then if you try open this rdrl file in workbench the unexpected error dialog appears.

The same can be seen if we assign role EVENT to *DataObject* and have this rule below. 

{code:mvel}
package com.myspace.repr;

import java.lang.Number;

rule ""eventRule""
	dialect ""mvel""
	when
		e1 : DataObject( this after [1m, 2m] ""24-Jul-2018"" ) over window:time (10d)
		e2 : DataObject( this before e1 )
	then
end

{code}
",Critical,Toni Rikkola,,2018-07-24T08:35:26.000-0400,[Guided Rule] Can't be opened if constraint to bound field present,Resolved,bug,Bug
2018-07-27T04:00:08.000-0400,DROOLS-2595,Done,None,Major,Mario Fusco,,2018-05-29T05:16:41.000-0400,Average accumulate function should return null instead of zero when no facts are matched,Resolved,bug,Bug
2018-07-27T04:48:43.000-0400,DROOLS-2649,Done,"When running tests from PR [1] with executable model, 220 out of 732 test cases fail.

[1] https://github.com/kiegroup/drools/pull/1959",Major,Mario Fusco,,2018-06-25T10:17:27.000-0400,"Executable model - IndexingTest, RuleUnitTest + few other test classes fail with executable model",Resolved,bug,Bug
2018-07-26T15:01:06.000-0400,DROOLS-2748,Done,"Access to the DMN Designer needs to be disabled by default and permissions added for Users to be able to enable, if required. See [here|https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-screens/kie-wb-common-workbench/kie-wb-common-workbench-client/src/test/java/org/kie/workbench/common/workbench/client/authz/PermissionTreeSetupTest.java] for a starting point!",Major,Michael Anstis,,2018-07-17T07:28:31.000-0400,[DMN Designer] Add permissions for DMN Designer,Resolved,bug,Bug
2018-07-25T07:53:52.000-0400,DROOLS-2757,Done,If for any reason the META-INF/kmodule.xml file is missing in a project the KieContainer.verify(kBaseName) throws a NPE making the the real cause quite hard to discover.,Minor,Mario Fusco,,2018-07-18T14:30:27.000-0400,KieContainer.verify(kBaseName) throws NPE if kmodule.xml is missing,Resolved,bug,Bug
2018-07-24T09:25:49.000-0400,DROOLS-2768,Done,None,Major,Matteo Mortari,,2018-07-23T04:57:40.000-0400,DMN Decision Service encapsulate Decision which imports a Decision Service,Resolved,bug,Bug
2018-07-24T03:41:19.000-0400,DROOLS-2773,Done,"When creating a new *KieScanner*, a *NullPointerException*  is thrown. Here's the code where the *KieScanner* is created:

{code:java}
final KieServices kieServices = KieServices.Factory.get();

final KieContainer kieContainer = kieServices.newKieContainer(
    kieServices.newReleaseId(""mygroup"", ""rules"", ""1.0-SNAPSHOT""));


final KieScanner kieScanner = kieServices.newKieScanner(kieContainer);
{code}

The method *indexArtifacts* in the *KieRepositoryScannerImpl* class, tries to index all the Maven artefacts.In my case, the artefact *sun.jdk:jconsole:jdk* cannot be resolved, which causes the *NullPointerException* in the line 399:

{code:java}
private Map<ReleaseId, DependencyDescriptor> indexArtifacts() {
    Map<ReleaseId, DependencyDescriptor> depsMap = new HashMap<ReleaseId, DependencyDescriptor>();
    for (DependencyDescriptor dep : artifactResolver.getAllDependecies()) {
        if ( !""test"".equals(dep.getScope()) && !""provided"".equals(dep.getScope()) && !""system"".equals(dep.getScope()) ) {
            Artifact artifact = artifactResolver.resolveArtifact(dep.getReleaseId());
            log.debug( artifact + "" resolved to  "" + artifact.getFile() ); // NPE happens here.
            if (isKJar(artifact.getFile())) {
                depsMap.put(adapt( dep.getReleaseIdWithoutVersion() ), new DependencyDescriptor(artifact));
            }
        } else {
            log.debug(""{} does not need to be resolved because in scope {}"", dep, dep.getScope());
        }
    }
    return depsMap;
}
{code}

The curious part is that the *sun.jdk:jconsole:jdk* artefact is not declared in any of my projects or dependencies, as far as I could investigate.

Here's the NPE stack trace:

{code}
Caused by: java.lang.NullPointerException: null
	at org.kie.scanner.KieRepositoryScannerImpl.indexArtifacts(KieRepositoryScannerImpl.java:399)
	at org.kie.scanner.KieRepositoryScannerImpl.setKieContainer(KieRepositoryScannerImpl.java:116)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieScanner(KieServicesImpl.java:227)
	at com.test.ServiceConfoguration.kieContainer(ServiceConfoguration.java:84)
	at com.test.ServiceConfoguration$$EnhancerBySpringCGLIB$$4fd6caf2.CGLIB$kieContainer$2(<generated>)
	at com.test.ServiceConfoguration$$EnhancerBySpringCGLIB$$4fd6caf2$$FastClassBySpringCGLIB$$f73690dd.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:356)
	at com.test.ServiceConfoguration$$EnhancerBySpringCGLIB$$4fd6caf2.kieContainer(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)
	... 19 common frames omitted
{code}

 ",Major,Mario Fusco,,2018-07-23T10:36:18.000-0400,NPE when creating a new KieScanner,Resolved,bug,Bug
2018-07-23T04:29:54.000-0400,DROOLS-2743,Done,"The stunner based designers contain ""Download as"" button. The problem of this button for DMN Designer is that it contains option ""Download as BPMN"" instead of ""Download as DMN"".",Minor,Michael Anstis,,2018-07-17T04:33:13.000-0400,[DMN Designer] Download as toolbar button,Resolved,bug,Bug
2018-07-20T15:01:35.000-0400,DROOLS-2744,Done,"The global diagram properties for DMN diagram contains sections settings for:
- dimensions
- backround
- font

However change of any of them (globally, for the whole diagram) doesn't seem to affect particular nodes somehow. We should hide these settings or implement the logic that would affect all nodes in diagram by change on this place.",Minor,Michael Anstis,,2018-07-17T04:38:12.000-0400,[DMN Designer] Global diagram properties,Resolved,bug,Bug
2018-07-19T08:41:24.000-0400,DROOLS-2741,Done,"The stunner based designers contain ""Clear the diagram"" button. The problem of this button for DMN Designer appears if the expression editor is opened. User has still possibility to use this button and thus can clear node that he currently edits. I think we should disable that button if expression editor is opened.

h3. Manual acceptance test
Navigate between diagram and expression editor using [1] and check button enabled in diagram, disabled in expression
[1]
- Navigation dock (/)
- Manually clicking elements (/)

",Minor,Michael Anstis,,2018-07-17T04:30:34.000-0400,[DMN Designer] Clear the diagram toolbar button,Resolved,bug,Bug
2018-07-19T08:41:32.000-0400,DROOLS-2742,Done,"The stunner based designers contain ""Switch grid"" button. The problem of this button for DMN Designer appears if the expression editor is opened. User has still possibility to use this button. It would be more logical to disable this button while expression editor is opened as the grid is not shown at that moment.

h3. Manual acceptance test
Navigate between diagram and expression editor using [1] and check button enabled in diagram, disabled in expression
[1]
- Navigation dock (/)
- Manually clicking elements (/)
",Minor,Michael Anstis,,2018-07-17T04:31:05.000-0400,[DMN Designer] Switch grid toolbar button,Resolved,bug,Bug
2018-07-17T12:58:04.000-0400,DROOLS-2746,Done,None,Major,Matteo Mortari,,2018-07-17T05:27:32.000-0400,DMN Invocation parameters resolution with imported function,Resolved,bug,Bug
2018-07-17T04:35:44.000-0400,DROOLS-2720,Done,"A command is executed by {{TextBoxDOMElement}} and {{TextAreaDOMElement}} when the editor looses focus however the command should not be executed if the value has not changed as it leads to what appears to be weird behaviour when undoing operations in the UI.

h3. Manual Accpetance test
Check all expression editors that support {{autoedit}} that undone behaves correctly (/)",Major,Michael Anstis,,2018-07-11T05:35:35.000-0400,[DMN Designer] Do not execute a command to update a cell value if the value has not changed,Resolved,bug,Bug
2018-07-13T02:54:15.000-0400,DROOLS-2711,Done,None,Major,Toni Rikkola,,2018-07-09T04:59:36.000-0400,[IE] Package dropdown is broken in new asset dialogs,Resolved,bug,Bug
2018-07-12T06:01:18.000-0400,DROOLS-2662,Done,"Consider a Data Object Test with a single field date of type java.time.LocalDate. When  using Guided Rule Editor with two different conditions on Test object, with two Test object (the condition are in two separated objects), when we bind the date to a variable the constraint pop up won't open for the other condition, showing an error in console.

The attached video will clarify the issue.

That does not seem to happen with built in types and not even with java.util.Date type.",Major,Jozef Marko,,2018-06-28T04:46:58.000-0400,Guided Rule Editor does not open popup when binding a variable of type java.time.LocalDate in another constraint,Resolved,bug,Bug
2018-07-12T04:32:57.000-0400,DROOLS-2721,Rejected,User is unable to connect InputData node with BKM node.,Blocker,Michael Anstis,,2018-07-11T07:34:41.000-0400,[DMN Designer] InputData node can not be connected to BKM node,Resolved,bug,Bug
2018-07-13T04:17:28.000-0400,DROOLS-2652,Done,"The toolbox shows icons for the different connection types available from a given node.

At the moment they are all the same icon and it is difficult to know which toolbox icon represents which connection type. Until https://issues.jboss.org/browse/DROOLS-1944 a short-term fix is to simply ensure each connection type has an icon more correctly representing its type.

h3. Manual Acceptance test
Each node type has appropriate connector icons in the context menu (/)",Major,Michael Anstis,,2018-06-26T11:20:53.000-0400,[DMN Designer] Different icons for different connector types,Resolved,bug,Bug
2018-07-11T05:40:32.000-0400,DROOLS-2715,Done,"I was able to get a Null Pointer out of a simple accumulate.
Download the attached zip and run the test.

java.lang.RuntimeException: java.lang.NullPointerException

	at org.drools.core.rule.SingleAccumulate.init(SingleAccumulate.java:88)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:148)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:89)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:567)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:538)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:373)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1308)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1299)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1283)
	at tests.TestsClass.test(TestsClass.java:52)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.lang.NullPointerException
	at org.drools.core.reteoo.BaseLeftTuple.getObject(BaseLeftTuple.java:628)
	at org.drools.core.reteoo.BaseTuple.getObject(BaseTuple.java:48)
	at defaultpkg.Rule_Rule_X0Accumulate0Invoker.init(Rule_Rule_X0Accumulate0Invoker.java:21)
	at org.drools.core.rule.SingleAccumulate.init(SingleAccumulate.java:82)
	... 41 more
",Major,Mario Fusco,,2018-07-10T14:32:16.000-0400,Null Pointer Exception on Accumulate,Closed,bug,Bug
2018-07-11T09:19:26.000-0400,DROOLS-2713,Done,None,Major,Matteo Mortari,,2018-07-10T05:35:52.000-0400,DMN evaluation response containing list and sublist fail on server,Resolved,bug,Bug
2018-07-13T03:05:35.000-0400,DROOLS-2732,Done,"Antlr and FEEL visitor error on 
{code:java}
{ add : function(x,y) x + y }.add(1,2)
{code}
",Major,Matteo Mortari,,2018-07-12T04:53:28.000-0400,FEEL invoking a function on a literal context,Resolved,bug,Bug
2018-07-06T13:34:00.000-0400,DROOLS-2710,Done,None,Major,Mario Fusco,,2018-07-06T13:04:11.000-0400,"NullPointerException using a ""forall"" after an ""or"" having another existsential operator",Resolved,bug,Bug
2018-07-06T04:10:55.000-0400,DROOLS-2317,Done,"Attached model

{code:java}
Error compiling FEEL expression 'for item in Order.items return Federal Tax for Item( item )' for name 'Calculate Federal Taxes' on node 'Calculate Federal Taxes': syntax error near 'for'
{code}
",Major,Fedor Gavrilov,,2018-02-12T08:11:39.000-0500,FEEL Syntax error on function(bkm) containing `for` keyword,Resolved,bug,Bug
2018-07-05T05:58:52.000-0400,DROOLS-2631,Done,"In the following trivial example model:
 !image-2018-06-13-12-46-54-003.png|thumbnail! 

The Validation warning indicates the model is missing the setup of a typeRef for the BKM.

But the typeref on the BKM is in conflict with what was discussed here: https://github.com/dmn-tck/tck/issues/112#issuecomment-362590717

For what concerning current DMN v1.1 validation, a fix will be provided to exclude BKMs typeref from the above Validation warning

i.e.: avoid Validation to raise the warning in the screenshot.",Major,Matteo Mortari,,2018-06-13T06:49:11.000-0400,"Validation rule of BKM typeref (bkm's variable element, typeref attribute)",Resolved,bug,Bug
2018-07-04T13:26:31.000-0400,DROOLS-2704,Done,None,Major,Mario Fusco,,2018-07-04T12:39:07.000-0400,Support Java 8 date API in dates comparison,Resolved,bug,Bug
2018-07-02T17:51:09.000-0400,DROOLS-2644,Done,"There are situations when the undo of column deletion causes unexpected grid total width increase. See the steps to reproduce.

h3. Manual Accpetance Test
# Steps to reproduce fixed (/)
# Steps to reproduce fixed when decision table / relation is not top level context entry (/)
# Repeat steps to reproduce, save and reopen, edit the expression (/)",Minor,Michael Anstis,,2018-06-21T02:29:17.000-0400,[DMN Designer] Deletion of the column causes last column width increase,Resolved,bug,Bug
2018-07-03T05:00:48.000-0400,DROOLS-2695,Done,"When there is a type mismatch (e.g. String vs Integer) in a constraint, usually a type is coerced and a rule is fired.

{code}
rule ""R2""
    when
        $f : MyFactB( strData == 20 )
    then
        System.out.println( ""R2 fired : $f = "" + $f );
end
{code}

As far as I investigate, in case of AlphaNode, MVEL does the coercion. Also AlphaNode hashing does the coercion (https://github.com/kiegroup/drools/blob/7.5.0.Final/drools-core/src/main/java/org/drools/core/reteoo/CompositeObjectSinkAdapter.java#L748).

However, in case of JoinNode, it doesn't coerce so doesn't fire.

{code}
rule ""R1""
    when
        MyFactA( $i : intData )
        $f : MyFactB( strData == $i )
    then
        System.out.println( ""R1 fired : $f = "" + $f );
end
{code}",Major,Mario Fusco,,2018-07-02T13:25:32.000-0400,Beta node indexes don't support type coercion,Resolved,bug,Bug
2018-07-02T07:25:48.000-0400,DROOLS-2665,Done,None,Major,Matteo Mortari,,2018-06-28T08:59:26.000-0400,DMN and FEEL `instance of` operator interaction on simpletype,Resolved,bug,Bug
2018-06-28T16:13:02.000-0400,DROOLS-2473,Done,"If the function language is changed, the boxed expression table is not rendered as expected.

h2. PR Acceptance Test
Change of function language is consistent in rendering
- Empty function (/)
- Function with data (/)
- Function as boxed expression not at top level in the context hierarchy (/)",Minor,Michael Anstis,,2018-04-13T03:20:43.000-0400,[DMN Designer] Function language change inconsistency,Resolved,bug,Bug
2018-06-29T04:29:06.000-0400,DROOLS-2640,Done,"This was spotted during review of DROOLS-2454 however not sure if it is related. The problem occurs if you declare the function language for the first time.

h3. Manual Acceptance Test
Change function definition multiple times:
- function as top level expression (/)
- context as top level expression, function inside (/)",Minor,Michael Anstis,,2018-06-18T03:57:55.000-0400,[DMN Designer] First function language definitions,Resolved,bug,Bug
2018-06-28T05:01:00.000-0400,DROOLS-2660,Done,None,Major,Mario Fusco,,2018-06-27T13:28:49.000-0400,Duplicated variable names in different scopes breaks executable model generation,Resolved,bug,Bug
2018-06-27T05:09:48.000-0400,DROOLS-2628,Done,"The Data Input node offers not appropriate actions. In the attached screenshot if you check actions on positions *1* and *2* both offer the *Create DMN Decision* action. Furthermore if you select the action at the position *2* the attached error appears.

h3. Manual PR Acceptance Test
Check all toolbox actions of each node type (/)",Major,Michael Anstis,,2018-06-11T09:55:24.000-0400,[DMN Designer] DataInput toolbox actions,Resolved,bug,Bug
2018-06-26T05:06:46.000-0400,DROOLS-2643,Done,"The Guided Rule editor inserts extraneous parentheses in the generated DRL around the phrase ""(OrderLine : quantity > 0) from $o.orderlines)"" as shown below:

package com.redhat.rhdm.demo;

import java.lang.Number;

rule ""SpecialHandlingGuidedRule""
	dialect ""mvel""
	when
		$o : Order( orderlines.size() > 0 )
		Number( intValue() > 100 ) from accumulate ( 		(OrderLine( $q : quantity > 0 ) from $o.orderlines)
,
			sum($q)) 
	then
end

This above DRL will fail to validate.  If the extraneous parentheses are removed, as shown below, then the DRL is valid.

package com.redhat.rhdm.demo;

import java.lang.Number;

rule ""Assign Special Handling for Large Orders""
    dialect ""mvel""
    when
        $o : Order( orderlines.size() > 0 )
        Number( intValue() > 100 )
            from accumulate (OrderLine( $q : quantity > 0 ) from $o.orderlines, sum($q))
    then
        $o.setIsSpecial( true )
end",Minor,Michael Anstis,,2018-06-20T02:02:00.000-0400,Extraneous parentheses generated by Guided Rule editor,Resolved,bug,Bug
2018-06-27T02:58:43.000-0400,DROOLS-2598,Done,"When I run the test GuidedScoreCardIntegrationJavaClassesOnClassPathTest.testIncrementalCompilation [1] on Windows or Mac, it fails. However the test passes on Linux. That implies that something is wrong with incremental compilation with PMML resources when run on case non-sensitive systems. 

[1] https://github.com/kiegroup/drools/blob/36eccb8a33550eb2049255f058fe016c6a1fa2f7/drools-workbench-models/drools-workbench-models-guided-scorecard/src/test/java/org/drools/workbench/models/guided/scorecard/backend/test1/GuidedScoreCardIntegrationJavaClassesOnClassPathTest.java#L76",Major,Tibor Zimanyi,,2018-05-29T08:38:06.000-0400,PMML - Test GuidedScoreCardIntegrationJavaClassesOnClassPathTest.testIncrementalCompilation fails on Windows or MacOS,Resolved,bug,Bug
2018-06-25T09:01:05.000-0400,DROOLS-2425,Done,"This issue was spotted during DROOLS-2392 review.

In special cases undo of delete relation column is not proper.

h2. Acceptance test
# Steps to reproduce fixed (/)
# Deletion is undone properly
## Deletion of con. entry (/)
## Deletion of Dec. table row (/)
## Deletion of Dec. table column (x) DROOLS-2644
## Deletion of Relation column (x) DROOLS-2644
## Deletion of Relation row (/)
## Deletion of Function parameter (/)
# Clear of expression type is undone properly (/)",Minor,Michael Anstis,,2018-03-27T06:18:26.000-0400,[DMN Designer] Undo of relation column deletion is not proper,Resolved,bug,Bug
2018-06-14T06:32:15.000-0400,DROOLS-2635,Done,None,Major,Mario Fusco,,2018-06-14T06:09:53.000-0400,Type coercion doesn't work for numeric boxed type in executable model,Resolved,bug,Bug
2018-06-20T04:09:44.000-0400,DROOLS-2454,Done,"If the decision with bigger context table is reopened, its content is not visible.

h2. PR Manual Acceptance test

In each scenario, width of columns don't have to be same as before closing, however each column should has some minimal/default width.

# Steps to reproduce fixed (/)
# Define top level as Literal expression, reopen (/)
# Define top level as Decision table, add columns, reopen (/)
# Define top level as Relation, add columns, reopen (/)
# Define top level as Invocation, specify complex parameters, reopen (/)
# Define top level as Function, add a lot of parameters, reopen (/)
# Define top level as Context, recursively add more Contexts, reopen (/)",Major,Michael Anstis,,2018-04-05T08:50:01.000-0400,[DMN Designer] Decision content not visible after reopen,Resolved,bug,Bug
2018-06-20T11:48:16.000-0400,DROOLS-2629,Done,"If user edits BRL multivalue contraint where previously between selected values was enumeration in the form {{""<a>, <b>, .... <c>""}}, then this enumeration is not more selected.

h2. Manual PR Acceptance test
# Fixed steps to reproduce
## Consequently table data can be edited (/)
## Table can be saved and reopened (/)
# BRL condition constraint editor shown correctly
## Date (/)
## Readonly (/)
## Multiselect cosntrain (/)
## Operator requires list (/)",Minor,Toni Rikkola,,2018-06-12T05:39:08.000-0400,Complex enumerations are not selected in BRL multi value constraint,Resolved,bug,Bug
2018-06-15T02:41:56.000-0400,DROOLS-2180,Done,"The implementation of {{ActionCallMethod.hashCode()}} fails if the ""method name"" is {{null}}. This scenario can arise if you create a new Guided Rule, add a ""Call method on..."" action and leave it incomplete. Trying to close the editor results in a NPE error (as the ""is dirty"" mechanism uses {{hashCode()}} implementations).",Minor,Jozef Marko,,2017-12-15T06:33:48.000-0500,[Guided Rule Editor] NPE closing a Guided Rule with an incomplete ActionCallMethod,Resolved,bug,Bug
2018-06-11T03:00:13.000-0400,DROOLS-2593,Done,"This issue appears just on *firefox* or *internet explorer*. If a table with *Work Item* execution is opened, the attached errors appears. Please notice that the errors differs slightly on *firefox* and *internet explorer*.

h3. Tests
[WebDTWIDTest|https://github.com/jboss-integration/bxms-qe-tests/blob/master/test-kie-wb/src/test/java/org/jboss/qa/brms/authoring/dt/feature/WebDTWIDTest.java]",Major,Toni Rikkola,,2018-05-28T07:54:45.000-0400,[Guided Decision Table] Trouble to add a row into table with WI,Resolved,bug,Bug
2018-06-12T04:47:03.000-0400,DROOLS-2367,Done,"When using kcontext on RHS of a rule together with a global, the consequence lambda is incorrectly generated which leads to this error [1]. This heviour can be reproduced by copypasting this test [2] into CompilerTest class from modelcompiler package. 

[1] https://gist.github.com/baldimir/8b4f494a42a0cbed3e6b191e85774cb4
[2] https://gist.github.com/baldimir/94ef23595574d7cdcbb500d0e97059ed",Major,Luca Molteni,,2018-03-06T04:33:46.000-0500,Executable model - Drools context (kcontext) doesn't work when used together with a global,Resolved,bug,Bug
2018-06-06T04:06:25.000-0400,DROOLS-2588,Done,"Hi,
In drools 7.7.0.Final maven plugin suddenly stopped building kie base and thus verifying DRL files during packaging. It does not find the resources at all, during build I see warning:
{noformat}
[WARNING] No files found for KieBase defaultKieBase
{noformat}

I attach a simple project with error in DRL, it should not be built, but with 7.7.0.Final on Windows the build is successful. Though same project fails on macos or linux (as expected). And even 7.6.0 on Windows produces error
{noformat}
[ERROR] Unable to build KieBaseModel:defaultKieBase
Unable to resolve ObjectType 'List2' : [Rule name='all_import']
{noformat}

Only windows is affected, builds on linux and macos work as expected - they fail (because there is an error in DRL file), only windows with 7.7.0 plugin pass because it does not see the resources.",Major,Mario Fusco,,2018-05-25T10:01:04.000-0400,Kie maven plugin does not build kiebase on windows,Resolved,bug,Bug
2018-06-06T03:36:24.000-0400,DROOLS-2556,Won't Fix,"When KJAR contains a rule with timer:


{code:java}
package com.sample;
 
rule ""Timer to stop long running rules""
timer (int: 150s)
ruleflow-group ""whatever""
salience 99
      when
      then
      System.err.println(""**** Exit rule engine ****"");
      drools.halt();
end
{code}

It's not possible to deploy it with KIE Services API

it fails with this error:

https://gist.github.com/agiertli/12fb71e3103dbf493308dc263fdc4607",Major,Mario Fusco,,2018-05-16T10:41:40.000-0400,Not possible to deploy kjar with rule including timer,Resolved,bug,Bug
2018-06-06T05:45:51.000-0400,DROOLS-2575,Done,"When running DRL integration tests [1] with the executable model, 118 out of 510 test cases fail. PR with tests is here [2].

[1] https://github.com/kiegroup/drools/tree/master/drools-compiler/src/test/java/org/drools/compiler/integrationtests/drl
[2] https://github.com/kiegroup/drools/pull/1915",Major,Mario Fusco,,2018-05-21T07:40:17.000-0400,Executable model - DRL integration tests fail with the model,Resolved,bug,Bug
2018-06-06T03:53:35.000-0400,DROOLS-2611,Cannot Reproduce,"the project is added on workbench,I delete it,then import it,but failed.
I import project from github，failed too.
need set ssh key??

 !image-2018-06-05-15-41-28-768.png|thumbnail! ",Critical,Mario Fusco,,2018-06-05T03:42:48.000-0400,Drools7.7 workbench  Import project from git error,Resolved,bug,Bug
2018-06-05T02:32:34.000-0400,DROOLS-2551,Done,"When running tests from package org.drools.compiler.integrationtests.operators [1] with executable model, many of them fail (~120 out of ~520). To run the tests with the model, I moved the tests to a separate module in this PR [2], please check the PR description to see how to run them. 

[1] https://github.com/kiegroup/drools/tree/d7ad4fb31647b5295c3cbc0321f0d8f89693ec63/drools-compiler/src/test/java/org/drools/compiler/integrationtests/operators
[2] https://github.com/kiegroup/drools/pull/1901",Major,Luca Molteni,,2018-05-15T10:02:51.000-0400,"Executable model - tests from package ""integrationtests.operators"" fail when run with executable model",Resolved,bug,Bug
2018-06-05T04:15:29.000-0400,DROOLS-2594,Cannot Reproduce,"Hi, based on [7.7.0 documentation|https://docs.jboss.org/drools/release/7.7.0.Final/drools-docs/html_single/index.html#_constraint_part_of_a_pattern] a POJO boolean getter can be isMyAttribute or getMyAttribute.

We get the following exception when using is as prefix for boolean getter as follows:
2018-05-28 22:17:41 [main] ERROR o.d.c.kie.builder.impl.KieProject - Unable to build KieBaseModel:myKbase
Unable to Analyse Expression current == true:
[Error: unable to resolve method using strict-mode: com.acme.pojos.current()]
[Near : {... current == true ....}]
",Critical,Mario Fusco,,2018-05-28T19:11:40.000-0400,drools compiler doesn't accept is as getter for boolean attribute of POJO,Resolved,bug,Bug
2018-06-04T02:42:16.000-0400,DROOLS-2432,Done,"If user navigates back from DRD, the selection in DRG is not updated.

h3. Manual Acceptance Test
- Select *nothing* on canvas, open some context, use back to xyz (/)
- Select *one node* on canvas, open some context, use back to xyz (/)
- Select *multiple nodes* on canvas, open some context, use back to xyz (x) DROOLS-2603
- Do *unsaved changes* on canvas, open some context, use back to xyz (/)",Minor,Guilherme Gomes,,2018-03-28T03:34:31.000-0400,[DMN Designer] Back to from DRD doesn't select proper element in DRG,Resolved,bug,Bug
2018-06-01T09:17:14.000-0400,DROOLS-2559,Done,"It seems that there might be a regression from Drools 6.x.  This line in my code worked fine:

{{KieServices ks = KieServices.Factory.get()}}

But now does not.  The only thing I did was upgrade these dependencies in my pom.xml (as well as updated my OSGi features to install the right bundles)

org.drools.drools-core
org.drools.drools-compiler
org.kie.kie-api
org.kie.soup.kie-soup-project-datamodel-api
org.kie.soup.kie-soup-commons
org.kie.soup.kie-soup-project-datamodel-commons

Lastly, there have been a few StackOverflows related to this, but none of the answers are overwhelmingly positive:

https://stackoverflow.com/questions/49295671/kieservices-factory-get-returns-null-in-kie-api7-6-0
https://stackoverflow.com/questions/47556233/drools-7-4-1-kieservices-factory-get-returns-null
https://groups.google.com/forum/#!topic/jbpm-usage/aD58UTCqu-c",Major,Mario Fusco,,2018-05-17T17:47:05.000-0400,Drools 7 KieServices.Factory.get() returns null,Resolved,bug,Bug
2018-05-29T10:22:22.000-0400,DROOLS-2530,Done,"We have an input named ""product"" that is used in a decision table.
We upgraded to Drools 7.7.0.Final and noticed that now, what was evaluated was not the object passed as parameter, but an object of type ProductFunction.
The same issue is present in version 7.5.0.Final and 7.6.0.Final. It was working fine previously.

I think the issue is coming from the method getAllValues() of EvaluationContextImpl. Maybe the stack should be reversed before iterating over it and putting the values in the map.",Critical,Fedor Gavrilov,,2018-05-07T04:36:21.000-0400,"DMN Decision Table - wrong evaluation of parameter named ""product""",Closed,bug,Bug
2018-05-29T19:12:15.000-0400,DROOLS-2435,Cannot Reproduce,"If user edits two decision nodes concurrently, then active entries are not highlighted correctly.",Minor,Guilherme Gomes,,2018-03-28T04:38:07.000-0400,[DMN Designer] Active entries highlight between navigation,Closed,bug,Bug
2018-05-29T11:44:18.000-0400,DROOLS-2596,Done,"There is a problem with adding new rules via KieScanner. If I add new .drl files to rules artifact - new rules are not fired. KieScanner successfully updates artifact, it applies changes to previously loaded rules, but it does not see new rules.
I've created a simple project reproducing this bug.

Steps to reproduce:
- unpack drools7_bug and drools7_bug_rules projects
- build drools7_bug (mvn clean install)
- updated repository url in drools7_bug_rules pom, deploy it
- run Main in drools7_bug. rule1 is fired, prints to stderr once a second.
- copy rule2.drl from src/main/tmp to src/main/resources. change output string in rule1.
- deploy artifact
- now I expect both rules fired, but only rule1 is works, no output from rule2. Make sure new artifact was loaded in scanner jmx bean. Rule1 writes new string to stderr, it was updated.
- now simply restart Main, both rules are fired.

There are no error or warning, new rules simply don't work. Am I doing something wrong?

Same scenario worked perfect until version 7.5.0. You can update version in pom and same scenario passes successfully. 7.6.0 and 7.7.0 don't though

I added api module with pojos just to reproduce our usecase as close as possible.",Major,Mario Fusco,,2018-05-29T06:33:11.000-0400,KieScanner does not load new rules,Resolved,bug,Bug
2018-05-29T19:14:57.000-0400,DROOLS-2431,Cannot Reproduce,"If DMN Designer enters full screen mode, its header has has different height as navigator, see the attachment. Compare header height in *Decision Navigator* part and *New DMN diagram* part.",Trivial,Guilherme Gomes,,2018-03-28T02:32:35.000-0400,[DMN Designer] Navigator has not same header height in full screen mode,Closed,bug,Bug
2018-05-29T03:48:31.000-0400,DROOLS-2591,Done,Re-loading updated SNAPSHOT versions of a KJar from a remote maven repository seems to be broken since 7.1.0. My code is working for 7.0.0 but not for 7.1.0 and 7.7.0. I did not test versions in between. ,Major,Mario Fusco,,2018-05-28T00:22:14.000-0400,Re-Loading of updated SNAPSHOT KJars is broken,Resolved,bug,Bug
2018-05-29T04:03:56.000-0400,DROOLS-2339,Done,"This issues has been originally reported against OptaPlanner, see the linked issues.

PR with a reproducer will follow.",Major,Mario Fusco,,2018-02-19T11:06:57.000-0500,Improper handling of FileSystemResource on Windows,Resolved,bug,Bug
2018-05-29T02:17:25.000-0400,DROOLS-2434,Cannot Reproduce,Clear of expression in DRD is not reflected in navigator. See steps to reproduce.,Minor,Guilherme Gomes,,2018-03-28T04:17:48.000-0400,[DMN Designer] Navigator reaction on clear command,Closed,bug,Bug
2018-05-29T02:21:20.000-0400,DROOLS-2433,Cannot Reproduce,"If user undo action ""Navigate to DRD"", then he will be unable to click on canvas.",Major,Guilherme Gomes,,2018-03-28T03:59:50.000-0400,[DMN Designer] Can not click to canvas after DRD navigation undo,Closed,bug,Bug
2018-03-13T09:21:08.000-0400,DROOLS-1795,Out of Date,"If a condition BRL column is added to a DT with bound variables that are used in an action column and that variable name is subsequently changed, the attached error message occurs when updating the action column with the new variable name.   In the attached message the original variable name is 'app'.  Hitting 'ok' returns you to the DT which has actually refactored the DT with the new variable name and validation is successful.  ",Minor,Mark Coble,,2017-09-20T12:27:13.000-0400,[Guided Decision Table] Invalid error message when renaming bound variable name in conditional BRL column.,Closed,bug,Bug
2018-03-26T07:34:07.000-0400,DROOLS-1936,Cannot Reproduce,User is unable to delete just connection between elements and preserve previously connected elements.,Minor,Michael Anstis,,2017-08-08T04:50:54.000-0400,[DMN Editor] Connection between elements can not be deleted,Closed,bug,Bug
2018-03-14T03:57:52.000-0400,DROOLS-2171,Cannot Reproduce,"After running for a couple hours, it got the follow NPE.

java.lang.NullPointerException: null
	at org.drools.core.common.TupleSetsImpl.setNextTuple(TupleSetsImpl.java:349) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.common.TupleSetsImpl.removeUpdate(TupleSetsImpl.java:205) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.common.TupleSetsImpl.addDelete(TupleSetsImpl.java:110) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.SegmentPropagator.processPeerDeletes(SegmentPropagator.java:109) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.SegmentPropagator.processPeers(SegmentPropagator.java:48) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.SegmentPropagator.propagate(SegmentPropagator.java:41) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:347) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1299) ~[drools-core-7.4.1.Final.jar:7.4.1.Final]",Critical,Mario Fusco,,2017-12-08T14:43:59.000-0500,NullPointerException in drools core ,Resolved,bug,Bug
2018-05-22T13:48:36.000-0400,DROOLS-2187,Done,"When test LiveQueriesBadResultTest.testOfBadParameters is run with ignoring the expected exception, it fails on NPE with this stacktrace [1]. This might be related to problem from DROOLS-2186 [2].

[1] https://gist.github.com/baldimir/b6ad1182ce1ad816b2ad47afa8210e79
[2] https://issues.jboss.org/browse/DROOLS-2186",Minor,Mario Fusco,,2017-12-18T07:30:07.000-0500,Test LiveQueriesBadResultTest.testOfBadParameters fails on NPE,Resolved,bug,Bug
2018-05-22T13:48:18.000-0400,DROOLS-2186,Done,"When running test QueryBadResultTest.testQueryCalledWithoutParamsButItHasParams without checking RuntimeException, the test fails with this stacktrace [1].

[1] https://gist.github.com/baldimir/2cf8ff7079bed2284b38096fa7ab9a23",Minor,Mario Fusco,,2017-12-18T06:54:20.000-0500,ArrayIndexOutOfBoundsException thrown when evaluating query with || operator ,Resolved,bug,Bug
2018-04-16T18:47:29.000-0400,DROOLS-2342,Done,"Drools eclipse plugin contains Kie Navigator tool which uses git structure and rest calls to connect to kie-wb. According to changes made in kie-wb 7.7.0 the tooling should be updated.

The rest api and the git structure changed. and the kie navigator doesn't work. ",Major,Tiago Bento,,2017-10-11T08:03:29.000-0400,Update Kie Navigator to the new git/rest structure,Closed,bug,Bug
2018-04-09T04:04:25.000-0400,DROOLS-2138,Done,"I'm sorry if this is no the correct place to report this but when building my project with jdk9, I get this warning:
{code}
[WARNING] Failed to build parent project for com.sun.xml.bind.mvn:jaxb-bundles:pom:2.2.11
[WARNING] Failed to build parent project for com.sun.xml.bind:jaxb-core:jar:2.2.11
[WARNING] Unable to obtain POM for artifact : com.sun.xml.bind:jaxb-core:jar:2.2.11:compile
org.apache.maven.project.InvalidProjectModelException: Some problems were encountered while processing the POMs:
[ERROR] 'dependencyManagement.dependencies.dependency.systemPath' for com.sun:tools:jar must specify an absolute path but is ${tools.jar} @ com.sun.xml.bind.mvn:jaxb-parent:[unknown-version], /home/petar/.m2/repository/com/sun/xml/bind/mvn/jaxb-parent/2.2.11/jaxb-parent-2.2.11.pom, line 164, column 29
 for project 
	at org.apache.maven.project.DefaultMavenProjectBuilder.transformError(DefaultMavenProjectBuilder.java:193)
	at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:240)
	at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:251)
	at org.codehaus.mojo.license.api.DefaultDependenciesTool.loadProjectDependencies(DefaultDependenciesTool.java:233)
	at org.codehaus.mojo.license.api.DefaultThirdPartyHelper.loadDependencies(DefaultThirdPartyHelper.java:152)
	at org.codehaus.mojo.license.AddThirdPartyMojo.loadDependencies(AddThirdPartyMojo.java:294)
	at org.codehaus.mojo.license.AbstractAddThirdPartyMojo.init(AbstractAddThirdPartyMojo.java:400)
	at org.codehaus.mojo.license.AbstractLicenseMojo.execute(AbstractLicenseMojo.java:169)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:154)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:146)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)
	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:309)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:194)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:107)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:993)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:345)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:191)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
{code}

which happens to be because of the jaxb dependency you have here:

https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-remote/kie-server-client/pom.xml#L105

which requires the {{tools.jar}} (from jaxb-parent-2.2.11 pom.xml):
{code}
            <!-- JDK dependencies -->
            <dependency>
                <groupId>com.sun</groupId>
                <artifactId>tools</artifactId>
                <version>1.6</version>
                <scope>system</scope>
                <systemPath>${tools.jar}</systemPath>
            </dependency>
{code}
",Major,Michael Biarnes Kiefer,,2017-11-16T02:57:49.000-0500,Upgrade Jaxb depedency,Resolved,bug,Bug
2018-02-26T14:29:56.000-0500,DROOLS-2343,Done,If the context editor is closed the attached error appears.,Critical,Michael Anstis,,2018-02-21T08:05:05.000-0500,[DMN Designer] Closing Context editor causes error,Resolved,bug,Bug
2018-02-26T11:51:35.000-0500,DROOLS-2310,Done,"When importing an example project into the workbench, older versions would automatically navigate the User to the Library screen. However in {{master}} (as of the date of this JIRA) after the import the User is left on the ""Try example"" screen. The User needs to manually click on the teams breadcrumb to get a list of projects.  IDK if this is deliberate.  

[~adriel.paredes] This may have nothing to do with the recent changes you made; in which case perhaps just reassign to [~paulovmr] for consideration.",Major,Adriel Paredes,,2018-02-08T06:58:06.000-0500,After importing an example project you are no longer taken to Library screen,Resolved,bug,Bug
2018-02-22T04:51:21.000-0500,DROOLS-2109,Done,The attached dialogue shows missing descriptions for table format and file selector.,Optional,Jozef Marko,,2017-11-03T05:21:09.000-0400,[XLS Decision Table] New Asset Dialogue misses descriptions,Resolved,bug,Bug
2018-02-23T04:28:05.000-0500,DROOLS-2332,Done,Performance is observed to be poor with many nested grids.,Major,Michael Anstis,,2018-02-19T04:27:49.000-0500,[DMN Editor] Performance poor for lots of nested tables,Resolved,bug,Bug
2018-02-20T05:48:59.000-0500,DROOLS-2113,Duplicate Issue,There is problem if From Accumulate expression iterates over List field of a Data Object.,Major,Michael Anstis,,2017-11-08T04:32:29.000-0500,[Guided Rule] From Accumulate using a List Field of a Data Object,Closed,bug,Bug
2018-02-20T06:27:21.000-0500,DROOLS-2338,Done,"If a directory where any files are placed contains spaces 
MemoryFileSystem.getFile(String path) returns object with truncated name.

To fix this error (in version 7.4.0) it is nessassary line 107  
*String name = decode( path ).substring( lastSlashPos + 1 );*
   replace with 
*String name = decode( path.substring( lastSlashPos + 1 ) );*
",Major,Mario Fusco,,2018-02-19T10:22:57.000-0500,"MemoryFileSystem losts contents of files all DRL scripts become ""empty"" if directory contains a space character",Resolved,bug,Bug
2018-02-14T10:53:17.000-0500,DROOLS-2275,Done,"This error was first discovered in a proprietary application that is running in wildfly 8.2.1. Up until now I was unable to reproduce outside of the mentioned environment. After narrowing down the exact conditions that cause the error to occur I was able to create a sample project that forces the issue to occur. Below is the stack trace:

Caused by: java.lang.NullPointerException
        at org.drools.core.reteoo.BetaMemory.linkNode(BetaMemory.java:93)
        at org.drools.core.reteoo.BetaMemory.linkNode(BetaMemory.java:88)
        at org.drools.core.reteoo.SingleObjectSinkAdapter.staticDoLinkRiaNode(SingleObjectSinkAdapter.java:111)
        at org.drools.core.reteoo.SingleObjectSinkAdapter.doLinkRiaNode(SingleObjectSinkAdapter.java:93)
        at org.drools.core.reteoo.RiaPathMemory.doLinkRule(RiaPathMemory.java:52)
        at org.drools.core.reteoo.PathMemory.linkSegment(PathMemory.java:103)
        at org.drools.core.reteoo.SegmentMemory.notifyRuleLinkSegment(SegmentMemory.java:192)
        at org.drools.core.phreak.AddRemoveRule.addNewPaths(AddRemoveRule.java:452)
        at org.drools.core.phreak.AddRemoveRule.addRule(AddRemoveRule.java:123)
        at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:189)
        at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:133)
        at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
        at org.drools.core.impl.KnowledgeBaseImpl.internalAddRule(KnowledgeBaseImpl.java:1530)
        at org.drools.core.impl.KnowledgeBaseImpl.lambda$addRules$4(KnowledgeBaseImpl.java:1523)
        at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:734)
        at org.drools.core.impl.KnowledgeBaseImpl.addRules(KnowledgeBaseImpl.java:1521)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRete(KnowledgeBuilderImpl.java:1010)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildRules(KnowledgeBuilderImpl.java:2524)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.buildPackages(KnowledgeBuilderImpl.java:2450)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:109)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:99)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:473)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateKBase(KieContainerImpl.java:309)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.lambda$update$0(KieContainerImpl.java:260)
        at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:734)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:260)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:199)
        at org.drools.test.KieRuntimeManager.buildOnKfs(KieRuntimeManager.java:202)
        at org.drools.test.KieRuntimeManager.loadRule(KieRuntimeManager.java:147)
        at org.drools.test.DroolsReasonerContainer.loadRule(DroolsReasonerContainer.java:22)
        at org.drools.test.App.main(App.java:22)
        ... 6 more",Major,Mario Fusco,,2018-01-25T11:30:23.000-0500,Null pointer exception when calling updateToVersion with existing data in a stateful KieSession,Resolved,bug,Bug
2018-02-14T09:06:14.000-0500,DROOLS-2306,Done,"Make a table with two rows. LHS comparing if age == 0 and RHS setting approved = true. These can be fields of the same class.

The rows are redundant.

Save and reopen the editor. 
Change first row to approved=false and then back to true.
After the first change the rows should conflict and after the second they should be redundant again.

How ever the verification report says the rows are in conflict and not redundant.

[https://user-images.githubusercontent.com/1079279/34523101-292c9d60-f07d-11e7-8b42-aac69ea3f607.gif|https://user-images.githubusercontent.com/1079279/34523101-292c9d60-f07d-11e7-8b42-aac69ea3f607.gif]",Major,Toni Rikkola,,2018-02-07T06:00:04.000-0500,Decision Table Verification does not update correctly,Resolved,bug,Bug
2018-02-14T05:17:06.000-0500,DROOLS-2312,Cannot Reproduce,None,Critical,Guilherme Gomes,,2018-02-08T10:08:11.000-0500,[GDT Graph] Graph can not be created,Closed,bug,Bug
2018-02-19T03:08:57.000-0500,DROOLS-2323,Done,"Guided Rule Editor and its field value tooltips are not well readable for the user due to the amount of text in the tooltip. The tooltips should be updated in the following way:
- From
--  !Incorrect template key help.png|thumbnail! 
- To
--  !Screen Shot 2018-02-01 at 10.37.02 AM.png|thumbnail! ",Optional,Jozef Marko,,2018-02-15T09:34:43.000-0500,[Guided Rule Editor] Field Value Tooltips are not well readable,Resolved,bug,Bug
2017-11-27T10:38:18.000-0500,DROOLS-2117,Done,None,Major,Matteo Mortari,,2017-11-08T10:55:31.000-0500,Improve Msg.ERROR_EVAL_NODE_DEP_WRONG_TYPE,Resolved,bug,Bug
2017-11-27T05:36:10.000-0500,DROOLS-1799,Done,"It should be possible to bind the field of the constraint, even if the constraint calculation type is ""formula"". Examples of such rules can be seen in the [PR|https://github.com/kiegroup/drools/pull/1552].",Major,Jozef Marko,,2017-10-24T04:16:16.000-0400,[Guided Decision Table] Field can not be bound if formula calculation type is used,Resolved,bug,Bug
2017-11-30T07:09:06.000-0500,DROOLS-1798,Done,In the From Accumulate expressions you would like typically to bind one single value (e.q. java.lang.Number) to result variable. The problem of guided rule editor is that you can not use the imported java.lang.Number.,Trivial,Jozef Marko,,2017-07-18T03:15:58.000-0400,[Guided Rule Editor] Unable to construct From Accumulate,Resolved,bug,Bug
2017-11-09T08:56:22.000-0500,DROOLS-2120,Done,"In FEEL, a ""date"" can replace a ""date and time"" value anywhere it is required, by implicitly converting it with time set to ""00:00:00"".

Currently, addition and subtraction between date and duration is not working as it should, based on table 45 of the DMN spec. E.g:

date + duration
date - duration
",Major,Edson Tirelli,,2017-11-08T16:55:25.000-0500,"in FEEL, date +/- duration is returning null",Resolved,bug,Bug
2017-11-09T10:06:32.000-0500,DROOLS-2111,Done,"When tests from module kie-dmn-core are run on JDK 9, they fails on ConcurrentModificationException with the following stacktrace [1].

[1] https://gist.github.com/baldimir/92b270fa5527133de8a605c456b136ff",Major,Tibor Zimanyi,,2017-11-07T10:10:02.000-0500,JDK 9 on drools DMN: tests in kie-dmn-core fails on ConcurrentModificationException in KnowledgeBuilderImpl,Resolved,bug,Bug
2018-01-17T05:11:08.000-0500,DROOLS-2083,Explained,"The DSL sentences are defined like:
- [when] *definition* = real rule

If the *definition* contains *$* character, then the DSL sentence can not be used properly in the guided decision table.",Major,Michael Anstis,,2017-10-31T07:36:41.000-0400,[Guided Decision Table] DSL can not contain $ in the definition,Closed,bug,Bug
2017-11-27T10:39:10.000-0500,DROOLS-2112,Done,None,Major,Matteo Mortari,,2017-11-08T03:24:01.000-0500,Missing DMN info/input req dependency fail on kie-server with NPE,Resolved,bug,Bug
2017-11-14T05:50:12.000-0500,DROOLS-1938,Out of Date,None,Minor,Michael Anstis,,2017-08-07T07:18:55.000-0400,[DMN Editor] Context table is not cleared,Resolved,bug,Bug
2017-11-20T17:20:06.000-0500,DROOLS-2119,Done,"The spec defines an axiom of [a]=a , i.e., singleton lists are equal to the single element and vice-versa.

The current implementation for the append() function requires a list as the first element, but should accept a single element as well.",Major,Edson Tirelli,,2017-11-08T16:35:19.000-0500,append() function does not support non-list first argument,Resolved,bug,Bug
2017-11-27T10:34:21.000-0500,DROOLS-2123,Done,None,Major,Matteo Mortari,,2017-11-09T05:19:15.000-0500,Signavio extensions module was missing in the kie-dmn-bom,Resolved,bug,Bug
2018-01-04T09:09:37.000-0500,DROOLS-2175,Done,There are two problem after removal one of linked tables. For more details see Steps to Reproduce.,Minor,Michael Anstis,,2017-09-12T09:10:05.000-0400,[Guided Decision Table Graph] Refresh after removal of table,Resolved,bug,Bug
2017-11-24T03:02:39.000-0500,DROOLS-2122,Done,"If new drools project is created with build using Java and Drools classes, error is displayed after drl file is opened.

This blocks also other functions like add a breakpoint or show content assist menu.",Blocker,Mario Fusco,,2017-11-09T04:06:43.000-0500,Error when drl file is opened with in project with runtime classes ,Closed,bug,Bug
2017-11-27T11:40:18.000-0500,DROOLS-1763,Rejected,"We have been using Drools since 2.x.   
Currently we use 7.0.0.Beta6 which works.

We can't upgrade because since 7.0.0.Beta7 rules dependent on the consequence of another rule are not firing for some reason.  This happens for us on 7.0.0.Beta7 through to 7.3.0.Final.

Consider the following two rules.   When run on 7.0.0.Beta6 both rules fire.    From Beta7 through to 7.3.0.Final, only the SQ rule fire, despite the RC rule passing its conditions

{code}
rule ""H2""
  salience -300
  when
    segment:SegmentWithTax(
      containsTax(""SQ"")
      , notContainsTax(""H2"", ""RC"")
    )
  then
    segment.addPercentageTaxEntry(taxCodeMap,""SQ"",""RC_13_PERCENT"");
end

rule ""SQ""
  when
    segment:SegmentWithTax(
      !containsTax(""SQ"")
    ) 
  then
    modify(segment) {
      addTaxEntry(taxCodeMap,""SQ_TRANSFER_TRANSIT_LESS_THAN_FOUR_HOURS"")
    }
end
{code}

Will attach Drools trace logging output * 2.   One for  [^7.0.0.Beta6.txt] , one for  [^7.3.0.Final.txt] .
",Major,Mario Fusco,,2017-10-13T20:05:59.000-0400,Dependent rule not firing,Resolved,bug,Bug
2017-11-27T10:37:37.000-0500,DROOLS-1775,Done,"When test JavaBackendTypeTest.testPerson from kie-dmn-feel module is run on JDK 9, it fails on ConcurrentModificationException with the following stacktrace [1].

[1] https://gist.github.com/baldimir/d19c772ae170546047bd4f9fa6c80dd6",Major,Matteo Mortari,,2017-10-25T09:53:31.000-0400,JDK 9 on drools DMN: JavaBackendTypeTest.testPerson fails on ConcurrentModificationException,Resolved,bug,Bug
2018-01-02T09:51:35.000-0500,DROOLS-2161,Done,"Recursive function definitions in contexts are raising compile time errors but are executing correctly.

See attached model for example. Functions ""f"" and ""h"" raise compile time errors.",Major,Fedor Gavrilov,,2017-12-01T23:09:37.000-0500,Recursive function definitions in context entries are raising compile time errors,Resolved,bug,Bug
2017-12-06T12:11:32.000-0500,DROOLS-2166,Done,"When indexing assets in projects which have some problems with pom.xml (e.g. the parent of that pom can't be resolved), there's the following exception in server.log


{code:java}
14:34:46,627 ERROR [stderr] (Thread-144) java.lang.NullPointerException
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.scanner.KieModuleMetaDataImpl.init(KieModuleMetaDataImpl.java:167)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.scanner.KieModuleMetaDataImpl.<init>(KieModuleMetaDataImpl.java:86)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.scanner.KieModuleMetaData$Factory.newKieModuleMetaData(KieModuleMetaData.java:60)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.backend.builder.core.Builder.getKieModuleMetaDataIgnoringErrors(Builder.java:593)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.backend.builder.service.BuildInfoImpl.getKieModuleMetaDataIgnoringErrors(BuildInfoImpl.java:46)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.datamodel.backend.server.cache.ProjectDataModelOracleBuilderProvider.newBuilder(ProjectDataModelOracleBuilderProvider.java:62)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.datamodel.backend.server.cache.LRUProjectDataModelOracleCache.makeProjectOracle(LRUProjectDataModelOracleCache.java:80)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.datamodel.backend.server.cache.LRUProjectDataModelOracleCache.assertProjectDataModelOracle(LRUProjectDataModelOracleCache.java:72)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.datamodel.backend.server.cache.LRUProjectDataModelOracleCache$Proxy$_$$_WeldClientProxy.assertProjectDataModelOracle(Unknown Source)
14:34:46,627 ERROR [stderr] (Thread-144) 	at org.kie.workbench.common.services.datamodel.backend.server.DataModelServiceImpl.getProjectDataModel(DataModelServiceImpl.java:91)
{code}

The root cause is that kieModule.getPomModel() [here|https://github.com/kiegroup/drools/blob/master/kie-ci/src/main/java/org/kie/scanner/KieModuleMetaDataImpl.java#L167] returns null, because pom model is [not created in this case|https://github.com/kiegroup/drools/blob/master/drools-compiler/src/main/java/org/drools/compiler/kie/builder/impl/AbstractKieModule.java#L374-L388] because it can't be parsed or can't be validated.

In this case we should at least avoid many NPEs being shown in server.log by doing null check and doing nothing if getPomModel() returns null",Major,Mario Fusco,,2017-12-06T09:30:55.000-0500,NPE in KieModuleMetaDataImpl in projects with invalid pom.xml,Resolved,bug,Bug
2017-12-12T05:48:53.000-0500,DROOLS-2164,Done,New Expression Column doesn't respect the width of the parent column in the context table. It can be seen if the context table contains multiple entries.,Major,Michael Anstis,,2017-12-06T03:55:41.000-0500,[DMN Editor] New Expression Columns doesn't respect width of parent column,Resolved,bug,Bug
2018-01-03T05:52:39.000-0500,DROOLS-2149,Done,The options for adding row or column into guided decision table are not disabled correctly in special case.,Minor,Michael Anstis,,2017-11-23T05:27:58.000-0500,Row and column can be added to read only table,Resolved,bug,Bug
2017-12-11T05:48:19.000-0500,DROOLS-2163,Done,"Context table offers 5 types of entries while each entry has label of its own type (Literal Expression, Function Relation etc.) However this label is not shown if the user scroll the table.",Major,Michael Anstis,,2017-12-06T02:23:56.000-0500,[DMN Editor] Context table doesn't show entry type label if table is scrolled,Resolved,bug,Bug
2018-01-19T18:36:56.000-0500,DROOLS-2155,Done,"DMN table editor should use the full canvas width that is available (minus panels, toolbars, etc.) It should not appear as a smaller fixed size area, with scrollbars, within the canvas. ",Minor,Michael Anstis,,2017-11-28T13:54:59.000-0500,Table editor should use full canvas area available,Resolved,bug,Bug
2017-11-06T09:42:30.000-0500,DROOLS-2080,Done,"Currently, the compiler enforces that all output columns in a Decision Table with PRIORITY hitpolicy must have an output values list.

This is wrong, only one output column must have the output values list.

This is the commit when the behaviour was changed:

https://github.com/kiegroup/drools/pull/1176/commits/33ff310c5a302abff6fd40f879812c499d87bea3

This check needs to be changed appropriately

https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-core/src/main/java/org/kie/dmn/core/compiler/DMNEvaluatorCompiler.java#L445
",Major,Fedor Gavrilov,,2017-10-30T10:33:16.000-0400,"On Decision Tables with Hit Policy PRIORITY, only one output column needs the output values list",Resolved,bug,Bug
2017-11-06T09:42:23.000-0500,DROOLS-2075,Done,"Currently the compiler raises an error if an output cell of a decision table is empty. E.g.:

 <semantic:outputEntry id=""_9ad23b6a-67fb-47b1-84a2-98e7859154e6"">
          <semantic:text/>
</semantic:outputEntry>

Change the compiler to accept that and treat the result as being null.",Major,Fedor Gavrilov,,2017-10-27T17:55:40.000-0400,Allow empty output cell on DTs,Resolved,bug,Bug
2017-11-08T08:41:34.000-0500,DROOLS-2108,Done,"User can upload new version of xls decision table, however the toolbar menu with version is not refreshed. User has to reopen the editor to see correct (up to date) list of versions.",Major,Jozef Marko,,2017-11-03T04:58:14.000-0400,[XLS Decision Table] Version is not refreshed after upload,Resolved,bug,Bug
2017-10-31T04:59:52.000-0400,DROOLS-1788,Done,"It's impossible to update the ""Entry point"" and ""Binding"" fields in a ""Condition Column"". See:

 !bug-1.gif|thumbnail! ",Major,Guilherme Gomes,,2017-06-12T10:33:35.000-0400,"[Guided Decision Table] ""Entry point"" and ""Binding"" cannot be updated",Resolved,bug,Bug
2017-10-26T04:20:45.000-0400,DROOLS-1772,Done,"When running tests from class org.kie.scanner.KieRepositoryScannerTest with forced jitting (jittingThreshold=0), some tests from the class fails on this stacktrace [1]. There's also this other stacktrace for one test from the class [2].

From discussion:
<mfusco> tzimanyi, in that specific test the Bean class is redefined
<mfusco> tzimanyi, the old class is unloaded from the ProjectClassLoader
<mfusco> tzimanyi, but the old jitted constraint still uses it

[1] https://gist.github.com/baldimir/105ebfd5e1452b4d5c22fe394d873719
[2] https://gist.github.com/baldimir/105ebfd5e1452b4d5c22fe394d873719",Major,Mario Fusco,,2017-10-24T08:45:49.000-0400,Constraint evaluation of jitted constraint fails on ClassCastException after incremental compilation,Resolved,bug,Bug
2017-10-31T05:05:36.000-0400,DROOLS-1801,Cannot Reproduce,"Is user wants to execute the same Work Item multiple times, he must always clear the parameter values from previous time.",Minor,Michael Anstis,,2017-06-08T05:30:57.000-0400,[Guided Decision Table] Work Item Parameter values are not initialized properly,Closed,bug,Bug
2017-10-24T03:16:48.000-0400,DROOLS-1758,Done,"Exhibit 1, the snippet block is present but not verbatim formatted:
 !image-2017-10-10-22-27-42-739.png|thumbnail! 

Exhibit 2, an allegedly snippet of code is lost in chapter text:
 !image-2017-10-10-22-29-11-525.png|thumbnail! ",Major,Matteo Mortari,,2017-10-10T16:29:25.000-0400,Code snippet in doc Traits chapter wrongly formatted,Resolved,bug,Bug
2017-11-06T07:09:42.000-0500,DROOLS-1903,Done,"Rules where the generated DRL has brackets break the editor if DSL is in use.

When DSL is in use the normal DRL lines are marked ""special"" with the > character so that the DSL detection can ignore them. Once DSL has been replaced with DRL we remove the > characters.

The codes merge brackets to the same line before the > characters are removed. This leaves > characters to the end code and they break the parser. The entire rule editor then defaults to showing the raw file data that contains a > character for each line.
",Major,Toni Rikkola,,2017-08-31T06:59:53.000-0400,GRE DSL: Multiline code blocks break the editor,Resolved,bug,Bug
2017-10-10T11:01:09.000-0400,DROOLS-1756,Done,None,Major,Matteo Mortari,,2017-10-10T10:41:45.000-0400,Align Rule Unit doc chapter to current OOPath syntax,Resolved,bug,Bug
2017-10-13T03:32:27.000-0400,DROOLS-1757,Done,In org.drools.core.base.DefaultKnowledgeHelper the modify() method has an empty implementation.  There is no documentation for this method in the interface org.drools.core.spi.KnowledgeHelper so it's unclear what this method is supposed to do (is it the same as update() or somehow different?).  But in any case it seems like an oversight for the method to do nothing at all.,Major,Mario Fusco,,2017-10-10T12:47:36.000-0400,DefaultKnowledgeHelper.modify() does nothing,Resolved,bug,Bug
2017-10-12T09:34:51.000-0400,DROOLS-1678,Done,"Having this DMN test with Unary test defined: 

{code:java}
{ test : in x, y : 20, x : [10, 20, 30], result : test( y ) }.result
{code}

The test fails on NPE with the following stacktrace:
https://gist.github.com/baldimir/630c68e766285e430a1755924ea9a66b",Major,Fedor Gavrilov,,2017-07-25T10:29:26.000-0400,"Unary test ""in"" defined before variable throws NPE",Resolved,bug,Bug
2017-10-11T10:26:48.000-0400,DROOLS-1679,Done,"When having this FEEL list with filter which is incorrect: 
{code:java}
[""a"", ""b"", ""c""][a]
{code}
the evaluation returns an empty list instead of null. Output of this test is here: 
https://gist.github.com/baldimir/18232741fdf1b425ba84d00d83edb939

I will provide PR with a reproducer today. 

",Minor,Fedor Gavrilov,,2017-07-25T10:40:01.000-0400,FEEL list filter returns empty collection when there are errors evaluating filter,Resolved,bug,Bug
2017-10-11T10:26:09.000-0400,DROOLS-1675,Done,"When compiling this [1] FEEL expression with incorrect external function definition, the compilation ends with NPE with following stacktrace [2].

[1]
{code:java}
 { maximum : function( v1, v2 ) external { missingDefiniton }, the max : maximum( 10, 20 ) }.the max
{code}

[2] https://gist.github.com/baldimir/3ebfc7c2e60ac61941c9866151ae2bbf

I will add the reproducer in my next PR with new FEEL coverage. ",Minor,Fedor Gavrilov,,2017-07-25T07:57:57.000-0400,Wrong FEEL external function definition throws NPE,Resolved,bug,Bug
2017-10-11T10:26:41.000-0400,DROOLS-1730,Done,If you have Decision A -> Decision B -> Decision A this causes a stackoverflow when executing it at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateDecision(DMNRuntimeImpl.java:282),Major,Fedor Gavrilov,,2017-09-14T17:04:23.000-0400,Cyclic information requirement generates a stackoverflow,Resolved,bug,Bug
2017-10-20T04:50:04.000-0400,DROOLS-1748,Done,"After starting workbench war (version 7.3 and 7.0, both Final) on Wildfly 10.1 domain cluster, got the issues with data source.

[Server:server-one] 13:09:07,908 WARN  [org.kie.workbench.common.screens.datasource.management.backend.DataSourceManagementBootstrap] (pool-14-thread-1) Initialize deployments task finished with errors: operation execution failed. :WFLYCTL0030: No resource definition is registered for address [(""subsystem"" => ""datasources"")]

Problem does not affect Wildfly standalone configuration, only domain configuration using profiles.
WFLYCTL0030 warning says the syntax problem using jboss-cli.sh. In domain cluster it's used /profile=full-ha/subsystem=datasource/...
In standalone syntax is: /subsystem=datasource/.

",Critical,Walter Medvedeo,,2017-10-03T09:17:29.000-0400,Drools workbench datasource on Wildfly domain.,Closed,bug,Bug
2017-10-10T09:25:55.000-0400,DROOLS-1752,Done,"substring after(“foobar”,”x”) returns “foobar” but should return “”",Major,Edson Tirelli,,2017-10-07T11:13:23.000-0400,"substring after(“foobar”,”x”) returns “foobar” but should return “”",Resolved,bug,Bug
2017-10-10T09:26:02.000-0400,DROOLS-1753,Done," replace(""0123456789"",""(\d{3})(\d{3})(\d{4})"",""($1) $2-$3"")  raises a parsing exception",Major,Edson Tirelli,,2017-10-07T12:21:57.000-0400," replace(""0123456789"",""(\d{3})(\d{3})(\d{4})"",""($1) $2-$3"")  raises a parsing exception",Resolved,bug,Bug
2017-10-13T10:51:27.000-0400,DROOLS-1670,Done,"When evaluating FEEL expression ""1 ++++++ 2"", the result is 3. This is grammatically correct, but it doesn't look good. I will provide PR with a reproducer. ",Minor,Fedor Gavrilov,,2017-07-21T08:47:23.000-0400,FEEL expression 1 ++++++ 2 passes with result 3,Resolved,bug,Bug
2017-10-11T10:25:57.000-0400,DROOLS-1667,Done,"The following FEEL expression fails to parse:

1 + if true then 1 else 2

Similar expressions might present the same problem.",Major,Fedor Gavrilov,,2017-07-19T17:52:55.000-0400,FEEL expression fails: 1 + if true then 1 else 2,Resolved,bug,Bug
2017-10-05T09:31:55.000-0400,DROOLS-1750,Out of Date,"Ever since making visible the KIE execution server in the KIE workbench, I get an error when switchting to the Project Authoring (see attachment).",Major,Edson Tirelli,,2017-10-04T12:19:32.000-0400,DroolsAuthoringPerspectiveActivity failed in OPEN (KIE Workbench 6.5.0),Closed,bug,Bug
2017-10-04T09:34:23.000-0400,DROOLS-1651,Done,"For example, if you execute the invalid attached file (kind attribute of the function isn't right - it is set to undefined) it produces an array of null. 

When calling FEELStringMarshaller.INSTANCE.marshall(decisionResult.getResult())  you get a NPE.",Major,Fedor Gavrilov,,2017-07-05T13:10:48.000-0400,FEEL String marshaller fails on list of null,Resolved,bug,Bug
2017-09-11T11:13:06.000-0400,DROOLS-1717,Done,"Having a test case like this [1], it sometimes fails on 

java.lang.RuntimeException: java.util.concurrent.ExecutionException: [Error: unable to resolve method using strict-mode: org.drools.compiler.integrationtests.facts.FactWithEnum.AnEnum()]
[Near : {... enumValue == AnEnum.SECOND ....}]

... see here [2]. When using direct imports that are commented out in the pasted example, I see very rarely also a ClassCastException. See stacktrace here [3]. 

Tested with mvel 2.2.8 on 6.5.x branch, 2.3.0 and 2.3.1 on master branch. 

[1] https://gist.github.com/baldimir/d0f5f21d5b1a383887c5ebfb6013e5af
[2] https://gist.github.com/baldimir/da5c9cb23fab2eae1576948c8ca2a4c8
[3] https://gist.github.com/baldimir/72eafe3909c21e25265cd3ee9a731d8e",Major,Mario Fusco,,2017-08-30T07:54:02.000-0400,Concurrency problems with enum constraints in MVEL,Resolved,bug,Bug
2017-09-11T08:43:12.000-0400,DROOLS-1715,Done,"When launching some Parameterized tests in parallel, I noticed that I was not getting any answer (it works with only 1 thread). When I started digging, I found that the cause was a ConcurrentModificationException thrown when iterating over events in the processEvents method of DMNDTExpressionEvaluator.

{code}
	  at java.util.ConcurrentModificationException.<init>(ConcurrentModificationException.java:78)
	  at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)
	  at java.util.ArrayList$Itr.next(ArrayList.java:851)
	  at org.kie.dmn.core.ast.DMNDTExpressionEvaluator.processEvents(DMNDTExpressionEvaluator.java:101)
	  at org.kie.dmn.core.ast.DMNDTExpressionEvaluator.evaluate(DMNDTExpressionEvaluator.java:92)
	  at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateDecision(DMNRuntimeImpl.java:337)
	  at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateAll(DMNRuntimeImpl.java:92)
{code}",Major,Matteo Mortari,,2017-08-25T05:14:44.000-0400,Running DMN evaluation in parallel causes a ConcurrentModificationException,Resolved,bug,Bug
2017-09-06T04:38:00.000-0400,DROOLS-1723,Done,"Rule engine compiles the following DRL with no exception, despite the erroneous expression *window:len*.
From behavior, it seems that the last part of the condition is simply disregarded.

{code}
rule ""Risky Event""
no-loop 

	when
		$plcEvent: PLCEvent( input2 > 10.0 ) over window:len(3)
	then
		insert(new RiskyEvent($plcEvent));
				
end
{code}
",Major,Mario Fusco,,2017-09-06T03:48:16.000-0400,Rule compiler does not fail for misspelled sliding window predicates,Resolved,bug,Bug
2017-09-07T09:06:07.000-0400,DROOLS-1722,Done,"It seems that at the moment, boxed function invocations are unable to invoke FEEL built in functions. We need to remove this limitation.",Major,Edson Tirelli,,2017-09-05T10:58:11.000-0400,DMN Boxed Invocations are not resolving FEEL functions,Resolved,bug,Bug
2017-08-09T09:28:07.000-0400,DROOLS-1665,Duplicate Issue,"I'm not sure if it is a bug, but look like it. I have a simple rule like this

{code:java}
package test;

import drools.Attr;
import drools.Player;
import drools.Ops;

import java.lang.Number;
import java.util.List;
import java.util.Date;

rule ""failing""
	dialect ""mvel""
	when
		pp : Player()

        Number(doubleValue <= 5) from accumulate(Attr(inHangar == true, $lv : getLevel()) from pp.attrs, max( $lv ))

		bat : Ops()

		res : List( )
	then
        System.out.println(""works"");
end
{code}

It's execution fails with exception
{noformat}
java.lang.RuntimeException: Unknown property: level

	at org.drools.core.reteoo.PropertySpecificUtil.setPropertyOnMask(PropertySpecificUtil.java:105)
	at org.drools.core.reteoo.PropertySpecificUtil.calculatePatternMask(PropertySpecificUtil.java:97)
	at org.drools.core.reteoo.PropertySpecificUtil.calculatePositiveMask(PropertySpecificUtil.java:68)
	at org.drools.core.reteoo.LeftTupleSource.initDeclaredMask(LeftTupleSource.java:257)
	at org.drools.core.reteoo.BetaNode.initDeclaredMask(BetaNode.java:191)
	at org.drools.core.reteoo.LeftTupleSource.initMasks(LeftTupleSource.java:222)
	at org.drools.core.reteoo.BetaNode.<init>(BetaNode.java:139)
	at org.drools.core.reteoo.AccumulateNode.<init>(AccumulateNode.java:83)
	at org.drools.core.reteoo.builder.PhreakNodeFactory.buildAccumulateNode(PhreakNodeFactory.java:129)
	at org.drools.core.reteoo.builder.AccumulateBuilder.build(AccumulateBuilder.java:104)
	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:118)
	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:79)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:108)
	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:164)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:136)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1714)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1704)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:976)
	at org.drools.core.impl.KnowledgeBaseImpl.access$000(KnowledgeBaseImpl.java:128)
	at org.drools.core.impl.KnowledgeBaseImpl$1.run(KnowledgeBaseImpl.java:764)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:772)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:761)
	at org.drools.core.impl.KnowledgeBaseImpl.addKnowledgePackages(KnowledgeBaseImpl.java:283)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:639)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:574)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:555)
{noformat}

But, it I reorder the rule conditions, like this for example
{code:java}
package test;

...

rule ""failing""
	dialect ""mvel""
	when
		pp : Player()

		bat : Ops()

               Number(doubleValue <= 5) from accumulate(Attr(inHangar == true, $lv : getLevel()) from pp.attrs, max( $lv ))

		res : List( )
	then
        System.out.println(""works"");
end
{code}

It works. I just move condition with accum one line lower (after Ops condition) and it works. 

I guess this is a bug? Both version worked in drools 6.0 just fine.",Major,Mario Fusco,,2017-07-17T12:20:09.000-0400,Accumulator does not see bean property,Resolved,bug,Bug
2017-08-11T16:28:28.000-0400,DROOLS-1695,Done,"When running test UnmarshalMarshalTest, a lot of tests fail with similar output [1]. It looks like it is related to getting nulls here when reading attribute prefixes [2].

[1] https://gist.github.com/baldimir/bbb58fb1dfb3df41b74c012d54895ce9
[2] https://github.com/kiegroup/drools/blob/b007d9d50d5fa9f7eb4c645f298765dab5f28878/kie-dmn/kie-dmn-backend/src/main/java/org/kie/dmn/backend/marshalling/CustomStaxReader.java#L80",Major,Matteo Mortari,,2017-08-04T08:45:32.000-0400,"When unmarshalling, the reader returns attributePrefix as null on IBM JDK",Resolved,bug,Bug
2017-08-15T05:22:01.000-0400,DROOLS-1694,Done,"I am working on a multi-module BRMS project, with each module encapsulating a set of rules forming a single knowledge base. There is a ""packaging"" module which inherits each of these modules in order to generate a KJAR for deployment purposes. The application then utilises this KJAR via the KieScanner/ReleaseId approach to facilitate dynamic rule loading at runtime and decoupling of application/rules. 

Having taken the above approach I have encountered an issue where the master build fails when building the ""packaging"" module as part of the main project build. If the module is built on it's own, then it completes without error.

The error reported is:

{{[ERROR] Failed to execute goal org.kie:kie-maven-plugin:6.3.0.Final:build (default-build) on project rules: Execution default-build of goal org.kie:kie-maven-plugin:6.3.0.Final:build failed: Illegal class for global. Expected [org.drools.template.parser.DefaultGenerator], found [org.drools.template.parser.DefaultGenerator]. -> [Help 1]}}

Having liased with Maciej Swiderski he has asked me to report it as a bug.",Major,Massimiliano Dessi,,2017-08-04T06:04:12.000-0400,"Inherited kbases, across multiple modules, fails to build via the kie-maven-plugin",Resolved,bug,Bug
2017-08-09T10:07:03.000-0400,DROOLS-1650,Done,"This is requesting to retire jsr94 because we can't find the source code license information for it. 
",Major,Mario Fusco,,2017-07-05T03:17:31.000-0400,Exclude the jsr94 from Drools build,Resolved,bug,Bug
2018-06-23T12:43:33.000-0400,DROOLS-2645,Done,None,Major,Mario Fusco,,2018-06-21T03:02:04.000-0400,Executable model doesn't generate getter and setter methods for declared types with more than 64 fields ,Resolved,bug,Bug
2018-06-19T09:40:09.000-0400,DROOLS-2641,Done,None,Major,Mario Fusco,,2018-06-19T09:35:20.000-0400,Executable model doesn't support parsing of a constraint containing a ternary operator,Resolved,bug,Bug
2018-06-16T11:37:46.000-0400,DROOLS-2637,Done,None,Major,Mario Fusco,,2018-06-15T12:55:36.000-0400,Pattern type of accumulated result is mistakenly overwritten by accumulate function type in executable model generation,Resolved,bug,Bug
2018-05-23T01:08:59.000-0400,DROOLS-2526,Done,"Test scenario can not be run from internet explorer. Other browsers works fine.

h2. Test
[TestScenarioTest|https://github.com/jboss-integration/bxms-qe-tests/blob/7.5.x/test-kie-wb/src/test/java/org/jboss/qa/brms/authoring/scenario/feature/TestScenarioTest.java]

h2. PR Acceptance test
# Check steps to reproduce in new project (/)
# Check steps to reproduce in existing project (/)",Critical,Toni Rikkola,,2018-05-04T02:51:56.000-0400,[Test Scenario][IE] Can't be run,Resolved,bug,Bug
2018-05-22T10:21:51.000-0400,DROOLS-2570,Done,"When having a test case like this [1], the build ends with errors. See the build output here [2]. To reproduce the issue, just paste the test to ImportsTest test class. 

[1] https://gist.github.com/baldimir/6d27b37d157abd87b846e0947b1011cb
[2] https://gist.github.com/baldimir/71809d454cce4e26ad7080b1fa5655a8",Minor,Mario Fusco,,2018-05-21T06:09:41.000-0400,DRL function import doesn't work using static inner class,Resolved,bug,Bug
2018-05-22T05:50:49.000-0400,DROOLS-2557,Done,"Under the conditions:
- ""from"" clause with multiple rules
- calling update()
- Pojo doesn't implement hashCode/equals (to be precise, only hashCode() in Child object seems to matter)

A rule is activated/fired unexpectedly.

Please see Unit test for details.",Major,Mario Fusco,,2018-05-17T06:08:44.000-0400,Unexpected rule fire by sharing From and pojo without hashCode/equals,Resolved,bug,Bug
2018-05-22T11:21:19.000-0400,DROOLS-2560,Done,"If user tries to change magnet of a connection between two nodes, there is shown attached error dialog. Setting as blocker because even after confirming the dialog, it appears again and again.

h2. PR Acceptance test
- Adjust connections where source is (/)
-- BKM, BKS, Decision, Input
- Adjust connections where target is (/)
-- BKM, BKS, Decision, Annotation",Blocker,Michael Anstis,,2018-05-18T06:32:28.000-0400,[DMN Designer] Change magnet of connection,Resolved,bug,Bug
2018-05-21T04:20:55.000-0400,DROOLS-2543,Done,"When having multivalue cell in DMN decision table with this values: ""? > 10, 90"", FEEL compilation fails with the following output [1]. This multivalue works when it is closed in brackets like this: ""(? > 10), 90"" or when the condition order is switched like this: ""90, ? > 10"". 

Reproducer can be found here [2].

[1] https://gist.github.com/baldimir/d6f51198696e4f2b84d3eb0aaf2a9815
[2] https://github.com/kiegroup/drools/pull/1898/files#diff-388002c5a2500f2ec492118306fe86c2R474",Major,Matteo Mortari,,2018-05-14T03:02:23.000-0400,"""?"" doesn't work with multi-conditions in decision table",Resolved,bug,Bug
2018-05-21T04:19:29.000-0400,DROOLS-2544,Done,"When I have ""?"" extended unary test in a quantified expression, the evaluation fails with the following output [1]. Reproducer can be found here [2].

[1] https://gist.github.com/baldimir/39e72b09768601f155f7d953a93f59fa
[2] https://github.com/kiegroup/drools/pull/1898/files#diff-388002c5a2500f2ec492118306fe86c2R502",Major,Matteo Mortari,,2018-05-14T03:40:46.000-0400,"Using ""?"" with quantified expression fails on java.lang.ArrayStoreException",Resolved,bug,Bug
2018-05-18T10:28:23.000-0400,DROOLS-2536,Done,"When running incremental compilation tests [1] with the executable model, there are various failures. To run the tests, uncomment the model runs [2][3][4][5][6].

[1] https://github.com/kiegroup/drools/tree/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation
[2] https://github.com/kiegroup/drools/blob/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation/AddRemoveRulesTest.java#L78
[3] https://github.com/kiegroup/drools/blob/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation/AddRuleTest.java#L58
[4] https://github.com/kiegroup/drools/blob/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation/IncrementalCompilationCepTest.java#L74
[5] https://github.com/kiegroup/drools/blob/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation/IncrementalCompilationTest.java#L109
[6] https://github.com/kiegroup/drools/blob/master/drools-test-coverage/test-compiler-integration/src/test/java/org/drools/compiler/integrationtests/incrementalcompilation/RemoveRuleTest.java#L68",Major,Mario Fusco,,2018-05-09T07:16:51.000-0400,Executable model - incremental compilation tests fail with the model,Resolved,bug,Bug
2018-05-18T04:56:17.000-0400,DROOLS-2555,Done,Welcome page layout is broken and background image is not resized to the entire width. Business Automation logo is hidden.,Critical,Toni Rikkola,,2018-05-16T01:19:59.000-0400,Broken welcome page layout in IE11,Resolved,bug,Bug
2018-05-17T10:22:05.000-0400,DROOLS-2538,Done,"Save of the diagram throws NPE, see the attachment.

h2. PR Acceptance test
- Check saving of empty diagram (/)
- Check saving of diagram containing (/)
-- Nodes
-- Nodes and connections
-- Non empty decision nodes",Critical,Michael Anstis,,2018-05-10T03:36:45.000-0400,[DMN Designer] Save throws NPE,Resolved,bug,Bug
2018-05-14T05:46:00.000-0400,DROOLS-2537,Done,"When using kcontext in RHS as a RuleContext, the execution throws incompatible types exception [1]. The problem could be that kcontext is translated to Drools and not to DroolsImpl in the model DSLs. 

PR with a reproducer is here: https://github.com/kiegroup/drools/pull/1896/files#diff-67291fa531041ec60d75478a86b936e9R103

[1] https://gist.github.com/baldimir/94cd43fc10215dd3ef8dad16a0e830d8",Major,Mario Fusco,,2018-05-10T03:06:20.000-0400,Executable model - kcontext cannot be used as a RuleContext,Resolved,bug,Bug
2018-05-14T07:04:03.000-0400,DROOLS-2539,Done,"If you create a Guided Decision Table and hide at least one column and then select on the ""Row number"" cell (selecting all cells on the row) the ""Selection"" highlight overflows the table. This is caused by the creation of the highlight ignoring hidden columns.

h2. PR Acceptance test
Select whole row
- Hidden condition column (/)
- Hidden action column (/)
- Hidden attribute column (/)
- Hidden metadata column (/)",Major,Michael Anstis,,2018-05-10T04:32:41.000-0400,[Guided Decision Table] Selected Cell highlight ignores hidden columns,Resolved,bug,Bug
2018-05-14T04:23:11.000-0400,DROOLS-2545,Done,None,Major,Mario Fusco,,2018-05-14T04:18:45.000-0400,Accumulate on 'this' doesn't work in executable model,Resolved,bug,Bug
2018-05-10T05:13:39.000-0400,DROOLS-2477,Done,The hint for Work Item Definition creation in GDT column wizard is obsolete. Project UI does not more contain items as Authoring and Project Authoring.,Major,Jozef Marko,,2018-04-16T07:58:29.000-0400,[GDT] Wizard hints not aligned with project ui,Resolved,bug,Bug
2018-05-09T05:31:41.000-0400,DROOLS-2525,Cannot Reproduce,There appears attached error.log if user close the context editor.,Major,Michael Anstis,,2018-05-04T01:27:47.000-0400,[DMN Designer] Closing Context editor throws an error,Closed,bug,Bug
2018-05-03T16:43:42.000-0400,DROOLS-2393,Done,"When multiple cells of the decision table are selected, then the behavior of inline context menu can be confusing for the user.
Few scenarios:
# Select multiple cells, invoke context menu, select delete rule -> just one deleted
# Select multiple cells from different columns, invoke context menu, select delete -> just one column deleted
# Select both input and output cells, context menu entries are established according to the last click
# Select continuous block of cells, invoke context menu, selec insert rule below -> rule is not inserted below the most bottom cell of the block
# ...

Due to this, we should disable the context menu entries which could bring confusion for cases when multiple cells are selected",Minor,Michael Anstis,,2018-03-16T06:24:38.000-0400,[DMN Designer] Not expected results of commands when multiple cells selected,Resolved,bug,Bug
2018-05-03T02:27:46.000-0400,DROOLS-2422,Done,"Some tests start fireUntilHalt without making sure the thread is halted afterwards. E.g. see this [1].

[1] https://github.com/kiegroup/drools/blob/ffa6f44a10fa50f3227491968f9166b570a75f6a/drools-compiler/src/test/java/org/drools/compiler/integrationtests/ParallelEvaluationTest.java#L564",Major,Tibor Zimanyi,,2018-03-27T04:23:35.000-0400,Fix fireUntilHalt() handling in tests,Resolved,bug,Bug
2018-05-03T02:39:43.000-0400,DROOLS-2516,Done,Following DROOLS-2349 the first cell is selected by {{BaseExpressionGrid.select()}} this however breaks cell selection when {{ctrl}} is pressed as it should only be called when the Editor type is changed.,Major,Michael Anstis,,2018-05-01T10:58:39.000-0400,[DMN Designer] Do not call selectFirstCell() in BaseExpressionGrid.select(),Resolved,bug,Bug
2018-05-03T07:55:33.000-0400,DROOLS-2514,Done,"When parallel compilation is enabled, common structures are modified concurrently by {{KnowledgeBuilderImpl.initPackage}}, resulting in the following stack trace in Java 9/10.

{code:java}
Exception in thread ""main"" java.util.ConcurrentModificationException: java.util.ConcurrentModificationException
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:488)
        at java.base/java.util.concurrent.ForkJoinTask.getThrowableException(ForkJoinTask.java:600)
        at java.base/java.util.concurrent.ForkJoinTask.reportException(ForkJoinTask.java:678)
        at java.base/java.util.concurrent.ForkJoinTask.invoke(ForkJoinTask.java:737)
        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateParallel(ForEachOps.java:159)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateParallel(ForEachOps.java:173)
        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:233)
        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRulesLevel(KnowledgeBuilderImpl.java:1238)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1218)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileKnowledgePackages(KnowledgeBuilderImpl.java:1056)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:1047)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:553)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addKnowledgeResource(KnowledgeBuilderImpl.java:773)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2360)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2349)
        at Main.attempt(Main.java:48)
        at Main.main(Main.java:29)
Caused by: java.util.ConcurrentModificationException
        at java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1139)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.initPackage(KnowledgeBuilderImpl.java:1146)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.createPackageRegistry(KnowledgeBuilderImpl.java:1109)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$getOrCreatePackageRegistry$0(KnowledgeBuilderImpl.java:1105)
        at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1751)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getOrCreatePackageRegistry(KnowledgeBuilderImpl.java:1105)
        at org.drools.compiler.builder.impl.TypeDeclarationCache.createTypeDeclarationForBean(TypeDeclarationCache.java:262)
        at org.drools.compiler.builder.impl.TypeDeclarationCache.getAndRegisterTypeDeclaration(TypeDeclarationCache.java:90)
        at org.drools.compiler.builder.impl.TypeDeclarationBuilder.getAndRegisterTypeDeclaration(TypeDeclarationBuilder.java:69)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getAndRegisterTypeDeclaration(KnowledgeBuilderImpl.java:1860)
        at org.drools.compiler.rule.builder.PatternBuilder.processClassObjectType(PatternBuilder.java:305)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:181)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:151)
        at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:133)
        at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
        at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:105)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1281)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.lambda$compileRulesLevel$3(KnowledgeBuilderImpl.java:1242)
        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
        at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1492)
        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
        at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)
        at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:746)
        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)
        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1603)
        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:177)
{code}

Looking at the code, it looks like additional concurrency-unsafe modifications are performed, since it accesses the mentioned {{HashMap}} to get a shared {{LinkedList}} which it then modifies.

Note that the stack trace above is obtained on Java 9/10, as JDK9 added the extra check to {{HashMap.computeIfAbsent}}, but the code relies on race conditions in any JDK version.

Attached a sample Java class source that can trigger the stack trace reliably on my machine (using OpenJDK 10)—should hopefully be reproducible using JDK9/JDK10 as long as the common ForkJoinPool has more than 1 thread.

Also attached a ""drl"" file with the rules generated by the sample class (not needed when testing, as the contents are generated by the sample class).",Major,Mario Fusco,,2018-05-01T00:48:21.000-0400,Concurrent modification when initialising packages in KnowledgeBuilderImpl,Resolved,bug,Bug
2018-05-02T03:38:47.000-0400,DROOLS-2517,Done,"Under the conditions:
* A rule uses a method of global variable in LHS. e.g. Person(myUtil.transform(name) == ""John-san"")
* A package is serialized
Serializing the package throws NullPointerException.
{noformat}
java.lang.NullPointerException: null
	at org.drools.core.base.BaseClassFieldReader.writeExternal(BaseClassFieldReader.java:196)
	at org.drools.core.base.extractors.MVELObjectClassFieldReader.writeExternal(MVELObjectClassFieldReader.java:72)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.base.ClassFieldAccessorStore$FieldLookupEntry.writeExternal(ClassFieldAccessorStore.java:384)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.concurrent.ConcurrentHashMap.writeObject(ConcurrentHashMap.java:1413)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1028)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.base.ClassFieldAccessorStore.writeExternal(ClassFieldAccessorStore.java:61)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.core.definitions.impl.KnowledgePackageImpl.writeExternal(KnowledgePackageImpl.java:250)
	at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1459)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1430)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.ArrayList.writeObject(ArrayList.java:762)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:1028)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at org.drools.compiler.integrationtests.SerializedPackageMergeTest.testBuildAndSerializePackagesWithGlobalMethodInLHS(SerializedPackageMergeTest.java:244)
{noformat}",Major,Mario Fusco,,2018-05-01T20:54:08.000-0400,NullPointerException in BaseClassFieldReader.writeExternal() when a global method is used in LHS and serialize package,Resolved,bug,Bug
2018-05-01T03:30:34.000-0400,DROOLS-2509,Done,"Executable model is generated correctly when the from clause is in the form x.func() but not when it is func( x ). See the reproducer below

{code}
    public static Integer getLength(String s) {
        return s.length();
    }

    @Test
    public void testFromExternalFunction() {
        final String str =
                ""import "" + FromTest.class.getCanonicalName() + "";\n"" +
                ""global java.util.List list\n"" +
                ""\n"" +
                ""rule R when\n"" +
                ""  $s : String()\n"" +
                ""  $i : Integer( this > 10 ) from FromTest.getLength($s)\n"" +
                ""then\n"" +
                ""  list.add( \""received long message: \"" + $s);\n"" +
                ""end\n"";

        KieSession ksession = getKieSession( str );

        final List<String> list = new ArrayList<>();
        ksession.setGlobal( ""list"", list );

        ksession.insert(""Hello World!"");
        ksession.fireAllRules();

        Assertions.assertThat(list).containsExactlyInAnyOrder(""received long message: Hello World!"");
    }
{code}",Major,Luca Molteni,,2018-04-30T06:04:05.000-0400,Executable model isn't generated correctly for from clause in the form func(x),Resolved,bug,Bug
2018-04-30T09:02:10.000-0400,DROOLS-2510,Done,None,Major,Mario Fusco,,2018-04-30T09:00:19.000-0400,Timers attribute aren't parsed correctly by the executable model,Resolved,bug,Bug
2018-04-30T09:56:07.000-0400,DROOLS-2506,Done,"A script like

{code:java}
{ myimport : { f1 : function() \""Hi\"", x1 : function(name) f1() + \"" \"" + name }, r1 : myimport.x1(\""John\"") }.r
{code}

shoudl evaluate to ""Hi John"" but the invocation of ""myimport.x1"" is not being evaluated with the correct lexical scope",Major,Matteo Mortari,,2018-04-27T10:18:35.000-0400,Lexical scope for FEEL Function invocation,Resolved,bug,Bug
2018-04-30T04:03:18.000-0400,DROOLS-2507,Done,None,Major,Mario Fusco,,2018-04-30T03:58:01.000-0400,Constraints checking against a null value isn't generated correctly by the executable model,Resolved,bug,Bug
2018-04-26T13:56:28.000-0400,DROOLS-2500,Done,None,Major,Mario Fusco,,2018-04-26T13:39:13.000-0400,Build of executable model based kproject doesn't take count of KieBase includes,Resolved,bug,Bug
2018-04-27T09:13:37.000-0400,DROOLS-2504,Done,None,Major,Mario Fusco,,2018-04-27T09:11:57.000-0400,When compiling a kjar which includes a kbase from another kjar containing an enum the compilation fails ,Resolved,bug,Bug
2018-04-26T05:01:57.000-0400,DROOLS-2495,Done,"Under the condition:
- A rule uses a getter method in LHS. e.g. ""Cheese(type == $p.getName())""
- A package is serialized/deserialized

executing the rule throws NullPointerException.

{noformat}
java.lang.NullPointerException: null
	at org.drools.core.rule.Declaration.getHashCode(Declaration.java:267)
	at org.drools.core.util.AbstractHashTable$FieldIndex.hashCodeOf(AbstractHashTable.java:333)
	at org.drools.core.util.AbstractHashTable$SingleIndex.hashCodeOf(AbstractHashTable.java:397)
	at org.drools.core.util.index.TupleIndexHashTable.getOrCreate(TupleIndexHashTable.java:392)
	at org.drools.core.util.index.TupleIndexHashTable.add(TupleIndexHashTable.java:358)
	at org.drools.core.phreak.PhreakJoinNode.doLeftInserts(PhreakJoinNode.java:95)
	at org.drools.core.phreak.PhreakJoinNode.doNode(PhreakJoinNode.java:71)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:552)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:538)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:373)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1315)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1290)
	at org.drools.compiler.integrationtests.SerializedPackageMergeTest.testBuildAndSerializePackagesWithGetterInLHS(SerializedPackageMergeTest.java:220)
{noformat}",Major,Mario Fusco,,2018-04-25T03:14:26.000-0400,NullPointerException in Declaration.getHashCode() when getter in LHS and serialize/deserialize package,Resolved,bug,Bug
2018-04-25T06:02:07.000-0400,DROOLS-2496,Won't Fix,Kie navigator tool now supports the project per repo structure DROOLS-2342 but it does not support the old repository format.,Major,Kris Verlaenen,,2018-04-25T03:31:30.000-0400,Kie navigator does not support the old repository format,Closed,bug,Bug
2018-04-25T08:04:52.000-0400,DROOLS-2498,Partially Completed,"Master snapshot version on wildfly 10.1:
{code}
java.lang.NoClassDefFoundError: org/kie/internal/builder/conf/ParallelRulesBuildThresholdOption
	at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.<init>(KnowledgeBuilderConfigurationImpl.java:112)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.getBuilderConfiguration(AbstractKieProject.java:284)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.createKnowledgeBuilder(AbstractKieProject.java:270)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.buildKnowledgePackages(AbstractKieProject.java:208)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:74)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:353)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:265)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:209)
	at org.optaplanner.core.config.score.director.ScoreDirectorFactoryConfig.buildDroolsScoreDirectorFactory(ScoreDirectorFactoryConfig.java:503)
	at org.optaplanner.core.config.score.director.ScoreDirectorFactoryConfig.buildScoreDirectorFactory(ScoreDirectorFactoryConfig.java:331)
	at org.optaplanner.core.config.solver.SolverConfig.buildSolver(SolverConfig.java:220)
	at org.optaplanner.core.impl.solver.AbstractSolverFactory.buildSolver(AbstractSolverFactory.java:61)
	at org.optaplanner.openshift.employeerostering.server.solver.WannabeSolverManager.lambda$solve$2(WannabeSolverManager.java:81)
	at org.jboss.as.ee.concurrent.ControlPointUtils$ControlledRunnable.run(ControlPointUtils.java:105)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at org.glassfish.enterprise.concurrent.internal.ManagedFutureTask.run(ManagedFutureTask.java:141)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
	at org.glassfish.enterprise.concurrent.ManagedThreadFactoryImpl$ManagedThread.run(ManagedThreadFactoryImpl.java:250)
Caused by: java.lang.ClassNotFoundException: org.kie.internal.builder.conf.ParallelRulesBuildThresholdOption from [Module ""deployment.ROOT.war:main"" from Service Module Loader]
	at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:198)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:363)
	at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:351)
	at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:93)
... 21 more
{code}",Major,Geoffrey De Smet,,2018-04-25T04:53:18.000-0400,NoClassDefFoundError: org/kie/internal/builder/conf/ParallelRulesBuildThresholdOption,Resolved,bug,Bug
2018-04-23T08:18:51.000-0400,DROOLS-2488,Done,None,Major,Mario Fusco,,2018-04-23T08:14:27.000-0400,Child left tuples doesn't get reordered when property reactivity skips an update,Resolved,bug,Bug
2018-04-24T05:35:19.000-0400,DROOLS-2421,Won't Fix,"Here the sample code of my window rule :

rule ""Sliding window test1""
agenda-group ""g0""
when
    exists Fact( (facts[""parameter2""] ) != null && facts[""source""] == ""A0"")  && $number: Number() from accumulate(Fact(facts[""parameter2""]  != null && $t : Double.valueOf(facts[""parameter2""]) && facts[""source""] == ""A0"")  over window:time(2m) , sum($t))
then
   globalList.add(""2 Minute Sum of parameter2 of Source A0 is "" + $number );
end

rule ""Sliding window test2""
agenda-group ""g0""
when
    exists Fact( (facts[""parameter2""] ) != null && facts[""source""] == ""A1"")  && $number: Number() from accumulate(Fact(facts[""parameter2""]  != null && $t : Double.valueOf(facts[""parameter2""]) && facts[""source""] == ""A1"")  over window:time(2m) , sum($t))
then
   globalList.add(""2 Minute Sum of parameter2 of Source A1 is "" + $number );
end
I am sending request from 2 different sources. I am getting response as 0.0 after some time. I check the values in the working memory by using collect as List for the parameter values. I have found that the previous values got deleted when the response is 0.0. I need immediate help.

Some important info:

Fact is the class Object and it has a Hashmap(facts) as class variable. The factmap contains the variable name as key and its value as variable value.
",Critical,Mario Fusco,,2018-03-27T00:57:47.000-0400,Unexpected response from rule engine for windowing rules,Closed,bug,Bug
2018-04-16T10:11:50.000-0400,DROOLS-2479,Done,None,Major,Mario Fusco,,2018-04-16T10:09:32.000-0400,Property reactivity mask is mistakenly set as empty by executable model when it is not possible to infer the modifed properties,Resolved,bug,Bug
2018-04-16T10:48:17.000-0400,DROOLS-2468,Done,None,Major,Mario Fusco,,2018-04-11T06:44:22.000-0400,Stateless sessions aren't under control of KieBase coordination during an incremental update,Resolved,bug,Bug
2018-04-17T10:54:21.000-0400,DROOLS-2482,Done,None,Major,Mario Fusco,,2018-04-17T09:14:38.000-0400,Kjars aren't recognized as projects using the executable model when installed directly into the KieRepository,Resolved,bug,Bug
2018-04-12T07:50:22.000-0400,DROOLS-2471,Done,None,Major,Mario Fusco,,2018-04-12T07:48:24.000-0400,Wrong dsl generation of constraints invoking method on a variable bound from a different patter in executable model,Resolved,bug,Bug
2018-04-12T12:19:05.000-0400,DROOLS-2461,Done,None,Minor,Daniele Zonca,,2018-04-09T04:12:15.000-0400,Request output scope removed,Resolved,bug,Bug
2018-04-11T07:27:09.000-0400,DROOLS-2441,Done,"The FunctionDefNode is not using the kie container root classloader to load classes. I even added a comment for that, just a shame comments are not executable:

https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/lang/ast/FunctionDefNode.java#L98-L99

{code:title=FunctionDefNode.java}
                        // might need to explicitly use a classloader here
                        Class<?> clazz = Class.forName( clazzName );
{code}

To reproduce the problem, create a java class with a static method, add it to the kjar, create a DMN model that invokes that model, and try to execute.

",Blocker,Matteo Mortari,,2018-03-31T08:30:40.000-0400,DMN runtime not using the kiecontainer root classloader to load classes,Resolved,bug,Bug
2018-04-09T05:32:07.000-0400,DROOLS-2446,Done,"Assume this scenarios

# A
## Create a project (say, 'proj1') and upload a spreadsheet (8000rows-spreadsheet.xls)
## Login as user1 with browser1
## Login as user2 with browser2
## user1 validates the spreadsheet (8000rows-spreadsheet.xls) and user2 validates the same spreadsheet (8000rows-spreadsheet.xls)
## empty-validation-error.png reproduced
# B
## Upload another spreadsheet (8000rows-spreadsheet2.xls) to the same project 'proj1'
## Login as user1 with browser1
## Login as user2 with browser2
## user1 validates the first spreadsheet (8000rows-spreadsheet.xls) and user2 validates the second spreadsheet (8000rows-spreadsheet2.xls)
## empty-validation-error.png reproduced
# C
## Upload another spreadsheet (8000rows-spreadsheet3.xls) to another project (say, 'proj2')
## Login as user1 with browser1
## Login as user2 with browser2
## user1 validates the first spreadsheet (8000rows-spreadsheet.xls) in 'proj1' and user2 validates the third spreadsheet (8000rows-spreadsheet3.xls) in 'proj2'
## *Doesn't reproduce the empty-validation-error.png*

So, I guess we need to limit to only one validation per project (= GAV) at the same time. It should be limited at backend service.",Major,Toni Rikkola,,2018-04-04T05:07:55.000-0400,Concurrent spreadsheet table validation doesn't work properly,Resolved,bug,Bug
2018-04-09T12:41:26.000-0400,DROOLS-2466,Done,None,Major,Mario Fusco,,2018-04-09T12:16:29.000-0400,Static imports in generated executable model dsl can cause method name clashes,Resolved,bug,Bug
2018-04-07T13:01:06.000-0400,DROOLS-2459,Done,None,Major,Mario Fusco,,2018-04-07T12:59:10.000-0400,Wrong dsl generation of constraints using globals in executable model,Resolved,bug,Bug
2018-04-05T12:56:30.000-0400,DROOLS-2455,Done,"The constraints of a beta node are reordered (based on their indexability) only when the node is attached to the rete network. This means that when a second not yet attached node is compared to the former one it is found not equal (and then not shared) because of the different constraints ordering as demonstrated by the following test case

{code}
    @Test
    public void testShareBetaWithConstraintReordering() {
        String str =
                ""import "" + Person.class.getCanonicalName() + "";"" +
                ""rule R1 when\n"" +
                ""  $s : String()\n"" +
                ""  $p : Person(name != $s, age == $s.length)\n"" +
                ""then\n"" +
                ""end\n"" +
                ""rule R2 when\n"" +
                ""  $s : String()\n"" +
                ""  $p : Person(name != $s, age == $s.length)\n"" +
                ""then\n"" +
                ""end"";

        KieSession ksession = getKieSession( str );

        assertEquals( 1, ReteDumper.collectNodes( ksession ).stream().filter( BetaNode.class::isInstance ).count() );

        EntryPointNode epn = (( InternalKnowledgeBase ) ksession.getKieBase()).getRete().getEntryPointNodes().values().iterator().next();
        ObjectTypeNode otn = epn.getObjectTypeNodes().get( new ClassObjectType( Person.class ) );
        assertEquals( 1, otn.getSinks().length );
    }
{code}",Major,Mario Fusco,,2018-04-05T12:54:33.000-0400,Missing beta node sharing,Resolved,bug,Bug
2018-04-05T04:38:22.000-0400,DROOLS-2423,Done,"This issue was spotted during review of DROOLS-2392, however relation is not probable between both.

If user clears the top level context entry and then select same context entry exactly the same context entry will appear. There should appear context entry with default values.

h2. Acceptance test
# check scenario described in [PR comments|https://github.com/kiegroup/kie-wb-common/pull/1548] (/)
# check scenario from DROOLS-2424 (/)
# check scenario form DROOLS-2425 (x)
# Steps to reproduce fixed - Clear the context entry at depth:
-- 0 (/)
-- 1 (/)
-- 2 (/)
-- 3 (/)
",Minor,Michael Anstis,,2018-03-27T05:33:26.000-0400,[DMN Designer] Clear command caches context entries,Resolved,bug,Bug
2018-04-05T04:38:41.000-0400,DROOLS-2424,Done,"I spotted this issue during DROOLS-2392 review, however the relation is not probable between them.

If user changes the expression type of decision multiple times, then save and reopen the decision, the expression type can't be changed more.

h2. Acceptance test
- Steps to reproduce fixed, due to code changes, check at different depth level
-- 1 (/)
-- 2 (/)
-- 3 (/)",Optional,Michael Anstis,,2018-03-27T05:58:07.000-0400,[DMN Designer] Expression type can not be changed after cleared multiple times,Resolved,bug,Bug
2018-04-04T12:22:18.000-0400,DROOLS-2449,Done,"The executable model suffers of the following problems:

* jbpm processes aren't merged into the KieBase generated from the model
* missing nodes sharing when rules belong to different packages
* wrong property reactivity mask in consequence when updating a field via getter (e.g. person.getCars().add(""BMW"") )",Major,Mario Fusco,,2018-04-04T12:17:19.000-0400,Various bugs in executable model,Resolved,bug,Bug
2018-04-04T09:57:25.000-0400,DROOLS-2419,Rejected,"Given the attached model and the following test


{code:java}
    @Test
    public void testTEMP() {
        List<DMNMessage> validate = validator.validate(getReader(""UsingSemanticNS.dmn""), VALIDATE_SCHEMA, VALIDATE_MODEL, VALIDATE_COMPILATION);
        assertThat(ValidatorUtil.formatMessages(validate), validate.size(), is(0));
    }
{code}

fails with:

{code:java}
java.lang.AssertionError: DMNMessage{ severity=ERROR, type=FAILED_XML_VALIDATION, message='Failed XML validation of DMN file: cvc-elt.1: Cannot find the declaration of element 'semantic:definitions'.', sourceId='null', exception='SAXParseException : cvc-elt.1: Cannot find the declaration of element 'semantic:definitions'.', feelEvent=''}
Expected: is <0>
     but: was <1>
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:956)
	at org.kie.dmn.validation.ValidatorTest.testTEMP(ValidatorTest.java:92)
	...
{code}

",Major,Matteo Mortari,,2018-03-26T04:59:55.000-0400,Validator fails schema validation for definition xml element with prefix,Resolved,bug,Bug
2018-04-03T13:27:24.000-0400,DROOLS-2436,Done,"User is unable to open two different diagrams.

h2. Acceptance test
# Steps to reproduce fixed (/)
# Steps to reproduce fixed, do the last step in multiple browser sessions (/)",Blocker,Roger Martinez,,2018-03-28T05:43:47.000-0400,[DMN Designer] Always open the same diagram,Resolved,bug,Bug
2018-04-03T05:53:48.000-0400,DROOLS-2443,Done,None,Blocker,Matteo Mortari,,2018-04-03T03:27:44.000-0400,publication URL for DMN XSD,Resolved,bug,Bug
2018-03-27T12:39:36.000-0400,DROOLS-2428,Done,created to test the api calls,Trivial,Kris Verlaenen,,2018-03-27T12:32:24.000-0400,Sample Issues,Closed,bug,Bug
2018-03-27T12:00:39.000-0400,DROOLS-2391,Done,"I guess this is a bug - division of int fields in when part cannot be compared to double.
For example with class A having two int fields following rule does not work
when
  $a: A(a == 1, b == 2, a / b < 0.99)

but this works:
when
  $a: A(a == 1, b == 2, a / b < 1.0)

Result of same expresson printed to output - System.out.println($a.a / $a.b) gives correct result of type Double.

Why does it not work in when part?
",Major,Luca Molteni,,2018-03-15T13:20:50.000-0400,Cannot compare int's division result to double,Resolved,bug,Bug
2018-03-28T11:39:21.000-0400,DROOLS-2427,Done,"I'm using Drools 7.6 and for some reason @watch doesn't stop the rule from reactivating itself or other rules when only the unwatched property is changed. Which results in an infinite loop.

Can someone figure out what am I doing wrong?

The rule:

{code}
package com.model

import com.model.*;
import java.util.List;

rule ""10% for 15 High-range Items""
    when
        $o: Order($lines: orderLines) @watch(!discount)
        Number(intValue >= 15) from accumulate(
            OrderLine($item: item, $q: quantity) from $lines and
            Item(category == Item.Category.HIGH_RANGE) from $item,
            sum($q)
        )
    then
        modify($o) {increaseDiscount(0.10)}
end
{code}

The model used is from the book Mastering JBoss Drools. The method increase discount has been annotated with @Modifes. The order class:

{code}
public class Order implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long orderId;
    private Date date;
    private Customer customer;
    private List<OrderLine> orderLines = new ArrayList<>();
    private Discount discount;

    public Order() {
    }

    public Long getOrderId() {
        return orderId;
    }

    public void setOrderId(Long orderId) {
        this.orderId = orderId;
    }

    public Customer getCustomer() {
        return customer;
    }

    public void setCustomer(Customer customer) {
        this.customer = customer;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public List<OrderLine> getOrderLines() {
        return orderLines;
    }

    public void setItems(List<OrderLine> orderLines) {
        this.orderLines = orderLines;
    }


    public double getTotal() {
        return this.getOrderLines().stream()
                .mapToDouble(item -> item.getItem().getSalePrice() *     item.getQuantity())
                .sum();
    }

    public int getTotalItems() {
        return this.getOrderLines().stream()
                .mapToInt(item -> item.getQuantity())
                .sum();
    }

    @Modifies({""discount""})
    public void increaseDiscount(double increase) {
        if (discount == null) {
            discount = new Discount(0.0);
        }
        discount.setPercentage(discount.getPercentage() + increase);
    }

    public Discount getDiscount() {
        return discount;
    }

    public double getDiscountPercentage() {
        return discount.getPercentage();
    }

    public void setDiscount(Discount discount) {
        this.discount = discount;
    }
}
{code}
",Major,Mario Fusco,,2018-03-27T09:11:38.000-0400,Drools @Watch not working with accumulate in code,Resolved,bug,Bug
2018-03-27T11:03:46.000-0400,DROOLS-2420,Done,"Page 86 of the OMG DMN1.1 Specification states ""...if the aggregation attribute is not specified, the value of the decision table is the unordered set itself;""

h2.  Acceptance test
# After saving and reopening is user able to achieve Collect hit policy (/)
## with aggregating function
## without aggregating function
# After saving and reopening is user able to change (/)
## From any collect hit policy to non collect hit policy
## From non collect hit policy to collect hit policy
# Change of hit policy is reflected in dmn file (/)
# Change of hit policy will show aggregation function just if Collect hit policy, otherwise None (/)",Major,Michael Anstis,,2018-03-26T16:46:13.000-0400,[DMN Designer] Hit Policy Collect does not need an Aggregation function,Resolved,bug,Bug
2018-03-26T07:12:37.000-0400,DROOLS-2418,Cannot Reproduce,"User is unable to create new diagram. Always Create button is hit, some error dialogue appears.",Blocker,Jozef Marko,,2018-03-26T04:06:54.000-0400,[DMN Designer] New diagram can't be created,Closed,bug,Bug
2018-03-27T05:34:51.000-0400,DROOLS-2392,Done,"Undo and consequent Redo of commands which manipulates context entries (basically all) for non trivial scenarios does not update user interface correctly.

In the steps for reproduce used AddRuleCommand, but generally it can be reproduced with any command.

h2. Acceptance test
h3. Prerequisite 
# Prepare decision node that has context table as top level expression
# Add all expression types into this context table
## Function, Decision Table, Relation, Invocation, Literal expression, Context
# Save and reopen

h3. Test
# for each expression type
##  execute command
### Literal Expression: type value (/) 
### Context: adding entry, deleting entry (/)
### Decision table: change hit policy, add / remove input, add / remove output, add / remove rule, rename header cell, change data cell (/)
### Relation: add/remove row, add/remove column, change cell value (/)
### Function: change language, add/remove parameter, rename parameter, change cell value (/)
### Invocation: insert/remove parameter, change cell value (/)
## undo two times (to return into DRD)
## redo two times (the original command should take effect)",Major,Michael Anstis,,2018-03-16T05:48:29.000-0400,[DMN Designer] Undo and Redo does not update user interface,Resolved,bug,Bug
2018-03-26T04:07:33.000-0400,DROOLS-2412,Done,IncrementalCompilationTest.testMultipleIncrementalCompilationsWithFireUntilHalt() and TimerAndCalendarTest.testHaltAfterSomeTimeThenRestartButNoLongerHolding() handle fireUntilHalt like that there could remain fireUntilHalt thread hanging. ,Major,Tibor Zimanyi,,2018-03-21T11:58:11.000-0400,Fix handling of fireUntilHalt in 2 tests,Resolved,bug,Bug
2018-03-26T08:02:59.000-0400,DROOLS-2410,Done,"The behavior described below was spotted during DROOLS-2398 review, however probably not related to that jira.

If context table is so big user has to scroll down to see all entries. then the active entries are not highlighted correctly. Next if user select some cell, then scroll (so the originally selected cell is not visible more) and select another cell, both remains selected. I mean selection without holding any additional key.

h2. Acceptance criteria
- As active entry is highlighted just that context entry that is parent of the selected cell. (/)
- Just one cell will be selected - clicking mouse without holding CTRL on keyboard (/)
-- when no scrolling between clicks (selecting cells)
-- when scrolling between clicks (selecting cells)
- Multiple cells selection - clicking mouse and holding CTRL on keyboard (/)
-- when no scrolling between clicks (selecting cells)
-- when scrolling between clicks (selecting cells)
- Steps to reproduce fixed (/)
- Undo / redo (/)
-- -Change selected cell, do not scroll between selection, check if undo / redo highlights correctly-
-- -Change selected cell, scroll between selection, check if undo / redo highlights correctly-
-- -Change selected multiple cells, do not scroll between selection, check if undo / redo highlights correctly-
-- -Change selected multiple cells, scroll between selection, check if undo / redo highlights correctly-
-- Not checked as command history doesn't contain selections (clicks), probably it is fine, not reporting issue ",Major,Michael Anstis,,2018-03-21T09:33:08.000-0400,[DMN Designer] Active entries not highlighted correctly when scrolling,Resolved,bug,Bug
2018-03-27T03:46:21.000-0400,DROOLS-2380,Done,"The DMN validator is instantiating the DMN compiler directly, and that does not load the default extension profiles, nor any possibly configured profile.

We need to unify the compiler instantiation code so that it is consistent for both the validator and the runtime.",Critical,Matteo Mortari,,2018-03-09T22:10:46.000-0500,DMN Validator is not using the DMN Profiles,Resolved,bug,Bug
2018-03-27T03:51:46.000-0400,DROOLS-2416,Done,"In a model as:
 !image-2018-03-22-20-50-28-330.png! 

where hardcoded defined one Decision:
 !image-2018-03-22-20-50-42-884.png! 

while decision logic for the other Decision:
 !image-2018-03-22-20-51-22-864.png! 

Would fail with:
 !image-2018-03-22-20-51-52-051.png|thumbnail! 

This seems to be an edge case not originally covered in [DROOLS-2125].",Major,Matteo Mortari,,2018-03-22T15:52:27.000-0400,UnaryTest Not list as used in a DT not correctly checking containment,Resolved,bug,Bug
2018-03-27T03:45:47.000-0400,DROOLS-2379,Done,"DMN Validator is raising false positives for errors on type resolution. It looks like it is happening since the following commit was done:

https://github.com/kiegroup/drools/commit/9e2fdc4b5e83bb9b5350a37fd89dab8f38cc8582

The problem is that the .toString() call on the QName will return the full name, including the namespace:

{http://www.trisotech.com/definitions/_6cfe7d88-6741-45d1-968c-b61a597d0964}tDailyPrice

And that will always fail the constraint:

ItemDefinition( name == $typeRef.toString() )

I believe the correct would be to change the constraint to:

ItemDefinition( name == $typeRef.getLocalPart() )

But we might also need to check the namespace somehow.
",Critical,Edson Tirelli,,2018-03-09T21:42:36.000-0500,DMN Validator raising false positive errors for type resolution,Resolved,bug,Bug
2018-03-26T04:08:00.000-0400,DROOLS-2417,Done,"Some of the tests from package org.drools.compiler.integrationtests.concurrency [1] miss timetout in the @Test annotation. This can cause build hangs when something wrong happens during a test. 

[1] https://github.com/baldimir/drools/tree/6b24ae59ae21bc0146d11bcb7606d1b42a99513c/drools-compiler/src/test/java/org/drools/compiler/integrationtests/concurrency",Major,Tibor Zimanyi,,2018-03-23T10:36:06.000-0400,Some concurrency tests are missing timeouts,Resolved,bug,Bug
2018-03-27T03:46:56.000-0400,DROOLS-2381,Done,"The DMN Validator is raising a NPE and the following error message when the following element is present:

 <drools:decisionServices xmlns:drools=""http://www.drools.org/kie/dmn/1.1""/>

Error message:

DMNMessage{ severity=ERROR, type=INVALID_NAME, message='Invalid name 'null': Name cannot be null or empty', sourceId='null', exception='', feelEvent=''}",Critical,Matteo Mortari,,2018-03-09T22:15:21.000-0500,DMN Validator raising a NPE for the <drools:decisionServices> extension element,Resolved,bug,Bug
2018-03-23T12:50:40.000-0400,DROOLS-2394,Done,"Renaming output of decision table changes the {{back to}} link.

h2. Acceptance tests
# Three different decisions (x) DROOLS-1937
## In DRD declare three different decision (different names)
## Check navigation to properties of these decisions
# One decision
## In DRD declare one decision
## For each context entry type check
## Renaming in DRD -> also top level expression in properties renamed (x) DROOLS-1937
## Renaming in decision properties -> also name in DRD changed (/)
## Change of expression type preserves name (/)
## Undo / Redo changes name both in properties and drd diagram (/)
## Diagram where top level expression of decision was renamed can saved, closed and reopened (/)
# Steps to reproduce fixed (/)

h3. Acceptance tests result
Failed due to:
Rename decision node either as:
-  !renamed_in_context_popup.png|thumbnail! 
-  !renamed_in_proeprties.png|thumbnail! 
In both cases above, expression editor of that decision node will look like
-  !expression_editor_of_decision.png|thumbnail! 

The expression editor back to link shouldn't show *My Name*",Optional,Michael Anstis,,2018-03-16T07:25:59.000-0400,[DMN Designer] Rename of output changes back to link,Resolved,bug,Bug
2018-03-23T06:50:22.000-0400,DROOLS-2411,Rejected,"In the following model:
 !image-2018-03-21-16-48-52-704.png! 

for the following input:
 !image-2018-03-21-16-49-14-236.png! 
with number being:
 !image-2018-03-21-16-49-30-158.png! 

The following expression works:

{code:java}
for m in my input.numbers return ceiling(m)
{code}
returning:
 !image-2018-03-21-16-50-08-712.png! 

But these other expressions fail:
{code:java}
for m in my input[name=""asd""].numbers return ceiling(m)
for m in my input[item.name=""asd""].numbers return ceiling(m)
{code}
",Major,Matteo Mortari,,2018-03-21T11:51:06.000-0400,For loop using filter in iteration context,Resolved,bug,Bug
2018-03-22T05:30:51.000-0400,DROOLS-2407,Done,"During review of DROOLS-2398 I noticed the behavior described below, however not sure if it is related to that issue.

If user deletes a context entry, then row number is assigned to default context entry.

h2. Acceptance criteria
The default context entry has not row number even if:
# Context entry deleted (/)
# Context entry cleared (/)
# Context entry added (/)
# Something of above undone and consequently redone (/)",Optional,Michael Anstis,,2018-03-21T09:16:43.000-0400,[DMN Designer] Context Entry deletion assign row number to default entry,Resolved,bug,Bug
2018-03-21T11:46:20.000-0400,DROOLS-2398,Done,"Issue found during review of DROOLS-2368 but not sure if related, most probably not. Change of function definition discards width of parent column.

h2. Acceptance criteria
Recursively (to achieve 3 depth levels):
# Declare context entry
# Add 6 rows  
# Configure first 5 rows as: Literal, Decision Table, Function, Invocation, Relation
# Configure the 6th row as Context and repeat with first step

At each depth level, check other columns width is updated when:
# Literal is (/)
##  updated, resized, cleared, removed
# Decision table is (/)
##  updated, resized, cleared, removed
# Function is (/)
##  updated, resized, cleared, removed
# Invocation is (/)
##  updated, resized, cleared, removed
# Relation is (/)
##  updated, resized, cleared, removed
# Context is (/)
##  updated, resized, cleared, removed


Column widths preserved after reopen (/)
",Minor,Michael Anstis,,2018-03-19T06:39:51.000-0400,[DMN Designer] Change of function discards width of parent column,Resolved,bug,Bug
2018-03-21T09:44:02.000-0400,DROOLS-2403,Done,"BufferedWriter used in TestStatusListener isn't closed properly [1].

[1] https://github.com/kiegroup/drools/blob/7f6658a123e900c2c3e5d0e409e18db5a5640984/kie-test-util/src/main/java/org/kie/test/util/TestStatusListener.java#L40",Minor,Tibor Zimanyi,,2018-03-20T08:41:47.000-0400,BufferedWriter used in TestStatusListener isn't closed after use,Resolved,bug,Bug
2018-03-21T09:44:21.000-0400,DROOLS-2404,Done,"We currently use our custom TestStatusListener for logging when tests start and finish. This listener is synchronized and writes to a single file, which could cause slower test execution. This listener should be bound to a Maven profile, so it can be enabled when needed. ",Major,Tibor Zimanyi,,2018-03-20T10:15:44.000-0400,Remove TestStatusListener from drools-compiler tests,Resolved,bug,Bug
2018-03-21T09:43:40.000-0400,DROOLS-2405,Done,"We currently run AddRemoveRulesTest as a turtle test, so it is not run as a standard test during each build (e.g. PR build). It should be a standard test. ",Major,Tibor Zimanyi,,2018-03-20T11:29:24.000-0400,"Run AddRemoveRulesTest as a standard test, not as a turtle test",Resolved,bug,Bug
2018-03-20T08:55:43.000-0400,DROOLS-2395,Done,"Invocation parameter is not updated if user updates output of the decision table output.

h2. Acceptance criteria
# Check invocation parameter and decision table output are paired (/)
## inv. parameter -> table (single) output
## table (single) output -> inv. parameter
## inv. parameter -> table (multi) output
## table (multi) output -> inv. parameter
# Check context entry and decision table output are paired (/)
## context entry -> table (single) output
## table (single) output -> context entry
## context entry -> table (multi) output
## table (multi) output -> context entry.",Major,Michael Anstis,,2018-03-16T07:59:36.000-0400,[DMN Designer] Invocation parameter and table output are not paired correctly,Resolved,bug,Bug
2018-03-20T05:36:52.000-0400,DROOLS-2400,Done,"When running test ComparePairTest on newer versions of IBM JDK, it fails on:

java.lang.AssertionError: Different collection values on ArrayList
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.kie.test.util.compare.ComparePair.compareValues(ComparePair.java:292)
	at...

It is caused by String class from IBM JDK containing field that is null. ",Minor,Tibor Zimanyi,,2018-03-19T10:56:03.000-0400,ComparePairTest test fails on newer IBM JDK,Resolved,bug,Bug
2018-03-20T05:38:23.000-0400,DROOLS-2401,Done,"Test SimpleEventGeneratorTest.testEventGenerationMultipleSources fails randomly, because it uses SimpleEventGenerator class which contains event generator that generates events based on random values [2]. 

[1] https://github.com/kiegroup/drools/blob/d7ad4fb31647b5295c3cbc0321f0d8f89693ec63/drools-compiler/src/test/java/org/drools/compiler/integrationtests/eventgenerator/SimpleEventGeneratorTest.java#L130
[2] https://github.com/kiegroup/drools/blob/36eccb8a33550eb2049255f058fe016c6a1fa2f7/drools-compiler/src/test/java/org/drools/compiler/integrationtests/eventgenerator/SimpleEventGenerator.java#L161",Minor,Tibor Zimanyi,,2018-03-19T11:38:30.000-0400,SimpleEventGeneratorTest.testEventGenerationMultipleSources fails randomly,Resolved,bug,Bug
2018-03-14T04:06:20.000-0400,DROOLS-2382,Cannot Reproduce,"If user creates DRD diagram in chrome, the diagram explorer is empty. When the same diagram is opened in firefox, the explorer correctly loads elements.",Major,Roger Martinez,,2018-03-12T06:52:51.000-0400,[DMN Designer] [Chrome specific] Explorer is empty,Closed,bug,Bug
2018-03-14T09:44:10.000-0400,DROOLS-2385,Done,"When using nested facts, a ClassCastException is thrown after updateToVersion(). See PR for a test case demonstrating the problem.",Major,Mario Fusco,,2018-03-13T09:47:41.000-0400,CCE when modifying a Nested declared type during an incremental update,Resolved,bug,Bug
2018-03-14T11:20:12.000-0400,DROOLS-2372,Done,"The workbench creates QName {{""\{http://www.drools.org/kie/dmn/1.1\}kind""}} for {{FunctionDefinition}}'s {{Kind}} and value (for example) {{F}}. This is marshalled by {{FunctionDefinitionPropertyConverter}} to DMN XML. When unmarshalled by the same class the workbench QName becomes {{""drools:feel""}} with value (for example) {{F}}.

I don't understand why the prefix/local name substitution on the unmarshalling occurs; nor why the workbench is creating a DMN NameSpace Context entry on the {{FunctionDefinition}} for {{drools:http://www.drools.org/kie/dmn/1.1""}}.. I also don't know whether the prefix/local part was used before [~tari_manga] found the string encoding format of {{""\{http://www.drools.org/kie/dmn/1.1\}kind""}} and the unmarshalling has not been updated?

I can blindly change {{MarshallingUtils}} to ignore prefix/local part and just use the {{javax.xml.namespace.QName#toString()}} method but it'd be foolhardy doing so without understanding the marshalling/unmarshalling better.",Major,Matteo Mortari,,2018-03-08T04:42:03.000-0500,[DMN Editor] Marshalling/unmarshalling of QNames is broken,Resolved,bug,Bug
2018-03-14T11:15:10.000-0400,DROOLS-2374,Done,There is issue when user wants to type text into previously erased Literal Expression Cell.,Critical,Michael Anstis,,2018-03-08T06:02:22.000-0500,[DMN Designer] Literal Expression Cell can not be updated once erased,Resolved,bug,Bug
2018-03-13T11:21:54.000-0400,DROOLS-2383,Rejected,"To me it looks as if the common heartbeat example is broken:


{code}
import foo.bar.Heartbeat

rule ""Sound the alarm""
when
    $h: Heartbeat( ) from entry-point ""MonitoringStream""
    not( Heartbeat( this != $h, this after[0s,10s] $h ) from entry-point ""MonitoringStream"" )
then
   System.out.println(""Sound the alarm"");
end
{code}

When running the rule set with:


{code:java}
public class Application {
    public static void main(final String[] args) {
        final KieServices ks = KieServices.Factory.get();
        final KieBaseConfiguration config = ks.newKieBaseConfiguration();
        config.setOption(EventProcessingOption.STREAM);

        final KieContainer kContainer = ks.getKieClasspathContainer();
        final KieBase kBase = kContainer.getKieBase(""rules"");

        final KieSession kSession = kBase.newKieSession();

        kSession.getEntryPoint(""MonitoringStream"").insert(new Heartbeat());
        kSession.fireUntilHalt();
    }
}
{code}

Results in:

{code}
11:55:55.092 [main] DEBUG org.drools.compiler.kie.builder.impl.ClasspathKieProject - Found and used pom.properties /home/jreimann/Development/iot-kura-develop-oxygen/ws/drools-test-1/target/classes/META-INF/maven/de.dentrassi.test/drools-test-1/pom.properties
11:55:55.095 [main] DEBUG org.drools.compiler.kie.builder.impl.ClasspathKieProject - Discovered classpath module de.dentrassi.test:drools-test-1:0.0.1-SNAPSHOT
11:55:55.098 [main] INFO org.drools.compiler.kie.builder.impl.KieRepositoryImpl - KieModule was added: FileKieModule[releaseId=de.dentrassi.test:drools-test-1:0.0.1-SNAPSHOT,file=/home/jreimann/Development/iot-kura-develop-oxygen/ws/drools-test-1/target/classes]
11:55:55.820 [main] DEBUG org.drools.core.common.DefaultAgenda - State was INACTIVE is now FIRING_UNTIL_HALT
Sound the alarm
11:55:55.850 [main] DEBUG org.drools.core.common.DefaultAgenda - State was FIRING_UNTIL_HALT is now INACTIVE_ON_FIRING_UNTIL_HALT
{code}

Which looks to me as if the alarm gets activated right away instead of 10 seconds after.
",Major,Mario Fusco,,2018-03-13T07:01:11.000-0400,Heartbeat example seems broken,Resolved,bug,Bug
2018-03-12T06:07:44.000-0400,DROOLS-2359,Done,"Given the following type:
 !screenshot-1.png! 

and the following Decision Table:
 !screenshot-2.png! 

it return error because it tries to validate {{[""abc"", ""xyz""]}} as a feel:string type, without awareness of collection.


",Major,Matteo Mortari,,2018-03-01T05:14:33.000-0500,DMN DecisionTable output validation when type is a collection,Resolved,bug,Bug
2018-03-09T03:39:45.000-0500,DROOLS-2371,Done,"An Error pops up if we open the same Guided Decision Table both in Guided Decision Table Editor and Guided Decision Table Graph (without closing the Editors by ""x"" button).

The error message has 2 variants.
{noformat}
Unable to complete your request. The following exception occurred: (TypeError) : a is null.
{noformat}
{noformat}
Unable to complete your request. The following exception occurred: (TypeError) : Cannot read property 'I' of null.
{noformat}

See attached screen shots (TypeError01.png, TypeError02.png).

If I close the popup, I can continue using decision-central.

See ""Steps to Reproduce"" for detailed steps.",Critical,Michael Anstis,,2018-03-07T11:08:37.000-0500,Unable to complete your request. The following exception occurred: (TypeError) in Guided Decision Table Graph,Resolved,bug,Bug
2018-03-08T09:11:40.000-0500,DROOLS-2364,Done,"An error (""Uncaught error on client side: Condition 'headerMetaData has at least one entry' is invalid!"") is thrown when trying to nest a Decision Table in a Function. This is because a {{FunctionDefinition}} does not implement {{HasName}} and therefore it is not possible to construct an {{OutputClause}} column.

Need to add a different type of non-editable {{HeaderMetaData}} in these scenarios.  ",Major,Michael Anstis,,2018-03-05T09:08:40.000-0500,[DMN Editor] Cannot embed a Decision Table in a Function,Resolved,bug,Bug
2018-03-07T08:49:51.000-0500,DROOLS-2362,Done,"If user specifies list of allowed numbers in the ""Value List"" input, numbers that are separated by white spaces are not parsed, see the number "" 6"" in the screenshot, it should be available in the ""Default Value"" list box.",Minor,Jozef Marko,,2018-03-05T02:53:19.000-0500,[Guided Decision Table] Parsing Number from value list doesn't work with white spaces,Resolved,bug,Bug
2018-03-05T08:18:57.000-0500,DROOLS-2360,Done,"See the attachment, if user clicks on cell with right mouse button, then multiple cells are selected.",Minor,Michael Anstis,,2018-03-01T07:05:00.000-0500,[DMN Designer] Right Mouse Button click select multiple cells,Resolved,bug,Bug
2018-02-22T13:12:58.000-0500,DROOLS-2346,Done,"When marshalling kieSession in production (long running kieSession with a lot of fact insertion), we encountered the following error : 

{noformat}
java.lang.IllegalArgumentException: Comparison method violates its general contract!
	at java.util.TimSort.mergeLo(TimSort.java:777)
	at java.util.TimSort.mergeAt(TimSort.java:514)
	at java.util.TimSort.mergeCollapse(TimSort.java:439)
	at java.util.TimSort.sort(TimSort.java:245)
	at java.util.Arrays.sort(Arrays.java:1438)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.orderFacts(ProtobufOutputMarshaller.java:776)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.writeFactHandles(ProtobufOutputMarshaller.java:707)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.serializeSession(ProtobufOutputMarshaller.java:176)
	at org.drools.core.marshalling.impl.ProtobufOutputMarshaller.writeSession(ProtobufOutputMarshaller.java:120)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.marshall(ProtobufMarshaller.java:164)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.marshall(ProtobufMarshaller.java:148)
{noformat}

Indeed, the orderFacts method in ProtobufoutputMarshaller uses a HandleSorter as comparator, which returns the result of  o1.getId() - o2.getId()  where o1 and o2 are InternalFactHandle.

Since the id of InternalFactHandle is an int, this comparator can cause ""Comparison method violates its general contract!"" IllegalArgumentException because Integer.MAX_INT + 1 < 0.
The comparator should return the result of Integer.compare(o1.getId(), o2.getId())

The root cause is that InternalFactHandle.getId() is an int and should be a long for long running kieSession.
This id is generated by the FactHandleFactory (in AbstractFactHandleFactory) and is an AtomicInteger incremented at each fact creation.
With long running kieSession a lot of fact handles can be created (inserted in memory or with ""from"") so this id can overflow Integer.MAX_INT and become negative, causing this issue when ordering.",Major,Mario Fusco,,2018-02-22T07:41:47.000-0500,"ProtobufOutputMarshaller.orderFacts causes a ""Comparison method violates its general contract"" error",Resolved,bug,Bug
2018-02-23T03:03:53.000-0500,DROOLS-2345,Done,"When using just one kie.conf file for all services, it is not possible to define parent and child service in the same file. This is mainly the case when having an uberjar with all kie dependencies bundled in. In such case such kie.conf file is needed for service registry to work. 

E.g. a user wants to add DMNAssemblerService to kie.conf, 
org.kie.api.internal.assembler.KieAssemblers = +org.kie.dmn.core.assembler.DMNAssemblerService

In such case service discovery fails with an exception 
java.lang.RuntimeException: Child services [org.kie.api.internal.assembler.KieAssemblers] have no parent

I have a proposed fix ready. Will create a PR with it and a reproducer. ",Minor,Tibor Zimanyi,,2018-02-22T07:34:50.000-0500,It is not possible to define parent and child service in the same kie.conf,Resolved,bug,Bug
2018-02-19T09:34:39.000-0500,DROOLS-2327,Done,"When having a test like this [1], the model compilation fails, because the model for the rule is generated with a binding on which reacOn with 2 parameters is called [2]. 

To reproduce the problem, just paste the linked test case into InTest test class from drools-model-compiler module. 

[1] https://gist.github.com/baldimir/38586f1542e69f7127d94c1f20d55589
[2] https://gist.github.com/baldimir/01a5adace56af7379d8c5578cd62e790",Major,Mario Fusco,,2018-02-16T03:25:23.000-0500,"Exec model: Generator adds 2 reactOn parameters to binding, which don't compile",Resolved,bug,Bug
2018-02-16T06:16:19.000-0500,DROOLS-2328,Done,In the [commit|https://github.com/kiegroup/drools/commit/36fee47309d04ceca2a6fd62b7f7a04d2feab443] there was removed public method {{getkModule()}} from the class {{KieBuilderImpl}}. This change is incompatible with the code in {{[org.kie.workbench.common.services.backend.builder.core.Builder|https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-services/kie-wb-common-services-backend/src/main/java/org/kie/workbench/common/services/backend/builder/core/Builder.java#L196]}} class and cause that the {{kie-wb-common}} project can not be built.,Blocker,Jozef Marko,,2018-02-16T03:56:04.000-0500,Removal of public method broked build,Resolved,bug,Bug
2018-02-13T06:17:21.000-0500,DROOLS-2314,Done,"When I start the standalone decision central and open localhost:8080 the web page shows the login screen like from the community, see the attached screenshots.",Blocker,Toni Rikkola,,2018-02-09T11:14:14.000-0500,Standalone decision central is not branded,Closed,bug,Bug
2018-02-12T08:49:53.000-0500,DROOLS-2316,Done,"The following exhibit the issue in the dmn compiler:

{code:java}
    @Test
    public void test3() {
        ItemDefinition tNumberList = build(""tNumberList"");
        ItemDefinition tTax        = build(""tTax"");
        ItemDefinition tStateModel = build(""tStateModel"");
        ItemDefinition tTaxList    = build(""tTaxList"", tTax);
        ItemDefinition tCategory   = build(""tCategory"");
        ItemDefinition tItem       = build(""tItem"", tCategory);
        ItemDefinition tItemList   = build(""tItemList"", tItem);
        ItemDefinition tOrder      = build(""tOrder"", tItemList);
     
        List<ItemDefinition> originalList = Arrays.asList(new ItemDefinition[]{
               tOrder,
               tItem,
               tCategory,
               tNumberList,
               tItemList,
               tTax,
               tStateModel,
               tTaxList
        });
        
        List<ItemDefinition> orderedList = orderingStrategy(originalList);
        
        assertTrue(""Index of tCategory < tItem"", orderedList.indexOf(tCategory) < orderedList.indexOf(tItem));
        assertTrue(""Index of tItem < tItemList"", orderedList.indexOf(tItem) < orderedList.indexOf(tItemList));
        assertTrue(""Index of tItemList < tOrder"", orderedList.indexOf(tItemList) < orderedList.indexOf(tOrder));
        
        assertTrue(""Index of tTax < tTaxList"", orderedList.indexOf(tTax) < orderedList.indexOf(tTaxList));
    }
{code}
",Major,Matteo Mortari,,2018-02-12T06:42:26.000-0500,wrong ordering of ItemDefinition for compilation,Resolved,bug,Bug
2018-02-09T12:33:44.000-0500,DROOLS-2313,Done,"If a thread requests for session objects (using kieSession.getObjects() with or without filters) while another one is inserting objects +*of different concrete classes*+, there is a chance that a new ConcreteObjectStore is added to the concreteStores list at the same time and cause concurrent exception.

Example when using kieSession.getObjects().*iterator()* :

{noformat}
Exception in thread ""QueryingThread"" java.util.ConcurrentModificationException
	at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)
	at java.util.ArrayList$Itr.next(ArrayList.java:851)
	at org.drools.core.common.ClassAwareObjectStore$CompositeObjectIterator.fetchNextIterator(ClassAwareObjectStore.java:556)
	at org.drools.core.common.ClassAwareObjectStore$AbstractCompositeIterator.nextIterator(ClassAwareObjectStore.java:513)
	at org.drools.core.common.ClassAwareObjectStore$AbstractCompositeIterator.fetchNext(ClassAwareObjectStore.java:499)
	at org.drools.core.common.ClassAwareObjectStore$AbstractCompositeIterator.<init>(ClassAwareObjectStore.java:494)
	at org.drools.core.common.ClassAwareObjectStore$AbstractCompositeIterator.<init>(ClassAwareObjectStore.java:487)
	at org.drools.core.common.ClassAwareObjectStore$AbstractCompositeIterator.<init>(ClassAwareObjectStore.java:478)
	at org.drools.core.common.ClassAwareObjectStore$CompositeObjectIterator.<init>(ClassAwareObjectStore.java:546)
	at org.drools.core.common.ClassAwareObjectStore$CompositeObjectIterator.<init>(ClassAwareObjectStore.java:544)
	at org.drools.core.common.ClassAwareObjectStore.iterateObjects(ClassAwareObjectStore.java:186)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$ObjectStoreWrapper.iterator(StatefulKnowledgeSessionImpl.java:679)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$ObjectStoreWrapper.toArray(StatefulKnowledgeSessionImpl.java:710)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$ObjectStoreWrapper.toArray(StatefulKnowledgeSessionImpl.java:695)
	at ft.drools.KieSessionConcurrentTest.lambda$0(KieSessionConcurrentTest.java:125)
{noformat}


Example when using kieSession.getObjects().*toArray()* :

{noformat}
Exception in thread ""QueryingThread"" java.lang.ArrayIndexOutOfBoundsException: 1
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$ObjectStoreWrapper.toArray(StatefulKnowledgeSessionImpl.java:711)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$ObjectStoreWrapper.toArray(StatefulKnowledgeSessionImpl.java:695)
	at ft.drools.KieSessionConcurrentTest.lambda$0(KieSessionConcurrentTest.java:125)
{noformat}
",Major,Mario Fusco,,2018-02-09T07:18:18.000-0500,Bad synchronization of ClassAwareObjectStore list of concreteStores can cause ConcurrentModificationException or ArrayIndexOutOfBoundsException while getting session objects,Resolved,bug,Bug
2018-02-07T11:01:18.000-0500,DROOLS-2286,Done,"When trying to evaluate a FEEL expression like: 

{code:java}
personList[name = ""John""]
{code}

by inserting into the _DMNContext_ a _Java Object_, the _DMN engine_ doesn't seem to be able to fetch the  _name_ field from the object. This doesn't happen if instead of _Java Objects_ we insert a Map.

While trying to debug, it seems that the problem is happening in the following method of  _FilterExpressionNode_.
{code:java}
private void evaluateExpressionInContext(EvaluationContext ctx, List results, Object v) {
        try {
            ctx.enterFrame();
            // handle it as a predicate
            ctx.setValue( ""item"", v );
            // if it is a Map, need to add all string keys as variables in the context
            if( v instanceof Map ) {
                Set<Map.Entry> set = ((Map) v).entrySet();
                for( Map.Entry ce : set ) {
                    if( ce.getKey() instanceof String ) {
                        ctx.setValue( (String) ce.getKey(), ce.getValue() );
                    }
                }
            }

            Object r = this.filter.evaluate( ctx );
            if( r instanceof Boolean && ((Boolean)r) == Boolean.TRUE ) {
                results.add( v );
            }
        } finally {
            ctx.exitFrame();
        }
    }
{code}

Also attatched java and DMN test files that showcases the issue.",Major,Matteo Mortari,,2018-01-31T10:21:41.000-0500,[DMN engine] Java Object in DMNContext not working properly with Filter function.,Closed,bug,Bug
2018-02-07T10:59:13.000-0500,DROOLS-2304,Done,"If the context entry is specified as literal expression, then user can not add context entry while this literal expression cell is selected. It can be seen in the last row of context entry table, where last entry is pair *default : literal expression cell*.

If user clicks on *default*, the table offers show button *add entry* over the table, however if user clicks to *literal expression cell* next to *default* this button is not shown.",Minor,Michael Anstis,,2018-02-06T03:23:31.000-0500,[DMN Designer] Add context entry from literal expression cell,Resolved,bug,Bug
2018-02-08T03:26:21.000-0500,DROOLS-2305,Done,"The Drools compiler class org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration
 does not include Java 9 as a valid language level.  Instead, when run using Java 9, the assumed java version is set to the default value of ""1.7"".

As a consequence, when compiling a rules file requiring Java 8 specific language features, the compilation will fail.  For example, if a rule RHS contains the statement:

{code:java}
Arrays.asList(""a"",""b"",""c"").forEach(System.out::println);
{code}

The rule compilation fails with the error:

{code:java}
[ERROR] Unable to build KieBaseModel:default
Rule Compilation error : [Rule name='test']
	defaultpkg/Rule_test959974052.java (7:387) : Method references are allowed only at source level 1.8 or above
{code}

The problem can be worked around by adding a configuration file META-INF/kie.properties.conf containing the line:

{code:java}
drools.dialect.java.compiler.lnglevel = 1.8
{code}

The Drools compiler code will use this value instead of the System ""java.version"" value, avoiding the problem.

",Major,Mario Fusco,,2018-02-06T13:24:18.000-0500,Drools compiler does not recognize Java 9,Resolved,bug,Bug
2018-02-07T10:43:25.000-0500,DROOLS-2302,Done,"If the context entry table has at least two rows where:
# first row is selected (outline is shown) and the editor type is specified (decision table for example)
# second row has not the editor type specified (6 blue squares shown in that  row)

Then if user clicks on some of these blue squares, the outline should be refreshed to overlap the last added cell / editor.",Minor,Michael Anstis,,2018-02-06T03:10:34.000-0500,[DMN Designer] Outline is not refreshed after new editor type selected,Resolved,bug,Bug
2018-02-02T03:47:24.000-0500,DROOLS-2290,Done,The TimerJobFactoryType has been changed from an enum into a class which is not declared Serializable. That implies that it is no longer serializable and then also the session configuration that contains it isn't.,Major,Mario Fusco,,2018-02-02T03:39:33.000-0500,KieSessionConfiguration is not serializable,Resolved,bug,Bug
2018-02-02T08:32:51.000-0500,DROOLS-2292,Done,None,Major,Mario Fusco,,2018-02-02T08:19:03.000-0500,Reversed path's nodes traversal while inserting the right tuples of a newly added rule during an incremental update may cause an incosistencies in nodes memories,Resolved,bug,Bug
2018-01-31T07:07:41.000-0500,DROOLS-2280,Done,"When running testNamingConventionOnDrlFile test on Windows, it fails on NPE, because the engine cannot find the rule unit ""org/kie/test/MyRuleUnit"" defined in the test, because it contains ""/"" separator character. The method that resolves the classname searches for File.separator character in the mentioned string, which is ""\"" on Windows [1]. 

This is a bug, because e.g. MemoryFileSystem uses ""/"" also when running on Windows. The classname resolution should be OS independent.  

[1] https://github.com/kiegroup/drools/blob/5fad04919f255933bdd34afdb8da10b94f2c8c43/drools-compiler/src/main/java/org/drools/compiler/rule/builder/RuleBuildContext.java#L184",Minor,Tibor Zimanyi,,2018-01-29T10:30:03.000-0500,Resolving rule unit classnames depends on File.separator character,Resolved,bug,Bug
2018-01-29T10:43:11.000-0500,DROOLS-2217,Done,None,Major,Matteo Mortari,,2018-01-05T01:25:15.000-0500,"[DMN Editor] Allow DMN persistence for an incomplete, still being authored, DMN model",Resolved,bug,Bug
2018-01-29T07:16:33.000-0500,DROOLS-2233,Done,"According to the specification in section ""10.3.2.3.5 date"": 
""Where necessary, including the valuedt function (see 10.3.2.x.6), a date value is considered to be equivalent to a date time value in which the time of day is UTC midnight (00:00:00).""

Currently the case time(date(""2017-08-10"")) returns null, because the evaluation ends with DateTimeException, because internally we represent dates as LocalDate class, which doesn't have time part. ",Major,Tibor Zimanyi,,2018-01-11T07:01:03.000-0500,"DMN: time(date(""2017-08-10"")) should return 00:00:00z time",Resolved,bug,Bug
2018-01-29T05:25:44.000-0500,DROOLS-2276,Done,"Under the conditions:

- updateToVersion() is called twice
- A rule is removed on the version change
- The rule has eval()

NoClassDefFoundError is thrown on the second updateToVersion()

{noformat}
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.801 sec <<< FAILURE! - in org.drools.compiler.integrationtests.incrementalcompilation.IncrementalCompilationTest
testRuleRemovalAndEval(org.drools.compiler.integrationtests.incrementalcompilation.IncrementalCompilationTest)  Time elapsed: 1.799 sec  <<< ERROR!
java.lang.NoClassDefFoundError: org/drools/compiler/Rule_R2773041198
	at org.drools.core.common.ProjectClassLoader.tryDefineType(ProjectClassLoader.java:191)
	at org.drools.core.common.ProjectClassLoader.loadType(ProjectClassLoader.java:181)
	at org.drools.core.common.ProjectClassLoader.loadClass(ProjectClassLoader.java:148)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.loadClass(JavaDialectRuntimeData.java:575)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	at org.drools.compiler.Rule_R2773041198Eval0InvokerGenerated.evaluate(Unknown Source)
	at org.drools.compiler.Rule_R2773041198Eval0Invoker.evaluate(Unknown Source)
	at org.drools.core.rule.EvalCondition.isAllowed(EvalCondition.java:129)
	at org.drools.core.phreak.PhreakEvalNode.doLeftInserts(PhreakEvalNode.java:72)
	at org.drools.core.phreak.PhreakEvalNode.doNode(PhreakEvalNode.java:56)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:381)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.AddRemoveRule.forceFlushLeftTuple(AddRemoveRule.java:676)
	at org.drools.core.phreak.AddRemoveRule.flushStagedTuples(AddRemoveRule.java:604)
	at org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:164)
	at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:191)
	at org.drools.core.reteoo.ReteooBuilder.removeRules(ReteooBuilder.java:177)
	at org.drools.core.impl.KnowledgeBaseImpl.removeObjectsGeneratedFromResource(KnowledgeBaseImpl.java:1740)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.removeObjectsGeneratedFromResource(KnowledgeBuilderImpl.java:2281)
	at org.drools.compiler.kie.builder.impl.KieBaseUpdater.run(KieBaseUpdater.java:66)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:734)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:245)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:182)
	at org.drools.compiler.integrationtests.incrementalcompilation.IncrementalCompilationTest.testRuleRemovalAndEval(IncrementalCompilationTest.java:4708)
{noformat}
",Major,Mario Fusco,,2018-01-26T02:22:48.000-0500,NoClassDefFoundError is thrown on updateToVersion() with rule removal and eval,Resolved,bug,Bug
2018-01-25T04:28:40.000-0500,DROOLS-2263,Done,"When using enumerations where the values itself contain a comma, the rules generated by a GDST are unexpected, as the ""contains in"" operator splits those values in the enumerations. Example enumeration:

{noformat}
   fact: person
   field: city
   context: ['paris','london','new york,boston']
{noformat}

Note: see the 'new york, boston' sample.

The code generated will be:

{noformat}
rule ""Row 1 personGDT""
    dialect ""mvel""
    when
        p : person( city in ( ""new york"", ""boston"" ) )
    then
end
{noformat}

Basically ""paris"" and ""new york,boston"" will be treated by the DSL parser as 3 strings in the DRL generation and will produce someting simiular to
   p : person( city in ( ""paris"", ""new york"", ""boston"" ) )
But what the customer expects is the following
   p : person( city in ( ""paris"", ""new york,boston"" ) )
",Major,Toni Rikkola,,2018-01-23T08:02:52.000-0500,Unexpected results in GDST when using enumerations with commas,Resolved,bug,Bug
2018-01-25T04:52:04.000-0500,DROOLS-2261,Done,Context Entry Default Value Column width does not fill parent. Width is fixed if some small resizing is done in grid.,Major,Michael Anstis,,2018-01-23T04:28:27.000-0500,[DMN Designer] Context Entry Default Value Column width does not fill parent,Resolved,bug,Bug
2018-01-25T05:28:24.000-0500,DROOLS-2260,Done,"If user click on the background color picker, the attached exception is thrown.",Major,Michael Anstis,,2018-01-23T04:13:02.000-0500,[DMN Designer] Background Color change throws an Exception,Resolved,bug,Bug
2018-01-23T05:43:13.000-0500,DROOLS-2258,Done,None,Major,Mario Fusco,,2018-01-22T04:55:12.000-0500,NullPointerException in TupleSetsImpl.setNextTuple when the right memory of a shared subnetwork contains more than one tuple,Resolved,bug,Bug
2018-01-23T04:06:44.000-0500,DROOLS-2256,Done,The scroll bars doesn't work in some cases during full screen mode is in action.,Minor,Michael Anstis,,2018-01-19T09:31:42.000-0500,[DMN Designer] Scrollbars in full screen mode ,Resolved,bug,Bug
2018-01-09T13:24:26.000-0500,DROOLS-2224,Done,"Consider the following sequence of events:
# serialize a set of text rule files
# create a binary file for the serialized rule files
# deserialize the binary file created in the step 2.

When each step is executed in different JVM runs, step 3 fails with a NullPointerException:

{noformat}
java.lang.NullPointerException: null
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.isHashable(CompositeObjectSinkAdapter.java:158)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.getHashableAccessor(CompositeObjectSinkAdapter.java:149)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.addObjectSink(CompositeObjectSinkAdapter.java:108)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.addObjectSink(SingleObjectSinkAdapter.java:55)
	at org.drools.core.reteoo.ObjectSource.addObjectSink(ObjectSource.java:216)
	at org.drools.core.reteoo.LeftInputAdapterNode.attach(LeftInputAdapterNode.java:155)
	at org.drools.core.reteoo.builder.BuildUtils.attachNode(BuildUtils.java:141)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.buildTupleSource(GroupElementBuilder.java:126)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:109)
	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:161)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:133)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddRule(KnowledgeBaseImpl.java:1526)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:915)
	at org.drools.core.impl.KnowledgeBaseImpl.lambda$addPackages$1(KnowledgeBaseImpl.java:717)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:734)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:717)
	at org.drools.compiler.integrationtests.SerializedPackageMergeTwoSteps2Test.testBuildAndSerializePackagesInTwoSteps2(SerializedPackageMergeTwoSteps2Test.java:88)
{noformat}

If making one single run for all 3 steps, everything works fine.

The problem are inconsistent hashCode values for the AccessorKey object when the JVM is restarted, due to the usage of Enum.hashCode:
https://github.com/kiegroup/drools/blob/master/drools-core/src/main/java/org/drools/core/base/AccessorKey.java#L48",Major,Mario Fusco,,2018-01-09T08:37:26.000-0500,Inconsistent values returned by AccessorKey.hashCode causes NullPointerException during binary deserialization,Resolved,bug,Bug
2018-01-11T07:34:00.000-0500,DROOLS-2229,Done,"The following error appears every time I create new / open existing GDT
in Firefox (tested with latest 57.0.1 as well as with latest 52 esr) or IE11 but it works fine on chrome.

""Unable to complete your request. The following exception occurred: (String) : ReferenceError: window is not defined (http://localhost:8080/decision-central/verifier/D1F31C11AAF94D26DDBD996797F01787.cache.js:2649).""

Reproducible 100% with RHDM ER1 using Firefox and IE",Blocker,Toni Rikkola,,2018-01-10T05:23:35.000-0500,Error shown every time GDT editor opened in Firefox and IE11,Resolved,bug,Bug
2018-01-09T13:19:18.000-0500,DROOLS-2182,Done,"This code in {{ClassObjectTypeConf}} assumes that an event class always has an @Expires annotation, which is optional:

{code}
            Role role = clazz.getAnnotation(Role.class);
            if (role != null) {
                isEvent = role.value() == Type.EVENT;
                if (isEvent) {
                    Expires expires = clazz.getAnnotation(Expires.class);
                    expirationOffset = TimeIntervalParser.parseSingle( expires.value() );
                }
            }
{code}
{code}
java.lang.NullPointerException
	at org.drools.core.reteoo.ClassObjectTypeConf.<init>(ClassObjectTypeConf.java:99)
	at org.drools.core.common.ObjectTypeConfigurationRegistry.getObjectTypeConf(ObjectTypeConfigurationRegistry.java:69)
	at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:181)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1493)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1453)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1447)
{code}
",Major,Mario Fusco,,2017-12-15T11:05:24.000-0500,NPE when @Expires is missing on event type,Resolved,bug,Bug
2018-01-10T12:15:04.000-0500,DROOLS-2194,Done,"I need to add and remove rules in runtime, without losing facts. 
I'm achieving this by manipulating a kJar on my .m2 folder by adding and removing rules.
The scanner is attached and the scanNow() method is invoked whenever a change occurs.
But whenever I load a rule back (say on rule YYY), I get errors on (XXX), seems like it has to do with accumulates and can occur on various rules, something like:

18:13:15,354 SEVERE [org.rule.package.core.DroolsEJB] (default task-30) Error executing fireAllRules(): java.lang.ClassCastException: org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0 cannot be cast to org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0: java.lang.RuntimeException: java.lang.ClassCastException: org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0 cannot be cast to org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:106)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:750)
	at org.drools.core.phreak.PhreakAccumulateNode.doRightInserts(PhreakAccumulateNode.java:230)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:85)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:567)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:538)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:373)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.AddRemoveRule.forceFlushLeftTuple(AddRemoveRule.java:676)
	at org.drools.core.phreak.AddRemoveRule.flushLeftTupleIfNecessary(AddRemoveRule.java:636)
	at org.drools.core.phreak.AddRemoveRule.flushLeftTupleIfNecessary(AddRemoveRule.java:609)
	at org.drools.core.reteoo.BetaNode.assertObject(BetaNode.java:313)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:487)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:385)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:142)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:70)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:142)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:70)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:142)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:487)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:385)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:367)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:320)
	at org.drools.core.phreak.PropagationEntry$Insert.propagate(PropagationEntry.java:161)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:166)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:91)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1051)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1295)
	at org.rule.package.core.DroolsEJB.fireAllRules(DroolsEJB.java:263)
	at org.rule.package.core.DroolsEJB.insertEvent(DroolsEJB.java:244)
	at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:82)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:93)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
	at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:64)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:83)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInCallerTx(CMTTxInterceptor.java:254)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:329)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:239)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
	at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:110)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:66)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
	at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:636)
	at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
	at org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)
	at org.rule.package.core.DroolsEJB$$$view12.insertEvent(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor97.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.weld.util.reflection.Reflections.invokeAndUnwrap(Reflections.java:433)
	at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:128)
	at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)
	at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:100)
	at org.rule.package.core.DroolsEJB$Proxy$_$$_Weld$EnterpriseProxy$.insertEvent(Unknown Source)
	at org.rule.package.core.EventCorrelationServiceEJB.insertEvent(EventCorrelationServiceEJB.java:24)
	at sun.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:82)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:93)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
	at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:83)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:275)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:327)
	at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:239)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropagatingInterceptor.processInvocation(EJBRemoteTransactionPropagatingInterceptor.java:80)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.deployment.processors.EjbSuspendInterceptor.processInvocation(EjbSuspendInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:66)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
	at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:636)
	at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
	at org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
	at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.invokeMethod(MethodInvocationMessageHandler.java:327)
	at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.access$100(MethodInvocationMessageHandler.java:67)
	at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler$1.run(MethodInvocationMessageHandler.java:200)
	at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.processMessage(MethodInvocationMessageHandler.java:262)
	at org.jboss.as.ejb3.remote.protocol.versionone.VersionOneProtocolChannelReceiver.processMessage(VersionOneProtocolChannelReceiver.java:213)
	at org.jboss.as.ejb3.remote.protocol.versiontwo.VersionTwoProtocolChannelReceiver.processMessage(VersionTwoProtocolChannelReceiver.java:76)
	at org.jboss.as.ejb3.remote.protocol.versionone.VersionOneProtocolChannelReceiver.handleMessage(VersionOneProtocolChannelReceiver.java:159)
	at org.jboss.remoting3.remote.RemoteConnectionChannel$5.run(RemoteConnectionChannel.java:456)
	at org.jboss.remoting3.EndpointImpl$TrackingExecutor$1.run(EndpointImpl.java:731)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassCastException: org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0 cannot be cast to org.rule.package.Rule_XXX_$u40$Start$u41$1698483954$Accumulate0
	at org.rule.package.Rule_XXX_$u40$Start$u41$1698483954Accumulate0Invoker.accumulate(Rule_XXX_$u40$Start$u41$1698483954Accumulate0Invoker.java:46)
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:98)
	... 182 more
",Major,Mario Fusco,,2017-12-20T13:47:47.000-0500,ClassCastException after kiescanner scanNow() method,Resolved,bug,Bug
2018-01-22T04:53:34.000-0500,DROOLS-2215,Duplicate Issue,None,Major,Matteo Mortari,,2018-01-05T01:21:35.000-0500,[DMN Editor] Function Definition is not saved,Resolved,bug,Bug
2018-01-22T05:59:06.000-0500,DROOLS-2216,Duplicate Issue,None,Major,Matteo Mortari,,2018-01-05T01:23:19.000-0500,[DMN Editor] Decision Table Definition is not saved,Resolved,bug,Bug
2018-01-11T04:33:36.000-0500,DROOLS-2221,Done,None,Major,Michael Anstis,,2018-01-08T10:27:13.000-0500,[Guided Decision Tree] Deletion of parent node throws an exception,Resolved,bug,Bug
2018-01-10T04:06:29.000-0500,DROOLS-2226,Done,"When I run test RuleUnitExampleTest.testGo() on Windows, it fails with this output [1]. It looks like some Windows case sensitivity issue. 

[1] https://gist.github.com/baldimir/c62b6d9c41c3ba9f0649a3d4c2bee7f8",Minor,Mario Fusco,,2018-01-10T03:32:02.000-0500,RuleUnitExampleTest.testGo fails on Windows,Resolved,bug,Bug
2018-01-16T04:18:16.000-0500,DROOLS-2230,Done,"We have encountered a deadlock in business-central prohibiting EAP from stopping:

Found one Java-level deadlock:
=============================
""Thread-848"":
  waiting to lock monitor 0x00007f3f8008f788 (object 0x000000008f743730, a org.kie.workbench.common.services.backend.builder.core.LRUProjectDependenciesClassLoaderCache$Proxy$_$$_WeldClientProxy),
  which is held by ""Thread-377""
""Thread-377"":
  waiting to lock monitor 0x00007f3f80092228 (object 0x000000009579fac0, a org.drools.compiler.kie.builder.impl.KieFileSystemImpl),
  which is held by ""Thread-520""
""Thread-520"":
  waiting to lock monitor 0x00007f3f8008f788 (object 0x000000008f743730, a org.kie.workbench.common.services.backend.builder.core.LRUProjectDependenciesClassLoaderCache$Proxy$_$$_WeldClientProxy),
  which is held by ""Thread-377""

Please have a look at the full jstack output in the attachment.",Blocker,Michael Anstis,,2018-01-10T07:39:43.000-0500,Deadlock related to org.kie.workbench.common.services.backend.builder.core.LRUProjectDependenciesClassLoaderCache,Resolved,bug,Bug
2018-01-17T05:45:10.000-0500,DROOLS-2207,Out of Date,"The Validation and Verification panel is missing. The server log contains error [1], however looking into the workbench war, all v&v jars seems to be present.

[1]
ERROR [org.drools.workbench.services.verifier.plugin.backend.VerifierWebWorkerServlet] (default task-119) Failed to load verifier web worker.",Critical,Toni Rikkola,,2018-01-03T10:07:33.000-0500,Validation and Verification panel is missing,Resolved,bug,Bug
2018-01-19T04:48:05.000-0500,DROOLS-2252,Done,"In Guided Rule Editor with DSL option, you can add ""From Accumulate"" but ""Function""/""Custom Code"" gets an error ""Unable to expand"".

Reproduce steps:
- Unzip the attached reproducer-repo.zip
- Clone the repo via business-central ""Administration"" > ""Repositories"" > ""Clone Repository""
- Go to Project Explorer, choose the repo, choose ""project1""
- Go to package org > kie > example > project1. You will find DataObject 'Person,' DSL, Test Scenario
- Create a new Guided Rule. Check ""Use Domain Specific Language (DSL)"" option
- Add conditions (See guidedrule01.png)
-- DSL ""There is a person whose age is 20""
-- ""From Accumulate ...""
--- Choose ""Number"" for the first ""click to add pattern...""
--- Choose ""Person"" for the second ""click to add pattern...""
--- Configure Variable name ""$p"" for ""All Person with""
-- Write ""count($p)"" in Function
- Save
- Press ""Validate""
- You will get an error ""Unable to expand"" (See error01.png)

This is because ""count($p)"" line doesn't have preceding "">"".

{noformat}
rule ""gr1""
        dialect ""mvel""
        when
                There is a person whose age is 20
                >Number( ) from accumulate ( $p : Person( ),
                        count($p))
        then
end
{noformat}

- If you add "">"" at the begging of Function (See guidedrule02.png), you don't get the error.
- But if you close the Editor and reopen the rdslr, the condition is rendered as free form DRL (See guidedrule03.png). So it cannot be a workaround.

- ""Custom Code"" has the same problem as ""Function"". Furthermore, ""Custom Code"" cannot use "">"" because "">"" wouldn't be placed at the beginning of the line.
",Major,Michael Anstis,,2018-01-18T13:55:21.000-0500,"""Unable to expand"" error with acculumate in Guided Rule Editor with DSL",Resolved,bug,Bug
2018-01-12T03:25:54.000-0500,DROOLS-2234,Done,"Only with JSON.
Sending a payload request with example:

{code:java}
{
  ""model-namespace"" : ""http://www.trisotech.com/definitions/_fd2a47fb-a74a-44d7-b26e-cd1a6289839d"",
  ""model-name"" : ""Exercise 1.1"",
  ""decision-name"" : null,
  ""decision-id"" : null,
  ""dmn-context"" : {""Credit Score"" : 4000, ""Income"" : 50000} 
}
{code}

causes NPE:

{code:java}
23:25:06.509 [Acme.Utils.ThreadPool(1)-PooledThread: Acme.Serve.Serve$ServeConnection@4d6e768] ERROR o.k.s.s.d.ModelEvaluatorServiceBase - Error from container 'input-data-string'
java.lang.NullPointerException: null
	at org.kie.server.services.dmn.ModelEvaluatorServiceBase.evaluateDecisions(ModelEvaluatorServiceBase.java:143) ~[classes/:na]
	at org.kie.server.remote.rest.dmn.ModelEvaluatorResource.evaluateDecisions(ModelEvaluatorResource.java:108) [kie-server-rest-dmn-7.6.0-SNAPSHOT.jar:7.6.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_151]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_151]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_151]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_151]
	at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:139) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:295) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:249) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:236) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:402) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:209) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:221) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.plugins.server.tjws.TJWSServletDispatcher.service(TJWSServletDispatcher.java:40) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51) [resteasy-jaxrs-3.0.19.Final.jar:3.0.19.Final]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) [jboss-servlet-api_3.1_spec-1.0.0.Final.jar:1.0.0.Final]
	at Acme.Serve.Serve$ServeConnection.runServlet(Serve.java:2328) [tjws-3.0.19.Final.jar:3.0.19.Final]
	at Acme.Serve.Serve$ServeConnection.parseRequest(Serve.java:2282) [tjws-3.0.19.Final.jar:3.0.19.Final]
	at Acme.Serve.Serve$ServeConnection.run(Serve.java:2054) [tjws-3.0.19.Final.jar:3.0.19.Final]
	at Acme.Utils$ThreadPool$PooledThread.run(Utils.java:1402) [tjws-3.0.19.Final.jar:3.0.19.Final]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_151]
{code}

Please notice there is currently NO WAY of having this JSON payload with the proper DMNClient.
This is because the DMNClient currently forbids null-ifying the decision-name or decision-id attribute.
Hence this is a case when not using the Kie Client but directly forging the JSON payload manually (for instance from another/.NET/JS client)",Major,Matteo Mortari,,2018-01-11T17:29:15.000-0500,DMN JSON payload with decision-name or decision-id null causes NPE,Resolved,bug,Bug
2018-01-12T07:43:53.000-0500,DROOLS-2238,Done,None,Major,Mario Fusco,,2018-01-12T07:37:02.000-0500,Property reactivity mask is not correctly calculated for nodes having a TimerNode as sink,Resolved,bug,Bug
2018-01-12T10:06:36.000-0500,DROOLS-2241,Done,"Wrong cloning of a pattern having a FromNode as source causes wrong initialization of both node and pattern which in turn prevents sharing of FromNode when possible. 

Even worse when the duplicated FromNode are part of a subnetwork also the RiaNode at the end of the subnetwork is wrongly initialized leading to a NPE like the following:

{node}
java.lang.NullPointerException
	at org.drools.core.reteoo.RiaPathMemory.initDataDriven(RiaPathMemory.java:35)
	at org.drools.core.reteoo.PathMemory.<init>(PathMemory.java:50)
{node}",Major,Mario Fusco,,2018-01-12T09:58:29.000-0500,Wrong pattern cloning causes missing FromNode sharing and eventually a NPE,Resolved,bug,Bug
2018-01-12T11:49:25.000-0500,DROOLS-2240,Explained,"We are trying to test rules with timer option and the pseudo clock. 

The problem can probably also be seen by enabling (note the @Ignore) this test: https://github.com/kiegroup/drools/blob/master/drools-compiler/src/test/java/org/drools/compiler/integrationtests/CepFireUntilHaltTimerTest.java

Based on this class, this is a minimal test that shows the problem:

{code}
import org.drools.core.time.SessionPseudoClock;
import org.junit.Test;
import org.kie.api.KieServices;
import org.kie.api.builder.KieFileSystem;
import org.kie.api.builder.model.KieBaseModel;
import org.kie.api.builder.model.KieModuleModel;
import org.kie.api.runtime.KieSession;
import org.kie.api.runtime.conf.ClockTypeOption;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

import static org.junit.Assert.assertEquals;

/**
 * Based on:
 * https://github.com/kiegroup/drools/blob/master/drools-compiler/src/test/java/org/drools/compiler/integrationtests/CepFireUntilHaltTimerTest.java
 */
public class PseudoClockTimerTest {

    private KieSession ksession;
    private SessionPseudoClock clock;

    public void init(String clockType) {
        String drl = ""package test.rules\n"" +
            ""\n"" +
            ""rule \""Do something triggered by timer\""\n"" +
            ""timer (int: 1s 1s)\n"" +
            ""then\n"" +
            ""    System.out.println(\""### DO SOMETHING \"" + drools.getWorkingMemory().getSessionClock().getCurrentTime());\n"" +
            ""    insert(\""### TIME IS \"" + drools.getWorkingMemory().getSessionClock().getCurrentTime());\n"" +
            ""end\n"";

        KieServices ks = KieServices.Factory.get();

        KieModuleModel module = ks.newKieModuleModel();

        KieBaseModel defaultBase = module.newKieBaseModel(""defaultKBase"")
            .setDefault(true)
            .addPackage(""*"");
        defaultBase.newKieSessionModel(""defaultKSession"")
            .setDefault(true)
            .setClockType(ClockTypeOption.get(clockType));

        KieFileSystem kfs = ks.newKieFileSystem()
            .write(""src/main/resources/r1.drl"", drl);
        kfs.writeKModuleXML(module.toXML());
        ks.newKieBuilder(kfs).buildAll();

        ksession = ks.newKieContainer(ks.getRepository().getDefaultReleaseId())
            .newKieSession();

        if (clockType.equals(""pseudo""))
            clock = ksession.getSessionClock();
    }

    public void cleanup() {
        ksession.dispose();
    }

    @Test
    public void testTimerExecution() throws Exception {

        init(""realtime"");
        performRealtimeClockTest();
        cleanup();

        init(""pseudo"");
        performPseudoClockTest();
        cleanup();
    }

    private void performRealtimeClockTest() throws Exception {
        ExecutorService thread = Executors.newSingleThreadExecutor();
        final Future fireUntilHaltResult = thread.submit(() -> ksession.fireUntilHalt());

        try {
            Thread.sleep(10500);
            assertEquals(10, ksession.getFactCount());
        } finally {
            ksession.halt();
            fireUntilHaltResult.get(60000, TimeUnit.SECONDS);
            thread.shutdown();
        }
    }

    private void performPseudoClockTest() throws Exception {
        ExecutorService thread = Executors.newSingleThreadExecutor();
        final Future fireUntilHaltResult = thread.submit(() -> ksession.fireUntilHalt());

        try {
            Thread.sleep(500);

            // NOT WORKING:
            // clock.advanceTime(10, TimeUnit.SECONDS);
            // Thread.sleep(50);

            // WORKAROUND:
            for (int i = 0; i < 10; i++) {
                clock.advanceTime(1, TimeUnit.SECONDS);
                Thread.sleep(50);
            }

            assertEquals(10, ksession.getFactCount());
        } finally {
            ksession.halt();
            fireUntilHaltResult.get(60000, TimeUnit.SECONDS);
            thread.shutdown();
        }
    }
}
{code}

See the NOT WORKING and WORKAROUND markers. There doesn't seem to be any other test in the codebase with timer rules and the pseudo clock, so our conclusion is that this combination is not working at all.

",Major,Mario Fusco,,2018-01-12T09:41:49.000-0500,Timer rules with pseudo clock don't fire,Resolved,bug,Bug
2018-01-08T05:49:37.000-0500,DROOLS-2181,Done,"- Double-click on a node (object/action) to edit/delete/collapse.

- Pop-up shows the icons/buttons.

- Click on Edit/Delete/collapse icon. Icons are frozen.",Major,Michael Anstis,,2017-12-15T07:33:37.000-0500,"Icons (Edit, Collapse, Delete etc) do not respond to mouse clicks",Resolved,bug,Bug
2018-01-04T13:15:30.000-0500,DROOLS-2212,Done,Save operation in dmn editor throws an exception if the dmn diagram contains decision node holding relation or invocation context entry.,Major,Michael Anstis,,2018-01-04T08:09:03.000-0500,[DMN Editor] Relation and Invocation can not be saved,Resolved,bug,Bug
2018-01-05T10:25:47.000-0500,DROOLS-2219,Done,None,Major,Mario Fusco,,2018-01-05T10:02:26.000-0500,CCE on node memories when using rule units but inserting a fact into the shared memory,Resolved,bug,Bug
2018-01-04T12:37:55.000-0500,DROOLS-2213,Done,"Creating the same KieBase from a KieContainer with the same ReleaseId second time fails on NullPoinerException [1]. Reproducer can be found here [2].

[1] https://gist.github.com/baldimir/b3fa7ed299d5e0d7b74e4cc8bc4878f3
[2] https://github.com/kiegroup/drools/pull/1681

",Major,Mario Fusco,,2018-01-04T10:24:19.000-0500,Cannot recreate the same KieBase when using canonical model,Resolved,bug,Bug
2018-01-03T13:30:31.000-0500,DROOLS-2208,Done,None,Major,Mario Fusco,,2018-01-03T10:18:42.000-0500,Sometimes the agenda stops firing even if there are outstanding activations to be evaluated,Resolved,bug,Bug
2018-01-03T13:31:08.000-0500,DROOLS-2209,Done,None,Major,Mario Fusco,,2018-01-03T12:24:31.000-0500,Error with accumulator and DataSource being used in rule units,Resolved,bug,Bug
2018-01-04T06:25:17.000-0500,DROOLS-2211,Done,None,Major,Mario Fusco,,2018-01-04T06:14:16.000-0500,Trying to modify a global wm object from the consequence of a rule belonging to rule unit causes a NPE,Resolved,bug,Bug
2018-01-03T10:40:19.000-0500,DROOLS-2189,Done,None,Major,Toni Rikkola,,2017-12-18T13:05:37.000-0500,Business central shows redundant warning messages from validation.,Closed,bug,Bug
2018-01-03T04:03:58.000-0500,DROOLS-2200,Done,"When a DMN Decision Table output is structured, and one of the field of the output structure is assigned a null value, throws NPE
 !image-2017-12-28-14-36-21-072.png|thumbnail! ",Major,Matteo Mortari,,2017-12-28T08:36:31.000-0500,NPE when structured DT output field is null,Resolved,bug,Bug
2018-01-03T04:04:54.000-0500,DROOLS-2201,Done,"A Context result (last line)
and
A Decision Table output column

are not obliging to the configuration for runtime typecheck.",Major,Matteo Mortari,,2017-12-28T10:13:41.000-0500,DMN runtime typecheck not managed for context and DT output,Resolved,bug,Bug
2017-12-22T12:25:43.000-0500,DROOLS-2199,Done,None,Major,Mario Fusco,,2017-12-22T12:15:01.000-0500,Rule units are executed in reverse order when a consequence calls a sequence of drools.run(unit),Resolved,bug,Bug
2017-12-22T09:23:46.000-0500,DROOLS-2197,Done,None,Major,Mario Fusco,,2017-12-22T08:23:38.000-0500,When a declared type is modified during an incremental compilation the old version isn't evicted from the TypeResolver cache,Resolved,bug,Bug
2017-12-21T06:41:50.000-0500,DROOLS-2195,Done,None,Major,Mario Fusco,,2017-12-21T06:20:00.000-0500,CCE when modifying a declared type during an incremental update,Resolved,bug,Bug
2017-12-20T11:33:09.000-0500,DROOLS-2191,Done,"The mentioned test fails randomly on Kie Jenkins. It must be investigated. 

https://kie-jenkins.rhev-ci-vms.eng.rdu2.redhat.com/job/drools/281/testReport/junit/org.drools.compiler.integrationtests.concurrency/SharedSessionParallelTest/testLongRunningRule2_Enforced_jitting_true__Serialize_KieBase_false_/",Major,Tibor Zimanyi,,2017-12-19T08:50:15.000-0500,Test SharedSessionParallelTest.testLongRunningRule2 fails randomly on Kie Jenkins,Resolved,bug,Bug
2017-12-19T03:46:31.000-0500,DROOLS-2183,Done,"To support CEP using RuleUnits, we need to be able to configure a session that uses the PseudoClock (a best practice when using deterministic CEP rule execution). However, in the current implementation, the KieSession configuration in kmodule.xml is discarded. Second, there is not a nice way in the current API to pass session configuration programmatically.

A reproducer of the problem can be found here (sorry for not cleaning it up nicely. It basically tries to set the SessionClock as fact into WorkingMemory, and at that time trying to cast to SessionPseudoClock.): https://github.com/DuncanDoyle/rule-unit-and-session-conf

Just run ""mvn clean test"" on that project.

As discussed on IRC, we agreed that the proper way of doing this would be to make the RuleUnitExecutor a container resource and allow it to use session configuration defined in kmodule.xml (also from a KIE-Server perspective).",Major,Mario Fusco,,2017-12-15T11:09:18.000-0500,Can't configure KieSession used in RuleUnitExecutor,Resolved,bug,Bug
2017-12-19T10:03:52.000-0500,DROOLS-2192,Done,"DMN QName regex does not match with serialization strategy.

A qname string serialization as 

{code:java}
{http://namespace}localPart
{code}

would fail the regex of MarshallingUtils.

Additionally FunctionDefinition could now rely on the additionalAttributes generally available at the level of DMNModelInstrumentedBase (which would also serialize any other type of additional attributes, preserving from any original .dmn file).

Finally, it was noted calling getDecisionResultByName on DMNResultImpl by passing a wrong name would have thrown the stacktrace for wrong use of Optional.get(), instead of returning null as per getDecisionResultById() of the same class.",Major,Matteo Mortari,,2017-12-19T09:09:08.000-0500,DMN QName regex problem and assimilated for function drools:kind,Resolved,bug,Bug
2017-12-14T05:55:12.000-0500,DROOLS-2177,Done,"{{EditableHeaderMetaData}} Uses {{DOMElementFactory}} for {{DOMElement}} used to edit the header's content. If the User starts editing a column header and then performs some action (such as resizing a column, panning, etc) the {{DOMElement}} is not destroyed.",Major,Michael Anstis,,2017-12-14T05:16:43.000-0500,[DMN Editor] EditableHeaderMetaData should destroy resources,Resolved,bug,Bug
2017-12-14T09:50:30.000-0500,DROOLS-2179,Done,A {{EditableHeaderMetaData}} can span multiple columns. However when the User double-clicks to edit the header the {{DOMElement}} is sized and positioned for the single column in which the User double-clicked. It should span multiple columns if need be.,Major,Michael Anstis,,2017-12-14T06:27:00.000-0500,[DMN Editor] EditableHeaderMetaData DOMElement can span multiple columns,Resolved,bug,Bug
2017-12-13T02:47:48.000-0500,DROOLS-2169,Done,"When running the test on IBM JDK, it fails with this stack [2]. A keystore that is not created by IBM JDK is used in the test, which can be a cause for this problem. See this example [1].

[1] http://www-01.ibm.com/support/docview.wss?uid=swg21692970
[1] java.lang.RuntimeException: Error initialising KeyStore: com.sun.crypto.provider.SealedObjectForKeyProtector
	at com.ibm.crypto.provider.JceKeyStore.engineLoad(Unknown Source)
	at java.security.KeyStore.load(KeyStore.java:1456)
	at org.drools.core.util.KeyStoreHelper.loadKeystore(KeyStoreHelper.java:144)
	at org.drools.core.util.KeyStoreHelper.initKeyStore(KeyStoreHelper.java:138)
	at org.drools.core.util.KeyStoreHelper.<init>(KeyStoreHelper.java:96)
	at org.drools.core.util.KeyStoreHelperTest.testLoadPassword(KeyStoreHelperTest.java:91)",Major,Tibor Zimanyi,,2017-12-08T03:39:26.000-0500,IBM JDK: KeyStoreHelperTest.testLoadPassword fails on IBM JDK,Resolved,bug,Bug
2017-12-11T08:17:25.000-0500,DROOLS-2172,Done,None,Major,Mario Fusco,,2017-12-11T06:51:16.000-0500,Segment split can cause the resulting segments to be associated to the wrong path,Resolved,bug,Bug
2017-12-05T04:19:57.000-0500,DROOLS-2162,Rejected,"We detected a very strange behavior when processing Rules that contain expressions like ""...startsWith(.."".

 !2017-12-04_12-33-29.png|thumbnail! 

Sometimes this error disappears when we simply re-upload the Rule file and it gets recompiled.",Blocker,Mario Fusco,,2017-12-04T06:50:50.000-0500,Error evaluating constraint,Closed,bug,Bug
2017-11-30T13:47:21.000-0500,DROOLS-2151,Done,None,Major,Matteo Mortari,,2017-11-23T15:04:20.000-0500,"DMN default disable Runtime type-check, provide flag for explicit enablement",Resolved,bug,Bug
2017-11-30T08:08:33.000-0500,DROOLS-2140,Done,"If you enter ""pinned mode"" it is still possible to drag the table using the ""drag handle"" (i.e. table name cell). This appears to be caused by {{GridWidgetDnDMouseMoveHandler.findGridColumn(...)}} that sets the DnD state to {{GRID_MOVE_PENDING}} when over the ""drag handle"" even if the table is ""pinned"". 

Panning is OK.",Major,Michael Anstis,,2017-11-16T06:08:19.000-0500,[Guided Decision Table] Dragging table should be disabled when pinned,Resolved,bug,Bug
2017-11-29T08:37:42.000-0500,DROOLS-2146,Done,None,Major,Mario Fusco,,2017-11-17T17:36:35.000-0500,kie-maven-plugin does not include package in error messages,Resolved,bug,Bug
2017-11-27T10:35:02.000-0500,DROOLS-2147,Done,"Attached model is raising the following runtime error:

{quote}Error while evaluating node 'People groups': the declared result type is 'DMNType\{ http://www.trisotech.com/dmn/definitions/_cbdacb7b-f72d-457d-b4f4-54020a06db24 : tListPeople }' but the actual value '\[\[\{Age=20, Name=Ana}, \{Age=22, Name=Bob}], \[\{Age=27, Name=Charlie}, \{Age=29, Name=Daniel}], \[\{Age=31, Name=Edson}, \{Age=32, Name=Fred}]]' is not an instance of that type{quote}

The  engine should not generate such error as the type is correct.",Major,Matteo Mortari,,2017-11-20T20:01:54.000-0500,Type test error,Resolved,bug,Bug
2017-11-27T10:33:28.000-0500,DROOLS-2144,Done,None,Major,Matteo Mortari,,2017-11-17T03:29:20.000-0500,Fix BaseFEELFunction.getCandidateMethod for non-custom empty param with EvaluationCotnext,Resolved,bug,Bug
2017-11-29T02:40:44.000-0500,DROOLS-2153,Done,"When an underlying compilation fails and returns null, the compiler throws NPE. See the code here [1]. I will provide a PR with a fix and a reproducer. 

[1] https://github.com/baldimir/drools/blob/7a6db1342925872a898dee3f1d03f835b198a7eb/kie-dmn/kie-dmn-core/src/main/java/org/kie/dmn/core/compiler/DMNCompilerImpl.java#L116",Major,Tibor Zimanyi,,2017-11-28T09:08:00.000-0500,DMN compiler throws NPE when underlying compilation fails and returns null,Resolved,bug,Bug
2017-11-27T10:29:39.000-0500,DROOLS-2143,Done,Several TCK tests are failing in the Nov/2017 batch. This ticket is to fix the broken tests.,Major,Matteo Mortari,,2017-11-16T13:31:45.000-0500,Align to latest TCK tests,Resolved,bug,Bug
2017-11-20T17:28:12.000-0500,DROOLS-2125,Done,"When a list is set as a value in a unary test, it should be checked for containment. Currently the engine checks for equality. 

E.g.: in a decision table, if the input expression is ""bob"" and the input entry in a row is listOfNames, the engine should check if ""bob"" is an element contained in listOfNames.

",Major,Matteo Mortari,,2017-11-10T19:02:57.000-0500,"Lists as unary tests should be checked for containment, not equality",Resolved,bug,Bug
2017-11-16T08:00:34.000-0500,DROOLS-2126,Done,"Build for kie-docs fails to compile due missing ""jackson"" classes from dependencies 

{noformat}
[INFO] --- maven-compiler-plugin:3.6.0:testCompile (default-testCompile) @ kie-docs-code ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 1 source file to /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/target/test-classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[22,28] package org.codehaus.jackson does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[23,32] package org.codehaus.jackson.map does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[24,32] package org.codehaus.jackson.map does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[37,49] cannot find symbol
  symbol:   class JsonGenerationException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[37,74] cannot find symbol
  symbol:   class JsonMappingException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[64,56] cannot find symbol
  symbol:   class JsonGenerationException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[64,81] cannot find symbol
  symbol:   class JsonMappingException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[92,58] cannot find symbol
  symbol:   class JsonGenerationException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[92,83] cannot find symbol
  symbol:   class JsonMappingException
  location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[INFO] 9 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] KIE :: Documentation ............................... SUCCESS [  1.616 s]
[INFO] KIE :: Documentation :: Example Code ............... FAILURE [  1.368 s]
[INFO] KIE :: Documentation Guides ........................ SKIPPED
[INFO] KIE :: Documentation :: Drools ..................... SKIPPED
[INFO] KIE :: Documentation :: jBPM ....................... SKIPPED
[INFO] KIE :: Documentation :: OptaPlanner Workbench and Execution Server SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.777 s
[INFO] Finished at: 2017-11-13T14:45:00+01:00
[INFO] Final Memory: 77M/990M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.6.0:testCompile (default-testCompile) on project kie-docs-code: Compilation failure: Compilation failure: 
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[22,28] package org.codehaus.jackson does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[23,32] package org.codehaus.jackson.map does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[24,32] package org.codehaus.jackson.map does not exist
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[37,49] cannot find symbol
[ERROR]   symbol:   class JsonGenerationException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[37,74] cannot find symbol
[ERROR]   symbol:   class JsonMappingException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[64,56] cannot find symbol
[ERROR]   symbol:   class JsonGenerationException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[64,81] cannot find symbol
[ERROR]   symbol:   class JsonMappingException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[92,58] cannot find symbol
[ERROR]   symbol:   class JsonGenerationException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] /home/mnovotny/projects/git/KIEGROUP/kie-docs/code/src/test/java/org/guvnor/rest/backend/documentation/GuvnorSerializationExamplesTest.java:[92,83] cannot find symbol
[ERROR]   symbol:   class JsonMappingException
[ERROR]   location: class org.guvnor.rest.backend.documentation.GuvnorSerializationExamplesTest
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :kie-docs-code
{noformat}",Critical,Marek Novotny,,2017-11-13T08:47:02.000-0500,"kie-docs,kie-workbench-webapp: missing jackson dependency classes",Resolved,bug,Bug
2017-11-17T13:30:04.000-0500,DROOLS-2145,Done,"Description of problem:
When using the following configuration in Spring context, the listener is not called when the rule triggered by the batch fires:

  <kie:ksession name=""ksession1"">
    <kie:ruleRuntimeEventListener ref=""mock-wm-listener""/>
    <kie:batch>
      <kie:insert-object ref=""person""/>
      <kie:fire-all-rules/>
    </kie:batch>
  </kie:ksession>

The listener is triggered when a fact is inserted into the KieSession and fireAllRules() called in the test code (not in the batch).

The fact seems to be inserted into WM and rules fire when the batch is used. This leads to a suggestion that kie-spring might register listeners after it executes the batch (but I have not verified it).

Please see PR with unit test for details.

Version-Release number of selected component (if applicable):
BRMS 6.2.1

How reproducible:
always

Steps to Reproduce:
1. run org.kie.spring.KieSpringListenersBatchTest

Actual results:
The test fails.

Expected results:
The test succeeds.",Major,Mario Fusco,,2017-11-17T09:36:56.000-0500,Kie-Spring: listeners on KieSession not called when batch is used,Resolved,bug,Bug
2017-11-16T08:19:15.000-0500,DROOLS-2139,Done,The parent test class for many Drools tests - CommonTestMethodBase extends Junit's Assert class. Assert class is a static util class which shouldn't be extended and static import should be used instead where needed. ,Minor,Tibor Zimanyi,,2017-11-16T02:59:31.000-0500,Test class CommonTestMethodBase extends Assert class,Closed,bug,Bug
2017-11-17T05:44:58.000-0500,DROOLS-2135,Done,"Having a test like this:
https://gist.github.com/mackaypeter/d8b576ce34d42794da559308b1854aff

Produces the following error:
{code}
Unable to Analyse Expression this.getName() == ""joe"":
[Error: unable to resolve method using strict-mode: org.drools.compiler.oopath.MyTest$Parent.getName()]
[Near : {... this.getName() == ""joe"" ....}]
                  ^
[Line: 4, Column: 2] : [Rule name='R']
{code}

It seems like it tries to look for the method definition in the Parent class instead of the Child class. The rule works correctly when there's a getName method defined in Parent. Meaning the rule compiles and fires correctly.",Minor,Mario Fusco,,2017-11-15T10:29:28.000-0500,Rule compilation can fail when using an attribute/method of OOPath provided variable,Resolved,bug,Bug
2017-11-17T05:44:41.000-0500,DROOLS-2134,Done,"When trying to run OOPathTest#testDeclarationOutsideOOPath [1] with enforced jitting, the test fails with following exception:
{code}
java.lang.RuntimeException: Error evaluating constraint 'this != $ic1' in []

	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:273)
	at org.drools.core.rule.constraint.MvelConstraint.isAllowedCachedLeft(MvelConstraint.java:233)
	at org.drools.core.common.DoubleBetaConstraints.isAllowedCachedLeft(DoubleBetaConstraints.java:109)
	at org.drools.core.phreak.PhreakFromNode.propagate(PhreakFromNode.java:317)
	at org.drools.core.phreak.PhreakFromNode.checkConstraintsAndPropagate(PhreakFromNode.java:290)
	at org.drools.core.phreak.PhreakFromNode.doLeftInserts(PhreakFromNode.java:120)
	at org.drools.core.phreak.PhreakFromNode.doNode(PhreakFromNode.java:68)
	at org.drools.core.phreak.PhreakReactiveFromNode.doNode(PhreakReactiveFromNode.java:34)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:392)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1295)
	at org.drools.compiler.oopath.OOPathTest.testDeclarationOutsideOOPath(OOPathTest.java:1010)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:117)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
Caused by: java.lang.ClassCastException: org.drools.compiler.oopath.model.TMFile cannot be cast to org.drools.compiler.oopath.model.TMFileSet
	at ConditionEvaluator02d1ed6d278d48e7bf85d6c59d74e5c4.evaluate(Unknown Source)
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:271)
	... 48 more
{code}

[1]: https://github.com/kiegroup/drools/blob/6214852d8332b8708bc845794e3f2207c4e5fe97/drools-compiler/src/test/java/org/drools/compiler/oopath/OOPathTest.java#L913",Minor,Mario Fusco,,2017-11-15T08:37:49.000-0500,OOPathTest#testDeclarationOutsideOOPath fails with ClassCastException when jitting is enforced,Resolved,bug,Bug
2017-10-30T08:21:30.000-0400,DROOLS-2074,Done,"The attached guided decision table contains BRL condition fragment that can not be updated. In other words, click on finish in the edit column definition wizard causes VetoException. The BRL fragment is quite complex, so please see steps to reproduce for more details.",Major,Michael Anstis,,2017-10-27T10:39:59.000-0400,[Guided Decision Table] BRL Condition Update is Vetoed,Resolved,bug,Bug
2017-10-31T06:50:00.000-0400,DROOLS-2076,Done,None,Blocker,Michael Anstis,,2017-10-30T06:05:48.000-0400,[DataModelOracle] DSL Sentences are not loaded,Resolved,bug,Bug
2017-10-31T11:24:24.000-0400,DROOLS-1773,Done,"When Drools trait tests tests are executed with JDK 9, some of them fail with errors related to invokespecial codes with similar stacktrace to this [1]. Please see the linked spreadsheet [2] for more information. The spreadsheet contains JDK 9 fails also from other areas. 

[1] https://gist.github.com/baldimir/9972c37fe1a1af09bfa0a1605c611306
[2] https://docs.google.com/a/redhat.com/spreadsheets/d/1acFYb9utXhHb3KU2t3FnvTQCmGln9qmC5Aa28UXu3EY/edit?usp=sharing",Major,Mario Fusco,,2017-10-25T07:58:07.000-0400,JDK 9 with drools: Trait tests fail on invokespecial codes,Resolved,bug,Bug
2017-10-31T11:28:28.000-0400,DROOLS-1774,Done,"When tests from drools-persistence-jpa module are run with JDK 9, the tests fail with this stacktrace [1]. It is probably due to xml apis not being part of default Java 9 modules. 

To see all failing test in the persistence module, please see this spreadsheet [2].

[1] https://gist.github.com/baldimir/76bff4a7a5ad3786f865cc7d0eb59efe
[2] https://docs.google.com/a/redhat.com/spreadsheets/d/1acFYb9utXhHb3KU2t3FnvTQCmGln9qmC5Aa28UXu3EY/edit?usp=sharing",Major,Mario Fusco,,2017-10-25T09:50:39.000-0400,JDK 9 with drools: Drools persistence tests fail on ClassNotFoundException: JAXBException ,Resolved,bug,Bug
2017-10-30T10:10:34.000-0400,DROOLS-1780,Done,"Running on latest JDK 9 (9.0.1)  + Maven 3.5.2, maven-javadoc-plugin (3.0.0-M1) fails with NPE when generating the javadoc for kie-internal. The plugin is supposed to be compatible with JDK 9. Based on the reported error this could also be a bug in the javadoc tool itself:
{code}
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.0.0-M1:javadoc (default-cli) on project kie-internal: An error has occurred in Javadoc report generation: 
[ERROR] Exit code: 1 - javadoc: error - An exception occurred while building a component: MethodsSummary
[ERROR] 	(java.lang.NullPointerException)
[ERROR] Please file a bug against the javadoc tool via the Java bug reporting page
[ERROR] (http://bugreport.java.com) after checking the Bug Database (http://bugs.java.com)
[ERROR] for duplicates. Include error messages and the following diagnostic in your report. Thank you.
[ERROR] java.lang.NullPointerException
[ERROR] 	at jdk.compiler/com.sun.tools.javac.api.JavacTrees.attributeDocReference(JavacTrees.java:445)
[ERROR] 	at jdk.compiler/com.sun.tools.javac.api.JavacTrees.getElement(JavacTrees.java:405)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper.getElement(CommentHelper.java:178)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper$3.visitReference(CommentHelper.java:459)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper$3.visitReference(CommentHelper.java:433)
[ERROR] 	at jdk.compiler/com.sun.tools.javac.tree.DCTree$DCReference.accept(DCTree.java:631)
[ERROR] 	at jdk.compiler/com.sun.source.util.SimpleDocTreeVisitor.visit(SimpleDocTreeVisitor.java:79)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper$3.visitLink(CommentHelper.java:444)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper$3.visitLink(CommentHelper.java:433)
[ERROR] 	at jdk.compiler/com.sun.tools.javac.tree.DCTree$DCLink.accept(DCTree.java:500)
[ERROR] 	at jdk.compiler/com.sun.source.util.SimpleDocTreeVisitor.visit(SimpleDocTreeVisitor.java:79)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper.getReferencedElement(CommentHelper.java:476)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.util.CommentHelper.getReferencedClass(CommentHelper.java:365)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter.seeTagToContent(HtmlDocletWriter.java:1510)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter$2.visitLink(HtmlDocletWriter.java:1949)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter$2.visitLink(HtmlDocletWriter.java:1797)
[ERROR] 	at jdk.compiler/com.sun.tools.javac.tree.DCTree$DCLink.accept(DCTree.java:500)
[ERROR] 	at jdk.compiler/com.sun.source.util.SimpleDocTreeVisitor.visit(SimpleDocTreeVisitor.java:79)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter.commentTagsToContent(HtmlDocletWriter.java:2017)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter.addCommentTags(HtmlDocletWriter.java:1719)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter.addCommentTags(HtmlDocletWriter.java:1700)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDocletWriter.addSummaryComment(HtmlDocletWriter.java:1670)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.SubWriterHolderWriter.addIndexComment(SubWriterHolderWriter.java:207)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.SubWriterHolderWriter.addSummaryLinkComment(SubWriterHolderWriter.java:243)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.AbstractMemberWriter.addMemberSummary(AbstractMemberWriter.java:533)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.MemberSummaryBuilder.buildSummary(MemberSummaryBuilder.java:359)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.MemberSummaryBuilder.addSummary(MemberSummaryBuilder.java:515)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.MemberSummaryBuilder.buildMethodsSummary(MemberSummaryBuilder.java:309)
[ERROR] 	at jdk.internal.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
[ERROR] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractBuilder.build(AbstractBuilder.java:157)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractMemberBuilder.build(AbstractMemberBuilder.java:87)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractBuilder.buildChildren(AbstractBuilder.java:200)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.ClassBuilder.buildMemberSummary(ClassBuilder.java:333)
[ERROR] 	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
[ERROR] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractBuilder.build(AbstractBuilder.java:157)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractBuilder.buildChildren(AbstractBuilder.java:200)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.ClassBuilder.buildClassDoc(ClassBuilder.java:155)
[ERROR] 	at jdk.internal.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
[ERROR] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] 	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.AbstractBuilder.build(AbstractBuilder.java:157)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.builders.ClassBuilder.build(ClassBuilder.java:125)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:263)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:273)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:207)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.doclets.toolkit.AbstractDoclet.run(AbstractDoclet.java:117)
[ERROR] 	at jdk.javadoc/jdk.javadoc.doclet.StandardDoclet.run(StandardDoclet.java:72)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.tool.Start.parseAndExecute(Start.java:574)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.tool.Start.begin(Start.java:423)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.tool.Start.begin(Start.java:340)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.tool.Main.execute(Main.java:63)
[ERROR] 	at jdk.javadoc/jdk.javadoc.internal.tool.Main.main(Main.java:52)
[ERROR] 
[ERROR] Command line was: /opt/tools/jdk9/bin/javadoc -J-Xmx512m -J-Xms128m @options @packages
{code}",Major,Petr Široký,,2017-10-26T05:37:27.000-0400,JDK 9 kie-internal: javadoc plugin fails with NPE,Resolved,bug,Bug
2017-10-16T11:32:37.000-0400,DROOLS-1766,Done,None,Major,Mario Fusco,,2017-10-16T11:17:41.000-0400,Useless ClassLoader cloning during kieproject compilation,Resolved,bug,Bug
2017-10-06T08:32:27.000-0400,DROOLS-1751,Done,"Under the conditions:

- 2 KiePackages with the same package name but different rules
- Those packages are used by a kbase so ""inUse = true""
- Create another kbase and call kbase.addPackages() for those packages

MVELDialectRuntimeData has a problem in merging mvelReaders so later rule execution fails with NullPointerException.

{noformat}
java.lang.NullPointerException: null
	at org.mvel2.MVEL.executeExpression(MVEL.java:953)
	at org.drools.core.util.MVELSafeHelper$RawMVELEvaluator.executeExpression(MVELSafeHelper.java:506)
	at org.drools.core.base.extractors.MVELObjectClassFieldReader.getValue(MVELObjectClassFieldReader.java:140)
	at org.drools.core.rule.Declaration.getValue(Declaration.java:222)
	at org.drools.core.base.mvel.MVELCompilationUnit.updateFactory(MVELCompilationUnit.java:386)
	at org.drools.core.base.mvel.MVELCompilationUnit.getFactory(MVELCompilationUnit.java:320)
	at org.drools.core.base.dataproviders.MVELDataProvider.evaluate(MVELDataProvider.java:137)
	at org.drools.core.base.dataproviders.MVELDataProvider.getResults(MVELDataProvider.java:133)
	at org.drools.core.phreak.PhreakFromNode.doLeftInserts(PhreakFromNode.java:106)
	at org.drools.core.phreak.PhreakFromNode.doNode(PhreakFromNode.java:68)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:387)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:333)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:169)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1295)
	at org.drools.compiler.integrationtests.Misc2Test.testMergeMVELDialect(Misc2Test.java:9109)
{noformat}",Major,Mario Fusco,,2017-10-06T01:15:52.000-0400,NullPointerException on org.mvel2.MVEL.executeExpression(),Resolved,bug,Bug
2017-09-28T09:27:48.000-0400,DROOLS-1744,Done,"I am working on a multi-module BRMS project, with each module encapsulating a set of rules forming a single knowledge base. There is an empty ""packaging"" module which inherits each of these modules in order to generate a single KJAR for deployment purposes. The application then utilises this KJAR via the KieScanner/ReleaseId approach to facilitate dynamic rule loading at runtime and decoupling of application/rules.
Having taken the above approach I have encountered an issue when including knowledge bases that contain rule templates. Drools is unable to build these knowledge bases, reporting duplicate rule names; it appears to believe that the rules exist in both the inheriting and inherited knowledge bases. This behaviour is not seen when including knowledge bases containing standard rules or decision tables - just rule templates. 

An example of the error reported is:

{{4528 [main] INFO org.drools.compiler.kie.builder.impl.KieRepositoryImpl - KieModule was added: ZipKieModule[releaseId=my.drools.templates:ruleModuleOne:1.0-SNAPSHOT,file=C:\Users\black\.m2\repository\my\drools\templates\ruleModuleOne\1.0-SNAPSHOT\ruleModuleOne-1.0-SNAPSHOT.jar]
5145 [main] ERROR org.drools.compiler.kie.builder.impl.KieProject - Unable to build KieBaseModel:ruleModule_1_kbase
[7,4]: Duplicate rule name: Rule One :: CCC_4
[15,4]: Duplicate rule name: Rule One :: BBB_3
[23,4]: Duplicate rule name: Rule One :: AAA_2
[7,4]: Duplicate rule name: Rule Two :: EEE_3
[16,4]: Duplicate rule name: Rule Two :: DDD_2

5329 [main] ERROR org.drools.compiler.kie.builder.impl.KieProject - Unable to build KieBaseModel:inheritedTemplateModules-ruleModule_1_kbase
[7,4]: Duplicate rule name: Rule One :: CCC_4
[15,4]: Duplicate rule name: Rule One :: BBB_3
[23,4]: Duplicate rule name: Rule One :: AAA_2
[7,4]: Duplicate rule name: Rule Two :: EEE_3
[16,4]: Duplicate rule name: Rule Two :: DDD_2
}}",Major,Mario Fusco,,2017-09-27T09:36:26.000-0400,Inclusion of kbases containing rule templates results in duplicate rule names and kbase build failure.,Resolved,bug,Bug
2017-09-25T11:06:06.000-0400,DROOLS-1742,Done,"Having the following drl files :

{code:drl}
package org.hightea.a
import org.drools.compiler.Message
import org.drools.compiler.FirstClass

rule ""RG_1""
when
	$event : Message()
	FirstClass(item1 == $event.message1)
then
	System.out.println(""RG_1"");
end
{code}

and

{code:drl}
package org.hightea.b

import org.drools.compiler.Message
import org.drools.compiler.SecondClass

rule ""RG_2""
when
	$event: Message()
	SecondClass(item1 == $event.message1)
then
   System.out.println(""RG_2"");
end
{code}

We create a module containing the two packages in two drl files and insert a `SecondClass` fact in the WM.
Then we want to incrementally update to a new module containing only the second DRL.
At first fireAllrules after update, we encounter a NPE in RuleNetwork evaluator (a Segment memory is not defined in the path memory)

{code:java}
java.lang.NullPointerException
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:114)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:212)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:87)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1067)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1014)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1006)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1295)
	at org.hightea.IncrementalRemoveRuleTest.testNpeInRuleNetworkEvaluator(IncrementalRemoveRuleTest.java:66)
{code}

Note that we don't encounter this issue when the packages names are the same, or if we exchange the order of drl file name in the first module.

A reproducer is attached with its source code at [https://github.com/hightea/drools-reproducer/tree/path-memory-issue|https://github.com/hightea/drools-reproducer/tree/path-memory-issue]
",Major,Mario Fusco,,2017-09-25T05:01:39.000-0400,NPE in RuleNetworkEvaluator after incremental compilation,Resolved,bug,Bug
2017-09-20T11:52:00.000-0400,DROOLS-1739,Done,"When creating the memory of a segment having as root a beta node which is also the tip of a subnetwork, the engine should also create the segment memory of the subnetwork itself. This is not happening if the segment is created from a prototype.",Major,Mario Fusco,,2017-09-20T10:02:10.000-0400,Missing creation of the segment memory of a subnetwork when the main segment memory is created from a prototype,Resolved,bug,Bug
2017-09-20T06:57:40.000-0400,DROOLS-1737,Rejected,"We are trying to migrate project on newest version of drools, but had regression testing failure. We have extracted simplest scenario to reproduce it. 

{code}
package demo

import demo.DataRow;
import demo.ExpectedError;
import demo.Dark;


rule ""rule-1""
	salience 130
	no-loop true
when
	$a: DataRow(viewId == Dark.Xantor.$ID, $d: row[Dark.Xantor.wand] != null)
	$b: DataRow(viewId == Dark.Aragorn.$ID, row[Dark.Aragorn.sword] == $d)
	$c: DataRow(viewId == Dark.Tant.$ID, row[Dark.Tant.crown] == $d)
then
	$a.setField(Dark.Xantor.sword, $c.getField(Dark.Tant.sword));
	$a.setField(Dark.Xantor.chainmail, $c.getField(Dark.Tant.tower));
	update($a);
end

rule ""rule-2""
	salience 110
	no-loop true
when
	$a: DataRow(viewId == Dark.Xantor.$ID,
						$b: row[Dark.Xantor.wand] != null,
						row[Dark.Xantor.sword] == ""claymore"",
						row[Dark.Xantor.bow] == null)
then
    throw new ExpectedError();
end
{code}

initial facts:
{code}
Dark.Tant( crown: 123, sword: claymore )
Dark.Aragorn( sword: 123 )
Dark.Xantor( wand: 123 )
{code}
Expected to catch ExpectedError (rule-2 to be fired), but nothing happens.

Detailed exploit attached as Maven project with two executable modules. Main650 class demonstrates positive scenario (it run rules with 6.5.0.Final), Main720 (runs the same rules with 7.2.0.Final) - negative. ""Main"" class contains basic scenario without link to drools version",Major,Mario Fusco,,2017-09-19T12:52:04.000-0400,Rule is ignored after migration from 6.5.0.Final to 7.2.0.Final,Resolved,bug,Bug
2017-09-20T06:33:20.000-0400,DROOLS-1729,Cannot Reproduce,"I have a master drl that has global *variables declaration* as well as *class role declarations*. Other drl files depend on those declarations. 
Build is successful and I'm able to use the engine as intended. The thing is when I use kiescanner to unload a rule and load it back, I get compilation errors that make it look like the master drl is not being accounted for.

*Errors:*
1) ""A Sliding Window can only be assigned to types declared with @role( event )
[Actually my object type is declared with role event on the master drl]

2) ""isTest cannot be resolved""
[isTest being my global variable]

*Rule:*
package rules;
import model.Car;

global Boolean isTest;

rule ""Red Car""
    when
        Car (color==""Red"") over window:time(2h);
    then
        System.out.println(""*** Red car"");
        System.out.println(""*** "" + isTest);
end

*Master Drl*
package rules;
import model.Car;

global Boolean isTest;

declare Car
    @role( event )
end



",Blocker,Mario Fusco,,2017-09-14T12:16:36.000-0400,Unable to load rule with global variables via kiescanner.,Resolved,bug,Bug
2017-09-19T03:28:27.000-0400,DROOLS-1733,Done,"Majority of classes in module kie-dmn-feel in package org.kie.dmn.feel.runtime.functions can be tested by unit tests. Having such tests we can cover nearly 100% of these classes. 

While coding these tests I found and fixed these bugs and problems: 
* Rounding problem in EvalHelper.getBigDecimalOrNull() method - The method used .doubleValue() call which produced rounding errors.
* AnyFunction and AllFunction didn't check if the items in the list parameter are all Booleans (they must be according to the spec.)
* ConcatenateFunction didn't check for nulls in the list parameter
* EqualsFunction didn't compare BigDecimals with compareTo() method (which checks just values and ignores scale)
* MinFunction and MaxFunction didn't check if the items in the list parameter are comparable
* NumberFunction - split of one error message into two
* ReplaceFunction - NPE when having replacement param as null
* StringFunction and CodeFunction contained duplicated code
* SublistFunction - it was possible to input negative length as parameter
* ReplaceFunction now handles regexp flags

I will create a PR with new tests and fixes for mentioned things.",Major,Tibor Zimanyi,,2017-09-15T09:48:56.000-0400,Enhance test coverage of FEEL built-in functions,Resolved,bug,Bug
2017-09-15T09:18:58.000-0400,DROOLS-1728,Rejected,"I want to try KieScanner for the remote maven repo. So I setup the workbench and create ""Project1"" as a sample, I also build and deploy it successfully. I can see the jar named ""Project1-1.0.0.jar"" with GAV ""com.myteam:Project1:1.0.0""  exist in “Admin” -> ""Artifacts"".

So I add the repository into my development pom.xml and the jar as dependency, but the jar can't been downloaded by Maven Project.

I also try to open the url: http://192.168.56.101:8080/kie-drools-wb/maven2, but there is always HTTP Status 404 – Not Found  happened with description "" The origin server did not find a current representation for the target resource or is not willing to disclose that one exists."" 
The most funny thing is I can open the url: http://192.168.56.101:8080/kie-drools-wb/maven2/com/myteam/Project1/maven-metadata.xml, the content is shown in my webpage as following:
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<metadata>
<groupId>com.myteam</groupId>
<artifactId>Project1</artifactId>
<versioning>
<release>1.0.0</release>
<versions>
<version>1.0.0</version>
</versions>
<lastUpdated>20170913142741</lastUpdated>
</versioning>
</metadata>

As remote maven repo of workbench, why not like my private nexus maven that I can open the link even if it 's a folder?
 
my pom.xml as following:
<?xml version=""1.0"" encoding=""UTF-8""?>
<project xmlns=""http://maven.apache.org/POM/4.0.0""
         xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
         xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"">
    <modelVersion>4.0.0</modelVersion>

    <groupId>drools</groupId>
    <artifactId>drools</artifactId>
    <version>1.0-SNAPSHOT</version>

    <properties>
        <drools.version>7.3.0.Final</drools.version>
    </properties>

    <repositories>
        <repository>
            <id>guvnor-m2-repo</id>
            <name>Guvnor M2 Repo</name>
            <url>http://192.168.56.101:8080/kie-drools-wb/maven2/</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>com.myteam</groupId>
            <artifactId>Project1</artifactId>
            <version>1.0.0</version>
        </dependency>
        <!--drools dependencies -->
    </dependencies>
</project>



",Blocker,Mario Fusco,,2017-09-14T05:12:28.000-0400,There is always HTTP 404 Error Where I request the maven2 in workbench,Resolved,bug,Bug
2017-09-18T20:11:56.000-0400,DROOLS-1734,Done,"Spec says:
 if FEEL(e 1 ) is true then FEEL(e 2 ) else FEEL(e 3 )

so if I follow the spec, NOT the code, it could happen that FEEL(e1) is:
true        follows the spec, returns FEEL(e2)
false       follows the spec, returns FEEL(e3)
otherwise   if I follow the spec, it should return FEEL(e3), if I follow the code, it's returning null (and an error).

The spec takes the position that 'if x then 1 else 2' should always
result in either 1 or 2, regardless of x (or the type of x). This
makes it easier for users to handle missing data, e.g. if x > 0 then x
else 0.",Major,Edson Tirelli,,2017-09-15T17:33:23.000-0400,FEEL if in case of otherwise,Resolved,bug,Bug
2017-09-14T04:47:42.000-0400,DROOLS-1727,Done,None,Major,Mario Fusco,,2017-09-14T04:16:48.000-0400,ClassCastException when a ReactiveFromNode has a different type of node as peer,Resolved,bug,Bug
2017-09-07T13:20:41.000-0400,DROOLS-1724,Done,"I got a DRL compilation error on accessing through a generic type property. Minimized object definition is below.

{code:borderStyle=solid}
public interface OrderLine<T extends Product> {
    T getProduct();
}

public interface Product {
    String getId();
    String getCategory();
}

// and I have concrete classes, ex. Book, BookOrderLine<Book>, DVD, DVDOrderLine<DVD>, ... etc
{code}

DRL(snippet) is here
{code:borderStyle=solid}
when
    $orderLine: OrderLine()

    // compilation failed
    Product(
        id == $orderLine.product.id || category == $orderLine.product.category
    ) from discountProducts
{code}

This causes below exception.
{panel}
java.lang.RuntimeException: [Message [id=1, kieBase=defaultKieBase, level=ERROR, path=rules/checkorder-not-compiled.drl, line=15, column=0   text=Unable to Analyse Expression id == $orderLine.product.id || category == $orderLine.product.category:
[Error: unable to resolve method using strict-mode: java.lang.Object.category()]
[Near : {... Line.product.id || category == $orderLine.product.category ....}]
                                                               ^
[Line: 15, Column: 2]]]
{panel}

This is weird because it won't occur when the restriction has single condition like below. Drools could analyze this expression.

{code:borderStyle=solid}
when
    $orderLine: OrderLine()

    // this is compiled, even if `Product(id == $orderLine.product.id)`
    Product(
        category == $orderLine.product.category
    ) from discountProducts
{code}
",Major,Mario Fusco,,2017-09-07T01:55:32.000-0400,DRL compilation error on a generic type property,Closed,bug,Bug
2017-09-05T04:17:33.000-0400,DROOLS-1720,Done,None,Major,Mario Fusco,,2017-09-04T12:42:08.000-0400,Cannot both perform an explicit updateToVersion on a KieContainer and use a KieScanner on it,Resolved,bug,Bug
2017-08-25T12:41:40.000-0400,DROOLS-1714,Done,"when using java dialect in a accumulate, if there is a binding in the accumulate to a type that is not imported, you get a class cast error instead of the normal unable to resolve 

""object.java.lang.ClassCastException: org.drools.compiler.rule.builder.dialect.mvel.MVELAnalysisResult cannot be cast to org.drools.compiler.rule.builder.dialect.java.JavaAnalysisResult""

Please see the following reproducer with three test cases that expect failure.
2 of the tests have the expected failure, one does not.

https://github.com/jgoldsmith613/drools-accumulate-bug


",Major,Mario Fusco,,2017-08-24T14:48:49.000-0400,Accumulate compile issue with java dialect,Resolved,bug,Bug
2017-08-23T11:48:47.000-0400,DROOLS-1710,Done,"The jitting process assumes that the mvel constraint has been evaluated at least once before it kicks in. This may not be the case during a multithreaded execution (especially when running with many threads and a very low jitting threshold) because the jitting process may start when other threads have already requested the constraint evaluation using the mvel interpreted constraint (thus incrementing the jitting counter) but none of them had enough time to complete it. When this happens the jitting process trying to work on an uncompleted AST throwing internally an exception like the following:

{code}
Exception in thread ""drools-worker-1"" java.lang.RuntimeException: java.lang.RuntimeException: Null accessor on node: firings
	at org.drools.core.rule.constraint.MvelConstraint.executeJitting(MvelConstraint.java:346)
	at org.drools.core.rule.constraint.MvelConstraint.access$200(MvelConstraint.java:82)
	at org.drools.core.rule.constraint.MvelConstraint$ConditionJitter.run(MvelConstraint.java:313)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.RuntimeException: Null accessor on node: firings
	at org.drools.core.rule.constraint.ConditionAnalyzer.analyzeNode(ConditionAnalyzer.java:302)
	at org.drools.core.rule.constraint.ConditionAnalyzer.analyzeSingleCondition(ConditionAnalyzer.java:159)
	at org.drools.core.rule.constraint.ConditionAnalyzer.analyzeCondition(ConditionAnalyzer.java:138)
	at org.drools.core.rule.constraint.ConditionAnalyzer.analyzeCondition(ConditionAnalyzer.java:109)
	at org.drools.core.rule.constraint.MvelConditionEvaluator.getAnalyzedCondition(MvelConditionEvaluator.java:129)
	at org.drools.core.rule.constraint.MvelConstraint.executeJitting(MvelConstraint.java:333)
	... 5 more
{code}",Major,Mario Fusco,,2017-08-23T10:20:41.000-0400,Jitting process may randomly fail during multithreaded execution,Resolved,bug,Bug
2017-08-21T08:04:15.000-0400,DROOLS-1707,Done,"There is a KJAR with some declared fact types in kbase ""kiedeclare"" which are used by a second kbase ""kiemodulemodel"" which contains rules.

After updating a rule in ""kiemodulemodel"", loading the new kjar and updating it in the kcontainer (by using updateToVersion())... it is not possible to set the fields declared on kiedeclare kbsae. The fields are returning ""null"" and it seems like they can not be found under Message class.
",Critical,Mario Fusco,,2017-08-21T06:17:12.000-0400,Unable to set fields for declared fact types from included kiebase after updating kcontainer in BRMS 6.4,Resolved,bug,Bug
2017-08-21T10:49:29.000-0400,DROOLS-1704,Done,"User has Kie server with deployed container with java class.
If user updates the container to new version with kjar without java class then it is updated correctly. However if user then tries to update the container again, this time to version which contains same java class then NullPointerException is thrown. See attachment.",Major,Mario Fusco,,2017-08-18T04:04:31.000-0400,NPE when updating container with java class,Resolved,bug,Bug
2017-08-21T12:47:06.000-0400,DROOLS-1703,Done,"We have a class with 3 constructors:
Thingy(String name)
Thingy(String name, Object... args)
Thingy(String name, String version, Object... args)

When calling the constructor with a single paramater from a DRL:
    Thingy(drools.getRule().getName())

we sometimes get an odd exception in our unit tests:
{{[INFO] java.lang.StringIndexOutOfBoundsException: String index out of range: -1
[INFO] 	at java.lang.String.substring(String.java:1927)
[INFO] 	at org.mvel2.util.ErrorUtil.rewriteIfNeeded(ErrorUtil.java:17)
[INFO] 	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getMethod(ReflectiveAccessorOptimizer.java:975)
[INFO] 	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain(ReflectiveAccessorOptimizer.java:396)
[INFO] 	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor(ReflectiveAccessorOptimizer.java:163)}}

The root cause of the issue appears to be the selection of varargs constructors by ParseTools.getBestConstructorCandidate and getMethodScore.  The scoring checks that the arguments from left to right match the expected parameter classes and scores based on their coerce-ability.  The scoring then compares the number of parameters to arguments *only* if the accumulated score is still 0 (and at this point it's not zero because the first parameter matched the expected type).

All 3 constructors in this list score and match the same and if the incompatible constructor is examined first then it's used.  This in turn causes VarArgs.normalizeArgsForVarArgs to attempt to create an array of size -1 as it calculates the needed size of the varargs array.  The reported exception seems to be generated as the exception handler itself crashes, being unable to deal with the root cause error.

https://github.com/GJKrupa/DROOLS-1703",Major,Mario Fusco,,2017-08-15T13:05:12.000-0400,"When incompatible varargs constructors exist, resolution sometimes incorrect",Resolved,bug,Bug
2017-08-14T03:44:35.000-0400,DROOLS-1702,Rejected,"Hi,
     I am unable to create same repository name in another Organizational unit.

Example:  
OrganizationaUnit: HDFCBank
Repository: Insurance
Project:PolicyRule


OrganizationaUnit: ICICIBank
Repository: Insurance
Project:PolicyRule


I am unable to create Insurance Repository for ICICIBank.",Major,Michael Anstis,,2017-08-14T03:20:26.000-0400, I am unable to create same repository name in another Organizational unit.,Resolved,bug,Bug
2017-08-09T08:49:04.000-0400,DROOLS-1699,Done,None,Major,Mario Fusco,,2017-08-09T05:50:09.000-0400,Property reactive AllSetBitMask is not preserved when subtracting an empty mask,Resolved,bug,Bug
2017-08-09T09:04:29.000-0400,DROOLS-1610,Cannot Reproduce,"Getting the following exception while trying to implement Drools in Android. 


06-08 12:25:41.660 19177-19177/com.example.admin23.droolstest W/System.err: java.lang.RuntimeException: Unable to instantiate object for class 'org.drools.android.DexPackageClassLoader' with constructor public org.drools.android.DexPackageClassLoader(org.drools.core.rule.JavaDialectRuntimeData,java.lang.ClassLoader)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.core.util.ClassUtils.instantiateObject(ClassUtils.java:272)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.core.rule.JavaDialectRuntimeData.makeClassLoader(JavaDialectRuntimeData.java:618)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.core.rule.JavaDialectRuntimeData.onAdd(JavaDialectRuntimeData.java:243)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.rule.builder.dialect.java.JavaDialect.<init>(JavaDialect.java:187)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.rule.builder.dialect.java.JavaDialectConfiguration.newDialect(JavaDialectConfiguration.java:91)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.KnowledgeBuilderConfigurationImpl.buildDialectRegistry(KnowledgeBuilderConfigurationImpl.java:392)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.compiler.PackageRegistry.<init>(PackageRegistry.java:55)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.newPackage(KnowledgeBuilderImpl.java:1571)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.initPackageRegistry(KnowledgeBuilderImpl.java:1044)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.createPackageRegistry(KnowledgeBuilderImpl.java:1015)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.initPackageRegistries(CompositeKnowledgeBuilderImpl.java:297)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:116)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:244)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:64)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:230)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:198)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at com.example.admin23.droolstest.MainActivity.onCreate(MainActivity.java:143)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.Activity.performCreate(Activity.java:6876)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1135)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3206)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3349)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.ActivityThread.access$1100(ActivityThread.java:221)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:102)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.os.Looper.loop(Looper.java:158)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:7224)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at java.lang.reflect.Method.invoke(Native Method)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1230)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1120)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err: Caused by: java.lang.reflect.InvocationTargetException
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at java.lang.reflect.Constructor.newInstance(Native Method)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.core.util.ClassUtils.instantiateObject(ClassUtils.java:270)
06-08 12:25:41.670 19177-19177/com.example.admin23.droolstest W/System.err: 	... 29 more
06-08 12:25:41.680 19177-19177/com.example.admin23.droolstest W/System.err: Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String java.io.File.getAbsolutePath()' on a null object reference
06-08 12:25:41.680 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.android.MultiDexClassLoader.<init>(MultiDexClassLoader.java:70)
06-08 12:25:41.680 19177-19177/com.example.admin23.droolstest W/System.err:     at org.drools.android.DexPackageClassLoader.<init>(DexPackageClassLoader.java:44)
06-08 12:25:41.680 19177-19177/com.example.admin23.droolstest W/System.err: 	... 31 more


Whenever I'm trying to call  kieBuilder.buildAll(); method it's giving me the exception rather giving the result array. Please help to resolve this. Any help would be appreciable.

Thanks in advance.",Major,Mario Fusco,,2017-06-08T02:20:09.000-0400,Runtime Exception ,Resolved,bug,Bug
2017-08-08T10:45:44.000-0400,DROOLS-1696,Done,"When inserting events that have timestamp in the past and don't have expiration defined (@expires), the events don't always produce activations. See a test example [1]. This test fails ""randomly"". 

I will create a PR with a reproducer. 

[1] https://gist.github.com/baldimir/fb9808ce1e6d49c83dc24570b3cb6093",Major,Mario Fusco,,2017-08-07T04:49:16.000-0400,"Events that are already expired at insert time, doesn't always produce activations",Resolved,bug,Bug
2017-08-02T05:09:44.000-0400,DROOLS-1687,Done,"Based on https://stackoverflow.com/questions/45161751/get-broken-constrains-in-optapanner-with-non-reversible-accumulator/.

{code}
Exception executing consequence for rule ""requiredCpuPowerTotal"" in testpkg: java.lang.NullPointerException
	at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
	...
Caused by: java.lang.NullPointerException
	at org.drools.core.base.accumulators.JavaAccumulatorFunctionExecutor$JavaAccumulatorFunctionContext.getAccumulatedObjects(JavaAccumulatorFunctionExecutor.java:208)
	at org.drools.core.reteoo.FromNodeLeftTuple.getAccumulatedObjects(FromNodeLeftTuple.java:94)
	at org.drools.core.common.AgendaItem.getObjectsDeep(AgendaItem.java:79)
	at org.drools.core.reteoo.RuleTerminalNodeLeftTuple.getObjectsDeep(RuleTerminalNodeLeftTuple.java:359)
{code}",Major,Mario Fusco,,2017-08-01T14:17:24.000-0400,NPE in JavaAccumulatorFunctionContext.getAccumulatedObjects(),Resolved,bug,Bug
2017-08-01T11:29:30.000-0400,DROOLS-1686,Done,"Using the LoadBalanceAccumulateFunction found in tennis example for modelling fairness constraints leads to NPE in drools itself, in FromNodeLeftTuple.java:

{code}
Caused by: java.lang.NullPointerException
    at org.drools.core.reteoo.FromNodeLeftTuple.getAccumulatedObjects(FromNodeLeftTuple.java:98)
{code}

Full stacktrace:

{code:java}
Exception executing consequence for rule ""fairAssignmentCountPerTeam"" in org.optaplanner.examples.tennis.solver: java.lang.NullPointerException
    at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
    at org.drools.core.common.DefaultAgenda.handleException(DefaultAgenda.java:1252)
    at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:438)
    at org.drools.core.phreak.RuleExecutor.fireActivation(RuleExecutor.java:379)
    at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:135)
    at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:88)
    at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:34)
    at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
    at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1068)
    at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1015)
    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1007)
    at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1320)
    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1311)
    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1295)
    at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.calculateScore(DroolsScoreDirector.java:117)
    at org.optaplanner.test.impl.score.AbstractScoreVerifier.assertWeight(AbstractScoreVerifier.java:82)
    at org.optaplanner.test.impl.score.buildin.hardmediumsoft.HardMediumSoftScoreVerifier.assertSoftWeight(HardMediumSoftScoreVerifier.java:107)
    at org.optaplanner.test.impl.score.buildin.hardmediumsoft.HardMediumSoftScoreVerifier.assertSoftWeight(HardMediumSoftScoreVerifier.java:94)
    at org.optaplanner.examples.tennis.TennisConstraintsTest.fairAssignmentCountPerTeam(TennisConstraintsTest.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:51)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)
Caused by: java.lang.NullPointerException
    at org.drools.core.reteoo.FromNodeLeftTuple.getAccumulatedObjects(FromNodeLeftTuple.java:98)
    at org.drools.core.common.AgendaItem.getObjectsDeep(AgendaItem.java:78)
    at org.drools.core.reteoo.RuleTerminalNodeLeftTuple.getObjectsDeep(RuleTerminalNodeLeftTuple.java:359)
    at org.optaplanner.core.api.score.holder.AbstractScoreHolder.extractJustificationList(AbstractScoreHolder.java:118)
    at org.optaplanner.core.api.score.holder.AbstractScoreHolder.registerConstraintMatch(AbstractScoreHolder.java:88)
    at org.optaplanner.core.api.score.buildin.hardmediumsoft.HardMediumSoftScoreHolder.addMediumConstraintMatch(HardMediumSoftScoreHolder.java:69)
    at org.optaplanner.examples.tennis.solver.Rule_fairAssignmentCountPerTeam1005511081.defaultConsequence(Rule_fairAssignmentCountPerTeam1005511081.java:21)
    at org.optaplanner.examples.tennis.solver.Rule_fairAssignmentCountPerTeam1005511081DefaultConsequenceInvokerGenerated.evaluate(Unknown
Source)
    at org.optaplanner.examples.tennis.solver.Rule_fairAssignmentCountPerTeam1005511081DefaultConsequenceInvoker.evaluate(Unknown
Source)
at org.drools.core.phreak.RuleExecutor.innerFireActivation(RuleExecutor.java:431)
... 38 more 
{code}

See also related discussion in: https://groups.google.com/forum/#!topic/optaplanner-dev/xA6IdGieDpU
",Major,Mario Fusco,,2017-07-19T06:01:42.000-0400,NPE using drools accumulate function in fairness constraint (tennis example),Resolved,bug,Bug
2017-08-02T07:58:58.000-0400,DROOLS-1688,Done,"Having a test like this [1], only one rule fires. When the rule R1 is commented out, 2 rules fire. I will create a PR with this reproducer. 

[1] https://gist.github.com/baldimir/8a1d50fa29401cec127c694ade6c225b",Major,Mario Fusco,,2017-08-02T03:42:11.000-0400,A rule does not fire when String type coercion used in its pattern,Resolved,bug,Bug
2017-07-31T10:58:49.000-0400,DROOLS-1684,Done,Java Types introduced after an incremental compilation are not property reactive by default as expected and in more in general they declaration is not correctly processed.,Major,Mario Fusco,,2017-07-31T06:59:38.000-0400,Java Types introduced after an incremental compilation aren't correctly processed,Resolved,bug,Bug
2017-07-28T12:47:03.000-0400,DROOLS-1683,Done,"ExcelParser.open(File) uses the single argument WorkbookFactory.create() call, which opens the file in read-write mode, so when parseWorkbook() calls close on it, it will save the workbook to disk.

Usually the resulting file is the same, however it may be binary-different but equivalent(causing git conflicts). Being read-only does not cause an error since the exceptions are swallowed silently.

It should use the three argument form of WorkbookFactory.create() and pass the read-only flag",Major,Mario Fusco,,2017-07-27T21:38:52.000-0400,ExcelParse can re-write files,Resolved,bug,Bug
2017-07-28T10:45:08.000-0400,DROOLS-1682,Done,"Required:
* when a DMN xml file uses a prefix for the DMN namespace, such prefix is to be maintained while marshalling back to xml

Nice to have:
* additional attributes in the non-DMN namespace shall be preserved
* even if no extension elements converters are registered, it would be nice for the DMN-extension element itself to be preserved while marshalling back; especially for the case when it's an empty DMN-extension element element",Major,Matteo Mortari,,2017-07-26T04:37:15.000-0400,DMN Marshaller prefix preservation and minor improvements,Resolved,bug,Bug
2017-07-25T03:13:09.000-0400,DROOLS-1674,Done,Test MemoryLeakTest.testLeakAfterSessionDispose() fails very randomly on StackOverflowError. ,Minor,Tibor Zimanyi,,2017-07-24T11:36:56.000-0400,MemoryLeakTest.testLeakAfterSessionDispose() fails randomly,Resolved,bug,Bug
2017-07-24T02:51:04.000-0400,DROOLS-1655,Done,"Even after closing session, the objects into it are not getting released. This is critical problem when ruls are run on long running server with intermittent use. With huge
number of inserted objects it leaks a considerable memory.

Steps to reproduce:
1) Create a stateful session.
2) Insert huge number of objects into the session.
3) Fire rules.
4) Close session with dispose() call provided.
5) Run GC process.
5) If memory is measured and heap dump is taken it shows that the objects being inserted are still not garbage collected.

Observations:
When walked through heap dump it GC root path looks like
this     - value: myPackage.MyObject #1
 <- object     - class: org.drools.core.common.DefaultFactHandle, value: myPackage.MyObject #1
  <- value     - class: org.drools.core.util.ObjectHashMap$ObjectEntry, value: org.drools.core.common.DefaultFactHandle #29323
   <- [49547]     - class: org.drools.core.util.Entry[], value: org.drools.core.util.ObjectHashMap$ObjectEntry #103210
    <- table     - class: org.drools.core.util.ObjectHashMap, value: org.drools.core.util.Entry[] #8
     <- equalityMap     - class: org.drools.core.common.ClassAwareObjectStore, value: org.drools.core.util.ObjectHashMap #7
      <- objectStore     - class: org.drools.core.common.NamedEntryPoint, value: org.drools.core.common.ClassAwareObjectStore #1
       <- defaultEntryPoint     - class: org.drools.core.impl.StatefulKnowledgeSessionImpl, value: org.drools.core.common.NamedEntryPoint #1
        <- value     - class: java.util.concurrent.ConcurrentHashMap$HashEntry, value: org.drools.core.impl.StatefulKnowledgeSessionImpl #1
         <- [1]     - class: java.util.concurrent.ConcurrentHashMap$HashEntry[], value: java.util.concurrent.ConcurrentHashMap$HashEntry #20801
          <- table     - class: java.util.concurrent.ConcurrentHashMap$Segment, value: java.util.concurrent.ConcurrentHashMap$HashEntry[] #465
           <- [14]     - class: java.util.concurrent.ConcurrentHashMap$Segment[], value: java.util.concurrent.ConcurrentHashMap$Segment #469
            <- segments     - class: java.util.concurrent.ConcurrentHashMap, value: java.util.concurrent.ConcurrentHashMap$Segment[] #78
             <- kSessions     - class: org.drools.compiler.kie.builder.impl.KieContainerImpl, value: java.util.concurrent.ConcurrentHashMap #78
              <- compiledRB     - class: myPackage.RBInfo, value: org.drools.compiler.kie.builder.impl.KieContainerImpl #1


On further investigations it was found that when new session is create, KieContainerImpl class keeps its reference into 'kSessions' Map. But when session is closed this reference is not released(though such reference is released from KnowledgeBaseImpl). ",Critical,Mario Fusco,,2017-07-10T09:47:36.000-0400,Memory leak for session object reference even after disposing it,Resolved,bug,Bug
2017-07-24T08:16:16.000-0400,DROOLS-1666,Done,"The spec says that decision tables with no matching rules should always return null, but that does not make much sense for DTs with hit policies C, C+ and C#.

The return results for these cases should be:

C = [ ] (empty list)
C# = 0

Also, open a ticket to the DMN RTF to fix it in the spec.  ",Major,Edson Tirelli,,2017-07-18T09:01:59.000-0400,Change the return result on DTs with policy C and C#,Resolved,bug,Bug
2017-07-24T03:02:57.000-0400,DROOLS-1671,Done,"When handling Periods in InfixOpNode [1], there is getMonths() method used, which returns just months part of the Period. There should be call to toTotalMonths() so also years are incorporated in the result. I will provide PR for this. 

[1] https://github.com/kiegroup/drools/blob/a631144cf7c5854775253ef619dd720405123800/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/lang/ast/InfixOpNode.java#L257",Major,Tibor Zimanyi,,2017-07-21T08:51:53.000-0400,Wrong months handling in Period FEEL expressions,Resolved,bug,Bug
2017-07-14T05:12:32.000-0400,DROOLS-1664,Done,None,Major,Mario Fusco,,2017-07-14T04:50:58.000-0400,Property reactivity mask is calculated on the wrong pattern when an accumulate contains a subnetwork,Resolved,bug,Bug
2017-07-14T03:59:47.000-0400,DROOLS-1660,Done,"I attached a reproducer of the problem. If I am executing the rules without serialization everything is working correctly.

 If I am executing it with serialization the rules are firing to often. I expect the rule to fire only once. It should fire once at 03:06:00 but it fires 3 times, once at 3:04:00 and 2 times at 3:06:00.

It have to be a problem with serialization of the temporal operators like after,before, etc. ",Major,Mario Fusco,,2017-07-13T03:38:20.000-0400,Temporal operator fails after serialization,Resolved,bug,Bug
2017-07-11T06:46:39.000-0400,DROOLS-1629,Done,"We are defining our custom JPAPlaceHolderResolverStrategy, parametrizing the constructuctor with the persistence unit name it handles.

When we need two of them to handle different kind of Entities probably from different DataSources, the marshalling process works properly as calling to accept method before marshalling returns true for the correct ObjectMarshallingStrategy.

The problem occurs while unmarshalling the entities. As the class name is being used to find the correct ObjectMarshallingStrategy from the store, the class name matches two Object Marshalling Strategies, so the first one found is returned, making the environment work in a random space.

This problem could be solved adding to ObjectMarshallingStrategy interface a getName() method in order to be able to avoid the usage of the getClass().getName() approach is being used now.
Then PersisteHelper must use this method to store the ProtobufferHeader and then ObjectMarshallingStrategyStore must use the method to retrieve the appropiate implementation.

In order to enable backward compatibility a NamedObjectMarshallingStrategyInterface could be added to be invoked only for updated implementors.

",Major,Mario Fusco,,2017-06-22T08:33:25.000-0400,PersisteHelper and ObjectMarshallingStrategyStore are mixing ObjectMarshallingStrategies,Resolved,bug,Bug
2017-07-11T06:26:17.000-0400,DROOLS-1628,Out of Date,"When running our DMNRuntimeTest.testJavaFunctionContext() and DMNRuntimeTest.testJavaFunctionContext_withErrors() tests on IBM JDK, the tests fail with following outputs [1][2]. 

[1] https://gist.github.com/baldimir/66c30176716cb260e49e8b99a281759c
[2] https://gist.github.com/baldimir/03104bef2bd608a32afe85d82c436a08",Major,Matteo Mortari,,2017-06-22T03:53:19.000-0400,Cannot invoke Java function from DMN on IBM JDK,Resolved,bug,Bug
2017-07-11T09:17:51.000-0400,DROOLS-1653,Rejected,"There is a suspicious unused method attribute ""alphaNodeHashingThreshold"" in CompositeObjectSinkAdapter. See this [1]. It can be a potential bug, because as you can see in the previous method in the class, the method is called with ""0"" as a parameter value for this.

[1] https://github.com/kiegroup/drools/blob/38b68002a9cff5aeada9420cf87362a7b1213900/drools-core/src/main/java/org/drools/core/reteoo/CompositeObjectSinkAdapter.java#L104",Minor,Mario Fusco,,2017-07-07T09:50:31.000-0400,"Unused method parameter ""alphaNodeHashingThreshold"" in CompositeObjectSinkAdapter",Resolved,bug,Bug
2017-07-11T05:47:44.000-0400,DROOLS-1622,Done,"When running test [1] on IBM JDK, the test fails with this output [2].

[1] https://github.com/kiegroup/drools/blob/32822e243a237cf26f26830a895035b97ba5a643/kie-dmn/kie-dmn-core/src/test/java/org/kie/dmn/core/DMNRuntimeTest.java#L845
[2] https://gist.github.com/baldimir/969bd8f72665ff0e4244350abaed1ef4",Critical,Matteo Mortari,,2017-06-20T10:42:31.000-0400,NPE when compiling DMN file from test DMNRuntimeTest.testNoPrefix on IBM JDK,Resolved,bug,Bug
2017-07-11T07:07:03.000-0400,DROOLS-1656,Done,None,Major,Mario Fusco,,2017-07-11T06:23:03.000-0400,Missing fire when deleting from a shared subnetwork with mulitple sinks,Resolved,bug,Bug
2017-07-11T05:48:17.000-0400,DROOLS-1620,Done,"When running test UnmarshalMarshalTest.testDish() on IBM JDK, the test fails with following output [1]. Unmarshall call here [2] produces UnaryTests with empty _text_ attributes, so whole CDATA content is ignored during unmarshalling. 

[1] https://gist.github.com/baldimir/e65a8755aeebef17508788213676fcb2
[2] https://github.com/kiegroup/drools/blob/158ae2f284f080f75016fedc2f84265688434d33/kie-dmn/kie-dmn-backend/src/test/java/org/kie/dmn/backend/marshalling/v1_1/UnmarshalMarshalTest.java#L118",Major,Matteo Mortari,,2017-06-20T04:44:25.000-0400,Unmarshalling <text> DMN elements containing CDATA fails on IBM JDK,Resolved,bug,Bug
2017-07-04T12:33:25.000-0400,DROOLS-1648,Rejected,"I tried to use KieScanner for automatic business rule deployment through kjar modules setup in private maven repository.  For that, I tried to specify getting latest kjar modules using ""LATEST"" and ""RELEASE"" version labels.  They failed for three drools versions I tried (6.5.0.Final, 7.0.0.Final and 7.1.0.Beta3).  However, when I tried open-ended version label, solution works.  So, I believe that there is issue in dependency resolution related to KieContainer through KieServices.newKieContainer(ReleaseId releaseId) method. ",Minor,Mario Fusco,,2017-07-03T20:05:18.000-0400,"Maven dependency resolution through ""LATEST"" and ""RELEASE"" version labels using ""KieServices.newKieContainer(ReleaseId releaseId)"" method fails",Resolved,bug,Bug
2017-07-05T08:05:22.000-0400,DROOLS-1645,Done,"In applications built with Spring Boot the resources under {{src/main/resources/}} are packed into jar in {{BOOT-INF/classes/}}. That's why when in {{kmodule.xml}} someone specifies

{code:xml}
<kbase name=""base"" default=""true"" packages=""com.company.*"">
...
</kbase>
{code}

then for example resource {{src/main/resources/com/company/rule.drl}} will not be picked up, because the path in jar(zip) is {{BOOT-INF/classes/com/company/rule.drl}}. 

From my investigation it seems the logic in org.drools.compiler.kie.builder.impl.KieBuilderImpl#isFileInKieBase does not recognize these files as it compares the packages for equality or if one starts with the other.",Major,Mario Fusco,,2017-07-03T07:47:51.000-0400,Wildcard in packages does not work in Spring Boot jar,Resolved,bug,Bug
2017-07-04T09:08:21.000-0400,DROOLS-1626,Done,"I have kie-server and workbench running on the same Wildfly.
The project deploys to kie-server correctly and runs ok.
Using the KIE workbench kie-server management.
When I upgrade I get an error ""a.c is undefined"". Most likely there is an NPE in the client code.",Major,Guilherme Gomes,,2017-06-21T03:55:42.000-0400,Kie-server management: Pressing upgrade throws an error,Resolved,bug,Bug
2017-07-04T04:58:33.000-0400,DROOLS-1647,Done,"DataSource aren't corrctly bound to executor during runUntilHalt causing the following test case to not complete as expected

{code}
    @Test(timeout = 10000L)
    public void testReactiveOnUnitCreatingDataSource() throws Exception {
        String drl1 =
                ""package org.drools.compiler.integrationtests\n"" +
                ""unit "" + getCanonicalSimpleName( AdultUnitCreatingDataSource.class ) + ""\n"" +
                ""import "" + Person.class.getCanonicalName() + ""\n"" +
                ""import "" + ReactiveAdultUnit.class.getCanonicalName() + ""\n"" +
                ""rule Adult when\n"" +
                ""    Person(age >= 18, $name : name) from persons\n"" +
                ""then\n"" +
                ""    System.out.println($name + \"" is adult\"");"" +
                ""    list.add($name);\n"" +
                ""end"";

        KieBase kbase = new KieHelper().addContent( drl1, ResourceType.DRL ).build();
        RuleUnitExecutor executor = RuleUnitExecutor.create().bind( kbase );

        DebugList<String> list = new DebugList<>();
        executor.bindVariable( ""list"", list );

        AdultUnitCreatingDataSource adultUnit = new AdultUnitCreatingDataSource(list);
        adultUnit.insertPerson( new Person( ""Mario"", 42 ) );

        Semaphore ready = new Semaphore( 0, true);
        list.onItemAdded = ( l -> ready.release() );

        new Thread( () -> executor.runUntilHalt( adultUnit ) ).start();

        ready.acquire();

        assertEquals( 1, list.size() );
        assertEquals( ""Mario"", list.get(0) );
        list.clear();

        list.onItemAdded = ( l -> ready.release() );

        adultUnit.insertPerson( new Person( ""Sofia"", 4 ) );
        adultUnit.insertPerson( new Person( ""Marilena"", 44 ) );

        ready.acquire();

        assertEquals( 1, list.size() );
        assertEquals( ""Marilena"", list.get(0) );

        executor.halt();
    }

    public static class AdultUnitCreatingDataSource implements RuleUnit {
        private final DataSource<Person> persons;
        private final List<String> list;

        public AdultUnitCreatingDataSource( List<String> list ) {
            this.persons = DataSource.create();
            this.list = list;
        }

        public DataSource<Person> getPersons() {
            return persons;
        }

        public List<String> getList() {
            return list;
        }

        public void insertPerson(Person person) {
            persons.insert( person );
        }
    }
{code}
",Major,Mario Fusco,,2017-07-03T13:42:02.000-0400,DataSource aren't corrctly bound to executor during runUntilHalt,Resolved,bug,Bug
2017-06-27T03:20:51.000-0400,DROOLS-1633,Done,Setting the jitting threshold to 0 and then forcing immediate constraint jitting can cause a race condition in the jitting process itself that may in turn lead to a wrong constraint evaluation.,Major,Mario Fusco,,2017-06-26T11:33:16.000-0400,Race condition when forcing immediate jitting,Resolved,bug,Bug
2017-06-27T11:59:54.000-0400,DROOLS-1634,Done,"Building kjar with guided decision table on Windows 2016 produces error listed in attachment. 

The exception is thrown by kie maven plugin.
This issue was spotted just in Windows 2016.
It can be reproduced by running [GuidedDecisionTableIntegrationTest|https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-tests/kie-server-integ-tests-drools/src/test/java/org/kie/server/integrationtests/drools/GuidedDecisionTableIntegrationTest.java] in Kie server integration test suite. Decision table used in this test can be found [here|https://github.com/kiegroup/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-tests/kie-server-integ-tests-drools/src/test/filtered-resources/kjars-sources/gdst-project/src/main/resources/META-INF/kbase1/person.gdst].",Major,Mario Fusco,,2017-06-27T11:09:52.000-0400,NoClassDefFoundError when building guided decision table,Resolved,bug,Bug
2017-06-27T11:58:59.000-0400,DROOLS-1627,Done,"Reportedly, the test DynamicRuleLoadTest.testKJarUpgradeWithJavaClass fails on Mac OSX with HFS+ filesystem with the default of case INsensitive.

It fails in similar way also on Windows 2012 Server with this output [1].

[1] https://gist.github.com/baldimir/45d31d1139a4c43cd22ef37930fa1989
",Minor,Matteo Mortari,,2017-06-21T16:16:22.000-0400,Test DynamicRuleLoadTest.testKJarUpgradeWithJavaClass fails on Mac and Windows,Resolved,bug,Bug
2017-06-23T06:42:03.000-0400,DROOLS-1624,Rejected,"Referencing a conversation on [Google Groups - Drools Usage|https://groups.google.com/forum/?fromgroups#!topic/drools-usage/G7rlz3oI1HQ] and as requested by Mario Fusco...

We currently have a ruleset that relies heavily on Map facts.  In Drools 6.5 we fire approximately 400 rules.  

In Drools 7.0 we get only about 50 rules unless we add the ""<property key=""drools.propertySpecific"" value=""ALLOWED""/>"" to the kmodule.xml, in which case we fire the full 400 rules or by using @Watch(*) or @Watch(!*) on the rules.  It ""seems"" like only the first evaluations of the rules are firing and then no others after that.

Our flow generally follows something like below, within a stateful session, using rules only.  We fire all rules per-request then close the session.
Watch for changes to the Map properties
If a certain property or properties exist a 'populate' rule fires (calls modify())
The populate rule enriches the map fact. (calls modify())
Based on #3, more rules fire when certain properties exist (calls modify())
We are work heavily with rules that depend on loaded available facts up-front and computed properties throughout evaluation.  

I have a couple of usage questions regarding Drools 7, the default enabling of Property Reactive and using Maps as the facts:
In general, how do maps work with property reactive and respond to modify/insert events?  Does Drools look at the Map as a whole, any change re-evaluates the tree, or each individual property within the map re-evaluates the change?

In Drools 7, by defaulting the property reactive setting, does that mean all rules need to be annotated or they should they work as is (dao or map-based facts) when using modify/insert?
For reference, we are relying on this doco https://docs.jboss.org/drools/release/7.0.0.Final/drools-docs/html_single/index.html#_fine_grained_property_change_listeners.

I am looking into details or an example how to properly use Maps in Drools 7 with Property Reactive features always enabled (as suggested per the doco)....

",Minor,Mario Fusco,,2017-06-20T18:53:00.000-0400,Map Handling with Property Reactive Always Enabled,Resolved,bug,Bug
2017-06-21T12:57:08.000-0400,DROOLS-1619,Done,"Drools raises a compile error on a multibyte-name variable as a positional query parameter.

{noformat}
query testquery(int $a, Person $t)
    $t := Person(age > $a)
end

rule ""hoge""
    when
        testquery(30, $あああ;)
    then
        System.out.println($あああ.getName());
end
{noformat}


{noformat}
java.lang.RuntimeException: Error while creating KieBase[Message [id=1, kieBase=defaultKieBase, level=ERROR, path=Sample.drl, line=11, column=0
   text=Unable to compile expression: $あああ], Message [id=2, kieBase=defaultKieBase, level=ERROR, path=Sample.drl, line=9, column=0
   text=Rule Compilation error $あああ cannot be resolved]]
    at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:527)
    at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:687)
    at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:629)
    at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:611)
    at com.sample.DroolsTest.main(DroolsTest.java:18)
{noformat}

It is considered as ""not variable"" in QueryElementBuilder.isVariable() since BRMS 6.4.

https://github.com/kiegroup/drools/blob/6.5.x/drools-compiler/src/main/java/org/drools/compiler/rule/builder/QueryElementBuilder.java#L421
https://github.com/kiegroup/drools/blob/6.5.x/drools-core/src/main/java/org/drools/core/util/StringUtils.java#L1152-L1155",Major,Matteo Mortari,,2017-06-20T03:22:27.000-0400,Compile error on a multibyte-name variable as a positional query parameter,Resolved,bug,Bug
2017-06-22T06:53:37.000-0400,DROOLS-1623,Done,"Introduced in [this commit|https://github.com/kiegroup/drools/commit/0bd98541b3177bdc7d0e1f5ff74fc47c5964686a],

A condition in the ""when"" section of a drt file, which begins with the word package, such as:
{code:mvel}
        $box: Box (
            packageName == $productPackageName,
        )
{code}
... will cause an error:
{code:java}
org.drools.template.parser.DecisionTableParseException: Missing header
	at org.drools.template.parser.DefaultTemplateContainer.parseTemplate(DefaultTemplateContainer.java:127)
        .......
{code}

Previously, the parsing logic would only look for unindented keywords. Now, DefaultTemplateContainer will trim the line, see that it starts with the word ""package,"" and error out.",Major,Mario Fusco,,2017-06-20T12:26:52.000-0400,"Inappropriate ""Missing Header"" DecisionTableParseException",Resolved,bug,Bug
2017-06-20T09:30:58.000-0400,DROOLS-1613,Done,"When I have a decision table with hit policy Priority and multiple outputs and I change one of the outputs in a rule to a wrong type, the evaluation ends with NullPointerException. 

E.g. having output entry like this: 
<outputEntry id=""_7f03803d-2636-40ab-8346-7fd7f38ab695-3"">
    <text>1</text>
</outputEntry>

I will provide PR with reproducer for this. ",Major,Edson Tirelli,,2017-06-12T09:07:17.000-0400,NPE when evaluating a DMN decision table with multiple outputs and one of the outputs has wrong type,Resolved,bug,Bug
2017-06-20T09:34:54.000-0400,DROOLS-1595,Done,"Currently the ""in"" operator only works with literal lists or unary tests. Example:

x in [1, 2, 3]
x in >10

The spec requires the in operator to work with any endpoint, including variables and single values. Example:

x in someList
x in 10

",Major,Matteo Mortari,,2017-06-02T15:09:48.000-0400,"Fix the FEEL ""in"" operator to work with simple values and variables",Resolved,bug,Bug
2017-06-20T09:31:14.000-0400,DROOLS-1612,Done,"According to the DMN spec., ""Decision tables with compound outputs support only the following hit policies: Unique, Any, Priority, First, Output
order, Rule order and Collect without operator, because the collect operator is undefined over multiple outputs."" 

However when I use decision table with ""COLLECT"" hit policy, ""sum"" aggregate function and multiple outputs, the table compiles. When evaluating the table, I get nulls as output value results, but no error message in DMNResult. 

I will provide a reproducer in a PR. ",Major,Edson Tirelli,,2017-06-12T07:40:51.000-0400,Throw compilation error when using collect hit policy with aggr. function and multiple outputs,Resolved,bug,Bug
2017-06-20T10:59:25.000-0400,DROOLS-1621,Done,"When running test method ValidatorTest.testVALIDATION(), the test fails with this output[1]. This is caused by rules _TYPEREF_NOT_FEEL_NOT_DEF_p1_ and _TYPEREF_NOT_FEEL_NOT_DEF_p2_ from _dmn-validation-rules-typeref.drl_ matching during validation and so triggering errors. 

It looks like this is caused by different evaluation of constraint _not( ItemDefinition( name == $typeRef ) )_ on IBM JDK. $typeRef is of type QName. It looks like that when running on ORacle JDK, the toString() method of QName is invoked automatically so the ItemDefinition is matched. Otherwise, when running on IBM JDK, the constraint must be changed to _not( ItemDefinition( name == $typeRef.toString() ) )_ so ItemDefinition is matched. I'm not sure if this is really the cause of this problem or just a workaround. The session looks properly populated with facts during validation.  

Possible fix that adds toString() to appropriate validation rules can be found here [2].

[1] https://gist.github.com/baldimir/2dbc678886ad30a091a30bdb1d91f4cf
[2] https://github.com/kiegroup/drools/pull/1332",Major,Tibor Zimanyi,,2017-06-20T10:08:31.000-0400,DMN validation fails when executed on IBM JDK when checking referenced types,Resolved,bug,Bug
2017-06-19T12:22:49.000-0400,DROOLS-1618,Done,"When running DMN test combination _sort( list : [3, 1, 4, 5, 2] )_ from FEELFunctionsTest class on IBM JDK, the test fails, because the correct sort method cannot be invoked. 

On IBM JDK, the combination tries to invoke method [1] from SortFunction class, which is incorrect, because the second method with just one parameter should be invoked. This behaviour is influenced by IBM JDK returning methods from call [2] in different order. 

Notes from debugging: 
This check [3] pass because the array there is 3 items long although the last item is not populated. This array is created from this method call [4].

[1] https://github.com/kiegroup/drools/blob/master/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/runtime/functions/SortFunction.java#L36
[2] https://github.com/kiegroup/drools/blob/ec038e19867d0f4f13f9ddc508f3bbab411d3415/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/runtime/functions/BaseFEELFunction.java#L192
[3]https://github.com/kiegroup/drools/blob/ec038e19867d0f4f13f9ddc508f3bbab411d3415/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/runtime/functions/BaseFEELFunction.java#L246
[4] https://github.com/kiegroup/drools/blob/ec038e19867d0f4f13f9ddc508f3bbab411d3415/kie-dmn/kie-dmn-feel/src/main/java/org/kie/dmn/feel/runtime/functions/BaseFEELFunction.java#L235",Major,Edson Tirelli,,2017-06-19T10:13:43.000-0400,DMN sort function doesn't work on IBM JDK,Resolved,bug,Bug
2017-06-06T02:46:01.000-0400,DROOLS-1593,Done,"This seems like a regression, as this used to work in 6.4.0.Final, but broke somewhere before 6.5.0.Final. Still broken in 7.0.0-SNAPSHOT. (I actually found it in the OpenShift DecisionServer/KIE-Server image).

See this reproducer: https://github.com/DuncanDoyle/ruleflow-split-problem

I have a ruleflow-group that has a split-node (XOR Gateway) directly after the start-node. The outgoing sequence flows of that XOR have a Drools LHS that checks whether a fact is present in working memory (in this reproducer it's a String)
- exists java.lang.String()
- not java.lang.String()

Only if that fact exists do I want to continue my ruleflow, if the fact is not there, I stop.

I use a StatelessKieSession in which I;
- insert a String
- start the process
- fire the rules

This used to work fine in 6.4.0.Final and below, but since 6.5.0.Final I get an exception:

{code}
org.jbpm.workflow.instance.WorkflowRuntimeException: [test-process:1 - Has Strings?:4] -- XOR split could not find at least one valid outgoing connection for split Has Strings?
	at org.jbpm.workflow.instance.node.SplitInstance.internalTrigger(SplitInstance.java:66)
	at org.jbpm.workflow.instance.impl.NodeInstanceImpl.trigger(NodeInstanceImpl.java:174)
	at org.jbpm.workflow.instance.impl.NodeInstanceImpl.triggerNodeInstance(NodeInstanceImpl.java:367)
	at org.jbpm.workflow.instance.impl.NodeInstanceImpl.triggerCompleted(NodeInstanceImpl.java:326)
	at org.jbpm.workflow.instance.node.StartNodeInstance.triggerCompleted(StartNodeInstance.java:72)
	at org.jbpm.workflow.instance.node.StartNodeInstance.internalTrigger(StartNodeInstance.java:43)
	at org.jbpm.workflow.instance.impl.NodeInstanceImpl.trigger(NodeInstanceImpl.java:174)
	at org.jbpm.ruleflow.instance.RuleFlowProcessInstance.internalStart(RuleFlowProcessInstance.java:38)
	at org.jbpm.process.instance.impl.ProcessInstanceImpl.start(ProcessInstanceImpl.java:235)
	at org.jbpm.workflow.instance.impl.WorkflowProcessInstanceImpl.start(WorkflowProcessInstanceImpl.java:443)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcessInstance(ProcessRuntimeImpl.java:208)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:192)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:184)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.startProcess(StatefulKnowledgeSessionImpl.java:1859)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:121)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:39)
	at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:156)
	at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:64)
	at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:238)
	at org.jboss.ddoyle.ruleflow.test.RuleflowTest.testRuleflowWithSingleFire(RuleflowTest.java:28)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.IllegalArgumentException: XOR split could not find at least one valid outgoing connection for split Has Strings?
	at org.jbpm.workflow.instance.node.SplitInstance.executeStrategy(SplitInstance.java:110)
	at org.jbpm.workflow.instance.node.SplitInstance.internalTrigger(SplitInstance.java:62)
	... 42 more
{code}

What seems to be causing this is that the rules in the sequence flows are not yet fired when the process arrives at the XOR node, causing it to not be able to find an outgoing connection.

What does work is if I add an extra ""fireAllRules"" command BEFORE the ""startProcess"" command. In that case the flow behaves as it used to. So I need 2 ""fireAllRules"" commands. What does NOT work is when I only add a ""fireAllRules"" command before the startProcess command. In that case the rules in the RFG nodes are not fired (but the XOR does not throw an exception in that case).",Major,Mario Fusco,,2017-06-02T05:56:23.000-0400,Ruleflow Split (XOR) can't find valid outgoing connection,Resolved,bug,Bug
2017-06-05T11:25:42.000-0400,DROOLS-1604,Done,"Indexing declaration in MvelConstraint is not cloned when a 'or' is processed and this in turn causes that the wrong field is indexed for a branch of the 'or' or even that it attempts to index on a not existing causing the following NPE:

{code}
java.lang.NullPointerException
	at org.drools.core.reteoo.BaseLeftTuple.getObject(BaseLeftTuple.java:629)
	at org.drools.core.reteoo.BaseTuple.getObject(BaseTuple.java:48)
	at org.drools.core.util.AbstractHashTable$FieldIndex.hashCodeOf(AbstractHashTable.java:333)
{code}",Major,Mario Fusco,,2017-06-05T10:52:15.000-0400,Missing clone for indexing declaration in MvelConstraint,Resolved,bug,Bug
2017-06-05T08:46:24.000-0400,DROOLS-1596,Done,"From Melanie:
--------
Maybe something is off in our serialization, but when I try to execute the attached file it always tell me my values are incorrect event when they are within the allowed range. That file is a really dumb decision that just create a boxed context with the two inputs it gets. Those inputs are one yearMonthDuration and one date time. Both are defined with Item definition and have a constraints on them. Setting constraints on all the other types works fine.
--------
 Here are the messages:

I send P20Y and  2017-05-16T17:58:00.000Z to the back end. Then I use (BuiltInType) BuiltInType.determineTypeFromName(type) in the back end to have the proper feel type and feelType.fromString(value) to get the proper object.
 
The returned type for yearMonthDuration is duration and a Period with the proper value is create for it. For date time it is a DATE_TIME and a ZonedDateTime is create for it.
 
All of that seem fine.
----------",Major,Edson Tirelli,,2017-06-02T18:00:59.000-0400,Error checking allowed values for input nodes of duration and date and time types,Resolved,bug,Bug
2017-06-01T12:07:45.000-0400,DROOLS-1592,Done,"Given:
two agenda groups: A1 and A2. 
Rule R1 in agenda group A1 and rule R2 in agenda group A2.
R1 matches facts of type T1, deletes them and creates facts of type T2. 
R2 matches facts of type T2 and does soemthing with them (it doesn't matter, because issue happens even if R2 never fired).

Scenario:
* Create session, add R1 and R2 rules
* add some facts of T1 type
* set focus on A1 agenda group 
* invoke ""fireAllRules"" method
* Invoke ""getObjects"" and assure that session contains only T2 facts
* analyze objects in memory (by jmap + memory analyzing tool or just traversing references by reflection) and assure that T1 facts are still reachable via session object.
* serialize session using marshaller and deserialize in again
* analyze deserialized session and see that it doesn't contain T1 fact references anymore.

Thoughts:
I assumed that T1 references storing is feature, because they can be necessary in some cases (like reverse of their deletion due to logical inversion of truth - not sure, but maybe), but T1 deletion after (de)serialization points out the opposite.",Major,Mario Fusco,,2017-05-31T11:10:08.000-0400,"Deleted facts retained in memory, but removed after (de)serialization",Resolved,bug,Bug
2017-06-01T05:17:09.000-0400,DROOLS-1590,Rejected,"I am using drools 6.5.0 Final. When I run sample code of section ""starting a ruleflow from a rule"" in documentation (https://nheron.gitbooks.io/droolsonboarding/content/gettingStarted/lesson_4__ruleflow.html), the output sequence is different from the screenshot.

But when I switched to drools version to 6.4.0 Final, the output sequence was extactly same with screenshot.",Major,Mario Fusco,,2017-05-31T05:55:25.000-0400,The behavior of rule flow is different in drools 6.4.0 Final and 6.5.0 Final,Resolved,bug,Bug
2017-06-01T13:12:58.000-0400,DROOLS-1591,Rejected,"Using {{DroolsStreamUtils}}, created an unit-test to serialize and deserialize a DRL file. In version ""6.0.1.Final"", the unit-test runs flawlessly. In other versions, deserialization gives an ClassNotFoundException for the declared event.

I've checked StackOverflow and Drools' JIRA for similar problems and found nothing.

I've also attached a junit. Please change property {{drools.version}} to test with different Drools versions.

",Major,Mario Fusco,,2017-05-31T10:37:05.000-0400,Problems in serialization/deserialization of KnowledgePackages,Resolved,bug,Bug
2017-05-30T06:47:09.000-0400,DROOLS-1589,Done,None,Major,Mario Fusco,,2017-05-29T11:59:06.000-0400,ClassCastException using oopath in 2 distinct rules,Resolved,bug,Bug
2015-07-08T06:53:20.000-0400,DROOLS-588,Done,"Reoroducer:

{code}
    @Test
    public void testWrongNodeSharing() {
        String drl1 =
                ""package test1\n"" +
                ""import static "" + Misc2Test.class.getCanonicalName() + "".parseInt;\n"" +
                ""global java.util.List list;\n"" +
                ""rule R when\n"" +
                ""    String( parseInt(this) == 0 )\n"" +
                ""then\n"" +
                ""    list.add(\""OK\"");\n"" +
                ""end"";

        String drl2 =
                ""package test2\n"" +
                ""import static java.lang.Integer.parseInt;\n"" +
                ""global java.util.List list;\n"" +
                ""rule R when\n"" +
                ""    String( parseInt(this) == 0 )\n"" +
                ""then\n"" +
                ""    list.add(\""NOT OK\"");\n"" +
                ""end"";

        KieHelper helper = new KieHelper();
        helper.addContent( drl1, ResourceType.DRL );
        helper.addContent( drl2, ResourceType.DRL );
        KieSession kieSession = helper.build().newKieSession();

        List list = new ArrayList();
        kieSession.setGlobal( ""list"", list );

        kieSession.insert( ""3"" );
        kieSession.fireAllRules();

        assertEquals( 1, list.size() );
        assertEquals( ""OK"", list.get(0) );
    }

    public static int parseInt(String s) {
        return 0;
    }
{code}",Major,Mario Fusco,,2014-09-01T13:01:04.000-0400,Constraints with same expression causes a node sharing even if they shouldn't,Resolved,bug,Bug
2014-12-12T11:02:25.000-0500,DROOLS-668,Done,"I've been getting the error

{quote}
Exception in thread ""main"" java.lang.IllegalStateException: Score corruption: the workingScore (-1300hard/0soft) is not the uncorruptedScore (-1320hard/0soft) after completedAction ([ShiftAssignment for shift: MONDAY, from 8:0 to 8:20, assigned employee: null => null, ShiftAssignment for shift: MONDAY, from 8:0 to 8:20, assigned employee: null => null]):
  Score corruption analysis could not be generated because either corrupted constraintMatchEnabled (true) or uncorrupted constraintMatchEnabled (false) is disabled.
  Check your score constraints manually.
	at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertWorkingScoreFromScratch(AbstractScoreDirector.java:296)
	at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertExpectedUndoMoveScore(AbstractPhaseScope.java:139)
	at org.optaplanner.core.impl.constructionheuristic.decider.ConstructionHeuristicDecider.doMove(ConstructionHeuristicDecider.java:108)
	at org.optaplanner.core.impl.constructionheuristic.decider.ConstructionHeuristicDecider.decideNextStep(ConstructionHeuristicDecider.java:77)
	at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.solve(DefaultConstructionHeuristicPhase.java:67)
	at org.optaplanner.core.impl.solver.DefaultSolver.runPhases(DefaultSolver.java:213)
	at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:176)
	at TeRo.TeRoAppMain.main(TeRoAppMain.java:25)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:134)
{quote}

when executing the following rule with an EasyScoreCalculator

{code:drl}
// Employees are forced to work the exact amount specified in their contracts
rule ""employeeWeeklyHours""
    when
		$employee : Employee( $weeklyHours : weeklyHours, weeklyHoursAreMandatory == true )
		$totalWorkAssignedMinutes : Number(intValue != $weeklyHours * 60)
			from accumulate( $shiftAssignment : ShiftAssignment( $shift : shift )
							 and eval($shiftAssignment.employeeIsAssigned($employee) == true)
			                 and Shift(this == $shift, $shiftTime : shiftTime),
							sum($shiftTime.getShiftTotalMinutes())
						   )
	then
		scoreHolder.addHardConstraintMatch( kcontext, -1 * Math.abs($totalWorkAssignedMinutes.intValue() - $weeklyHours * 60) );
end
{code}",Major,Mario Fusco,,2014-11-14T12:33:58.000-0500,java.lang.IllegalStateException: Score corruption for 'employeeWeeklyHours' rule,Resolved,bug,Bug
2015-08-25T07:36:51.000-0400,DROOLS-577,Done,"Engine seems not find objects when trying to filter based on a field name ""rule"".

",Minor,Mario Fusco,,2014-08-20T10:53:51.000-0400,"Filter doesn't work if object has ""rule"" as a fieldname",Resolved,bug,Bug
2015-01-30T04:48:32.000-0500,DROOLS-583,Done,"The current 6.2.0 SNAPSHOTS of the jcr2vfs tool are broken. There seems to some issue with incompatibility with between Drools 5.x and 6.x. 

{code}
Asset [Bankruptcy history] with format [brl] is being migrated... 
java.lang.ClassCastException: org.drools.core.base.accumulators.BigDecimalSumAccumulateFunction cannot be cast to org.drools.runtime.rule.AccumulateFunction
	at org.drools.compiler.PackageBuilderConfiguration.loadAccumulateFunction(PackageBuilderConfiguration.java:530)
	at org.drools.compiler.PackageBuilderConfiguration.buildAccumulateFunctionsMap(PackageBuilderConfiguration.java:479)
	at org.drools.compiler.PackageBuilderConfiguration.init(PackageBuilderConfiguration.java:194)
	at org.drools.compiler.PackageBuilderConfiguration.<init>(PackageBuilderConfiguration.java:165)
{code}
Another very serious issue is that even when the jcr2vfs tests fail, the Jenkins drools-wb CI build succeeds. This needs to be fixed, so that when the tests fail, the build fails too.

I will try to fix the tool in time for 6.2.0.Final.",Major,Jan Schatteman,,2014-08-28T09:34:18.000-0400,Drools WB jcr2vfs: make the migration tool work again,Resolved,bug,Bug
2015-04-22T10:49:18.000-0400,DROOLS-579,Done,"The [javadoc|http://docs.jboss.org/drools/release/6.1.0.Final/kie-api-javadoc/org/kie/api/runtime/rule/RuleRuntime.html#getQueryResults(java.lang.String, java.lang.Object...)] for public api {{RuleRuntime.getQueryResults}} mentions: _If the query does not exist or no results match the query it is empty_ ; however if query does not exist, actually RuntimeException is thrown instead. Details follows. I'm reporting this as I assume this will become even more relevant for the execution server, ref 2nd test below.

h5. Proposals 

My proposals are that either:
* javadoc shall be at least corrected - I know there is no obligation to document unchecked exceptions, but [here the doc is explicitly saying something different|http://docs.jboss.org/drools/release/6.1.0.Final/kie-api-javadoc/org/kie/api/runtime/rule/RuleRuntime.html#getQueryResults(java.lang.String, java.lang.Object...)] . I will attach pull request accordingly.
* the public api method shall reflect the doc and {{QueryResult}} returned should resemble Java 8's Optional then - if I understood some good api design styles to mitigate this scenario from Mario, instead of throwing the RuntimeException, the {{QueryResult}} returned could stand in place of Java 8's Optional. Without dependency on Java 8 API, the {{QueryResult}} in case 'query does not exist' could be empty, to guarantee retro-compatibility, and have specific methods to distinguish root cause of being empty between query-not-found or no-results-match-criteria.

... or possibly ack the former option for the time being, and welcome the latter option as a suggestion for enhancement on the new releases, please? Thanks

h5. Details

If you consider the following code
{code}
@Test
public void missingQueryViaApi() {
	String drl = 
			""query \""my query A\""\n"" + 
			""	$r : String()\n"" + 
			""end"";
	
	KieHelper helper = new KieHelper();
	helper.addContent( drl, ResourceType.DRL );
	KieSession ksession = helper.build().newKieSession();
	
	// If ... no results match the query it is empty
	QueryResults validQueryNameResults = ksession.getQueryResults(""my query A"");
	assertNotNull(""The query exists so result should NOT be null"", validQueryNameResults);
	assertEquals(""The query exists and result should be empty"", 0, validQueryNameResults.size());
	
	// If the query does not exist ... it is empty
	boolean hasThrownRTE = false;
	try {
		ksession.getQueryResults(""an non-existent query"");
	} catch (RuntimeException e) {
		hasThrownRTE = true;
	}
	assertFalse(""Should not throw RTE, should be sort-of 'empty' by doc"", hasThrownRTE);
}
{code}

The test fails on the last assert, as accordingly to [javadoc|http://docs.jboss.org/drools/release/6.1.0.Final/kie-api-javadoc/org/kie/api/runtime/rule/RuleRuntime.html#getQueryResults(java.lang.String, java.lang.Object...)], but instead it actually throws the RuntimeException.

This becomes even more of an issue if you consider invoking via Commands:
{code}
@Test
public void missingQueryViaCommands() {
	String drl = 
			""query \""my query A\""\n"" + 
			""	$r : String()\n"" + 
			""end"";
	
	String someText = ""This is some text"";
	
	KieHelper helper = new KieHelper();
	helper.addContent( drl, ResourceType.DRL );
	KieSession ksession = helper.build().newKieSession();

	List<Command<?>> cmds = new ArrayList<Command<?>>();
	cmds.add( CommandFactory.newInsert( someText ));
	cmds.add( CommandFactory.newQuery( ""results A"", ""my query A"" ));
	cmds.add( CommandFactory.newQuery( ""results NE"", ""an non-existent query"" ));
	
	ExecutionResults results = ksession.execute( CommandFactory.newBatchExecution( cmds ) );
	
	QueryResults queryResults = ( QueryResults ) results.getValue( ""results A"" );
	assertEquals(someText, queryResults.iterator().next().get(""$r"") );
}
{code}

The test fails on the {{ksession.execute()}} and that's why I wanted to report this I spotted, because I'm afraid might have more deep implications for the drools execution server. ",Major,Petr Široký,,2014-08-26T06:13:33.000-0400,Wrong doc for RuleRuntime.getQueryResults - throwing RuntimeException instead of empty results,Resolved,bug,Bug
2016-01-28T10:36:21.000-0500,DROOLS-770,Done,"This bug is already reported to the drools team via email on 13th february.

To follow efficiently any progress on this critical bug, I open a ticket.

So, the reproducer code is:

{code:java|title=NpeOnQueryTest|borderStyle=solid}
package org.drools.compiler.integrationtests;

import org.junit.Test;
import org.kie.api.io.ResourceType;
import org.kie.api.runtime.KieSession;
import org.kie.internal.utils.KieHelper;

import java.util.List;

public class NpeOnQueryTest {

    @Test
    public void test() {
        String drl =
                ""import "" + FiveState.class.getCanonicalName() + "";\n"" +
                ""import "" + NodeType.class.getCanonicalName() + "";\n"" +
                ""import "" + Knowledge.class.getCanonicalName() + "";\n"" +
                ""import "" + List.class.getCanonicalName() + "";\n"" +
                ""\n"" +
                ""rule \""Or Knowledge is unknown\""\n"" +
                ""    when\n"" +
                ""        $k: Knowledge( presence == FiveState.UNEVALUATED, nodeType == NodeType.OR )\n"" +
                ""        allSubKnowledgeAreEvaluated( $k, $childs; )\n"" +
                ""        not( Knowledge( presence == FiveState.TRUE ) )\n"" +
                ""    then\n"" +
                ""        modify( $k ){\n"" +
                ""            setPresence( FiveState.UNKNOWN )\n"" +
                ""        }\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule \""Or Knowledge is present\""\n"" +
                ""    when\n"" +
                ""        $k: Knowledge( presence == FiveState.UNEVALUATED, nodeType == NodeType.OR )\n"" +
                ""        allSubKnowledgeAreEvaluated( $k, $childs; )\n"" +
                ""    then\n"" +
                ""        modify( $k ){\n"" +
                ""            setPresence( FiveState.TRUE )\n"" +
                ""        }\n"" +
                ""end\n"" +
                ""\n"" +
                ""query allSubKnowledgeAreEvaluated( Knowledge parent, List childs )\n"" +
                ""    childs:= List() from collect ( Knowledge( parent memberOf partOf ))\n"" +
                ""    forall( Knowledge( presence != FiveState.UNEVALUATED ) from childs )\n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent(drl, ResourceType.DRL)
                                     .build()
                                     .newKieSession();

        Knowledge bk0 = new Knowledge(new Knowledge[0], NodeType.OR, ""bk0"", FiveState.UNEVALUATED);
        Knowledge bk1 = new Knowledge(new Knowledge[] { bk0 }, NodeType.LEAF, ""bk1"", FiveState.TRUE);

        ksession.insert( bk0 );
        ksession.insert( bk1 );
        ksession.fireAllRules();
    }

    public enum FiveState {
        TRUE,
        FALSE,
        BOTH,
        UNKNOWN,
        UNEVALUATED
    }

    public enum NodeType {
        LEAF,
        AND,
        OR
    }

    public static class Knowledge {

        private final Knowledge[] partOf;
        private final NodeType nodeType;
        private final String name;
        private FiveState presence;

        public Knowledge(Knowledge[] partOf, NodeType nodeType, String name, FiveState presence) {
            this.partOf = partOf;
            this.nodeType = nodeType;
            this.name = name;
            this.presence = presence;
        }

        public void setPresence(final FiveState presence) {
            this.presence = presence;
        }

        public String getName() {
            return name;
        }

        public FiveState getPresence() {
            return presence;
        }

        public NodeType getNodeType() {
            return nodeType;
        }

        public Knowledge[] getPartOf() {
            return partOf;
        }
    }
}
{code}
 
The interesting thing to be noticed is that if I move the query before the 2 rules in that DRL the problem disappears.

",Critical,Mario Fusco,,2015-04-23T04:46:40.000-0400,Query order can to lead to a NPE,Resolved,bug,Bug
2016-04-21T03:47:48.000-0400,DROOLS-910,Done,The Server Property dialog from Kie Navigator view does not save the username/password information and always defaults to admin/admin.,Major,Robert (Bob) Brodt,,2015-09-09T10:18:17.000-0400,Kie Navigator Server Property dialog does not save user creds,Closed,bug,Bug
2016-06-28T13:08:04.000-0400,DROOLS-710,Done,"I am uploading that jar in the artifact repository of the kid-wb. I am using version 6.2.0.CR4.
I have defined the variable that point to the maven installation and the maven repo as follows.

CATALINA_OPTS=""-Xms1536m -Xmx6536m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=556m -XX:+DisableExplicitGC -Dhibernate.dialect=org.hibernate.dialect.PostgreSQLDialect -Dorg.kie.example.repositories=/home/kie-samples -Dorg.kie.example=true -Dorg.uberfire.nio.git.daemon.host=0.0.0.0 -Dorg.guvnor.m2repo.dir=$M2_HOME -Dorg.uberfire.nio.git.dir=/home/niodir -Djava.security.auth.login.config=/home/tomcat7/apache-tomcat-7.0/conf/jaasConfig -Dbtm.root=/home/bittronix -Dbitronix.tm.configuration=/home/tomcat7/apache-tomcat-7.0/conf/btm-config.properties -Djbpm.tsr.jndi.lookup=java:comp/env/TransactionSynchroniz

I am running on tomcat7",Major,Mark Proctor,,2015-02-11T08:14:57.000-0500, Problem when loading a jar in kie workbench,Closed,bug,Bug
2016-04-21T03:47:14.000-0400,DROOLS-911,Done,"Kie Navigator does not recognize running EAP server. Server should be listed in Kie Navigator view but there is only default link (""No servers available. Click this link to create a new server..."") to the Servers view.",Major,Robert (Bob) Brodt,,2015-09-10T01:25:29.000-0400,Kie Navigator does not recognize running EAP server,Closed,bug,Bug
2015-11-16T09:12:59.000-0500,DROOLS-976,Done,"It seems when we have a LHS like this:
 Order( $current.time after[1m] time )

Drools will fail in the evaluation with this exception:
Caused by: java.lang.ClassCastException: java.util.Date cannot be cast to java.lang.Long
	at org.drools.core.base.extractors.ConstantValueReader.getLongValue(ConstantValueReader.java:48) [drools-core-6.1.0.Final.jar:6.1.0.Final]
	at org.drools.core.base.evaluators.AfterEvaluatorDefinition$AfterEvaluator.evaluate(AfterEvaluatorDefinition.java:365) [drools-core-6.1.0.Final.jar:6.1.0.Final]

This is a PR that demonstrates the issue
https://github.com/droolsjbpm/drools/pull/554
",Minor,Mario Fusco,,2015-11-11T15:58:26.000-0500,Exception when comparing dates with after operator,Resolved,bug,Bug
2016-02-02T09:56:48.000-0500,DROOLS-980,Done,"Error inesperado en la ejecucion del artefacto
java.lang.UnsupportedOperationException: KieBase.getFactType should only be used to retrieve declared beans. Class com.example.types.Person exists outside DRL
at org.drools.core.definitions.impl.KnowledgePackageImpl.getFactType(KnowledgePackageImpl.java:635)


",Blocker,Mario Fusco,,2015-11-12T06:20:22.000-0500,KieBase.getFactType should only be used to retrieve declared beans.,Resolved,bug,Bug
2016-03-16T13:41:12.000-0400,DROOLS-974,Done,"In some rare cases activation group doesn't work as expected. For example, two rules with same ruleflow-group and activation-group but different salience are both get fired if reuse kie session.

Some investigation notes to help address.
1) This issue never happen if use a new fresh kie session.
2) I also tried to write a drools style unit test (testActivationGroupIssue in ExecutionFlowControlTest.java) but can't reproduce this issue.
",Major,Mario Fusco,,2015-11-09T06:26:41.000-0500,Activation group doesn't work as expected,Resolved,bug,Bug
2015-11-25T14:55:23.000-0500,DROOLS-831,Done,"In a non-Docker installation of the KIE execution server, the user must configure the Maven settings file to specify where the Maven repository for the artifacts is located.

As Docker images are immutable, this configuration must be specified at runtime using environment variables when the container starts. 

This feature is not implemented on latest image tag and it's mandatory for being able to use the external Maven repository.

This bug is reported from community feedback: 
""I'm trying out the docker images for the workbench-showcase and the execution-showcase.  Fresh install.  I'm using -p 8080:8080 for the wb and 8081:8080 for the exec.  WB runs fine and I can build and deploy the mortgage project.  Exec runs fine and I can access using REST.  I can register the exec server fine.  Mortgage container creates fine.  Starting the container produces this error on the exec docker: 

987 ERROR [org.kie.server.services.rest.KieServerRestImpl] (default task-5) Error creating container 'Test1' for module 'mortgages:mortgages:0.0.1': java.lang.RuntimeException: Cannot find KieModule: mortgages:mortgages:0.0.1

Should this work out of the box?""",Major,Roger Martinez,,2015-06-30T15:33:48.000-0400,KIE Execution Server is not able to find the Maven repository,Resolved,bug,Bug
2015-11-17T03:19:59.000-0500,DROOLS-978,Done,"when i update the stateful rule in the kfs, then it gives me the NPE:
the 6.3.0.Final and the 6.4.0-snapshot can throws this exception:

Exception in thread ""main"" java.lang.NullPointerException
	at org.drools.core.reteoo.NodeTypeEnums.isBetaNode(NodeTypeEnums.java:88)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:254)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123)
	at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:65)
	at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:1004)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:961)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260)
	at com.test.TestAA.main(TestAA.java:103)

the TestAA.java:103 is 
102:        kContainer.updateToVersion(releaseId);
103:        session.fireAllRules();",Major,Mario Fusco,,2015-11-12T04:04:06.000-0500,java.lang.NullPointerException at org.drools.core.reteoo.NodeTypeEnums.isBetaNode(NodeTypeEnums.java:88),Resolved,bug,Bug
2016-01-25T04:36:59.000-0500,DROOLS-787,Done,"getProcessRuntimeFactoryService is getter method of singleton class ""org.drools.core.runtime.process.ProcessRuntimeFactory"" but this method is static synchronized so at a time only one thread can call it .

Due to above issue when we are using drools in multi threaded enviorenment threads are getting locked at this method and performance degrades when creating KSession objects.",Major,Petr Široký,,2015-05-18T05:27:59.000-0400,getProcessRuntimeFactoryService method of ProcessRuntimeFactory is synchronized.,Resolved,bug,Bug
2016-10-03T04:39:18.000-0400,DROOLS-1279,Done,"Reproducer is attached.with problematic spredsheet named SampleNG.xml.
Compilation of  this fails with the following error.

java.lang.RuntimeException: Error while creating KieBase[Message [id=1, level=ERROR, path=dtables/SampleNG.xls, line=8, column=0
   text=Unable to Analyse Expression checktest == AAA:
[Error: unable to resolve method using strict-mode: com.sample.DecisionTableTest$Message.AAA()]
[Near : {... checktest == AAA ....}]

because  the following DRL is generated.

rule ""HelloWorld_12""
	when
		m:Message(checktest in (AAA), status == ""Message.HELLO"")
  ...

i.e. double quotation of value (""AAA"") specified in the cell is removed.
 
If D column does not exist like Sample.xml(also included in reproducer) or rule template of D column is modified  like ""status == $param "" (see  SampleOK.xml), this does not happen.
",Critical,Michael Anstis,,2016-09-08T05:25:01.000-0400,[GSS] compilation of spreadsheet fails with specific condition,Resolved,bug,Bug
2016-10-06T12:04:07.000-0400,DROOLS-1258,Done,"When run the drools-examples games invaders given in drools 6.4.0.Final, it is making blur GUI for the game.",Optional,Matteo Mortari,,2016-08-23T15:33:06.000-0400,"drools-examples games invaders build up a fade gui in windows 8.1,10",Resolved,bug,Bug
2016-10-05T13:33:25.000-0400,DROOLS-987,Done,"Several threads are started, each one starts 1 jbpm process containing rule(s) task(s).
If the threads are few, everything works fine. Under heavy load nullPointerExceptions are thown most of the time, less frequently fireAllRules never ends and CPU remains at 100%.

Aparently the setFocus method used by rule tasks is related to the problem.

The most comon error is:
Caused by: java.lang.NullPointerException
        at org.drools.core.common.LeftTupleSetsImpl.removeInsert(LeftTupleSetsImpl.java:141)
        at org.drools.core.common.LeftTupleSetsImpl.addDelete(LeftTupleSetsImpl.java:80)
        at org.drools.core.reteoo.LeftInputAdapterNode.doDeleteSegmentMemory(LeftInputAdapterNode.java:295)
        at org.drools.core.reteoo.LeftInputAdapterNode.doDeleteObject(LeftInputAdapterNode.java:266)
        at org.drools.core.reteoo.LeftInputAdapterNode.retractLeftTuple(LeftInputAdapterNode.java:361)
        at org.drools.core.reteoo.ObjectTypeNode.doRetractObject(ObjectTypeNode.java:334)
        at org.drools.core.reteoo.ObjectTypeNode.retractObject(ObjectTypeNode.java:317)
        at org.drools.core.reteoo.EntryPointNode.propagateRetract(EntryPointNode.java:358)
        at org.drools.core.phreak.PropagationEntry$Delete.execute(PropagationEntry.java:172)
        at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
        at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:69)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:1993)
",Major,Mario Fusco,,2015-11-20T14:55:51.000-0500,Errors in Phreak under heavy and multi threaded load ,Resolved,bug,Bug
2014-09-24T08:00:52.000-0400,DROOLS-585,Done,"inconsistent behavior of & bitwise operator

after writing a rule given below

no-loop

	when
        f: Person(
            ((101 & age) != 0)
        )
    then
        f.setFound(true);
end

after calling this several times say 100 it gives inconsistent result. Similar behavior is observed if we place bitwise '&' with bitwise '|'  
",Major,Mario Fusco,,2014-08-29T01:46:36.000-0400,inconsistent behavior of & bitwise operator,Resolved,bug,Bug
2014-09-22T14:03:34.000-0400,DROOLS-598,Done,"Please see attached code file to reproduce issue. Rule is supposed to fire and yield  0.0 as the sum but rule does not. If we remove TestA, TestB, TestC and leave only TestD as condition then rule fire.",Major,Mario Fusco,,2014-09-12T17:44:10.000-0400,accumuate function not working when object chaining is used as accumulate condition,Closed,bug,Bug
2014-10-30T06:19:23.000-0400,DROOLS-576,Done,"With the following conditions:

- A persisted ksession
- RETEOO engine
- ksession is disposed while a timer is activated
- ksession is loaded with a new kbase which doesn't have a rule which associated with the timer

ActivationTimerInputMarshaller.deserialize() throws a NullPointerException so failed to load the ksession.

{noformat}
java.lang.RuntimeException: Unable to load session snapshot
	at org.drools.persistence.SessionMarshallingHelper.loadSnapshot(SessionMarshallingHelper.java:88) ~[classes/:na]
	at org.drools.persistence.SingleSessionCommandService.initExistingKnowledgeSession(SingleSessionCommandService.java:239) ~[classes/:na]
	at org.drools.persistence.SingleSessionCommandService.<init>(SingleSessionCommandService.java:172) ~[classes/:na]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [na:1.7.0_67]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57) [na:1.7.0_67]
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [na:1.7.0_67]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526) [na:1.7.0_67]
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.buildCommandService(KnowledgeStoreServiceImpl.java:122) [classes/:na]
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.loadKieSession(KnowledgeStoreServiceImpl.java:90) [classes/:na]
	at org.drools.persistence.jpa.KnowledgeStoreServiceImpl.loadKieSession(KnowledgeStoreServiceImpl.java:39) [classes/:na]
	at org.kie.internal.persistence.jpa.JPAKnowledgeService.loadStatefulKnowledgeSession(JPAKnowledgeService.java:130) [kie-internal-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.persistence.timer.integrationtests.TimerAndCalendarTest.testTimerWithRemovingRule(TimerAndCalendarTest.java:340) [test-classes/:na]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_67]
...
Caused by: java.lang.NullPointerException: null
	at org.drools.core.common.Scheduler$ActivationTimerInputMarshaller.deserialize(Scheduler.java:216) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readTimer(ProtobufInputMarshaller.java:700) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:282) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:155) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:110) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:54) ~[drools-core-6.2.0-SNAPSHOT.jar:6.2.0-SNAPSHOT]
	at org.drools.persistence.SessionMarshallingHelper.loadSnapshot(SessionMarshallingHelper.java:83) ~[classes/:na]
	... 44 common frames omitted
{noformat}

Probably we may silently ignore the timer when leftTuple is not found.",Major,Mario Fusco,,2014-08-15T02:49:54.000-0400,NullPointerException in ActivationTimerInputMarshaller.deserialize(),Resolved,bug,Bug
2014-09-24T06:05:56.000-0400,DROOLS-590,Done,None,Major,Mario Fusco,,2014-09-01T15:37:21.000-0400,Class literals used as query positional arguments are not rewired,Resolved,bug,Bug
2014-09-24T06:30:08.000-0400,DROOLS-600,Done,"We have embedded Drools in our project and use FactTemplates.  While attempting to upgrade from Drools 5.3 to 6.1, we are receiving a ClassCastException in org.drools.compiler.rule.builder.PatternBuilder when loading and compiling rules.

The problem is evident upon inspection of the code.  In method build(RuleBuildContext, BaseDescr, Pattern), the local var objectType can be either a FactTemplateObjectType or a ClassObjectType, but line 258 does not check the type before attempting the cast.

{noformat}
java.lang.ClassCastException: org.drools.core.facttemplates.FactTemplateObjectType cannot be cast to org.drools.core.base.ClassObjectType
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:258)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:138)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:89)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1652)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:968)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:844)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:838)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:339)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:315)
	...{noformat}",Major,Mario Fusco,,2014-09-15T15:51:18.000-0400,ClassCastException when using FactTemplates,Resolved,bug,Bug
2016-10-11T13:53:32.000-0400,DROOLS-1322,Done,None,Major,Matteo Mortari,,2016-10-10T05:16:43.000-0400,JPAKnowledgeService session does not support mbeans,Resolved,bug,Bug
2014-10-27T10:52:47.000-0400,DROOLS-639,Done,"If a fact is (re)declared multiple times from different packages:
{code}
package p1;
declare Foo @propertyReactive end
{code}
and
{code}
package p2;
declare Foo @role(event) end
{code}

The two declarations result in a conflict. 
If the DRL files are in the same package, one of the declarations will be lost",Major,Mario Fusco,,2014-10-24T10:51:21.000-0400,Multiple declarations of the same fact from different packages are ignored or conflicting,Resolved,bug,Bug
2014-11-11T10:12:13.000-0500,DROOLS-620,Done,"Actions defined in the consequence of a rule with an defined interval (e.g. cron) are not processed by the system. Inserted facts, modified fields and pushed agenda groups are not consumed resulting in other rules not being fired. If you execute fireAllRules from code, it will then process the consequence actions. ",Major,Mario Fusco,,2014-10-01T12:41:46.000-0400,Interval rule consequence actions not processed,Resolved,bug,Bug
2015-07-01T14:12:06.000-0400,DROOLS-731,Done,"I have a reproducer for these related issues.

We have encountered a couple of issues (Exceptions) when using a NOT constraint in rules that have facts associated with them when we call upgradeToVersion() or kSession.delete(). The catch22 is that one version of the NOT constraint avoids one Exception while causing another. Reproducing the issue requires 2 rules sharing the same NOT constraint. I have narrowed the issue(s) down to 2 very simple rules that use the org.drools.compiler.FactA class.

Here are the 2 rules used:

	static final String ruleDrl = ""package org.some.test\n"" +
			""import org.drools.compiler.FactA\n"" +
			""declare FactA\n"" +
			""@role(event)"" +
			""end\n"" +
			""rule \""R200_0\"" when\n"" +
			""  $FactA : FactA ($FactA_field2 : field2 == 111002)\n"" +  
			""  not FactA($FactA_field2 == 111002, this after $FactA)\n"" + // version A: using this version causes a NPE when calling ksession.delete()  
//			""  not FactA(field2 == 111002, this after $FactA)\n"" +  // Version B: using this version causes the IllegalArgumentException: Cannot remove a sink, 
                                                                    // when the list of sinks is null on the updateToVersion() call

			""then\n"" +
			""end\n"";

	static final String ruleDrl2 = ""package org.some.test\n"" +
			""import org.drools.compiler.FactA\n"" +
			""declare FactA\n"" +
			""@role(event)"" +
			""end\n"" +
			""rule \""R1437_0\"" when\n"" +
			""  $FactA : FactA ($FactA_field2 : field2 == 105742)\n"" +
			""  not FactA($FactA_field2 == 105742, this after $FactA)\n"" + // version A:
//			""  not FactA(field2 == 105742, this after $FactA)\n"" +  // Version B:
			""then\n"" +
			""end\n"";


We are hitting the following NPE using the reproducer code attached  when we use the NOT Constraint labeled as 'Version A' in the rule:

java.lang.NullPointerExceptionNullPointerException caught: 2

	at org.drools.core.reteoo.NotNode.doDeleteRightTuple(NotNode.java:186)
	at org.drools.core.reteoo.NotNode.retractRightTuple(NotNode.java:174)
	at org.drools.core.reteoo.ObjectTypeNode.doRetractObject(ObjectTypeNode.java:345)
	at org.drools.core.reteoo.ObjectTypeNode.retractObject(ObjectTypeNode.java:337)
	at org.drools.core.reteoo.EntryPointNode.retractObject(EntryPointNode.java:379)
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:612)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.delete(StatefulKnowledgeSessionImpl.java:1467)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.delete(StatefulKnowledgeSessionImpl.java:1458)
	at org.drools.compiler.integrationTests.RemovingARuleCausesNPE.test(RemovingARuleCausesNPE.java:187)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
	at java.lang.reflect.Method.invoke(Method.java:611)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

We are hitting the following IllegalArgumentException using the reproducer code attached  when we use the NOT Constraint labeled as 'Version B' in the rule:

java.lang.IllegalArgumentException: Cannot remove a sink, when the list of sinks is null
	at org.drools.core.reteoo.ObjectSource.removeObjectSink(ObjectSource.java:203)
	at org.drools.core.reteoo.ObjectSource.doRemove(ObjectSource.java:242)
	at org.drools.core.common.BaseNode.remove(BaseNode.java:122)
	at org.drools.core.reteoo.ReteooBuilder.removeNode(ReteooBuilder.java:236)
	at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:179)
	at org.drools.core.reteoo.ReteooBuilder.removeRule(ReteooBuilder.java:153)
	at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1535)
	at org.drools.core.impl.KnowledgeBaseImpl.removeObjectsGeneratedFromResource(KnowledgeBaseImpl.java:1768)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.removeObjectsGeneratedFromResource(KnowledgeBuilderImpl.java:2029)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:171)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:104)
	at org.drools.compiler.integrationTests.RemovingARuleCausesNPE.test(RemovingARuleCausesNPE.java:172)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
	at java.lang.reflect.Method.invoke(Method.java:611)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)


",Major,Mario Fusco,,2015-02-27T12:59:43.000-0500,In a catch22 using a NOT constraint in rules shared by multiple facts,Resolved,bug,Bug
2015-05-13T09:06:27.000-0400,DROOLS-751,Done,In class LeftTupleSetsImpl there are missing nullchecks in some methods that contains handling LeftTuple instances. I.e. in method removeInsert there is LeftTuple variable previous that is not nullchecked.  ,Critical,Mario Fusco,,2015-03-26T12:27:35.000-0400,Different threads accessing LeftTuple fields that reference LeftTupleSet,Resolved,bug,Bug
2015-05-25T12:24:25.000-0400,DROOLS-776,Done,"Migrating from drools 6.0.1.Final to 6.2.0.Final there seems to be a rare deadlock trying to synchronize the DefaultAgenda *eager* field, i have seen it only 2 or three times now as it seems very dificult to reproduce.

In our scenario the test is calling *kSession.fireUntilHalt()*  in a new  thread,   then in the main thread waiting for some events to happens (by calling in a loop: kSession.getObjects(new ClassObjectFilter(_clazz)))) and then  doing some other assert checks.

See the stacktrace i took with jstack:

{code}
Java stack information for the threads listed above:
===================================================
""Thread-5"":
	at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:92)
	- waiting to lock <0x00000000ff245780> (a org.drools.core.phreak.RuleExecutor)
	at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:1044)
	- locked <0x00000000ff3dab38> (a org.drools.core.util.LinkedList)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:996)
	at org.drools.core.common.DefaultAgenda.fireUntilHalt(DefaultAgenda.java:1258)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1333)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1310)
	at bar.foo.AIDelayTest$1.run(AIDelayTest.java:101)
	at java.lang.Thread.run(Thread.java:745)
""drools-worker-2"":
	at org.drools.core.common.DefaultAgenda.addEagerRuleAgendaItem(DefaultAgenda.java:287)
	- waiting to lock <0x00000000ff3dab38> (a org.drools.core.util.LinkedList)
	at org.drools.core.reteoo.PathMemory.queueRuleAgendaItem(PathMemory.java:159)
	at org.drools.core.reteoo.PathMemory.doUnlinkRule(PathMemory.java:133)
	- locked <0x00000000ff2457a0> (a org.drools.core.reteoo.PathMemory)
	at org.drools.core.reteoo.PathMemory.unlinkedSegment(PathMemory.java:173)
	at org.drools.core.reteoo.SegmentMemory.unlinkNode(SegmentMemory.java:203)
	at org.drools.core.reteoo.BetaMemory.unlinkNode(BetaMemory.java:100)
	at org.drools.core.reteoo.BetaNode.doDeleteRightTuple(BetaNode.java:377)
	at org.drools.core.reteoo.JoinNode.retractRightTuple(JoinNode.java:107)
	at org.drools.core.reteoo.ObjectTypeNode.doRetractObject(ObjectTypeNode.java:345)
	at org.drools.core.reteoo.ObjectTypeNode.retractObject(ObjectTypeNode.java:337)
	at org.drools.core.reteoo.EntryPointNode.retractObject(EntryPointNode.java:381)
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:615)
	at org.drools.core.base.DefaultKnowledgeHelper.delete(DefaultKnowledgeHelper.java:495)
	at org.drools.core.base.DefaultKnowledgeHelper.retract(DefaultKnowledgeHelper.java:486)
	at bar.foo.Rule_basic$u46$delayExecution$u46$01246876731.defaultConsequence(Rule_basic$u46$delayExecution$u46$01246876731.java:7)
	at bar.foo.Rule_basic$u46$delayExecution$u46$01246876731DefaultConsequenceInvokerGenerated.evaluate(Unknown Source)
	at bar.foo.Rule_basic$u46$delayExecution$u46$01246876731DefaultConsequenceInvoker.evaluate(Unknown Source)
	at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1114)
	- locked <0x00000000ff3da978> (a org.drools.core.common.DefaultAgenda)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:160)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:112)
	- locked <0x00000000ff245780> (a org.drools.core.phreak.RuleExecutor)
	at org.drools.core.phreak.PhreakTimerNode$Executor.qevauateAndFireRule(PhreakTimerNode.java:485)
	at org.drools.core.phreak.PhreakTimerNode$TimerNodeJob$1.run(PhreakTimerNode.java:420)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)

Found 1 deadlock.

{code}",Major,Mario Fusco,,2015-04-28T12:03:46.000-0400,Deadlock trying to synchronize 'eager' field in DefaultAgenda (between drools-worker thread and other),Resolved,bug,Bug
2015-05-14T13:10:17.000-0400,DROOLS-777,Done,"When I use a method with variable number of arguments (e.g., String... args) in MVEL, the first one is passed on, and the others are discarded, leading to confusing and difficult to debug bugs. It should either support this, or report a compilation error.",Major,Mario Fusco,,2015-04-30T11:36:15.000-0400,Variable length argument lists lose arguments in MVEL,Resolved,bug,Bug
2015-05-13T09:04:10.000-0400,DROOLS-782,Done,"I'm receiving a NullPointerException trying to dynamically update the rule definitions inside a KieContainer while a KieSession is running, invoked with KieSession.fireUntilHalt().  We need to leverage KieSession.fireUntilHalt() as all of our rules in this service are timer rules, as we're leveraging drools as a scheduling service here.

The code below shows how I'm testing this.  First I setup two rules to print every 3 and 6 seconds, then execute KieSession.fireUntilHalt().

Then later on I update the KieContainer version with three rules which print out @ 5, 8 and 10 seconds.  I immediately receive a NullPointerException after calling the KieContainer.updateToVersion.

Error:
Exception in thread ""Thread-14"" java.lang.NullPointerException
	at org.drools.core.common.LeftTupleSetsImpl.addAllInserts(LeftTupleSetsImpl.java:185)
	at org.drools.core.common.LeftTupleSetsImpl.addAll(LeftTupleSetsImpl.java:253)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:379)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:161)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:116)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:231)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:106)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1016)
	at org.drools.core.common.DefaultAgenda.fireUntilHalt(DefaultAgenda.java:1258)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1333)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1310)
	at co.bn.sirens.engine.ScheduleRunner$1.run(ScheduleRunner.java:81)
	at java.lang.Thread.run(Thread.java:745)

Code:
   public void run()
    {

        String testRuleAdd = ""rule \""test-rule-add\"" timer (cron: */3 * * * * ?; start=\""4-MAY-2015\"", end=\""30-JUN-2015\"") when eval(true) then System.out.println('Hey there, I print every three seconds'); end "";
        String testRuleAdd2 = ""rule \""test-rule-add-two\"" timer (cron: */6 * * * * ?; start=\""4-MAY-2015\"", end=\""30-JUN-2015\"") when eval(true) then System.out.println('Hey there, I print every six seconds'); end "";
        String testRuleAdd3 = ""rule \""test-rule-add-three\"" timer (cron: */10 * * * * ?; start=\""4-MAY-2015\"", end=\""30-JUN-2015\"") when eval(true) then System.out.println('Hey there, I print every ten seconds'); end "";
        String testRuleAdd4 = ""rule \""test-rule-add-four\"" timer (cron: */5 * * * * ?; start=\""4-MAY-2015\"", end=\""30-JUN-2015\"") when eval(true) then System.out.println('Hey there, I print every five seconds'); end "";
        String testRuleAdd5= ""rule \""test-rule-add-five\"" timer (cron: */8 * * * * ?; start=\""4-MAY-2015\"", end=\""30-JUN-2015\"") when eval(true) then System.out.println('Hey there, I print every eight seconds'); end "";

        try {

            KieServices ks = KieServices.Factory.get();
            KieFileSystem kfs = ks.newKieFileSystem();

            EntityManager em = modelService.createEntityManager();
            List<Schedule> schedules = em
                    .createQuery(""select s from Schedule s where s.enabled = true"", Schedule.class)
                    .getResultList();
            schedules.forEach(s -> System.out.println(s.getPath() + "" : "" + s.getDefinition()));
            schedules.forEach(s -> kfs.write(s.getPath(), s.getDefinition()));

            ArrayList<String> testRules = new ArrayList<String>();
            testRules.add(testRuleAdd);

            kfs.write(""src/main/resources/r1.drl"", testRuleAdd);
            kfs.write(""src/main/resources/r2.drl"", testRuleAdd2);

            KieBuilder kb = ks.newKieBuilder(kfs).buildAll();
            if (kb.getResults().hasMessages(Message.Level.ERROR)) {
                throw new RuntimeException(kb.getResults().toString());
            }

            logger.trace(""repository version: "" + ks.getRepository().getDefaultReleaseId());

            ReleaseId initialReleaseId = ks.getRepository().getDefaultReleaseId();
            KieContainer kc = ks.newKieContainer(initialReleaseId);
            KieSession ksession = kc.newKieSession();
            ksession.setGlobal(""queueService"", queueService);

            new Thread(new Runnable() {
                public void run() {
                    ksession.fireUntilHalt();
                }
            }).start();

            Thread.sleep((10000));

            // Update release version with same KieSession

            ReleaseId relId2 = ks.newReleaseId(""os-rules"", ""test-release-upgrade"", ""1.0.1"");

            KieFileSystem kfs_2 = ks.newKieFileSystem();
            kfs_2.generateAndWritePomXML(relId2);

            // kfs_2.write(""src/main/resources/r1.drl"", testRuleAdd);
            // kfs_2.write(""src/main/resources/r2.drl"", testRuleAdd2);
            kfs_2.write(""src/main/resources/r3.drl"", testRuleAdd3);
            kfs_2.write(""src/main/resources/r4.drl"", testRuleAdd4);
            kfs_2.write(""src/main/resources/r5.drl"", testRuleAdd5);

            KieBuilder kb2 = ks.newKieBuilder(kfs_2).buildAll();
            if (kb2.getResults().hasMessages(org.kie.api.builder.Message.Level.ERROR)) {
                for (org.kie.api.builder.Message result : kb2.getResults().getMessages() ) {
                    System.out.println(result.getText());
                }
                throw new RuntimeException((kb2.getResults().toString()));
            }

            KieModule km = ks.getRepository().getKieModule((relId2));
            kc.updateToVersion(relId2);
            
        } catch (Exception ex) {
            logger.error(""Failed to start the schedule runner: "" + ex.getMessage());
        }
    }",Critical,Mario Fusco,,2015-05-11T15:37:59.000-0400,NullPointerException Updating KieContainer's KieModule Version,Resolved,bug,Bug
2015-05-14T06:45:43.000-0400,DROOLS-778,Done,"I am seeking to compile rules at build-time and then save (serialize) the output to disk.  At deployment, I then wish to build a knowledge base from the deserialized knowledge packages (rather than by re-compiling the source rules files).

In general this works ... unless I use the ""str"" operator in an LHS.  This operator is implemented by the *org.drools.base.evaluators.StrEvaluatorDefinition$StrEvaluator* class and this class does not appear to deserialize properly.

A round trip exercise on my local machine always fails with this error:
{code}
java.io.InvalidClassException: org.drools.base.evaluators.StrEvaluatorDefinition$StrEvaluator; org.drools.base.evaluators.StrEvaluatorDefinition$StrEvaluator; no valid constructor 
{code}

My serialization/deserialization code is standard ... to serialize:
{code}
    private void saveOutput(KnowledgeBuilder kbuilder) throws IOException {
        Collection<KnowledgePackage> kpkgs = kbuilder.getKnowledgePackages();
        String outputFilename = outputFile == null ? """" : outputFile.trim();
        if (outputFilename.isEmpty()) {
            outputFilename = project.getBasedir() + ""target/classes/drools.drlx"";
        }
        ObjectOutputStream out = null;
        try {
            getLog().info(""Saving compiled Drools output to "" + outputFilename);
            out = new ObjectOutputStream(new FileOutputStream(outputFilename));
            out.writeObject(kpkgs);
        } finally {
            if (out != null) {
                out.close();
            }
        }
    }
{code}
... to deserialize:
{code}
    private Collection<KnowledgePackage> deserializeKnowledgePackages(Resource[] knowledgePackageObjects) throws IOException, ClassNotFoundException {
        Collection<KnowledgePackage> knowledgePackages = new ArrayList<KnowledgePackage>();
        for (Resource knowledgePackageObject : knowledgePackageObjects) {
            LOG.info(""Deserializing pre-compiled package "" + knowledgePackageObject.getFilename());
            ObjectInputStream in = null;
            try {
                in = new ObjectInputStream(knowledgePackageObject.getInputStream());
                // The input stream might contain an individual package or a collection.
                knowledgePackages.addAll((Collection<KnowledgePackage>) in.readObject());
            } finally {
                if (in != null) {
                    in.close();
                }
            }
        }
        return knowledgePackages;
    }
{code}

My workaround is to avoid using the ""str"" operator.

*Apologies*: I have *not* checked version 6.2.0.Final because I have not yet worked out what versions of the Drools Spring and Camel modules to use (for 5.5.0.Final they were all versioned identically).",Major,Mario Fusco,,2015-05-01T12:05:00.000-0400,Deserialization error: java.io.InvalidClassException: org.drools.base.evaluators.StrEvaluatorDefinition$StrEvaluator; no valid constructor ,Resolved,bug,Bug
2015-05-12T23:07:57.000-0400,DROOLS-781,Done,"Hi Team,

I am working on Drolls 6.1.0.Final. And my LATEST assets are not getting loaded. We have created a kJar 1.0 with 5 rules in KIE-Workbench 6.1.0.Final. We start our application server with KContainer having ReleaseId(gtoup, Artifact , LATEST). Rules are firing. Now add another rule in workbench increment the kJar version 1.1 and perform build and deploy.  After waiting for 5mins fire the rules in application, LATEST Version IS NOT downloaded in m2 local repo and old rules are getting fired. I even tries with setting maven's update policy as interval:1, but in vain. 

KIE Scanner is only getting triggered if I manually change the latest version and last updated in  metadata.xml in local m2 repo. In this case KIE Scanner loads the new rules.

Kindly let us know what needs to be done.

Similar Issue :
Below JIRA says fixed in 6.1.0.Beta4 but it still exists in 6.1.0.Final
[DROOLS-477] KieScanner is not working as expected - JBoss Issue Tracker",Major,Mario Fusco,,2015-05-07T00:23:01.000-0400,KIE Scanner - 6.1.0.Final - not Loading LATEST kJAR,Closed,bug,Bug
2015-08-06T11:39:27.000-0400,DROOLS-774,Done,"There is an exception when the Kie Scanner is activated. 

It happens when the switchyard-rules-interview-container is deployed on eap.

Exception:

https://gist.github.com/dvirgiln/32bdba1ff39ce6b27438",Major,Mario Fusco,,2015-04-28T07:18:59.000-0400,KieScanner not working on EAP,Resolved,bug,Bug
2015-07-08T03:27:41.000-0400,DROOLS-723,Done,"I have included drools in a shaded jar and when trying to resolve a kjar from a releaseId I get the following exception. I have attached a simple reproducer that will show the error. Build the project then run

{code:shell}
 java -jar target/guice-error-1.0-SNAPSHOT.jar
{code}


Exception:
{code}
Exception in thread ""main"" java.lang.RuntimeException: org.kie.scanner.embedder.MavenEmbedderException: com.google.inject.ProvisionException: Guice provision errors:

1) No implementation for org.apache.maven.repository.RepositorySystem was bound.
  while locating org.apache.maven.execution.DefaultMavenExecutionRequestPopulator
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  while locating org.apache.maven.execution.MavenExecutionRequestPopulator

1 error
      role: org.apache.maven.execution.MavenExecutionRequestPopulator
  roleHint: 
	at org.kie.scanner.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:21)
	at org.kie.scanner.embedder.MavenProjectLoader.loadMavenProject(MavenProjectLoader.java:48)
	at org.kie.scanner.Aether.<init>(Aether.java:44)
	at org.kie.scanner.Aether.getAether(Aether.java:54)
	at org.kie.scanner.MavenRepository.getMavenRepository(MavenRepository.java:45)
	at org.kie.scanner.ArtifactResolver.<init>(ArtifactResolver.java:25)
	at org.kie.scanner.KieRepositoryScannerImpl.getArtifactResolver(KieRepositoryScannerImpl.java:67)
	at org.kie.scanner.KieRepositoryScannerImpl.loadArtifact(KieRepositoryScannerImpl.java:88)
	at org.kie.scanner.KieRepositoryScannerImpl.loadArtifact(KieRepositoryScannerImpl.java:83)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.loadKieModuleFromMavenRepo(KieRepositoryImpl.java:113)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.getKieModule(KieRepositoryImpl.java:99)
	at org.drools.compiler.kie.builder.impl.KieRepositoryImpl.getKieModule(KieRepositoryImpl.java:76)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:84)
	at com.redhat.KnowledgeBaseService.getRuleBase(KnowledgeBaseService.java:28)
	at com.redhat.Main.main(Main.java:11)
Caused by: org.kie.scanner.embedder.MavenEmbedderException: com.google.inject.ProvisionException: Guice provision errors:

1) No implementation for org.apache.maven.repository.RepositorySystem was bound.
  while locating org.apache.maven.execution.DefaultMavenExecutionRequestPopulator
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  while locating org.apache.maven.execution.MavenExecutionRequestPopulator

1 error
      role: org.apache.maven.execution.MavenExecutionRequestPopulator
  roleHint: 
	at org.kie.scanner.embedder.MavenEmbedder.<init>(MavenEmbedder.java:125)
	at org.kie.scanner.embedder.MavenEmbedder.<init>(MavenEmbedder.java:104)
	at org.kie.scanner.embedder.MavenEmbedder.<init>(MavenEmbedder.java:131)
	at org.kie.scanner.embedder.MavenProjectLoader.parseMavenPom(MavenProjectLoader.java:18)
	... 14 more
Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: com.google.inject.ProvisionException: Guice provision errors:

1) No implementation for org.apache.maven.repository.RepositorySystem was bound.
  while locating org.apache.maven.execution.DefaultMavenExecutionRequestPopulator
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  while locating org.apache.maven.execution.MavenExecutionRequestPopulator

1 error
      role: org.apache.maven.execution.MavenExecutionRequestPopulator
  roleHint: 
	at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:257)
	at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:245)
	at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:239)
	at org.kie.scanner.embedder.MavenEmbedder.lookup(MavenEmbedder.java:527)
	at org.kie.scanner.embedder.MavenEmbedder.buildMavenExecutionRequest(MavenEmbedder.java:152)
	at org.kie.scanner.embedder.MavenEmbedder.<init>(MavenEmbedder.java:115)
	... 17 more
Caused by: com.google.inject.ProvisionException: Guice provision errors:

1) No implementation for org.apache.maven.repository.RepositorySystem was bound.
  while locating org.apache.maven.execution.DefaultMavenExecutionRequestPopulator
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  at ClassRealm[maven, parent: ClassRealm[maven-parent, parent: null]]
  while locating org.apache.maven.execution.MavenExecutionRequestPopulator

1 error
	at com.google.inject.internal.InjectorImpl$3.get(InjectorImpl.java:974)
	at org.sonatype.guice.bean.locators.LazyBeanEntry.getValue(LazyBeanEntry.java:83)
	at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:49)
	at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:253)
	... 22 more
{code}",Major,Mario Fusco,,2015-02-20T15:01:49.000-0500,Guice error resolving implementation for RepositorySystem in shaded jar,Resolved,bug,Bug
2015-08-21T04:44:36.000-0400,DROOLS-684,Done,"while creating a decision table in workbench, if we try to upload .XLSX,
java script validation is failing. Alert is showing as ""Upload only .xls"" files.

kindly correct the java script validation.",Major,Toni Rikkola,,2015-01-14T08:59:00.000-0500,Drools Work bench not allowing in .XLSX to upload,Resolved,bug,Bug
2015-05-14T05:57:03.000-0400,DROOLS-753,Done,"Hi,when I use drools do some cep rules.I accour an exception.for more infomation,look at Forum Reference.",Major,Mario Fusco,,2015-03-30T23:25:01.000-0400,org.drools.core.common.DefaultFactHandle cannot be cast to org.drools.core.common.EventFactHandle,Resolved,bug,Bug
2015-08-26T06:12:50.000-0400,DROOLS-765,Done,"When doing incremental builds you will see that memory usage is higher then when you do a fresh start. I have found that the number of instances of RuleImpl in heap when doing incremental builds are double what you would expect. For instance, if I start with 10 rules then there are 10 instances of RuleImpl. If I add 5 more rules instead of 15 instsances of RuleImpl I see 20. This means that incremental rules are using more memory then they should. ",Major,Mario Fusco,,2015-04-21T15:01:12.000-0400,Memory leak with incremental rules,Resolved,bug,Bug
2014-12-15T06:29:51.000-0500,DROOLS-661,Done,"{code}
Tick( $index : tick ) 
accumulate ( $data : Data(),
                     $tot : sum( $data.values[ $index ] ) ) 
{code}

The engine ignores the fact that ""$index"" in the acc function is a join
variable, so it does not re-evaluate the function on a left update",Major,Mario Fusco,,2014-12-06T16:14:24.000-0500,Accumulate functions using join variables are not reevaluated,Resolved,bug,Bug
2015-08-05T08:07:21.000-0400,DROOLS-838,Done,"Same stacktrace as here:
https://bugzilla.redhat.com/show_bug.cgi?id=1200784

(Camel (camelContext) thread #0 - JmsConsumer[inQueue]) null: java.lang.NullPointerException
        at org.kie.scanner.embedder.EmbeddedPomParser.getPomDirectDependencies(EmbeddedPomParser.java:27) [kie-ci-6.2.0.Final.jar:6.2.0.Final]
        at org.kie.scanner.ArtifactResolver.getPomDirectDependencies(ArtifactResolver.java:59) [kie-ci-6.2.0.Final.jar:6.2.0.Final]
        at org.kie.scanner.ArtifactResolver.getAllDependecies(ArtifactResolver.java:64) [kie-ci-6.2.0.Final.jar:6.2.0.Final]
        at org.kie.scanner.KieRepositoryScannerImpl.indexAtifacts(KieRepositoryScannerImpl.java:329) [kie-ci-6.2.0.Final.jar:6.2.0.Final]
        at org.kie.scanner.KieRepositoryScannerImpl.setKieContainer(KieRepositoryScannerImpl.java:73) [kie-ci-6.2.0.Final.jar:6.2.0.Final]
        at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieScanner(KieServicesImpl.java:115) [drools-compiler-6.2.0.Final.jar:6.2.0.Final]

But am using 6.2.0.Final

Code is the basic use case:
		kServices = KieServices.Factory.get();
		releaseId = kServices.newReleaseId( ""com.company"", ""rulesBrmsRepo"", ""LATEST"" );
		kContainer = kServices.newKieContainer( releaseId );
		kScanner = kServices.newKieScanner( kContainer );

//		// Start the KieScanner polling the maven repository every 5 mins
		kScanner.start( 300000L );

Nothing particularly special about the occurrences, but once it happens, it stays broken.  Occurs randomly after a few hours of working without issue.

It sometimes erroneously declares that:
 Environment variable M2_HOME is not set
though I suppose that has to do with using an internal Maven

Another thing is it sometimes looks for the JAR in the plugins repo, which is only mentioned under pluginRepositories in settings.xml.  Why would it look for it there?
",Major,Mario Fusco,,2015-07-05T04:57:12.000-0400,Random NPE using KieScanner,Resolved,bug,Bug
2015-08-06T06:24:17.000-0400,DROOLS-853,Done,"I tested rule contain sliding window. 

But when i deployed the rule to change window time,

I failed hot deploy during window time, and  some data lost.

My drools fusion is 6.2.0 version 

I attached trace result.  

11:32:16,089 ERROR [org.kie.server.services.rest.KieServerRestImpl] (http--0.0.0.0-8080-16) Error calling container 'test': java.lang.RuntimeException: Unexpected exception executing action org.drools.core.impl.StatefulKnowledgeSessionImpl$WorkingMemoryReteExpireAction@133c5d96
 at org.drools.core.impl.StatefulKnowledgeSessionImpl.executeQueuedActions(StatefulKnowledgeSessionImpl.java:1567) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:358) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:289) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:142) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.command.runtime.rule.InsertObjectCommand.execute(InsertObjectCommand.java:88) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.command.runtime.rule.InsertObjectCommand.execute(InsertObjectCommand.java:39) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:155) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:76) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.impl.StatefulKnowledgeSessionImpl.execute(StatefulKnowledgeSessionImpl.java:723) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.impl.StatefulKnowledgeSessionImpl.execute(StatefulKnowledgeSessionImpl.java:697) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.kie.server.services.impl.KieServerImpl.callContainer(KieServerImpl.java:210) [kie-server-services-6.2.0.Final.jar:6.2.0.Final]
 at org.kie.server.services.rest.KieServerRestImpl.execute(KieServerRestImpl.java:85) [kie-server-services-6.2.0.Final.jar:6.2.0.Final]
 at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source) [:1.7.0_75]
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_75]
 at java.lang.reflect.Method.invoke(Method.java:606) [rt.jar:1.7.0_75]
 at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:]
 at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar:]
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
 at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:489) [jbossweb-7.0.13.Final.jar:]
 at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
 at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
 at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
 at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
 at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
 at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
 at java.lang.Thread.run(Thread.java:745) [rt.jar:1.7.0_75]
Caused by: java.lang.ClassCastException: org.drools.core.reteoo.PathMemory cannot be cast to org.drools.core.reteoo.WindowNode$WindowMemory
 at org.drools.core.reteoo.WindowNode.retractRightTuple(WindowNode.java:199) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.reteoo.ObjectTypeNode.doRetractObject(ObjectTypeNode.java:345) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.reteoo.ObjectTypeNode.retractObject(ObjectTypeNode.java:337) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.impl.StatefulKnowledgeSessionImpl$WorkingMemoryReteExpireAction.execute(StatefulKnowledgeSessionImpl.java:1857) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 at org.drools.core.impl.StatefulKnowledgeSessionImpl.executeQueuedActions(StatefulKnowledgeSessionImpl.java:1565) [drools-core-6.2.0.Final.jar:6.2.0.Final]
 ... 39 more

 
",Critical,Mario Fusco,,2015-07-21T02:01:04.000-0400,Change Rule Containing Window Time ,Resolved,bug,Bug
2015-08-05T10:23:39.000-0400,DROOLS-872,Done,"The problem is caused by implementations of org.drools.compiler.compiler.Dialect.analyzeBlock returning null if an error is encountered.  analyzeBlock (and similar methods) is called from a number of places, none of which seem to check the return value.  Null checks could be added to all callers, but might it be better to throw an unchecked exception?  This could be caught further up the stack in org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule where errors and warnings are retrieved from the context.

Does drools or drools-compiler have an exception handling policy?  Is org.drools.compiler.lang.ParseException a suitable exception in this instance?

Example stack trace:

java.lang.NullPointerException
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.buildAccumulator(JavaAccumulateBuilder.java:237)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.buildExternalFunctionCall(JavaAccumulateBuilder.java:172)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:107)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:72)
	at org.drools.compiler.rule.builder.PatternBuilder.processSource(PatternBuilder.java:311)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:181)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:146)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:127)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:63)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:99)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1759)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1047)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:925)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:918)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:459)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addKnowledgeResource(KnowledgeBuilderImpl.java:679)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2204)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2193)
	at org.drools.compiler.CommonTestMethodBase.loadKnowledgeBaseFromString(CommonTestMethodBase.java:110)
	at org.drools.compiler.integrationtests.AccumulateTest.getKieSessionFromContentStrings(AccumulateTest.java:3014)
	at org.drools.compiler.integrationtests.AccumulateTest.testAccumulateWithCompilationError(AccumulateTest.java:1969)",Major,Mario Fusco,,2015-08-05T08:08:23.000-0400,Certain errors in accumulate functions cause compiler to throw NPE,Resolved,bug,Bug
2015-08-06T11:30:49.000-0400,DROOLS-851,Done,"When passing a global as an argument to a query the following exception is thrown:

{code}
Exception in thread ""main"" java.lang.ClassCastException: org.drools.core.spi.GlobalExtractor cannot be cast to org.drools.core.base.extractors.ArrayElementReader
        at org.drools.core.reteoo.QueryElementNode.createDroolsQuery(QueryElementNode.java:216)
        at org.drools.core.phreak.PhreakQueryNode.doLeftInserts(PhreakQueryNode.java:74)
        at org.drools.core.phreak.PhreakQueryNode.doNode(PhreakQueryNode.java:54)
        at org.drools.core.phreak.RuleNetworkEvaluator.evalQueryNode(RuleNetworkEvaluator.java:460)
        at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:360)
        at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:228)
        at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:171)
        at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123)
        at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
        at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
        at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:973)
        at org.drools.core.common.DefaultAgenda.fireUntilHalt(DefaultAgenda.java:1251)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1353)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1331)
{code}",Major,Mario Fusco,,2015-07-17T13:13:03.000-0400,CCE when passing a global as an argument to a query,Resolved,bug,Bug
2015-09-17T05:26:31.000-0400,DROOLS-796,Done,"The KieScanner is used on Switchyard (layer of drools). It is failing for certains cases.

In the example attached, this is the error obtained when the kieScanner tires to read the pom.xml of the project uploadded to the maven repo:

https://gist.github.com/dvirgiln/e5c69afc7434367e04c1

This is executed on EAP.",Major,Mario Fusco,,2015-05-28T09:00:35.000-0400,Native maven pom parser doesn't work under OSGi,Resolved,bug,Bug
2015-11-10T05:29:26.000-0500,DROOLS-923,Done,KieRepository is not thread safe so concurrently adding and removing KieModules could lead to a NPE.,Major,Mario Fusco,,2015-09-18T04:31:56.000-0400,KieRepository is not thread safe,Resolved,bug,Bug
2015-10-26T06:28:34.000-0400,DROOLS-935,Done,Unable to properly deploy Execution server into tomcat7 container.,Major,Maciej Swiderski,,2015-10-01T17:01:05.000-0400,tomcat7 unable to deploy Execution server,Resolved,bug,Bug
2015-10-27T03:46:55.000-0400,DROOLS-965,Done,"On incremental-update, when you change the filename of the DRL in a KJAR, an NPE is thrown:
{code}
testAddedRulesDifferentDrl(org.jboss.ddoyle.drools.incrementalupdate.KieSessionRulesIncrementalUpdateAddedRulesTest)  Time elapsed: 0.548 sec  <<< ERROR!
java.lang.NullPointerException
	at org.drools.core.reteoo.NodeTypeEnums.isBetaNode(NodeTypeEnums.java:88)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:254)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:978)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260)
	at org.jboss.ddoyle.drools.incrementalupdate.KieSessionRulesIncrementalUpdateAddedRulesTest.testAddedRulesDifferentDrl(KieSessionRulesIncrementalUpdateAddedRulesTest.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
<project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
{code}
",Major,Mario Fusco,,2015-10-26T06:39:45.000-0400,Incremental update throws NPE when DRL filename changes.,Closed,bug,Bug
2015-11-05T10:33:47.000-0500,DROOLS-953,Done,"Rules using 'from window length' refire incorrectly after session deserialization.

Full story on usage forum.
https://groups.google.com/forum/#!topic/drools-usage/kTHTVXZznxw

In summary...
Insert facts Event#1, Event#2, Event#3 into a stateful, psuedo clock stream session with...

declare window lastEvent
    Event() over window:length(1)
end

rule ""Reporting Last Event 1001""
when		
	$e : Event($eventCode : eventCode == ""1001"") from window lastEvent
then					
	log.info(""Reporting Last Event 1001 : "" + $e);
end

The rule ""Reporting Last Event"" will refire after deserialization from disk for Events #1+#2

Demonstrated with the attached reproducer window-demo. Run the JUnit test to get this console output...

 INFO 17:25:40 [org.kev.KnowledgeSession] creating kcontainer
 INFO 17:25:40 [org.drools.compiler.kie.builder.impl.ClasspathKieProject] Found kmodule: file:/C:/Users/Kevin/workspace_luna/window-demo/target/classes/META-INF/kmodule.xml
 INFO 17:25:40 [org.drools.compiler.kie.builder.impl.KieRepositoryImpl] KieModule was added: FileKieModule[releaseId=org.kev:window-demo:0.0.1-SNAPSHOT,file=C:\Users\Kevin\workspace_luna\window-demo\target\classes]
 INFO 17:25:42 [org.kev.KnowledgeSession] no messages from kContainer
 INFO 17:25:42 [org.kev.KnowledgeSession] KieSession sessionDefault is OK {color:#59afe1}INSERTING Event OBJECTS CAUSES RULES TO FIRE NICELY{color}....
 INFO 17:25:42 [org.kev.KnowledgeSession] Reporting Last Event 1001 : Event [eventCode=1001, recordedTime=13-10-15 17:25:39.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Event Insert : Event [eventCode=1001, recordedTime=13-10-15 17:25:39.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Rules Fired : 2
 INFO 17:25:42 [org.kev.KnowledgeSession] Reporting Last Event 1001 : Event [eventCode=1001, recordedTime=13-10-15 17:25:40.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Event Insert : Event [eventCode=1001, recordedTime=13-10-15 17:25:40.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Rules Fired : 2
 INFO 17:25:42 [org.kev.KnowledgeSession] Reporting Last Event 1001 : Event [eventCode=1001, recordedTime=13-10-15 17:25:41.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Event Insert : Event [eventCode=1001, recordedTime=13-10-15 17:25:41.904]
 INFO 17:25:42 [org.kev.KnowledgeSession] Rules Fired : 2
 INFO 17:25:42 [org.kev.ReplayTests] Fire All Rules Before Save............  {color:#59afe1}NO MESSAGES HERE. SHOWS NO OUTSTANDING RULES TO FIRE IN SESSION.{color}
 INFO 17:25:42 [org.kev.ReplayTests] Saving Session............ {color:#59afe1}NOW WE SAVE TO DISK{color}
 INFO 17:25:42 [org.kev.KnowledgeSession] Marshalling ksession to disk : C:\Users\Kevin\workspace_luna\window-demo\demo.ks
 INFO 17:25:43 [org.kev.ReplayTests] Restoring Session............ {color:#59afe1}AND HERE'S THE RESTORE OF A NEW SESSION FROM DISK{color}
 INFO 17:25:43 [org.kev.KnowledgeSession] no messages from kContainer
 INFO 17:25:43 [org.kev.KnowledgeSession] KieSession sessionDefault is OK
 INFO 17:25:43 [org.kev.KnowledgeSession] Marshall ksession from disk : C:\Users\Kevin\workspace_luna\window-demo\demo.ks
 INFO 17:25:43 [org.kev.KnowledgeSession] pseudoClock is recovered to :13-10-15 17:25:41.904 ...{color:#59afe1}ALL GOOD SO FAR, BUT NOW I FIRE ALL RULES{color}
 INFO 17:25:43 [org.kev.ReplayTests] Fire All Rules After Restore (1)............{color:#d04437}THESE NEXT MESSAGES ARE UNEXPECTED. IT'S THE FIRST 2 EVENTS THAT I'D ORIGINALLY INSERTED. But, nothing has been inserted since the restore.{color}
 INFO 17:25:43 [org.kev.KnowledgeSession] Reporting Last Event 1001 : Event [eventCode=1001, recordedTime=13-10-15 17:25:39.904]
 INFO 17:25:43 [org.kev.KnowledgeSession] Reporting Last Event 1001 : Event [eventCode=1001, recordedTime=13-10-15 17:25:40.904]
 INFO 17:25:43 [org.kev.ReplayTests] Fire All Rules After Restore (2)............{color:#59afe1}ANOTHER FIRE ALL RULES AND NORMAL BEHAVIOUR RETURNS{color}


Consequence is that RHS fires unexpectedly for facts that have already been handled before serialization.

KP",Minor,Mario Fusco,,2015-10-15T22:36:36.000-0400,Rules from declare window refire after deserialization,Resolved,bug,Bug
2016-09-01T06:35:15.000-0400,DROOLS-1266,Done,"Consider the following reproducer:

{code:java}
    @Test
    public void testPrimitives() {
        String drl =
                ""import org.drools.compiler.xpath.*;\n"" +
                ""global java.util.List list\n"" +
                ""\n"" +
                ""rule R when\n"" +
                ""  Adult( $x: /children.age )\n"" +
                ""then\n"" +
                ""  list.add( $x );\n"" +
                ""end\n"";
        
        System.out.println(drl);

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build()
                                             .newKieSession();

        List<String> list = new ArrayList<String>();
        ksession.setGlobal( ""list"", list );

        Man bob = new Man( ""Bob"", 40 );
        bob.addChild( new Child( ""Charles"", 12 ) );
        bob.addChild( new Child( ""Debbie"", 8 ) );

        ksession.insert( bob );
        ksession.fireAllRules();
        
        assertEquals(2, list.size());

    }
{code}

these reproducer/test fails. Does not provide any match of the primitive type returned by {{age}}.

Please note if the rule was instead:

{code:java}
rule R when
  Adult( $x: /children.name )
then
  ...
{code}

the test would pass.

Hence appears OOPath is not matching on the primitive types?",Major,Mario Fusco,,2016-08-30T12:40:45.000-0400,OOPath use with primitives does not return any match,Resolved,bug,Bug
2015-09-21T21:51:41.000-0400,DROOLS-880,Done,"Kie_server returns a success rest response status code, but nothing show up in my log file.
It seems to be not running only in ""6.3.0.CR1"". (The rules work ""6.2.0.Final"")",Major,Edson Tirelli,,2015-08-12T22:45:26.000-0400,Return a success response but the rule seems to be not running.,Closed,bug,Bug
2015-08-17T03:33:23.000-0400,DROOLS-883,Done,"Calling kcontainer.updateToVersion() under load causes a deadlock. See attached reproducer and thread dump.
{noformat}
Found one Java-level deadlock:
=============================
""pool-8-thread-11"":
  waiting for ownable synchronizer 0x00000007bd812568, (a java.util.concurrent.locks.ReentrantLock$NonfairSync),
  which is held by ""pool-8-thread-4""
""pool-8-thread-4"":
  waiting for ownable synchronizer 0x000000070a08e9f8, (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync),
  which is held by ""pool-8-thread-1""
""pool-8-thread-1"":
  waiting for ownable synchronizer 0x00000007bd812568, (a java.util.concurrent.locks.ReentrantLock$NonfairSync),
  which is held by ""pool-8-thread-4""

Java stack information for the threads listed above:
===================================================
""pool-8-thread-11"":
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0x00000007bd812568> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:867)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1197)
	at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
	at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
	at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:190)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1477)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1432)
	at com.sample.CallKjarTest$2.run(CallKjarTest.java:66)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
""pool-8-thread-4"":
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0x000000070a08e9f8> (a java.util.concurrent.locks.ReentrantReadWriteLock$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:964)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1282)
	at java.util.concurrent.locks.ReentrantReadWriteLock$ReadLock.lock(ReentrantReadWriteLock.java:731)
	at org.drools.core.impl.KnowledgeBaseImpl.readLock(KnowledgeBaseImpl.java:700)
	at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:191)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1477)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1432)
	at com.sample.CallKjarTest$2.run(CallKjarTest.java:66)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
""pool-8-thread-1"":
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  <0x00000007bd812568> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:867)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1197)
	at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
	at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:481)
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:468)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl$WorkingMemoryReteExpireAction.execute(StatefulKnowledgeSessionImpl.java:1779)
        at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
        at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:69)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2007)
        at org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:153)
        at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:161)
        at org.drools.core.reteoo.ReteooBuilder.removeRule(ReteooBuilder.java:155)
        - locked <0x00000007bd7cbfd8> (a org.drools.core.reteoo.ReteooBuilder)
        at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1608)
        at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1599)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.preProcessRules(KnowledgeBuilderImpl.java:1141)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1084)
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:967)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:256)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:120)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:104)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:369)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:207)
        at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:128)
        at com.sample.CallKjarTest$1.run(CallKjarTest.java:45)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:745)

Found 1 deadlock.
{noformat}
",Major,Mario Fusco,,2015-08-17T00:56:10.000-0400,Deadlock with kcontainer.updateToVersion() under load,Resolved,bug,Bug
2014-12-18T11:36:26.000-0500,DROOLS-671,Done,"Trying to serialize a KnowledgeBase created with the legacy 5.x API causes the following exception.

java.io.NotSerializableException: org.drools.impl.adapters.KnowledgeBaseAdapter
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)",Major,Mario Fusco,,2014-12-18T11:34:14.000-0500,KnowledgeBaseAdapter in legacy 5.x API is not serializable,Resolved,bug,Bug
2015-12-04T04:16:36.000-0500,DROOLS-984,Done,"Defining an event with @expires( -1 ) should disable event expiration. However, when configuring my event like this:
{code}
declare SimpleEvent
    @role( event )
    @timestamp( logicalTimestamp )
    @expires( -1 )
end
{code}

and having a rule like this:
{code}
rule ""rule_1""
    when
       $s: SimpleEvent ()
       not SimpleEvent (this != $s, this after[0, 30s] $s)
    then
       System.out.println(""No event within 30 seconds of this event: "" + $s.getId());
end
{code}

the event is still expired and retracted from WM after 30 seconds (the expiration time inferred from the temporal constraint in the rule).

Reproducer can be found here: https://github.com/DuncanDoyle/drools-disable-expiration-issue
Run 'mvn clean test' to reproduce.
",Major,Mario Fusco,,2015-11-19T12:01:13.000-0500,@expires( -1 ) should disable Event expiration,Resolved,bug,Bug
2015-12-02T11:32:44.000-0500,DROOLS-986,Done,"The problem seems to be in the line 504 of the init() method of RuleBaseConfiguration, which should be moved to the beginning of the method or at least before  
setPhreakEnabled () is called in line 495",Major,Mario Fusco,,2015-11-20T10:32:01.000-0500,Failed Initialization using RETEOO in 6.3,Closed,bug,Bug
2016-07-28T11:03:02.000-0400,DROOLS-1232,Done,As described in the [original forum post|https://groups.google.com/forum/#!topic/drools-usage/WLHxG8SX3vk] calling (drools.getKieRuntime().){{getQueryResults()}} from RHS would hang indefinitely on 6.4.0.Final.,Major,Matteo Mortari,,2016-07-20T11:43:30.000-0400,calling getQueryResults() from RHS would hang indefinitely.,Resolved,bug,Bug
2016-07-28T11:45:23.000-0400,DROOLS-1103,Done,"Under very rare circumstance we have found the following exception *java.util.concurrent.RejectedExecutionException* in our production log.

Our guess is that the Drools Session is on its way to be dispose, while a new incoming request is in the middle of a fireAllRules operation (race condition).

I will try to provide a reproducible testcase for this.

{code}
Caused by: java.util.concurrent.RejectedExecutionException: Task java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@3e896443 rejected from java.util.concurrent.ScheduledThreadPoolExecutor@71cc2f4c[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0]
        at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2047)
        at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:823)
        at java.util.concurrent.ScheduledThreadPoolExecutor.delayedExecute(ScheduledThreadPoolExecutor.java:326)
        at java.util.concurrent.ScheduledThreadPoolExecutor.schedule(ScheduledThreadPoolExecutor.java:549)
        at org.drools.core.time.impl.JDKTimerService.internalSchedule(JDKTimerService.java:118)
        at org.drools.core.time.impl.JDKTimerService.scheduleJob(JDKTimerService.java:101)
        at org.drools.core.phreak.PhreakTimerNode.scheduleTimer(PhreakTimerNode.java:304)
        at org.drools.core.phreak.PhreakTimerNode.scheduleLeftTuple(PhreakTimerNode.java:233)
        at org.drools.core.phreak.PhreakTimerNode.doLeftUpdates(PhreakTimerNode.java:131)
        at org.drools.core.phreak.PhreakTimerNode.doNode(PhreakTimerNode.java:65)
        at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:357)
        at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:161)
        at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:116)
        at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
        at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:67)
        at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:935)
        at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1200)
        at org.drools.core.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:957)
        at org.drools.core.common.AbstractWorkingMemory.fireAllRules(AbstractWorkingMemory.java:936)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:260)
        at XXXXXX.XXXXX.XXXXX.processEventDrools(EventProcessorImpl.java:128)
        at XXXXXX.XXXXX.XXXXX.processEvent(EventProcessorImpl.java:101)
{code} ",Major,Mario Fusco,,2016-03-23T07:52:27.000-0400,FireAllRules can trigger java.util.concurrent.RejectedExecutionException from the JDKTimerService,Resolved,bug,Bug
2015-06-15T12:51:47.000-0400,DROOLS-818,Done,"Listener declared in kmodule.xml as in the following snippet of XML works on stateful KieSession, but are not registered on stateless ones.

{code}
    <ksession name=""statelessKieSession1"" type=""stateless"">
      <listeners>
        <ruleRuntimeEventListener type=""com.esrx.ref.testproject.TestRuleRuntimeEventListener""/>
      </listeners>
    </ksession>
{code}
",Major,Mario Fusco,,2015-06-15T12:38:25.000-0400,Listeners declared in kmodule.xml are not registered in StatelessKieSession,Resolved,bug,Bug
2015-06-16T04:01:53.000-0400,DROOLS-814,Done,"""Declares"" do not support the following use case:

{code}
declare A 
  fld : Object
end

declare B extends A
  fld : String   // more specific type
end
{code}
  ",Major,Mario Fusco,,2015-06-12T14:08:02.000-0400,"Unable to redeclare classes with more specific, overriding accessors",Resolved,bug,Bug
2015-07-02T05:25:38.000-0400,DROOLS-815,Done,"Verify that deeply nested classes can be handled correclty, even in edge cases

{code}
public class Foo {
    public static class $X {
        public static class $Y {
        }
    }
}
{code}",Minor,Mario Fusco,,2015-06-13T14:22:43.000-0400,Ensure type declarations can handle inner classes,Resolved,bug,Bug
2015-07-24T13:16:48.000-0400,DROOLS-812,Done,"When using Drools with glassfish 3.
When stopping the server, An exception is thrown with the following stack trace.
It seems that the InputStream that is opened on JavaRuleBuilderHelper#getRuleTemplateRegistry is not closed.


[#|2015-05-26T11:15:37.408+0300|WARNING|glassfish3.1|javax.enterprise.system.core.classloading.com.sun.enterprise.loader|_ThreadID=67;_ThreadName=Thread-3;|Input stream has been finalized or forced closed without being explicitly closed; stream instantiation reported in following stack trace
java.lang.Throwable
	at com.sun.enterprise.loader.ASURLClassLoader$SentinelInputStream.<init>(ASURLClassLoader.java:1230)
	at com.sun.enterprise.loader.ASURLClassLoader$InternalJarURLConnection.getInputStream(ASURLClassLoader.java:1338)
	at java.net.URL.openStream(URL.java:1010)
	at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1200)
	at com.sun.enterprise.loader.ASURLClassLoader.getResourceAsStream(ASURLClassLoader.java:872)
	at java.lang.Class.getResourceAsStream(Class.java:2066)
	at org.drools.compiler.rule.builder.dialect.java.JavaRuleBuilderHelper.getRuleTemplateRegistry(JavaRuleBuilderHelper.java:48)
	at org.drools.compiler.rule.builder.dialect.java.JavaRuleBuilderHelper.generateMethodTemplate(JavaRuleBuilderHelper.java:214)
	at org.drools.compiler.rule.builder.dialect.asm.AbstractASMEvalBuilder.buildEval(AbstractASMEvalBuilder.java:81)
	at org.drools.compiler.rule.builder.dialect.asm.AbstractASMEvalBuilder.build(AbstractASMEvalBuilder.java:63)
	at org.drools.compiler.rule.builder.ConditionalBranchBuilder.build(ConditionalBranchBuilder.java:37)
	at org.drools.compiler.rule.builder.ConditionalBranchBuilder.build(ConditionalBranchBuilder.java:22)
	at org.drools.compiler.rule.builder.ConditionalBranchBuilder.build(ConditionalBranchBuilder.java:19)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:99)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1727)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1022)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:900)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:301)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:107)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:91)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:223)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:49)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:219)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:190)

	
|#]
",Major,Petr Široký,,2015-06-11T03:11:33.000-0400,An exception is thrown on glassfish 3 on stop server,Resolved,bug,Bug
2015-07-07T13:26:55.000-0400,DROOLS-795,Done,"When the marshall serializes a timer it doesn't take count of how much time it is already passed, so when the timer is deserialized it restart from it start time. The following failing test case reproduces the problem.

{code}
    @Test
    public void testMarshallWithTimedRule() {

        String drl = ""rule \""Rule A Timeout\""\n"" +
                     ""when\n"" +
                     ""    String( this == \""ATrigger\"" )\n"" +
                     ""then\n"" +
                     ""   insert (new String( \""A-Timer\"") );\n"" +
                     ""System.out.println(\""+++++++Got ATrigger, started A-Timer with 5s timeout\"");\n"" +
                     ""end\n"" +
                     ""\n"" +
                     ""rule \""Timer For rule A Timeout\""\n"" +
                     ""    timer ( int: 5s )\n"" +
                     ""when\n"" +
                     ""   String( this == \""A-Timer\"")\n"" +
                     ""then\n"" +
                     ""   delete ( \""A-Timer\"" );\n"" +
                     ""   delete ( \""ATrigger\"" );\n"" +
                     ""System.out.println(\""******* reset rule A based on timer\"");\n"" +
                     ""end\n"";

        KieBase kbase = new KieHelper().addContent( drl, ResourceType.DRL )
                                       .build( EqualityBehaviorOption.EQUALITY,
                                               DeclarativeAgendaOption.ENABLED,
                                               EventProcessingOption.STREAM );

        KieSessionConfiguration sessionConfig = KnowledgeBaseFactory.newKnowledgeSessionConfiguration();
        sessionConfig.setOption( ClockTypeOption.get( ""pseudo"" ) );
        KieSession ksession = kbase.newKieSession(sessionConfig, null);

        ksession.insert( new String( ""ATrigger"" ) );

        assertEquals( 1, ksession.getFactCount() );
        ksession.fireAllRules();
        assertEquals( 2, ksession.getFactCount() );

        SessionPseudoClock clock = ksession.getSessionClock();
        clock.advanceTime( 4, TimeUnit.SECONDS );

        assertEquals( 2, ksession.getFactCount() );
        ksession.fireAllRules();
        assertEquals( 2, ksession.getFactCount() );

        ksession = marshallAndUnmarshall( kbase, ksession, sessionConfig);
        clock = ksession.getSessionClock();

        clock.advanceTime( 4, TimeUnit.SECONDS );

        assertEquals( 2, ksession.getFactCount() );
        ksession.fireAllRules();
        assertEquals( 0, ksession.getFactCount() );
    }

    public static KieSession marshallAndUnmarshall(KieBase kbase, KieSession ksession, KieSessionConfiguration sessionConfig) {
        // Serialize and Deserialize
        try {
            Marshaller marshaller = KieServices.Factory.get().getMarshallers().newMarshaller(kbase);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            marshaller.marshall(baos, ksession);
            marshaller = MarshallerFactory.newMarshaller( kbase );
            ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
            baos.close();
            ksession = marshaller.unmarshall(bais, sessionConfig, null);
            bais.close();
        } catch (Exception e) {
            e.printStackTrace();
            fail(""unexpected exception :"" + e.getMessage());
        }
        return ksession;
    }
{code}",Major,Mario Fusco,,2015-05-27T10:28:39.000-0400,Timers are reset during the serialization process,Resolved,bug,Bug
2015-07-29T11:23:35.000-0400,DROOLS-813,Done,"The CXF version that is used by drools (6.2.0.Final-redhat-6) is 2.7.x

https://github.com/jboss-integration/fuse-bxms-integ/blob/6.2.x/drools-osgi/drools-karaf-features/src/main/filtered-resources/repository/features.xml#L7

In Fuse by default they are included the cxf jars. The version used is 3.0.x-redhat

This causes errors when the kie camel quickstarts are installed.

Error executing command: Could not start bundle mvn:org.jboss.integration.fuse/kie-camel/1.0.0.redhat-6-2-0-SNAPSHOT in feature(s) fuse-bxms-kie-camel-1.0.0.redhat-6-2-0-SNAPSHOT: Uses constraint violation. Unable to resolve bundle revision org.kie.camel [321.0] because it is exposed to package 'org.apache.cxf.service.model' from bundle revisions org.apache.cxf.cxf-api [312.0] and org.apache.cxf.cxf-core [118.0] via two dependency chains.

Chain 1:
org.kie.camel [321.0]
import: (&(osgi.wiring.package=org.apache.cxf.service.model)(version>=2.7.0)(!(version>=3.0.0)))

export: osgi.wiring.package=org.apache.cxf.service.model
org.apache.cxf.cxf-api [312.0]

Chain 2:
org.kie.camel [321.0]
import: (&(osgi.wiring.package=org.apache.camel.component.cxf)(version>=2.15.0)(!(version>=3.0.0)))

export: osgi.wiring.package=org.apache.camel.component.cxf; uses:=org.apache.cxf.service.model
org.apache.camel.camel-cxf [207.0]
import: (&(osgi.wiring.package=org.apache.cxf.service.model)(version>=2.7.0)(!(version>=4.0.0)))

export: osgi.wiring.package=org.apache.cxf.service.model
org.apache.cxf.cxf-core [118.0]
",Major,Petr Široký,,2015-06-12T11:59:21.000-0400,Align cxf version with the version used on fuse,Resolved,bug,Bug
2015-07-27T05:14:21.000-0400,DROOLS-806,Done,"There are a few of jars that are used in fuse-integration (switchyard) that I tried to remove and use the features from the drools features file. 

I realized for the version 6.2.0.Final these dependencies are not included as features on the kie/drools file:

        <bundle>wrap:mvn:org.jbpm/jbpm-executor/${version.org.jbpm}$DynamicImport-Package=org.hibernate.*,javassist.*</bundle>
        <bundle>wrap:mvn:org.jbpm/jbpm-workitems/${version.org.jbpm}</bundle>
        <bundle>wrap:mvn:org.kie/kie-ci/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-client/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-common/${version.org.kie}</bundle>
        <bundle>wrap:mvn:org.kie.remote/kie-remote-jaxb/${version.org.kie}</bundle>",Major,Mario Fusco,,2015-06-02T11:08:13.000-0400,Include some kie/jbpm dependencies as features ,Resolved,bug,Bug
2015-06-16T09:47:07.000-0400,DROOLS-801,Done,Running the JUnit attached to this issue causes a Java ClassCastException,Major,Mario Fusco,,2015-06-01T17:47:14.000-0400,Attempt to remove KnowledgePackage causes ClassCastException,Resolved,bug,Bug
2015-06-03T13:54:47.000-0400,DROOLS-798,Done,"If you try to reload a Guided Score Card in either of the Workbenches the ""Resultant Score"" field is always reset. Furthermore subsequent loading of a file does not clear the Collections used to hold Characteristics used by the UI and hence the more you re-open the file the more and more Characteristics are accumulated.",Major,Michael Anstis,,2015-05-28T09:59:57.000-0400,Guided Score Card: Issues re-loading previously saved files,Resolved,bug,Bug
2015-05-29T11:22:28.000-0400,DROOLS-800,Done,"I declare my events in a DRL that is different from the DRL that contains my rules. I declare my event with @propertyReactive. In my rule I use an @watch annotation. In JBoss BRMS 6.1 / Drools 6.2+, this causes an error when building my KieBase:

{code}
java.lang.RuntimeException: Error while creating KieBase[Message [id=1, level=ERROR, path=rules.drl, line=7, column=0
   text=Wrong usage of @Watch annotation on class org.jboss.ddoyle.drools.propreactive.model.Event1 that is not annotated as @PropertyReactive]]
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:418)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:396)
{code}

The interesting thing is that the error only occurs if I give my DRL with my 'declare' a certain name. I.e. if I name it 'a.drl', building the KieBase fails, if I name it 'ab.drl', it succeeds.

A reproducer can be found here: https://github.com/DuncanDoyle/drools-propreactive-kiebase-build-issue

Just run a 'mvn clean test' on the project.",Major,Mario Fusco,,2015-05-29T09:04:51.000-0400,KieBase compilation fails when @PropertyReactive declared in different DRL,Resolved,bug,Bug
2016-04-11T09:42:04.000-0400,DROOLS-1078,Done,"Drools will incorrectly generate Java code to access a method on a wrong reference type, hence resulting in a rule compilation error.

Taking the following rule as example (which is also attached), 
{code}
import bug.demo.Table;
import bug.demo.Constants;
import bug.demo.Player;
import bug.demo.event.GenericEvent;
import bug.demo.api.model.Card;

rule ""BuggyRule""
when
    $discardCardEvent : GenericEvent(eventName==""fooEvent"",
    						$discardedCard : Card.fromMap(getEventProperty(""fooCard"")),
                            Constants.FOO_RANK.contains($discardedCard.getRank()),
                            $playerIndex : slotIndex) from entry-point ""foo-stream""
    $table : Table($currentPlayer : getCurrentPlayer())
then
    $table.addToDiscardPile($discardedCard);
    $table.reset();
    $currentPlayer.removeCard($discardedCard);
end
{code}

In this case when compiling the following rule, we may end up (sometimes) with compilation error:
*The method removeCard(Card) is undefined for the type TurnbasedPlayer* , when a Player type should be used in first place.

Attached is sample project to reproduce the problem, be aware that you may need to do *mvn clean test* several times until you actually trigger the problem, if you are lucky enough it will get trigger the first time you execute it.

Environment:
{code}
>mvn -version
Apache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T18:29:23+01:00)
Maven home: /usr/share/maven
Java version: 1.7.0_79, vendor: Oracle Corporation
Java home: /usr/lib/jvm/jdk-7-oracle-x64/jre
Default locale: en_US, platform encoding: UTF-8
OS name: ""linux"", version: ""3.13.0-77-generic"", arch: ""amd64"", family: ""unix""
{code}",Major,Mario Fusco,,2016-03-01T09:33:29.000-0500,Drools can incorrectly generate Java code to access a method on a wrong reference type for a covariant return,Resolved,bug,Bug
2016-04-03T15:25:43.000-0400,DROOLS-1035,Done,"The top-level description in the KIE API javadoc is greatly outdated. It refers to internal packages and old (and deprecated/unsupported) terms like KnowledgeBase and KnowledgeAgent. This needs to be fixed to use only the public KIE API.

This is the first sentence currently in there:

{code}
The most common interfaces you will use are:

org.kie.internal.builder.KnowledgeBuilder
org.kie.internal.KnowledgeBase
org.kie.internal.agent.KnowledgeAgent
org.kie.internal.runtime.StatefulKnowledgeSession
org.kie.internal.runtime.StatelessKnowledgeSession
{code}",Major,Petr Široký,,2016-01-20T07:50:01.000-0500,Fix outdated description in KIE API javadoc,Resolved,bug,Bug
2016-04-04T08:16:21.000-0400,DROOLS-1059,Done,"In my knowledge base, I have many rules. 
All of them are working very well in production with drools 6.0.1-FINAL even in stress condition hight trafic (arount 40 hits seconds)

This bug append when we made an upgrade with drools 6.3.0-FINAL which is compatible with jdk8 mandatory in my case.

So now when I put my rules under stress test (benchmarking) I got this random error.
Drools is unable to find a query (not always the same one).
I got this error for 0,6% of my requests.

*+Following the stack trace : +*
Unable to find query 'checkAndBindBasket'
	at org.drools.core.phreak.SegmentUtilities.getQueryLiaNode(SegmentUtilities.java:518) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.SegmentUtilities.getQuerySegmentMemory(SegmentUtilities.java:208) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.SegmentMemory$QueryMemoryPrototype.populateMemory(SegmentMemory.java:505) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.SegmentMemory$Prototype.newSegmentMemory(SegmentMemory.java:400) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.impl.KnowledgeBaseImpl.createSegmentFromPrototype(KnowledgeBaseImpl.java:1424) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.SegmentUtilities.restoreSegmentFromPrototype(SegmentUtilities.java:186) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.SegmentUtilities.createSegmentMemory(SegmentUtilities.java:83) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.LeftInputAdapterNode.assertObject(LeftInputAdapterNode.java:167) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:60) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:60) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:145) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:298) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:93) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:69) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:1993) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1289) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281) ~[darty-pricing-ws-2.0.2.jar:2.0.2]
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260) ~[darty-pricing-ws-2.0.2.jar:2.0.2]







",Blocker,Mario Fusco,,2016-02-10T12:01:48.000-0500,Drools can't find rules under stress,Resolved,bug,Bug
2016-04-13T14:07:17.000-0400,DROOLS-1075,Done,"When defining any type of bean inside the tag kie:batch, seems that nothing gets executed. I added a reference to a bean to be identified by a global variable in a rule and this global always get null.

this is an example of configuration:
<kie:batch>
<kie:set-global identifier=""droolsCamelHelper"">
                    <bean class=""com.redhat.gpe.coursecompletion.util.DroolsCamelHelper""/>
</kie:set-global>
</kie:batch>

Also looking to the tests in the kie-spring component source code the list is define in the configurations as follows:

https://github.com/droolsjbpm/droolsjbpm-integration/blob/953263b9f6bf7f9fe1df8d984a110d68fd148676/kie-spring/src/test/resources/org/kie/spring/beans-commands.xml#L35

But the rule tests if it's null:
https://github.com/droolsjbpm/droolsjbpm-integration/blob/953263b9f6bf7f9fe1df8d984a110d68fd148676/kie-spring/src/test/resources/drl_kiesample/Hal1.drl#L39-L41

So this error never raises.

 
",Major,Mario Fusco,,2016-02-29T18:12:52.000-0500,kie-spring component does not execute batch commands,Resolved,bug,Bug
2016-03-18T09:45:52.000-0400,DROOLS-1096,Done,There are incompatibilities and conflicts with camel. The camel module that it is used should be removed,Major,David virgil naranjo,,2016-03-17T10:50:04.000-0400,Kie Camel not working on Fuse 6.3 EAP.,Resolved,bug,Bug
2016-04-21T03:46:00.000-0400,DROOLS-1079,Done,"It is not possible to open organizational units and display associated repositories. Also when you create a new repository in org unit, it is not displayed in kie navigator but in business central app it is correctly created.",Blocker,Robert (Bob) Brodt,,2016-03-02T06:13:20.000-0500,Kie navigator cannot show organizational units content,Closed,bug,Bug
2016-04-11T09:48:50.000-0400,DROOLS-1064,Done,"Following rule throws NPE.

{noformat}
Exception in thread ""main"" java.lang.NullPointerException
	at org.drools.core.rule.Declaration.getValueType(Declaration.java:206)
	at org.drools.compiler.rule.builder.PatternBuilder.isDateType(PatternBuilder.java:976)
	at org.drools.compiler.rule.builder.PatternBuilder.normalizeExpression(PatternBuilder.java:954)
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteCompositeExpressions(PatternBuilder.java:931)
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteCompositeExpressions(PatternBuilder.java:937)
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteOrExpressions(PatternBuilder.java:911)
	at org.drools.compiler.rule.builder.PatternBuilder.buildExpression(PatternBuilder.java:907)
	at org.drools.compiler.rule.builder.PatternBuilder.buildCcdDescr(PatternBuilder.java:878)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:725)
	at org.drools.compiler.rule.builder.PatternBuilder.processConstraintsAndBinds(PatternBuilder.java:585)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:183)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:147)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:128)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:63)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:36)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:63)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:97)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1820)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1111)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:989)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:257)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:121)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:241)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:64)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:230)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:198)
	at test.Application.createKieSession(Application.java:108)
	at test.Application.main(Application.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
{noformat}
",Major,Mario Fusco,,2016-02-16T09:33:15.000-0500,Drools compiler throws NPE,Resolved,bug,Bug
2016-03-29T11:14:50.000-0400,DROOLS-1068,Done,"We have encountered this issue when we insert a fact matching a certain rule, delete the fact then call fire all rules.

A reproducer is attached.

-BillT",Major,Mario Fusco,,2016-02-24T19:14:32.000-0500,java.lang.UnsupportedOperationException thrown by org.drools.core.reteoo.BaseLeftTuple.getBlocker(BaseLeftTuple.java:535),Resolved,bug,Bug
2016-03-23T14:16:40.000-0400,DROOLS-1086,Done,"It is required that an installer for eap is created on KIE side.

Right now the bpms layer is installed by the fuse-bxm-integ eap installer. This installer unzips the kie-eap-distributions-bpms-layer zip and include the bpms layer on the layers file.

Fuse-bxms-integ should be agnostic of fuse and kie version, so the installation of kie on eap should be done independently. 

Creating the installer should not be difficult, it would just require to do the same than is done here:

https://github.com/jboss-integration/fuse-bxms-integ/tree/master/release/eap/installer",Major,Petr Široký,,2016-03-08T11:07:57.000-0500,Create KIE EAP installer,Resolved,bug,Bug
2016-05-03T10:33:01.000-0400,DROOLS-1031,Done,"When some rule extends other rule using ""extends"" and the parent rule is changed at runtime, the rule still fires using facts from old parent rule. 

Test case for this: http://pastebin.com/cByH5Rcv",Minor,Mario Fusco,,2016-01-18T10:20:32.000-0500,Rule that extends some rule still fires with old facts when parent rule is changed at runtime,Resolved,bug,Bug
2016-04-21T03:46:45.000-0400,DROOLS-1076,Done,"If you open server properties of the the kie navigator tool, you will get error dialog ""The currently displayed page contains invalid values"". This happens only when you create new server in server view and then you open server properties in kie navigator view.",Minor,Robert (Bob) Brodt,,2016-03-01T06:36:59.000-0500,Initial opening of kie navigator server properties shows error dialog ,Closed,bug,Bug
2016-03-16T08:42:42.000-0400,DROOLS-1077,Done,"The REST URI to send the command fire-all-rules to an running container is outdated.
Using the URI described in the docs I get the following result:

{code}
2016-02-29 17:03:26 DEBUG org.apache.http.headers     - http-outgoing-0 << Allow: HEAD, DELETE, GET, OPTIONS, PUT
2016-02-29 17:03:26 DEBUG org.apache.http.headers     - http-outgoing-0 << Content-Type: text/html;charset=utf-8
2016-02-29 17:03:26 DEBUG org.apache.http.headers     - http-outgoing-0 << Content-Length: 1022
2016-02-29 17:03:26 DEBUG org.apache.http.headers     - http-outgoing-0 << Date: Mon, 29 Feb 2016 20:03:58 GMT
Exception in thread ""main"" java.lang.RuntimeException: Failed with HTTP error code : 405
        at org.jboss.test.arquillian.ce.decisionserver.DecisionServerSecureTest.main(DecisionServerSecureTest.java:404)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
{code}

The correct URI is:

. [POST] containers/instances/{id}

After to change the REST call worked as expected.",Major,Edson Tirelli,,2016-03-01T09:05:10.000-0500, [POST] /containers/{id} is outdated,Closed,bug,Bug
2016-07-06T04:53:27.000-0400,DROOLS-1186,Done,"If you set the planning variable to ""nullable=true"", firstable, causes a IllegalStateException.
fixed that, causes the first NPE, and fixed that, causes other NPE unfixed:
Exception in thread ""AWT-EventQueue-0"" java.lang.IllegalStateException:
Caused by: java.lang.NullPointerException
    at org.drools.core.phreak.RuleNetworkEvaluator.deleteChildLeftTuple(RuleNetworkEvaluator.java:778)",Critical,Mario Fusco,,2015-12-15T14:25:45.000-0500,Setting the planning variable nullable in nurserostering examples causes Drools NPE,Resolved,bug,Bug
2016-03-24T06:15:56.000-0400,DROOLS-1094,Done,"When I try to retrieve best solution from Solver in Kie server OptaPlanner extension, JAXB and XSTREAM works correctly but JSON doesn't. JSON marshalling isn't able to map planning variable in planning entity.

It can be simulated using cloudbalance problem which is part of Kie server OptaPlanner integration tests. See test method testGetBestSolution in OptaplannerIntegrationTest.",Major,Geoffrey De Smet,,2016-03-16T07:50:16.000-0400,OptaPlanner Kie server service: unable to retrieve best solution,Resolved,bug,Bug
2015-03-06T01:52:55.000-0500,DROOLS-685,Done,Probably a matter of upgrading the jboss-parent to the next version so a newer maven-release-plugin version is used.,Major,Michael Biarnes Kiefer,,2015-01-14T10:44:31.000-0500,ip-bom should be releasable with maven 3.2 too (including doing the deploy to nexus),Resolved,bug,Bug
2015-01-29T05:41:57.000-0500,DROOLS-699,Done,"The following test fails:

{code}
    @Test
    public void testNotExists() {

        String drl2 =
                ""import "" + List.class.getCanonicalName() + "";\n""
                + ""\n\n""
                + ""rule \""NotExists\""\n""
                + ""when\n""
                + ""$l1: List() \n""
                + ""$l2: List() \n""
                + ""exists( String() from $l1 ) \n""
                + ""not( exists( String() ) )\n""
                + ""then end\n"";

        KieSession ksession = new KieHelper().addContent(drl2, ResourceType.DRL)
                                             .build()
                                             .newKieSession();

        ksession.insert(asList(""Mario"", ""Mark""));
        ksession.insert(asList(""Julie"", ""Leiti""));

        assertEquals(4, ksession.fireAllRules());
    }
{code}",Major,Mario Fusco,,2015-01-28T05:21:27.000-0500,A not with no constraints is not linked when part of a subnetwork starting from a BetaNode,Resolved,bug,Bug
2015-01-30T09:09:20.000-0500,DROOLS-694,Done,"With reference to attached reproducer.

Assuming the following KB, where to goal is to keep a {{Counter}} fact for the amount of {{Measurement}} events received in the last hour.
{code:java}
declare Measurement
	@role(event)
end

rule ""Init Counter last 1h""
agenda-group ""USERSPACE""
salience 1
no-loop
when
	not Counter( name == ""Counter last 1h"" )
then
	Counter c = new Counter(""Counter last 1h"", 0);
	insert(c);
	System.out.println(""RHS Init Counter last 1h "" + c);
end

rule ""Update Counter last 1h""
agenda-group ""USERSPACE""
no-loop
when
	accumulate( $token : Measurement() over window:time( 1h ) ;
 				$val : count($token)
 			   )
 	$cv1 : Counter( name == ""Counter last 1h"", value != $val.doubleValue() )
then
	int count = $val.intValue();
	$cv1.setValue(count);
	update($cv1);
	System.out.println(""RHS Update Counter last 1h : ""+$cv1);
end
{code}

The following Unit test shall have the effect in the end to obtain value 2.0 in the {{Counter}} object, as I've inserted 2 {{MEasurement}} within the last hour and within two minutes
{code:java}
advance(clock, 1, TimeUnit.MINUTES);
insert(session, new Measurement(""voltage"", ""220""));
fire(session);

advance(clock, 1, TimeUnit.MINUTES);
insert(session, new Measurement(""voltage"", ""221""));
fire(session);

LOG.info(""Final checks"");
Counter counter = (Counter) session.getObjects(counterFilter).iterator().next();         // I'm taking a shortcut as for this reproducer I know there is only 1 Counter in WM
assertEquals(""I've inserted 2 Measurement within the hour "", 2, counter.getValue(), 0);
{code}

However this works only with ReteOO and the test FAILS with Phreak.

Can you kindly advise, please?
Thank you
MM",Major,Mario Fusco,,2015-01-21T04:42:46.000-0500,accumulate with sliding window and other LHS condition,Resolved,bug,Bug
2015-01-30T05:00:19.000-0500,DROOLS-698,Done,"The GlobalDateExtractor class uses java.sql.Date instead of java.util.Date.
This leads to class cast exceptions (java.sql.Date against java.util.Date) when using globals of type date (java.util.Date).",Major,Mario Fusco,,2015-01-28T03:41:27.000-0500,GlobalDateExtractor should not use java.sql.Date,Resolved,bug,Bug
2014-09-15T03:40:39.000-0400,DROOLS-597,Done,"I have implemented my own bean (Salience) that manage the dynamic salience for the rules.

After building the drl file i overlaod the salience of the rules with my dynamic salience WodSalienceImpl(Attached file).

However, the salience is not respected even if this bean was called (getValue) before the match creation.

N.B: I used MVELSalience by writing the dynamic salience into the rules(MEVL expression). The result was the same.",Major,Mario Fusco,,2014-09-11T04:18:49.000-0400,Custom implementations of dynamic salience don't work,Resolved,bug,Bug
2014-11-18T13:42:39.000-0500,DROOLS-648,Done,"There is indeed a bottleneck during the creation of the object type configurations. 
On insert facts to state full session it cause drools to go to ProjectClassLoader.loadClasss code which is synchronize and block threads which led to bad performance (when working multi threading).",Critical,Mario Fusco,,2014-11-13T01:22:26.000-0500,Bottleneck during the creation of the object type configurations,Resolved,bug,Bug
2014-11-20T11:26:14.000-0500,DROOLS-649,Done,"When I add a dependency to my project that has other dependencies, KIE fills up my log file with multiple warnings and errors. See the forum reference for a sampling of messages I am receiving. One single reference filled my log file with 8MB of messages.

KIE appears to attempt to load every dependency of my dependency, and every dependency of those dependencies, and so on. The system becomes unusable for a while. After the scan is done, my Type drop down in the Data Modeler is filled with so many classes that it is difficult to find what I need.

The last problem (not mentioned in the forum) is that I can't shut down WildFly. I seem to get stuck in an endless loop with the following message being displayed repeatedly:

13:41:55,522 WARN  [org.jbpm.executor.impl.ExecutorRunnable] (pool-14-thread-1) Error while executing jobs due to {}null

It's possible that WildFly would eventually shut down, but I end up stopping the task forcibly.",Major,Michael Anstis,,2014-11-14T13:49:52.000-0500,Complex Dependencies Cause ,Resolved,bug,Bug
2016-07-18T06:18:07.000-0400,DROOLS-1198,Done,"This error was triggered when accessing the user field with str[endsWith] when user is null:

java.lang.NoClassDefFoundError: mssp/io/model/user (wrong name: mssp/io/model/User)

Condition that triggers the error:
$a : Alert(user!=null, user str[endsWith] ""$"")

This does not trigger the error:
$a : Alert(user!=null, user matches "".+\\$"")

If I remove the import for the User class the error will not be triggered. As a workaround I've switched to using matches instead of str[endsWith], but I'd prefer to switch back.

I did not experience this issue in 6.3.0-Final, so it appears to be a regression in 6.4.0-Final",Minor,Mario Fusco,,2016-06-04T11:00:01.000-0400,NoClassDefFoundError when using str[endsWith] on a field that matches an imported class name,Resolved,bug,Bug
2014-09-17T04:37:02.000-0400,DROOLS-602,Done,"At the moment the separator between patterns and functions inside an accumulate is optional evenif it shouldn't. In other words an accumulate pattern like the following shouldn't compile.

{code}
accumulate ( $s: String() count($s) )
{code}",Major,Mario Fusco,,2014-09-17T03:15:20.000-0400,Separator between patterns and functions inside an accumulate shouldn't be optional,Resolved,bug,Bug
2014-09-18T13:02:18.000-0400,DROOLS-601,Done,"When running the following test case:

{code}
    @Test
    public void testQueryWithAgendaGroup() {
        String drl =
                ""package org.drools.test; "" +
                ""global java.util.List list; "" +

                ""query foo( Integer $i ) "" +
                ""   $i := Integer() "" +
                ""end "" +

                ""rule Detect "" +
                ""agenda-group 'one' "" +
                ""when "" +
                ""   foo( $i ; ) "" +
                ""then "" +
                ""   list.add( $i ); "" +
                ""end "" +

                ""rule OnceMore "" +
                ""agenda-group 'two' "" +
                ""no-loop "" +
                ""when "" +
                ""   $i : Integer() "" +
                ""then "" +
                ""   update( $i );"" +
                ""end "" +
                """";

        KieHelper helper = new KieHelper();
        helper.addContent( drl, ResourceType.DRL );
        KieSession kieSession = helper.build().newKieSession();

        List<Integer> list = new ArrayList<Integer>();
        kieSession.setGlobal( ""list"", list );

        FactHandle handle = kieSession.insert( 42 );

        Agenda agenda = kieSession.getAgenda();
        agenda.getAgendaGroup(""two"").setFocus();
        agenda.getAgendaGroup(""one"").setFocus();

        kieSession.fireAllRules();
        assertEquals( Arrays.asList( 42 ), list );

        kieSession.delete( handle );

        kieSession.insert( -99 );

        agenda.getAgendaGroup(""two"").setFocus();
        agenda.getAgendaGroup(""one"").setFocus();

        kieSession.fireAllRules();
        assertEquals( Arrays.asList( 42, -99 ), list );
    }
{code}

The ""Detect"" rule, the one containing the query, fires twice with 42 even if the second time that fact shold be already been deleted. In particular the sequence of relevant events when running this test is the following:

1. 1st fire, 42 updated
  1.1. process update in PhreakRuleTerminalNode of OnceMore 
    1.1.1. blocked by no-loop
  1.2. process update in PhreakQueryTerminalNode 
    1.2.1. update added to leftTupleSets of queryResult
    1.2.2. rule Detect doesn't fire again because it is in an inactive agenda-group

2. 42 deleted
  2.1. the deleted factHandle refers to the RTNLeftTuple that is then added to the deleted leftTupleSets of the LIANode having as sink the RTN of rule OnceMore. Unfortunately there's no relationship between the deleted factHandle and the query activated by that fact.
    
3. 2nd fire
  3.1. now AG ""one"" has focus so evaluates PhreakRuleTerminalNode of Detect using the updated leftTuple of point 1.2.1. - ERROR!!!
  3.2. process deleted 42 and inserted -99 in PhreakRuleTerminalNode of OnceMore 
  3.3. process deleted 42 and inserted -99 in PhreakQueryTerminalNode, doesn't fire it because AG ""one"" is not active

",Major,Mario Fusco,,2014-09-16T05:25:29.000-0400,Using queries in combination with agenda-groups leads to wrong firings,Resolved,bug,Bug
2016-09-08T07:51:00.000-0400,DROOLS-1269,Done,"... regardless of the real KieBase they actually belong to.

Ref example screenshot:
!rhqjon.png|thumbnail!",Minor,Matteo Mortari,,2016-09-02T03:32:47.000-0400,RHQ / JON plug-in display wrong hierarchy and repeatedly nesting KieSession under KieBase,Resolved,bug,Bug
2015-02-20T03:52:18.000-0500,DROOLS-718,Done,"When using the KieScanner to reload a KJAR with a DSL and RDSLR, reloading fails due to that the compiler is unable to find mappings for the language in the RDSLR.

This is the error I get in my reproducer:

2015-02-18 00:45:02,764 [ERROR] [main] [org.drools.compiler.kie.builder.impl.KieContainerImpl] ERROR Unable to update KieBase: KBase1 to release org.kie:scanner-test:1.0-SNAPSHOT
[7] No mapping entries for expanding: 	There is a SimpleFact	   
[7] Unable to expand: There is a SimpleFact
[8] No mapping entries for expanding: 	-with id ""2""
[8] Unable to expand: -with id ""2""
[10] No mapping entries for expanding: 	Print ""Found a simple fact with id 2.""
[10] Unable to expand: 	Print ""Found a simple fact with id 2.""
[7,7]: [ERR 102] Line 7:7 mismatched input 'is' in rule ""bla""

Reproducer project can be found here: https://github.com/DuncanDoyle/brms-kjar-with-dsl-kiescanner

Just clone the repo and run 'mvn clean test'.

Note that the reproducer creates the first KJAR, runs test, and then creates the second KJAR. Compilation of the second KJAR fails. When you alter the test to only load the second KJAR, everything works fine.",Major,Mario Fusco,,2015-02-17T19:04:04.000-0500,Reloading KJAR which contains DSL and RDSLR via KieScanner fails.,Resolved,bug,Bug
2015-02-16T12:16:50.000-0500,DROOLS-715,Done,"I have a class called DrugDay, which has a boolean called valid.

In my WHEN block,

$drugDayA : DrugDay($uniqueIdA : uniqueId, $ctCodeA : ctCode, $dayA : day, valid == true)

having the condition, ""valid == true"", breaks the UI, with no error in the logs.  The guided rule has to be deleted, and created again.  It is happy without the ""valid == true"" condition.

Is this a reserved variable name?
        
",Major,Michael Anstis,,2015-02-16T11:28:02.000-0500,Guvnor/BRMS field named 'valid' breaks UI,Resolved,bug,Bug
2015-02-16T10:24:50.000-0500,DROOLS-713,Done,"Here is a shorter version of my rule:

rule ""X""
agenda-group ""MyGroup""
salience 900
when
 $bundle : MyClass($protocolSequence : protocolSequence)
 eval($protocolSequence != null)
 $followupBundle : MyClass(protocolSequence == $protocolSequence + 1)
then
   ...
end

When I save in BRMS's UI, it shows the ""protocolSequence == $protocolSequence + 1"" condition incorrectly.

It just shows [protocolSequence] [equal to] [Choose...]

And the Choose... dropdown gives me the names of my variables.

The source tab shows the correct DRL at least.  So it is probably just a cosmetic issue, but it does mean I can only modify the rule using freeform DRL, which is not good for when I hand it over to the business users.
",Minor,Michael Anstis,,2015-02-16T08:24:01.000-0500,Guvnor/BRMS not converting freeform DRL val == $var + 1 correctly,Resolved,bug,Bug
2015-07-14T05:01:59.000-0400,DROOLS-839,Done,"I am getting a ClassCastException with the following LHS side of the rule. The sample I am posting is the simplest version of the rule that I could create while still retaining the error. 
{code:title=Rule.drl|borderStyle=solid}
rule ""reproducer""
        dialect ""mvel"" 
	enabled true
	when
		$contract : Contract( $contractRefId : contractRefId, $scope : scope )
		(or 
			$employee : Employee ($scope == ContractScope.EmployeeContract && employeeId == $contractRefId) 
			$employee : Employee ($scope == ContractScope.TeamContract) 
		)
		$contractLine : MinMaxContractLine( contractLineType == ContractLineType.HOURS_PER_DAY, $maxMinutesValue : maximumValue, $weight : maximumWeight, 
											maximumEnabled == true, $contract == contract)
		$info : EmployeeRosterInfo( $type : profileDayType, $firstDayOfWeek : firstDayOfWeek )
		$shiftDate : ShiftDate(isInPlanningWindow($info))
		accumulate ( $shift : ShiftAssignment( employee != null, employee == $employee
								,getDateByProfileDayType($type).equals($shiftDate)
								,$minutes : shiftDurationMinutes)
           			,$minutesInDay  : sum( $shift.getShiftDurationMinutesByProfileType($type, $shiftDate) )
           			,$shiftsInvolved : collectList($shift)
		)
	then
end
{code}


During the execution of the rules I get the following stack trace:

{code:title=StackTrace.java|borderStyle=solid}
java.lang.RuntimeException: java.lang.ClassCastException: com.reproducer.engine.domain.contract.Contract cannot be cast to com.reproducer.engine.domain.EmployeeRosterInfo
	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:99)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:751)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:163)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:80)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:562)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:533)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:334)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:161)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:116)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:231)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:106)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1008)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1289)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1262)
	at com.engine.drools.hardconstraints.MaxHoursPerDayTester.testMaxHoursTwoShiftsViolatedSplitByMidnightType(MaxHoursPerDayTester.java:67)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.ClassCastException: com.reproducer.engine.domain.contract.Contract cannot be cast to com.reproducer.engine.domain.EmployeeRosterInfo
	at org.drools.base.com.reproducer.engine.domain.EmployeeRosterInfo1136687844$getProfileDayType.getValue(Unknown Source)
	at org.drools.core.base.ClassFieldReader.getValue(ClassFieldReader.java:91)
	at org.drools.core.rule.Declaration.getValue(Declaration.java:228)
	at org.drools.core.base.mvel.MVELCompilationUnit.updateFactory(MVELCompilationUnit.java:359)
	at org.drools.core.base.mvel.MVELCompilationUnit.getFactory(MVELCompilationUnit.java:291)
	at org.drools.core.base.accumulators.MVELAccumulatorFunctionExecutor.accumulate(MVELAccumulatorFunctionExecutor.java:116)
	at org.drools.core.rule.MultiAccumulate.accumulate(MultiAccumulate.java:90)
	... 40 more

{code}

If I remove the 'or' clause from the rule by commenting out the lines as below, the error goes away.
{code:title=Error.java|borderStyle=solid}
		$contract : Contract( $contractRefId : contractRefId, $scope : scope )
		// (or
			$employee : Employee ($scope == ContractScope.EmployeeContract && employeeId == $contractRefId) 
			// $employee : Employee ($scope == ContractScope.TeamContract) 
		// )
{code}
",Major,Mario Fusco,,2015-07-06T14:51:25.000-0400,Accumulate Function ClassCastException,Resolved,bug,Bug
2015-07-07T13:32:54.000-0400,DROOLS-832,Done,"By default, ""logical"" traitable beans maintain the consistency of a field adding logic to the setters. When using non-natively traitable beans, the additional logic is not invoked",Major,Mario Fusco,,2015-06-30T16:04:50.000-0400,Logical setters do not work with non-natively traitable beans,Resolved,bug,Bug
2015-07-07T13:33:21.000-0400,DROOLS-830,Done,Setters with no matching getter are still considered part of an accessor pair when comparing type (re)declarations,Major,Mario Fusco,,2015-06-29T17:55:54.000-0400,"Non-accessor ""set"" methods are interpreted as setters during declared type resolution",Resolved,bug,Bug
2015-07-07T04:36:02.000-0400,DROOLS-836,Done,"In the decision sheets, we have the option to specify multiple comma separated inpu parameters which can refered to in CONDITION or ACTION as $1, $2 etc.

These parameters are substituted with values on forming the DRL. This substitution goes wrong when the input parameter number exceeds 9.",Minor,Michael Anstis,,2015-07-02T04:43:34.000-0400,Decision sheet substitution incorrect for more than 9 parameters,Resolved,bug,Bug
2016-08-24T11:00:45.000-0400,DROOLS-1247,Done,ForceEagerActivationOption may cause a recursive segments initialization resulting in an infinite recursive linked list of segment memories like: smem1 -> smem2 -> smem1 -> ... When this happens the segments evaluation makes the engine to fall in an endless loop. ,Blocker,Mario Fusco,,2016-08-04T05:41:47.000-0400,ForceEagerActivationOption may cause a recursive segment initialization,Resolved,bug,Bug
2015-12-04T03:26:09.000-0500,DROOLS-993,Done,"When I insert the PseudoClock as a global in my KieSession, and I use the clock in combination with a temporal operator in a rule, I get the following CCE:

{code}
Caused by: java.lang.ClassCastException: java.lang.Long cannot be cast to java.util.Date
	at org.drools.core.base.evaluators.BeforeEvaluatorDefinition$BeforeEvaluator.evaluate(BeforeEvaluatorDefinition.java:301)
	at org.drools.core.base.EvaluatorWrapper.evaluate(EvaluatorWrapper.java:94)
	... 61 more
{code}

The interesting thing is that this line works:
{code}
$s: SimpleEvent(clock.currentTime after[300s] timestamp)
{code}

while this one fails:
{code}
$s: SimpleEvent(timestamp before[300s] clock.currentTime)
{code}

Reproducer can be found here: https://github.com/DuncanDoyle/drools-cce-issue
Just run 'mvn clean test'.",Major,Mario Fusco,,2015-12-02T09:52:51.000-0500,Drools throws CCE when using global SessionClock in temporal operator,Resolved,bug,Bug
2016-01-26T03:15:39.000-0500,DROOLS-998,Done,"The following {{NullPointerException}} occurs for the following rule:

{code}
Exception in thread ""main"" java.lang.NullPointerException
	at org.drools.core.common.LeftTupleSetsImpl.removeInsert(LeftTupleSetsImpl.java:141)
	at org.drools.core.common.LeftTupleSetsImpl.addDelete(LeftTupleSetsImpl.java:80)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftDeletes(PhreakAccumulateNode.java:603)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:65)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:565)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:536)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:372)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:332)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:123)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:142)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:74)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:978)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260)
	at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:109)
	at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:34)
	at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:292)
	at Test.main(Test.java:13)
{code}

{code}
rule ""test""
when
    not( String() )
    accumulate(
        Long();
        sum(1)
    )
    ( Boolean() or not( Float() ) )
then
    insert(new String());
end
{code}

(Please ignore the nonsensical rule; I simply couldn't reproduce this issue in any better way without providing you my larger system where the (more complex) rule makes more sense.)

I'm using a default KIE configuration to load the rule:

{{kmodule.xml}}:
{code}
<?xml version=""1.0"" encoding=""UTF-8""?>
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"" />
{code}

{{Test.java}}:
{code}
import org.kie.api.KieBase;
import org.kie.api.KieServices;
import org.kie.api.runtime.StatelessKieSession;
import org.kie.internal.command.CommandFactory;

public class Test {

    public static void main(String[] args) {

        KieBase kieBase = KieServices.Factory.get().getKieClasspathContainer()
                .getKieBase();
        StatelessKieSession session = kieBase.newStatelessKieSession();
        session.execute(CommandFactory.newFireAllRules());
    }
}
{code}

This issue might be related with DROOLS-987.",Major,Mario Fusco,,2015-12-03T13:01:35.000-0500,NullPointerException at org.drools.core.common.LeftTupleSetsImpl.removeInsert(LeftTupleSetsImpl.java:141),Resolved,bug,Bug
2015-12-10T02:54:57.000-0500,DROOLS-1002,Done,"Hi,

I ran into an issue yesterday that I believe to be a bug.

The persistence configuration through 

ks.getStoreServices().newKieSession(kieBase, ksConf, env);

does not seem to be considering the configuration set on the kmodule. The kieBase in question is taken from the kmodule.xml configuration. The ksConf and environment are set up to support persistence. 

I also wrote this up here with maybe some more detail and a workaround I am using: http://stackoverflow.com/questions/34134678/drools-kmodule-persistence-configuration/34152339#34152339 

It would be nice to be able to use Kmodule configuration (through xml) in combination with persistent sessions, and preferably maybe configure persistence on a per-session bases in the module. (I hope this makes sense, I am still fairly new to the drools world) 

",Minor,Mario Fusco,,2015-12-08T04:46:38.000-0500,Drools Persist does not work with kmodule.xml configuration,Resolved,bug,Bug
2016-01-26T12:49:21.000-0500,DROOLS-1000,Done,"We encountered soft timeout on threads executing Drools in our production environment.
Below is the trimmed thread dump:

""CacheWorker:2"" id=988 State:RUNNABLE
        at java.util.HashMap.getEntry(HashMap.java:446)
        at java.util.HashMap.containsKey(HashMap.java:434)
        at java.util.HashSet.contains(HashSet.java:201)
        at org.drools.core.impl.KnowledgeBaseImpl.addEventListener(KnowledgeBaseImpl.java:252)
        at org.jbpm.process.instance.ProcessRuntimeImpl.initProcessEventListeners(ProcessRuntimeImpl.java:303)
        at org.jbpm.process.instance.ProcessRuntimeImpl.<init>(ProcessRuntimeImpl.java:115)
        at org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl.newProcessRuntime(ProcessRuntimeFactoryServiceImpl.java:10)
        at org.jbpm.process.instance.ProcessRuntimeFactoryServiceImpl.newProcessRuntime(ProcessRuntimeFactoryServiceImpl.java:7)
        at org.drools.core.runtime.process.ProcessRuntimeFactory.newProcessRuntime(ProcessRuntimeFactory.java:16)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.createProcessRuntime(StatefulKnowledgeSessionImpl.java:757)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.<init>(StatefulKnowledgeSessionImpl.java:393)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.<init>(StatefulKnowledgeSessionImpl.java:286)
        at org.drools.core.common.PhreakWorkingMemoryFactory.createWorkingMemory(PhreakWorkingMemoryFactory.java:21)
        at org.drools.core.impl.StatelessKnowledgeSessionImpl.newWorkingMemory(StatelessKnowledgeSessionImpl.java:127)
        at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:302)

Analysis on the Drools code reveals a possible thread safety issue. A single instance of KnowledgeBaseImpl is shared amongst multiple kSessions but inside KnowledgeBaseImpl, it contains a HashSet storing the listeners:

public final Set<KieBaseEventListener> kieBaseListeners = new HashSet<KieBaseEventListener>();

From the thread dump, it hanged at addEventListener method:

    public void addEventListener(KieBaseEventListener listener) {
        if (!kieBaseListeners.contains(listener)) {
            eventSupport.addEventListener(listener);
            kieBaseListeners.add(listener);
        }
    }

When 2 threads try to put into a hashmap at the same time and both trigger the map to be resized there is a small chance of created a corrupt internal data structure which results in infinite loops. There are a bunch of references on the net for this, here is one example: 

[http://stackoverflow.com/questions/13695832/explain-the-timing-causing-hashmap-put-to-execute-an-infinite-loop].

Our system heavily rely on Drools and we have high volume everyday, we really need help from Drools dev team and much appreciate if you can provide a patch for us. Thanks in advance.

",Major,Mario Fusco,,2015-12-08T02:17:34.000-0500,Race condition occured when executing Drools,Resolved,bug,Bug
2015-06-04T07:02:36.000-0400,DROOLS-803,Done,"When a static method with the same signature is declared by a class and its superclass Drools mistakenly invokes the one of the superclass even when it shouldn't. This happens only on IBM JDK.

This issue is related to https://issues.jboss.org/browse/DROOLS-410",Minor,Mario Fusco,,2015-06-02T05:56:54.000-0400,Drools invokes superclass static method when running on IBM JDK,Resolved,bug,Bug
2015-06-04T13:11:23.000-0400,DROOLS-804,Done,KieProjectDefaultClasspathTest.createMultpleJarAndFileResources() uses KieServicesEventListerner which is referenced as WeakReference in KieServicesImpl and ClasspathKieProject. IBM JDK handles garbage collection differently than Oracle JDK and sometimes frees the listener during test run so the test fails. The test should hold the reference to the listener during whole test run. ,Minor,Mario Fusco,,2015-06-02T08:45:18.000-0400,KieProjectDefaultClasspathTest.createMultpleJarAndFileResources() fails sometimes when run on IBM JDK,Resolved,bug,Bug
2016-02-10T07:18:28.000-0500,DROOLS-1034,Done,"Sometimes some tests failed on Oracle RAC database due invalid id ordering from db. Some older data has higher id then the newer data. It's caused by how Oracle RAC assigns IDs.

On other databases tests run fine.",Major,Jakub Schwan,,2016-01-20T04:25:36.000-0500,Kie server test improvement for Oracle RAC,Resolved,bug,Bug
2016-02-12T15:07:09.000-0500,DROOLS-1055,Done,"When deploying blueprint container for kie application with cm:property-placeholder, like this:
{code:xml}
    <cm:property-placeholder persistent-id=""org.drools.example.kie"" update-strategy=""reload"" xmlns=""http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0"">
        <cm:default-properties>
            <cm:property name=""activeMQ.uri"" value=""tcp://localhost:61616"" />
...
        </cm:default-properties>
    </cm:property-placeholder>
{code}
 in Fuse 6.2.1.GA, I'm getting:
{noformat}
15:01:43,674 | ERROR | l Console Thread | BlueprintContainerImpl           | 23 - org.apache.aries.blueprint.core - 1.4.4 | Unable to start blueprint container for bundle org.jboss.integration.fuse.quickstarts.blueprint-camel-drools-decision-table/1.3.0.redhat-002
org.osgi.service.blueprint.container.ComponentDefinitionException: Unable to initialize bean .droolsBlueprint.processor.bean.camel-context
	at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:714)
	at org.apache.aries.blueprint.container.BeanRecipe.internalCreate2(BeanRecipe.java:824)
	at org.apache.aries.blueprint.container.BeanRecipe.internalCreate(BeanRecipe.java:787)
	at org.apache.aries.blueprint.di.AbstractRecipe$1.call(AbstractRecipe.java:79)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)[:1.8.0_74]
	at org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractRecipe.java:88)
	at org.apache.aries.blueprint.container.BlueprintRepository.createInstances(BlueprintRepository.java:247)
	at org.apache.aries.blueprint.container.BlueprintRepository.createInstance(BlueprintRepository.java:230)
	at org.apache.aries.blueprint.container.BlueprintRepository.create(BlueprintRepository.java:155)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.processProcessors(BlueprintContainerImpl.java:531)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:361)
	at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:269)
	at org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:294)
	at org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:263)
	at org.apache.aries.blueprint.container.BlueprintExtender.modifiedBundle(BlueprintExtender.java:253)
	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:500)[17:org.apache.aries.util:1.1.0]
	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:433)[17:org.apache.aries.util:1.1.0]
	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$AbstractTracked.track(BundleHookBundleTracker.java:725)[17:org.apache.aries.util:1.1.0]
	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.bundleChanged(BundleHookBundleTracker.java:463)[17:org.apache.aries.util:1.1.0]
	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$BundleEventHook.event(BundleHookBundleTracker.java:422)
	at org.apache.felix.framework.util.SecureAction.invokeBundleEventHook(SecureAction.java:1127)
	at org.apache.felix.framework.util.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:696)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:484)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4429)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2100)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:976)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:963)
	at org.apache.karaf.shell.osgi.StartBundle.doExecute(StartBundle.java:37)
	at org.apache.karaf.shell.osgi.BundlesCommand.doExecute(BundlesCommand.java:37)
	at org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)
	at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)
	at sun.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.aries.proxy.impl.ProxyHandler$1.invoke(ProxyHandler.java:54)[19:org.apache.aries.proxy.impl:1.0.4]
	at org.apache.aries.proxy.impl.ProxyHandler.invoke(ProxyHandler.java:119)[19:org.apache.aries.proxy.impl:1.0.4]
	at org.apache.karaf.shell.console.commands.$BlueprintCommand1713831377.execute(Unknown Source)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:78)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:92)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.karaf.shell.console.jline.Console.run(Console.java:197)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
	at org.apache.karaf.shell.console.jline.DelayedStarted.run(DelayedStarted.java:79)[38:org.apache.karaf.shell.console:2.4.0.redhat-621083]
Caused by: java.lang.ClassCastException: org.apache.aries.blueprint.ext.AbstractPropertyPlaceholder$LateBindingValueMetadata cannot be cast to org.apache.aries.blueprint.mutable.MutableValueMetadata
	at org.kie.aries.blueprint.namespace.KieObjectsInjector.addKieSessionModels(KieObjectsInjector.java:265)
	at org.kie.aries.blueprint.namespace.KieObjectsInjector.getKieModuleModel(KieObjectsInjector.java:248)
	at org.kie.aries.blueprint.namespace.KieObjectsInjector.createOsgiKieModule(KieObjectsInjector.java:140)
	at org.kie.aries.blueprint.namespace.KieObjectsInjector.afterPropertiesSet(KieObjectsInjector.java:107)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_74]
	at org.apache.aries.blueprint.utils.ReflectionUtils.invoke(ReflectionUtils.java:299)
	at org.apache.aries.blueprint.container.BeanRecipe.invoke(BeanRecipe.java:956)
	at org.apache.aries.blueprint.container.BeanRecipe.runBeanProcInit(BeanRecipe.java:712)
	... 45 more
{noformat}
",Major,Petr Široký,,2016-02-09T09:46:12.000-0500,ClassCastException when using blueprint with cm:property-placehoder,Resolved,bug,Bug
2016-03-09T12:54:14.000-0500,DROOLS-1025,Done,"Removing a rule containing a subnetwork causes the following NPE:

{code}
java.lang.NullPointerException
        at org.drools.core.phreak.AddRemoveRule.deletePeerLeftTuple(AddRemoveRule.java:777)
        at org.drools.core.phreak.AddRemoveRule.followPeer(AddRemoveRule.java:749)
        at org.drools.core.phreak.AddRemoveRule.processLeftTuples(AddRemoveRule.java:713)
        at org.drools.core.phreak.AddRemoveRule.flushStagedTuples(AddRemoveRule.java:281)
        at org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:153)
        at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:173)
        at org.drools.core.reteoo.ReteooBuilder.removeRule(ReteooBuilder.java:163)
        at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1635)
        at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1626)
        at org.drools.core.impl.KnowledgeBaseImpl.internalRemoveRule(KnowledgeBaseImpl.java:1610)
        at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1581)
{code}",Major,Mario Fusco,,2016-01-13T10:21:42.000-0500,NPE removing a rule that contains a subnetwork,Resolved,bug,Bug
2016-02-19T06:48:24.000-0500,DROOLS-1051,Done,"I will attach PR for proposal of patch for {{KieRepositoryScannerImpl}}.
I will attach reproducer code.

Suppose a kjar has a _test_ scope dependency which may not be resolvable at runtime; the KieContainer will be created correctly (warning raised in log) but the initialization of the KieScanner fail with NPE.

Expected behavior: also the KieScanner shall be able to initialize if the KieContainer is working correctly.",Minor,Mario Fusco,,2016-02-03T12:26:26.000-0500,KieScanner does not initialize if missing to locate a kjar dependency of test scope,Resolved,bug,Bug
2016-02-12T13:51:10.000-0500,DROOLS-1056,Done,"QueryDataServiceIntegrationTest fails when it is run against MySQL 5.5 database. It is caused by errors in SQL expressions for queries.
See attachments.",Minor,Maciej Swiderski,,2016-02-10T02:45:27.000-0500,QueryDataServiceIntegrationTest fails for MySQL5.5,Resolved,bug,Bug
2015-07-09T03:20:37.000-0400,DROOLS-842,Done,"Consider for example:

{code}
Object() from collect( Something() @Foo )
{code}

The pattern source is never reached by the annotation pre-processing code,
resulting in an error when the annotation fully qualified name is resolved.
",Major,Mario Fusco,,2015-07-08T17:36:52.000-0400,PatternSource annotations are not resolved for type safety,Closed,bug,Bug
2015-11-10T03:39:13.000-0500,DROOLS-966,Done,"I found a weird error with my simple rule.
Below code(attached ""Steps to Reproduce"") occur error as ""Unable to Analyse Expression.."".
But, if I change ""\""#"" to ""\"""" or ""#"" or ""\""\""#"", drools did not return error code.
I think it is related to '#'(Inline casts and coercion-http://docs.jboss.org/drools/release/6.3.0.Final/drools-docs/html_single/index.html)
I attached my code & exception below.

Best regards.


exception
------------------------------------------------
line 1:5 no viable alternative at character '\'
line 1:8 mismatched character '<EOF>' expecting '""'
[ERROR][2015-10-29 01:42:20][o.d.c.k.b.i.AbstractKieModule.buildKnowledgePackages] Unable to build KieBaseModel:info
Unable to Analyse Expression ""\"" instanceof "" && name == (("")""\""):
[Error: unterminated string literal]
[Near : {... ""\"" instanceof "" && name == (("")""\"") ....}]
                                                 ^ : [Rule name='test']

Predicate '""\"" instanceof ""' must be a Boolean expression
[Line: 14, Column: 8] : [Rule name='test']
------------------------------------------------

",Major,Mario Fusco,,2015-10-29T04:30:41.000-0400,"Unable to analyse expression ""\""#"" in drools",Resolved,bug,Bug
2016-06-17T11:20:42.000-0400,DROOLS-1199,Done,"I'm not sure, but it seems there is a memory leak in KieScanner, not in scanner directly, but somewhere in plexus used internally.
If you start KieScanner with version = LATEST, start it with interval say 1 second and sample memory with visualvm (or any other), you can watch number of instances org.eclipse.sisu.plexus.* growing over time. And they cannot be garbage collected - memory root is timer thread. This happens in drools 6.4.0, in 6.3.0 this issue was absent.
Eventually application fails with OOM.

As a workaround we call KieScanner#scan manually in a separate thread pool that is recreated from time to time.",Major,Mario Fusco,,2016-06-06T11:46:50.000-0400,Memory leak in KieScanner,Resolved,bug,Bug
2016-06-13T10:18:20.000-0400,DROOLS-1187,Done,"the new mole after whacking the mole of DROOLS-1174...

{code}
ava.lang.IllegalStateException: Score corruption: the workingScore (0hard/-85soft) is not the uncorruptedScore (0hard/-86soft) after completedAction ([[2010-01-11/D, 2010-01-12/L, 2010-01-13/L, 2010-01-14/L] {? -> 16}, [2010-01-14/DH, 2010-01-15/E, 2010-01-16/L, 2010-01-17/L] {? -> 29}]):
  The corrupted scoreDirector has no ConstraintMatch(s) which are in excess.
  The corrupted scoreDirector has 1 ConstraintMatch(s) which are missing:
    org.optaplanner.examples.nurserostering.solver/maximumConsecutiveWorkingWeekends/level1/[18 is working the weekend of 2 - 23, 18, 0-CONSECUTIVE_WORKING_WEEKENDS]=-1
  Check your score constraints.
	at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertWorkingScoreFromScratch(AbstractScoreDirector.java:418)
	at org.optaplanner.core.impl.solver.scope.DefaultSolverScope.assertWorkingScoreFromScratch(DefaultSolverScope.java:118)
	at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertWorkingScoreFromScratch(AbstractPhaseScope.java:167)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.processMove(LocalSearchDecider.java:167)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.doMove(LocalSearchDecider.java:153)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.decideNextStep(LocalSearchDecider.java:125)
	at org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.solve(DefaultLocalSearchPhase.java:63)
	at org.optaplanner.core.impl.solver.DefaultSolver.runPhases(DefaultSolver.java:229)
	at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:191)
	at org.optaplanner.examples.common.app.SolveAllTurtleTest.buildAndSolve(SolveAllTurtleTest.java:75)
	at org.optaplanner.examples.common.app.SolveAllTurtleTest.runFastAndFullAssert(SolveAllTurtleTest.java:59)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
{code}",Major,Jiří Locker,,2016-05-21T04:45:46.000-0400,Score corruption (regression) in nurse rostering long_hint01.xml after fix for DROOLS-1174,Resolved,bug,Bug
2016-05-25T10:25:16.000-0400,DROOLS-1147,Done,"When using evals in rules, incremental compilation fails on various errors. See reproducer from PR [1]. There are at least 4 different failing stacktraces in the tests. 

[1] https://github.com/droolsjbpm/drools/pull/760",Major,Mario Fusco,,2016-04-28T06:44:49.000-0400,Incremental compilation with rules that use eval fails. ,Resolved,bug,Bug
2016-05-18T03:33:39.000-0400,DROOLS-1177,Done,"In Stream mode a path memory can have a RuleAgendaItem even if the path has been never totally linked and then it misses the first segment memory. When an incremental compilation tries to remove the rule for that path the following exception is thrown:

{code}
java.lang.NullPointerException
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:70)
	at org.drools.core.phreak.AddRemoveRule.flushStagedTuples(AddRemoveRule.java:547)
	at org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:178)
	at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:185)
	at org.drools.core.reteoo.ReteooBuilder.removeRules(ReteooBuilder.java:170)
	at org.drools.core.impl.KnowledgeBaseImpl.internalRemoveRule(KnowledgeBaseImpl.java:1685)
	at org.drools.core.impl.KnowledgeBaseImpl.access$200(KnowledgeBaseImpl.java:117)
	at org.drools.core.impl.KnowledgeBaseImpl$3.run(KnowledgeBaseImpl.java:1658)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:720)
	at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1655)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.preProcessRules(KnowledgeBuilderImpl.java:1155)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1106)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:989)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:260)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:121)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:386)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateKBase(KieContainerImpl.java:241)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.access$000(KieContainerImpl.java:80)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl$1.run(KieContainerImpl.java:186)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:720)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:183)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:130)
	at org.drools.compiler.integrationtests.incrementalcompilation.IncrementalCompilationTest.testRemoveRuleWithNonInitializedPath(IncrementalCompilationTest.java:2832)
{code}",Major,Mario Fusco,,2016-05-16T05:25:15.000-0400,NPE removing a not initialized rule in stream mode,Resolved,bug,Bug
2016-05-18T03:28:01.000-0400,DROOLS-1174,Done,"to reproduce run DinnerPartySolveAllTurtleTest with VM option -DrunTurtleTests=true in optaplanner-examples.

{code}
2016-05-12 16:06:02,121 [main] INFO  Opened: data/dinnerparty/unsolved/wedding01.xml
2016-05-12 16:06:02,226 [main] TRACE     Model annotations parsed for Solution DinnerParty:
2016-05-12 16:06:02,226 [main] TRACE         Entity SeatDesignation:
2016-05-12 16:06:02,226 [main] TRACE             Variable seat (genuine)
2016-05-12 16:06:03,436 [main] INFO  Solving started: time spent (137), best score (144uninitialized/-14400), environment mode (NON_INTRUSIVE_FULL_ASSERT), random (JDK with seed 0).
2016-05-12 16:06:03,913 [main] DEBUG     Custom step (0), time spent (615), score (-2890), new best score (-2890).
2016-05-12 16:06:03,913 [main] INFO  Custom phase (0) ended: step total (1), time spent (615), best score (-2890), score calculation speed (11050/sec).
2016-05-12 16:06:03,937 [main] TRACE     Created cachedMoveList: size (10368), moveSelector (Shuffling(Filtering(SwapMoveSelector(FromSolutionEntitySelector(SeatDesignation), FromSolutionEntitySelector(SeatDesignation))))).
2016-05-12 16:06:03,941 [main] TRACE     Shuffled cachedMoveList with size (10368) in moveSelector(Shuffling(Filtering(SwapMoveSelector(FromSolutionEntitySelector(SeatDesignation), FromSolutionEntitySelector(SeatDesignation))))).
2016-05-12 16:06:03,950 [main] TRACE         Move index (0), score (-2890), accepted (true), move (Grayson {1.4} <-> Oliver {0.4}).
2016-05-12 16:06:03,957 [main] TRACE         Move index (1), score (-2890), accepted (true), move (James {10.4} <-> Cameron {10.10}).

java.lang.IllegalStateException: Score corruption: the workingScore (-3190) is not the uncorruptedScore (-3090) after completedAction (Eliana {8.9} <-> Allison {9.3}):
  The corrupted scoreDirector has 1 ConstraintMatch(s) which are in excess (and should not be there):
    org.optaplanner.examples.dinnerparty.solver/twoSameJobTypePerTable/level0/[8, SOCIALITE]=-100
  The corrupted scoreDirector has no ConstraintMatch(s) which are missing.
  Check your score constraints.

	at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertWorkingScoreFromScratch(AbstractScoreDirector.java:418)
	at org.optaplanner.core.impl.solver.scope.DefaultSolverScope.assertWorkingScoreFromScratch(DefaultSolverScope.java:118)
	at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertWorkingScoreFromScratch(AbstractPhaseScope.java:156)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.processMove(LocalSearchDecider.java:167)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.doMove(LocalSearchDecider.java:153)
	at org.optaplanner.core.impl.localsearch.decider.LocalSearchDecider.decideNextStep(LocalSearchDecider.java:125)
	at org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.solve(DefaultLocalSearchPhase.java:63)
	at org.optaplanner.core.impl.solver.DefaultSolver.runPhases(DefaultSolver.java:229)
	at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:191)
	at org.optaplanner.examples.common.app.SolveAllTurtleTest.buildAndSolve(SolveAllTurtleTest.java:75)
	at org.optaplanner.examples.common.app.SolveAllTurtleTest.runFastAndFullAssert(SolveAllTurtleTest.java:55)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runners.Suite.runChild(Suite.java:128)
	at org.junit.runners.Suite.runChild(Suite.java:27)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:119)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
{code}

I enabled trace logging above, it happens in the 3th move of the first step.

It seems like this rule is responsible:

{code}
// 1 democrat and 1 republican = 2 politians at each table but NOT two of the same kind
// 2 doctors at each table but NOT two of the same kind
// 2 coaches at each table but NOT two of the same kind
// 2 programmers at each table but NOT two of the same kind
// 2 socialites at each table
// 2 teachers at each table
rule ""twoSameJobTypePerTable""
    when
        $jobType : JobType()
        $table : Table()
        not (
            SeatDesignation(guestJobType == $jobType, seatTable == $table, $leftId : id, $firstJob : guestJob)
            and SeatDesignation(guestJobType == $jobType, seatTable == $table, id > $leftId,
                    differentKindIfNeeded($firstJob))
        )
    then
        scoreHolder.addConstraintMatch(kcontext, -100);
end
{code}",Critical,Mario Fusco,,2016-05-12T10:14:02.000-0400,Bug of score corruption in dinner party examples uncovered by fix for DROOLS-1186,Resolved,bug,Bug
2016-06-03T12:23:14.000-0400,DROOLS-1155,Done,"After the fix for issue DROOLS-1123, I was able to follow deserialize the kie base correctly. However, after deserialization, the kie sessions do not behave in the same way. The attached project has a reproduction case for the difference in behavior",Major,Mario Fusco,,2016-05-02T17:28:41.000-0400,ClassCastException after deserialization of kiebase,Closed,bug,Bug
2016-04-26T04:47:40.000-0400,DROOLS-1135,Done,"A number of worker threads is running simultaneously in a thread pool. Each thread is initialised with the same KieContainer from which they extract a KieBase using KieContainer.getKieBase(""name""). Each worker thread obtains a KieSession from its KieBase, and then executes a simple loop, taking instructions from a queue, inserting and removing facts based on those instructions, and then firing all rules:

{code}
kieSession = kieBase.newKieSession();
try {
  while (true) {
    work = getItemsFromQueue();
    addAndRemoveFacts(kieSession, work);
    kieSession.fireAllRules();
  }
} finally {
  kieSession.dispose();
}
{code}

This causes the following exceptions:

{code}
Exception in thread ""Worker-1"" java.lang.NullPointerException	at org.drools.core.reteoo.NodeTypeEnums.isLeftTupleSource(NodeTypeEnums.java:84)
	at org.drools.core.phreak.SegmentUtilities.updateRiaAndTerminalMemory(SegmentUtilities.java:380)
	at org.drools.core.phreak.SegmentUtilities.createSegmentMemory(SegmentUtilities.java:171)
	at org.drools.core.phreak.SegmentUtilities.getQuerySegmentMemory(SegmentUtilities.java:205)
	at org.drools.core.phreak.SegmentUtilities.processQueryNode(SegmentUtilities.java:192)
	at org.drools.core.phreak.SegmentUtilities.createSegmentMemory(SegmentUtilities.java:115)
	at org.drools.core.reteoo.LeftInputAdapterNode.assertObject(LeftInputAdapterNode.java:166)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:63)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:300)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:78)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:73)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2017)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1334)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1288)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1297)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1278)
	at com.X.processRequests(X.java:86)
	at com.X$$Lambda$104/975722152.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

{code}
Exception in thread ""Worker-6"" java.lang.NullPointerException	at org.drools.core.reteoo.ObjectTypeNode.updateTupleSinkId(ObjectTypeNode.java:410)
	at org.drools.core.reteoo.ObjectTypeNode.updateTupleSinkId(ObjectTypeNode.java:416)
	at org.drools.core.reteoo.ObjectTypeNode.updateTupleSinkId(ObjectTypeNode.java:416)
	at org.drools.core.reteoo.ObjectTypeNode.checkDirty(ObjectTypeNode.java:274)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:294)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:78)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:73)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2017)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1334)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1288)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1297)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1278)
	at com.X.processRequests(X.java:86)
	at com.X$$Lambda$162/1410998625.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

{code}
Exception in thread ""Worker-7"" java.lang.NullPointerException	at org.drools.core.reteoo.ObjectTypeNode.updateTupleSinkId(ObjectTypeNode.java:410)
	at org.drools.core.reteoo.ObjectTypeNode.checkDirty(ObjectTypeNode.java:274)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:294)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:78)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:73)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2017)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1334)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1288)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1297)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1278)
	at com.X.processRequests(X.java:86)
	at com.X$$Lambda$99/1591140286.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}",Critical,Mario Fusco,,2016-04-21T06:15:27.000-0400,NullPointerExceptions when using multiple concurrent KieSessions,Resolved,bug,Bug
2016-04-21T04:22:16.000-0400,DROOLS-1134,Done,"
Description of problem:
When Git Repository Path is set to another location than default (not the checkbox but the default filled path), business central items (rules, pom.xml and other files) are not visible in kie navigator.

Version-Release number of selected component (if applicable):
Drools 6.3.0.Final

How reproducible:
-

Steps to Reproduce:
1. Set up and run a server.
2. Open Kie navigator, open properties for the server and change Git repository path.
3. Open org unit, open repository, error ""Invalid remote origin"" is displayed, see the attachment.
4. Open project. Browse project.

Actual results:
No items are visible.

Expected results:
Items (rules, pom.xml, ...) are visible. 

For more info see https://bugzilla.redhat.com/show_bug.cgi?id=1269100",Major,Robert (Bob) Brodt,,2016-04-21T04:21:55.000-0400, Business central items are not visible in Kie navigator when other than default git path is used,Closed,bug,Bug
2016-04-28T13:48:27.000-0400,DROOLS-1122,Done,"Creating separate clients via KieServicesFactory.newKieServicesClient in separate threads sometimes fails due to unsafe use of ServiceLoader  (which by itself is not safe to use from separate threads per https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html ) in droolsjbpm-integration/kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client/impl/KieServicesClientImpl.java

The following can be seen in the logs of the failed threads

{noformat}
No builder found for 'BPM' capability
{noformat}

instead of the normal
{noformat}
Builder 'org.kie.server.client.helper.JBPMServicesClientBuilder@7a988e48' for capability 'BPM'
{noformat}

Which is likely caused by ServiceLoader returning incorrect output in some race condition. ",Major,Maciej Swiderski,,2016-04-14T11:10:44.000-0400,KieServicesClientImpl init not thread-safe,Resolved,bug,Bug
2016-04-27T07:09:39.000-0400,DROOLS-1129,Done,"1. bundle reteoo have wrong Bundle-SymbolicName.
now is Bundle-SymbolicName: org.drools.core
it should is Bundle-SymbolicName: org.drools.reteoo

2. base in standard of P2 repository. almost source bundle have wrong value at  Bundle-SymbolicName and Eclipse-SourceBundle
example:drools-compiler-6.4.0.Final-sources
current value of: Bundle-SymbolicName = drools-compiler.source
should be:Bundle-SymbolicName = org.drools.compiler.source

current value of: Eclipse-SourceBundle=drools-compiler
should be:Eclipse-SourceBundle=org.drools.compiler

or we can keep source bundle, and change at binary bundle
example change Bundle-SymbolicName of org.drools.compiler to drools-compiler",Major,Petr Široký,,2016-04-17T23:10:06.000-0400,osgi bundle have wrong metadata info,Resolved,bug,Bug
2016-04-21T04:18:56.000-0400,DROOLS-1133,Done,"Description of problem:
Drools project wizard does not provide an option for code compatible with Drools 6.1.x.

The third step in Drools Project wizard is to ""Select Drools Runtime"".  The combobox ""Generate Code compatible with:"" does not show an option for Drools 6.1.
If it is the same that Drools 6.0.x it should be changed to ""Drools 6.0.x or above"" - if we need changes in the project template so we must have a ""Drools 6.1.x"".

Version-Release number of selected component (if applicable):
BRMS 6.1 product release

How reproducible:
always

Steps to Reproduce:
Create a new Drools project using the wizard

Actual results:
No option for code compatible with 6.1

Expected results:
label change to ""Drools 6.0.x or above"" or Drools 6.1.x

For more info see https://bugzilla.redhat.com/show_bug.cgi?id=1220847",Major,Robert (Bob) Brodt,,2016-04-21T04:18:35.000-0400,Drools project wizard does not provide an option for code compatible with Drools 6.1.x,Closed,bug,Bug
2016-04-21T04:15:16.000-0400,DROOLS-1132,Done,"Currently, when the user creates a new Drools Project using the New Project Wizard, s/he must perform an extra step to create a default Drools Runtime in order to complete the wizard. Since it is not obvious to a new user what a ""Drools Runtime"" is or why it is necessary, it would greatly improve the new user experience if the New Drools Project Wizard could simply perform this step behind the scenes using default settings on the Wizard pages.

For more info see https://bugzilla.redhat.com/show_bug.cgi?id=1217638",Major,Robert (Bob) Brodt,,2016-04-21T04:14:12.000-0400,New Drools Project Wizard should automatically create a default Drools Runtime OOTB,Closed,bug,Bug
2015-10-19T12:22:16.000-0400,DROOLS-951,Done,"When removing rules from knowledge which have logically inserted (justified) objects, only one object (from first removed rule) will be retracted. 
In example from AddRemoveRule#184: as it removes the first rule, it re-initializes all other path memories and, in particular, marks them as unlinked (AbstractTerminalNode#204)
Later, when it tries to flush the deletions (AddRemoveRule#280), the unlinked status prevents the propagation from taking place.


 ",Major,Mario Fusco,,2015-10-15T03:58:37.000-0400,Removing 2 or more rules does not retract justified objects,Closed,bug,Bug
2015-10-19T04:27:46.000-0400,DROOLS-950,Done,"When a rule removal causes the merge of 2 segments and the first of the 2 haven't been initialized yet, the merged segment only has the nodes of the second segment while the ones of the first are totally skipped.",Major,Mario Fusco,,2015-10-14T08:42:49.000-0400,Problem when a rule removal causes the merge of 2 segments and the first of the 2 haven't been initialized yet,Closed,bug,Bug
2015-10-22T05:42:36.000-0400,DROOLS-957,Done,"When I try to process _xls_ table (in the attachment) - in order to check its validity - it's works fine and shows that table is incorrect.

But when I try to process the same table but in _xlsx_ I get +NullPointerException+
{code:c}
java.lang.NullPointerException
	at org.apache.poi.openxml4j.opc.OPCPackage.getPart(OPCPackage.java:628)
	at org.apache.poi.POIXMLDocumentPart.<init>(POIXMLDocumentPart.java:97)
	at org.apache.poi.POIXMLDocument.<init>(POIXMLDocument.java:57)
	at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:197)
	at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:79)
	at org.drools.decisiontable.parser.xls.ExcelParser.parseFile(ExcelParser.java:82)
	at org.drools.decisiontable.SpreadsheetCompiler.compile(SpreadsheetCompiler.java:93)
	at org.drools.decisiontable.SpreadsheetCompiler.compile(SpreadsheetCompiler.java:72)
	at org.drools.decisiontable.DecisionTableProviderImpl.compileStream(DecisionTableProviderImpl.java:75)
	at org.drools.decisiontable.DecisionTableProviderImpl.loadFromInputStream(DecisionTableProviderImpl.java:43)
	at org.drools.compiler.compiler.DecisionTableFactory.loadFromInputStream(DecisionTableFactory.java:32)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.decisionTableToPackageDescr(KnowledgeBuilderImpl.java:402)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDecisionTable(KnowledgeBuilderImpl.java:372)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addKnowledgeResource(KnowledgeBuilderImpl.java:732)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:2223)
	at com.xxxx.xxxx.RuleValidator.isValidXLSRule(RuleValidator.java:33)
	at com.xxxx.xxxx.RuleValidator.main(RuleValidator.java:26)

{code}

Also it can be possible that there is an error in my application's code - maybe I am doing something wrong.

I additionally add that _xlsx_ table is not purely _xlsx_ table created in excel, but converted from _xls_ using excel.",Major,Mario Fusco,,2015-10-19T05:22:26.000-0400,NullPointerException when attempt to process xlsx file,Closed,bug,Bug
2015-10-19T12:09:03.000-0400,DROOLS-954,Done,"Removal of a rule having a sub-sub-network (as in the following drl) doesn't cleanup the outermost subnetwork

{code}
rule R when
    $l : List()
    exists Integer( this == 1 ) from $l
    exists Integer( this == 2 ) from $l
then 
end
{code}",Major,Mario Fusco,,2015-10-16T06:02:28.000-0400,Removal of a rule having a sub-sub-network doesn't cleanup the outermost subnetwork,Closed,bug,Bug
2015-10-20T10:30:25.000-0400,DROOLS-944,Done,"When deserializing a serialized KieBase, sometimes a NullPointerException occurs. 

It seems to be related to specific patterns in the DRL file (esp. in MVEL expressions). The attached reproducer (Maven 3 project requiring Java 8) contains a sample DRL file with the suspicious content. When calling ""mvn install"", the build fails with the following stacktrace:{code}java.lang.NullPointerException: null
        at org.drools.core.base.BaseClassFieldReader.equals(BaseClassFieldReader.java:107)
        at org.drools.core.base.extractors.MVELObjectClassFieldReader.equals(MVELObjectClassFieldReader.java:165)
        at java.util.HashMap.putVal(HashMap.java:634)
        at java.util.HashMap.put(HashMap.java:611)
        at java.util.HashSet.readObject(HashSet.java:334)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1017)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1896)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1801)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at org.drools.core.rule.MVELDialectRuntimeData.readExternal(MVELDialectRuntimeData.java:101)
        at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1840)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1799)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at java.util.HashMap.readObject(HashMap.java:1396)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1017)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1896)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1801)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at org.drools.core.rule.DialectRuntimeRegistry.readExternal(DialectRuntimeRegistry.java:59)
        at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1840)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1799)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at org.drools.core.definitions.impl.KnowledgePackageImpl.readExternal(KnowledgePackageImpl.java:292)
        at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1840)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1799)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at java.util.HashMap.readObject(HashMap.java:1396)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1017)
        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1896)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1801)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at org.drools.core.impl.KnowledgeBaseImpl.readExternal(KnowledgeBaseImpl.java:459)
        at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1840)
        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1799)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1351)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:371)
        at test.ReproducerTest.deserialize(ReproducerTest.java:52)
        at test.ReproducerTest.runAsJUnitTest(ReproducerTest.java:25){code}
When changing the suspicious pattern to something different, the test runs fine.

Since there is no work-around for us, we request for assistance on this one from some specialist in MVEL and/or Drools :-)...",Blocker,Mario Fusco,,2015-10-09T11:42:15.000-0400,KieBase deserialization throws NullPointerException,Closed,bug,Bug
2015-05-07T12:06:49.000-0400,DROOLS-779,Done,{{drools/drools-distribution/pom.xml}} has a dependency on {{kie-wb-distributions/kie-docs/drools-docs/pom.xml}}. This creates circular dependencies between repositories. This would break the next non-snapshot build.,Blocker,Michael Biarnes Kiefer,,2015-05-05T10:48:23.000-0400,Cyclic dependencies between repositories (drools depends on kie-wb-distributions),Resolved,bug,Bug
2016-03-15T05:52:34.000-0400,DROOLS-1074,Done," had to touch little bit the Kie-Spring to get the resources correctly. This is the only class I had to touch:

https://gist.github.com/dvirgiln/0f65d184c2004127b1db#file-gistfile1-txt-L90-L95


 getClass().getResource(""/"") is failing on EAP, it returns null

This code needs to get the path of the kie-spring.jar. This is the only way I found to get the containing jar path.

This code is working. Maybe you know another way.

            ClassLoader cl = getClass().getClassLoader();
            URL url = getClass().getProtectionDomain().getCodeSource().getLocation();
            configFilePath = url.getPath();
            if (configFilePath.endsWith(""!/"")) {
                configFilePath = configFilePath.substring(0, configFilePath.length() - 2);
            }",Major,Petr Široký,,2016-02-29T13:15:11.000-0500,Kie-spring read resources on EAP not working,Resolved,bug,Bug
2016-03-10T06:24:31.000-0500,DROOLS-1080,Done,"Without kie-ci in the classpath, ClassLoader.getResources("""") it works properly, but with it, it doesn't.",Critical,Mario Fusco,,2016-03-04T04:32:49.000-0500,"ProjectClassLoader.getResources("""") with kie-ci does not return all valid urls",Resolved,bug,Bug
2016-03-15T05:53:14.000-0400,DROOLS-1085,Done,"On the jbpm-distro for eap it is not included the kie-spring library. Also it is required to  include all the spring 3 dependencies, that are not provided by default on EAP.

On EAP on the fuse layer it is provided spring 4. So the idea is to provide the spring 3 libraries as another slot. This development has been already tested and done in this branch:

https://github.com/dvirgiln/fuse-bxms-integ/tree/ENTESB-5033-2/release/eap/extra-modules

The idea is that this extra modules can be included/assembled as part of the current jbpm-eap-distro.zip.

",Major,Petr Široký,,2016-03-08T10:58:16.000-0500,Include kie-spring and its dependencies in the jbpm-eap-distro.zip,Resolved,bug,Bug
2016-03-11T03:23:29.000-0500,DROOLS-1082,Done,"In the presence of a class heirarchy, the {{ClassAwareObjectStore}} doesn't properly manage the relationships between {{SingleClassStores}} - specifically, it can become permanently corrupt if the following order of events occurs:

* Insert object of type {{BaseClass}}
* Query for objects of type {{SubClass}}
** Note that it's important this query is fully evaluated (e.g. copy it into a list)
* Insert object of type {{SubClass}}

Subsequent queries for objects of type {{BaseClass}} will _not_ return objects of type {{SubClass}}. If the intervening query for {{SubClass}} is left out, they would.

The problem's in {{ClassAwareObjectStore#getOrCreateConcreteClass}}, where it tries to concretize an existing (non-concrete) store. It should go through the same ""linking"" process that gets done in the {{existingStore == null}} case (and half of which is done already in {{#getOrCreateClassStore}}).

",Major,Mario Fusco,,2016-03-07T15:27:27.000-0500,Querying for objects before any have been inserted prevents Class Aware Object Store from working properly,Resolved,bug,Bug
2015-08-05T05:00:16.000-0400,DROOLS-871,Done,"The {{kie-internal}} module has a dependency on MVEL. This jira is for the task of removing that dependency from {{kie-internal}}. 

The problem is that the MVEL dependency ({{org.mvel:mvel2}}) is nearly 1MB large! 

This means that the dependency tree grows by 1MB everywhere where {{kie-internal}} is used, among others: {{kie-remote-client}}, which has the explicit goal of being as small a dependency as possible, given that it's meant to be used as a lightweight client jar. ",Major,Mario Fusco,,2015-08-04T04:59:52.000-0400,Remove the MVEL dependency from kie-internal,Resolved,bug,Bug
2014-09-01T13:49:56.000-0400,DROOLS-589,Done,"Reproducer:

{code}
    @Test
    public void testRemoveWithDuplicatedCondition() {
        String packageName = ""test_same_condition_pk"" ;
        String rule = ""package "" + packageName + "";"" +
                      ""rule 'test_same_condition' \n"" +
                      ""when \n"" +
                      "" String(this == \""1\"") \n"" +
                      "" String(this == \""1\"") \n"" +
                      ""then \n"" +
                      ""System.out.println('test same condition rule'); \n""+
                      ""end"";
        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();
        kbuilder.add( ResourceFactory.newByteArrayResource( rule.getBytes() ), ResourceType.DRL );
        if ( kbuilder.hasErrors() ) {
            fail( kbuilder.getErrors().toString() );
        }
        KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();
        kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() );
        kbase.removeKnowledgePackage(packageName);
    }
{code}",Major,Mario Fusco,,2014-09-01T13:45:55.000-0400,Removing a rule with a join node having the same alpha node as both right and left input causes an Exception,Resolved,bug,Bug
2014-09-02T22:26:11.000-0400,DROOLS-586,Done,"Hello guys,
we found some contradiction between actual Drools behavior,
We use the following Rule:
import drools.test.Event;

dialect ""mvel""
declare Event
@role(event)
@expires(10s)
end

rule ""ExampleRule""
when
( $a : Event(name == ""event a"") ) and
( $b : Event((name == ""event b"") && (this after [1ms, 15s] $a)) )
then
    System.out.println(""bingo!"");
end

In the code above Drools should wait for the second event when the first event came. But it turns out that Drools doesn't wait for the second event because of @expires tag. The value in this tag is less than this after value.
According to documentation
""The engine will make this analysis for the whole rulebase and find the offset for every event type. Whenever an implicit expiration offset clashes with the explicit expiration offset, then engine will use the greater of the two.""
but it is not calculating maximal expiration offset. Also we are using STREAM mode.
Could you please clarify the situation?",Critical,Edson Tirelli,,2014-08-29T06:15:08.000-0400,Drools doesn't calculate maximum expiration time properly,Closed,bug,Bug
2015-07-16T06:56:28.000-0400,DROOLS-849,Done,"I am trying to get a small app of the ground which loads a number of KieModules from jar files. I found that in cases where the jar contains a file in the jar's root directory a SIOOBE is raised as follows:

I have run into what may be the same issue trying to get a small application up with a separate jar for my module. The NPE I found was thrown as follows:
Exception in thread ""main"" java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	at java.lang.String.substring(String.java:1911)
	at org.drools.compiler.compiler.io.memory.MemoryFileSystem.readFromJar(MemoryFileSystem.java:457)
	at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieBuilder(KieServicesImpl.java:105)
	at com.siemens.systematics.configurator.ConfiguratorMain.loadModule(ConfiguratorMain.java:59)
	at com.siemens.systematics.configurator.ConfiguratorMain.loadModules(ConfiguratorMain.java:54)
	at com.siemens.systematics.configurator.ConfiguratorMain.main(ConfiguratorMain.java:32)

This is caused by entry.getName().lastIndexOf('/') returning -1 for (in my case) a name of ""rules.drl"". The module itself was created using the 6.2.0Final maven archetype so it seems like this should be a common occurrence. I did find one users' report of this issue on a forum from 2013.

A workaround appears to be just to ensure that the rules.drl file is not in the root directory.",Major,Mario Fusco,,2015-07-16T04:51:09.000-0400,StringIndexOutOfBoundsException in readFromJar,Resolved,bug,Bug
2016-07-28T10:06:49.000-0400,DROOLS-1241,Done,"If incremental compilation adds a brand new drl that tries to use a type as an event and that type has been indeed declared as an event but in a different unchanged drl, the builder is no longer able to recognize the type as an event thus causing a compilation error.",Major,Mario Fusco,,2016-07-28T09:09:58.000-0400,Incremental compilation doesn't recognize an event if the event declaration is in an unchanged drl,Resolved,bug,Bug
2016-08-02T08:35:26.000-0400,DROOLS-1243,Done,"A rule like this

{code:java}
global java.util.List list;
rule R when
  $theFrom : Double() from accumulate(MyPerson( $val : age ); 
                                          sum( $val ) )
then
  list.add($theFrom);
end
{code}

works fine but if modified like:

{code:java}
import java.math.BigDecimal;
global java.util.List list;
rule R when
  $theFrom : BigDecimal() from accumulate(MyPerson( $val : age ); 
                                          sum( $val ) )
then
  list.add($theFrom);
end
{code}

then it breaks at runtime, with {{ClassCastException}}.

Suggested correct behavior:
{quote}it should either raise a compilation error (if it is a typed function, like sum()) or just fail to match at runtime, as BigDecimal() does not match the result of sum(){quote}

full stack trace for reference:

{code:java}
Exception executing consequence for rule ""R"" in defaultpkg: java.lang.ClassCastException: java.lang.Double cannot be cast to java.math.BigDecimal
	at org.drools.core.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
	at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1110)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:121)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:74)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1017)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1360)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1298)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1353)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1344)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1325)
	at org.drools.compiler.integrationtests.AccumulateTest.testCCEAtRuntimeFromAccumulate(AccumulateTest.java:3116)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.ClassCastException: java.lang.Double cannot be cast to java.math.BigDecimal
	at defaultpkg.Rule_R880096074DefaultConsequenceInvokerGenerated.evaluate(Unknown Source)
	at defaultpkg.Rule_R880096074DefaultConsequenceInvoker.evaluate(Unknown Source)
	at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1099)
	... 32 more
{code}

Will submit test case for reproducing the error.",Minor,Mario Fusco,,2016-07-29T11:30:24.000-0400,"ClassCastException at runtime when trying to match ""from"" and a built-in accumulate function.",Resolved,bug,Bug
2014-08-14T08:17:52.000-0400,DROOLS-574,Done,"This is an exercise for ""group by"" words.

Consider the following pattern for realizing a ""group by"" by means of from/accumulate/count : the goal is to count Messages which starts with preferred keyword, if the count for a keyword is >= 2, then rule should fire.
{code}
declare GroupByString
	groupId : String
	groups : String[]
end

rule ""init words of my interest""
no-loop
when
then
	GroupByString grp = new GroupByString();
	grp.setGroupId(""wordGroup"");
	grp.setGroups(new String[]{""ciao"", ""bella""});
	insert(grp);
end

rule ""group by word and count if >=2 then ""
no-loop
when
	$group : GroupByString( groupId == ""wordGroup"")
	$word : String() from $group.groups
	accumulate ( $msg : Message( text str[startsWith] $word ) over window:time( 5m ) ;
				 $list : collectList( $msg ),
				 $count : count( $msg );
				 $count >= 2
				 ) 				 
then
	System.out.println(""group by "" + $word + "" count is ""+ $count + "" list: "" + $list);
	insert(new Integer($count.intValue()));
end
{code}

However trying to compile the KB with the kie-maven-plugin fails with this NPE and stacktrace (snippet):
{noformat}
java.lang.NullPointerException
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.buildExternalFunctionCall(JavaAccumulateBuilder.java:182)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:101)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:66)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:320)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:138)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:89)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1652)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:968)
{noformat}

I've also noticed the following 2 aspects:

1-/ If you use another operator instead of {{str startsWith}}, for instance you replace with the {{contains}} operators, it does compile the KB successfully. In this scenario would change the exercise to ""count Messages which _contains_ the preferred keyword"", but it works:
{code}
rule ""group by word and count if >=2 then ""
no-loop
when
	$group : GroupByString( groupId == ""wordGroup"")
	$word : String() from $group.groups
	accumulate ( $msg : Message( text contains $word ) over window:time( 5m ) ;
				 $list : collectList( $msg ),
				 $count : count( $msg );
				 $count >= 2
				 ) 				 
then
	System.out.println(""group by "" + $word + "" count is ""+ $count + "" list: "" + $list);
	insert(new Integer($count.intValue()));
end
{code}

2-/ If you use an hard-coded operand in the {{str startsWith}}, it works too. For instance if you hard-code the rule as:
{code}
rule ""group by word and count if >=2 then ""
no-loop
when
	accumulate ( $msg : Message( text str[startsWith] ""ciao"" ) over window:time( 5m ) ;
				 $list : collectList( $msg ),
				 $count : count( $msg );
				 $count >= 2
				 ) 				 
then
	insert(new Integer($count.intValue()));
end
{code}

It does not give NPE at KB build and executes as expected.


For my application it's okay to deal with the first option above, but anyway I thought worthy to report a JIRA. I will attach reproducer. Ciao",Major,Mario Fusco,,2014-08-13T08:19:43.000-0400,"str operator in 'accumulate', with operand from 'from', results in NPE at KB build",Resolved,bug,Bug
2016-09-15T08:02:03.000-0400,DROOLS-1286,Done,"Guided Decision Table: When adding a Condition BRL fragment it is not possible to enter a template key or value for an attribute on a domain object.

In the attached screen shot, when clicking pencil icon, nothing appear.
This is confirmed by both FireFox anc Chrome.
At that time, the following error is shown in browser's console.

[Chrome]
12:44:40 SEVERE [LogConfiguration] Exception caught: (TypeError) : Cannot read property 'indexOf' of null
 
[FireFox]
00:10:46 SEVERE [LogConfiguration] Exception caught: (TypeError) : b.indexOf is null",Major,Michael Anstis,,2016-09-14T23:53:12.000-0400,GDT editor: unable to specify Literal value or Template key for domain objects as Condition BRL fragment ,Resolved,bug,Bug
2016-09-15T07:02:56.000-0400,DROOLS-1287,Done,None,Major,Mario Fusco,,2016-09-15T04:35:30.000-0400,Incremental compilation doesn't take count of added/removed packages in KieBaseModel,Resolved,bug,Bug
2016-09-15T12:29:04.000-0400,DROOLS-1292,Done,None,Major,Mario Fusco,,2016-09-15T11:55:29.000-0400,Initialization of inner declaration in accumulate node is not thread safe,Resolved,bug,Bug
2016-09-15T10:29:13.000-0400,DROOLS-1285,Done,"In stream mode it is necessary to enforce flushing of path memories. However doing this on an unlinked path is a waste of time and moreover can causes a NPE in presence of a subnetwork like the following:

{code}
java.lang.NullPointerException
	at org.drools.core.phreak.RuleNetworkEvaluator.deleteChildLeftTuple(RuleNetworkEvaluator.java:725)
	at org.drools.core.phreak.RuleNetworkEvaluator.unlinkAndDeleteChildLeftTuple(RuleNetworkEvaluator.java:718)
	at org.drools.core.phreak.PhreakJoinNode.doLeftDeletes(PhreakJoinNode.java:418)
	at org.drools.core.phreak.PhreakJoinNode.doNode(PhreakJoinNode.java:47)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:519)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:505)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301)
	at org.drools.core.phreak.RuleNetworkEvaluator.doRiaNode(RuleNetworkEvaluator.java:573)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:500)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:969)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1311)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1250)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1356)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1347)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1328)
{code}",Major,Mario Fusco,,2016-09-14T06:51:54.000-0400,NPE caused by forced flushing of unlinked path in stream mode,Resolved,bug,Bug
2016-09-16T03:32:17.000-0400,DROOLS-1294,Done,"KModule post processor wherein createKieModule method implementation removes the drive name from the base directory url which causes the problem. So if we have base jetty temp dir path like C:\users\user\tem\jettytempfolder\webapp\web-inf\classes the below lines of code removes the ""C:\"" from the url which makes it invalid path and which in turn isnt recognized as classes file folder.",Major,Mario Fusco,,2016-09-15T12:59:55.000-0400,Root path of kjar module is incorrectly calculated under Windows for both spring and blueprint integration,Resolved,bug,Bug
2015-10-01T11:07:11.000-0400,DROOLS-934,Done,"Unit tests in drools-persistence-jpa don't work on DB2 database system because there isn't specified DB schema in tests. 

Things needed to be done: 
- hibernate.default_schema property set in persistence.xml
- schema should be set in PersistenceUtil, when creating data source",Minor,Petr Široký,,2015-10-01T07:54:01.000-0400,Persistence unit tests - DB2 default schema not specified,Resolved,bug,Bug
2015-08-20T13:10:10.000-0400,DROOLS-886,Done,"When you call kcontainer.updateToVersion() while running sliding window rules, you will the following Exception.
I tested it with master(6.4.0-SNAPSHOT), and I guess it includes the fix for  DROOLS-881 and DROOLS-883. However the issue still occurs.

{panel}
Exception in thread ""pool-23-thread-1"" java.lang.ClassCastException: org.drools.core.reteoo.WindowNode$WindowMemory cannot be cast to org.drools.core.reteoo.PathMemory
	at org.drools.core.phreak.AddRemoveRule.addRule(AddRemoveRule.java:85)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:190)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:136)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:102)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1521)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1501)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:966)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:256)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:120)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:104)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:369)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:207)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:128)
	at com.sample.CallKjarTest$1.run(CallKjarTest.java:45)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
{panel}",Major,Mario Fusco,,2015-08-18T06:17:11.000-0400,ClassCastException when kcontainer.updateToVersion() with sliding window rule running (with fix for DROOLS-881 and DROOLS-883),Resolved,bug,Bug
2015-08-18T06:26:19.000-0400,DROOLS-885,Done,"ExecutorProviderImpl's ThreadPoolExecutor always run with one thread because of LinkedBlockingQueue.

http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html
{noformat}
2. Unbounded queues. Using an unbounded queue (for example a LinkedBlockingQueue without a predefined capacity) will cause new tasks to wait in the queue when all corePoolSize threads are busy. Thus, no more than corePoolSize threads will ever be created. (And the value of the maximumPoolSize therefore doesn't have any effect.) This may be appropriate when each task is completely independent of others, so tasks cannot affect each others execution; for example, in a web page server. While this style of queuing can be useful in smoothing out transient bursts of requests, it admits the possibility of unbounded work queue growth when commands continue to arrive on average faster than they can be processed. 
{noformat}

Sending a PR with a test case and a fix proposal.
",Major,Mario Fusco,,2015-08-18T04:13:59.000-0400,ExecutorProviderImpl's ThreadPoolExecutor always run with one thread,Closed,bug,Bug
2015-07-14T05:59:17.000-0400,DROOLS-848,Done,", because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
10:00:36,383 | ERROR | yard Extender: 1 | ExtensibleXmlParser              | 379 - org.drools.core - 6.3.0.201507140454 | (null: 461, 94): cvc-elt.4.2: Cannot resolve 'tFormalExpression' to a type definition for element 'conditionExpression'.
10:00:36,830 | WARN  | yard Extender: 1 | OptimisticLockRetryInterceptor   | 387 - org.drools.persistence.jpa - 6.3.0.201507140454 | Constraint violation exception class not found org.hibernate.exception.ConstraintViolationException
java.lang.ClassNotFoundException: org.hibernate.exception.ConstraintViolationException not found by org.drools.persistence.jpa [387]
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1556)
	at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:77)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1993)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)[:1.7.0_55]
	at java.lang.Class.forName0(Native Method)[:1.7.0_55]
	at java.lang.Class.forName(Class.java:190)[:1.7.0_55]
	at org.drools.persistence.jpa.OptimisticLockRetryInterceptor.<init>(OptimisticLockRetryInterceptor.java:64)[387:org.drools.persistence.jpa:6.3.0.201507140454]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.7.0_55]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)[:1.7.0_55]
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)[:1.7.0_55]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)[:1.7.0_55]
	at org.jbpm.services.task.HumanTaskConfigurator.addOptimisticLockInterceptor(HumanTaskConfigurator.java:200)[394:org.jbpm.services.task:6.3.0.201507140607]
	at org.jbpm.services.task.HumanTaskConfigurator.getTaskService(HumanTaskConfigurator.java:145)[394:org.jbpm.services.task:6.3.0.201507140607]
	at org.jbpm.runtime.manager.impl.factory.LocalTaskServiceFactory.newTaskService(LocalTaskServiceFactory.java:60)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.switchyard.component.common.knowledge.config.builder.patch.PatchedLocalTaskServiceFactory.newTaskService(PatchedLocalTaskServiceFactory.java:42)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.jbpm.runtime.manager.impl.SingletonRuntimeManager.init(SingletonRuntimeManager.java:87)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.jbpm.runtime.manager.impl.RuntimeManagerFactoryImpl.newSingletonRuntimeManager(RuntimeManagerFactoryImpl.java:64)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.switchyard.component.common.knowledge.config.builder.RuntimeManagerBuilder.build(RuntimeManagerBuilder.java:62)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.common.knowledge.runtime.KnowledgeRuntimeManagerFactory.newRuntimeManager(KnowledgeRuntimeManagerFactory.java:81)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.common.knowledge.exchange.KnowledgeExchangeHandler.newSingletonRuntimeManager(KnowledgeExchangeHandler.java:113)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.bpm.exchange.BPMExchangeHandler.doStart(BPMExchangeHandler.java:87)[416:org.jboss.integration.fuse.switchyard-component-bpm:1.0.0.SNAPSHOT]
	at org.switchyard.deploy.BaseServiceHandler.start(BaseServiceHandler.java:59)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.internal.Deployment.deployImplementations(Deployment.java:582)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.internal.Deployment.start(Deployment.java:144)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.osgi.internal.SwitchYardContainerImpl.doStart(SwitchYardContainerImpl.java:310)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.osgi.internal.SwitchYardContainerImpl.run(SwitchYardContainerImpl.java:144)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)[:1.7.0_55]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)[:1.7.0_55]
	at org.switchyard.deploy.osgi.internal.ExecutorServiceWrapper.run(ExecutorServiceWrapper.java:117)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)[:1.7.0_55]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)[:1.7.0_55]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)[:1.7.0_55]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)[:1.7.0_55]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)[:1.7.0_55]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)[:1.7.0_55]
	at java.lang.Thread.run(Thread.java:744)[:1.7.0_55]
10:00:37,139 | WARN  | yard Extender: 1 | OptimisticLockRetryInterceptor   | 387 - org.drools.persistence.jpa - 6.3.0.201507140454 | Constraint violation exception class not found org.hibernate.exception.ConstraintViolationException
java.lang.ClassNotFoundException: org.hibernate.exception.ConstraintViolationException not found by org.drools.persistence.jpa [387]
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1556)[org.apache.felix.framework-4.4.1.jar:]
	at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:77)[org.apache.felix.framework-4.4.1.jar:]
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1993)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)[:1.7.0_55]
	at java.lang.Class.forName0(Native Method)[:1.7.0_55]
	at java.lang.Class.forName(Class.java:190)[:1.7.0_55]
	at org.drools.persistence.jpa.OptimisticLockRetryInterceptor.<init>(OptimisticLockRetryInterceptor.java:64)[387:org.drools.persistence.jpa:6.3.0.201507140454]
	at org.jbpm.runtime.manager.impl.factory.JPASessionFactory.addInterceptors(JPASessionFactory.java:68)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.jbpm.runtime.manager.impl.factory.JPASessionFactory.newKieSession(JPASessionFactory.java:44)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.jbpm.runtime.manager.impl.SingletonRuntimeManager.init(SingletonRuntimeManager.java:100)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.jbpm.runtime.manager.impl.RuntimeManagerFactoryImpl.newSingletonRuntimeManager(RuntimeManagerFactoryImpl.java:64)[403:org.jbpm.runtime.manager:6.3.0.201507140607]
	at org.switchyard.component.common.knowledge.config.builder.RuntimeManagerBuilder.build(RuntimeManagerBuilder.java:62)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.common.knowledge.runtime.KnowledgeRuntimeManagerFactory.newRuntimeManager(KnowledgeRuntimeManagerFactory.java:81)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.common.knowledge.exchange.KnowledgeExchangeHandler.newSingletonRuntimeManager(KnowledgeExchangeHandler.java:113)[406:org.jboss.integration.fuse.switchyard-component-common-knowledge:1.0.0.SNAPSHOT]
	at org.switchyard.component.bpm.exchange.BPMExchangeHandler.doStart(BPMExchangeHandler.java:87)[416:org.jboss.integration.fuse.switchyard-component-bpm:1.0.0.SNAPSHOT]
	at org.switchyard.deploy.BaseServiceHandler.start(BaseServiceHandler.java:59)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.internal.Deployment.deployImplementations(Deployment.java:582)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.internal.Deployment.start(Deployment.java:144)[302:org.switchyard.switchyard-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.osgi.internal.SwitchYardContainerImpl.doStart(SwitchYardContainerImpl.java:310)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at org.switchyard.deploy.osgi.internal.SwitchYardContainerImpl.run(SwitchYardContainerImpl.java:144)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)[:1.7.0_55]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)[:1.7.0_55]
	at org.switchyard.deploy.osgi.internal.ExecutorServiceWrapper.run(ExecutorServiceWrapper.java:117)[308:org.switchyard.karaf.switchyard-karaf-deploy:2.0.1.redhat-621012]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)[:1.7.0_55]
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)[:1.7.0_55]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178)[:1.7.0_55]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292)[:1.7.0_55]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)[:1.7.0_55]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)[:1.7.0_55]
	at java.lang.Thread.run(Thread.java:744)[:1.7.0_55]
",Major,Mario Fusco,,2015-07-14T04:07:02.000-0400,HibernateException thrown by the OptimisticLockInterceptor,Resolved,bug,Bug
2016-09-14T10:06:53.000-0400,DROOLS-1283,Done,"There is a memory leak when building KieBase using KieBuilder.build() method. When continuously calling kieBuilder.build() (also with no resources), the OOM exception occurs. 

I will make PR with a reproducer for this. ",Major,Matteo Mortari,,2016-09-13T04:56:32.000-0400,Memory leak using KieBuilder.build() method. ,Resolved,bug,Bug
2015-02-24T08:33:25.000-0500,DROOLS-725,Done,"Given a rule like:

rule ""test case""
when
   Number() from accumulate(
         not Number(),
         init( double total = 0; ),
         action(  ),
         reverse( ),
         result( new Double( total ) ) 
   )
then
		// no op 
end

the following exception is thrown:

java.lang.ClassCastException: org.drools.compiler.lang.descr.NotDescr cannot be cast to org.drools.compiler.lang.descr.PatternDescr
	at org.drools.compiler.lang.descr.AccumulateDescr.getInputPattern(AccumulateDescr.java:194)
	at org.drools.compiler.rule.builder.util.PackageBuilderUtil.isReadLocalsFromTuple(PackageBuilderUtil.java:21)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:93)
	at org.drools.compiler.rule.builder.dialect.java.JavaAccumulateBuilder.build(JavaAccumulateBuilder.java:66)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:320)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:138)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:89)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1652)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:968)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:844)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:279)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:103)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:91)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:220)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:43)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:208)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:177)
	at regressions.DroolsCompilerBugTest.bug(DroolsCompilerBugTest.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)




",Minor,Mario Fusco,,2015-02-21T14:48:17.000-0500,ClassCastException on malformed accumulate,Resolved,bug,Bug
2016-02-01T04:20:18.000-0500,DROOLS-1042,Done,"The StatelessKieSession's JavaDoc shows an example on how to use the API. However, the example shown in the doc uses the internal CommandFactory API instead of the new KieCommands API. We should not encourage users to use internal APIs.",Trivial,Duncan Doyle,,2016-01-27T10:09:34.000-0500,JavaDoc of StatelessKieSession should show usage of KieCommands (public API) instead of CommandFactory (internal-api),Resolved,bug,Bug
2016-01-28T12:25:06.000-0500,DROOLS-1044,Done,"KieBase 'includes' does not handle the inclusion of KieBases that use the same package-names correctly.

I define 2 KJARs, each with a kmodule.xml that defines a KieBase. KJAR1 has a dependency on KJAR2 in its pom.xml.
The KieBase defined in KJAR1 includes the KieBase defined in KJAR2.

If the KieBases get their Drools Resources (e.g. .drl) from different packages (e.g. 'rules' and 'rules2', everything works fine, e.g.:

KJAR1 kmodule.xml:
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
	<kbase name=""kbase1"" equalsBehavior=""equality"" default=""true"" packages=""rules"" includes=""kbase2"">
		<ksession name=""ksession1"" default=""true"" type=""stateful""/>
	</kbase>
</kmodule>
{code}

KAJR2 kmodule.xml:
{code:xml}
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
	<kbase name=""kbase2"" equalsBehavior=""equality"" default=""false"" packages=""rules2"">
		<ksession name=""ksession2"" default=""false"" type=""stateful""/>
	</kbase>
</kmodule>
{code}

However, when both KieBases use the same ""packages"" name (e.g. 'rules'), only one of the resources gets included in the final KieBase.

KJAR1 kmodule.xml:
{code:xml}
<?xml version=""1.0"" encoding=""UTF-8""?>
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
	<kbase name=""kbase1"" equalsBehavior=""equality"" default=""true"" packages=""rules"" includes=""kbase2"">
		<ksession name=""ksession1"" default=""true"" type=""stateful""/>
	</kbase>
</kmodule>
{code}

KAJR2 kmodule.xml:
{code:xml}
<kmodule xmlns=""http://jboss.org/kie/6.0.0/kmodule"">
	<kbase name=""kbase2"" equalsBehavior=""equality"" default=""false"" packages=""rules"">
		<ksession name=""ksession2"" default=""false"" type=""stateful""/>
	</kbase>
</kmodule>
{code}

Unit tests with reproducer can be found here: https://github.com/DuncanDoyle/drools-kiebase-include-issue
",Major,Mario Fusco,,2016-01-28T03:38:18.000-0500,KieBase 'includes' does not handle the inclusion of KieBases that use the same package-names correctly.,Closed,bug,Bug
2016-01-29T07:37:13.000-0500,DROOLS-1045,Done,"When using kie-ci with Google's Guava library (v19), we hit the following error: http://stackoverflow.com/questions/32528042/maven-java-lang-illegalaccesserror-tried-to-access-method-com-google-common-col

We solved this by excluding kie-ci's sisu-guice transitive dependency and including the 3.1.7 version released in 2014.

Please update kie-ci's dependencies such that this is no longer an issue.",Major,Petr Široký,,2016-01-28T10:11:20.000-0500,kie-ci 6.3.0.Final conflicts with newer versions of Guava,Resolved,bug,Bug
2016-01-29T08:53:45.000-0500,DROOLS-1046,Done,"While initializing facts for the first time the following method in ReteWorkingMemory is invoked: 

{code:java}
    private final Integer syncLock = 42;
    public void initInitialFact() {
        if ( initialFactHandle == null ) {
            synchronized ( syncLock ) {
                if ( initialFactHandle == null ) {
                    // double check, inside of sync point incase some other thread beat us to it.
                    initInitialFact(kBase, null);
                }
            }
        }
    }
{code}

Since the synchronized lock is taken on a Integer constant variable, the same object gets used across different threads. This causes the initialization of all the ReteMemoryObjects to wait in the initInitialFact() method across different threads. 

The lock should be taken on Object lock = new Object() instead",Major,Mario Fusco,,2016-01-29T02:36:43.000-0500,Threads blocking during ReteWorkingMemory initialization of facts,Resolved,bug,Bug
2015-09-22T11:21:47.000-0400,DROOLS-890,Done,"In our project , we are using drools6.1.0.Final jars and the rules are deployed in a jar. Another application when trying to use the rules jar is getting thread deadlock problem. Stack trace is 
at org.drools.core.common.ProjectClassLoader$InternalTypesClassLoader.loadClass(ProjectClassLoader,java284)
Two threads are in deadlock condition on this thread. I restarted the application and the error is gone but we need to fix this issue so that it is not reproduced later.The class is in drools-core jar",Major,Mario Fusco,,2015-08-22T07:25:06.000-0400,Thread deadlock issue in class ProjectClassLoader.java ,Resolved,bug,Bug
2015-08-24T05:28:46.000-0400,DROOLS-891,Done,"When an alpha node has more than one sink and it is used by only one rule doesn't get removed when the rule itself is removed. The following test case demonstrates the problem.

{code}
    @Test
    public void testRemoveHasSameConElement() {
        String packageName = ""test"";
        String rule1 = ""package "" + packageName + "";"" +
                       ""import java.util.Map; \n"" +
                       ""rule 'rule1' \n"" +
                       ""when \n"" +
                       "" Map(this['type'] == 'Goods' && this['brand'] == 'a') \n"" +
                       "" Map(this['type'] == 'Goods' && this['category'] == 'b') \n"" +
                       ""then \n"" +
                       ""System.out.println('test rule 1'); \n""+
                       ""end"";

        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();

        kbuilder.add( ResourceFactory.newByteArrayResource( rule1.getBytes() ), ResourceType.DRL );
        if ( kbuilder.hasErrors() ) {
            fail( kbuilder.getErrors().toString() );
        }
        KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();
        kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() );
        kbase.removeKnowledgePackage(packageName);
        StatelessKnowledgeSession session = kbase.newStatelessKnowledgeSession();
        session.execute(new HashMap());
    }
{code} ",Major,Mario Fusco,,2015-08-24T05:24:57.000-0400,Missing alpha node removal when the only rule using it is removed,Closed,bug,Bug
2015-08-25T03:22:00.000-0400,DROOLS-892,Done,"In the drools karaf features there is no feature for the jbpm-workitems bundle:

https://github.com/droolsjbpm/droolsjbpm-integration/blob/master/drools-osgi/drools-karaf-features/src/main/filtered-resources/repository/features.xml#L116

It would be good to add a feature with this bundle used in the fuse-bxms-integ repository to avoid specify a version, and have the possibility to include a range of versions, as we do for other drools bundles used in the fuse-integ-repository. Take a look:

https://github.com/jboss-integration/fuse-bxms-integ/blob/master/karaf/karaf-features/src/main/resources/features.xml#L41",Major,Mario Fusco,,2015-08-24T05:40:49.000-0400,Create feature for jbpm-workitems bundle,Resolved,bug,Bug
2015-08-25T11:30:18.000-0400,DROOLS-888,Done,"Our project has a need to use annotation (@) in drl files as a meta-data for each rule. E.g. 

rule ""TEST RULE""
@ID('ABC001')
@FixedBy('Thomas')
when
   ...

While migrating from 6.1.0.Final to 6.2.0.Final, we noticed that there is a significant increase in the building time of the KieBase. The time needed for 6.2.0 is more than twice the 6.1.0. As we have quite a lot of KieBase configured, it is not acceptable.

After some experiements, we found that it is due to the annotations in drl files. Are there any difference in the internal implementation of KieBuilder between that 2 minor versions which will cause that performance issue? If yes, may I know if it possible to fix it?

Thanks & Regards,
Thomas Leung",Major,Mario Fusco,,2015-08-19T06:20:23.000-0400,Drools 6.2 performance issue when using @ sign in drl file,Resolved,bug,Bug
2015-08-24T10:14:18.000-0400,DROOLS-893,Done,Segment memory prototypes are not invalidated correctly during an incremental compilation,Major,Mario Fusco,,2015-08-24T10:11:40.000-0400,Segment memory prototypes are not invalidated correctly during an incremental compilation,Closed,bug,Bug
2015-08-24T11:58:54.000-0400,DROOLS-894,Done,Rules are indexed in the ReteooBuilder using their (non-fully qualified) name as key. This causes problems especially when one of the 2 rules is removed.,Major,Mario Fusco,,2015-08-24T11:57:14.000-0400,Ambiguity between rules with same name in different package,Closed,bug,Bug
2016-02-29T06:15:23.000-0500,DROOLS-1067,Done,"Tried to run Kie server integration tests against database Oracle 11gR2. Got an error listed as attachment in test UserTaskServiceIntegrationTest.testFindTasksByVariableAndValue() .

Error is thrown when test calls: taskClient.findTasksByVariableAndValue(""yoda"", ""_string"", ""john is working on it"", null, 0, 10)",Major,Maciej Swiderski,,2016-02-24T10:53:01.000-0500,Oracle DB issue for findTasksByVariableAndValue,Resolved,bug,Bug
2015-02-12T09:02:00.000-0500,DROOLS-707,Done,"Hi there,

   we are having some serious issues with some rules, they are throwing a NullPointerException and we don't understand why. I have tried to narrow down the problem to the smallest rule possible, now this rule doesn't really make much sense put like this but the real rule is more complex with more constraints. At the end the result is the same: a NPE.

I have tried it with many Drools versions from 5.x to latest 6.3.0-SNAPSHOT.

I tested this in isolation with the minimum amount of code possible, and attached it as well if someone wants to try it quickly.

Note that if line 2 of the when:
$a : Integer()
is moved as first line, the rule runs ok.

Please find the reproducer here: https://groups.google.com/forum/#!topic/drools-usage/-oNqu3l4cqE",Major,Mario Fusco,,2015-02-06T12:47:44.000-0500,NullPointer when changing order of the rules,Resolved,bug,Bug
2016-01-25T05:33:44.000-0500,DROOLS-1013,Done,"When the implementation of the Comparable interface is not directly declared by a Class, but the Class implements another interface that transitively extends Comparable the jitting of a constraint doing a compareTo on that class fails with the following exception:

{code}
Exception in thread ""Thread-0"" java.lang.NoSuchMethodError: java.time.LocalDateTime.compareTo(Ljava/time/LocalDateTimeI
        at ConditionEvaluator8566b06b2be943a7ba50f1700fa7b033.evaluate(Unknown Source)
        at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:248)
        at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:204)
        at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:141)
{code}",Major,Mario Fusco,,2015-12-21T11:21:58.000-0500,Error jitting a compareTo constraint,Closed,bug,Bug
2016-01-26T09:22:26.000-0500,DROOLS-1010,Done,"The issue was happening for us when LHS matches for some rules with thousands of rules in rulebase  only one rule would fire in PHREAK algo however all matches will fire in REETO. 

It turns out the root cause was that the two rules that had LHS matching criteria are defined in separate rule package name and was stemming from AlphaNode.equals returning false when it should return true. I believe underlying issue is further in MevelConstraint.equals compares the package name.

This can be reproduce using attached unit testcase.

I am not sure of the reasoning behind for the MevelConstraint.equals implementation...if it is important to keep that logic same way...following workaround has worked for me.

In class org.drools.core.reteoo.CompositeObjectSinkAdapter following function definitions..
org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateModifyObject(InternalFactHandle, ModifyPreviousTuples, PropagationContext, InternalWorkingMemory)

org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(InternalFactHandle, PropagationContext, InternalWorkingMemory)

org.drools.core.reteoo.CompositeObjectSinkAdapter.byPassModifyToBetaNode(InternalFactHandle, ModifyPreviousTuples, PropagationContext, InternalWorkingMemory)

I changed the call from this.hashedSinkMap.get( hashKey ) to this.hashedSinkMap.getAll( hashKey ) and defined a new function as following to retrieve all alpha nodes that have same HashKey.

    public Object[] getAll(final Object key) {
        final int hashCode = this.comparator.hashCodeOf( key );
        final int index = indexOf( hashCode,
                                   this.table.length );

        List arr = new ArrayList();
        ObjectEntry current = (ObjectEntry) this.table[index];
        while ( current != null ) {
            if ( hashCode == current.cachedHashCode && this.comparator.equal( key,
                                                                        current.key ) ) {
                arr.add(current.value);
            }
            current = (ObjectEntry) current.getNext();
        }
        return arr.toArray();
    }


",Major,Mario Fusco,,2015-12-19T11:23:28.000-0500,AlphNode sharing fails to propagate match to BetaNode when match is defined separate rule package,Resolved,bug,Bug
2014-10-13T13:46:39.000-0400,DROOLS-615,Done,The Composite Package Descriptor ignores declared enum types,Critical,Mario Fusco,,2014-09-27T11:55:05.000-0400,Composite Package Descriptors ignore declared Enums,Resolved,bug,Bug
2014-10-13T13:48:13.000-0400,DROOLS-622,Done,None,Major,Mario Fusco,,2014-10-01T16:01:00.000-0400,DRLDumper does not output enum type declarations,Resolved,bug,Bug
2014-10-13T13:47:09.000-0400,DROOLS-621,Done,None,Major,Mario Fusco,,2014-10-01T16:00:18.000-0400,DRLDumper does not output trait type declarations correctly,Resolved,bug,Bug
2016-08-29T11:46:11.000-0400,DROOLS-1262,Done,"In the latest 6.4 product patches, I am seeing customers that are up to *10 times slower* due to drools in their optaplanner cases. It turns out that they have no logging configuration and many systems - such as WildFly use DEBUG logging by default (often to a file so no one notices it).

Meanwhile the log  fills up with this:
{code}
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was INACTIVE is now FIRING_ALL_RULES
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was FIRING_ALL_RULES is now HALTING
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was HALTING is now INACTIVE
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] optaplanner TRACE         Move index (100), score (-10hard/-128070soft), accepted (false), move (CloudProcess-67 {CloudComputer-45} <-> CloudProcess-147 {CloudComputer-18}).
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was INACTIVE is now FIRING_ALL_RULES
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG Fire Loop
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was FIRING_ALL_RULES is now HALTING
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] drools DEBUG State was HALTING is now INACTIVE
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] optaplanner TRACE         Move index (101), score (0hard/-128070soft), accepted (true), move (CloudProcess-104 {CloudComputer-89} <-> CloudProcess-295 {CloudComputer-26}).
2016-08-29 15:20:57,338 [SwingWorker-pool-2-thread-1] optaplanner DEBUG     LS step (6730), time spent (3432), score (0hard/-128070soft),     best score (0hard/-126690soft), accepted/selected move count (1/102), picked move (CloudProcess-104 {CloudComputer-89} <-> CloudProcess-295 {CloudComputer-26}).
{code}

but without the optaplanner TRACE lines (they are just here to show that drools debug is 7 times as verbose as optaplanner trace here).

Solution proposal A): remove the line ""Fire Loop"" and put ""State was"" on trace logging.

Solution proposal B): collapse the 5 lines ""Fire Loop"" into ""5 fire loops"" and put ""State was"" on trace logging.

Solution proposal C): put the line ""Fire Loop"" and ""State was"" on trace logging.
I personally dislike this one - even trace logging should still be useful and not more verbose that it needs to be (although it should log in high detail).

This should be fixed for 7.0, 6.5.x and I 'll ask QA to consider adding it for 6.4.x.",Critical,Mario Fusco,,2016-08-29T09:32:55.000-0400,"Logging level DEBUG should be less verbose: ""Fire Loop"" & ""State was"" should be trace",Resolved,bug,Bug
2016-08-29T10:58:19.000-0400,DROOLS-1257,Done,"When I run drools-examples trait, it sits in a infinite loop. So same result will output and object collection is never printed.",Minor,Mario Fusco,,2016-08-23T09:34:29.000-0400,drools-examples traits is running on a Infinite loop,Resolved,bug,Bug
2016-08-29T11:00:29.000-0400,DROOLS-1261,Done,When a trait mixin is created it doesn't take count of the trait class hierarchy and then the methods declared in a trait superinterface are not implemented in the resulting mixin class.,Major,Mario Fusco,,2016-08-26T09:06:37.000-0400,Trait's mixins don't inherit methods from parent traits,Resolved,bug,Bug
2014-08-05T10:50:41.000-0400,DROOLS-572,Done,Commits after https://github.com/droolsjbpm/drools/commit/7bb609a8823436682c9e320c5b0f7d30f455b0ad break the ability to add a Role(EVENT) to Java classes using DRL Declarative Types. ,Major,Mario Fusco,,2014-08-05T07:15:00.000-0400,Cannot add Role(EVENT) to Java Beans using Declarative Types,Resolved,bug,Bug
2016-01-20T05:45:37.000-0500,DROOLS-1032,Done,"When I run WebSphere JMS tests for Kie server then SystemOut log gets filled by exception listed in attachment. 
It doesn't cause any error in Kie server functionality as error is created by WebSphereSecurityAdapter while JMS use JMSSecurityAdapter to get needed info, it just spam log making it almost unusable for searching for any real issue logged there.

Caused by https://github.com/droolsjbpm/droolsjbpm-integration/blob/master/kie-server-parent/kie-server-services/kie-server-services-common/src/main/java/org/kie/server/services/impl/security/adapters/WebSphereSecurityAdapter.java#L81

Maybe would be good to reduce log level there to be able to filter out this error.

Edit: After deeper analysis has been revealed that this error actually signals failure in authentication on WebSphere when using JMS. Tests passed because users and their roles has beech cached when running REST tests and for JMS there has been used values from cache.
If user would use just JMS for Kie server then he wouldn't be able to use any functionality based on user authentication and its roles like claiming task.",Major,Maciej Swiderski,,2016-01-19T06:34:33.000-0500,WebSphere JMS on Kie server produces errors in log,Resolved,bug,Bug
2016-01-22T12:21:44.000-0500,DROOLS-1030,Done,"Hi,

I have noticed Nullpointer exceptions when I try and reload a persisted session on startup. It is a bit hard to recreate (I am actually not managing it now since I deleted all old sessions to attempt recreation) but I figured maybe someone has an idea. Essentially I am getting this NPE twice:


java.lang.NullPointerException: null
        at org.drools.persistence.jpa.JpaTimerJobInstance.call(JpaTimerJobInstance.java:50) [drools-persistence-jpa-6.3.0.Final.jar:6.3.0.Final]
        at org.drools.persistence.jpa.JpaTimerJobInstance.call(JpaTimerJobInstance.java:30) [drools-persistence-jpa-6.3.0.Final.jar:6.3.0.Final]
        at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_51]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_51]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_51]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_51]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_51]
        at java.lang.Thread.run(Thread.java:745) [na:1.8.0_51]

When debugging I noticed the following behaviour which points to a race condition: 

If I start my server and try to recreate the session, those NPEs happen 2x.

If I start my server and put a breakpoint BEFORE creating the CommandService for execution, I can wait for a few seconds and the service can be found.

It appears that the scheduler's timerJobFactoryManager is not fully there at the time the sessions is being loaded? Or something else is racing with the service creation. 

Is there a way for me to make sure everything is fully instantiated before I use drools? Does a workaround exist? Is this even a bug? 

Thanks and let me know your thoughts. If I run into this again I will attempt to try and reproduce it. Let me know if more info is needed!

UPDATE:

I noticed that the reason I can't reproduce it at the moment is that the JpaTimerJobInstance is never called with the newly persisted session. It appears that that timer job depends on something else to happen so that it thinks it needs to start the timerJob ",Major,Mario Fusco,,2016-01-18T08:06:10.000-0500,Nullpointer in JpaTimerJobInstance.call on startup ,Resolved,bug,Bug
2016-01-26T08:56:52.000-0500,DROOLS-1037,Done,"Trying to compile a rule like the following

{code}
rule R when
    $p : Person( name == null || (name in (\""Alice\"", \""Charlie\"", \""David\""))==false )
then
     list.add($p.getName());
end
{code}

causes the following RuntimeException:

{code}
java.lang.RuntimeException
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteCompositeExpressions(PatternBuilder.java:924)
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteCompositeExpressions(PatternBuilder.java:919)
	at org.drools.compiler.rule.builder.PatternBuilder.rewriteOrExpressions(PatternBuilder.java:893)
	at org.drools.compiler.rule.builder.PatternBuilder.buildExpression(PatternBuilder.java:889)
	at org.drools.compiler.rule.builder.PatternBuilder.buildCcdDescr(PatternBuilder.java:860)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:715)
	at org.drools.compiler.rule.builder.PatternBuilder.processConstraintsAndBinds(PatternBuilder.java:580)
{code}",Major,Mario Fusco,,2016-01-21T06:26:19.000-0500,Parsing of a complex constraint with an || causes a RuntimeException,Resolved,bug,Bug
2016-04-13T02:38:53.000-0400,DROOLS-1119,Done,Using huge ids for KieSessions corrupts timers serialization ,Major,Mario Fusco,,2016-04-12T11:16:28.000-0400,Timers serialization not working with huge ids,Closed,bug,Bug
2015-08-03T11:03:30.000-0400,DROOLS-868,Done,DROOLS-619 introduced a bug that means custom metadata declared at the field level is not available at runtime via FactField.getMetaData().  None of the existing test cases cover this.,Major,Mario Fusco,,2015-08-01T07:35:53.000-0400,Custom metadata declared at field-level is not available at runtime,Resolved,bug,Bug
2015-08-04T09:11:16.000-0400,DROOLS-861,Done,"When incrementally updating a KieContainer, the TypeDeclarationFactory throws an NPE when an Interface is declared as an @PropertyReactive event in the new rulebase.

{code}
java.lang.NullPointerException
	at org.drools.compiler.builder.impl.TypeDeclarationFactory.compareTypeDeclarations(TypeDeclarationFactory.java:214)
	at org.drools.compiler.builder.impl.TypeDeclarationFactory.checkRedeclaration(TypeDeclarationFactory.java:152)
	at org.drools.compiler.builder.impl.TypeDeclarationBuilder.createBean(TypeDeclarationBuilder.java:235)
	at org.drools.compiler.builder.impl.TypeDeclarationBuilder.processTypeDeclarations(TypeDeclarationBuilder.java:128)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildTypeDeclarations(CompositeKnowledgeBuilderImpl.java:333)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:117)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:369)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:207)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:128)
	at org.jboss.ddoyle.drools.IncrementalUpdateTest.test(IncrementalUpdateTest.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75){code}

See reproducer here: https://github.com/DuncanDoyle/drools-declare-interface-incremental-update-issue/
Simply run {{mvn clean test}}",Major,Mario Fusco,,2015-07-24T11:10:18.000-0400,Incremental update causes NPE in TypeDeclarationFactory when declaring interface as @PropertyReactive event.,Resolved,bug,Bug
2016-04-26T10:31:59.000-0400,DROOLS-1139,Done,"An EvalCondition evaluator needs to be cloned when 2 eval nodes have the same condition, but not the same parent and then cannot be shared. This cloning process is currently incomplete because the eval invoker (generated via ASM) remains the same (same instance) for the 2 evaluators thus resulting in an evaluation with wrong params.",Major,Mario Fusco,,2016-04-22T13:16:11.000-0400,Incomplete cloning of the EvalCondition evaluator,Resolved,bug,Bug
2016-04-28T13:47:41.000-0400,DROOLS-1138,Done,"As far as I can tell, the `javax.mail` specification is part of the JEE 6 (and higher) specifications. 

However, we do *not! exclude the `javax.mail:mail` jar from the `kie-server` wars: See https://github.com/droolsjbpm/droolsjbpm-integration/blob/6.3.x/kie-server-parent/kie-server-wars/kie-server/src/main/assembly/assembly-ee6-container.xml#L48-L59

(`javax.mail:mail` is being included via the `jbpm-human-task-core` jar, which the `kie-server-services-jbpm` jar depends on.)

Community users have reported running into classpath problems, which seem to be due to the inclusion of the `javax.mail:mail` jar 


 In the JSR-316 (JEE 6 Specification) PDF, I found the following: 

{quote}
EE.2.7.10JavaMail™
Many Internet applications require the ability to send email notifications, so the Java EE platform includes the JavaMail API along with a JavaMail service provider that allows an application component to send Internet mail. The JavaMail API has two parts: an application-level interface used by the application components to send mail, and a service provider interface used at the Java EE SPI level.""
{quote}",Major,Maciej Swiderski,,2016-04-22T10:43:16.000-0400,Exclude the javax.mail jar from the kie-server war,Resolved,bug,Bug
2016-08-30T13:20:00.000-0400,DROOLS-1265,Done,"A rule with the following ClassCastException at runtime

{code:java}
rule R when
  accumulate ( Adult( $child: /children ) ; $avg: average ($child.getAge()) )
then
  ...
{code}

would fail with the 

{code:java}
java.lang.RuntimeException: java.lang.ClassCastException: org.drools.core.reteoo.SubnetworkTuple cannot be cast to org.drools.compiler.xpath.Child
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:106)
	at org.drools.core.phreak.PhreakAccumulateNode.addMatch(PhreakAccumulateNode.java:769)
	at org.drools.core.phreak.PhreakAccumulateNode.doLeftInserts(PhreakAccumulateNode.java:176)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:97)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:534)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:505)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:198)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:141)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:969)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1311)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1250)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1353)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1344)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1325)
	at org.drools.compiler.xpath.XpathTest.testAccumulate(XpathTest.java:991)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.ClassCastException: org.drools.core.reteoo.SubnetworkTuple cannot be cast to org.drools.compiler.xpath.Child
	at defaultpkg.Rule_R138182734AccumulateExpression0Invoker.evaluate(Rule_R138182734AccumulateExpression0Invoker.java:19)
	at org.drools.core.base.accumulators.JavaAccumulatorFunctionExecutor.accumulate(JavaAccumulatorFunctionExecutor.java:109)
	at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:98)
	... 42 more
{code}",Major,Matteo Mortari,,2016-08-30T12:24:19.000-0400,OOPath use in accumulate throws ClassCastException at runtime,Resolved,bug,Bug
2015-04-16T11:31:18.000-0400,DROOLS-748,Done,"In MultithreadTest classes (there are two of them) method testSlidingTimeWindows() uses unreliable Thread.sleep(1) call for waiting for fact insertion. Thread.sleep(1) doesn't wait for exactly 1 millisecond, because there is overhead from thread scheduler. This overhead can be pretty large in contrast to expected 1ms sleep. ",Minor,Mario Fusco,,2015-03-24T05:21:26.000-0400,MultithreadTest.testSlidingTimeWindows() uses unreliable Thread.sleep(1).,Resolved,bug,Bug
2015-08-27T07:42:18.000-0400,DROOLS-896,Done,ClassObjectType deserialization don't use the ClassLoader stored in the DroolsObjectInput and then is not able to instance the right Class object under OSGi.,Major,Mario Fusco,,2015-08-27T07:39:20.000-0400,ClassObjectType deserialization doesn't work under OSGi,Resolved,bug,Bug
2015-08-28T11:22:31.000-0400,DROOLS-897,Done,"In this example I have more classes that extends EntityBase (my class). In my intention, i would assign to variable $entity one of this class that is inserted in Ksession fact.

I insert fact of CtbMovrCoan class
In when statement of the rule at row 16, variable $entity is correctely, 
but in then statement variable $entity becomes JtbRLavt class (first declared in then cond) and this behavior throw a ClassCastException, obviously.

Can Help me?",Major,Mario Fusco,,2015-08-27T08:56:57.000-0400,Binding variable or condition,Resolved,bug,Bug
2016-05-26T11:19:18.000-0400,DROOLS-1193,Done,"{code}
    [INFO] java.lang.NoClassDefFoundError: java.lang.management.ManagementFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.

    [INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:52)

    [INFO]  at org.drools.core.util.MemoryUtil.<clinit>(MemoryUtil.java:33)

    [INFO]  at java.lang.Class.forName0(Native Method)

    [INFO]  at java.lang.Class.forName(Class.java:195)

    [INFO]  at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)

    [INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:65)

    [INFO]  at org.drools.core.RuleBaseConfiguration.setPermGenThreshold(RuleBaseConfiguration.java:583)

    [INFO]  at org.drools.core.RuleBaseConfiguration.init(RuleBaseConfiguration.java:451)

    [INFO]  at org.drools.core.RuleBaseConfiguration.init(RuleBaseConfiguration.java:429)

    [INFO]  at org.drools.core.RuleBaseConfiguration.<init>(RuleBaseConfiguration.java:278)

    [INFO]  at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieBaseConfiguration(KieServicesImpl.java:185)
{code}

the problem is in this code:

{code}
    static {
        if (!hasPermGen() || ClassUtils.isAndroid()) { // hasPermGen is true because GAE doesn't support java 8 yet
            permGenStats = new DummyMemoryStats();
        } else {
            MemoryPoolMXBean permGenBean = null;
            for (MemoryPoolMXBean mx : ManagementFactory.getMemoryPoolMXBeans()) { // <=== EXCEPTION
                if (mx.getName() != null && mx.getName().contains(""Perm"")) {
                    permGenBean = mx;
                    break;
                }
            }
            permGenStats = new MBeanMemoryStats(permGenBean);
        }
    }
{code}",Major,Mario Fusco,,2016-05-25T14:36:43.000-0400,MemoryUtil's static constructor call to ManagementFactory.getMemoryPoolMXBeans() fails on Google App Engine,Resolved,bug,Bug
2016-05-25T11:56:23.000-0400,DROOLS-1192,Done,"Assuming you have a rule name ""rule（hello）"",

{noformat}
package com.sample

rule ""rule（hello）""
    when
    then
end
{noformat}

Here, ' （' and '）' ...  U+FF08 (FULLWIDTH LEFT PARENTHESIS) and U+FF09 (FULLWIDTH RIGHT PARENTHESIS) are not a Java identifier part. The rule fails to compile.

{noformat}
Rule Compilation error : [Rule name='rule（hello）']
	com/sample/Rule_rule（hello）0.java (3:84) : Syntax error on tokens, delete these tokens
	com/sample/Rule_rule（hello）0.java (3:97) : The public type Rule_rule must be defined in its own file
	com/sample/Rule_rule（hello）0.java (3:115) : Syntax error, insert ""}"" to complete Block
	com/sample/Rule_rule（hello）0.java (4:121) : Syntax error on tokens, delete these tokens
	com/sample/Rule_rule（hello）0.java (6:187) : Syntax error on token ""void"", @ expected
	com/sample/Rule_rule（hello）0.java (6:211) : Syntax error on token(s), misplaced construct(s)
	com/sample/Rule_rule（hello）0.java (6:238) : Syntax error on token ""throws"", @ expected
	com/sample/Rule_rule（hello）0.java (6:255) : Syntax error, insert ""enum Identifier"" to complete EnumHeader
	com/sample/Rule_rule（hello）0.java (11:332) : Syntax error on token ""}"", delete this token
{noformat}

But such a non-java identifier part should be normalized by org.drools.compiler.rule.builder.dialect.DialectUtil.normalizeRuleName() during the build. The problem is that DialectUtil.normalizeRuleName() misses to process the name because of NON_ALPHA_REGEX check. NON_ALPHA_REGEX doesn't take account into Unicode characters.
",Major,Mario Fusco,,2016-05-25T01:27:27.000-0400,DialectUtil.normalizeRuleName() doesn't normalize multibyte rule names,Closed,bug,Bug
2016-05-26T10:58:39.000-0400,DROOLS-1195,Done,If an incremental compilation requires a segment split or merge the position of the TimerNode inside the new segment is not set acordingly,Major,Mario Fusco,,2016-05-26T08:01:02.000-0400,Segment split/merge doesn't adjust the position of a TimerNode in its own segment,Resolved,bug,Bug
2016-05-26T11:19:47.000-0400,DROOLS-1194,Done,"Creating a KieSession from a KieContainer fails on Google App Engine. See stacktrace:

{code}
[INFO] java.lang.NoClassDefFoundError: javax.naming.InitialContext is a restricted class. Please see the Google  App Engine developer's guide for more details.
[INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:52)
[INFO]  at org.drools.compiler.kie.util.CDIHelper$BeanCreatorHolder.lookupBeanManager(CDIHelper.java:147)
[INFO]  at org.drools.compiler.kie.util.CDIHelper$BeanCreatorHolder.loadBeanCreator(CDIHelper.java:140)
[INFO]  at org.drools.compiler.kie.util.CDIHelper$BeanCreatorHolder.<clinit>(CDIHelper.java:137)
[INFO]  at java.lang.Class.forName0(Native Method)
[INFO]  at java.lang.Class.forName(Class.java:195)
[INFO]  at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
[INFO]  at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:65)
[INFO]  at org.drools.compiler.kie.util.CDIHelper.wireListnersAndWIHs(CDIHelper.java:45)
[INFO]  at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:621)
[INFO]  at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieSession(KieContainerImpl.java:585)
[INFO]  at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirectorFactory.newKieSession(DroolsScoreDirectorFactory.java:113)
[INFO]  at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.resetKieSession(DroolsScoreDirector.java:68)
[INFO]  at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.setWorkingSolution(DroolsScoreDirector.java:61)
[INFO]  at org.optaplanner.core.impl.solver.scope.DefaultSolverScope.setWorkingSolutionFromBestSolution(DefaultSolverScope.java:198)
[INFO]  at org.optaplanner.core.impl.solver.DefaultSolver.solvingStarted(DefaultSolver.java:196) 
{code}",Major,Mario Fusco,,2016-05-26T04:54:20.000-0400,Creating KieSession from KieContainer fails on Google App Engine,Resolved,bug,Bug
2016-05-30T13:54:32.000-0400,DROOLS-1182,Done,"{noformat}
KieServiesClient.completeConversation() 
{noformat}
will unset *conversationId* just from +KieServiesClient+ instance. It won't delete *conversationId* from other clients instances (ProcessServicesClient,UserTaskServicesClient...)

Kie server client stores *conversationId* as class attribute. It means that it is possible to have more *conversationIds* for one +KieServiesClient+ (one for every client implementing +AbstractKieServicesClientImpl+) and it is not possible to unset conversationId for most of the clients (just +KieServiesClient+ has *completeConversation* method). ",Major,Maciej Swiderski,,2016-05-19T03:49:39.000-0400,KieServiesClient.completeConversation() won't unset all conversationIds,Resolved,bug,Bug
2015-08-14T09:25:19.000-0400,DROOLS-881,Done,"When you call kcontainer.updateToVersion() while running sliding window rules, you will the following Exception.

{noformat}
Exception in thread ""pool-23-thread-2"" java.lang.ClassCastException: org.drools.core.reteoo.PathMemory cannot be cast to org.drools.core.reteoo.WindowNode$WindowMemory
	at org.drools.core.reteoo.WindowNode.retractRightTuple(WindowNode.java:189)
	at org.drools.core.reteoo.ObjectTypeNode.doRetractObject(ObjectTypeNode.java:325)
	at org.drools.core.reteoo.ObjectTypeNode.retractObject(ObjectTypeNode.java:317)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl$WorkingMemoryReteExpireAction.execute(StatefulKnowledgeSessionImpl.java:1770)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:69)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2007)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1289)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1272)
	at com.sample.CallKjarTest$2.run(CallKjarTest.java:67)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
{noformat}

",Major,Mario Fusco,,2015-08-13T03:00:40.000-0400,ClassCastException when kcontainer.updateToVersion() with sliding window rule running,Resolved,bug,Bug
2015-08-14T14:18:16.000-0400,DROOLS-882,Done,"Using a variable on the left of 'matches' fails in 6.2.0.FInal, when it worked in 6.1.0.Final.  E.g.

when
  Fact( $field : field )
  RegEx( $field matches pattern )

results in
[Error: unable to resolve method: defaultpkg.RegEx.$field() [arglength=0]]
[Near : {... $field ~= pattern ....}]

This can be worked around for the positive case by simply moving the constraint, e.g.

when
  RegEx( $pattern : pattern )
  Fact( field matches $pattern )

But it makes it impossible to find facts that are not matched by any regex, e.g.

when
  Fact( $field : field )
  not RegEx( $field matches pattern )",Major,Mario Fusco,,2015-08-14T00:00:19.000-0400,Variable on left of matches operator causes 'unable to resolve method' error,Resolved,bug,Bug
2015-01-29T08:03:35.000-0500,DROOLS-700,Done,"When a collect accumulator is in a subnetwork the left tuple is unwrapped twice causing a ClassCastException like the following:

java.lang.RuntimeException: java.lang.ClassCastException: ExpectedMessage cannot be cast to org.drools.core.reteoo.LeftTuple
at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:90)
at org.drools.core.phreak.PhreakAccumulateNode.reaccumulateForLeftTuple(PhreakAccumulateNode.java:833)
at org.drools.core.phreak.PhreakAccumulateNode.doLeftUpdatesProcessChildren(PhreakAccumulateNode.java:401)
at org.drools.core.phreak.PhreakAccumulateNode.doLeftUpdates(PhreakAccumulateNode.java:301)
at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:72)
at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:562)
at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:533)
at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:334)
at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:224)
at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:166)
at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:116)
at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:231)
at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:106)
at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1008)
at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1294)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1289)
at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1262)
at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:109)
at org.drools.core.command.runtime.rule.FireAllRulesCommand.execute(FireAllRulesCommand.java:34)
at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:155)
at org.drools.core.command.runtime.BatchExecutionCommandImpl.execute(BatchExecutionCommandImpl.java:76)
at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:321)

Caused by: java.lang.ClassCastException: ExpectedMessage cannot be cast to org.drools.core.reteoo.LeftTuple
at org.drools.core.base.accumulators.CollectAccumulator.accumulate(CollectAccumulator.java:95)
at org.drools.core.rule.SingleAccumulate.accumulate(SingleAccumulate.java:82)
... 50 more",Major,Mario Fusco,,2015-01-29T07:59:58.000-0500,ClassCastException using collect accumulator,Resolved,bug,Bug
2015-07-01T09:56:50.000-0400,DROOLS-835,Done,"The DRL dumper may fail on Windows because of invalid characters in the filenames. The code currently replaces only the slashes, it should replace all the reserved Windows characters.

See e.g. https://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx",Major,Petr Široký,,2015-07-01T09:42:26.000-0400,DRL dumper: invalid filenames on Windows,Resolved,bug,Bug
2016-01-26T10:26:50.000-0500,DROOLS-1040,Done,"When Kie server is run on Tomcat container with org.kie.integration.tomcat.JACCValve configured then JBPM operations which needs authorisation invoked on Kie server fails with:
""User '[UserImpl:'Roles']' does not have permissions to execute operation..."".

Error happens just with JACCValve which is used for Workbench, so this isn't critical issue.

Issue is caused by JACCValve which register PolicyContextHandler with Subject returning 2 principals in HashSet, one principal represents user, second represent its roles. 
JACCIdentityProvider in Kie server in method getName() returns first principal from Subject which it finds, in case it is roles principal then is returned ""Roles"" as user name, which is wrong.",Minor,Karel Suta,,2016-01-25T08:21:41.000-0500,Kie server on Tomcat with JACCValve fails authorisation,Resolved,bug,Bug
2015-07-27T04:20:12.000-0400,DROOLS-859,Done,"When loading a KieContainer from the classpath, my KieBase contains DRLs from the wrong package. It seems that the package names are incorrectly parsed.

See reproducer here: https://github.com/DuncanDoyle/drools-kmodule-packages-issue

Run {{mvn clean test}} to reproduce the problem

The reproducer has a {{kmodule.xml}} which defines a default KieBase that should contain the rule resources in the package ""rules"". The ""src/main/resources"" directory contains 3 folders, {{META-INF}}, {{rules}} and {{myrules}}. The latter 2 directories both contain a  DRL file with a single rule. The name of this rule is the same in both DRLs.

When running the test (which actually doesn't do much other than loading a KieSession, inserting a fact, firing rules and dispose), the test fails with the message that there are duplicate rule names. This is caused by the fact that the DRLs in both folders are loaded into the KieBase instead of just the DRL in the {{rules}} folder (as defined in the {{kmodule.xml}}).

When you change the {{myrules}} folder name to {{mrulesj}}, the test succeeds.",Major,Mario Fusco,,2015-07-24T07:28:14.000-0400,Incorrect packages in KieBase,Resolved,bug,Bug
2015-07-27T11:01:25.000-0400,DROOLS-863,Done,"This does NOT happen for the release build, only for snapshots.

There are various things that influence this behavior. The problem is the difference between 6.3.0-SNAPSHOT.jar and 6.3.0-20150102121212.jar (timed snapshot). The Class-Path: element in MANIFEST.MF may contain both, depending if the Drools (or KIE API) artifacts were built locally. The drools-distribution will always include timed snapshots, so in case the MANIFEST.MF contains just -SNAPSHOT, the runExamples.sh/bat does not have correct classpath and they fail.

The jar file in the /binaries is kie-api-6.3.0-20150727.045553-594.jar, but in the drools-examples.jar manifest.mf it says kie-api-6.3.0-SNAPSHOT instead...

{code}
Exception in thread ""AWT-EventQueue-0"" java.lang.NoClassDefFoundError: Lorg/kie/api/KieBase;
	at java.lang.Class.getDeclaredFields0(Native Method)
	at java.lang.Class.privateGetDeclaredFields(Class.java:2583)
	at java.lang.Class.getDeclaredFields(Class.java:1916)
	at com.thoughtworks.xstream.mapper.AnnotationMapper.processTypes(AnnotationMapper.java:204)
	at com.thoughtworks.xstream.mapper.AnnotationMapper.processAnnotations(AnnotationMapper.java:164)
	at com.thoughtworks.xstream.XStream.processAnnotations(XStream.java:1971)
	at com.thoughtworks.xstream.XStream.processAnnotations(XStream.java:1982)
	at org.optaplanner.core.impl.solver.XStreamXmlSolverFactory.buildXStream(XStreamXmlSolverFactory.java:51)
	at org.optaplanner.core.impl.solver.XStreamXmlSolverFactory.<init>(XStreamXmlSolverFactory.java:59)
	at org.optaplanner.core.api.solver.SolverFactory.createFromXmlResource(SolverFactory.java:45)
	at org.optaplanner.examples.nqueens.app.NQueensApp.createSolverByXml(NQueensApp.java:72)
	at org.optaplanner.examples.nqueens.app.NQueensApp.createSolver(NQueensApp.java:64)
	at org.optaplanner.examples.common.app.CommonApp.createSolutionBusiness(CommonApp.java:90)
	at org.optaplanner.examples.common.app.CommonApp.init(CommonApp.java:77)
	at org.optaplanner.examples.app.OptaPlannerExamplesApp$1.actionPerformed(OptaPlannerExamplesApp.java:183)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2346)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:289)
	at java.awt.Component.processMouseEvent(Component.java:6525)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6290)
	at java.awt.Container.processEvent(Container.java:2234)
	at java.awt.Component.dispatchEventImpl(Component.java:4881)
	at java.awt.Container.dispatchEventImpl(Container.java:2292)
	at java.awt.Component.dispatchEvent(Component.java:4703)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4898)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4533)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4462)
	at java.awt.Container.dispatchEventImpl(Container.java:2278)
	at java.awt.Window.dispatchEventImpl(Window.java:2750)
	at java.awt.Component.dispatchEvent(Component.java:4703)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:86)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:75)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)
Caused by: java.lang.ClassNotFoundException: org.kie.api.KieBase
	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	... 52 more
{code}",Minor,Petr Široký,,2015-07-27T10:40:11.000-0400,Building drools-distribution SNAPSHOT locally breaks runExamples.sh/bat,Resolved,bug,Bug
2015-07-28T06:44:28.000-0400,DROOLS-858,Done,"A LHS like this:

{code}
$map : Map()
$simpleTestObject : NonStringConstructorClass (something==""simpleTestObject"")
Entry (
  getKey() == $simpleTestObject
) from $map.entrySet()
{code}

fails at runtime with a NoSuchMethodError, when incompatible objects are compared (Map with object vs. custom Object) and the execution is jitted.

The generated evaluation method looks like this:
{code}
  public boolean evaluate(InternalFactHandle paramInternalFactHandle, InternalWorkingMemory paramInternalWorkingMemory, LeftTuple paramLeftTuple)
  {
    LeftTuple localLeftTuple = paramLeftTuple;
    NonStringConstructorClass localNonStringConstructorClass2 = (NonStringConstructorClass)this.declarations[0].getValue(paramInternalWorkingMemory, localLeftTuple.getHandle().getObject());
    Object localObject = ((Map.Entry)paramInternalFactHandle.getObject()).getKey();
    NonStringConstructorClass localNonStringConstructorClass1 = localNonStringConstructorClass2;
    if (localObject != null)
    {
      if ((localObject instanceof NonStringConstructorClass)) {
        localObject = (NonStringConstructorClass)localObject;
      } else {
        localObject = new NonStringConstructorClass(localObject.toString());
      }
    }
    else
    {
      tmpTernaryOp = (localNonStringConstructorClass1 != null ? 0 : true;
      break label123;
    }
    label123:
    return localNonStringConstructorClass1 == null ? false : ((NonStringConstructorClass)localObject).equals(localNonStringConstructorClass1);
  }
}
{code}

It seem that, a fallback for primitive types was included, by calling the constructor of an object with the object's toString() output:
{code}
localObject = new NonStringConstructorClass(localObject.toString());
{code}

At runtime this fails, if no such constructor exists.",Major,Mario Fusco,,2015-07-24T05:40:19.000-0400,NoSuchMethodError on JIT Compilation of non-primitive comparison,Resolved,bug,Bug
2015-07-27T03:06:50.000-0400,DROOLS-860,Done,None,Major,Mario Fusco,,2015-07-24T09:45:32.000-0400,Deleting a trait should delete the core object as well,Closed,bug,Bug
2016-01-27T13:16:20.000-0500,DROOLS-1041,Done,"Drools build currently fails during Javadoc generation, when executed on Java 8.

{code}
[ERROR] javadoc: error - com.sun.tools.doclets.internal.toolkit.util.DocletAbortException: java.lang.ClassCastException: com.sun.tools.doclets.formats.html.PropertyWriterImpl cannot be cast to com.sun.tools.doclets.formats.html.AbstractExecutableMemberWriter
[ERROR] 
[ERROR] Command line was: /home/_opt/tools/jdk1.8.0_51/jre/../bin/javadoc -J-Xmx512m -J-Xms128m @options @packages

{code}",Critical,Petr Široký,,2016-01-26T07:33:25.000-0500,Javadoc build error on Java 8,Resolved,bug,Bug
2015-09-15T08:04:08.000-0400,DROOLS-913,Done,"When deleting an object from a session all references to the object itself and the fact handle holding it should disappear. Unfortunately, as demonstrated by the test case below, in some case the deleted fact can remain as a deleted left tuple in the memory of an unlinked segment.

{code}
    @Test
    public void testBetaMemoryLeakOnFactDelete() {
        String drl =
                ""rule R1 when\n"" +
                ""    $a : Integer(this == 1)\n"" +
                ""    $b : String()\n"" +
                ""    $c : Integer(this == 2)\n"" +
                ""then \n"" +
                ""end\n"" +
                ""rule R2 when\n"" +
                ""    $a : Integer(this == 1)\n"" +
                ""    $b : String()\n"" +
                ""then \n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build()
                                             .newKieSession();

        FactHandle fh1 = ksession.insert(1);
        FactHandle fh2 = ksession.insert(""test"");
        ksession.fireAllRules();

        ksession.delete(fh1);
        ksession.delete(fh2);
        ksession.fireAllRules();

        NodeMemories nodeMemories = ((InternalWorkingMemory) ksession).getNodeMemories();
        for (int i = 0; i < nodeMemories.length(); i++) {
            Memory memory = nodeMemories.peekNodeMemory( i );
            if ( memory != null && memory.getSegmentMemory() != null ) {
                SegmentMemory segmentMemory = memory.getSegmentMemory();
                System.out.println( memory );
                LeftTuple deleteFirst = memory.getSegmentMemory().getStagedLeftTuples().getDeleteFirst();
                System.out.println( deleteFirst );
                assertNull( deleteFirst );
            }
        }
    }
{code}",Major,Mario Fusco,,2015-09-14T11:52:29.000-0400,Memory leak when deleting a tuple from an unlinked segment,Resolved,bug,Bug
2015-09-10T10:34:25.000-0400,DROOLS-904,Done,"Trait proxy classes are created lazily at runtime when a trait is instantiated for the first time.
Deserializing a previously persisted session containing a proxy instance requires the 
proxy class to be available to the KieBase's project class loader by the time the session is
restored. However, a freshly recreated KieBase for the purpose of restoring a session will
not have the proper classes loaded.

Note: to date, existing serialization tests reuse the same KieBase, thus not showing the issue.

 
",Blocker,Mario Fusco,,2015-09-04T20:15:21.000-0400,Trait proxy classes are not restored on persistent session deserialization,Resolved,bug,Bug
2015-03-25T11:30:29.000-0400,DROOLS-742,Done,"Failing test is from drools-wb repo.

Test methods testConditions() and testConditionsIndexedParameters() fails on jdk8.

XLS files used in these methods contain multiple parameters column (column with more parameters than one). When XLS is parsed, these parameters are transformed into child columns of BRLConditionColumn. In ParameterUtilities class is method extractTemplateKeys. This method extracts params from preprocessed original string from XLS table cell containing parameters. But because the method uses HashSet as return value, the ordering of parameters cannot be determined (in HashSet, the order of items can be different than the order in which the items were inserted). ",Minor,Michael Anstis,,2015-03-17T11:41:27.000-0400,DecisionTableXLSToDecisionTableGuidedConverterTest fails on jdk8,Resolved,bug,Bug
2015-03-25T06:47:08.000-0400,DROOLS-749,Done,"When a KieSession is deserialized the events present in the old serialized session are reasserted into the new session. Then if one of this event causes a scheduler to be immediately triggered this is done in a callback out of the main evaluation loop. This implies that the left tuples resulting from the triggering of the scheduler aren't propagated to the sink of the TimerNode which created the scheduler itself. This missing propagation can, in some circumstances, cause a NullPointerException like the following:

{code}
java.lang.NullPointerException
	at org.drools.core.phreak.PhreakTimerNode.doLeftDeletes(PhreakTimerNode.java:197)
	at org.drools.core.phreak.PhreakTimerNode.doNode(PhreakTimerNode.java:63)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:364)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:163)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:118)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:254)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:108)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1022)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1352)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1318)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1301)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1280)
{code}",Critical,Mario Fusco,,2015-03-25T06:26:37.000-0400,Events deserialization is broken,Resolved,bug,Bug
2015-12-24T05:33:44.000-0500,DROOLS-1014,Done,"I ran into an issue loading the session from my JPA.

I am getting this stacktrace:

http://pastebin.com/PMKpdBWM

This is happening for this rule: 
http://pastebin.com/HZmLmsEH

And this module:
http://pastebin.com/2Q6k73tC

What I am doing is: 

1. Create a new session
2. Insert an ApplicationEvent 
3. fireAllRules
4. Reload -> OOM 

The ApplicationEvent has a list of 6345 facts in there. I load them from a CSV file, and use drools to insert them into my knowledge base as facts. 
When I restart my server and have the session reloaded, it ooms when trying to deserialize the session. 

I am still looking for a workaround. I am not sure what is happening and could not find any more info at this point.

I am using:

JPA + Hibernate 4.2.21.Final
org.codehaus.btm:btm:2.1.4 as a standalone JTA platform 

Let me know if there's any other info needed.

Thanks,

Artur
",Critical,Mario Fusco,,2015-12-22T08:29:04.000-0500,Drools OOM when loading session,Resolved,bug,Bug
2015-01-20T14:27:38.000-0500,DROOLS-693,Done,"See the following forum posts:

[drools-usage] Loading Kie jar via HTTP causing HTTP 500 Error

[drools-usage] integrate external project jar (created by WB) into our web application

These both do something similar to this:

{code}
KieServices ks = KieServices.Factory.get();
KieRepository kr = ks.getRepository();
UrlResource urlResource = (UrlResource) ks.getResources().newUrlResource(""http://ip:9080/kie-drools-wb-distribution/maven2/com/ost/myproj/1.0/myproj-1.0.jar"");
urlResource.setUsername(""username"");
urlResource.setPassword(""password"");
urlResource.setBasicAuthentication(""enabled"");

InputStream is = null;
    try {
        is = urlResource.getInputStream();
        KieModule kModule = kr.addKieModule( ks.getResources().newInputStreamResource(is) );
...
{code}

UrlResources's grabStream() and grabLastMod() methods do not Base64 encode the UID:PWD in accordance with HTTP Specification http://tools.ietf.org/html/rfc2617#page-5.

I'd be tempted to further improve UrlResource to only append Basic Authentication information *if* Basic Authentication has been enabled on the  UrlResource instance. ",Major,Michael Anstis,,2015-01-20T04:59:03.000-0500,UrlResource does not handle Basic Authentication correctly,Resolved,bug,Bug
2016-10-07T05:14:48.000-0400,DROOLS-1320,Done,"drools-compiler is optionally importing {{org.kie.scanner}} package as that is needed to work with the {{kie-ci}} in OSGi. The package import is, however, incorrect: {{=org.kie.scanner.\*;resolution:=optional}} will _not_ get transformed into the actual package name, but rather stays as {{org.kie.scanner.*}}, which is not valid. This needs to be changed to just {{org.kie.scanner}}.",Major,Petr Široký,,2016-10-06T08:22:41.000-0400,[OSGi] drools-compiler uses wrong package name to import kie-ci,Resolved,bug,Bug
2015-08-26T05:42:14.000-0400,DROOLS-895,Done,The IdentityHashMap in ClassFieldAccessorStore.BaseLookupEntry retains entries forever even when an incremental compilation makes the old ones no longer necessary. This causes a memory leak that could lead to an OutOfMemoryError especially when a KieBase is updated to a newer version many times.,Major,Mario Fusco,,2015-08-26T05:36:29.000-0400,Memory leak caused by IdentityHashMap in ClassFieldAccessorStore.BaseLookupEntry,Closed,bug,Bug
2015-03-05T08:48:20.000-0500,DROOLS-734,Done,Compiling a temporal constraint that uses a non-existing declaration causes a NPE instead of the emission of a compilation failure.,Major,Mario Fusco,,2015-03-05T08:41:47.000-0500,NPE when compiling a temporal constraint with a non-existing declaration,Resolved,bug,Bug
2014-10-10T11:59:07.000-0400,DROOLS-629,Done,"I have observed that the following NullPointerException (NPE) occurs consistently with a very specific set of rules and a very specific set of inputs into a stream session:
{code}
java.lang.NullPointerException
    at org.drools.core.util.AbstractHashTable$SingleIndex.equal(AbstractHashTable.java:491)
    at org.drools.core.util.index.LeftTupleList.matches(LeftTupleList.java:266)
    at org.drools.core.util.index.LeftTupleIndexHashTable.get(LeftTupleIndexHashTable.java:434)
    at org.drools.core.util.index.LeftTupleIndexHashTable.getFirst(LeftTupleIndexHashTable.java:217)
    at org.drools.core.reteoo.BetaNode.getFirstLeftTuple(BetaNode.java:443)
    at org.drools.core.phreak.PhreakJoinNode.doRightInserts(PhreakJoinNode.java:144)
    at org.drools.core.phreak.PhreakJoinNode.doNode(PhreakJoinNode.java:56)
    at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:548)
    at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:534)
    at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:334)
    at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:161)
    at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:116)
    at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:229)
    at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:98)
    at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:988)
    at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1274)
    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
    at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1254)
    ...
{code}

The exception always occurs on the next call to ""insert"" and ""fireAllRules"" after the following method is invoked within the session: org.drools.core.common.DefaultAgenda$DefaultGarbageCollector.forceGcUnlinkedRules().

I have attached a maven project that contains a JUnit test, which reproduces this exception using Drools version 6.2.0.Beta3.

A side effect of this exeption occurring in the middle of fireAllRules is that an extra fact is left over in working memory, which is essentially a memory leak. I assume this is because the evaluation of the LHS of the rules is what causes the NPE to occur, so the fact is not deleted, because the RHS of the rules don't execute.",Major,Mario Fusco,,2014-10-08T08:50:00.000-0400,NullPointerException thrown on next call to insert and fireAllRules after stream garbage collection runs,Resolved,bug,Bug
2015-05-22T04:42:18.000-0400,DROOLS-790,Done,"Updating a KieContainer to a newer version with a KieSession created from it and having a registered KieRuntimeLogger causes the following exception:

java.lang.NullPointerException
	at org.drools.core.audit.WorkingMemoryLogger.beforeKiePackageAdded(WorkingMemoryLogger.java:597)
	at org.drools.core.event.KieBaseEventSupport.fireBeforePackageAdded(KieBaseEventSupport.java:85)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:778)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:739)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackage(KnowledgeBaseImpl.java:1415)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.newPackage(KnowledgeBuilderImpl.java:1464)
	at org.drools.compiler.builder.impl.TypeDeclarationCache.registerTypeDeclaration(TypeDeclarationCache.java:100)
	at org.drools.compiler.builder.impl.TypeDeclarationCache.getAndRegisterTypeDeclaration(TypeDeclarationCache.java:79)
	at org.drools.compiler.builder.impl.TypeDeclarationBuilder.getAndRegisterTypeDeclaration(TypeDeclarationBuilder.java:53)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.getAndRegisterTypeDeclaration(KnowledgeBuilderImpl.java:1618)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:303)
	at org.drools.compiler.rule.builder.PatternBuilder.build(PatternBuilder.java:145)
	at org.drools.compiler.rule.builder.GroupElementBuilder.build(GroupElementBuilder.java:66)
	at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:99)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addRule(KnowledgeBuilderImpl.java:1727)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1022)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:900)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:301)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:107)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:91)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.rebuildAll(KieContainerImpl.java:354)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.update(KieContainerImpl.java:192)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.updateToVersion(KieContainerImpl.java:113)
	at org.drools.compiler.integrationtests.IncrementalCompilationTest.testUpdateVersionWithKSessionLogger(IncrementalCompilationTest.java:1525)
",Major,Mario Fusco,,2015-05-22T04:38:47.000-0400,NPE during incremental compilation of a KSession with a registered logger,Resolved,bug,Bug
2015-05-18T08:51:24.000-0400,DROOLS-783,Done,"The migration of a rules repository from Guvnor 5.x to KIE WB shows the following error

java.io.FileNotFoundException: File modules.xml not found

during the JCR import phase.

Detail:

Jcr import started. Reading from import directory ({/home/ecs/brain/migration/drools-wb-jcr2vfs-distribution-6.2.0.Final/bin/tmp-jcr2vfs}).
  Category import started
  Category import ended
  Module import started
java.io.FileNotFoundException: File modules.xml not found
	at org.drools.workbench.jcr2vfsmigration.common.FileManager.getFile(FileManager.java:163)
	at org.drools.workbench.jcr2vfsmigration.common.FileManager.getModulesExportFile(FileManager.java:54)
	at org.drools.workbench.jcr2vfsmigration.common.FileManager$Proxy$_$$_WeldClientProxy.getModulesExportFile(FileManager$Proxy$_$$_WeldClientProxy.java)
	at org.drools.workbench.jcr2vfsmigration.vfsImport.ModuleAssetImporter.importAll(ModuleAssetImporter.java:114)
	at org.drools.workbench.jcr2vfsmigration.vfsImport.ModuleAssetImporter$Proxy$_$$_WeldClientProxy.importAll(ModuleAssetImporter$Proxy$_$$_WeldClientProxy.java)
	at org.drools.workbench.jcr2vfsmigration.VfsImporter.importAll(VfsImporter.java:80)
	at org.drools.workbench.jcr2vfsmigration.VfsImporter$Proxy$_$$_WeldClientProxy.importAll(VfsImporter$Proxy$_$$_WeldClientProxy.java)
	at org.drools.workbench.jcr2vfsmigration.VfsImporterLauncher.launchImport(VfsImporterLauncher.java:57)
	at org.drools.workbench.jcr2vfsmigration.VfsImporterLauncher.run(VfsImporterLauncher.java:49)
	at org.drools.workbench.jcr2vfsmigration.VfsImporterLauncher.main(VfsImporterLauncher.java:34)",Major,Edson Tirelli,,2015-05-14T09:49:27.000-0400,Error migrating repository from 5.x to 6.2,Resolved,bug,Bug
2016-04-01T12:00:24.000-0400,DROOLS-1111,Done,None,Major,Mario Fusco,,2016-04-01T10:25:55.000-0400,Listeners registration on stateless session is not thread safe,Closed,bug,Bug
2016-10-14T05:07:56.000-0400,DROOLS-1327,Done,"When you declare a type in a DRL using the ""declare"" syntax, that type cannot be referenced by Drools LHS expressions in a Sequence Flow (for example in the context of an X-OR Gateway). The DRL and BPMN2 file are in the same project.

The problem is the order of compilation of CompositeKnowledgeBuilderImpl. The builder compiles the process definitions before the DRLs, which results in a situation where the declared types used in the process are not yet available in the Drools ProjectClassloader when. the process is compiled.

Easy fix is to compile the process after the rules, which makes sense as the rules will normally not really on processes, but processes can really on rules.",Major,Mario Fusco,,2016-10-13T09:55:01.000-0400,Drools declared types cannot be references in jBPM Drools expressions due to compilation order.,Resolved,bug,Bug
2016-10-14T12:26:12.000-0400,DROOLS-1328,Done,"When a Cep KieSession containing events with expiration is serialized and then deserialized there is a NullPointerExceptions is thrown:

{code:java}
java.lang.NullPointerException
	at org.drools.core.reteoo.ObjectTypeNode$ExpireJobContextTimerInputMarshaller.deserialize(ObjectTypeNode.java:672)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readTimer(ProtobufInputMarshaller.java:709)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:291)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:162)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:116)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:52)
	at org.drools.compiler.integrationtests.CepEspTest$1KieSessionByteArraySerializer.readSession(CepEspTest.java:220)
	at org.drools.compiler.integrationtests.CepEspTest.testSerializationDeserliaizationWithRectractedExpireFact(CepEspTest.java:253)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
{code}

you have a reproducer in PR: https://github.com/droolsjbpm/drools/pull/959

Just run:
{code:bash}
cd drools-compiler
mvn clean test -Dtest=CepEspTest#testSerializationDeserliaizationWithRectractedExpireFact
{code}",Critical,Mario Fusco,,2016-10-13T11:28:02.000-0400,CEP KieSession deserialization NullPointerException with Timer and expiration,Resolved,bug,Bug
2016-10-14T02:49:43.000-0400,DROOLS-1329,Done,When flushing the insertion of an event that is already expired at processing (firing) time it is required that the event should however have at least a chance to produce joins and activations.,Major,Mario Fusco,,2016-10-13T13:29:50.000-0400,Events already expired at insertion time don't have a chance to produce a match,Resolved,bug,Bug
2015-04-08T10:32:22.000-0400,DROOLS-758,Done,"Method visit() from GuidedDecisionTreeModelUnmarshallingVisitor doesn't support rules, that are written in one line (so it doesn't unmarshall them correctly). According to documentation [1] (Block 7.1.2), rule can be written without line separators. Also depending on line separators introduce problems with rules from DRL files that are written on operating systems with different line separator that is on a system where drools engine runs (this can be seen running GuidedDecisionTreeDRLPersistenceUnmarshallingMessagesTest in Windows environment). 

The problematic part of the code: [2]
But there are also other places, where there is parsing line by line used. I.e. [3]. 

Rules should be parsed by keywords without depending on line separator or generally on lines. 

[1] https://docs.jboss.org/drools/release/6.1.0.Final/drools-docs/html_single/#d0e5357
[2] https://github.com/droolsjbpm/drools/blob/007148f6e910a4706f6a20862abc002f4eef8c78/drools-workbench-models/drools-workbench-models-guided-dtree/src/main/java/org/drools/workbench/models/guided/dtree/backend/GuidedDecisionTreeModelUnmarshallingVisitor.java#L138
[3] https://github.com/droolsjbpm/drools/blob/9019854d3427a6079eeea19f548a102a2353276b/drools-workbench-models/drools-workbench-models-commons/src/main/java/org/drools/workbench/models/commons/backend/rule/RuleModelDRLPersistenceImpl.java#L1953",Minor,Michael Anstis,,2015-04-08T08:47:04.000-0400,GuidedDecisionTreeModelUnmarshallingVisitor doesn't support unmarshalling of oneline rules,Resolved,bug,Bug
2015-06-02T05:23:07.000-0400,DROOLS-802,Done,If a cell of a decision contains a 'forall' constraints the quotes are mistakenly removed from the constraint's literal.,Major,Mario Fusco,,2015-06-02T05:04:01.000-0400,Quotes are mistakenly removed from cell value with 'forall' constraints,Resolved,bug,Bug
2014-10-06T09:57:37.000-0400,DROOLS-623,Done,"Debugging of the issue points to De-Activation not able to happen due to RuleExecutor not set dirty upon the call made to BetaNode [line: 369] - doDeleteRightTuple(RightTuple, InternalWorkingMemory, BetaMemory) during reEvaluateNetwork after first time fire of the rule. Further drilling into doDeleteRightTuple indicates memory.unlinkNode(wm) call fails in 
PathMemory.unlinkedSegment as it finds the isRuleLinked() to be false.

if (linkedRule && !isRuleLinked()) {
            doUnlinkRule(wm);
        }

Please see the attached junit test case reproducing the issue. There are two rules R1 and R2. R1 sets up criteria needed by R2. 

There are two changes that make this issue not appear.
1) Setting the value required by (inside the NOT clause) rule before calling  fireAllRules.
2) Removing the NOT clause from R2.
",Major,Mario Fusco,,2014-10-02T00:08:06.000-0400,Rule with NOT causes excessive firing of the rule,Resolved,bug,Bug
2016-02-18T07:20:10.000-0500,DROOLS-1065,Done,"Originally reported and fixed by David Santos (thanks!) via https://github.com/droolsjbpm/drools/pull/511

Description:
Some containers allow deployments of artifacts in ""expanded"" mode (instead of a unique jar/ear/war/... file, al artifacts are deployed full decompressed, so they are directories). This is default with last JBoss Tools and Wildfly (unless you use compressed option for deployments). In that case drools fails to load jar contents.",Major,Petr Široký,,2016-02-18T05:18:57.000-0500,"ClasspathKieProject should not deal "".jar"" always like a file",Resolved,bug,Bug
2016-07-18T04:34:50.000-0400,DROOLS-1229,Done,"When using many same rules with after, event expiration cycles itself. 

Using 64 copies of this rule [1], code here [2] cycles itself. I think it is because when it searches through child and peer tuples, it can find already expired tuple and it tries to expire it again. So the problem is either there or in that there is some cycle in tuple chain. 

[1]
import org.drools.testcoverage.common.model.EventA;
import org.drools.testcoverage.common.model.EventB;
declare org.drools.testcoverage.common.model.EventA @role( event ) @duration(duration) end declare org.drools.testcoverage.common.model.EventB @role( event ) @duration(duration) end rule R0 when 
   $event1: org.drools.testcoverage.common.model.EventA()
   $event2: org.drools.testcoverage.common.model.EventB(this != $event1, this after [1,10] $event1)
then end

[2] https://github.com/droolsjbpm/drools/blob/master/drools-core/src/main/java/org/drools/core/impl/StatefulKnowledgeSessionImpl.java#L1820

I will make a PR with reproducer and proposed fix for this. ",Major,Mario Fusco,,2016-07-12T08:50:10.000-0400,"Event expiration cycles itself when expiring events from large set of same rules with ""after"" operator",Resolved,bug,Bug
2015-09-25T04:19:10.000-0400,DROOLS-921,Done,"I'm debugging a looping test and when I run the attached, it fires no rules",Major,Mario Fusco,,2015-09-17T16:55:20.000-0400,Drools fires no rules with this Drools/CEP test,Resolved,bug,Bug
2015-09-18T13:37:43.000-0400,DROOLS-919,Done,Triggering an incremental compilation (i.e. calling kieContainer.updateToVersion) from inside a rule consequence causes a deadlock because it attempts to update the read lock on the kbase acquired when invoking ksession.fireAllRules() to a write lock.,Major,Mario Fusco,,2015-09-17T10:41:32.000-0400,Triggering an incremental compilation from inside a consequence causes a deadlock,Closed,bug,Bug
2014-09-09T11:20:56.000-0400,DROOLS-594,Done,"Accumulation causes node propagation failure which results in rule firing when it is not supposed to.  Please see attached code file to reproduce the issue. Rule ""RS7402.42.2"" is supposed to fire once but it manages to fire twice without getting deactivate.

2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - ACTIVATION CREATED rule:RS7365.4.6_ activationId:RS7365.4.6_ [1, 2, 3, 4, 12] declarations: $benefitAssessmentResults=BenefitAssessmentResults
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - BEFORE ACTIVATION FIRED rule:RS7365.4.6_ activationId:RS7365.4.6_ [1, 2, 3, 4, 12] declarations: $benefitAssessmentResults=BenefitAssessmentResults
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - OBJECT ASSERTED value:EvaluatedData factId: 13
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - OBJECT MODIFIED value:BenefitAssessmentResults factId: 12
RS7365.4.6_ FIRED
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - AFTER ACTIVATION FIRED rule:RS7365.4.6_ activationId:RS7365.4.6_ [1, 2, 3, 4, 12] declarations: $benefitAssessmentResults=BenefitAssessmentResults
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - ACTIVATION CREATED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 11, 4, 12, 13, 15] declarations: $currentMortgagePaymentAmount=0.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - ACTIVATION CREATED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 10, 4, 12, 13, 14] declarations: $currentMortgagePaymentAmount=0.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - BEFORE ACTIVATION FIRED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 11, 4, 12, 13, 15] declarations: $currentMortgagePaymentAmount=0.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - OBJECT MODIFIED value:EvaluatedData factId: 13
RS7402.42.2_ FIRED
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - AFTER ACTIVATION FIRED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 11, 4, 12, 13, 15] declarations: $currentMortgagePaymentAmount=9180.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - BEFORE ACTIVATION FIRED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 10, 4, 12, 13, 14] declarations: $currentMortgagePaymentAmount=9180.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - OBJECT MODIFIED value:EvaluatedData factId: 13
RS7402.42.2_ FIRED
2014-09-05 23:23:02 INFO  WorkingMemoryConsoleLogger:51 - AFTER ACTIVATION FIRED rule:RS7402.42.2_ activationId:RS7402.42.2_ [1, 2, 3, 5, 10, 4, 12, 13, 14] declarations: $currentMortgagePaymentAmount=18360.0; $evaluatedData=EvaluatedData; $sum_1=9180.0
",Major,Mario Fusco,,2014-09-06T02:27:24.000-0400,Accumulation causes node propagation failure which results in rule firing when it is not supposed to,Closed,bug,Bug
2016-05-18T11:11:14.000-0400,DROOLS-1181,Done,"When an enum constant is used in the context of an _or_-operator as a positional argument to a query, a NullPointerException is thrown with the following stack trace:
{code}
java.lang.NullPointerException
	at org.drools.core.rule.LogicTransformer.processElement(LogicTransformer.java:230)
	at org.drools.core.rule.LogicTransformer.processElement(LogicTransformer.java:251)
	at org.drools.core.rule.LogicTransformer.fixClonedDeclarations(LogicTransformer.java:154)
	at org.drools.core.rule.LogicTransformer.transform(LogicTransformer.java:97)
	at org.drools.core.definitions.rule.impl.RuleImpl.getTransformedLhs(RuleImpl.java:620)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:108)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:106)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1567)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1547)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:920)
	at org.drools.core.impl.KnowledgeBaseImpl.access$000(KnowledgeBaseImpl.java:117)
	at org.drools.core.impl.KnowledgeBaseImpl$1.run(KnowledgeBaseImpl.java:708)
	at org.drools.core.impl.KnowledgeBaseImpl.enqueueModification(KnowledgeBaseImpl.java:716)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:705)
	at org.drools.core.impl.KnowledgeBaseImpl.addKnowledgePackages(KnowledgeBaseImpl.java:273)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:510)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.getKieBase(KieContainerImpl.java:447)
...
{code}",Major,Mario Fusco,,2016-05-18T05:19:54.000-0400,NullPointerException in LogicTransformer,Resolved,bug,Bug
2016-03-11T04:11:55.000-0500,DROOLS-1089,Done,jBPM requires Drools working memory actions to be immediately flushed and then uses Drools force eager activation option. However even when this option is enabled working memory actions that aren't created in a reentrant way (during a rule firing) are enqueued instead of being flushed as expected by jBPM.,Major,Mario Fusco,,2016-03-10T13:32:45.000-0500,Reentrant working memory actions aren't flushed immediately even when eager evaluation is forced,Resolved,bug,Bug
2015-01-02T04:25:06.000-0500,DROOLS-673,Done,"The {{toString()}} method in {{org.drools.core.rule.ConsequenceMetaData}} is not null-safe. It assumes that the {{List}} {{statements}} contains at least one element. 

This is a problem when the method gets invoked during the serialization-based deep clone effected during initialization under certain conditions (see the ""Reproduce"" section).

With this combination, code in {{java.io.ObjectOutputStream}} ends up invoking the {{toString()}} method in order to print additional information in the stack trace for {{java.io.NotSerializableException}}. I have attached a snippet of the stack trace as a reference.

The code in question is unchanged even in the [latest version in github|https://github.com/droolsjbpm/drools/blob/master/drools-core/src/main/java/org/drools/core/rule/ConsequenceMetaData.java#L34].",Minor,Mario Fusco,,2014-12-29T14:51:32.000-0500,NPE because ConsequenceMetaData.toString is not null-safe,Resolved,bug,Bug
2015-01-02T04:14:56.000-0500,DROOLS-677,Done,"Inner classes are not resolved correctly if qualified using their parent class:

{code}
import Outer;
declare Bean
  field : Outer.Inner // an inner class of Outer
{code}

",Minor,Mario Fusco,,2015-01-02T02:55:19.000-0500,Resolve nested classes when parent is imported,Resolved,bug,Bug
2015-03-16T08:53:04.000-0400,DROOLS-740,Done,"When you write a LHS like this,
{noformat}
Person( name == ""Elizabeth"" + new Long(2L) )
{noformat}

you will face NoSuchMethodError after 20 times evaluation.
{noformat}
testJittedConstraintStringAndLong(org.drools.compiler.integrationtests.Misc2Test)  Time elapsed: 1.216 sec  <<< ERROR!
java.lang.NoSuchMethodError: java.lang.StringBuilder.append(Ljava/lang/Long;)Ljava/lang/StringBuilder;
	at ConditionEvaluator80a8832efb1646d488df2cde72963f02.evaluate(Unknown Source)
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:230)
	at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:187)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:141)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:60)
	at org.drools.core.reteoo.ObjectTypeNode.assertObject(ObjectTypeNode.java:294)
	at org.drools.core.reteoo.EntryPointNode.assertObject(EntryPointNode.java:255)
	at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:277)
	at org.drools.core.common.NamedEntryPoint.insert(NamedEntryPoint.java:237)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1495)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.insert(StatefulKnowledgeSessionImpl.java:1450)
	at org.drools.compiler.integrationtests.Misc2Test.testJittedConstraintStringAndLong(Misc2Test.java:7253)
{noformat}
",Major,Mario Fusco,,2015-03-16T03:31:14.000-0400,NoSuchMethodError at runtime while evaluating String and Long,Resolved,bug,Bug
2016-07-06T11:01:49.000-0400,DROOLS-1224,Done,"I updated a kie-container's release Id using ""UpdateReleaseIdCommand"". It worked fine, but after the server restart it's going back to the old release Id's version.",Major,Maciej Swiderski,,2016-07-05T12:22:13.000-0400,Not able to update kie-server container version using REST API,Resolved,bug,Bug
2016-10-04T04:53:32.000-0400,DROOLS-1316,Done,"As RHQ/JON is able to discover the MBean for the KieBase and KieSession but unable to locate the MXBean for the KieContainer, would fail to display the whole hierarchy.",Major,Matteo Mortari,,2016-10-03T09:18:11.000-0400,Missing MBean for Classpath KieContainer causes RHQ/JON plug-in failure to display the whole hierarchy,Resolved,bug,Bug
2015-08-20T03:10:43.000-0400,DROOLS-889,Done,"Trying to invoke a method called end() in the RHS of a rule, as in the test case pasted below, causes a compilation failure because drools interprets it as the 'end' soft keyword that terminates the rule. 

{code}
    @Test
    public void testEndMethod() throws Exception {
        // DROOLS-889
        String drl =
                ""import "" + Pattern.class.getCanonicalName() + ""\n"" +
                ""import "" + Matcher.class.getCanonicalName() + ""\n"" +
                ""global java.util.List list\n"" +
                ""rule \""Variable matches field\"" when\n"" +
                ""    $emailAddress :String(this matches \""^.*[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,}).*$\"")\n"" +
                ""then\n"" +
                ""    Pattern pattern=Pattern.compile(\""[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})\"");\n"" +
                ""    Matcher matcher=pattern.matcher($emailAddress);\n"" +
                ""    while(matcher.find()){\n"" +
                ""        list.add($emailAddress.substring(matcher.start(),matcher.end()));\n"" +
                ""    }\n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent(drl, ResourceType.DRL)
                                             .build()
                                             .newKieSession();

        List<String> list = new ArrayList<String>();
        ksession.setGlobal( ""list"", list );

        ksession.insert( ""mario.fusco@test.org"" );
        ksession.fireAllRules();

        assertEquals( 1, list.size() );
        assertEquals( ""mario.fusco@test.org"", list.get(0) );
    }
{code}",Major,Mario Fusco,,2015-08-19T14:00:25.000-0400,Ambiguity with 'end' keyword and end() method in drl file,Closed,bug,Bug
2014-10-07T14:24:43.000-0400,DROOLS-628,Done,"5.2.0.CR1 creates incorrect drl from decision table. With 5.1.0.M1 the drl for the same decision table is correct.

Wrong DRL from 5.2.0.CR1:
rule ""ProcessState""
salience 65522
ruleflow-group ""CompleteSubOrder""
activation-group ""ProcessState""
when
$m:ModifiedMarker(processState==null, state ==null)
$s:SubOrder
then
$m.setIsModified(true);
$s.setProcessState(ProcessState.CREATED);

end

Correct DRL with 5.1.0.M1:
rule ""ProcessState""
salience 65522
ruleflow-group ""CompleteSubOrder""
activation-group ""ProcessState""
when
$m:ModifiedMarker()
$s:SubOrder(processState==null, state ==null)
then
$m.setIsModified(true);
$s.setProcessState(ProcessState.CREATED);

end

The difference is that the constraints are put to $m instead of putting them to $s.

The behaviour in 5.2.0.CR1 is the same for all decision tables in my project and prevents me from upgrading to newer drools versions.
",Major,Mario Fusco,,2014-10-07T14:17:49.000-0400,DecisionTable incorrectly parsed ,Resolved,bug,Bug
2014-10-07T06:53:58.000-0400,DROOLS-627,Done,"A rule with two accumulate function followed by Type(true) select fails to fire the rule.

please note removing the second aggregation makes the Rule R1 fire.

import java.lang.*;
import java.util.*;
import com.test.unittest.TestTwoAccumulateEval.TypeA;  
import com.test.unittest.TestTwoAccumulateEval.TypeB;  
import com.test.unittest.TestTwoAccumulateEval.TypeC;  
import com.test.unittest.TestTwoAccumulateEval.TypeD;  
import com.test.unittest.TestTwoAccumulateEval.TypeDD;  

rule R0
dialect ""java""
when  
   $a : TypeA( )  
   $b : TypeB( parentId == $a.id)  
   $c : TypeC( parentId == $b.id ) 
   $d : TypeD( parentId == $c.id, firings not contains ""Rule R0 Fired"" ) 
then  
	System.out.println(""Rule R0 Fired"");
	$d.setValue(1.0);
	$d.getFirings().add(""Rule R0 Fired"");
	update($d);  
end   

rule R1 
dialect ""java""
when  
   $a : TypeA( )  
   $b : TypeB( parentId == $a.id)  
   $c : TypeC( parentId == $b.id, firings not contains ""Rule R1 Fired"" ) 
   $d : TypeD( parentId == $c.id)
   // Aggregate function [sum] creates a separate context 
	$sumOfAll_1 : Double(doubleValue != Double.MAX_VALUE) from accumulate (
	$a_C1 : TypeA(  ) 
	
	and
	$b_C1 : TypeB( parentId == $a_C1.id)  
    
    and
    $c_C1 : TypeC( parentId == $b_C1.id )
	
	and
	$d_C1 : TypeD( parentId == $c_C1.id , $value_C1 : value , value != 0 ) 
	;sum($value_C1))
    // end of sum aggregation
    
    // Aggregate function [sum] creates a separate context 
	$sumOfAll_2 : Double(doubleValue != Double.MAX_VALUE) from accumulate (
	$a_C2 : TypeA(  ) 
	
	and
	$b_C2 : TypeB( parentId == $a_C2.id)  
    
    and
    $c_C2 : TypeC( parentId == $b_C2.id )
	
	and
	$dd_C2 : TypeDD( parentId == $c_C2.id , $value_C2 : value , value != 0 ) 
	;sum($value_C2))
    // end of sum aggregation

	//eval(($sumOfAll_1 + $sumOfAll_2) > 0)
	//eval returns true however TypeA(true) evaluates to false...removing second aggregate
	//makes TypeA works
	TypeA(eval(($sumOfAll_1 + $sumOfAll_2) > 0))		
then  
	System.out.println(""Rule R1 Fired"");
	$c.getFirings().add(""Rule R1 Fired"");
	update($c);  
end",Major,Mario Fusco,,2014-10-06T21:12:35.000-0400,Rule with two accumulate followed by object type selection fail to fire rule,Resolved,bug,Bug
2014-10-06T13:22:45.000-0400,DROOLS-626,Done,"If collectList in an accumulate is supplied objects of type java.lang.Class, then subsequent examination of the supplied list yields null values rather than the expect Class values.

Test case below. Swapping the comments to make InitClass have a String field instead of a Class field changes the behaviour of the list from collectList to what one would expect.

package com.sample

declare MyClass end

declare InitClass
	clazz: Class @key
//	clazz: String @key
end

rule ""init""
	when
	then
		insert( new InitClass( MyClass.class ) );
//		insert( new InitClass( ""some string"" ) );
end

rule ""make init classes""
	when
		accumulate( InitClass( $clazz; ), $list: collectList( $clazz ) )
	then
		System.out.printf(""%d items in list\n"", $list.size());
		for(Object obj : $list)
			System.out.printf(""item is %s\n"", obj);
end

rule ""show init classes""
	when
		InitClass( $v; )
	then
		System.out.printf(""match %s\n"", $v);
end
",Major,Mario Fusco,,2014-10-04T18:58:55.000-0400,collectList on objects of type java.lang.Class get returned as null,Resolved,bug,Bug
2015-07-21T10:27:49.000-0400,DROOLS-854,Done,"When creating certain types of assets in the gui, user gets an error modal: ""Unable to complete your request. The following exception occurred: null.""
The asset is created, but cannot be loaded (reopening results in the same error).
It seems that the newly created asset can be loaded after a project build.

Editors/assets affected are:
guided rules, guided rule templates, drl, guided score cards, guided dtables, guided decision trees, test scenarios
(others - enumerations, dsl, process definitions, ... are okay)

It might not be reproducible with drools-wb (based on irc conversations with [~wmedvede]).

Server log points to DMO:
Caused by: java.lang.NullPointerException
        at org.kie.scanner.KieModuleMetaDataImpl.init(KieModuleMetaDataImpl.java:147)
        at org.kie.scanner.KieModuleMetaDataImpl.<init>(KieModuleMetaDataImpl.java:87)
        at org.kie.scanner.KieModuleMetaData$Factory.newKieModuleMetaData(KieModuleMetaData.java:45)
        at org.kie.workbench.common.services.datamodel.backend.server.cache.LRUDataModelOracleCache.loadEnumsForPackage(LRUDataModelOracleCache.java:171)

Stacktrace to be found at [http://pastebin.test.redhat.com/299022].",Major,Mario Fusco,,2015-07-21T09:38:03.000-0400,NullPointerException in KieModuleMetaDataImpl.init,Resolved,bug,Bug
2015-07-21T03:33:53.000-0400,DROOLS-852,Done,"Adding this to a RuleDescrBuilder.lhs():
	List<String> myParams = new LinkedList<String>();
	myParams.add(nSecs+""s"");
	lhsDescr.not().pattern(PAYLOAD_OBJ).constraint(constraint.toString()).behavior().type(""window"", ""time"").parameters(myParams).end();

causes the drlDumper to fail with the error:
org.mvel2.PropertyAccessException: [Error: could not access: params; in class: org.drools.compiler.lang.descr.BehaviorDescr]
[Near : {... b.params ....}]
             ^
[Line: 1, Column: 1]
	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getBeanProperty(ReflectiveAccessorOptimizer.java:706) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain(ReflectiveAccessorOptimizer.java:360) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor(ReflectiveAccessorOptimizer.java:163) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.ast.ASTNode.optimize(ASTNode.java:159) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:115) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.MVELRuntime.execute(MVELRuntime.java:85) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.compiler.CompiledExpression.getDirectValue(CompiledExpression.java:123) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.compiler.CompiledExpression.getValue(CompiledExpression.java:119) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.compiler.CompiledExpression.getValue(CompiledExpression.java:113) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.MVEL.executeExpression(MVEL.java:930) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:84) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:128) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CommentNode.eval(CommentNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledNamedIncludeNode.eval(CompiledNamedIncludeNode.java:71) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledNamedIncludeNode.eval(CompiledNamedIncludeNode.java:71) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CommentNode.eval(CommentNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledNamedIncludeNode.eval(CompiledNamedIncludeNode.java:71) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledNamedIncludeNode.eval(CompiledNamedIncludeNode.java:71) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledCodeNode.eval(CompiledCodeNode.java:51) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledNamedIncludeNode.eval(CompiledNamedIncludeNode.java:71) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:128) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:128) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:128) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:128) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.res.TextNode.eval(TextNode.java:42) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255) ~[mvel2-2.2.4.Final.jar:?]
	at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207) ~[mvel2-2.2.4.Final.jar:?]
	at org.drools.compiler.lang.DrlDumper.dump(DrlDumper.java:61) ~[drools-compiler-6.2.0.Final.jar:6.2.0.Final]

",Blocker,Mario Fusco,,2015-07-20T16:27:02.000-0400,Unable to save drl file using drlDumper when drl contains a BehaviorDescrBuilder for sliding time windows,Resolved,bug,Bug
2016-06-13T13:55:58.000-0400,DROOLS-1200,Done,"If you have a bind variable which name is multibyte (for example, 'Ｄ' U+FF24) and use java dialect, DRL build fails with error messages like:
{noformat}
line 1:21 no viable alternative at character 'Ｄ'
18:21:54.036 [main] ERROR o.d.c.k.b.impl.AbstractKieModule.buildKnowledgePackages:249 - Unable to build KieBaseModel:defaultKieBase
Rule Compilation error : [Rule name='R']
	defaultpkg/Rule_R1623499031.java (7:346) : Ｄ cannot be resolved
{noformat}

Mvel dialect doesn't have this issue.",Major,Mario Fusco,,2016-06-08T05:37:36.000-0400,Multibyte bind variable name fails with java dialect,Resolved,bug,Bug
2015-09-09T10:47:39.000-0400,DROOLS-909,Done,"When trying to use ""Expression editor"" in the guided rule screen of the web app, combining with restrictions on String fields which use functions like ""toLowerCase"" , ""toUpperCase"" - 
Expression editor leaves a blanc field to fill and if left blanc - KIE automatically fill it with """" - and rule doesn't get compiled.

So instead of getting for example;
1.	|	package ido.droolsrules.dqsrulesqa;
2.	|	
3.	|	import java.lang.Number;
4.	|	
5.	|	rule ""Test Camera Model""
6.	|	    dialect ""mvel""
7.	|	    when
8.	|	        cam1 : Camera( brand.toLowerCase() == ""sony"" )
9.	|	    then
10.	|	        cam1.setLens( 5.0 );
11.	|	end

Rule is generated (In source tab) as:

1.	|	package ebay.droolsrules.dqsrulesqa;
2.	|	
3.	|	import java.lang.Number;
4.	|	
5.	|	rule ""Test Camera Model""
6.	|	    dialect ""mvel""
7.	|	    when
8.	|	        cam1 : Camera( brand.toLowerCase("""") == ""sony"" )
9.	|	    then
10.	|	        cam1.setLens( 5.0 );
11.	|	end


view line 8 to spot difference.
",Major,Michael Anstis,,2015-09-09T10:10:48.000-0400,DROOLS-909: KIE Workbench: ExpressionBuilder does not include all MethodInformation's in selector,Resolved,bug,Bug
2015-06-22T14:59:44.000-0400,DROOLS-824,Done,"Inline casts should support ""this"", e.g.

{code}
Object( this#String matches ""X"" )  <-- rewritten incorrectly
Object( this#Foo isA Bar.class )   <-- not detected as an evaluator constraint
{code}",Major,Mario Fusco,,2015-06-22T06:33:59.000-0400,"Inline casts involving ""this"" are not rewritten correctly",Resolved,bug,Bug
2015-09-22T11:14:26.000-0400,DROOLS-926,Done,"Creating multiple KieSessions from a KieBase with a function and using them concurrently from different threads may lead to the following error

java.util.concurrent.ExecutionException: java.lang.LinkageError: loader (instance of  org/drools/core/rule/JavaDialectRuntimeData$PackageClassLoader): attempted  duplicate class definition for name: ""defaultpkg/IsEven""
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:188)
	at org.drools.compiler.integrationtests.Misc2Test.testFunctionInvokingFunction(Misc2Test.java:8191)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:78)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:212)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:68)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:140)
Caused by: java.lang.LinkageError: loader (instance of  org/drools/core/rule/JavaDialectRuntimeData$PackageClassLoader): attempted  duplicate class definition for name: ""defaultpkg/IsEven""
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.fastFindClass(JavaDialectRuntimeData.java:673)
	at org.drools.core.rule.JavaDialectRuntimeData$PackageClassLoader.loadClass(JavaDialectRuntimeData.java:639)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	at org.drools.core.rule.MVELDialectRuntimeData.getParserConfiguration(MVELDialectRuntimeData.java:299)
	at org.drools.core.base.mvel.MVELCompilationUnit.getCompiledExpression(MVELCompilationUnit.java:214)
	at org.drools.core.rule.constraint.MvelConstraint.createMvelConditionEvaluator(MvelConstraint.java:254)
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:238)
	at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:204)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:141)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:60)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:298)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:96)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:69)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:1993)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1289)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260)
	at org.drools.compiler.integrationtests.Misc2Test$11.call(Misc2Test.java:8180)
	at org.drools.compiler.integrationtests.Misc2Test$11.call(Misc2Test.java:8170)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)",Major,Mario Fusco,,2015-09-22T07:14:37.000-0400,Missing synchronization in PackageClassLoader causes a LinkageError: duplicate class definition,Resolved,bug,Bug
2015-01-12T10:37:03.000-0500,DROOLS-678,Done,"In the following test case:

{code}
        @Test
        public void testAlphaIndexing() throws Exception {
            String drl =
                    ""    package org.drools.test; "" +
     
                    ""    declare ObjectB "" +
                    ""       name : String "" +
                    ""       intValue : Integer "" +
                    ""    end "" +
     
                    ""    rule 'insert object' "" +
                    ""       when "" +
                    ""       then "" +
                    ""           insert( new ObjectB( null, 0 ) ); "" +
                    ""    end "" +
     
                    ""    rule 'rule 1' "" +
                    ""       when "" +
                    ""           ObjectB( intValue == 1 ) "" +
                    ""       then "" +
                    ""    end "" +
     
                    ""    rule 'rule 2' "" +
                    ""       when "" +
                    ""           ObjectB( intValue == 2 ) "" +
                    ""       then "" +
                    ""    end "" +
     
                    ""    rule 'rule 3' "" +
                    ""       when "" +
                    ""           $b : ObjectB( intValue == null ) "" +
                    ""       then\n"" +
                    ""           System.out.println( $b ); "" +
                    ""    end"" +
                    ""\n"" ;
     
            KieHelper helper = new KieHelper();
            helper.addContent( drl, ResourceType.DRL );
            assertTrue( helper.verify().getMessages( org.kie.api.builder.Message.Level.ERROR ).isEmpty() );
            helper.build(  ).newKieSession().fireAllRules();
        }
{code}

rule 3 fires even if it shouldn't",Major,Mario Fusco,,2015-01-05T11:26:53.000-0500,Constraints index Null values as 0s,Resolved,bug,Bug
2016-04-08T11:23:14.000-0400,DROOLS-1115,Done,"I got an java.lang.ArrayIndexOutOfBoundsException when I use conditionnal breaking and queries.
I face this issue since 6.4.0.CR2 and not before this.

Following the stack trace : 

java.lang.ArrayIndexOutOfBoundsException: 2
	at org.drools.core.reteoo.AbstractTerminalNode.getPathNodes(AbstractTerminalNode.java:304)
	at org.drools.core.reteoo.AbstractTerminalNode.getPathNodes(AbstractTerminalNode.java:311)
	at org.drools.core.phreak.PhreakQueryTerminalNode.checkAndTriggerQueryReevaluation(PhreakQueryTerminalNode.java:173)
	at org.drools.core.phreak.PhreakQueryTerminalNode.doLeftInserts(PhreakQueryTerminalNode.java:78)
	at org.drools.core.phreak.PhreakQueryTerminalNode.doNode(PhreakQueryTerminalNode.java:54)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:282)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:94)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1003)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1346)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1284)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1303)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1274)
	at com.darty.drools.CodicCriteriaTest.price(CodicCriteriaTest.java:53)",Blocker,Mario Fusco,,2016-04-07T11:24:27.000-0400,IndexOutOfBoundException when using conditional break + query,Resolved,bug,Bug
2015-09-18T12:11:04.000-0400,DROOLS-924,Done,"EventFactHandle overrides DefaultFactHandle's toExternalForm(), but it is not happening the same for the createFromExternalFormat() method. Moreover no code takes care of the 1st argument (the format version) of the serialized format so when deserializing it always instance a DefaultFactHandle even when it was serialized an event.",Major,Mario Fusco,,2015-09-18T12:03:35.000-0400,EventFactHandles are not deserialized correctly,Resolved,bug,Bug
2015-02-25T05:02:18.000-0500,DROOLS-726,Done,"MVEL named consequences don't get rewired, so if for example the named consequence inserts an instance of a declared type that instance will belong to an old (not rewired) class.",Major,Mario Fusco,,2015-02-25T04:54:54.000-0500,MVEL named consequences don't get rewired,Resolved,bug,Bug
2015-09-01T14:40:50.000-0400,DROOLS-899,Done,None,Major,Mario Fusco,,2015-08-31T12:08:14.000-0400,Kie-ci sends MavenRequest without considering the repositories defined in user settings file,Resolved,bug,Bug
2014-12-09T13:49:13.000-0500,DROOLS-663,Done,"When building a rule with a single-function accumulate conditional element, I set the binding name for the function call according to the documentation for the function method of the AccumulateDescrBuilder. However, when the function is output by the DrlDumper, the accumulate call is output without the binding.

I've traced the Builder to the Descr and that sets the description correctly. The problem seems to be with the drl.mvel template, line 96, the function output template doesn't have a marker for the binding name. (https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/main/resources/org/drools/compiler/lang/drl.mvel)
",Minor,Mario Fusco,,2014-12-08T17:43:19.000-0500,DrlDumper does not output binding for accumulate function,Resolved,bug,Bug
2015-09-02T04:35:17.000-0400,DROOLS-900,Done,"In the compiled drl file we were using (Sets.newHashSet(e1,e2,..)).contains(input) then we get an exception java.lang.IncompatibleClassChangeError: Class XYZ does not implement the requested interface java.util.Collection on large input sets.Here XYZ is our input ruleRequest to be evaluated. If I change it to Sets.newHashSet(e1,e2,..).contains(input) it fixes everything.",Minor,Mario Fusco,,2015-09-01T02:07:11.000-0400,java.lang.IncompatibleClassChangeError error while using HashSets,Resolved,bug,Bug
2016-07-20T12:42:05.000-0400,DROOLS-1231,Done,"If you create a container, and then upgrade it to a higher kjar version - the resources (processes, rules) are not actually upgraded until you STOP/START this container
",Major,Mario Fusco,,2016-07-19T11:19:24.000-0400,Container is not upgraded until restarted,Resolved,bug,Bug
2016-04-15T10:51:12.000-0400,DROOLS-1123,Done,TraitObjectTypeNode misses a no-args constructor and then isn't serializable,Major,Mario Fusco,,2016-04-14T12:12:28.000-0400,TraitObjectTypeNode isn't serializable,Resolved,bug,Bug
2016-04-15T11:34:19.000-0400,DROOLS-1128,Done,"If Kie server gets a request concerning container while this container is being created then Kie server throws exception shown in attachment.

It is caused by creating conversation ID header, which contains also release id of container, for any request concerning such container. If container is being created at that moment then release id isn't set yet, causing this issue.

Solution could be to return empty conversation ID(if wasn't set in request) until container is fully initialized - is in started state.",Minor,Karel Suta,,2016-04-15T08:38:53.000-0400,Concurrent call fails when creating container,Resolved,bug,Bug
2015-09-29T11:09:11.000-0400,DROOLS-930,Done,"A segment split during an incremental compilation as in the following test case 

{code}
    @Test
    public void testSegmentSplitOnIncrementalCompilation() throws Exception {
        String drl =
                ""import "" + Person.class.getCanonicalName() + ""\n"" +
                ""rule R1 when\n"" +
                ""  $s : String()"" +
                ""  Person( name == $s ) \n"" +
                ""then\n"" +
                ""  System.out.println(\""Triggered: R1\"");\n"" +
                ""end\n"" +
                ""rule R2 when\n"" +
                ""  $s : String()"" +
                ""  Person( name == $s ) \n"" +
                ""then\n"" +
                ""  System.out.println(\""Triggered: R2\"");\n"" +
                ""end\n"" +
                ""rule R3 when\n"" +
                ""  $s : String()"" +
                ""  Person( name != $s ) \n"" +
                ""then\n"" +
                ""  System.out.println(\""Triggered: R3\"");\n"" +
                ""end\n"";

        KieServices ks = KieServices.Factory.get();

        ReleaseId releaseId1 = ks.newReleaseId(""org.kie"", ""test-upgrade"", ""1.1.1"");
        KieModule km = createAndDeployJar(ks, releaseId1);

        KieContainer kc = ks.newKieContainer(km.getReleaseId());
        KieSession ksession = kc.newKieSession();

        kc.updateToVersion(releaseId1);
        ksession.insert(new Person(""John"", 26));
        ksession.insert( ""John"" );
        ksession.fireAllRules();

        ReleaseId releaseId2 = ks.newReleaseId(""org.kie"", ""test-upgrade"", ""1.1.2"");
        km = createAndDeployJar(ks, releaseId2, drl);

        kc.updateToVersion(releaseId2);
        ksession.fireAllRules();
    }
{code}

may cause the following ClassCastException during the subsequent network evaluation

{code}
java.lang.ClassCastException: org.drools.core.reteoo.RuleTerminalNode cannot be cast to org.drools.core.reteoo.LeftInputAdapterNode
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:99)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:194)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:73)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:978)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1292)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1294)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1281)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1260)
	at org.drools.compiler.integrationtests.IncrementalCompilationTest.testSegmentSplit(IncrementalCompilationTest.java:2001)
{code}",Major,Mario Fusco,,2015-09-29T10:58:23.000-0400,ClassCastException after segment split during incremental compilation,Closed,bug,Bug
2016-05-03T09:13:30.000-0400,DROOLS-1151,Done,"In project created via [1] are missing libraries. Specifically classes from packages [2] can not be found.

[1]
File -> New -> Other -> jBPM -> jBPM project -> project with example files -> build project using Java and jBPM classes

[2]
javax.persistence.*
org.jbpm.test.*",Major,Jozef Marko,,2016-05-02T08:08:10.000-0400,Missing libraries in new jBPM project,Closed,bug,Bug
2016-05-04T12:50:00.000-0400,DROOLS-1157,Done,Regressions were introduced in 6.4.0 of the Drools/jBPM Eclipse plugins (droolsjbpm-tools project) which caused the New Project Wizards to generate sample projects that do not build or run.,Blocker,Robert (Bob) Brodt,,2016-04-29T11:52:25.000-0400,New Drools/jBPM Project Wizards are broken,Closed,bug,Bug
2016-05-03T09:16:09.000-0400,DROOLS-1154,Done,"When you add a drools product runtime and you try to specify a version of runtime (for example ""6.4.0.Final-redhat-2""), the Add button of Add Drools runtime dialog is not enabled so it is not possible to complete the runtime adding.  ",Major,Robert (Bob) Brodt,,2016-05-02T09:01:12.000-0400,Add drools runtime dialog doesn't support version naming of the product ,Closed,bug,Bug
2016-05-04T12:47:09.000-0400,DROOLS-1149,Done,"After creating the jBPM project via
File -> New -> Other -> jBPM -> jBPM project
the pom.xml doesn't include any dependency.

For more information see https://bugzilla.redhat.com/show_bug.cgi?id=1275167",Major,Robert (Bob) Brodt,,2016-04-28T11:42:12.000-0400,Missing dependencies in new jBPM project,Closed,bug,Bug
2016-05-04T12:52:42.000-0400,DROOLS-1153,Done,"When you add a drools runtime, version is not automatically detected and ""Version must be in the form major#.minor#.patch#"" text is displayed. User has to specify a version manually instead of automatic detection from binaries.",Minor,Robert (Bob) Brodt,,2016-05-02T08:40:48.000-0400,Version detection when adding drools runtime doesn't work,Closed,bug,Bug
2016-05-04T13:03:02.000-0400,DROOLS-1145,Done,ClassCastException when detecting a drools runtime. This exception causes that no runtime (not only drools) is detected.,Major,Andrej Podhradsky,,2016-04-28T05:29:26.000-0400,ClassCastException when detecting a drools runtime,Closed,bug,Bug
2016-03-11T08:12:34.000-0500,DROOLS-1090,Done,None,Major,Mario Fusco,,2016-03-11T07:06:51.000-0500,Cached modificationMask in property reactivity is correctly retrieved but not set into the propagation context,Resolved,bug,Bug
2016-08-04T06:32:51.000-0400,DROOLS-1246,Done,None,Major,Mario Fusco,,2016-08-03T15:48:29.000-0400,drools-examples pong is not running and occurs an error : java.lang.StringIndexOutOfBoundsException: String index out of range: -1,Closed,bug,Bug
2015-12-15T09:54:31.000-0500,DROOLS-1007,Done,"At the moment the association between a node and a rule is kept by a Map inside the node having the rule as key. This implementation is not taking count of the fact that the same node could be associated multiple times to the same rule that it is indeed what happens when a rule contains a OR.

During the removal of such a rule the nodes of the rule are removed from the Rete starting from the RuleTerminalNodes (in this case the rule has more than one RTNs because of the OR). This means that when the first RTN is removed the Join and LIA nodes that are sources for that RTN at any level got completely disassociated from the rule when it is too early. That in the end causes the following exception when the engine tries to remove also the second RTN of that rule

{code}
java.lang.ArrayIndexOutOfBoundsException: 1
	at org.drools.core.phreak.AddRemoveRule.removeRule(AddRemoveRule.java:171)
	at org.drools.core.reteoo.ReteooBuilder.removeTerminalNode(ReteooBuilder.java:173)
	at org.drools.core.reteoo.ReteooBuilder.removeRule(ReteooBuilder.java:163)
	at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1635)
	at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1626)
	at org.drools.core.impl.KnowledgeBaseImpl.internalRemoveRule(KnowledgeBaseImpl.java:1610)
	at org.drools.core.impl.KnowledgeBaseImpl.removeRule(KnowledgeBaseImpl.java:1581)
{code}
",Major,Mario Fusco,,2015-12-15T07:51:45.000-0500,ArrayIndexOutOfBoundsException attempting to remove a rule containing a OR,Closed,bug,Bug
2015-07-06T16:55:42.000-0400,DROOLS-837,Done,"Running {{mvn clean install}} and then {{mvn install}} on e.g. guvnor-webapp or drools-wb-webapp ends with transitive dependency check failure:

{code}
[[WARNING] Rule 0: de.is24.maven.enforcer.rules.IllegalTransitiveDependencyCheck failed with message:
13:31:52 Found 231 illegal transitive type dependencies in artifact 'org.guvnor:guvnor-webapp:war:6.3.0.20150703-085055':
org.dashbuilder.dataprovider.DataSetProviderType
org.dashbuilder.dataset.ColumnType
org.dashbuilder.dataset.DataSet
org.dashbuilder.dataset.DataSetLookup
org.dashbuilder.dataset.DataSetMetadata
org.dashbuilder.dataset.DataSetOp
org.dashbuilder.dataset.backend.EditDataSetDef
...
{code}

The cause seems to be the Errai generated classes which are put into src/main during the first build. The {{clean}} phase will remove them, but if the build is executed without the {{clean}} they stay there, the enforcer picks them up and fails because some class references there are not declared in the pom.

In ideal case this should be fixed by putting all the generated stuff into target/, but that might to hard to do, since the current setup seems to be well established, even directly in Errai.

-The best possible fix right now seems to be running the clean plugin for every build, binding it to {{initialize}} phase.-

The best way to fix this is to exclude the generated Errai classes from the check. It is not yet possible, but this new feature should be available in next days, see https://github.com/ImmobilienScout24/illegal-transitive-dependency-check/issues/29. We should then update the dependency and add the additional excludes. Until this feature is available, I will disable the dependency check in the -webapp modules (and add comment that it should be re-enabled again soon).",Major,Petr Široký,,2015-07-03T09:53:24.000-0400,Second (non-clean) build fails on -webapp modules,Resolved,bug,Bug
2016-05-06T09:18:37.000-0400,DROOLS-1156,Done,"There is an issue with creation of threads in drools, when using drools in a container (Web Container oder Java EE application server) environment.

This could be reproduce as well in KIE execution server as in a dummy web application.

If you create a container in drools, there are several new threads named ""drools-worker"" created. The number of threads depends on the number of CPU cores.

When disposing the container, these threads are still running. Even when we undeploy the application, these threads are still running, as they are created by threadpoolexecutor and not by any managedexecutorservice.",Major,Mario Fusco,,2016-05-03T06:09:17.000-0400,drools-worker threads are created but not cleaned up ,Resolved,bug,Bug
2016-04-29T02:59:14.000-0400,DROOLS-1146,Done,Incremental compilation of a kbase requires that all the ksessions created from that kbase are deactivated. Unfortunately a ksession in fireUntilHalt cannot be deactivated until somebody doesn't explicitly invokes halt on it.,Critical,Mario Fusco,,2016-04-28T06:40:09.000-0400,Incremental compilation is blocked forever by fireUntilHalt,Resolved,bug,Bug
2016-04-28T04:50:16.000-0400,DROOLS-1142,Done,"Please see [http://stackoverflow.com/questions/36755445/why-am-i-getting-exception-on-kiesession-reload] for a discussion of this issue.   In short, I'm running a simple test where the KieSession is operating in STREAM mode. I define ""MyEvent"" as an event and specify that it should expire in 3s. After inserting the event, I dispose of the KieSession, sleep for 5s (to allow the timer to expire), and then attempt to reload the session. However, when I attempt the session reload, I get Exceptions as shown.",Major,Mario Fusco,,2016-04-27T09:02:26.000-0400,Attempted reload of persisted KieSession operating in STREAM mode throws Exceptions,Resolved,bug,Bug
2016-04-29T09:40:52.000-0400,DROOLS-1144,Done,An alpha constraint with a Class literal is not hashed/compared correctly due to the missing equals/hashCode method in ClassFieldImpl. This causes the problem also reported here http://stackoverflow.com/questions/36845229/drools-condition-conflicts-consuming-facts/36873756,Major,Mario Fusco,,2016-04-28T03:17:07.000-0400,Missing equals/hashCode in ClassFieldImpl,Closed,bug,Bug
2016-04-04T12:47:03.000-0400,DROOLS-1112,Done,Two BetaNodes with same left input but different right inputs become incorrectly a shared node if the 2 right inputs are different but have the same hashing,Major,Mario Fusco,,2016-04-04T12:18:23.000-0400,Wrong node sharing caused by 2 different nodes with same hashcode,Closed,bug,Bug
2015-08-03T13:31:45.000-0400,DROOLS-870,Done,"In some cases nested properties get hashed by the CompositeObjectSinkAdapter even if they shouldn't

The following test case demonstrates this problem:

{code}
    public class A1 {
        public B1 b = new B1();
    }

    public class B1 {
        public int b1 = 1;
        public int b2 = 2;
        public int b3 = 3;
    }

    @Test
    public void testSkipHashingOfNestedProperties() {
        String drl =
                ""import "" + A1.class.getCanonicalName() + ""\n"" +
                ""global java.util.List list\n"" +
                ""rule One when\n"" +
                ""  A1(b.b1 == 1)\n"" +
                ""then\n"" +
                ""  list.add(\""One\"");\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule \""Two\"" when\n"" +
                ""  A1(b.b2 == 2)\n"" +
                ""then\n"" +
                ""  list.add(\""Two\"");\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule \""Three\"" when\n"" +
                ""  A1(b.b3 == 3)\n"" +
                ""then\n"" +
                ""  list.add(\""Three\"");\n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build()
                                             .newKieSession();

        List<Object> list = new ArrayList<Object>();
        ksession.setGlobal( ""list"", list );

        ksession.insert( new A1() );
        ksession.fireAllRules();

        assertEquals( 3, list.size() );
    }
{code}",Major,Mario Fusco,,2015-08-03T13:18:15.000-0400,Nested properties get hashed even if they shouldn't,Resolved,bug,Bug
2015-01-18T10:33:47.000-0500,DROOLS-690,Done,"The following deadlock has been reported:

{code}
Java stack information for the threads listed above:
===================================================
""drools-worker-2"":
        at org.drools.core.common.DefaultAgenda.addEagerRuleAgendaItem(DefaultAgenda.java:282)
        - waiting to lock <0x00000007d8fc80d0> (a java.util.LinkedList)
        at org.drools.core.reteoo.PathMemory.queueRuleAgendaItem(PathMemory.java:153)
        at org.drools.core.reteoo.PathMemory.doLinkRule(PathMemory.java:120)
        - locked <0x00000007d91f34d0> (a org.drools.core.reteoo.PathMemory)
        at org.drools.core.reteoo.PathMemory.linkSegment(PathMemory.java:90)
        at org.drools.core.reteoo.SegmentMemory.notifyRuleLinkSegment(SegmentMemory.java:170)
        at org.drools.core.reteoo.LeftInputAdapterNode$LiaNodeMemory.setNodeDirty(LeftInputAdapterNode.java:645)
        at org.drools.core.reteoo.LeftInputAdapterNode.doUpdateSegmentMemory(LeftInputAdapterNode.java:396)
        - locked <0x00000007d91f68a8> (a java.lang.Object)
        at org.drools.core.reteoo.LeftInputAdapterNode.doUpdateObject(LeftInputAdapterNode.java:366)
        at org.drools.core.reteoo.LeftInputAdapterNode.modifyObject(LeftInputAdapterNode.java:436)
        at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateModifyObject(CompositeObjectSinkAdapter.java:512)
        at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateModifyObject(CompositeObjectSinkAdapter.java:437)
        at org.drools.core.reteoo.ObjectTypeNode.modifyObject(ObjectTypeNode.java:382)
        at org.drools.core.reteoo.EntryPointNode.modifyObject(EntryPointNode.java:273)
        at org.drools.core.common.NamedEntryPoint.update(NamedEntryPoint.java:511)
        at org.drools.core.base.DefaultKnowledgeHelper.update(DefaultKnowledgeHelper.java:385)
        at drools.core.Rule_vme$u46$phases_inconnues1199361134.defaultConsequence(Rule_vme$u46$phases_inconnues1199361134.java:19)
        at drools.core.Rule_vme$u46$phases_inconnues1199361134DefaultConsequenceInvokerGenerated.evaluate(Unknown Source)
        at drools.core.Rule_vme$u46$phases_inconnues1199361134DefaultConsequenceInvoker.evaluate(Unknown Source)
        at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1046)
        - locked <0x00000007d8fc8080> (a org.drools.core.common.DefaultAgenda)
        at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:152)
        at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:100)
        - locked <0x00000007d9335498> (a org.drools.core.phreak.RuleExecutor)
        at org.drools.core.phreak.PhreakTimerNode$Executor.evauateAndFireRule(PhreakTimerNode.java:483)
        at org.drools.core.phreak.PhreakTimerNode$TimerNodeJob$1.run(PhreakTimerNode.java:420)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:744)
""Drools thread"":
        at org.drools.core.common.SynchronizedLeftTupleSets.takeAll(SynchronizedLeftTupleSets.java:44)
        - waiting to lock <0x00000007d91f68a8> (a java.lang.Object)
        at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:112)
        at org.drools.core.phreak.RuleExecutor.evaluateNetwork(RuleExecutor.java:77)
        - locked <0x00000007d9334c40> (a org.drools.core.phreak.RuleExecutor)
        at org.drools.core.common.DefaultAgenda.evaluateEagerList(DefaultAgenda.java:990)
        - locked <0x00000007d8fc80d0> (a java.util.LinkedList)
        at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:945)
        at org.drools.core.common.DefaultAgenda.fireUntilHalt(DefaultAgenda.java:1190)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1329)
        at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireUntilHalt(StatefulKnowledgeSessionImpl.java:1306)
        at drools.core.Core$2.run(Core.java:495)
        at java.lang.Thread.run(Thread.java:744)
{code}",Major,Mario Fusco,,2015-01-16T12:18:56.000-0500,Deadlock on LeftTupleSets,Resolved,bug,Bug
2016-05-24T10:47:07.000-0400,DROOLS-1185,Done,"When using the modify operator in Drools I am getting a java.lang.ClassCastException: org.adcb.finance.ResponseFact cannot be cast to org.drools.core.common.InternalFactHandle. 

This seems to happen in rules that contain Arrays & using the in/not in operator on them. I have other rules using the matches regex expression and I dont get this issue. 

This is a critical issue for us as we're using the RulesExecutionService in 6.4.0 to extend the KIE Execution service and are due to go live very soon so there is no chance of rolling back to 6.3.x without some heavy rework. 

 ",Blocker,Mario Fusco,,2016-05-20T05:35:53.000-0400,Drool Modify operator causing ClassCastException,Resolved,bug,Bug
2014-10-27T11:32:58.000-0400,DROOLS-642,Done,"In the rule:
{code}
when
  $a : A()
  not B( this after[0,10s] $a )   do[something]
  C()
then
then[something]
{code}

No timer node is created for the named consequence, resulting in the named consequence firing immediately, even in STREAM mode
",Major,Mario Fusco,,2014-10-26T22:18:55.000-0400,Named Consequences do not respect timers in STREAM mode,Resolved,bug,Bug
2014-10-27T11:51:46.000-0400,DROOLS-643,Done,"If you use XLS functions (e.g. =ROW(), =SUM()) in Spreadsheet cells, the values (e.g. '10') are parsed to decimal fraction values (e.g. '10.0'). This doesn't occur in version 5.3.",Major,Mario Fusco,,2014-10-26T22:40:01.000-0400,Spreadsheet cell value by XLS function results in decimal fraction,Resolved,bug,Bug
2014-10-27T06:47:13.000-0400,DROOLS-640,Done,"the following model, legal in Java, throws exceptions when declared in DRL:
{code}
declare A
  field : B
end

declare B extends A
end
{code}

A circular dependency is detected, which prevents the classes from being generated. Based on the use of those classes, exceptions may be thrown",Critical,Mario Fusco,,2014-10-26T13:06:55.000-0400,Exceptions when declaring a class with a subclass-typed attribute,Resolved,bug,Bug
2014-10-27T10:12:48.000-0400,DROOLS-641,Done,"Given e.g. a rule :
{code}
when
  Event()
  AnotherEvent() do[something]
then ... end
{code}
A stream queue is created only for the main path (main consequence).
The events never reach then named consequence, failing to match it.
",Major,Mario Fusco,,2014-10-26T22:14:34.000-0400,Named Consequences don't work with events,Resolved,bug,Bug
2016-09-13T08:25:25.000-0400,DROOLS-1282,Done,"When a KieBuilder configuration is set into the kmodule.xml as in the following example, this configuration is not preserved during incremental compilation.

{code}
<?xml version=\""1.0\"" encoding=\""UTF-8\""?>
<kmodule xmlns=\""http://jboss.org/kie/6.0.0/kmodule\"">
  <configuration>
    <property key=\""drools.propertySpecific\"" value=\""ALWAYS\"" />
  </configuration>
</kmodule>
{code}",Major,Mario Fusco,,2016-09-13T04:04:23.000-0400,KieModuleModel property configurations are not preserved during incremental compilation,Resolved,bug,Bug
2016-09-30T09:36:42.000-0400,DROOLS-1310,Done,"Expired fact with activationCount > 0 are not evicted from objectstore: intended behavior for serialization purposes, but for instance side-effects when used in an activation-group scenario where the rules are not 100% dual.

Sized-down reproducer will be submitted at a later time.",Major,Mario Fusco,,2016-09-27T10:59:32.000-0400,Expired fact with activationCount > 0 are not evicted from objectstore,Resolved,bug,Bug
2016-09-28T10:31:13.000-0400,DROOLS-1308,Done,"When creating rules in guided editor, we are running into validation errors depending on the order of the conditions. The problem is that the order of the conditions is important:

{noformat}
when
  COND_X
  COND_Y   => works

when
  COND_Y
  COND_X   => fails

java.lang.AssertionError: [10,18]: [ERR 101] Line 10:18 no viable alternative at input 'Number' in rule ""ATO_Negative_AU_Test""
[0,0]: Parser returned a null Package
{noformat}

Test cases showing the compilation failures (@Test testOrder1 vs
testOrder2) can be found here:
https://gist.github.com/martinweiler/e684a0e75a2c9f4de4dee5a13affb8b0",Major,Mario Fusco,,2016-09-27T10:11:46.000-0400,Rules compilation failure depending on condition ordering,Resolved,bug,Bug
2016-05-06T09:20:36.000-0400,DROOLS-1166,Done,"Hello, for a large number of evaluations a {{ClassNotFoundException}} is thrown missing to find appropriate class for the drools function defined.

In the attached reproducer, a for loop inserts a given number of facts into the session; for a small number of facts, no error is thrown.
For example given 
{code}
for (int i=0; i<20; i++) {
	session.insert(""Ciao ""+i);
	session.fireAllRules();
}
{code}
all is fine.

When running with say:
{code}
for (int i=0; i<150; i++) {
	session.insert(""Ciao ""+i);
	session.fireAllRules();
}
{code}
then throws, snippet:
{code}
java.lang.NoClassDefFoundError: com/acme/testjitfunction/EntryKey$1
	at com.acme.testjitfunction.EntryKey.entryKey(EntryKey.java:51)
	at ConditionEvaluator1fae754676b54e869aa5b558ba2d7991.evaluate(Unknown Source)
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:258)
	at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:214)
	at org.drools.core.phreak.PhreakAccumulateNode.evaluateResultConstraints(PhreakAccumulateNode.java:696)
	at org.drools.core.phreak.PhreakAccumulateNode.doNode(PhreakAccumulateNode.java:114)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:534)
[...]
Caused by: java.lang.ClassNotFoundException: com.acme.testjitfunction.EntryKey$1
	at java.lang.ClassLoader.findClass(ClassLoader.java:530)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
	at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadType(ProjectClassLoader.java:393)
	at org.drools.core.common.ProjectClassLoader$DefaultInternalTypesClassLoader.loadClass(ProjectClassLoader.java:380)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
	... 44 more
{code}

I'm also wondering if maybe this is not the best possible way to ""backport"" lambdas as a drool function; in case a more proper way to implement them as a drool function is possible, kindly let me know.

Can you kindly advise, please?

Thank you very much
Ciao
MM",Minor,Mario Fusco,,2016-05-05T05:05:17.000-0400,ClassNotFoundException for the drools function when large number of valuations,Resolved,bug,Bug
2015-02-03T10:18:34.000-0500,DROOLS-705,Done,When multiple threads tries to get the same KieBase from the same KieContainer the KieBase is created more than once.,Major,Mario Fusco,,2015-02-03T10:12:19.000-0500,Race condition when multiple threads get the same KieBase from the same KieContainer,Resolved,bug,Bug
2015-11-05T10:19:48.000-0500,DROOLS-971,Done,None,Major,Mario Fusco,,2015-11-05T09:18:58.000-0500,IndexOutOfBoundsException in IoUtils attempting to read an empty InputStream,Closed,bug,Bug
2015-11-06T05:28:23.000-0500,DROOLS-970,Done,"Automatic String to Date coercion is not performed in case the accessed field is not a getter method but an instance field of the class as in:

{code}
   public class Person {
       public java.util.Date date;
   }

    rule x when
       Person( date < ""1-Jan-2000"" )  // Error flagged here, if...
    then ...end
{code}

or when the class has proper a getter method but the constraint is expressed with a binding declaration as in:

{code}
    rule x when
         Person( $date: date, $date < ""1-Jan-2000"" )
    then ...end
{code}",Major,Mario Fusco,,2015-11-04T09:59:50.000-0500,Missing date coercion in constraint using an instance field or a declaration,Closed,bug,Bug
2016-02-01T10:11:38.000-0500,DROOLS-1047,Done,"Consider the following 2 interfaces:

{code}
    public interface Base {
        Object getA();
    }

    public interface Ext extends Base {
        String getA();
    }
{code}

In Java 7 if you print the declared methods of the Ext interface:

    System.out.println( Arrays.toString(Ext.class.getDeclaredMethods()) );

you obtain only one method:

    [public abstract java.lang.String org.drools.compiler.IntrospectionTest$Ext.getA()]

This is expected because Class.getDeclaredMethods() ""Returns an array containing Method objects reflecting all the declared methods of the class or interface represented by this Class object, including public, protected, default (package) access, and private methods, but excluding inherited methods."" https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredMethods--

Nevertheless if I try exactly the same thing in Java 8 I obtain a totally different result:

    [public abstract java.lang.String org.drools.compiler.IntrospectionTest$Ext1.getA(),
     public default java.lang.Object org.drools.compiler.IntrospectionTest$Ext1.getA()]

Now it is also returning the method declared on the Base interface as it was a default method. This second method is flagged as a bridge method (see here https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getMethod-java.lang.String-java.lang.Class...- )

This change between Java 7 and 8 breaks getter/setter introspection of beans in some specific case",Major,Mario Fusco,,2016-02-01T09:48:20.000-0500,Bean introspection is not compatible with Java 8 compiler,Resolved,bug,Bug
2015-11-25T07:41:35.000-0500,DROOLS-988,Done,"When the incremental addition of a new rule causes the addition of a new segment after an already existing split, the path memory of the new rule is initialized with only the segment immediately before the split. In other words if before the split there are 2 or more segments only the last one is set also on the new path, leaving it partially not initialized.",Major,Mario Fusco,,2015-11-24T06:13:01.000-0500,Incomplete path initialization during incremental compilation,Resolved,bug,Bug
2016-06-25T06:14:48.000-0400,DROOLS-1219,Done,"As demonstrated by the following not all ClassObjectTypes are correctly rewired during a package merge. In that case R2 doesn't fire because the ClassObjectType used by the from pattern is not rewired to the new Class instance created by the second ProjectClassLoader.

{code}
    @Test
    public void testWiringClassOnPackageMerge() throws Exception {
        String drl_init =
                ""package init;\n"" +
                ""import org.kie.test.TestObject\n"" +
                ""rule RInit when\n"" +
                ""then\n"" +
                ""    TestObject obj1 = new TestObject();\n"" +
                ""    TestObject obj2 = new TestObject();"" +
                ""    obj1.add(obj2);"" +
                ""    insert(obj1);\n"" +
                ""end"";

        String drl1 =
                ""package p1;\n"" +
                ""import org.kie.test.TestObject\n"" +
                ""global java.util.List list;\n"" +
                ""rule R1 when\n"" +
                ""    $obj : TestObject( $objs : objects )\n"" +
                ""    $s : Object() from $objs\n"" +
                ""then\n"" +
                ""    list.add(\""R1\"");\n"" +
                ""end"";

        String drl2 =
                ""package p2;\n"" +
                ""import org.kie.test.TestObject\n"" +
                ""global java.util.List list;\n"" +
                ""rule R2 when\n"" +
                ""    $obj : TestObject( $objs : objects )\n"" +
                ""    $s : TestObject() from $objs\n"" +
                ""then\n"" +
                ""    list.add(\""R2\"");\n"" +
                ""end"";

        String javaSrc =
                ""package org.kie.test;\n"" +
                ""import java.util.*;\n"" +
                ""\n"" +
                ""public class TestObject {\n"" +
                ""    private final List<TestObject> objects = new ArrayList<TestObject>();\n"" +
                ""\n"" +
                ""    public List<TestObject> getObjects() {\n"" +
                ""        return objects;\n"" +
                ""    }\n"" +
                ""    public void add(TestObject obj) {\n"" +
                ""        objects.add(obj);"" +
                ""    }"" +
                ""}\n"";

        String path = ""org/kie/test/MyRuleUnit"";

        KieServices ks = KieServices.Factory.get();
        KieFileSystem kfs = ks.newKieFileSystem();
        kfs.writeKModuleXML(ks.newKieModuleModel().toXML())
           .write(""src/main/resources/a.drl"", drl_init)
           .write(""src/main/resources/b.drl"", drl1)
           .write(""src/main/resources/c.drl"", drl2)
           .write(""src/main/java/org/kie/test/TestObject.java"", javaSrc);

        ks.newKieBuilder( kfs ).buildAll();
        KieContainer kcontainer = ks.newKieContainer(ks.getRepository().getDefaultReleaseId());
        KieSession kSession = kcontainer.newKieSession();

        List<String> list = new ArrayList<String>();
        kSession.setGlobal( ""list"", list );
        kSession.fireAllRules();

        assertEquals( 2, list.size() );
        assertTrue( list.contains( ""R1"" ) );
        assertTrue( list.contains( ""R2"" ) );
    }
{code}",Major,Mario Fusco,,2016-06-24T11:39:23.000-0400,ClassObjectTypes are not all correctly rewired during a packages merge,Resolved,bug,Bug
2016-06-25T00:53:01.000-0400,DROOLS-1212,Done,"I'm getting some exceptions during GF4 startup related with _""Input stream has been finalized or forced closed without being explicitly closed; stream instantiation reported in following stack trace""_ and it seems similar to DROOLS-812.

org.drools.template.parser.DefaultTemplateRuleBase.readKnowledgeBase(String)
{code}
    private InternalKnowledgeBase readKnowledgeBase(String drl) {
        try {
            //            logger.info(drl);
            // read in the source
            Reader source = new StringReader(drl);
            KnowledgeBuilderImpl builder = new KnowledgeBuilderImpl();
            builder.addPackageFromDrl(source);
            InternalKnowledgePackage pkg = builder.getPackage();

            // add the package to a rulebase (deploy the rule package).
            InternalKnowledgeBase kBase = (InternalKnowledgeBase) KnowledgeBaseFactory.newKnowledgeBase();
            kBase.addPackage(pkg);
            return kBase;

        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
{code}

Is related with:
{noformat}
[#|2016-06-15T13:51:07.671+0200|WARNING|glassfish 4.1|javax.enterprise.system.util|_ThreadID=74442;_ThreadName=RunLevelControllerThread-1465991462855;_TimeMillis=1465991467671;_LevelValue=900;_MessageID=NCLS-COMUTIL-00023;|Input stream has been finalized or forced closed without being explicitly closed; stream instantiation reported in following stack trace
java.lang.Throwable
  at org.drools.template.parser.DefaultTemplateRuleBase.readKnowledgeBase(DefaultTemplateRuleBase.java:133)
  at org.drools.template.parser.DefaultTemplateRuleBase.<init>(DefaultTemplateRuleBase.java:56)
  at org.drools.template.parser.TemplateDataListener.<init>(TemplateDataListener.java:74)
  at org.drools.template.parser.TemplateDataListener.<init>(TemplateDataListener.java:50)
  at org.drools.template.ObjectDataCompiler.compile(ObjectDataCompiler.java:57)
  at com.mycompany.mypackage.MyClass.init(MyClass.java:xxx)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.BeanCallbackInterceptor.intercept(InterceptorManager.java:1035)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:205)
  at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
  at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:986)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:205)
  at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:163)
  at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.init(SystemInterceptorProxy.java:125)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:986)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:412)
  at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:375)
  at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:2014)
  at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:468)
  at com.sun.ejb.containers.AbstractSingletonContainer.access$000(AbstractSingletonContainer.java:74)
  at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:647)
  at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:389)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:219)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:180)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:158)
  ...
{noformat}

There is another class that is also throwing the same exception:
{noformat}
[#|2016-06-14T11:08:19.953+0200|WARNING|glassfish 4.1|javax.enterprise.system.util|_ThreadID=68093;_ThreadName=RunLevelControllerThread-1465895294550;_TimeMillis=1465895299953;_LevelValue=900;_MessageID=NCLS-COMUTIL-00023;|Input stream has been finalized or forced closed without being explicitly closed; 
stream instantiation reported in following stack trace
java.lang.Throwable
  at com.sun.enterprise.loader.ASURLClassLoader$SentinelInputStream.<init>(ASURLClassLoader.java:1278)
  at com.sun.enterprise.loader.ASURLClassLoader$InternalJarURLConnection.getInputStream(ASURLClassLoader.java:1386)
  at java.net.URLClassLoader.getResourceAsStream(URLClassLoader.java:238)
  at com.sun.enterprise.loader.ASURLClassLoader.getResourceAsStream(ASURLClassLoader.java:930)
  at java.lang.Class.getResourceAsStream(Class.java:2223)
  at org.eclipse.jdt.internal.compiler.parser.Parser.readReadableNameTable(Parser.java:719)
  at org.eclipse.jdt.internal.compiler.parser.Parser.initTables(Parser.java:615)
  at org.eclipse.jdt.internal.compiler.parser.Parser.<clinit>(Parser.java:124)
  at org.eclipse.jdt.internal.compiler.Compiler.initializeParser(Compiler.java:687)
  at org.eclipse.jdt.internal.compiler.Compiler.<init>(Compiler.java:285)
  at org.eclipse.jdt.internal.compiler.Compiler.<init>(Compiler.java:206)
  at org.drools.compiler.commons.jci.compilers.EclipseJavaCompiler.compile(EclipseJavaCompiler.java:416)
  at org.drools.compiler.commons.jci.compilers.AbstractJavaCompiler.compile(AbstractJavaCompiler.java:49)
  at org.drools.compiler.rule.builder.dialect.java.JavaDialect.compileAll(JavaDialect.java:417)
  at org.drools.compiler.compiler.DialectCompiletimeRegistry.compileAll(DialectCompiletimeRegistry.java:61)
  at org.drools.compiler.compiler.PackageRegistry.compileAll(PackageRegistry.java:138)
  at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAll(KnowledgeBuilderImpl.java:1314)
  at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:953)
  at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:944)
  at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:363)
  at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:339)
  at org.drools.template.parser.DefaultTemplateRuleBase.readKnowledgeBase(DefaultTemplateRuleBase.java:133)
  at org.drools.template.parser.DefaultTemplateRuleBase.<init>(DefaultTemplateRuleBase.java:56)
  at org.drools.template.parser.TemplateDataListener.<init>(TemplateDataListener.java:74)
  at org.drools.template.parser.TemplateDataListener.<init>(TemplateDataListener.java:50)
  at org.drools.template.ObjectDataCompiler.compile(ObjectDataCompiler.java:57)
  at com.mycompany.mypackage.MyClass.init(MyClass.java:xxx)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.BeanCallbackInterceptor.intercept(InterceptorManager.java:1035)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:205)
  at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)
  at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:52)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:986)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.CallbackInvocationContext.proceed(CallbackInvocationContext.java:205)
  at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doCall(SystemInterceptorProxy.java:163)
  at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.init(SystemInterceptorProxy.java:125)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  at java.lang.reflect.Method.invoke(Method.java:498)
  at com.sun.ejb.containers.interceptors.CallbackInterceptor.intercept(InterceptorManager.java:986)
  at com.sun.ejb.containers.interceptors.CallbackChainImpl.invokeNext(CallbackChainImpl.java:72)
  at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:412)
  at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:375)
  at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:2014)
  at com.sun.ejb.containers.AbstractSingletonContainer.createSingletonEJB(AbstractSingletonContainer.java:468)
  at com.sun.ejb.containers.AbstractSingletonContainer.access$000(AbstractSingletonContainer.java:74)
  at com.sun.ejb.containers.AbstractSingletonContainer$SingletonContextFactory.create(AbstractSingletonContainer.java:647)
  at com.sun.ejb.containers.AbstractSingletonContainer.instantiateSingletonInstance(AbstractSingletonContainer.java:389)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:219)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.initializeSingleton(SingletonLifeCycleManager.java:180)
  at org.glassfish.ejb.startup.SingletonLifeCycleManager.doStartup(SingletonLifeCycleManager.java:158)
  at org.glassfish.ejb.startup.EjbApplication.start(EjbApplication.java:166)
  ...
{noformat}",Major,Petr Široký,,2016-06-20T05:55:50.000-0400,Input stream finalized or forced closed during server startup,Resolved,bug,Bug
2014-08-14T04:03:00.000-0400,DROOLS-575,Done,IdentityPlaceholderResolverStrategy misses the accessors to at least one of the 2 maps it uses. In fact when you want to unmarshall a KieSession you need to initialize that strategy with the maps produced during the marshalling. ,Major,Mario Fusco,,2014-08-14T04:00:37.000-0400,Missing maps accessors in IdentityPlaceholderResolverStrategy ,Resolved,bug,Bug
2015-07-31T09:17:18.000-0400,DROOLS-867,Done,Drools Template files (with extension .template) are currently ignored by KieBuilder. ,Major,Mario Fusco,,2015-07-31T09:13:29.000-0400,Drools Template files are ignored by KieBuilder,Resolved,bug,Bug
2015-11-23T03:04:55.000-0500,DROOLS-983,Done,"When I define 2 events with different @expires configurations (e.g. event-type-1 with 10s, the event-type-2 with 100d), and the event-type-2 is a subclass of event-type-1, the instances of event-type-2 are expired using the configuration of event-type-1.

So even though instances of event-type-2 have been configured to expire after a 100 days, they expire after 10 seconds.

What happens is that there are 2 WorkingMemoryReteExpireAction jobs scheduled for each insert, one with the scheduling of event-type-1, and one with the scheduling of event-type-2. This is probably due to the fact that the inserted event matches 2 patterns, one for event-type-1 (its superclass) and one for event-type-2 (its actual class). When the WorkingMemoryReteExpireAction with scheduling of event-type-1 runs, the event is expired.

Reproducer can be found here: https://github.com/DuncanDoyle/drools-event-expiration-issue . Just run ""mvn clean test"" on that project.",Major,Mario Fusco,,2015-11-18T05:51:28.000-0500,Incorrect expiration of events when using inheritance.,Resolved,bug,Bug
2016-02-16T10:43:04.000-0500,DROOLS-1062,Done,"ProjectClassLoader.getResource*s*(""org/foo"") returns an enumeration with 0 elements. That should be 1 element (most of the time anyway, as we don't have split packages).

See screenshot to learn how a getResources(String) should behave


{code}
public class ClassLoaderGetResourcesExperiment {

    public static void main(String[] args) throws IOException {
        ClassLoader classLoader = ClassLoaderGetResourcesExperiment.class.getClassLoader();
        printEnumeration(classLoader, ""org/optaplanner/core/experiment"");
        printEnumeration(classLoader, ""org/optaplanner/core/experiment/sub1"");
        printEnumeration(classLoader, ""org/optaplanner/core/experiment/sub2"");
        printEnumeration(classLoader, ""org/optaplanner/core/experiment/sub3"");
    }

    public static void printEnumeration(ClassLoader classLoader, String s) throws IOException {
        Enumeration<URL> enumeration = classLoader.getResources(s);
        System.out.println(s);
        System.out.println(""================================"");
        while (enumeration.hasMoreElements()) {
            Object nextElement = enumeration.nextElement();
            System.out.println(""    "" + nextElement);
        }
    }

}
{code}",Major,Petr Široký,,2016-02-12T08:52:32.000-0500,ProjectClassLoader.getResources(String) does not work correctly,Resolved,bug,Bug
2015-12-21T11:32:28.000-0500,DROOLS-1012,Done,"kie-ci-osgi Activator doesn't register the ClassLoaderResolver on the ServiceRegistry. This implies that when the KieContainer is created in a OSGi environment it is not able to get an instance of the MavenClassLoaderResolver and then cannot create a ClassLoader including all the transitive dependencies of the kjar to be compiled.

The attached project reproduces this issue. In order to run it, it's enough to do a mvn clean install of the project and issue the following commands in fuse:

features:addurl mvn:com.redhat/brms-fuse-integration-features/0.0.1-SNAPSHOT/xml/features
features:install brms-integration-bundle",Major,Mario Fusco,,2015-12-21T08:40:01.000-0500,kie-ci-osgi Activator doesn't register the ClassLoaderResolver on the ServiceRegistry,Closed,bug,Bug
2015-09-25T12:24:23.000-0400,DROOLS-928,Done,ParserHelper can throw a IndexOutOfBoundsException when parsing a malformed drl,Major,Mario Fusco,,2015-09-25T12:22:54.000-0400,ParserHelper can throw a IndexOutOfBoundsException when parsing a malformed drl,Resolved,bug,Bug
2015-07-08T14:43:40.000-0400,DROOLS-841,Done,"When using an unknown window name no compilation failure is raised. Subsequently, when trying to create a KieBase out of the compiled rules, the following NPE is raised:

{code}
java.lang.NullPointerException
	at org.drools.core.reteoo.builder.WindowReferenceBuilder.build(WindowReferenceBuilder.java:40)
	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:117)
	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:78)
	at org.drools.core.reteoo.builder.AccumulateBuilder.build(AccumulateBuilder.java:67)
	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:117)
	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:78)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:108)
	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:164)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:136)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:102)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1521)
	at org.drools.core.impl.KnowledgeBaseImpl.addRule(KnowledgeBaseImpl.java:1501)
	at org.drools.core.impl.KnowledgeBaseImpl.internalAddPackages(KnowledgeBaseImpl.java:868)
	at org.drools.core.impl.KnowledgeBaseImpl.addPackages(KnowledgeBaseImpl.java:723)
	at org.drools.core.impl.KnowledgeBaseImpl.addKnowledgePackages(KnowledgeBaseImpl.java:277)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:493)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieBase(KieContainerImpl.java:452)
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.newKieBase(KieContainerImpl.java:447)
	at org.kie.internal.utils.KieHelper.build(KieHelper.java:77)
	at org.drools.compiler.integrationtests.LengthSlidingWindowTest.checkPrice(LengthSlidingWindowTest.java:96)
	at org.drools.compiler.integrationtests.LengthSlidingWindowTest.testSlidingWindowWithDeclaration(LengthSlidingWindowTest.java:89)
{code}

",Major,Mario Fusco,,2015-07-08T14:32:41.000-0400,No compilation failure is raised when using an unknown window name,Resolved,bug,Bug
2016-04-13T11:09:49.000-0400,DROOLS-1120,Done,KieModuleMetaData.getProcesses() takes into consideration only files with extension bpmn2 while valid extension (and frequently used one) is bpmn. Thus both extensions should be considered as valid process file and by that added to map of processes collected by KieModuleMetaData,Major,Mario Fusco,,2016-04-13T09:18:31.000-0400,KieModuleMetaData.getProcess() ignores processes defined in file with extension bpmn,Resolved,bug,Bug
2015-03-20T06:16:52.000-0400,DROOLS-745,Done,"Class org.drools.core.util.MVELSafeHelper, obsolete and thread-blocking ""synchronized"" keyword in static getter of a static final field:

public class MVELSafeHelper {
    private static final MVELEvaluator evaluator;
    static {
        evaluator = KiePolicyHelper.isPolicyEnabled() ? new SafeMVELEvaluator() : new RawMVELEvaluator();
    }
    public static synchronized MVELEvaluator getEvaluator() {
        return evaluator;
    }
//
}",Major,Mario Fusco,,2015-03-17T23:24:54.000-0400,"Unnecessary and thread-blocking ""synchronized"" in MVELSafeHelper.java",Resolved,bug,Bug
2016-03-24T07:15:15.000-0400,DROOLS-1106,Done,when using XstreamXML marshaller for serialization and deserialization of ExecutionResults (ExecutionResultImpl) it fails when there are more than one fact handle returned.,Major,Mario Fusco,,2016-03-24T06:18:08.000-0400,xstream xml marshaller does not work for more than one fact handle for ExecutionResults,Resolved,bug,Bug
2015-04-23T09:52:19.000-0400,DROOLS-768,Done,"Hello,

I've a problem parsing DSL files when containing an ""isolated dot"" on version 
    <drools.version>6.0.3-redhat-7</drools.version>
    <drools.core.patch.version>BZ-1165207</drools.core.patch.version>
    <drools.reteoo.patch.version>BZ-1165207</drools.reteoo.patch.version>

",Major,Mario Fusco,,2015-04-22T15:53:26.000-0400,DSL parse error on isolated dot,Resolved,bug,Bug
2015-04-24T09:37:02.000-0400,DROOLS-769,Done,"KIE Server currently does not support decision tables. The WARs are missing drools-decisiontables jar. CNFEs are thrown when the server tries to load decision table.

See: https://groups.google.com/forum/#!topic/drools-usage/Axp0fJc3N3k",Critical,Edson Tirelli,,2015-04-23T04:36:20.000-0400,KIE Server does not support decision tables,Resolved,bug,Bug
2016-01-04T12:29:47.000-0500,DROOLS-1017,Done,"Trying to delete an already expired event in equality mode causes the following NPE in the TMS:

{code}
java.lang.NullPointerException
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:506)
	at org.drools.core.common.NamedEntryPoint.delete(NamedEntryPoint.java:442)
	at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1120)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:121)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:74)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:1003)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1346)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1284)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1303)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1293)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1274)
	at org.drools.compiler.integrationtests.CepEspTest.testDeleteExpiredEventWithTimestampAndEqualityKey(CepEspTest.java:5682)
{code}",Major,Mario Fusco,,2016-01-04T06:04:43.000-0500,NPE deleting an expired event in equality mode,Resolved,bug,Bug
2015-03-25T10:21:45.000-0400,DROOLS-750,Done,"Importing a custom accumulate function and a pojo from a different package the DRL compilation fails with the following message: ""Error: Unknown accumulate function: 'myfunc' on rule 'test'. All accumulate functions must be registered before building a resource""",Major,Mario Fusco,,2015-03-25T10:15:34.000-0400,Cannot resolve custom accumulate functions after declaring metadata for an existing type,Resolved,bug,Bug
2016-05-11T03:03:24.000-0400,DROOLS-1171,Done,"To reproduce, add this VM option: -Ddrools.dialect.java.compiler=NATIVE
when running for example XStreamXmlSolverFactoryTest in optaplanner-core (but any DRL, in drools-compiler's tests should suffice already).

I get this stacktrace:

{code}
java.lang.RuntimeException: java.lang.ClassCastException: org.drools.compiler.kie.builder.impl.MemoryKieModule$MemoryFolderURLConnection cannot be cast to java.net.JarURLConnection

	at com.sun.tools.javac.main.Main.compile(Main.java:559)
	at com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:129)
	at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:138)
	at org.drools.compiler.commons.jci.compilers.NativeJavaCompiler.compile(NativeJavaCompiler.java:91)
	at org.drools.compiler.commons.jci.compilers.AbstractJavaCompiler.compile(AbstractJavaCompiler.java:49)
	at org.drools.compiler.rule.builder.dialect.java.JavaDialect.compileAll(JavaDialect.java:417)
	at org.drools.compiler.compiler.DialectCompiletimeRegistry.compileAll(DialectCompiletimeRegistry.java:61)
	at org.drools.compiler.compiler.PackageRegistry.compileAll(PackageRegistry.java:138)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAll(KnowledgeBuilderImpl.java:1357)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:991)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:260)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:121)
	at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)
	at org.drools.compiler.kie.builder.impl.AbstractKieModule.buildKnowledgePackages(AbstractKieModule.java:243)
	at org.drools.compiler.kie.builder.impl.AbstractKieProject.verify(AbstractKieProject.java:64)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildKieProject(KieBuilderImpl.java:230)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.buildAll(KieBuilderImpl.java:198)
	at org.optaplanner.core.config.score.director.ScoreDirectorFactoryConfig.buildDroolsScoreDirectorFactory(ScoreDirectorFactoryConfig.java:450)
	at org.optaplanner.core.config.score.director.ScoreDirectorFactoryConfig.buildScoreDirectorFactory(ScoreDirectorFactoryConfig.java:300)
	at org.optaplanner.core.config.score.director.ScoreDirectorFactoryConfig.buildScoreDirectorFactory(ScoreDirectorFactoryConfig.java:231)
	at org.optaplanner.core.config.solver.SolverConfig.buildSolver(SolverConfig.java:216)
	at org.optaplanner.core.impl.solver.XStreamXmlSolverFactoryTest.configFileRemainsSameAfterReadWrite(XStreamXmlSolverFactoryTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:119)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:234)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
Caused by: java.lang.ClassCastException: org.drools.compiler.kie.builder.impl.MemoryKieModule$MemoryFolderURLConnection cannot be cast to java.net.JarURLConnection
	at org.drools.compiler.commons.jci.compilers.NativeJavaCompiler$MemoryFileManager.processJar(NativeJavaCompiler.java:358)
	at org.drools.compiler.commons.jci.compilers.NativeJavaCompiler$MemoryFileManager.findClassesInExternalJars(NativeJavaCompiler.java:336)
	at org.drools.compiler.commons.jci.compilers.NativeJavaCompiler$MemoryFileManager.list(NativeJavaCompiler.java:302)
	at com.sun.tools.javac.api.ClientCodeWrapper$WrappedJavaFileManager.list(ClientCodeWrapper.java:231)
	at com.sun.tools.javac.jvm.ClassReader.fillIn(ClassReader.java:2796)
	at com.sun.tools.javac.jvm.ClassReader.complete(ClassReader.java:2446)
	at com.sun.tools.javac.jvm.ClassReader.access$000(ClassReader.java:76)
	at com.sun.tools.javac.jvm.ClassReader$1.complete(ClassReader.java:240)
	at com.sun.tools.javac.code.Symbol.complete(Symbol.java:574)
	at com.sun.tools.javac.comp.Enter.visitTopLevel(Enter.java:300)
	at com.sun.tools.javac.tree.JCTree$JCCompilationUnit.accept(JCTree.java:518)
	at com.sun.tools.javac.comp.Enter.classEnter(Enter.java:258)
	at com.sun.tools.javac.comp.Enter.classEnter(Enter.java:272)
	at com.sun.tools.javac.comp.Enter.complete(Enter.java:486)
	at com.sun.tools.javac.comp.Enter.main(Enter.java:471)
	at com.sun.tools.javac.main.JavaCompiler.enterTrees(JavaCompiler.java:982)
	at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:857)
	at com.sun.tools.javac.main.Main.compile(Main.java:523)
	... 48 more
{code}

Reproduced on both JDK 8 and JDK 9.
",Major,Mario Fusco,,2016-05-10T11:19:19.000-0400,Java native compiler throws ClassCastException (so when using -Ddrools.dialect.java.compiler=NATIVE),Resolved,bug,Bug
2015-04-09T09:35:25.000-0400,DROOLS-759,Done,GuidedDecisionTreeModelUnmarshallingVisitor don't support rules that contain lines with only spaces in LHS. These empty lines should be thrown away in preprocessing in RuleModelDRLPersistenceImpl.,Minor,Michael Anstis,,2015-04-09T06:46:04.000-0400,GuidedDecisionTreeModelUnmarshallingVisitor doesn't support unmarshalling rules that contain line with only spaces in LHS,Resolved,bug,Bug
2015-06-10T13:09:09.000-0400,DROOLS-810,Done,"After the refactoring required by the propagation queue [DROOLS-751], a performance regression has been noticed",Major,Mario Fusco,,2015-06-08T15:11:33.000-0400,Traits : Performance regression due to unnecessary lattice operation,Resolved,bug,Bug
2015-06-10T13:09:29.000-0400,DROOLS-811,Done,When a traited object is updated from outside the WM - e.g. using session.update() - its traits are not updated,Major,Mario Fusco,,2015-06-08T15:13:51.000-0400,Update traits when core object is updated via API,Resolved,bug,Bug
2014-08-27T12:06:29.000-0400,DROOLS-581,Done,"Trying to fire a named consequence defined in a parent rule the following NPE is thrown

java.lang.NullPointerException
	at org.drools.core.definitions.rule.impl.RuleImpl.getNamedConsequence(RuleImpl.java:638)
	at org.drools.core.reteoo.RuleTerminalNodeLeftTuple.getConsequence(RuleTerminalNodeLeftTuple.java:165)
	at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1046)",Major,Mario Fusco,,2014-08-27T11:00:55.000-0400,NPE trying to fire a named consequence defined in a parent rule,Resolved,bug,Bug
2015-10-15T09:49:54.000-0400,DROOLS-952,Done,"During the execution of a rule the following NullPointerException may be randomly thrown (maybe as a consequence of a race condition?)

Caused by: java.lang.NullPointerException
        at org.drools.core.reteoo.RuleTerminalNode$SortDeclarations.compare(RuleTerminalNode.java:309)
        at org.drools.core.reteoo.RuleTerminalNode$SortDeclarations.compare(RuleTerminalNode.java:302)
        at java.util.TimSort.countRunAndMakeAscending(TimSort.java:324)
        at java.util.TimSort.sort(TimSort.java:189)
        at java.util.TimSort.sort(TimSort.java:173)
        at java.util.Arrays.sort(Arrays.java:659)
        at org.drools.core.reteoo.RuleTerminalNode.getDeclarations(RuleTerminalNode.java:254)
        at org.drools.core.base.mvel.MVELConsequence.evaluate(MVELConsequence.java:91)
        at org.drools.core.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1114)
        ... 25 more",Major,Mario Fusco,,2015-10-15T04:49:21.000-0400, NullPointerException in org.drools.core.reteoo.RuleTerminalNode$SortDeclarations,Resolved,bug,Bug
2017-01-10T11:52:17.000-0500,DROOLS-1392,Done,"Using Apache POI 3.15 cells of type Boolean are formatted as ""TRUE"" or ""FALSE"" instead of ""true"" or ""false"" and this leads to generate an invalid drl that will raise compilation errors like the following

{code}
Rule Compilation error : [Rule name='Spreadsheet Example_11']
  rule_table/Rule_Spreadsheet_Example_11413427566.java (7:503) : FALSE cannot be resolved to a variable
{code}",Major,Mario Fusco,,2017-01-02T11:30:20.000-0500,Boolean cells in decision tables are not correctly formatted with Apache POI 3.15,Resolved,bug,Bug
2017-05-23T11:56:32.000-0400,DROOLS-1389,Done,"Since Drools/jBPM 6.3 we have a new Kie Server rest and Java APIs the section `22.6.12. Native REST client for Execution Server` in documentation still shows a sample for the old client. The correct code can be found at section `22.9. Kie Server Java Client API`. In this case, I think we can simply remove the `22.6.12. Native REST client for Execution Server` section:

https://docs.jboss.org/drools/release/7.0.0.Beta5/drools-docs/html_single/#_native_rest_client_for_execution_server",Minor,Mario Fusco,,2016-12-29T21:09:17.000-0500,"Code from section ""22.6.12. Native REST client for Execution Server"" is outdated",Resolved,bug,Bug
2017-01-12T10:19:00.000-0500,DROOLS-1350,Done,"Using the kie-server REST API with a javascript framework like angular2 results in a [CORS Preflight W3C|https://www.w3.org/TR/cors/#resource-preflight-requests] response 401 :

{code}
zone.js:1274 OPTIONS http://my-kie-server1-default.192.168.42.25.xip.io/kie-server/services/rest/server/containers/quickorder-kie/processes/quickorder/instances 

XMLHttpRequest cannot load http://my-kie-server1-default.192.168.42.25.xip.io/kie-server/services/rest/server/containers/quickorder-kie/processes/quickorder/instances. Response for preflight has invalid HTTP status code 401
{code}

CORS Response Header are set, this is not the problem:
{code:xml}
# filter references
/subsystem=undertow/server=default-server/host=default-host/filter-ref=Access-Control-Allow-Origin:add
/subsystem=undertow/server=default-server/host=default-host/filter-ref=Access-Control-Allow-Methods:add
/subsystem=undertow/server=default-server/host=default-host/filter-ref=Access-Control-Allow-Headers:add
/subsystem=undertow/server=default-server/host=default-host/filter-ref=Access-Control-Allow-Credentials:add

# filter
/subsystem=undertow/configuration=filter/response-header=Access-Control-Allow-Origin:add(header-name=Access-Control-Allow-Origin,header-value=""*"")
/subsystem=undertow/configuration=filter/response-header=Access-Control-Allow-Methods:add(header-name=Access-Control-Allow-Methods,header-value=""GET, PUT, POST, OPTIONS, DELETE"")
/subsystem=undertow/configuration=filter/response-header=Access-Control-Allow-Headers:add \
(header-name=Access-Control-Allow-Headers,header-value=""accept, authorization, content-type, x-requested-with, X-KIE-ContentType"")
/subsystem=undertow/configuration=filter/response-header=Access-Control-Allow-Credentials:add(header-name=Access-Control-Allow-Credentials,header-value=""true"")

{code}

The problem occurs by the kie-server web descriptor security constraint:

{code:title=web.xml}
...
<security-constraint>
    <web-resource-collection>
      <web-resource-name>REST web resources</web-resource-name>
      <url-pattern>/services/rest/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>kie-server</role-name>
    </auth-constraint>
</security-constraint>
...
{code}

The security constraint should be active for all jax-rs HTTP methods, without the OPTIONS method:
{code:title=web.xml}
...
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>REST web resources</web-resource-name>
      <url-pattern>/services/rest/*</url-pattern>
      <http-method>GET</http-method>
      <http-method>PUT</http-method>
      <http-method>POST</http-method>
      <http-method>DELETE</http-method>
    </web-resource-collection>
    <auth-constraint>
      <role-name>kie-server</role-name>
    </auth-constraint>
  </security-constraint>
...
{code}

Tested with firefox and chrome.
",Major,Maciej Swiderski,,2016-10-29T04:42:24.000-0400,401 Unauthorized kie-server rest api peflight call error -> change web.xml security constraints,Resolved,bug,Bug
2017-01-04T04:02:18.000-0500,DROOLS-1395,Done,"The addition of a type declaration during an incremental compilation like the following:

{code}
declare OtherDummyEvent
    @role( event )
    @timestamp( timestamp )
end
{code}

is not reflected in the existing knowledge base. For this reason also adding a new rule like this

{code}
rule ""RG_TEST_2""
    when
       $event: DummyEvent ()
       $other : OtherDummyEvent(id == $event.id, this after $event)
    then
        System.out.println(""RG_TEST_2 fired"");
        retract($other);
end
{code}

and inserting an OtherDummyEvent causes the following ClassCastException :

{code}
ClassCastException: org.drools.core.common.DefaultFactHandle cannot be cast to org.drools.core.common.EventFactHandle
{code}

because the instance of OtherDummyEvent is considered a fact instead of an event.",Major,Mario Fusco,,2017-01-03T13:03:32.000-0500,ClassCastException when adding a type declaration with incremental upgrade,Resolved,bug,Bug
2017-01-10T08:57:57.000-0500,DROOLS-1399,Done,"During incremental compilation the equivalent DRL file contains only a modification with a new space character in a non-rule, non-resource line. Currently, this triggers the incremental compilation to rebuild all the resources associated in that DRL file anyway. Consequently, a rule in that DRL file might be actually UNchanged; but following the explanation above, it will match and fire again, like it's a new/modified rule.",Minor,Matteo Mortari,,2017-01-05T05:34:48.000-0500,Comparison of DRL changes should not consider spaces during incremental compilation,Resolved,bug,Bug
2017-01-12T02:59:54.000-0500,DROOLS-1376,Done,"Reproducible by adding in XPathTest:

{code:java}
    @Test
    public void testDoubleAdd() {
        String drl =
                ""import org.drools.compiler.xpath.*;\n"" +
                ""\n"" +
                ""rule R2 when\n"" +
                ""  Group( $id: name, $p: /members{age >= 20} )\n"" +
                ""then\n"" +
                ""  System.out.println( $id + \"".\"" + $p.getName() );\n"" +
                ""  insertLogical(      $id + \"".\"" + $p.getName() );\n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build()
                                             .newKieSession();
        
        Group x = new Group(""X"");
        Group y = new Group(""Y"");
        ksession.insert( x );
        ksession.insert( y );
        ksession.fireAllRules();
        assertFalse (factsCollection(ksession).contains(""X.Ada""));
        assertFalse (factsCollection(ksession).contains(""X.Bea""));
        assertFalse (factsCollection(ksession).contains(""Y.Ada""));
        assertFalse (factsCollection(ksession).contains(""Y.Bea""));
        
        Adult ada = new Adult(""Ada"", 20);
        Adult bea = new Adult(""Bea"", 20);
        x.addPerson(ada);
        x.addPerson(bea);
        y.addPerson(ada);
        y.addPerson(bea);
        ksession.fireAllRules();
        assertTrue  (factsCollection(ksession).contains(""X.Ada""));
        assertTrue  (factsCollection(ksession).contains(""X.Bea""));
        assertTrue  (factsCollection(ksession).contains(""Y.Ada""));
        assertTrue  (factsCollection(ksession).contains(""Y.Bea""));
        
        x.removePerson(ada);
        x.removePerson(bea);
        y.removePerson(ada);
        y.removePerson(bea);  
        ksession.fireAllRules();
        assertFalse (factsCollection(ksession).contains(""X.Ada""));
        assertFalse (factsCollection(ksession).contains(""X.Bea""));
        assertFalse (factsCollection(ksession).contains(""Y.Ada""));
        assertFalse (factsCollection(ksession).contains(""Y.Bea""));
    }
    
    @Test
    public void testDoubleRemove() {
        String drl =
                ""import org.drools.compiler.xpath.*;\n"" +
                ""\n"" +
                ""rule R2 when\n"" +
                ""  Group( $id: name, $p: /members{age >= 20} )\n"" +
                ""then\n"" +
                ""  System.out.println( $id + \"".\"" + $p.getName() );\n"" +
                ""  insertLogical(      $id + \"".\"" + $p.getName() );\n"" +
                ""end\n"";

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build()
                                             .newKieSession();
        
        Adult ada = new Adult(""Ada"", 20);
        Adult bea = new Adult(""Bea"", 20);
        Group x = new Group(""X"");
        Group y = new Group(""Y"");
        x.addPerson(ada);
        x.addPerson(bea);
        y.addPerson(ada);
        y.addPerson(bea);
        ksession.insert( x );
        ksession.insert( y );
        ksession.fireAllRules();
        assertTrue  (factsCollection(ksession).contains(""X.Ada""));
        assertTrue  (factsCollection(ksession).contains(""X.Bea""));
        assertTrue  (factsCollection(ksession).contains(""Y.Ada""));
        assertTrue  (factsCollection(ksession).contains(""Y.Bea""));
        
        x.removePerson(ada);
        x.removePerson(bea);
        y.removePerson(ada);
        y.removePerson(bea);  
        ksession.fireAllRules();
        assertFalse (factsCollection(ksession).contains(""X.Ada""));
        assertFalse (factsCollection(ksession).contains(""X.Bea""));
        assertFalse (factsCollection(ksession).contains(""Y.Ada""));
        assertFalse (factsCollection(ksession).contains(""Y.Bea""));
    }
{code}
",Major,Matteo Mortari,,2016-12-06T09:14:28.000-0500,OOPath 2+ notifyModification() result only the 1st being effective,Resolved,bug,Bug
2017-03-20T07:08:40.000-0400,DROOLS-1363,Done,"Revapi Maven plugin, as used in kie-api, forks the exeuctions causing almost the whole build to be executed three times. This needs to be fixed.",Major,Marian Macik,,2016-11-16T07:03:36.000-0500,revapi-maven-plugin forks exutions,Resolved,bug,Bug
2017-01-12T10:19:41.000-0500,DROOLS-1381,Done,"Spotted a ConcurrentModificationException just after startup with multiple clients starting processes concurrently.

Seems the problem is unsynchronized access to the service loader in org.kie.server.services.impl.security.JACCIdentityProvider.getNameFromAdapter  , so it may only occur after startup  (e.g. when the node joins a busy cluster)

{noformat}
[0m[33m18:03:52,495 WARN  [org.drools.persistence.SingleSessionCommandService] (default-threads - 40) Could not commit session: java.util.ConcurrentModificationException
	at java.util.LinkedHashMap$LinkedHashIterator.nextNode(LinkedHashMap.java:719) [rt.jar:1.8.0_111]
	at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:752) [rt.jar:1.8.0_111]
	at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:750) [rt.jar:1.8.0_111]
	at java.util.ServiceLoader$1.next(ServiceLoader.java:479) [rt.jar:1.8.0_111]
	at org.kie.server.services.impl.security.JACCIdentityProvider.getNameFromAdapter(JACCIdentityProvider.java:98)
	at org.kie.server.services.impl.security.JACCIdentityProvider.getName(JACCIdentityProvider.java:50)
	at org.jbpm.kie.services.impl.audit.ServicesAwareAuditEventBuilder.buildEvent(ServicesAwareAuditEventBuilder.java:50)
	at org.jbpm.process.audit.JPAWorkingMemoryDbLogger.beforeProcessStarted(JPAWorkingMemoryDbLogger.java:137)
	at org.drools.core.event.ProcessEventSupport.fireBeforeProcessStarted(ProcessEventSupport.java:40)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcessInstance(ProcessRuntimeImpl.java:207)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:191)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:183)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.startProcess(StatefulKnowledgeSessionImpl.java:1834)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:122)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:40)
	at org.drools.core.command.impl.DefaultCommandService.execute(DefaultCommandService.java:36)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.SingleSessionCommandService$TransactionInterceptor.execute(SingleSessionCommandService.java:592)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.jpa.OptimisticLockRetryInterceptor.execute(OptimisticLockRetryInterceptor.java:82)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.jta.TransactionLockInterceptor.execute(TransactionLockInterceptor.java:73)
	at org.drools.persistence.SingleSessionCommandService.execute(SingleSessionCommandService.java:385)
	at org.drools.core.command.impl.CommandBasedStatefulKnowledgeSession.startProcess(CommandBasedStatefulKnowledgeSession.java:256)
	at org.jbpm.kie.services.impl.ProcessServiceImpl.startProcess(ProcessServiceImpl.java:97)
	at org.kie.server.services.jbpm.ProcessServiceBase.startProcess(ProcessServiceBase.java:86)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_111]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:133)
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:94)
	at org.kie.server.services.jbpm.JBPMKieContainerCommandServiceImpl.executeScript(JBPMKieContainerCommandServiceImpl.java:128)
	at org.kie.server.jms.KieServerMDB.onMessage(KieServerMDB.java:238)
	at sun.reflect.GeneratedMethodAccessor52.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:375)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:86)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:97)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:375)
	at org.openshift.kieserver.jms.redirect.RedirectInterceptor.doIntercept(RedirectInterceptor.java:190)
	at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.tx.EjbBMTInterceptor.handleInvocation(EjbBMTInterceptor.java:104)
	at org.jboss.as.ejb3.tx.BMTInterceptor.processInvocation(BMTInterceptor.java:60)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:93)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.messagedriven.MessageDrivenComponentDescription$5$1.processInvocation(MessageDrivenComponentDescription.java:203)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:189)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)
	at javax.jms.MessageListener$$$view5.onMessage(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor50.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ejb3.inflow.MessageEndpointInvocationHandler.doInvoke(MessageEndpointInvocationHandler.java:140)
	at org.jboss.as.ejb3.inflow.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:73)
	at com.sun.proxy.$Proxy137.onMessage(Unknown Source)
	at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.onMessage(MessageEndpointProxy.java:123)
	at org.apache.activemq.ra.MessageEndpointProxy.onMessage(MessageEndpointProxy.java:64)
	at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:1038)
	at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:169)
	at org.jboss.jca.core.workmanager.WorkWrapper.run(WorkWrapper.java:215)
	at org.jboss.threads.SimpleDirectExecutor.execute(SimpleDirectExecutor.java:33)
	at org.jboss.threads.QueueExecutor.runTask(QueueExecutor.java:808)
	at org.jboss.threads.QueueExecutor.access$100(QueueExecutor.java:45)
	at org.jboss.threads.QueueExecutor$Worker.run(QueueExecutor.java:828)
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_111]
	at org.jboss.threads.JBossThread.run(JBossThread.java:122)

[0m[31m18:03:52,684 ERROR [org.kie.server.services.jbpm.JBPMKieContainerCommandServiceImpl] (default-threads - 40) Error while processing DescriptorCommand{service='ProcessService', method='startProcess', arguments='[org.kie.server.api.model.type.JaxbString@6072ba29, org.kie.server.api.model.type.JaxbString@93a367e]', marshallerFormat='xml', payload=<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>
<map-type>
    <entries/>
</map-type>
} command: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_111]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:133)
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:94)
	at org.kie.server.services.jbpm.JBPMKieContainerCommandServiceImpl.executeScript(JBPMKieContainerCommandServiceImpl.java:128)
	at org.kie.server.jms.KieServerMDB.onMessage(KieServerMDB.java:238)
	at sun.reflect.GeneratedMethodAccessor52.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:375)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:86)
	at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:97)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:375)
	at org.openshift.kieserver.jms.redirect.RedirectInterceptor.doIntercept(RedirectInterceptor.java:190)
	at sun.reflect.GeneratedMethodAccessor51.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
	at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.tx.EjbBMTInterceptor.handleInvocation(EjbBMTInterceptor.java:104)
	at org.jboss.as.ejb3.tx.BMTInterceptor.processInvocation(BMTInterceptor.java:60)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:93)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:43)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:89)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:55)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ejb3.component.messagedriven.MessageDrivenComponentDescription$5$1.processInvocation(MessageDrivenComponentDescription.java:203)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:189)
	at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
	at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
	at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
	at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:73)
	at javax.jms.MessageListener$$$view5.onMessage(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor50.invoke(Unknown Source) [:1.8.0_111]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_111]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_111]
	at org.jboss.as.ejb3.inflow.MessageEndpointInvocationHandler.doInvoke(MessageEndpointInvocationHandler.java:140)
	at org.jboss.as.ejb3.inflow.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:73)
	at com.sun.proxy.$Proxy137.onMessage(Unknown Source)
	at org.apache.activemq.ra.MessageEndpointProxy$MessageEndpointAlive.onMessage(MessageEndpointProxy.java:123)
	at org.apache.activemq.ra.MessageEndpointProxy.onMessage(MessageEndpointProxy.java:64)
	at org.apache.activemq.ActiveMQSession.run(ActiveMQSession.java:1038)
	at org.apache.activemq.ra.ServerSessionImpl.run(ServerSessionImpl.java:169)
	at org.jboss.jca.core.workmanager.WorkWrapper.run(WorkWrapper.java:215)
	at org.jboss.threads.SimpleDirectExecutor.execute(SimpleDirectExecutor.java:33)
	at org.jboss.threads.QueueExecutor.runTask(QueueExecutor.java:808)
	at org.jboss.threads.QueueExecutor.access$100(QueueExecutor.java:45)
	at org.jboss.threads.QueueExecutor$Worker.run(QueueExecutor.java:828)
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_111]
	at org.jboss.threads.JBossThread.run(JBossThread.java:122)
Caused by: java.util.ConcurrentModificationException
	at java.util.LinkedHashMap$LinkedHashIterator.nextNode(LinkedHashMap.java:719) [rt.jar:1.8.0_111]
	at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:752) [rt.jar:1.8.0_111]
	at java.util.LinkedHashMap$LinkedEntryIterator.next(LinkedHashMap.java:750) [rt.jar:1.8.0_111]
	at java.util.ServiceLoader$1.next(ServiceLoader.java:479) [rt.jar:1.8.0_111]
	at org.kie.server.services.impl.security.JACCIdentityProvider.getNameFromAdapter(JACCIdentityProvider.java:98)
	at org.kie.server.services.impl.security.JACCIdentityProvider.getName(JACCIdentityProvider.java:50)
	at org.jbpm.kie.services.impl.audit.ServicesAwareAuditEventBuilder.buildEvent(ServicesAwareAuditEventBuilder.java:50)
	at org.jbpm.process.audit.JPAWorkingMemoryDbLogger.beforeProcessStarted(JPAWorkingMemoryDbLogger.java:137)
	at org.drools.core.event.ProcessEventSupport.fireBeforeProcessStarted(ProcessEventSupport.java:40)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcessInstance(ProcessRuntimeImpl.java:207)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:191)
	at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:183)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.startProcess(StatefulKnowledgeSessionImpl.java:1834)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:122)
	at org.drools.core.command.runtime.process.StartProcessCommand.execute(StartProcessCommand.java:40)
	at org.drools.core.command.impl.DefaultCommandService.execute(DefaultCommandService.java:36)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.SingleSessionCommandService$TransactionInterceptor.execute(SingleSessionCommandService.java:592)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.jpa.OptimisticLockRetryInterceptor.execute(OptimisticLockRetryInterceptor.java:82)
	at org.drools.core.command.impl.AbstractInterceptor.executeNext(AbstractInterceptor.java:41)
	at org.drools.persistence.jta.TransactionLockInterceptor.execute(TransactionLockInterceptor.java:73)
	at org.drools.persistence.SingleSessionCommandService.execute(SingleSessionCommandService.java:385)
	at org.drools.core.command.impl.CommandBasedStatefulKnowledgeSession.startProcess(CommandBasedStatefulKnowledgeSession.java:256)
	at org.jbpm.kie.services.impl.ProcessServiceImpl.startProcess(ProcessServiceImpl.java:97)
	at org.kie.server.services.jbpm.ProcessServiceBase.startProcess(ProcessServiceBase.java:86)
	... 89 more
{noformat}",Major,Maciej Swiderski,,2016-12-14T07:12:38.000-0500,ConcurrentModificationException in ServiceLoader in org.kie.server.services.impl.security.JACCIdentityProvider.getNameFromAdapter,Resolved,bug,Bug
2017-01-05T05:24:12.000-0500,DROOLS-1397,Done,"I'm migrating an application that used drools 5.3 on the newer drools 6.5 version. 
I'm using a decision table, And one of my condition is accessing a Map which has an enum class as a key. It is not compiling unless I do a strange ArrayList cast.

Please refer to [this stackoverflow topic|http://stackoverflow.com/questions/41461468/drools-condition-cannot-retrieve-object-from-map-with-enum-key] for details.",Minor,Mario Fusco,,2017-01-05T04:38:16.000-0500,Drools condition cannot retrieve object from Map with Enum key,Resolved,bug,Bug
2017-01-05T09:19:15.000-0500,DROOLS-1401,Done,"we are using the JBPM 6.4 version and using Kie Deployment API lie-cie-6.4.0.jar for deploying the KJARs.

API we are using is 

FluentKieModuleDeploymentHelper deplymenthelperObj = KieModuleDeploymentHelper.newFluentInstance()
deplymenthelperObj .createKieJarAndDeployToMaven()

In KieModuleDeploymentHelperImpl CLASS
Method -- String convertFileToString(InputStream in)

In this the stream is never closed... the File Descriptors starts leaking....
",Major,Mario Fusco,,2016-11-12T00:38:28.000-0500,File Descriptor leak,Resolved,bug,Bug
2017-02-13T10:07:44.000-0500,DROOLS-1369,Done,"Not confirmed yet that this is a drools bug, but it probably is :)
Jiri is isolating.

To reproduce:
Use https://github.com/droolsjbpm/optaplanner/pull/234
and run CloudShuttleGatheringPerformanceTest.

{code}
java.lang.IllegalStateException: Impossible VariableListener corruption: the expectedWorkingScore (0hard/-397050soft) is not the workingScore  (-2000000000hard/-397050soft) after all VariableListeners were triggered without changes to the genuine variables.
But all the shadow variable values are still the same, so this is impossible.

	at org.optaplanner.core.impl.score.director.AbstractScoreDirector.assertShadowVariablesAreNotStale(AbstractScoreDirector.java:488)
	at org.optaplanner.core.impl.solver.scope.DefaultSolverScope.assertShadowVariablesAreNotStale(DefaultSolverScope.java:140)
	at org.optaplanner.core.impl.phase.scope.AbstractPhaseScope.assertShadowVariablesAreNotStale(AbstractPhaseScope.java:171)
	at org.optaplanner.core.impl.phase.AbstractPhase.predictWorkingStepScore(AbstractPhase.java:169)
	at org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.doStep(DefaultLocalSearchPhase.java:102)
	at org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.solve(DefaultLocalSearchPhase.java:92)
	at org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:87)
	at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:160)
	at org.optaplanner.examples.common.app.SolverPerformanceTest.runSpeedTest(SolverPerformanceTest.java:65)
	at org.optaplanner.examples.coachshuttlegathering.app.CoachShuttleGatheringPerformanceTest.solveDemo01FastAssert(CoachShuttleGatheringPerformanceTest.java:52)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
{code}",Major,Mario Fusco,,2016-11-24T08:51:58.000-0500,Property reactive triggers stateful working memory corruption on CoachShuttleGathering,Resolved,bug,Bug
2017-03-23T06:38:20.000-0400,DROOLS-1473,Done,None,Major,Mario Fusco,,2017-03-10T06:03:56.000-0500,Create a camel component to integrate the kie-server,Resolved,bug,Bug
2017-03-15T10:05:37.000-0400,DROOLS-1475,Done,"Simple type definitions without `allowed values` or `is collection` property set is ignored.

E.g.:

{code:xml}
	<itemDefinition name=""tSalary"" id=""_tSalary"">
		<typeRef>feel:number</typeRef>
	</itemDefinition>
{code}
",Major,Edson Tirelli,,2017-03-13T18:04:52.000-0400,Item definition without allowed values and is collection set is ignored,Resolved,bug,Bug
2017-03-17T08:40:56.000-0400,DROOLS-1456,Done,"This is a placeholder ticket for several small improvements on the error messages and error handling.

1. When a decision or a BKM has no expression, it raises the message “No expression defined for node ‘_guid’”. Would it be possible to put the node name when one is defined instead?

2. Add the DMN model object reference to the DMNMessage class.

3. Avoid NPE and NoSuchElementException when a function or decision table returns null as result.",Major,Edson Tirelli,,2017-02-28T16:59:31.000-0500,Improve error messages and error handling on DMN compilation and execution,Resolved,bug,Bug
2017-03-30T03:09:47.000-0400,DROOLS-1499,Done,"when currently get ksession bean , there could be repeated ksessions.

",Major,Mario Fusco,,2017-03-27T21:11:38.000-0400,"When concurrently get prototype ksession bean, it could be repeated",Resolved,bug,Bug
2017-04-15T09:09:05.000-0400,DROOLS-1502,Done,"The following example DMN model similar to an already existing in the code base is modified for ""local"" xmlns namespace definition:

[ EDIT : there was a wrong DMN model example ]

and it's throwing two distinct types of NPEs.. (follows)",Major,Matteo Mortari,,2017-03-29T10:32:38.000-0400,"Incorrect ""local"" namespace resolution",Resolved,bug,Bug
2016-12-06T05:21:25.000-0500,DROOLS-1368,Done,"I call 

{code}
kieSession.update(factHandle, entity, variableName);
{code}

with entity being an instance of LeadingExam, which extends Exam, which extends AbstractPersistable.
AbstractPersistable has setId(...).
Exam has setTopic(...), setRoom(...).
LeadingExam has setPeriod(...).

I get this:

{code}
java.lang.RuntimeException: Unknown property: period

	at org.drools.core.reteoo.PropertySpecificUtil.setPropertyOnMask(PropertySpecificUtil.java:102)
	at org.drools.core.reteoo.PropertySpecificUtil.calculatePatternMask(PropertySpecificUtil.java:94)
	at org.drools.core.reteoo.PropertySpecificUtil.calculatePositiveMask(PropertySpecificUtil.java:65)
	at org.drools.core.common.NamedEntryPoint.update(NamedEntryPoint.java:313)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.update(StatefulKnowledgeSessionImpl.java:1605)
	at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.update(DroolsScoreDirector.java:169)
	at org.optaplanner.core.impl.score.director.drools.DroolsScoreDirector.afterVariableChanged(DroolsScoreDirector.java:156)
	at org.optaplanner.core.impl.heuristic.selector.move.generic.ChangeMove.doMoveOnGenuineVariables(ChangeMove.java:75)
	at org.optaplanner.core.impl.heuristic.move.AbstractMove.doMove(AbstractMove.java:34)
	at org.optaplanner.core.impl.heuristic.move.CompositeMove.doMove(CompositeMove.java:110)
	at org.optaplanner.core.impl.constructionheuristic.decider.ConstructionHeuristicDecider.doMove(ConstructionHeuristicDecider.java:125)
	at org.optaplanner.core.impl.constructionheuristic.decider.ConstructionHeuristicDecider.decideNextStep(ConstructionHeuristicDecider.java:98)
	at org.optaplanner.core.impl.constructionheuristic.DefaultConstructionHeuristicPhase.solve(DefaultConstructionHeuristicPhase.java:74)
	at org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:87)
	at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:160)
	at org.optaplanner.examples.common.app.SolverPerformanceTest.runSpeedTest(SolverPerformanceTest.java:65)
	at org.optaplanner.examples.examination.app.ExaminationPerformanceTest.solveComp_set5FastAssert(ExaminationPerformanceTest.java:52)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)
	at org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.lang.Thread.run(Thread.java:745)
{code}

Debugging PropertySpecificUtil shows that settableProperties include ""id"", ""room"", ""topic"", but not ""period"". 

Note that there is also FollowingExam which also extends Exam.
FollowingExam also has setPeriod(...).",Critical,Mario Fusco,,2016-11-24T08:28:51.000-0500,"Property reactive KieSession.update(fh, h, propName) fails in polymorfic case with ""Unknown property""",Resolved,bug,Bug
2017-02-07T12:56:14.000-0500,DROOLS-1428,Done,"While doing some test, we might have discovered an issue with inner decision table reusing previous context entry.
 
This is the context:

 !image002.png|thumbnail! 
 
When I run this, I get no result for the decision. I would expect “red”. I’ve also attached the xml file. Let me know if anything on our serialization is wrong.

",Critical,Edson Tirelli,,2017-02-07T12:18:15.000-0500,DMN Decision Table not resolving variables in context,Resolved,bug,Bug
2017-02-09T11:39:04.000-0500,DROOLS-1426,Done,"CDI extension should be removed from drools-compiler [1] as it doesn't belong to core artifact. It can cause issues when deploying on various application servers like on WebSphere using Kie server - see attachment.


[1] https://github.com/droolsjbpm/drools/blob/7.0.0.Beta6/drools-compiler/src/main/resources/META-INF/services/javax.enterprise.inject.spi.Extension",Critical,Mario Fusco,,2017-02-06T11:48:33.000-0500,Remove CDI extension from drools-compiler,Resolved,bug,Bug
2017-03-08T12:09:04.000-0500,DROOLS-1469,Done,"Trying to compile a rule template using ExternalSpreadsheetCompiler, the rule compilation works correctly in stand alone eclipse project, but when done inside an OSGI bundle the following exception is throw at runtime:

{code}
java.lang.ClassNotFoundException: Unable to find class 'org.drools.template.parser.DefaultGenerator'
	at org.drools.core.base.ClassTypeResolver.resolveType(ClassTypeResolver.java:241)
	at org.drools.core.base.ClassTypeResolver.resolveType(ClassTypeResolver.java:130)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.processGlobals(KnowledgeBuilderImpl.java:1640)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.processOtherDeclarations(KnowledgeBuilderImpl.java:1613)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.mergePackage(KnowledgeBuilderImpl.java:1605)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackage(KnowledgeBuilderImpl.java:980)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:365)
	at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.addPackageFromDrl(KnowledgeBuilderImpl.java:341)
	at org.drools.template.parser.DefaultTemplateRuleBase.readKnowledgeBase(DefaultTemplateRuleBase.java:133)
	at org.drools.template.parser.DefaultTemplateRuleBase.<init>(DefaultTemplateRuleBase.java:56)
	at org.drools.template.parser.TemplateDataListener.<init>(TemplateDataListener.java:74)
	at org.drools.decisiontable.ExternalSpreadsheetCompiler.compile(ExternalSpreadsheetCompiler.java:99)
	at org.drools.decisiontable.ExternalSpreadsheetCompiler.compile(ExternalSpreadsheetCompiler.java:85)
	at com.mlnms.common.fmwk.drools.impl.DroolsBundleTracker.compileRules(DroolsBundleTracker.java:204)
	at com.mlnms.common.fmwk.drools.impl.DroolsBundleTracker.addNewRulesFromContexts(DroolsBundleTracker.java:183)
	at com.mlnms.common.fmwk.drools.impl.DroolsBundleTracker.addingBundle(DroolsBundleTracker.java:119)
	at com.mlnms.common.fmwk.drools.impl.DroolsBundleTracker.addingBundle(DroolsBundleTracker.java:67)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:467)
{code}",Major,Mario Fusco,,2017-03-07T05:06:19.000-0500,Using ExternalSpreadsheetCompiler in osgi throws java.lang.ClassNotFoundException,Resolved,bug,Bug
2017-03-06T20:19:54.000-0500,DROOLS-1465,Done,"not() unary tests as it is short-circuiting in some cases without checking all the elements. E.g.:

10 in ( not( null, 10 ) )  ----> short circuits and returns true when it should be false
null in ( not( 10, null ) ) -----> short circuits and returns true when it should be false
",Major,Edson Tirelli,,2017-03-06T18:54:15.000-0500,not() unary test is short circuiting in the presence of null,Resolved,bug,Bug
2017-03-06T18:21:46.000-0500,DROOLS-1464,Done,"Some unary tests are raising NPE on null input. E.g.:

```UnaryTestNode{ < 0 }```



",Major,Edson Tirelli,,2017-03-06T17:21:28.000-0500,Unary tests raising NPE on null input,Resolved,bug,Bug
2017-04-15T08:51:04.000-0400,DROOLS-1508,Done,The compiler is raising a NPE when it fails to resolve a typeref.,Critical,Edson Tirelli,,2017-04-03T19:50:56.000-0400,Prevent NPE when compiler fails to resolve a typeref,Resolved,bug,Bug
2017-04-15T09:11:28.000-0400,DROOLS-1512,Done,"Here is the stack trace:
WARN org.kie.dmn.core.compiler.DMNFEELHelper  - A non-critical error happened while evaluating a unary test. Execution will continue.
java.lang.NullPointerException
	at org.kie.dmn.core.compiler.DMNFEELHelper.valueMatchesInUnaryTests(DMNFEELHelper.java:64)
	at org.kie.dmn.core.impl.DMNRuntimeImpl.checkDependencyValueIsValid(DMNRuntimeImpl.java:361)
	at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateDecision(DMNRuntimeImpl.java:256)
	at org.kie.dmn.core.impl.DMNRuntimeImpl.evaluateAll(DMNRuntimeImpl.java:90)",Major,Edson Tirelli,,2017-04-04T16:58:04.000-0400,"Nullpointer exception when running a decision table with ""null"" as the input",Resolved,bug,Bug
2017-04-15T09:10:54.000-0400,DROOLS-1504,Done,None,Major,Matteo Mortari,,2017-03-31T03:52:47.000-0400,Resolution of variable with leading or trailing spaces,Resolved,bug,Bug
2017-04-15T09:11:09.000-0400,DROOLS-1505,Done,"Let's say you have ""Item Definition 1"" and ""Item Definition 2"" in that order in the XML file. 

If ""Item Definition 1"" has one of its component that is of type ""Item Definition 2"", it won't compile. 
If ""Item Definition 2"" uses ""Item Definition 1"" then it is fine.",Major,Matteo Mortari,,2017-03-31T14:50:11.000-0400,Model cannot compile if an item definition is using another item definition that is define after it,Resolved,bug,Bug
2017-04-10T09:16:23.000-0400,DROOLS-1509,Done,"XML Element in XStream is rendered with canonical name instead of being consistent with JAXB, for ""response"".
Additionally in JAXB marshalling the {{type}} and {{msg}} are attributes, while in XStream are child elements.

Please notice String special character escape is handled differently JAXB Vs XStream and this is NOT subject of this bug.",Major,Matteo Mortari,,2017-04-04T04:07:56.000-0400,ServiceResponse XStream marshalling inconsistencies with JAXB,Resolved,bug,Bug
2017-04-14T10:26:02.000-0400,DROOLS-1526,Done,DMN validation and compilation should check for empty decision table input entries and report as error.,Major,Edson Tirelli,,2017-04-13T23:43:49.000-0400,DMN validation needs to check for empty decision table input entries,Resolved,bug,Bug
2017-04-15T07:09:57.000-0400,DROOLS-1527,Done,"In some cases, the dmn-validator is generating improperly constructed error messages. E.g.:

Error compiling FEEL expression 'adjustedRate' for name 'org.kie.dmn.model.v1_1.LiteralExpression@2c0ca9cd' on node 'Loan Payment': Exception raised: ClassCastException

",Major,Edson Tirelli,,2017-04-14T22:00:36.000-0400,Improperly constructed error message on validation,Resolved,bug,Bug
2017-04-15T09:11:53.000-0400,DROOLS-1513,Done,None,Major,Matteo Mortari,,2017-04-05T08:18:29.000-0400,Evaluation result Type error check and reporting,Resolved,bug,Bug
2017-02-26T18:15:20.000-0500,DROOLS-1432,Done,"When a model contains errors that prevent compilation, the engine should provide a better error message pointing to the specific error.

At the moment, the attached model fails with a NPE and a message:

{quote}Message [id=1, kieBase=defaultKieBase, level=ERROR, path=car_damage_responsibility2.dmn, line=-1, column=0 text=Unable to compile DMN model for the resource]{quote}",Major,Edson Tirelli,,2017-02-09T13:35:03.000-0500,Improve error messages when compiling models with errors,Resolved,bug,Bug
2017-02-26T18:15:59.000-0500,DROOLS-1436,Done,"When trying to load that model, the following errors is logged:
 java.lang.IllegalStateException: [Message [id=1, kieBase=defaultKieBase, level=ERROR, path=trisotech/Get_Viable_Loan_Products.dmn, line=-1, column=0
   text=Unable to compile DMN model for the resource]]",Major,Edson Tirelli,,2017-02-10T16:58:35.000-0500,Unable to create runtime for the attached DMN model,Resolved,bug,Bug
2017-02-27T13:41:01.000-0500,DROOLS-1451,Done,"When using an OOPath expression in a declared window (does not matter if a length or a time window), a NPE is thrown. For instance, a rule such as:

{code}
declare window Pings
  MessageEvent( /msg{ message == 'Ping' } ) over window:length( 2 )
end

rule R when
  $messageEvent: MessageEvent() from window Pings
then
  events.add( $messageEvent );
end
{code}

produces the following exception (see the attachment for the full stacktrace) when building the KieBase:
{code}
java.lang.NullPointerException
	at org.drools.core.reteoo.builder.WindowReferenceBuilder.build(WindowReferenceBuilder.java:40)
	at org.drools.core.reteoo.builder.PatternBuilder.attachPattern(PatternBuilder.java:116)
	at org.drools.core.reteoo.builder.PatternBuilder.build(PatternBuilder.java:77)
	at org.drools.core.reteoo.builder.GroupElementBuilder$AndBuilder.build(GroupElementBuilder.java:108)
	at org.drools.core.reteoo.builder.GroupElementBuilder.build(GroupElementBuilder.java:68)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addSubRule(ReteooRuleBuilder.java:164)
	at org.drools.core.reteoo.builder.ReteooRuleBuilder.addRule(ReteooRuleBuilder.java:136)
	at org.drools.core.reteoo.ReteooBuilder.addRule(ReteooBuilder.java:110)
...
	at org.drools.compiler.kie.builder.impl.KieContainerImpl.createKieBase(KieContainerImpl.java:630)
...
{code}",Major,Mario Fusco,,2017-02-24T13:06:07.000-0500,NPE when building KieBase with OOPath in a declared window,Resolved,bug,Bug
2017-03-01T14:50:00.000-0500,DROOLS-1450,Done,None,Major,Matteo Mortari,,2017-02-24T05:59:06.000-0500,Validation rule ITEMDEF_NOT_UNIQUE not allowing two structure with same attributes,Resolved,bug,Bug
2017-05-23T11:48:26.000-0400,DROOLS-1537,Done,"Ticket representing question/bug from drools user group: https://groups.google.com/forum/#!topic/drools-usage/Gy3uhkh6J78

Hello Drools users,

I found an anomaly in Drools 6.5. I insert an Event, which triggers a rule with a timer after some time. For backup reasons I marshal the session inbetween to back it up and on unmarshal it later. However, after unmarshalling it, the scheduled activations are sometimes scheduled as if just inserted (e.g. 1min scheduling, with marshal/unmarshal after 25s results in the activation firing after 85 (25+60) seconds instead of actual 60s. I know this worked with Drools 5.6 consistently, but now it sometimes works, sometimes not, which is indeterministic.

I created a test reproducing this behaviour, which has changing output whenever you execute it. What the example does: It create a scheduled activation, which should trigger after 20s. After 10s the session is marshalled, destroyed and unmarshalled into a new session. After another 10s it should finally trigger. (10s + 10s -> the 20s scheduled).",Major,Mario Fusco,,2017-04-25T05:57:42.000-0400,Scheduled activations are rescheduled as if new when unmarshalling session in Drools 6.5,Resolved,bug,Bug
2017-05-06T12:07:19.000-0400,DROOLS-1531,Done,"From FEEL specification table 49:

bq. Type-checking is defined in Table 49. Note that type is not mapped to the domain, and null is not the name of a type, and null is not an instance of any type.

Also InstanceOfNode needs alignment to new interface methods available.",Minor,Matteo Mortari,,2017-04-18T06:11:16.000-0400,Fix instanceof accordingly to FEEL spec table 49 and InstanceOfNode,Resolved,bug,Bug
2017-05-08T07:20:53.000-0400,DROOLS-1544,Done,"A NPE is thrown by {{KieBuilderSetImpl}} when updating a Guided Decision Table file (from ""with error"" to ""no error""):
{code}
java.lang.NullPointerException
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.findResourcesWithErrors(KieBuilderSetImpl.java:104)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.registerInitialErrors(KieBuilderSetImpl.java:70)
	at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.<init>(KieBuilderSetImpl.java:58)
	at org.drools.compiler.kie.builder.impl.KieBuilderImpl.createFileSet(KieBuilderImpl.java:682)
{code}",Major,Mario Fusco,,2017-05-02T08:41:59.000-0400,Incremental Compilation with GDST ResourceType fails,Resolved,bug,Bug
2017-05-06T12:06:43.000-0400,DROOLS-1543,Done,"Using Java-api Comparator is not easily suitable to address the problem of ordering the ItemDefinition by their dependencies.

If the Comparator is used to check purely for dependencies, returning 0 for indipendent elements, assume the following:

{code:java}
X
Y -> Z
{code}

where X is independent from Y, Z; and Y depends on Z.

{code:java}
compare(X, Y) == 0 // by definition above

compare(X, Z) == 0 // still, by definition above, X is independent also from Z
compare(Y, Z) == 1 // because Y depends on Z, Y is bigger than Z.
{code}

The above breaks the API contract in the Java-API Comparator where stating:
{quote}Finally, the implementor must ensure that compare(x, y)==0 implies that sgn(compare(x, z))==sgn(compare(y, z)) for all z.{quote}",Major,Matteo Mortari,,2017-05-02T07:20:02.000-0400,DMN ItemDefinition dependencies ordering,Resolved,bug,Bug
2017-05-07T09:38:19.000-0400,DROOLS-1535,Done,DMN engine is not checking variables while compiling DTs and silently succeeding even if the referenced variable does not exist.,Critical,Edson Tirelli,,2017-04-23T11:18:52.000-0400,DMN engine not checking scope of variables on DTs,Resolved,bug,Bug
2017-05-08T11:01:13.000-0400,DROOLS-1542,Done,"When an Error/-RuntimeException- is thrown in MVEL via MVELExprAnalyzer.analyzeExpression(), the root cause Error/-RuntimeException- is not propagated nor logged. For example, if it was StackOverflowError, it's hard to identify the root cause.",Major,Mario Fusco,,2017-05-01T06:07:12.000-0400,Root cause Exception is hidden in MVELExprAnalyzer.analyzeExpression(),Resolved,bug,Bug
2017-01-13T13:33:09.000-0500,DROOLS-1404,Done,"The following code when placed in Misc2Test exhibit the problem

{code:java}
    public static class TestStaticUtils {
        public static int return1() { 
            return 1;
        }
    }
    
    @Test
    public void testCheck2() {
        String drl = ""package c;\n"" + // <<- keep this package name
                ""\n"" + 
                ""import "" + TestObject.class.getCanonicalName() + ""\n"" +
                ""\n"" + 
                ""rule fileBrule1 when\n"" + 
                ""  TestObject(value == 1)\n"" + 
                ""then\n"" + 
                ""end""
                ;
        
        String drl2 = ""package iTransiberian;\n"" + // <<- keep this package name
                ""\n"" + 
                ""import "" + TestObject.class.getCanonicalName() + ""\n"" +
                ""import "" + TestStaticUtils.class.getCanonicalName() + ""\n"" +
                ""\n"" + 
                ""rule fileArule1 when\n"" + 
                ""  $t : String()\n"" + 
                ""  TestObject(value == TestStaticUtils.return1() )\n"" + 
                ""then\n"" + 
                ""end\n""+ 
                ""rule fileArule2 when\n"" + // <<- keep this rule
                ""  $t : String()\n"" + 
                ""  TestObject(value == 0 )\n"" + 
                ""then\n"" + 
                ""end\n"" + 
                """"
                ;

        KieSession kieSession = new KieHelper()
                    .addContent(drl2, ResourceType.DRL)
                    .addContent(drl, ResourceType.DRL)
                    .build().newKieSession();
        
        ReteDumper.dumpRete(kieSession);
        System.out.println(drl);
        System.out.println(drl2);
        kieSession.addEventListener(new DebugAgendaEventListener());

        kieSession.insert(""test"");
        kieSession.insert(new TestObject(1));

        assertEquals(2, kieSession.fireAllRules() );
    }
{code}

Conducting further analysis...",Major,Matteo Mortari,,2017-01-12T16:04:05.000-0500,Alpha node not shared with static function evaluation,Resolved,bug,Bug
2017-01-13T12:43:27.000-0500,DROOLS-1405,Done,"Hi,

I get the following error when saving a DRL file:

2017-01-12 23:16:39,677 INFO  [org.guvnor.common.services.builder.ResourceChangeIncrementalBuilder] (EJB default - 10) Incremental build request being processed: default://master@opsc/health/src/main/resources/com/opsc/health/test2.drl (updated).        
2017-01-12 23:16:39,730 ERROR [org.kie.workbench.common.services.backend.builder.Builder] (EJB default - 10) null: java.lang.NullPointerException                                                                                                             
        at java.util.LinkedList.addAll(LinkedList.java:408)                                                                    
        at java.util.LinkedList.addAll(LinkedList.java:387)                                                                    
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.sortRulesByDependency(KnowledgeBuilderImpl.java:1231)         
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileRules(KnowledgeBuilderImpl.java:1086)                  
        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.compileAllRules(KnowledgeBuilderImpl.java:989)                
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildRules(CompositeKnowledgeBuilderImpl.java:264)   
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.buildPackages(CompositeKnowledgeBuilderImpl.java:122)
        at org.drools.compiler.builder.impl.CompositeKnowledgeBuilderImpl.build(CompositeKnowledgeBuilderImpl.java:105)        
        at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.buildChanges(KieBuilderSetImpl.java:142)                     
        at org.drools.compiler.kie.builder.impl.KieBuilderSetImpl.build(KieBuilderSetImpl.java:94)                             
        at org.kie.workbench.common.services.backend.builder.Builder.buildIncrementally(Builder.java:539)                      
        at org.kie.workbench.common.services.backend.builder.Builder.addResource(Builder.java:383)                             
        at org.kie.workbench.common.services.backend.builder.Builder.addResource(Builder.java:324)                             
        at org.kie.workbench.common.services.backend.builder.Builder.updateResource(Builder.java:405)                          
        at org.kie.workbench.common.services.backend.builder.BuildServiceImpl.lambda$updatePackageResource$1(BuildServiceImpl.java:320)                                                                                                                       
        at org.kie.workbench.common.services.backend.builder.BuildServiceImpl.updatePackageResource(BuildServiceImpl.java:338) 
        at org.kie.workbench.common.services.backend.builder.BuildServiceImpl.updatePackageResource(BuildServiceImpl.java:319) 
        at org.kie.workbench.common.services.backend.builder.BuildServiceImpl$Proxy$_$$_WeldClientProxy.updatePackageResource(Unknown Source)                                                                                                                 
        at org.guvnor.common.services.builder.ResourceChangeIncrementalBuilder$4.execute(ResourceChangeIncrementalBuilder.java:267)                                                                                                                           
        at org.guvnor.common.services.builder.IncrementalBuilderExecutorManager.execute(IncrementalBuilderExecutorManager.java:77)                                                                                                                            
        at sun.reflect.GeneratedMethodAccessor84.invoke(Unknown Source)                                                        
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)                               
        at java.lang.reflect.Method.invoke(Method.java:498)                                                                    
        at org.jboss.as.ee.component.ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptor.java:52)                                                                                                                           
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)                             
        at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:82)             
        at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:93)                
        at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:63)   
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)                                                                                                                         
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)                             
        at org.jboss.weld.ejb.AbstractEJBRequestScopeActivationInterceptor.aroundInvoke(AbstractEJBRequestScopeActivationInterceptor.java:73)                                                                                                                 
        at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:83)                                                                                                                         
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.as.ee.concurrent.ConcurrentContextInterceptor.processInvocation(ConcurrentContextInterceptor.java:45)     
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)                               
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)                               
        at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:52)                                                                                                                    
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.as.ejb3.component.singleton.SingletonComponentInstanceAssociationInterceptor.processInvocation(SingletonComponentInstanceAssociationInterceptor.java:53)                                                                                 
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)                                        
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInNoTx(CMTTxInterceptor.java:263)                                       
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.notSupported(CMTTxInterceptor.java:313)                                       
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:237)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.invocationmetrics.WaitTimeInterceptor.processInvocation(WaitTimeInterceptor.java:47)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.security.SecurityContextInterceptor.processInvocation(SecurityContextInterceptor.java:100)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.deployment.processors.StartupAwaitInterceptor.processInvocation(StartupAwaitInterceptor.java:22)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:437)
        at org.jboss.as.ejb3.concurrency.ContainerManagedConcurrencyInterceptor.processInvocation(ContainerManagedConcurrencyInterceptor.java:110)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:64)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:67)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:54)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.invocation.ContextClassLoaderInterceptor.processInvocation(ContextClassLoaderInterceptor.java:64)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
        at org.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:636)
        at org.jboss.invocation.AccessCheckingInterceptor.processInvocation(AccessCheckingInterceptor.java:61)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.invocation.InterceptorContext.run(InterceptorContext.java:356)
        at org.jboss.invocation.PrivilegedWithCombinerInterceptor.processInvocation(PrivilegedWithCombinerInterceptor.java:80)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
        at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:198)
        at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:185)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.LogDiagnosticContextRecoveryInterceptor.processInvocation(LogDiagnosticContextRecoveryInterceptor.java:82)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:340)
        at org.jboss.as.ejb3.component.interceptors.AsyncFutureInterceptorFactory$1$2.runInvocation(AsyncFutureInterceptorFactory.java:104)
        at org.jboss.as.ejb3.component.interceptors.AsyncInvocationTask.run(AsyncInvocationTask.java:74)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
        at org.jboss.threads.JBossThread.run(JBossThread.java:320)",Critical,Mario Fusco,,2017-01-12T18:29:01.000-0500,Drools compiler throws NPE on DRL save when more than one rule extends same rule in the same package,Resolved,bug,Bug
2017-01-12T11:27:21.000-0500,DROOLS-1402,Done,"Error:

{code:java}
Unable to Analyse Expression lastName == null:
[Error: unable to resolve method using strict-mode: org.test.MyBean.lastName()]
[Near : {... lastName == null ....}]
             ^ : [Rule name='Row 1 HelloRules']

{code}

Reproducer:

{code:java}
@Test
    public void testMTatteo() {
        String JAVA1 = ""package org.test;"" +
                ""    public class MyBean {\n"" + 
                ""        private String firstName;\n"" + 
                ""        public MyBean() { /* empty constructor */ }\n"" + 
                ""        public MyBean(String firstName) { this.firstName = firstName; }\n"" + 
                ""        public String getFirstName() { return firstName; }\n"" + 
                ""        public void setFirstName(String firstName) { this.firstName = firstName; }\n"" + 
                ""    }"";
        
        String DRL1 = ""package org.test;\n"" + 
                ""\n"" + 
                ""//from row number: 1\n"" + 
                ""rule \""Row 1 HelloRules\""\n"" + 
                ""    dialect \""mvel\""\n"" + 
                ""    when\n"" + 
                ""        helloProfile : MyBean( firstName == null )\n"" + 
                ""    then\n"" + 
                ""        System.out.println(helloProfile);"" + 
                ""end"";
        
        String INIT_DRL = ""package org.test; rule RINIT when eval(true) then insert(new MyBean()); end"";
        
        String JAVA2 = ""package org.test;"" +
                ""    public class MyBean {\n"" + 
                ""        private String firstName;\n"" + 
                ""        private String lastName;\n"" + 
                ""        public MyBean() { /* empty constructor */ }\n"" + 
                ""        public MyBean(String firstName) { this.firstName = firstName; }\n"" + 
                ""        public MyBean(String firstName, String lastName) { this.firstName = firstName; this.lastName = lastName; }\n"" + 
                ""        public String getFirstName() { return firstName; }\n"" + 
                ""        public void setFirstName(String firstName) { this.firstName = firstName; }\n"" + 
                ""        public String getLastName() { return lastName; }\n"" + 
                ""        public void setLastName(String lastName) { this.lastName = lastName; }\n"" + 
                ""    }"";
        
        String DRL2 = ""package org.test;\n"" + 
                ""\n"" + 
                ""//from row number: 1\n"" + 
                ""rule \""Row 1 HelloRules\""\n"" + 
                ""    dialect \""mvel\""\n"" + 
                ""    when\n"" + 
                ""        helloProfile : MyBean( firstName == null , lastName == null )\n"" + 
                ""    then\n"" + 
                ""        System.out.println(helloProfile);"" + 
                ""end"";
        

            KieServices ks = KieServices.Factory.get();
            
            KieFileSystem kfs = ks.newKieFileSystem();
            ReleaseId id = ks.newReleaseId( ""org.test"", ""myTest"", ""1.0.0"" );

            KieBuilder kieBuilder = ks.newKieBuilder( kfs );

            kfs.generateAndWritePomXML( id );

            kfs.write(""src/main/java/org/test/MyBean.java"",
                      ks.getResources().newReaderResource(new StringReader(JAVA1)));

            kfs.write( ks.getResources()
                         .newReaderResource( new StringReader( DRL1 ) )
                         .setResourceType( ResourceType.DRL )
                         .setSourcePath( ""rules.drl"" ) );
            
            kfs.write( ks.getResources()
                    .newReaderResource( new StringReader( INIT_DRL ) )
                    .setResourceType( ResourceType.DRL )
                    .setSourcePath( ""INIT_DRL.drl"" ) );

            kieBuilder.buildAll();

            KieContainer kc = ks.newKieContainer( id );
            KieSession ksession = kc.newKieSession();
            
            int fired = ksession.fireAllRules();
            
            
            ReleaseId id2 = ks.newReleaseId( ""org.test"", ""myTest"", ""2.0.0"" );
            KieFileSystem kfs2 = ks.newKieFileSystem();

            KieBuilder kieBuilder2 = ks.newKieBuilder( kfs2 );

            kfs2.generateAndWritePomXML( id2 );

            kfs2.write(""src/main/java/org/test/MyBean.java"",
                      ks.getResources().newReaderResource(new StringReader(JAVA2)));

            kfs2.write( ks.getResources()
                         .newReaderResource( new StringReader( DRL2 ) )
                         .setResourceType( ResourceType.DRL )
                         .setSourcePath( ""rules.drl"" ) );
            
            kfs2.write( ks.getResources()
                    .newReaderResource( new StringReader( INIT_DRL ) )
                    .setResourceType( ResourceType.DRL )
                    .setSourcePath( ""INIT_DRL.drl"" ) );

            kieBuilder2.buildAll();

            
            
            
            
            kc.updateToVersion(id2);
            
            
            ksession.fireAllRules();
    }
{code}
",Major,Mario Fusco,,2017-01-11T07:47:23.000-0500,Incremental Compilation class update fails MVELAnalysis,Resolved,bug,Bug
2017-01-12T10:14:33.000-0500,DROOLS-1403,Done,Serialization of a large knowledge base may cause a StackOverflowError,Major,Mario Fusco,,2017-01-12T09:21:09.000-0500,Serialization of a large knowledge base may cause a StackOverflowError,Resolved,bug,Bug
2017-01-13T10:22:56.000-0500,DROOLS-1406,Done,"Incremental compilation during fireUntilHalt succeeds only first time, but hangs forever on second attempt  ",Major,Mario Fusco,,2017-01-13T06:48:16.000-0500,Incremental compilation during fireUntilHalt hangs on second attempt  ,Resolved,bug,Bug
2017-03-01T08:56:48.000-0500,DROOLS-1453,Done,"Property Reactivity ALWAYS is making {{org.drools.compiler.integrationtests.BackwardChainingTest}} fail with the following problems:

{code:java}
org.drools.compiler.integrationtests.BackwardChainingTest
testNaniSearchs(org.drools.compiler.integrationtests.BackwardChainingTest)
java.lang.IndexOutOfBoundsException: Index: 1, Size: 1
	at java.util.ArrayList.rangeCheck(ArrayList.java:653)
	at java.util.ArrayList.get(ArrayList.java:429)
	at org.drools.compiler.integrationtests.BackwardChainingTest.testNaniSearchs(BackwardChainingTest.java:1394)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)

testOpenBackwardChain(org.drools.compiler.integrationtests.BackwardChainingTest)
java.util.NoSuchElementException
	at java.util.LinkedList.removeFirst(LinkedList.java:270)
	at org.drools.core.reteoo.QueryElementNode$UnificationNodeViewChangedEventListener.createQueryResultHandle(QueryElementNode.java:404)
	at org.drools.core.reteoo.QueryElementNode$UnificationNodeViewChangedEventListener.rowAdded(QueryElementNode.java:311)
	at org.drools.core.phreak.PhreakQueryTerminalNode.doLeftInserts(PhreakQueryTerminalNode.java:82)
	at org.drools.core.phreak.PhreakQueryTerminalNode.doNode(PhreakQueryTerminalNode.java:54)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:318)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalStackEntry(RuleNetworkEvaluator.java:231)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:174)
	at org.drools.core.phreak.RuleNetworkEvaluator.evaluateNetwork(RuleNetworkEvaluator.java:127)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:213)
	at org.drools.core.phreak.RuleExecutor.reEvaluateNetwork(RuleExecutor.java:207)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller$PBActivationsFilter.fireRNEAs(ProtobufInputMarshaller.java:831)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:256)
	at org.drools.core.marshalling.impl.ProtobufInputMarshaller.readSession(ProtobufInputMarshaller.java:161)
	at org.drools.core.marshalling.impl.ProtobufMarshaller.unmarshall(ProtobufMarshaller.java:113)
	at org.drools.compiler.integrationtests.SerializationHelper.getSerialisedStatefulKnowledgeSession(SerializationHelper.java:95)
	at org.drools.compiler.integrationtests.SerializationHelper.getSerialisedStatefulKnowledgeSession(SerializationHelper.java:61)
	at org.drools.compiler.integrationtests.SerializationHelper.getSerialisedStatefulKnowledgeSession(SerializationHelper.java:52)
	at org.drools.compiler.integrationtests.BackwardChainingTest.testOpenBackwardChain(BackwardChainingTest.java:2108)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)


{code}
",Major,Mario Fusco,,2017-02-28T08:05:25.000-0500,Property Reactivity ALWAYS failing BackwardChainingTest,Resolved,bug,Bug
2017-03-01T08:38:29.000-0500,DROOLS-1455,Done,"Trying to run the attached example, a ClasCastException error is logged. dayTimeDuration works fine.

A Period object is put in the context, created using 
BuiltInType feelType = (BuiltInType) BuiltInType.determineTypeFromName(type);",Major,Edson Tirelli,,2017-02-28T10:09:58.000-0500,ClassCastException when using yearMonthDuration in decision table,Resolved,bug,Bug
2017-03-01T08:40:39.000-0500,DROOLS-1458,Done,"When a DMN model contains a BKM node that depends on another BKM node, the compiler raises an error like:

`Error compiling FEEL expression 'monthlyPayment(loanAmt,rate,360)' for name 'paymentAmt' on node 'FinancialMetrics': Unknown variable 'monthlyPayment'`",Major,Edson Tirelli,,2017-02-28T22:22:48.000-0500,Compilation error when compiling DMN model with a BKM node that depends on another BKM node,Resolved,bug,Bug
2016-12-04T08:10:08.000-0500,DROOLS-1375,Done,The given method throws exception if the count of inserted columns differs from count of template variables. The problem is that the exception contains incorrect count of expected columns.,Minor,Jozef Marko,,2016-12-02T08:28:39.000-0500,TemplateModel.addRow() throws IlegalArgumentException with incorrect count,Resolved,bug,Bug
2017-04-24T12:07:50.000-0400,DROOLS-1530,Done,"Jiri,
Once you've got a reproducer and Mario has it, can you reassign this issue to Mario?

Fix needs to be backported because regression was also backported.",Blocker,Mario Fusco,,2017-04-18T05:58:20.000-0400,Regression due to accumulate reverse() fix,Resolved,bug,Bug
2017-04-18T08:41:59.000-0400,DROOLS-1532,Done,"The introduction of the parallel engine has caused a regression in the incremental compilation as evidenced by the org.drools.compiler.integrationtests.incrementalcompilation.AddRemoveRulesTest.testOr2 turtle test

{code}
java.lang.AssertionError: Expected results are different than actual after operations:
1. CREATE_SESSION: [ package com.rules;
 global java.util.List list
 rule R1 
 when 
   Integer()
 then
   list.add('R1'); 
 end,  package com.rules;
 global java.util.List list
 rule R2 
 when 
   $k: Integer()
   ( Integer(this != 1) or Integer(this == 1) )
 then
   list.add('R2'); 
 end]
2. INSERT_FACTS: [1]
3. FIRE_RULES
4. CHECK_RESULTS: [R1, R2]
5. REMOVE_RULES: [R2]
6. FIRE_RULES
7. CHECK_RESULTS: []
8. REMOVE_RULES: [R1]
9. FIRE_RULES
10. CHECK_RESULTS: []
11. ADD_RULES: [ package com.rules;
 global java.util.List list
 rule R2 
 when 
   $k: Integer()
   ( Integer(this != 1) or Integer(this == 1) )
 then
   list.add('R2'); 
 end]
12. FIRE_RULES
Expected results: 
[R2 ]
Actual results: 
[]

	at org.junit.Assert.fail(Assert.java:88)
	at org.drools.compiler.integrationtests.incrementalcompilation.TestContext.checkResults(TestContext.java:210)
	at org.drools.compiler.integrationtests.incrementalcompilation.TestContext.executeTestOperation(TestContext.java:108)
	at org.drools.compiler.integrationtests.incrementalcompilation.TestContext.executeTestOperations(TestContext.java:72)
	at org.drools.compiler.integrationtests.incrementalcompilation.AbstractAddRemoveRulesTest.runAddRemoveTest(AbstractAddRemoveRulesTest.java:110)
	at org.drools.compiler.integrationtests.incrementalcompilation.AddRemoveRulesTest.testOr2(AddRemoveRulesTest.java:2332)
{code}",Major,Mario Fusco,,2017-04-18T07:00:22.000-0400,Regression in incremental compilation,Resolved,bug,Bug
2017-04-13T12:47:45.000-0400,DROOLS-1524,Done,"Events which are inserted into the engine but not referenced in any rule are not expired.

The event is created as Java class with Role and Expires annotations. The behavior is the same with versions 6.5 and 7.0.0-SNAPSHOT. If I insert an object with event annotations I expected the engine to manage its lifetime.

",Major,Mario Fusco,,2017-04-13T09:43:34.000-0400,Events are not expired if not used in any rule,Resolved,bug,Bug
2017-04-13T08:37:29.000-0400,DROOLS-1523,Done,None,Major,Mario Fusco,,2017-04-13T07:46:22.000-0400,Expired events don't allow a rule belonging to an inactive group to fire even when the group regain focus,Resolved,bug,Bug
2016-11-15T11:57:35.000-0500,DROOLS-1357,Done,"On kie server container can be auto updated by scanner. When is scanner started and new version of container is deployed in maven repository, then in kie server should be old version replaced by new one.",Major,Petr Široký,,2016-11-11T11:02:27.000-0500,Container resolved release id version is not changed after auto updated by scanner,Resolved,bug,Bug
2016-11-15T11:01:25.000-0500,DROOLS-1360,Done,"Updating a fact evaluated inside a shared subnetwork may cause an infinite loop as demonstrated by the following unit test:

{code}
    @Test(timeout = 10000L)
    public void testUpdateOnSharedSubnetwork() {
        String drl =
                ""import "" + AtomicInteger.class.getCanonicalName() + "";\n"" +
                ""global java.util.List list;\n"" +
                ""rule R1y when\n"" +
                ""    AtomicInteger() \n"" +
                ""    Number() from accumulate ( AtomicInteger( ) and $s : String( ) ; count($s) )"" +
                ""    eval(false)\n"" +
                ""then\n"" +
                ""end\n"" +
                ""\n"" +
                ""rule R2 when\n"" +
                ""    $i : AtomicInteger( get() < 3 )\n"" +
                ""then\n"" +
                ""    $i.incrementAndGet();"" +
                ""    insert(\""test\"" + $i.get());"" +
                ""    update($i);"" +
                ""end\n"" +
                ""\n"" +
                ""rule R1x when\n"" +
                ""    AtomicInteger() \n"" +
                ""    $c : Number() from accumulate ( AtomicInteger( ) and $s : String( ) ; count($s) )\n"" +
                ""    eval(true)\n"" +
                ""then\n"" +
                ""    list.add($c);"" +
                ""end\n"";

        KieSession kieSession = new KieHelper().addContent( drl, ResourceType.DRL )
                                               .build().newKieSession();

        List<Number> list = new ArrayList<Number>();
        kieSession.setGlobal( ""list"", list );

        kieSession.insert( new AtomicInteger( 0 ) );
        kieSession.insert( ""test"" );

        kieSession.fireAllRules();

        assertEquals(1, list.size());
        assertEquals(4, list.get(0).intValue());
    }
{code}",Critical,Mario Fusco,,2016-11-15T10:14:35.000-0500,Infinite loop when updating a fact inside a shared subnetwork,Resolved,bug,Bug
2017-05-07T09:38:47.000-0400,DROOLS-1545,Done,"This ticket includes two fixes:

1. For the {{date and time( from )}} , where {{from}} is a string, the time part of the string should be optional. E.g.:

{code}
date and time( ""2017-05-06"" ) = date and time( ""2017-05-06T00:00"" )
{code}

2. Extend date arithmetics to support subtracting two dates. The result should be the number of days between dates, ignoring daylight shifts and timezones. E.g.:

{code}
date( ""2017-05-05"" ) - date( ""2017-05-01"" ) = duration( ""P4D"" )
{code}",Major,Edson Tirelli,,2017-05-06T11:13:46.000-0400,Fix date and time functions and arithmetic,Resolved,bug,Bug
2017-05-09T12:45:56.000-0400,DROOLS-1548,Done,"The attached model is not completely working. This is likely to the fact that the filter selection operator is not working. E.g.:

{code}
max( NBA Pacific.wins )
{code}

Should return the team with the most wins in the {{NBA Pacific}} list of teams.",Major,Matteo Mortari,,2017-05-06T12:00:15.000-0400,Fix bug with filter selection operator,Resolved,bug,Bug
2016-11-02T12:29:40.000-0400,DROOLS-1351,Done,None,Major,Matteo Mortari,,2016-11-02T05:31:40.000-0400,Calling KieRepository.getKieModule() for a GAV of a non KJar throws Exception instead of returning null as per API contract.,Resolved,bug,Bug
2016-11-02T07:27:10.000-0400,DROOLS-1349,Done,"Using {{no-loop}} with eager evaluation does not work as expected. The {{no-loop}} rule keeps firing in endless loop.

This test case in jBPM reproduces the issue https://github.com/droolsjbpm/jbpm/blob/6.5.x/jbpm-bpmn2/src/test/java/org/jbpm/bpmn2/ActivityTest.java#L1294 (testBusinessRuleTaskDynamic).",Major,Mario Fusco,,2016-10-28T10:18:13.000-0400,Eager evaluation with no-loop causes endless loop,Resolved,bug,Bug
2017-05-22T09:40:25.000-0400,DROOLS-1563,Done,"When running the attached file which has one input that is a collection of a complex structure, the constraints on the field is always said to be invalid.",Major,Matteo Mortari,,2017-05-15T14:24:52.000-0400,Values are always said to be invalid even when the respect the enumeration,Resolved,bug,Bug
2016-10-25T11:36:18.000-0400,DROOLS-1340,Done,"Sometimes, when using query with 2 entry points along with fireUntilHalt, the method getQueryResults fails with IndexOutOfBoundsException. See stacktrace here [1]. This was observed first in Jenkins environment running existing test QueryCepFireUntilHaltTest.withResultTest from drools repository. I managed to reproduce it locally looping the test with this code [2]. 

[1] http://pastebin.com/BBPsGty9
[2] http://pastebin.com/47y1dh1W",Major,Mario Fusco,,2016-10-20T04:02:24.000-0400,IndexOutOfBoundsException when using query with 2 entry points,Resolved,bug,Bug
2016-10-25T11:13:16.000-0400,DROOLS-1338,Done,"In customer's performance test case, NPE happens in TupleSetsImpl.setNextTuple() with the following stack.

java.lang.NullPointerException
	at org.drools.core.common.TupleSetsImpl.setNextTuple(TupleSetsImpl.java:352)
	at org.drools.core.common.TupleSetsImpl.removeInsert(TupleSetsImpl.java:168)
	at org.drools.core.phreak.RuleNetworkEvaluator.deleteChildLeftTuple(RuleNetworkEvaluator.java:729)
	at org.drools.core.phreak.RuleNetworkEvaluator.unlinkAndDeleteChildLeftTuple(RuleNetworkEvaluator.java:721)
	at org.drools.core.phreak.PhreakNotNode.doRightUpdates(PhreakNotNode.java:343)
	at org.drools.core.phreak.PhreakNotNode.doNode(PhreakNotNode.java:74)
	at org.drools.core.phreak.RuleNetworkEvaluator.switchOnDoBetaNode(RuleNetworkEvaluator.java:524)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalBetaNode(RuleNetworkEvaluator.java:505)
	at org.drools.core.phreak.RuleNetworkEvaluator.evalNode(RuleNetworkEvaluator.java:341)
	at org.drools.core.phreak.RuleNetworkEvaluator.innerEval(RuleNetworkEvaluator.java:301)
	at org.drools.core.phreak.RuleNetworkEvaluator.outerEval(RuleNetworkEvaluator.java:136)
	at org.drools.core.phreak.AddRemoveRule.forceFlushLeftTuple(AddRemoveRule.java:692)
	at org.drools.core.phreak.AddRemoveRule.flushLeftTupleIfNecessary(AddRemoveRule.java:629)
	at org.drools.core.reteoo.NotNode.assertObject(NotNode.java:161)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:134)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.doPropagateAssertObject(CompositeObjectSinkAdapter.java:494)
	at org.drools.core.reteoo.CompositeObjectSinkAdapter.propagateAssertObject(CompositeObjectSinkAdapter.java:384)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:304)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:132)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:82)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:72)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.flushPropagations(StatefulKnowledgeSessionImpl.java:2053)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:128)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:74)
	at org.drools.core.common.DefaultAgenda.fireNextItem(DefaultAgenda.java:960)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1303)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1241)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1336)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1327)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1308)",Critical,Mario Fusco,,2016-10-20T03:23:57.000-0400,NPE happens in TupleSetsImpl.setNextTuple(),Resolved,bug,Bug
2017-04-11T13:00:40.000-0400,DROOLS-1517,Done,"{code}
java.lang.RuntimeException: java.lang.NullPointerException at org.drools.core.rule.SingleAccumulate.reverse(SingleAccumulate.java:124)
 ... 
Caused by: java.lang.NullPointerException at org.drools.core.base.accumulators.SumAccumulateFunction.reverse(SumAccumulateFunction.java:85)
 at org.drools.core.base.accumulators.JavaAccumulatorFunctionExecutor.reverse(JavaAccumulatorFunctionExecutor.java:132)
 at org.drools.core.rule.SingleAccumulate.reverse(SingleAccumulate.java:116)
{code}",Major,Mario Fusco,,2017-04-07T06:22:25.000-0400,NPE in Accumlate reverse(),Resolved,bug,Bug
2016-10-28T07:51:28.000-0400,DROOLS-1346,Done,"Steps to reproduce:

1. In a first rule pattern match on an event over window:time
2. In the consequence of the rule change the value of a field of that event
3. Have a second rule that shouldn't match the value of the field changed by the former rule
4. This second rule fires even if it shouldn't
",Major,Mario Fusco,,2016-10-27T13:09:47.000-0400,Unwanted firing modifying an event over a window:time,Resolved,bug,Bug
2017-02-17T05:11:33.000-0500,DROOLS-1442,Done,"This code

{code:java}
        SystemEventListener listener =  SystemEventListenerFactory.getSystemEventListener();
{code}

Fails with:

Caused by: java.lang.ClassNotFoundException: org.drools.core.impl.SystemEventListenerServiceImpl

Because ServiceRegistryImpl 
https://github.com/droolsjbpm/droolsjbpm-knowledge/blob/master/kie-internal/src/main/java/org/kie/internal/utils/ServiceRegistryImpl.java#L189
references class SystemEventListenerServiceImpl which does not exist anymore in drools-core.

The interface SystemEventListenerService still exists in kie-internal but there is no implementation whatsoever in drools.

First impression is that both SystemEventListenerService + SystemEventListenerServiceImpl are ""dead"" code and should probably be removed.


",Major,Mario Fusco,,2017-02-15T05:15:04.000-0500,ServiceRegistry references non existent classes,Resolved,bug,Bug
2017-03-28T13:42:42.000-0400,DROOLS-1501,Done,"Modifying an object matched in a polymorphic way and using a window like in this test case:

{code}
    @Test
    public void testModifySubclassOverWindow() {
        // DROOLS-
        String drl = ""declare Number @role( event ) end\n"" +
                     ""declare Integer @role( event ) end\n"" +
                     ""\n"" +
                     ""rule R1 no-loop when\n"" +
                     ""    $i: Integer()\n"" +
                     ""then\n"" +
                     ""    update($i);\n"" +
                     ""end\n"" +
                     ""rule R2 when\n"" +
                     ""    $n: Number() over window:length(1)\n"" +
                     ""then\n"" +
                     ""end"";

        KieSession ksession = new KieHelper().addContent( drl, ResourceType.DRL )
                                             .build( EventProcessingOption.STREAM )
                                             .newKieSession();
        ksession.insert(1);
        ksession.fireAllRules();
    }
{code}

causes a CCE like the following: 

{code}
java.lang.ClassCastException: org.drools.core.reteoo.WindowNode cannot be cast to org.drools.core.reteoo.BetaNode

	at org.drools.core.reteoo.EntryPointNode.removeRightTuplesMatchingOTN(EntryPointNode.java:263)
	at org.drools.core.reteoo.EntryPointNode.propagateModify(EntryPointNode.java:253)
	at org.drools.core.reteoo.EntryPointNode.propagateModify(EntryPointNode.java:245)
	at org.drools.core.phreak.PropagationEntry$Update.execute(PropagationEntry.java:217)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:83)
	at org.drools.core.common.DefaultAgenda.flushPropagations(DefaultAgenda.java:1275)
	at org.drools.core.phreak.RuleExecutor.fire(RuleExecutor.java:143)
	at org.drools.core.phreak.RuleExecutor.evaluateNetworkAndFire(RuleExecutor.java:89)
	at org.drools.core.concurrent.AbstractRuleEvaluator.internalEvaluateAndFire(AbstractRuleEvaluator.java:37)
	at org.drools.core.concurrent.SequentialRuleEvaluator.evaluateAndFire(SequentialRuleEvaluator.java:43)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1074)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1021)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1013)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1315)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1306)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1290)
	at org.drools.compiler.integrationtests.PolymorphismTest.testModifySubclassOverWindow(PolymorphismTest.java:50)
{code}",Major,Mario Fusco,,2017-03-28T11:17:13.000-0400,CCE modifying a polymorphic object over a window,Resolved,bug,Bug
2017-03-27T08:01:53.000-0400,DROOLS-1496,Done,"Parallel agenda freezes when running in multiple KieSessions. Reproducer is in ""testMultipleParallelKieSessionsFireUntilHalt"" test from https://github.com/kiegroup/drools/pull/1164/commits/b3d8edee350b4e05101f9ebb1ee96443a449d78f

Reproducer does the following steps:
# Create kie base.
# Run 5 separate threads.
# Each thread creates its own kie session with parallel agenda enabled.
# Run fire until halt on its own kie session.
",Major,Mario Fusco,,2017-03-24T10:53:06.000-0400,Parallel agenda freezes when running fireUntilHalt on multiple KieSessions,Resolved,bug,Bug
2017-03-22T10:05:03.000-0400,DROOLS-1491,Done,None,Major,Mario Fusco,,2017-03-22T06:12:32.000-0400,It is not possible for a type declaration to extend a Java class,Resolved,bug,Bug
2017-03-20T08:11:08.000-0400,DROOLS-1486,Done,"Sometime the web editors replace regular whitespaces by the non-breakable white space character \u00A0 and that breaks the FEEL lexer.

Add this character to the list of whitespaces characters in the lexer.",Major,Edson Tirelli,,2017-03-19T20:52:27.000-0400,Add non-breakable space \u00A0 to the list of white spaces in FEEL lexer,Resolved,bug,Bug
2017-03-02T14:42:56.000-0500,DROOLS-1459,Done,"But it is a valid character in name, it is added by rule 30 of FEEL grammar. ",Major,Edson Tirelli,,2017-03-01T14:24:55.000-0500,Question mark (?) triggers invalid name error in execution and validation,Resolved,bug,Bug
2017-03-03T14:08:51.000-0500,DROOLS-1462,Done,The engine is not properly creating the unary test ```not( null )``` and raising a NPE.,Major,Edson Tirelli,,2017-03-03T13:41:54.000-0500,not( null ) unary test not working,Resolved,bug,Bug
2017-05-25T11:40:14.000-0400,DROOLS-1581,Done,None,Major,Mario Fusco,,2017-05-25T09:55:24.000-0400,Performance degradation while compiling eval predicates,Resolved,bug,Bug
2017-02-13T06:46:00.000-0500,DROOLS-1433,Done,"In the following example:

{code:xml}
  <decision id=""d_BureauCallType"" name=""BureauCallType"">
    <variable name=""BureauCallType"" typeRef=""tns:tBureauCallType""/>
    <informationRequirement>
      <requiredDecision href=""#d_Pre-bureauRiskCategory""/>
    </informationRequirement>
    <knowledgeRequirement>
      <requiredKnowledge href=""#b_BureauCallTypeTable""/>
    </knowledgeRequirement>
    <invocation>
      <literalExpression>
        <text>BureauCallTypeTable</text>
      </literalExpression>
      <binding>
        <parameter id=""_65deeb90-626c-4cce-9485-eae9455b2194"" name=""Pre-bureauRiskCategory""/>
        <literalExpression>
          <text>Pre-bureauRiskCategory</text>
        </literalExpression>
      </binding>
    </invocation>
  </decision>
{code}

the {{invocation}} and {{literalExpression}} node are receiving a wrong validation message for ""This element indicates a 'typeRef' which is not in FEEL namespace and not defined with itemDefinition"", despite they don't provide any {{typeRef}} at all.",Major,Matteo Mortari,,2017-02-10T05:36:39.000-0500,DMN Model node with no typeRef affected by wrong validation message,Resolved,bug,Bug
2017-02-14T10:55:46.000-0500,DROOLS-1439,Done,"When entering test in decision table, we usually omit the “=” characters. If there is nothing, it is assumed to be an equal test. When executing with Redhat, this works fine except if I use variable to do the testing. In that case, I need to put the “=” sign for the execution do produce the proper result, otherwise when the value is equals I get null.
",Critical,Edson Tirelli,,2017-02-13T21:23:59.000-0500,DMN engine is eagerly evaluating variables in unary test lists,Resolved,bug,Bug
2017-02-13T15:18:33.000-0500,DROOLS-1435,Done,"When validating the attached file, the following exception is raised:

java.lang.RuntimeException: Error evaluating constraint 'id == rightOfHash( $oc.href )' in [Rule ""REQAUTH_NOT_KNOWLEDGESOURCE"" in rules.drl]

If I remove the Knowledge Sources, the validation runs fine.",Major,Matteo Mortari,,2017-02-10T14:39:59.000-0500,Runtime Exception while validating a file with Knowlge source,Resolved,bug,Bug
2017-01-02T10:55:24.000-0500,DROOLS-1390,Done,"Using KIE Scanner state with very small polling interval (e.g. 20ms) may lead to inconsistent scanner state (race condition). Using such a small interval is not recommended, but the scanner state needs to be consistent even is such cases.

 ",Minor,Petr Široký,,2017-01-02T08:04:27.000-0500,Inconsistent scanner state when using very small polling interval,Resolved,bug,Bug
2017-05-17T03:58:38.000-0400,DROOLS-1562,Done,"If user tries to create new KieModuleMetaData using KieModuleMetaData.Factory.newKieModuleMetaData() with not existing release id then NPE is thrown, see stacktrace in attachment.

This error can be simulated on Kie server. See PR with reproducer [1].


[1] https://github.com/kiegroup/droolsjbpm-integration/pull/950",Major,Mario Fusco,,2017-05-10T04:30:43.000-0400,NPE when creating KieModuleMetaData with wrong release id,Resolved,bug,Bug
2017-02-24T03:09:59.000-0500,DROOLS-1445,Done,"The following test exhibit a failing and a working test:

{code:java}
    @Test()
    public void testAbis_NotWorking() {
        // DROOLS-644
        String drl =
                ""import "" + Person.class.getCanonicalName() + "";\n"" +
                ""global java.util.List list;\n"" +
                ""rule R when\n"" +
                ""    $p1 : Person( name == \""Mario\"" ) \n"" +
                ""    $p2 : Person( age > $p1.age ) \n"" +
                ""then\n"" +
                ""    list.add(\""t0\"");\n"" +
                ""end\n"" +
                ""rule Z when\n"" +
                ""    $p1 : Person( name == \""Mario\"" ) \n"" +
                ""then\n"" +
                ""    modify($p1) { setAge(35); } \n"" +
                ""end\n"" 
                ;
        
        // making the default explicit:
        KieSession ksession = new KieHelper(PropertySpecificOption.ALWAYS).addContent(drl, ResourceType.DRL)
                .build()
                .newKieSession();
        ksession.addEventListener(new DebugAgendaEventListener());
        System.out.println(drl);
        ReteDumper.dumpRete(ksession);

        List<String> list = new ArrayList<String>();
        ksession.setGlobal(""list"", list);

        Person mario = new Person(""Mario"", 40);
        Person mark = new Person(""Mark"", 37);
        FactHandle fh_mario = ksession.insert(mario);
        ksession.insert(mark);
        int x = ksession.fireAllRules();
        assertEquals(1, list.size());
        assertEquals(""t0"", list.get(0));
    }
    
    @Test()
    public void testAbis_Working() {
        // DROOLS-644
        String drl =
                ""import "" + Person.class.getCanonicalName() + "";\n"" +
                ""global java.util.List list;\n"" +
                ""rule R when\n"" +
                ""    $p1 : Person( name == \""Mario\"", $a1: age) \n"" +
                ""    $p2 : Person( age > $a1 ) \n"" +
                ""then\n"" +
                ""    list.add(\""t0\"");\n"" +
                ""end\n"" +
                ""rule Z when\n"" +
                ""    $p1 : Person( name == \""Mario\"" ) \n"" +
                ""then\n"" +
                ""    modify($p1) { setAge(35); } \n"" +
                ""end\n"" 
                ;

        // making the default explicit:
        KieSession ksession = new KieHelper(PropertySpecificOption.ALWAYS).addContent(drl, ResourceType.DRL)
                .build()
                .newKieSession();
        
        System.out.println(drl);
        ReteDumper.dumpRete(ksession);

        List<String> list = new ArrayList<String>();
        ksession.setGlobal(""list"", list);

        Person mario = new Person(""Mario"", 40);
        Person mark = new Person(""Mark"", 37);
        FactHandle fh_mario = ksession.insert(mario);
        ksession.insert(mark);
        int x = ksession.fireAllRules();
        assertEquals(1, list.size());
        assertEquals(""t0"", list.get(0));
    }
{code}
",Major,Mario Fusco,,2017-02-20T03:24:15.000-0500,Mask should reflect properties accessed in other nodes join constraints,Resolved,bug,Bug
2017-02-24T16:58:03.000-0500,DROOLS-1447,Done,"When a variable has an empty name, the validation throws a runtime exeception as follow:

Caused by: java.lang.RuntimeException: Error evaluating constraint 'FEELParser.isVariableNameValid( name ) == false' in [Rule ""NAME_INVALID"" in rules.drl]
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:262)
	at org.drools.core.rule.constraint.MvelConstraint.isAllowed(MvelConstraint.java:215)
	at org.drools.core.reteoo.AlphaNode.assertObject(AlphaNode.java:131)
	at org.drools.core.reteoo.SingleObjectSinkAdapter.propagateAssertObject(SingleObjectSinkAdapter.java:70)
	at org.drools.core.reteoo.ObjectTypeNode.propagateAssert(ObjectTypeNode.java:316)
	at org.drools.core.phreak.PropagationEntry$Insert.propagate(PropagationEntry.java:152)
	at org.drools.core.phreak.PropagationEntry$Insert.execute(PropagationEntry.java:157)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:93)
	at org.drools.core.phreak.SynchronizedPropagationList.flush(SynchronizedPropagationList.java:88)
	at org.drools.core.common.DefaultAgenda.fireLoop(DefaultAgenda.java:1055)
	at org.drools.core.common.DefaultAgenda.internalFireAllRules(DefaultAgenda.java:1018)
	at org.drools.core.common.DefaultAgenda.fireAllRules(DefaultAgenda.java:1010)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.internalFireAllRules(StatefulKnowledgeSessionImpl.java:1292)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1283)
	at org.drools.core.impl.StatefulKnowledgeSessionImpl.fireAllRules(StatefulKnowledgeSessionImpl.java:1267)
	at org.drools.core.impl.StatelessKnowledgeSessionImpl.execute(StatelessKnowledgeSessionImpl.java:282)
	at org.kie.dmn.validation.DMNValidatorImpl.validateModel(DMNValidatorImpl.java:145)
	at com.trisotech.dmn.redhat.transformation.DMN1ValidationTransformation.internalTransform(DMN1ValidationTransformation.java:64)
	at com.trisotech.transformation.engine.transformation.AbstractTransformation.transform(AbstractTransformation.java:86)
	... 42 more
Caused by: java.lang.NullPointerException
	at org.kie.dmn.feel.parser.feel11.ParserHelper.getOriginalText(ParserHelper.java:150)
	at org.kie.dmn.feel.parser.feel11.ParserHelper.defineVariable(ParserHelper.java:125)
	at org.kie.dmn.feel.parser.feel11.FEEL_1_1Parser.nameDefinition(FEEL_1_1Parser.java:1459)
	at org.kie.dmn.feel.parser.feel11.FEELParser.isVariableNameValid(FEELParser.java:59)
	at ConditionEvaluator59c2efa132a0438abcc40f9d4d01d964.evaluate(Unknown Source)
	at org.drools.core.rule.constraint.MvelConstraint.evaluate(MvelConstraint.java:260)
	... 60 more",Major,Matteo Mortari,,2017-02-20T17:25:28.000-0500,Runtime exception when validating a file with empy name,Resolved,bug,Bug
2017-05-08T19:29:45.000-0400,DROOLS-1557,Done,"As reported:

{quote}In “Union of Interests”, even if you put something that is not in the allowed values for Person.Interests, you will get no error.
 
In “Union of letters”, even when valid values are entered you get “Error while evaluating node 'D1' for dependency 'A1': the dependency value '[a, b]' is not allowed by the declared type”{quote}",Major,Matteo Mortari,,2017-05-08T11:01:49.000-0400,InputData dependency check does not enforce allowed values for DMN composite type,Resolved,bug,Bug
2017-05-09T09:18:20.000-0400,DROOLS-1559,Done,"Manifested symptom was a random failure of the following on Jenkins CI:

{code:java}
Test Result (1 failure / +1)
org.drools.compiler.integrationtests.MultithreadTest.testConcurrentFireAndDispose
{code}
",Major,Mario Fusco,,2017-05-09T08:55:38.000-0400,A dispose during a concurrent fireAllRules can make the agenda to hang indefinitively,Resolved,bug,Bug
2017-01-19T13:01:00.000-0500,DROOLS-1416,Done,"While trying to use conditionalbranch api for handling multiple if-then blocks, the DRL dumper is not printing the content we have used for conditionalbranch. Please find the sample code below and the restuls

*+Code+*

PackageDescr pkg = DescrFactory.newPackage() 
                      .name( ""org.drools.compiler"" ) 
                      .newRule().name( ""test"" ) 
                          .lhs() 
                              .pattern(""Cheese"").constraint( ""type == \""stilton\"""" ).end() 
                              .conditionalBranch() 
                                  .condition().constraint(""price < 10"").end() 
                                  .consequence().name(""c1"").end() 
                              .end() 
                              .pattern(""Cheese"").constraint( ""type == \""cheddar\"""" ).end() 
                              .conditionalBranch() 
                           .condition().constraint(""price > 10"").end() 
                           .consequence().name(""c2"").end() 
                       .end()                            
                          .end() 
                          .rhs( ""// do something"" ) 
                          .namedRhs( ""c1"", ""// do something else\n"" ) 
                      .end() 
                      .getDescr();              
              
              return new DrlDumper().dump( pkg );

*+Output+*

package org.drools.compiler 

rule ""test""
when
    Cheese( type == ""stilton"" )  
     
    Cheese( type == ""cheddar"" )  
     
then
// do something
then[c1]
// do something else
end 

In the above example the content ""price < 10"" and ""price > 10"" which we have used for conditionalBranch is not getting printed. On further investigation we found the drl.mvel template does not have the import org.drools.compiler.lang.descr.ConditionalBranchDescr. ",Major,Mario Fusco,,2017-01-19T11:10:05.000-0500,DRL Dumper Not Printing the content of ConditionalBranch,Resolved,bug,Bug
2017-01-19T11:51:22.000-0500,DROOLS-1411,Done,Misc OOPath constraint bugs emerged during dogfooding using in DMN Validation rules,Major,Mario Fusco,,2017-01-19T03:21:39.000-0500,OOPath constraint bugs emerged during dogfooding,Resolved,bug,Bug
2017-02-02T06:27:10.000-0500,DROOLS-1425,Done,"The {{QueryCepFireUntilHaltTest}} recently started to hang the build quite often. It does use specific timeout, but either the timeout it too high (so the build timeouts anyway) or jUnit is not able to kill the test after the timeout passes. Based on the threaddump taken during the build, there seems to be a deadlock between two threads (see the attachment).

",Major,Mario Fusco,,2017-02-02T04:38:18.000-0500,QueryCepFireUntilHaltTest often hangs during execution,Resolved,bug,Bug
2017-02-02T09:16:37.000-0500,DROOLS-1418,Done,"User has possibility to bind a List stored as item of a Map in his rule. However this dosn't work in one special case. For more details see the steps to reproduce.

This issue was discussed with [~tari_manga] and he also provided the workaround used in reproducer. Thanks.",Major,Mario Fusco,,2017-01-26T10:26:47.000-0500,Binding of List stored in Map doesn't work in special case,Resolved,bug,Bug
2017-02-02T11:48:53.000-0500,DROOLS-1420,Done,"This fails with *$p cannot be resolved to a variable*:
{code}
rule R when
  Cheese($p : price)
then
  int b = (int) ($p * 1_000.0); // FAILS, because $p cannot be resolved ?!
end
{code}

That error message is nonsense. It should just work. If it doesn't due to ECJ, it should say something like ""cannot be cast"".

This works in java:
{code}
        int a = 42;
        int b = ((int) (a * 1_000.0));
{code}

Removing the underscore fixes it:

{code}
rule R when
  Cheese($p : price)
then
  int b = (int) ($p * 1000.0); // SUCCESS
end
{code}

Regardless of an upstream ECJ problem (which should be reported if that's indeed the problem), the error message is wrong and send me on a wild goose hunt.
",Major,Mario Fusco,,2017-01-27T10:30:12.000-0500,(int) ($p * 1_000.0) throws a misleading exception,Resolved,bug,Bug
2017-03-31T03:00:50.000-0400,DROOLS-1503,Done,"When validating or executing a DMN file that has something invalid in the allowedValues of an ItemDefinition, the compilation fails with no explanation. If you take the same expression and put it in the input/output values of a decision table, a message tells that this particular expression failed. 

The attached example has [True,False] as the allowed value of the item definition, which is invalid and prevents model compilation.",Major,Matteo Mortari,,2017-03-30T14:41:57.000-0400,Errors when parsing item definition allowed values are not reported,Resolved,bug,Bug
2017-04-20T08:03:42.000-0400,DROOLS-1533,Done,None,Major,Mario Fusco,,2017-04-20T06:36:06.000-0400,A RuleUnit is not executed properly when all its DataSources aren't explicitly bound to the executor,Resolved,bug,Bug
2017-05-15T04:47:47.000-0400,DROOLS-1560,Done,None,Major,Mario Fusco,,2017-05-09T12:36:21.000-0400,Simplify and improve performances of ChainedProperties discovery,Resolved,bug,Bug
2017-05-22T13:37:43.000-0400,DROOLS-1571,Done,"I have some rules files under {{src/main/resources}} that are picked up fine with Drools v5.6.0. However, Drools v6.5.0 does not pick up the rules files when tests are being run. Turning on {{DEBUG}} logging shows that Drools v6.5.0 looks for rules files only under {{target/test-classes}} folder (instead of looking for them under {{target/classes}} as well).

A sample project is available [on Github|https://github.com/manish-in-java/spring-drools-validation].",Minor,Mario Fusco,,2017-05-22T04:55:49.000-0400,Tests not picking rules files from src/main/resources after upgrading to 6.5.0,Resolved,bug,Bug
2017-04-28T06:56:22.000-0400,DROOLS-1539,Done,None,Major,Mario Fusco,,2017-04-28T05:56:03.000-0400,Multipart and nested oopath don't work with ruleunit pattern,Resolved,bug,Bug
2017-04-15T09:08:03.000-0400,DROOLS-1528,Done,"The following expression fails to compile, although succeeds in runtime:

Person List[ My Variable 1 = ""A"" ]
",Major,Matteo Mortari,,2017-04-15T09:05:56.000-0400,Filters fail to compile when the list item contains attributes with spaces in the name,Resolved,bug,Bug
2017-03-20T12:56:21.000-0400,DROOLS-1489,Done,"Repeated calling fireAllRules causes firing rules repeatedely when using OOPath in combination with JPA persistence even when facts were not modified.
",Major,Mario Fusco,,2017-03-20T11:03:04.000-0400,Repeated fireAllRules() causes firing rules multiple times when using OOPath + JPA,Resolved,bug,Bug
