commit_hash,committed_date,file_path,message,author_email,author
f5bf9a9edf37b991d79e21ac4a90ca5858e93f1e,2016-06-25T17:09:26Z,['java/engine/org/apache/derby/iapi/services/monitor/DerbyObservable.java'],"DERBY-6891: Improve the synchronization behavior of DerbyObservable; commit derby-6891-01-ab-synchronizeMethods.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1750214 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
14248ac90504521fb5a89c737d23e1429311a529,2016-02-05T15:19:55Z,"['java/engine/org/apache/derby/iapi/services/io/FilePermissionService.java', 'java/engine/org/apache/derby/iapi/services/io/FilePermissionServiceImpl.java', 'java/engine/org/apache/derby/iapi/services/io/FileUtil.java']","DERBY-6865: RestrictiveFilePermissionsTest fails on Windows

Move the contents of FilePermissionServiceImpl into FileUtil. It was
originally separated out of FileUtil because it used functionality
only available on Java 7 and higher, so it had to be loaded via
reflection. Since Java 8 is the minimum level on trunk, it could be
used directly from FileUtil without reflection.

The reason for the test failure was that a recent change caused
FilePermissionServiceImpl to be excluded from derby.jar, so that its
services were not used, and the database files ended up with unexpected
permissions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1728681 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4afca48171ca7bbd7482ccec0fef2b0ab17bf44a,2016-08-04T01:29:02Z,['java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java'],"DERBY-853: ResultSetMetaData.getScale returns inconsistent values

This patch was contributed by Danoja Dias (danojadias at gmail dot com)

When a SQL statement contains arithmetic expressions, the result of the
expression may be of a different type than the operands to the expression,
due to type precedence rules which may require promoting the operand
values during evaluation of the expression.

For example, subtracting a DOUBLE from a DECIMAL results in a DOUBLE.

In some of these cases, Derby was reporting that the result column
had a non-zero scale, although the result column was not of DECIMAL type.

This change modifies the NumericTypeCompiler so that it only computes
a non-zero scale for the result column when it is of DECIMAL type.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1755133 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
ce40a31daf0c8c7c2d8a7059e5c0a6d01d3ed440,2016-05-09T00:58:22Z,"['java/build/org/apache/derbyBuild/ClassSizeCrawler.java', 'java/build/org/apache/derbyBuild/ODBCMetadataGenerator.java', 'java/build/org/apache/derbyBuild/classlister.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/demo/nserverdemo/NsSampleClientThread.java', 'java/demo/nserverdemo/SimpleNetworkClientSample.java', 'java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/engine/org/apache/derby/iapi/services/locks/ShExLockable.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerKey.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/RawTransaction.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialClob.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLInteger.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/SQLSmallint.java', 'java/engine/org/apache/derby/iapi/types/SQLTinyint.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedClob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EncryptedLOBFile.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/load/Export.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/LoadError.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/locks/Deadlock.java', 'java/engine/org/apache/derby/impl/services/locks/Timeout.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/stream/RollingFileStream.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCOLUMNSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCONGLOMERATESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSEQUENCESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceGenerator.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/execute/AutoincrementCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateSequenceConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteGeneratedColumnsResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealBasicNoPutResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteVTIResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealGroupedAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashLeftOuterJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashTableStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealInsertResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealInsertVTIResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealJoinResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealLastIndexKeyScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealMaterializedResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNestedLoopLeftOuterJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNoRowsResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealProjectRestrictStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealRowResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealScalarAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSetOpResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSortStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealTableScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUnionResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUpdateResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/xplain/XPLAINSystemTableVisitor.java', 'java/engine/org/apache/derby/impl/sql/execute/xplain/XPLAINUtil.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTree.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/OpenBTree.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IFactory.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericConglomerateController.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericScanController.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapConglomerateFactory.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeInserter.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeSort.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/CachedPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/PageBasicOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/RecordId.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/Scan.java', 'java/engine/org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.java', 'java/engine/org/apache/derby/impl/store/replication/slave/SlaveController.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/tools/org/apache/derby/impl/tools/ij/ijVectorResult.java', 'java/tools/org/apache/derby/impl/tools/ij/xaHelper.java', 'java/tools/org/apache/derby/impl/tools/optional/DBMDWrapper.java']","DERBY-6856: Fix more deprecation warnings when Derby is compiled with JDK 9 build 116; commit derby-6856-04-ab-autoboxingDeprecationWarnings-part2.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1742858 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
02597f233f3cb7fbceceeafe9ea81ff42999a5c8,2016-05-30T13:36:03Z,['java/engine/org/apache/derby/iapi/jdbc/ExceptionFactory.java'],"DERBY-6856: Clean up the last deprecation warning introduced by build 118 of JDK 9: commit derby-6856-07-aa-oneMoreNewInstance.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1746132 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
cd362863b4e93014c1302b60b6fb831657095941,2016-05-21T21:23:30Z,['java/engine/org/apache/derby/impl/services/bytecode/d_BCValidate.java'],"DERBY-6854: Make it possible to run Derby tests on early access
versions of JDK 9

JDK 9 will move the JDBC classes out of the boot class loader and into
the platform class loader (see JDK-8154189 in the OpenJDK bug
tracker).

Derby has some test and debug code that assumes that the JDBC classes
live in the boot class loader.

1) Some tests create a new class loader in order to make the test load
the Derby classes afresh (SysinfoLocaleTest), or to test against a
different version of Derby (the upgrade tests). To achieve this, they
create a URLClassLoader which contains the Derby jar files they want
to test against, and set the parent of the URLClassLoader to null,
which means that the boot class loader is the parent.

Now that the JDBC classes are not on the boot class loader, this
URLClassLoader is not able to find the JDBC classes, and the tests
fail with NoClassDefFoundErrors when trying to load them.

This is fixed by setting the parent of the created URLClassLoader to
what java.sql.Connection.class.getClassLoader() returns. On JDK 8 and
earlier it returns null, so nothing changes there. On JDK 9 it returns
the platform class loader, which is capable of loading the JDBC
classes.

2) The org.apache.derby.impl.services.bytecode.d_BCValidate class
contains some debug code (only included in the sane jars) which runs
some sanity checks on the generated byte code. To do this, it accesses
the class loader of all the classes in the method signatures.

When getClassLoader() is called on JDBC classes, a RuntimePermission
is needed now. This was not the case before when the JDBC classes were
in the boot class loader, since Class.getClassLoader() does not check
for permissions if the class loader is null. Now this causes an
AccessControlException in tests that run with a security manager. The
tests actually grant the required permission to derby.jar, but the
call is not wrapped in AccessController.doPrivileged(), so it fails
because the permission is not granted to the test code.

The fix is to wrap the call to getClassLoader() in a doPrivileged()
block. Additionally, because RuntimePermission(""getClassLoader"") is
not a mandatory permission for derby.jar, we need to check if it
raises a security exception. d_BCValidate only needs the class loader
in order to check if it is the same class loader as d_BCValidate's own
class loader. Since Class.getClassLoader() does not require any
permissions if the class has the same class loader as the calling
class, we can conclude that the class loaders are different if a
security exception is raised.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1744989 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
dbed020d3949dd7707a6eca23741aa5ba155ece1,2016-07-17T17:11:36Z,"['java/client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/FailedProperties40.java', 'java/client/org/apache/derby/client/am/FloatingPoint.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/net/NetConnectionRequest.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/DecryptionManager.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/mbeans/drda/NetworkServerMBean.java', 'java/engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/diag/ErrorLogReader.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/iapi/error/ExceptionUtil.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/FailedProperties40.java', 'java/engine/org/apache/derby/iapi/jdbc/ResourceAdapter.java', 'java/engine/org/apache/derby/iapi/reference/Attribute.java', 'java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/iapi/services/compiler/MethodBuilder.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/info/ProductVersionHolder.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/CompressedNumber.java', 'java/engine/org/apache/derby/iapi/services/io/DataInputUtil.java', 'java/engine/org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/engine/org/apache/derby/iapi/services/io/InputStreamUtil.java', 'java/engine/org/apache/derby/iapi/services/locks/Lockable.java', 'java/engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/engine/org/apache/derby/iapi/sql/compile/C_NodeTypes.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/compile/CostEstimate.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizable.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/depend/DependencyManager.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoleClosureIterator.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecutionFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/RowChanger.java', 'java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/BinaryOrderable.java', 'java/engine/org/apache/derby/iapi/store/access/ConglomerateController.java', 'java/engine/org/apache/derby/iapi/store/access/DatabaseInstant.java', 'java/engine/org/apache/derby/iapi/store/access/FileResource.java', 'java/engine/org/apache/derby/iapi/store/access/GroupFetchScanController.java', 'java/engine/org/apache/derby/iapi/store/access/Qualifier.java', 'java/engine/org/apache/derby/iapi/store/access/RowSource.java', 'java/engine/org/apache/derby/iapi/store/access/RowUtil.java', 'java/engine/org/apache/derby/iapi/store/access/SortCostController.java', 'java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerLock.java', 'java/engine/org/apache/derby/iapi/store/raw/Page.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/RowLock.java', 'java/engine/org/apache/derby/iapi/types/CharStreamHeaderGenerator.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueDescriptor.java', 'java/engine/org/apache/derby/iapi/types/Like.java', 'java/engine/org/apache/derby/iapi/types/NumberDataValue.java', 'java/engine/org/apache/derby/iapi/types/Orderable.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLInteger.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/SQLSmallint.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/types/SQLTinyint.java', 'java/engine/org/apache/derby/iapi/types/UserType.java', 'java/engine/org/apache/derby/iapi/util/IdUtil.java', 'java/engine/org/apache/derby/iapi/util/StringUtil.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/LoadError.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCJava.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCMethod.java', 'java/engine/org/apache/derby/impl/services/bytecode/CodeChunk.java', 'java/engine/org/apache/derby/impl/services/bytecode/Conditional.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/locks/ActiveLock.java', 'java/engine/org/apache/derby/impl/services/stream/RollingFileStream.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/TabInfoImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/RelationalOperator.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/impl/sql/conn/TempTableInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/WriteCursorConstantAction.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/StorableFormatId.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BranchControlRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/ControlRow.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericConglomerateController.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/OverflowInputStream.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer4.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredRecordHeader.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogAccessFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogCounter.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTable.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactId.java', 'java/engine/org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.java', 'java/engine/org/apache/derby/impl/store/replication/master/AsynchronousLogShipper.java', 'java/engine/org/apache/derby/vti/DeferModification.java', 'java/engine/org/apache/derby/vti/RestrictedVTI.java', 'java/engine/org/apache/derby/vti/Restriction.java', 'java/shared/org/apache/derby/shared/common/sanity/AssertFailure.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_GrantRevoke.java', 'java/tools/org/apache/derby/impl/tools/ij/StatementFinder.java', 'java/tools/org/apache/derby/impl/tools/optional/DBMDWrapper.java']","DERBY-6856: Fix javadoc warnings raised when compiling Derby javadoc with build 124 of JDK 9: commit derby-6856-09-aa-javadocEntities.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1753091 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a12152aea62541add46b22880557d3fc79850c39,2016-05-29T22:18:02Z,"['java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/engine/org/apache/derby/iapi/services/monitor/DerbyObservable.java', 'java/engine/org/apache/derby/iapi/services/monitor/DerbyObserver.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/RawTransaction.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/ContainerActionOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/DropOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/SyncOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/TruncateOnCommit.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java']","DERBY-6856: Remove deprecation warnings related to Observer/Observable by adding Derby implementations of the observable behavior.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1746066 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
21044de332f0d0fc94d2cc8efb7a1619dfb159b7,2016-04-28T02:38:59Z,['java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java'],"DERBY-6880: Update failing with java.sql.SQLDataException

This change reverts part of the changes made by revision 1628596 for DERBY-6742.

Specifically, the section of code added to UpdateResultSet.collectAffectedRows
is removed. That code caused problems with certain SQL UPDATE statements
which were compiled with Statement.RETURN_GENERATED_KEYS. The new test cases
added by this change include several examples of such SQL statements.

The JDBC documentation for the intended behavior of UPDATE statements with the
RETURN_GENERATED_KEYS option is unclear; the intended behavior is much
clearer with INSERT statements. Given that I don't understand the intended
behavior, it seems safer to me to return Derby to the previous state for
UPDATE statements; namely, that no attempt is made to compute the set of
generated keys for an UPDATE statement.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1741380 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
5a3453dbfe3a3cc639d908704c1a134b291a9697,2016-02-04T12:59:32Z,['java/optional/org/apache/derby/optional/dump/DataFileVTI.java'],"DERBY-6864: RawDBReaderTest fails on Windows

DataFileVTI.makeDecryptionEngine() opens a stream that reads from
service.properties, but it never closes the stream. This prevents the
file from being deleted later. This patch makes it open the stream in
a try-with-resources statement so that it gets closed automatically.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1728459 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0feae43b70baf831f874eada40f3299ee9a5cc0b,2016-02-05T20:53:17Z,"['java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassInput.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java', 'java/engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java']","DERBY-6857: Deprecate support for building Derby under JDKs 6 and 7

Make ClassInvestigator understand the new byte codes added in Java 7
to support InvokeDynamic and lambda. Also transform an inner class to
a lambda in the NetworkServerControl class to test that
ClassInvestigator understands the new codes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1728732 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
08cc0f89fe077234078430bf9b93ebc9dfd70ac5,2016-07-08T03:59:27Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-4555: Expand SYSCS_IMPORT_TABLE to accept CSV file with headers
DERBY-6893: Create new SYSCS_IMPORT_DATA_BULK procedure

This change was contributed by Danoja Dias (danojadias at gmail dot com)

This change modifies the method Import.importTable so that it has
a varargs interface, which makes it easier to call it in a variety
of ways from different system procedures.

Additionally, the change adds a new system procedure, named
SYSCS_UTIL.SYSCS_IMPORT_DATA_BULK, which is a variant of the
existing SYSCS_IMPORT_DATA system procedure, but has an additional
argument at the end that specifies the number of initial lines of
data in the input file to be skipped.

The anticipated use for this system procedure is to process input
data files which have been generated by a CSV-data-generating tool
which includes column header data at the start of the input file.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1751852 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
62ab90001a696ea89c87407704de6c9c90efbc83,2016-05-03T03:20:11Z,"['java/engine/org/apache/derby/impl/load/ImportLobFile.java', 'java/engine/org/apache/derby/impl/load/ImportReadData.java']","DERBY-6884: SYSCS_IMPORT_TABLE_LOBS_FROM_EXTFILE can't import lob data

This change modifies the ImportLobFile.getString() and
ImportReadData.initExternalLobFile() methods so that they use a Java ""long""
variable for the offset into the external lob file; prior to this change
they were using a Java ""int"" variable and hence would malfunction when the
lob offsets exceeded Integer.MAX_VALUE ( 2,147,483,647 ).

The regression test which demonstrates these problems is a bit slow to run;
on my system, it takes approximately 15 minutes to execute, and requires
about 10 GB of available disk space during the test run. Therefore, the
test cases are placed in a new test program (Derby6884Test), which is not
listed in the ""standard"" system test suites, but rather is only added to the
""largedata"" suite. The new test can also be run by itself, e.g.:

ant -Dderby.junit.testclass=org.apache.derbyTesting.functionTests.tests.largedata.Derby6884Test junit-clean junit-single


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1742057 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
bb55cc3e452a7cbac32384d77c2b47a58cb16b57,2016-07-16T18:44:43Z,"['java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/ImportReadData.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-4555: Expand SYSCS_IMPORT_TABLE to accept CSV file with header lines
DERBY-6894: Enhance COLUMNINDEXES parsing for SYSCS_IMPORT_DATA

This patch was contributed by Danoja Dias (danojadias at gmail dot com)

The purpose of this patch is to allow the COLUMNINDEXES value to specify
columns in the input file by column header ""name"", as an alternate to
column index number. Column header names can be specified as double-quoted
strings, and you can mix-and-match indexes and names, so that
COLUMNINDEXES could be specified as:

    1,3,""LastName"",""FirstName"",7

During the preparation of the input file for import processing, the
new ""readHeaders"" method that is added to the Import class will,
if 'skip > 0', open the input file, read the first 'skip' number of lines,
parse the column structure, and construct an array of the column headers,
then close the input file and return the headers array.

Then, the COLUMNINDEXES value, if it contains any column names, rather
than column index numbers, is matched against the headers array to
determine which column(s) to use.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1752990 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
d21039a4ecc510b9d8337794807c4a6ca084c8b2,2016-06-03T12:50:41Z,"['java/engine/org/apache/derby/iapi/services/monitor/DerbyObservable.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainerHandle.java']","DERBY-6856: Cleanup javadoc warnings introduced by the previous patch on this issue.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1746712 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
44694000a916010bf7013ce95277efe9ea1805e1,2016-05-28T20:22:41Z,"['java/build/org/apache/derbyBuild/ClassSizeCrawler.java', 'java/client/org/apache/derby/client/ClientDataSourceFactory.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/demo/nserverdemo/SimpleNetworkClientSample.java', 'java/demo/nserverdemo/SimpleNetworkServerSample.java', 'java/demo/toursdb/insertMaps.java', 'java/drda/org/apache/derby/impl/drda/DecryptionManager.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/iapi/services/cache/ClassSizeCatalog.java', 'java/engine/org/apache/derby/iapi/services/diag/DiagnosticUtil.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInfo.java', 'java/engine/org/apache/derby/iapi/services/loader/InstanceGetter.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/SpecificAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/reflect/LoadedGeneratedClass.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BitTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/BooleanTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CLOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CountAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/DateTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/LOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/MaxMinAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/RefTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/SumAvgAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/TimeTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/UserDefinedTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java', 'java/engine/org/apache/derby/jdbc/ReferenceableDataSource.java', 'java/optional/org/apache/derby/optional/dump/DataFileVTI.java', 'java/tools/org/apache/derby/impl/tools/ij/ConnectionEnv.java', 'java/tools/org/apache/derby/impl/tools/ij/util.java', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/tools/org/apache/derby/impl/tools/ij/xaHelper.java', 'java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java', 'java/tools/org/apache/derby/tools/dblook.java', 'java/tools/org/apache/derby/tools/ij.java']","DERBY-6856: Eliminate build warnings related to RoundingMode and Class.newInstance() introduced by build 118 of JDK 9: commit derby-6856-05-ag-roundingMode-Class.newInstance.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1745932 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0d57d84cbdf250b621756d55015fcd7e9369a695,2016-02-05T22:47:36Z,"['java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/engine/org/apache/derby/iapi/services/info/JVMInfo.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6857: Deprecate support for building Derby under JDKs 6 and 7

Remove the JVMInfo constants for Java 6 and 7, since they are no longer
supported.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1728767 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
698bfec50980e157610430c491ead020e90c824b,2016-07-19T03:55:35Z,['java/engine/org/apache/derby/jdbc/XATransactionState.java'],"DERBY-6879: Engine deadlock between XA timeout handling and cleanupOnError

This patch was contributed by Brett Bergquist (brett at thebergquistfamily dot com)

This change is a follow-up to revision 1751977.

The problem with that revision occurs if a timeout occurs calling ""cancel""
and if an error occurs on the clients connection causing the ""cleanupOnError""
to be called at the same time.

This change creates a new private static class that is used to track if
""cancel"" or ""cleanupOnError"" has been invoked. The methods are synchronized
so that there is no timing issue on checking and recording the state.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1753333 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
5b838fd0ed5943f813ba15bcf5076faf3dd1cd85,2016-04-09T17:53:40Z,"['java/engine/org/apache/derby/impl/sql/catalog/SYSCOLUMNSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ColumnInfo.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6882: Add ALTER TABLE ALTER COLUMN ... SET GENERATED functionality, which switches an identity column from ALWAYS to BY DEFAULT and vice-versa.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1738368 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
88b727b011954bad8ccbce7f29f24d5a9d09003c,2016-07-09T00:05:04Z,['java/engine/org/apache/derby/jdbc/XATransactionState.java'],"DERBY-6879: Engine deadlock between XA timeout handling and cleanupOnError

This patch was contributed by Brett Bergquist (brett at thebergquistfamily dot com)

The original problem to be solved is that a connection that is performing a
XA transaction that discovers an error that must be cleaned up is going to
have a lock on a EmbedConnection and will then require a lock on the
XATransactionState.

And if the same XA transaction times out (because of the XA transaction
timer value) while the original XA transaction is being worked, then the
timeout handling is going to have a lock on the XATransactionState and then
require a lock on the EmbedConnection, triggering the deadlock.

The change in the patch fixes this problem by altering the locking on
the XATransactionState when invoked via the timeout by removing the
synchronization on the ""cancel"" method and instead using inline
synchronization on the ""XATransactionState"" while its internals are being
altered.

Then, it releases the XATransactionState lock to allow the
EmbedConnection.rollback method to be invoked without the lock.

Finally, it acquires the lock again to finish cleaning up the XATransactionState.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1751977 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
c491355c756941aea59517685eb8e9274474b7f2,2016-01-30T05:44:19Z,['java/build/org/apache/derbyBuild/classlister.java'],"DERBY-6857: Make classlister prune the constants files from the rosters of jar file contents; commit derby-6857-04-aa-pruneConstantClasses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1727680 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
38e6a8d2f5aa0939f647f1a6ee25ea226445a281,2016-05-25T00:35:58Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3181: DatabaseMetaData.getBestRowIdentifier behavior with invalid scope

This patch was contributed by Danoja Dias (danojadias at gmail dot com)

The DatabaseMetaData.getBestRowIdentifier method takes a number of arguments,
including ""scope"", which is supposed to be one of the enumerated values:
bestRowTemporary, bestRowTransaction, and bestRowSession.

If an invalid scope argument was passed to this method, Derby was returning
a hard-coded ""empty"" row identifier, which was slightly different, in detail,
to the row identifier that is returned for a valid scope argument.

Since JDBC does not require that we return such a row identifier for an
invalid scope argument, it seems cleaner and more useful to throw an
exception with a message indicating that an invalid scope argument was
passed. The caller can then correct their application to make the call with
a valid scope argument, and will then receive a valid row identifier.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1745414 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
39b3237a9c0221a3db09eb910d53712baeb31ac1,2016-05-04T14:17:57Z,"['java/client/org/apache/derby/client/am/ClientCallableStatement42.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement42.java']","DERBY-6856: Eliminate some autoboxing-related deprecation warnings when building with jdk 9: derby-6856-03-ab-autoboxingDeprecationWarnings.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1742289 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4ba78a4bbbeb52a751d47a5546f51183e6e4c69c,2016-05-29T23:35:51Z,"['java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java']","DERBY-6856: Accidentally checked in the ShardingKey changes again; reverting.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1746068 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ea2e9393b599b3822fd2ab88aa5f015813906b3e,2016-07-03T16:34:49Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/ImportReadData.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-4555: Expand SYSCS_IMPORT_TABLE to accept CSV file with headers
DERBY-6892: Create new SYSCS_IMPORT_TABLE_BULK procedure

This change was contributed by Danoja Dias (danojadias at gmail dot com)

This change modifies the method Import.importTable so that it has
a varargs interface, which makes it easier to call it in a variety
of ways from different system procedures.

Additionally, the change adds a new system procedure, named
SYSCS_UTIL.SYSCS_IMPORT_TABLE_BULK, which is a variant of the
existing SYSCS_IMPORT_TABLE system procedure, but has an additional
argument at the end that specifies the number of initial lines of
data in the input file to be skipped.

The anticipated use for this system procedure is to process input
data files which have been generated by a CSV-data-generating tool
which includes column header data at the start of the input file.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1751159 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
80d39eee6bcc5c73184ea4d35d2a09d7947c6592,2016-05-09T01:22:04Z,"['java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java']","DERBY-6856: Revert ShardingKey changes introduced by revision 1742858.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1742861 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5e5b9497246176cb0eca34175f4a15d9d2f33498,2016-07-31T19:25:28Z,['java/engine/org/apache/derby/jdbc/AutoloadedDriver.java'],"DERBY-6752: Derby tries to load non-existent class AutoloadedDriver40

This patch was contributed by Danoja Dias (danojadias at gmail dot com)

This patch removes the code that tries to load AutoloadedDriver40. That code
was always failing, because the class was removed from the Derby code by
revision 1494482, but the attempt to load the class was wrapped in an
exception catch block so there were no symptoms of the failed class load
attempt.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1754680 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
820eb0adcc1ce3ba0a5c8106680cfc430a873724,2016-02-13T17:15:22Z,['java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java'],"DERBY-6828: Network Server fails to start in Czech locale.

LocalizedResource.getTextMessage has special exception-handling behavior
for situations where the chosen ResourceBundle does not contain the
message key that we are trying to format.

The exception handler simply displays the message key, together with
any arguments to the message.

But some messages have no arguments, for example the message
DRDA_SecurityInstalled.I has no arguments, and so NetworkServerControl
passes a null set of arguments when displaying that message.

Therefore, LocalizedResource.getTextMessage needs to include a null
guard, so that its exception handler doesn't trip over the non-existent
arguments and crash with a NullPointerException.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1730254 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
f4fa6c267495492935eb14813c8305fcd2406713,2016-02-01T03:31:27Z,['java/tools/org/apache/derby/iapi/tools/run.java'],"DERBY-5950: PlanExporter and SignatureChecker don't appear in derbyrun.

This patch was contributed by Yun Fang (fangyuncn at gmail dot com)

This patch externalizes the help for 'java -jar derbyrun.jar' to reflect that
the PlanExporter and SignatureChecker tools are available from derbyrun.

The patch also enables PlanExporter from derbyrun, as it was not previously
available via this launch technique.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1727887 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
dc05c9d8149d540a78ddfe85401331c7e31a8789,2016-06-18T16:00:20Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-6890: ALTER TABLE DROP COLUMN corrupts secondary index collation data.

During ALTER TABLE DROP COLUMN, we rebuild all the indexes on the table. Some
indexes may be entirely dropped, some indexes may be rebuilt with a subset
of columns, some indexes are simply rebuild with essentially the same content.

The issue is that the index rebuild logic was incorrectly setting the
collation data for each index. So the indexes had the right data, but the
wrong collation information, causing them to be damaged.

This change moves the computation of the index collation ids out of the
setUpAllSorts method, into the getAffectedIndexes method, where it is simpler
to compute the index collation ids appropriately, because the code in that
location already has logic to manipulate both the old (pre-DROP) and new
(post-DROP) table descriptions, and so it is straightforward to compute the
correct collation ids there.

As part of this change, an old test case in CollationTest2, which was marked
with the comment ""this test does not work yet"", and was disabled, is changed
(un-commented) and is now enabled.

I found no new problems with this test case. I believe that, at the time
that comment was written, there were bugs in Derby that have since been
repaired, and hence it is appropriate to enable this test case at this time.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1749069 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
83668f1a2f5c1d1978c5565ccf570a49f27762ec,2016-07-23T15:14:15Z,['java/engine/org/apache/derby/impl/load/ImportReadData.java'],"DERBY-4555: Expand SYSCS_IMPORT_TABLE to accept CSV file with header lines
DERBY-6894: Enhance COLUMNINDEXES parsing for SYSCS_IMPORT_DATA

This patch was contributed by Danoja Dias (danojadias at gmail dot com)

This patch is a follow-on to revision 1752990, and ensures that the
new readHeaders() logic correctly increments the ImportReadData's
lineNumber field as it's reading the column header lines, so that if
an error occurs while reading those header lines, a reasonable line
number is reported in the error message.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1753876 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
9a1012a629924d72f0c35816b988dc7d2d66cac3,2016-02-28T03:06:18Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-6875: Mirror selection broken on Derby download pages.

This change changes the tool which generates the Derby download page for
a new release, to remove the comment markers from the mirror selection
portion of the page.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1732683 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
bb5be6f126530b204f92b4f98fa643d07248da98,2016-04-25T14:15:24Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/util/ReuseFactory.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericResultDescription.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java']","DERBY-6885: Remove ReuseFactory

The methods getInteger(), getShort(), getByte(), getLong() and
getBoolean() are now simple wrappers around Integer.valueOf(),
Short.valueOf(), and so on. They no longer have any purpose, and can
be removed. Callers can either call the corresponding valueOf() method
directly or rely on auto-boxing (which use valueOf() implicitly).

The remaining method, getZeroLenByteArray(), which returns a static
instance of an empty byte array, is replaced with a static final field
in the ArrayUtil class.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1740842 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
001fd9fce42e19fc85c1f2be3080e8fc142a9ff3,2014-04-29T03:00:37Z,['java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java'],"javadoc fix

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1590861 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
070d37e30600755f16216090af3cc2a8987d2972,2013-12-23T20:07:35Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/compile/TagFilter.java', 'java/engine/org/apache/derby/iapi/sql/compile/Visitable.java', 'java/engine/org/apache/derby/iapi/sql/compile/VisitableFilter.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-6429: Bring privilege checks on UPDATE statements into closer alignment with the SQL Standard; tests passed cleanly on derby-6429-01-af-privilegeFilters.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1553197 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3d2d88b7a1ac5f70efcdb7c8d6355fd232dc4871,2014-01-08T16:35:07Z,"['java/engine/org/apache/derby/iapi/sql/compile/IgnoreFilter.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java']","DERBY-6434: Correct privileges required for INSERT statements; tests passed cleanly on derby-6434-01-ac-correctInsertPrivs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1556571 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e1e0b16e22c4028b49366e2f108054aaf2a2b5c0,2013-02-20T21:54:52Z,['java/engine/org/apache/derby/impl/sql/compile/AndNode.java'],"Introducing temporary JavaDoc error to test Hudson error/warning reporting.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448434 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
1efca1c5c28183a8b85a41a00e3385666ae859e7,2012-06-13T15:48:34Z,['java/engine/org/apache/derby/impl/sql/GenericClassInfo.java'],"DERBY-5804 Remove unused class GenericClassInfo

Patch removing this class.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1349924 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d203eea661f3914a68a5419f94492e2109e41574,2012-10-04T11:30:54Z,"['java/engine/org/apache/derby/iapi/reference/Attribute.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5792: Make it possible to turn off encryption on an already encrypted database.

Added the new connection attribute ""decryptDatabase"", which will decrypt an
encrypted database given the correct boot password or key if set to true.
The request is ignored if the database has already been booted.
If authentication and authorization are both enabled, only the DBO is allowed
to decrypt the database.

Enabled the DecryptDatabaseTest, and added new tests to DboPowersTest and
CryptoCrashRecoveryTest.

A few high-level comments:
o EmbedConnection
Deals with connection attributes and DBO powers.

o RawStore
Deals with the meat of the feature; configuring cryptograhic operations (based
on connection attributes and service properties), modifying
service.properties, and extra crash recovery logic.

o RAFContainer
This is where we skip encrypting the data pages when writing the containers,
effectively decrypting the database.

Patch file: derby-5792-3a-decryption_feature.diff,
            derby-5792-4b-crash_and_dbo.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1393993 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
fae21bfc8a583c39a253616069d7907316fe367f,2014-02-14T20:29:39Z,"['java/demo/vtis/java/org/apache/derbyDemo/vtis/core/QueryRow.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/core/QueryVTIHelper.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/core/VTIHelper.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/core/VTITemplate.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/core/XMLRow.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/core/XmlVTI.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/SnapshotQuery.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/Subscription.java', 'java/demo/vtis/java/org/apache/derbyDemo/vtis/snapshot/SubscriptionSignature.java']","DERBY-6256: Modernize the vti demos and eliminate many obsolete classes; commit derby-6256-06-aa-revampVTIdemos.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1568509 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
274c5ba43e62aa1f1f5c5ef25cf8260bfc27035f,2013-05-20T15:33:20Z,"['java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TablePrivilegesNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java']","DERBY-6213: Generify impl/sql/conn package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484498 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
402f3c2b7be9cecdf142cc831b89a1f70fc71942,2013-03-13T12:26:27Z,"['java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/storeless/org/apache/derby/impl/storeless/NoOpTransaction.java']","DERBY-6075: Use modern collections in impl/sql/compile

Remove some unnecessary use of java.util.Properties. Mostly unused
imports, but also some unused parameters.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455902 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
106919eb7a4922de2dc98549f6b6960edb53796e,2013-01-14T23:44:21Z,['java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java'],"Fixed comment typo


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1433219 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f33fbafeb66f5e908ab069736ccd6be855165887,2013-02-20T10:33:58Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GetCurrentConnectionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/RowNumberFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Change the signatures of

  - ValueNode.bindExpression(FromList, SubqueryList, Vector)
  - ValueNode.bindExpression(FromList, SubqueryList, Vector, boolean)
  - JavaValueNode.bindExpression(FromList, SubqueryList, Vector)
  - all overrides of the above methods

to use java.util.List instead of java.util.Vector.

The actual arguments passed to said methods are still of type
java.util.Vector.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448065 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
999e32af6e1672b89d8e23809b5aa5de08a6ac14,2011-11-02T13:05:04Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/ColPermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoleGrantDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoutinePermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SequenceDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TablePermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TupleDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-4845: Improve the dependency tracking for our build targets

Use DependableFinder interface instead of impl classes in iapi code.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1196562 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d861c2306f46fbb9076c9e3773b5fcc6714c0397,2012-10-01T12:49:55Z,"['java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/Java5ClassInspector.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java']","DERBY-672: Allow binding of user-defined aggregates to generic classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1392307 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4e1ac7970a78cc1c513e7d78c57aab41570435e2,2011-12-19T09:33:00Z,"['java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java']","DERBY-5542: Remove checks for Java version being greater than or equal to 1.4

No older versions are supported.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1220671 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
800a91de34d2f97b756f9beb18860188e3ec6ffe,2014-05-07T19:29:31Z,['java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java'],"Fixed some odd formatting that made the code hard to read (comment
indentation).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593123 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e6a9998277f545f41881b474be70318e81d6f526,2011-11-08T08:53:52Z,"['java/engine/org/apache/derby/iapi/sql/compile/Node.java', 'java/engine/org/apache/derby/iapi/sql/compile/NodeFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NodeFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java']","DERBY-4845: Improve the dependency tracking for our build targets

Make NodeFactory return nodes of type Node (in an iapi package) instead
of QueryTreeNode (which lives in an impl packages) to remove dependencies
on implementation code in iapi code.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1199160 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b690b7aeb16d014017099fb64fb58294950ccfc8,2012-07-10T10:00:46Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread
DERBY-436: Clean up imports and static field references in DRDA classes

Changed in DRDAConnThread:

- Use class name to reference static fields
- Use direct references to constants in java.sql.ParameterMetaData
  instead of JDBC30Translation
- Organize imports alphabetically

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359559 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
feecfdda8d13ba6553d03b92006d2c8d1a9ad8a0,2014-02-01T23:39:50Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java'],"DERBY-6464: Fix javadoc warning; commit derby-6464-02-aa-fixJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1563512 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3c3ffd8c3c541cd64303a16c79968b4d00bc5aec,2012-10-29T12:35:08Z,"['java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5962: Internationalize error messages for database decryption

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1403268 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6bd38476c74bafb0868e98a42199ad5b2bfe0330,2014-01-06T10:05:35Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java']","DERBY-5866: Triggers fire out of order

Make sure the creation timestamp of a newly created trigger is higher
than the timestamps of the existing triggers on the same table. If it
is not higher, the triggers may fire in the wrong order. If the
current timestamp is not higher than the timestamp of the previous
trigger defined on the table, the new trigger now gets a creation
timestamp that is one millisecond higher than the creation timestamp
of the previous trigger.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1555702 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
be94230d3546899f28ffe258217b008768d2fa11,2013-06-04T09:08:45Z,"['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/engine/org/apache/derby/iapi/util/StringUtil.java', 'java/engine/org/apache/derby/impl/store/raw/data/OverflowInputStream.java']","DERBY-6213: Deprecate support for Java 5 and CDC

Use Java 6 library methods to simplify logic in some cases.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1489348 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7fb99569ce3cb7758e90be5e2ebff3906f039e68,2013-01-25T17:26:55Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/RealResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","DERBY-6000: Add new JDBC 4.2 Statement.executeLargeUpdate() methods to the embeddeded JDBC 3.0 implementation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1438600 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
09bee7db56add7dce137134c926aae6f58253d12,2013-08-27T14:05:03Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/CheckConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ForeignKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/KeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCONSTRAINTSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdatableVTIConstantAction.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-532 Support deferrable constraints

Patch derby-532-syntax-binding-dict-all-1. This patch wires in the syntax
for deferred constraints (aka ""constraint characteristics""). It also
does

- binding checks for CREATE TABLE constraints and SET constraints
  statement (new). Binding is still missing for ALTER TABLE
  constraints clauses.

- temporarily throws not yet implemented (0A000.S) for all usage
  *except* when characteristics coincide with the current (and future)
  Derby defaults, i.e. NOT DEFERRABLE [INITIALLY IMMEDIATE] ENFORCED

- checks inconsistencies in characteristics (illegal combinations), cf.
  42X97 ""Conflicting constraint characteristics for constraint""

- implements implied DEFERRABLE of (only) INITIALLY DEFERRED is
  specified.

- if the property ""derby.constraintsTesting"" is set, persists
  characteristics to dictionary by overloading the existing STATE
  character according to specification. This property will go away
  once the feature set is implemented, only implemented not to be able
  to test dictionary persistence

- throws 42XAK ""Constraint characteristics not allowed for NOT NULL.""
  for NOT NULL characteristics since this constraint type is not
  explicitly implemented as a constraint in Derby (yet, at least)

- adds a new test, ConstraintCharacteristicsTest to test the above and
  wires it into the lang suite.

(part 2):
- Elaborates ALTER TABLE ALTER TABLE, correcting syntax, adding name
  binding and updating dictionary (subject to the property
  derby.constraintsTesting) in a new AlterConstraintConstantAction
  class.

- Built out tests in ConstraintCharacteristicsTest to systematically
  check all possible characteristics combinations in all cases, and
  adding tests for ALTER TABLE ALTER TABLE, including dictionary
  updates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1517823 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
16aa6a483dcf1feb57063dcb01e9b374cf861035,2015-08-06T00:36:20Z,"['java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/iapi/services/i18n/MessageService.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6802: Change NetworkServer code to use new MessageUtils class
DERBY-6823: Refactor uses of DB2_JCC_MAX_EXCEPTION_PARAM_LENGTH

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)

This change modifies several classes in the Network Server and Engine
code bases to use the new features of the MessageUtils class in the
shared code.

The intent of this change is that no behavior is altered. The same
algorithms, data structures, network protocols, etc. are in use;
the only difference is that the implementation of the error message
and exception encoding logic is now drawn from MessageUtils methods
rather than being spread over several classes in the Network Server
and Engine code.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1694383 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
0326967fa95194845412beb4eb72a2c9e0bfac75,2013-05-03T03:42:14Z,"['java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/AsciiStream.java', 'java/client/org/apache/derby/client/am/BlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/BlobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/BlobOutputStream.java', 'java/client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/client/org/apache/derby/client/am/ClientBlob.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement.java', 'java/client/org/apache/derby/client/am/ClientClob.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientParameterMetaData.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/ClientSavepoint.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/client/org/apache/derby/client/am/ClientTypes.java', 'java/client/org/apache/derby/client/am/ClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorReader.java', 'java/client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/am/DateTimeValue.java', 'java/client/org/apache/derby/client/am/Decimal.java', 'java/client/org/apache/derby/client/am/Diagnosable.java', 'java/client/org/apache/derby/client/am/DisconnectException.java', 'java/client/org/apache/derby/client/am/ExceptionFormatter.java', 'java/client/org/apache/derby/client/am/FloatingPoint.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/ProductLevel.java', 'java/client/org/apache/derby/client/am/SectionManager.java', 'java/client/org/apache/derby/client/am/SignedBinary.java', 'java/client/org/apache/derby/client/am/SqlCode.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/SqlWarning.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveClobLocatorReader.java', 'java/client/org/apache/derby/client/am/Utils.java', 'java/client/org/apache/derby/client/am/Version.java', 'java/client/org/apache/derby/client/am/XaException.java', 'java/client/org/apache/derby/client/net/CcsidManager.java', 'java/client/org/apache/derby/client/net/CodePoint.java', 'java/client/org/apache/derby/client/net/ConnectionReply.java', 'java/client/org/apache/derby/client/net/ConnectionReplyInterface.java', 'java/client/org/apache/derby/client/net/ConnectionRequestInterface.java', 'java/client/org/apache/derby/client/net/DssConstants.java', 'java/client/org/apache/derby/client/net/EbcdicCcsidManager.java', 'java/client/org/apache/derby/client/net/FdocaConstants.java', 'java/client/org/apache/derby/client/net/FdocaSimpleDataArray.java', 'java/client/org/apache/derby/client/net/NaiveTrustManager.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetCallableStatement.java', 'java/client/org/apache/derby/client/net/NetConfiguration.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetConnectionRequest.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData40.java', 'java/client/org/apache/derby/client/net/NetIndoubtTransaction.java', 'java/client/org/apache/derby/client/net/NetLogWriter.java', 'java/client/org/apache/derby/client/net/NetPackageReply.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/client/org/apache/derby/client/net/NetResultSet.java', 'java/client/org/apache/derby/client/net/NetResultSet42.java', 'java/client/org/apache/derby/client/net/NetResultSetReply.java', 'java/client/org/apache/derby/client/net/NetResultSetRequest.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetSqldta.java', 'java/client/org/apache/derby/client/net/NetStatement.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/NetXACallInfo.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAConnectionRequest.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/client/net/PublicBufferOutputStream.java', 'java/client/org/apache/derby/client/net/Reply.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/client/net/ResultSetReply.java', 'java/client/org/apache/derby/client/net/ResultSetReplyInterface.java', 'java/client/org/apache/derby/client/net/ResultSetRequestInterface.java', 'java/client/org/apache/derby/client/net/StatementReply.java', 'java/client/org/apache/derby/client/net/StatementReplyInterface.java', 'java/client/org/apache/derby/client/net/StatementRequestInterface.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/engine/org/apache/derby/iapi/services/info/ProductVersionHolder.java']","DERBY-6125 Code clean up in client driver.

Patch derby-6125-visibility-02-e.

Further limits scopes of program entities and also removes dead code,
including maintenance of fields that are never read, i.e. they are not
used for anything except setting them.

When I use the term ""unused"" below it may mean that something is
ultimately/transitively unused, e.g a method used to set an unused
field, or due to other code removal transitively. All references are
to client classes.

* Agent

  Removed unused method batchUpdateExceptionGenerated

* ClientCallableStatement

  Removed two unused overloads: resetCallableStatement

* ClientClob

  Removed unused field encoding_

  Removed unused methods createClobWrapper, convertFromAsciiToCharacterStream

* ClientPreparedStatement

  Removed unused methods resetPreparedStatement,
  initPreparedStatement, writeDescribeOutput, readDescribeOutput,
  writePrepareDescribeInputOutput, checkScaleForINOUTDecimal

  Inlined creation of method not implemented exception, removed
  jdbc3FeatureNotSupported.

* ClientResultSet

  Commented out unused fields updatability_unknown__, updatability_readOnly__

  Removed unused fields NEXT_ROWSET, PREVIOUS_ROWSET, ABSOLUTE_ROWSET,
  FIRST_ROWSET, LAST_ROWSET, RELATIVE_ROWSET, REFRESH_ROWSET, nestingLevel_

  Removed unused method rowCountIsKnown. flowFetch moved to NetResultSet.

* ClientStatement

  Removed unused field returnValueFromProcedure_

  Commented out unused fields isCommitSql__, isRollbackSql__, isPositionedUpdateDeleteSql__

  Removed unused method clientmarkResultSetsClosed, getProcedureName,
  upperCaseProcedureName, jdbc3FeatureNotSupported

* ClobLocatorOutputStream

  Removed unused field connection

* ColumnMetaData

  Removed unused fields singleMixedByteOrDouble_,
  protocolTypeToOverrideLidMapping_, mddOverrideArray_

  Removed unused method isParameterModeGuessedAsOutput, columnIsNotInUnicode

* Configuration

  Removed unused fields jreLevelMajor, jreLevelMinor, jreLevel,
  dncPackageVersion, enableNetConnectionPooling,
  cursorAttribute_InsensitiveRowset,
  cursorAttribute_SensitiveDynamicRowset,
  cursorAttribute_InsensitiveRowset

* CrossConverters

  Removed unused method getBooleanFromByte, getBigDecimalFromBoolean,
  getStringFromBoolean, getDateFromTime(Time),
  getDateFromTimestamp(Timestamp), getTimeFromTimestamp(Timestamp),
  getTimestampFromTime(Time), getTimestampFromDate(Date)

* DisconnectException

  Removed unused constructor DisconnectException(Agent, ClientMessageId, SqlCode)

* LogWriter

  Removed unused traceExit overloads.

* SectionManager

  Removed unused fields collection_, HOLD, NO_HOLD,

* SqlCode

  Removed unused fields invalidCommitOrRollbackUnderXA,
  invalidSetAutoCommitUnderXA, undefinedError

* SqlException

  Removed unused constructor SqlException(LogWriter, ClientMessageId, SqlCode)

* SqlWarning

  Removed unused constructors
  Removed unused method getNextWarning

* Sqlca

  Removed unused methods getReturnValue, includesSqlCode

* Utils

  Removed unused methods getStringFromStrings, padOrTruncate,
  checkForNegativePositiveSqlcard (2X), getUpdateCountFromSqlcard,
  accumulateSQLWarning, getSQLTypeName (we might want to keep this for
  debugging possibly?)

* Version

  Removed unused methods getDriverName, getBuildNumber, isAlpha, isBeta

* XaException

  Removed unused constructors
  Removed unused method copyAsUnchainedXAException

* CodePoint

  Removed many unused code points (fields). One could argue that it's
  nice to keep these if we need them later, opinions welcomed. For me
  it seems clearer to only keep those we need, we know what the source
  for the constants is anyway, i.e. the DRDA specification.

* DssConstants

  Removed many unused constants, cf previous item considerations.

* FdocaConstants

  Removed many unused constants, cf previous item considerations.

* FdocaSimpleDataArray

  Removed unused fields fdocaFieldType_, representation_, mode_, fieldLength_

* NetAgent

  Removed unused fields packageRequest_,
  Removed unused method convertToStringTcpIpAddress

* NetConfiguration

  Removed unused fields INITIAL_CAPACITY, NON_CHAR_DDM_DATA_PAD_BYTE,
  CURSOR_NOT_OPEN, CURSOR_OPEN, CURSOR_CLOSE_ONLY, DDMHDR_LENGTH,
  PRDDTA_MAX_ACCT_SUFFIX_LEN, MGRLVL_3, MGRLVL_4, MGRLVL_6,
  SECMEC_DCESEC, SECMEC_EUSRIDNWPWD, SYSTEM_ASC

* NetConnection

  Removed unused field pendingEndXACallinfoOffset_, targetSrvclsnm_, seqNo_

  Removed unused methods getSpecialRegisters, addSpecialRegisters,
  getSequenceNumber, getIndoubtTransaction, doResetNow,
  serverSupportsBooleanValues

* NetConnectionRequest

  Removed unused method writeDummyExchangeServerAttributes

* NetCursor

  Removed unused fields targetSqlamForTypdef_, numMddOverrides_

* NetResultSet

  Removed unused method queryDataWasReturnedOnOpen

* NetResultSet

  Method flowFetch moved from ClientResultSet to be able to make it
  package private.

* NetStatement

  Removed unused constructor
  Removed unused method netReset

* NetXACallInfo

  Removed unused fields xaInProgress_, xaWasSuspended,
  currConnection_, freeEntry_, convReleased_, xaResource_, uowid_,
  readOnlyTransaction_

  Removed unused methods setUOWID, getUOWID,
  setReadOnlyTransactionFlag, getReadOnlyTransactionFlag

* NetXAConnection

  Removed unused methods writeLocalXAStart_, readLocalXAStart, getUOWID, getPort

* NetXAResource

  Removed unused fields TMTIMEOUT, ACTIVE_ONLY, XA_NULL_XID,
  RECOVER_XID_ARRAY_LENGTH, XAFUNC_NONE, rmId_, numXACallInfo_,
  connectionCount_, activeXATransCount_, rmIdx_, rmIdy_, port_,
  ipaddr_, specialRegisters_

  Removed unused methods throwXAException, getSpecialRegisters,
  addSpecialRegisters

* Reply

  Removed unused fields dssIsChainedWithDiffID_

  Removed unused methods readIntArray, readLong, readBoolean,
  readString(int), readLDBytes, peekLength

* Request

  Removed unused method createXACommand, writeScalarBytes,
  writeScalarHeader, writeScalarPaddedBytes, writeDDMString

* Typdef

  Removed unused constructor(NetAgent, int, String)
  Removed unused field environment_
  Removed unused methods clearCcsidSbc, clearCcsidDbc, clearCcsidMbc

* NetIndoubtTransaction removed altogether

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1478635 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7953b49b738f30d0c6cbf869e1141fd68e0512f6,2014-05-01T16:30:44Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java']","DERBY-6554: Fix some bugs in cache management for sequence generators; commit derby-6554-01-ad-bugfixes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1591703 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
05677661f08366f96257a924ad9349c9afb12157,2014-03-11T13:42:37Z,"['java/demo/workingwithderby/WwdClientExample.java', 'java/demo/workingwithderby/WwdEmbedded.java']","DERBY-1997  Misleading text in WwdEmbedded demo source file for Working With Derby

Modified two demo source files to make embedded and client error handling identical.

Patch: DERBY-1997.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1576342 13f79535-47bb-0310-9956-ffa450edef68
",chaase3@apache.org,Camilla Haase
20e175836bb7d72de0cadcd2ba4a3a4fd24eb78c,2012-09-06T20:34:29Z,['java/engine/org/apache/derby/impl/store/raw/data/EncryptData.java'],"Removed unused variable.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1381745 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
69e3d06219a06473d22d679ff9801b7e2283e3b7,2013-04-24T04:37:28Z,"['java/client/org/apache/derby/client/ClientDataSourceFactory.java', 'java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientPooledConnection40.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/AsciiStream.java', 'java/client/org/apache/derby/client/am/Blob.java', 'java/client/org/apache/derby/client/am/BlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/BlobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/BlobOutputStream.java', 'java/client/org/apache/derby/client/am/CachingLogicalConnection.java', 'java/client/org/apache/derby/client/am/CachingLogicalConnection40.java', 'java/client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/client/org/apache/derby/client/am/CallableStatement.java', 'java/client/org/apache/derby/client/am/CallableStatement40.java', 'java/client/org/apache/derby/client/am/CallableStatement42.java', 'java/client/org/apache/derby/client/am/ClientBlob.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement40.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement42.java', 'java/client/org/apache/derby/client/am/ClientClob.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/ClientParameterMetaData.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement40.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement42.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/ClientSavepoint.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/client/org/apache/derby/client/am/ClientTypes.java', 'java/client/org/apache/derby/client/am/Clob.java', 'java/client/org/apache/derby/client/am/ClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorReader.java', 'java/client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/client/org/apache/derby/client/am/ClobOutputStream.java', 'java/client/org/apache/derby/client/am/ClobWriter.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/am/Decimal.java', 'java/client/org/apache/derby/client/am/Diagnosable.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/ExceptionFormatter.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement40.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement42.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/LogicalConnection40.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement42.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/MaterialStatement.java', 'java/client/org/apache/derby/client/am/ParameterMetaData.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/PreparedStatement40.java', 'java/client/org/apache/derby/client/am/PreparedStatement42.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/Savepoint.java', 'java/client/org/apache/derby/client/am/Section.java', 'java/client/org/apache/derby/client/am/SectionManager.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/am/StatementCallbackInterface.java', 'java/client/org/apache/derby/client/am/Types.java', 'java/client/org/apache/derby/client/am/UnitOfWorkListener.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveBlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveClobLocatorReader.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveLOBLocatorInputStream.java', 'java/client/org/apache/derby/client/am/Utils.java', 'java/client/org/apache/derby/client/am/Version.java', 'java/client/org/apache/derby/client/am/XaException.java', 'java/client/org/apache/derby/client/am/stmtcache/JDBCStatementCache.java', 'java/client/org/apache/derby/client/am/stmtcache/StatementKey.java', 'java/client/org/apache/derby/client/am/stmtcache/StatementKeyFactory.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/client/org/apache/derby/client/net/CodePointNameTable.java', 'java/client/org/apache/derby/client/net/ConnectionRequestInterface.java', 'java/client/org/apache/derby/client/net/EbcdicCcsidManager.java', 'java/client/org/apache/derby/client/net/NaiveTrustManager.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetCallableStatement.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData40.java', 'java/client/org/apache/derby/client/net/NetLogWriter.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/client/org/apache/derby/client/net/NetResultSet.java', 'java/client/org/apache/derby/client/net/NetResultSet40.java', 'java/client/org/apache/derby/client/net/NetResultSetReply.java', 'java/client/org/apache/derby/client/net/NetResultSetRequest.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetStatement.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/NetXACallInfo.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/client/net/Reply.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/client/net/ResultSetRequestInterface.java', 'java/client/org/apache/derby/client/net/StatementRequestInterface.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java']","DERBY-6125 Code clean up in client driver.

derby-6125-rename-c which renames the name overloaded JDBC classes in
the client driver thus:

    am/<JDBCClassName>.java -> am/Client<JDBCClassName>.java

This allows import statements to be used for all JDBC and Derby
classes. The rest of the patch implements such usage instead of full
pathnames in usages. After this patch, the only overload that needs
explicit package path is ""java.util.Date"" which would otherwise
collide with java.sql.Date. In one instance, I let a full path remain
in order to avoid a compiler warning: the deprecated use of
StringBufferInputStream in ClientClob.java.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471245 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
ca72f66a4a5dbd02ffe96de6abdc93e69864712a,2012-07-03T05:03:14Z,['java/client/org/apache/derby/client/net/NetPreparedStatement.java'],"DERBY-5834: Remove unused methods in NetPreparedStatement class

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

This change removes two unused overloads of the resetNetPreparedStatement
method in NetPreparedStatement.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356573 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
58bf06e16a27d9c18c59c52779df8f38b31ce794,2012-12-31T04:01:13Z,"['java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/jdbc/Driver30.java', 'java/engine/org/apache/derby/jdbc/Driver40.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection40.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/ReferenceableDataSource.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-embed-restructure-04. This restructures the class
hierarchy for embedded data sources to prepare for introduction of the
non-JNDI dependent ones for JEP 161.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1427045 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
6fdf9c01acdcf398f6e260cb16628c7c7a64f0d1,2014-04-18T12:22:53Z,['java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java'],"DERBY-6545: Prevent ALTER TABLE from adding a default to an identity column; commit derby-6545-01-aa-forbidDefaultOnIdentityColumn.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1588455 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
10df8a5b0daa7be3d1907978d0d0c096570e4bfc,2014-02-03T15:11:40Z,"['java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/engine/org/apache/derby/vti/ForwardingVTI.java']","DERBY-6117: Add a context-aware table function which could be used as an example in user docs; commit derby-6117-03-aa-ArchiveVTI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1563944 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9f1ddc5d6885dcbbe08ae4b3198870f6628ef995,2013-05-03T04:08:41Z,"['java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientStatement.java']","DERBY-6125 Code clean up in client driver.

    Patch ""derby-6125-visibility-03-a"" to limit sharing of state
    between classes not in the same package by cloning arrays not
    considered performance sensitive.

    * ClientStatement
      made indexOfCurrentResultSet private by adding accessors

      removed unused field numInvisibleRS

      cloned execute, executeLargeUpdate and executeUpdate's overloads
      input arrays columnIndexes and columnNames

      cloned completeExecuteCall's argument resultSets

    * ClientPreparedStatement

      use new accessor resetResultSetList instead of accessing
      ClientStatement#indexOfCurrentResultSet directly

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1478641 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d7a318a469f60a91fbdfd5ed2bbb89ce6ce01801,2014-09-29T18:52:01Z,['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java'],"DERBY-6636: Prevent blackhats from creating a BaseDataFileFactory; tests passed cleanly for me on derby-6636-01-aa-usederbyinternals.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1628256 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
09c26978ccc38d96c534583c78c7ad40b9b2592d,2013-03-21T12:53:57Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GetCurrentConnectionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowNumberFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Rename variables from aggregateVector to aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1459276 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7f53212912def8a93033af7111a391d567546b08,2014-08-19T19:51:32Z,"['java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java']","DERBY-6619 After silently swallowing SecurityExceptions, Derby can leak class loaders

Patch derby-6619 which prints warnings on derby.log if permissions are
missing to get and set the context class loader in
SingletonTimerFactory (which can lead to classloader leak). Also adds
a test of this by checking derby.log in SecureServerTest.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1618955 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9f2ed7dad0742fdc69597529e6f47a08d2e7486e,2013-05-10T08:56:19Z,"['java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GetCurrentConnectionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParserImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Reduce visibility of some methods and fields in impl/sql/compile that
expose package-private classes outside of the package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480941 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3c6be538665ba4d2f9d40f57669c8742c2faa5f7,2014-02-03T17:40:09Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java'],"DERBY-6464: Make more fields in ResultColumn private; tests passed cleanly on derby-6464-03-aa-morePrivateFields.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1563987 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
923a60f9c672312452e7e2393430afb215ff5470,2013-06-12T08:37:57Z,['java/engine/org/apache/derby/iapi/services/info/JVMInfo.java'],"DERBY-6213: Deprecate support for Java 5 and CDC

Remove constants for no longer supported Java versions in JVMInfo.

Remove checks for Java version where same action would be taken
for all supported Java versions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492116 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f6e9c2124a97e99b8a7a3487df59c97867da6661,2012-06-29T20:24:20Z,['java/engine/org/apache/derby/catalog/SystemProcedures.java'],"DERBY-5750 Sending an empty string as table name to compress table procedure or empty string as index name to update statistics procedure makes the parser throw an exception. 


Committing changes for DERBY-5750 which will provide following functionality 
a)if schema name is provided as an empty string, we will throw SQLState.LANG_SCHEMA_DOES_NOT_EXIST
b)if table name is provided as an empty string, we will throw SQLState.LANG_TABLE_NOT_FOUND
c)if index name is provided as an empty string(this is for update and drop statistics procedures), we will throw 
	SQLState.LANG_INDEX_NOT_FOUND
d)if schema name is null, we will use current schema to resolve the table name
e)if table name is null, we will throw SQLState.LANG_TABLE_NOT_FOUND
f)if index name is null, we will drop/update statisitcs for all the indexes for the given table.

I have added few test cases for each of these procedures. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1355552 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
7e9a11de9f8ca6d4c57fc4119210c8615fd1a2b1,2012-07-25T12:25:53Z,['java/build/org/apache/derbyBuild/MessageBuilder.java'],"DERBY-5878: Add message argument names, as comments, to message file generated by MessageBuilder.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1365552 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
f8a53ec3869da969976d6dff9628cf920748c0d7,2012-05-21T23:23:03Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java'],"DERBY-4631 Wrong join column returned by right outer join with NATURAL or USING and territory-based collation

Javadoc fix


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341266 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7fd0c6ef96372e2612d3d189ee3dac0aae44f35b,2014-04-23T12:07:02Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTableConstantAction.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_Sequence.java']","DERBY-6542: Add catalog support for using sequence generators to implement identity columns; commit derby-6542-01-ab-catalog.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1589379 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0acf7976c436fa24cd3b9825286fa2f96adeb350,2012-09-27T14:43:23Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java']","DERBY-672: Allow aggregates on user defined types.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1391034 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
031e59cfbf6a6ea32cd83be5d9c3ca14f155d2d0,2014-06-19T09:44:15Z,['java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java'],"DERBY-6227: Distinct aggregates don't work well with territory-based collation

Make the duplicate elimination use the DataValueDescriptors directly instead
of converting the values to String objects first. This ensures that the
collation rules of the database are used to compare the values, and those
rules may be different from those used by String.equals().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603793 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1fa09cea36074f094878c9d2cbfe3cc91c834698,2014-04-23T12:44:23Z,"['java/engine/org/apache/derby/iapi/services/io/FilePermissionServiceImpl.java', 'java/engine/org/apache/derby/iapi/services/io/FileUtil.java']","DERBY-6521: Improve error handling when restricting file permissions

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1589396 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
eff916922b62119e95c148976b3f038d1e402106,2012-05-16T17:45:35Z,"['java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-5749 Implicit cast of variable length values, e.g. as arguments to stored methods and generated columns values, silently truncate if too long

Patches derby-5749b (stored procedures and functions) and
derby-5749-2b (generated columns).

Quote from releaseNote.html attached to the issue:

Summary of Change

SQL now does correct checking of the length of variable strings in
these two cases:

    Arguments to stored procedures and functions
    Values assigned to generated columns

Previously, if the actual value was longer than the datatype of the
argument or column to which it was assigned, Derby would silently
truncate the value and ignore the truncation. The SQL standard
requires a truncation exception be thrown.

Derby now throws an SQLException with SQL state 22001 in these cases.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1339281 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9ef6c29f3895e5f16f1e0b8299d847c425ff88a2,2012-08-09T05:23:11Z,['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java'],"DERBY-5240 (Log Operating system information to derby.log on boot)

Adding following piece of information into derby.log for OS right after the existing info about JVM
OS name=XXX 
OS architecture=YYY 
OS version=ZZZ 




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1371041 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
aea21f6f553b3cb607a1064db54a637904bf3ad7,2012-09-17T05:40:16Z,['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java'],"DERBY-5927: Add utility methods to query state of URL attributes in EmbedConnection

Added static utility methods for improved readability.

Patch file: derby-5927-1b-isset_istrue.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1386480 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
043a571125a755cf49cf2635f59d5a9a7cb2aa83,2012-08-06T17:27:42Z,"['java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSetOpResultSetStatistics.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5879: Various changes to messages to give translators more context.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1369889 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
63574ff9a1f3f77426d27c79027b002a7b74b007,2014-03-04T08:32:59Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6488: Get rid of the EmbedSQLException class

Remove the newEmbedSQLException methods, since they don't produce
EmbedSQLExceptions anymore, and use the SQLExceptionFactory methods
instead.

Add a Throwable parameter to seeNextException() so that the root cause
will be shown when printStackTrace() is called on the top-level
exception.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1573934 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7043754f6419dda94fba1d4236660ed42c95637a,2013-06-17T10:15:48Z,['java/engine/org/apache/derby/iapi/error/StandardException.java'],"DERBY-6253: Fix javadoc warning

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493708 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
531b4694839af03f446dd6593fc28e8220e8e19a,2014-01-06T10:06:10Z,"['java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTRIGGERSRowFactory.java']","DERBY-5866: Triggers fire out of order

In order to avoid ambiguities around switch from daylight saving time
to standard time, and other time zone changes, store the trigger
creation timestamps in Coordinated Universal Time (UTC) instead of the
local time zone.

Only use UTC if the database has been upgraded to 10.11 format, so
that the change won't cause problems on downgrade.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1555703 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6f49e16208c957fed223e91bc80f4840b05de879,2014-09-17T02:11:55Z,['java/drda/org/apache/derby/impl/drda/ClientThread.java'],"DERBY-6112; SSL Test (and network server )  can hang if serverSocket.accept() fails for something other than an IOException
   Changing the IOException to an Exception will prevent a hang/OOM.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1625453 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
d57ff1756d3c728bdefaf61b255f67a22c6c371b,2015-08-06T13:47:16Z,"['java/client/org/apache/derby/client/am/SQLExceptionFactory.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/shared/org/apache/derby/shared/common/error/DerbySQLIntegrityConstraintViolationException.java']","DERBY-6803: Change Sqlca and SqlException to call MessageUtils

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)

This patch modifies the code in the client libraries
which analyzes the error or exception information in
the sqlerrmc message data, to use the new features of
the MessageUtils shared code to decode the message format.

In particular, the code can now locate and decode the
arguments as well as the message id, and therefore can
include those arguments when constructing a custom
Derby-specific subclass of SQLIntegrityConstraintViolationException.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1694492 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
e47763a7a120574151f5a60385beaef48411de8a,2015-08-21T14:39:07Z,['java/client/org/apache/derby/client/am/Sqlca.java'],"DERBY-6803: Change Sqlca and SqlException to call MessageUtils

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)

This change removes the redundant definition of the
sqlerrmc message delimeter from Sqlca in favor of the
shared definition of that constant available in the
new MessageUtils class.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1697005 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
f52a901addd8a1c1306a479d2c4071d9be441958,2012-07-25T16:37:54Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java'],"DERBY-4279: Statement cache deadlock 

Modified ResultColumnList.generateHolderMethod to only take a lock when
obtaining row template(s) if the data dictionary is in DDL_MODE. The lock that
used to be obtained was a CIS lock/latch.
The purpose of this change is to avoid the deadlocks that have been observed in
some scenarios when statements are being compiled or recompiled.

Patch contributed by Brett Wooldridge (brett dot wooldridge at gmail dot com).

Patch file: patch4279_2.txt


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1365661 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
29fe9b7f61df2d9d26b6386a3eeaa661b821b6f3,2012-07-03T04:04:33Z,['java/client/org/apache/derby/client/net/NetPackageReply.java'],"DERBY-5828: Remove unused methods in NetPackageReply class

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

This change removes the unused parsePKGNAMCT method in NetPackageReply.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356568 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
c35e4f0abcfa5aadcbb502ef7eb39ddc95f3320e,2013-01-24T15:05:34Z,['java/tools/org/apache/derby/impl/tools/ij/xaHelper.java'],"DERBY-5955 DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-make-tests-run-03. This makes the regression tests
work on CP2. Also, is updates the DataSourceSerializationTest for
10.10 with serialized data sourced for existing and the new
datasources.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1438035 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
da7973c39cf04670667dcb8dbea1739cdeff6072,2013-04-22T14:41:38Z,"['java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java']","DERBY-6166: Encapsulate the list of service properties.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1470551 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
89e145b786c4e3050e4a52b680b99ccfabf2cb7c,2013-05-24T12:05:15Z,['java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Fix unchecked warning in GroupedAggregateResultSet by changing the type
of the distinctValues field from HashSet[][] to List<List<Set<String>>>.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486028 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
314a19ac8bb51ab665c4e72961950ebd69d8bcba,2015-01-13T06:37:08Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6725(Add a system function which returns the name of the database.)



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1651284 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
1cb370904504cc091f0c9edf35880bf479b95062,2013-07-26T08:29:06Z,['java/engine/org/apache/derby/impl/sql/compile/Predicate.java'],"DERBY-6304: Remove unused methods in Predicate

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1507211 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
af5936c8577a2e8dadd492b8e7a4fb1fcbf4ef2e,2014-10-31T16:14:02Z,['java/engine/org/apache/derby/impl/store/raw/data/UpdateOperation.java'],"DERBY-5165

Update code to reclaim locks on prepared but not committed XA transaction
update locks on recovery reboot following crash.  Enable checked in test
that demonstrated the bug, which was verified to fail before the change
and pass after the change.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1635803 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
7e538ec7a418e7614aafa3d7faed98341a59b8bd,2014-06-30T13:04:24Z,"['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-590: Add checks for legal field names for Lucene indexes; commit derby-590-32-aa-vetFieldNames.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1606719 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
38c638d9487035ba6d57b1e84cc32457ee2b3d8a,2013-06-12T08:29:25Z,"['java/engine/org/apache/derby/iapi/services/info/JVMInfo.java', 'java/engine/org/apache/derby/impl/io/DirFile.java', 'java/engine/org/apache/derby/impl/io/DirFile4.java', 'java/engine/org/apache/derby/impl/io/DirStorageFactory.java', 'java/engine/org/apache/derby/impl/io/DirStorageFactory4.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java']","DERBY-6213: Deprecate support for Java 5 and CDC

- Remove checks for the JVMInfo.J2ME constant

- Move functionality from DirStorageFactory4 to the base class

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492111 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4ecfb0ef5e0a8f80fa2065f7ef45404575950399,2012-11-09T12:25:31Z,"['java/engine/org/apache/derby/iapi/types/BinaryDecimal.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLInteger.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/SQLRef.java', 'java/engine/org/apache/derby/iapi/types/SQLSmallint.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/types/SQLTinyint.java', 'java/engine/org/apache/derby/iapi/types/UserType.java', 'java/engine/org/apache/derby/impl/store/access/StorableFormatId.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTree.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2I.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java']","DERBY-2920: Share code between readExternal() and readExternalFromArray()

Provide a default readExternalFromArray() method that simply forwards
calls to readExternal() in the DataType class. Remove the method from
sub-classes where the readExternal() and readExternalFromArray() methods
are identical.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1407432 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fcc3580048e6e07d5299a38e52db60134d1432fc,2013-05-28T07:09:56Z,['java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Remove the @SuppressWarnings(""unchecked"") annotation from
BackingStoreHashtable and introduce a specialized sub-class of
ArrayList to make the casts type safe.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486782 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b0902f1454da1a7e2e2523e19a8a0cbdc6860b77,2012-05-09T16:11:08Z,"['java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java']","DERBY-5565 Network Server should reject client connections that are not Derby  Network Client.

We now reject all PRDID's that do not start with DNC.
The protocol tests have been changed to use the DNC10090 PRDID instead of TST01000. This actually alters the code path where there is slightly different behavior in later derby client versions, so that we have to skip an additional dss on connect for the diagnostic information.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1336268 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
29f83260ad648eabfdbda8f60b3be274f3ac4be0,2013-09-26T07:48:06Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-6351: Syntax error on equal transition table name and correlation name in statement trigger

Change how CreateTriggerNode.bindReferencesClause() checks for the
lack of a correlation name. Instead of checking it indirectly (and
unreliably) by seeing if the table name matches the base table name,
check directly if the correlation name is null.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1526406 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a6d25cd5fc407b731bdd4819773da60d3e3f05b9,2013-05-24T08:12:49Z,"['java/engine/org/apache/derby/impl/sql/compile/CollectNodesVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Generify CollectNodesVisitor so that the SuppressWarnings annotation
on its visit() method can be removed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485961 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2be230feda197d92e28cbbbaa02660c30ab729b1,2013-01-08T14:10:44Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-4855: Fix targets in distribution links in the template used by the ReleaseNotesTransformer tool.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1430291 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
69cf74986d04016b3a1c27815e6b854a09cce19b,2013-11-01T09:27:14Z,['java/drda/org/apache/derby/drda/NetworkServerControl.java'],"DERBY-5908: Fix incorrect URLs for network shares. Patch contributed by Kristian Waagan

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537862 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
abb2084ecbd01f2535dddf6b03263e82913fa857,2014-06-09T17:01:40Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-6602: Make the lucene plugin handle null keys; commit derby-6602-01-aa-handleNullKeys.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1601440 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ec600145775548ecaabe14fb77068d8e53baba65,2011-11-24T08:49:52Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection30.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatementControl.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/ExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory.java', 'java/engine/org/apache/derby/jdbc/Driver20.java', 'java/engine/org/apache/derby/jdbc/Driver30.java', 'java/engine/org/apache/derby/jdbc/Driver40.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/XAStatementControl.java']","DERBY-4845: Improve the dependency tracking for our build targets

Don't use impl.jdbc.Util from the iapi.jdbc package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1205753 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
55720b3940302cdafed66ffa251d67e876a9626f,2014-07-11T14:41:29Z,"['java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java']","DERBY-6617 Silently swallowed SecurityExceptions may disable Derby features, including security features.

Patch derby-6617-2. With reference to the list of issues mentioned in the JIRA, the following
""silent swallows"" are addressed with this patch:

* FileMonitor PBgetJVMProperty Catch java.lang.SecurityException 1 line 183
* FileMonitor PBinitialize Catch java.lang.SecurityException 1 line 120
* FileMonitor PBinitialize Catch java.lang.SecurityException 1 line 157

These are not addressed in code yet:

  BaseMonitor readApplicationProperties Catch java.lang.SecurityException 1 line 1360
  BaseMonitor runWithState Catch java.lang.SecurityException 0 line 280
  FileMonitor createDaemonGroup Catch java.lang.SecurityException 1 line 89

A new test (MissingPermissionsTest) has been added to verify that we
get errors in either derby.log or on the console's standard error
(depending on what's possible) if we see a SecurityException in the
former ""silent"" swallow location.

In the case of FileMonitor line 157, the boot fails so we show the
error on the console (i.e. standard error). In order for that to
happen, we added a flushing of the temporary in-memory error log,
cf. added call to dumpTempWriter if we fail BaseMonitor#initialize in
console.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609717 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
5899871ea47b91c2ce4ce9862ec2a906f80c69aa,2013-02-20T22:57:03Z,['java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java'],"DERBY-5679

just an improved comment.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448457 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
54a46498119e425108bc72deeb43e8ef4e1bbdbe,2013-04-19T12:11:47Z,['java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java'],"DERBY-6189: Fix NPE involving rollback of temporary table.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469802 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b215dfd0cf1a1d5bdd711a4f3bf26957f3b292b4,2012-10-19T18:17:55Z,['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java'],"DERBY-672: Add tests for precision mismatches when using user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400208 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9a0cdf1f8cd16526b16733b28ea0b8a498ba530c,2013-05-14T15:40:24Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientPooledConnection40.java', 'java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/am/CachingLogicalConnection40.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement40.java', 'java/client/org/apache/derby/client/am/ClientCallableStatement42.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement40.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement42.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement40.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement42.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/LogicalConnection40.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement42.java', 'java/client/org/apache/derby/client/am/SQLExceptionFactory.java', 'java/client/org/apache/derby/client/am/SQLExceptionFactory40.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData40.java', 'java/client/org/apache/derby/client/net/NetResultSet40.java', 'java/client/org/apache/derby/client/net/NetResultSet42.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientDriver40.java']","DERBY-6213: Deprecate support for Java 5 and CDC

Build network client against Java 6 libraries.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482405 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8bef59d404c84b3288e6b86afb8328721ac31cf1,2014-09-05T07:51:25Z,['java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java'],"DERBY-6724: NPE if insert statement needs recompilation after having fired a trigger

Allow InternalTriggerExecutionContext.cleanup() to be called more than once.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1622631 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
39e20ff22f532bbbe3cdfc1d58d695cdf502bf8c,2014-05-15T08:34:39Z,['java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java'],"DERBY-6577: Quantified comparison returns wrong result in CASE, COALESCE, IN and BETWEEN

ValueNodeList.preprocess() should update the list with the rewritten expressions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1594816 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9a9d6589d26973d4b4764e885ecc65b447337ced,2014-03-03T19:26:13Z,"['java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java']","DERBY-6434: Don't require privileges implicitly added by SELECT-driven INSERTS; tests passed cleanly on derby-6434-05-aa-selectDrivenInserts.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1573686 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5cac7553c7c249f82d62775955423a6b230240d0,2012-06-25T19:58:07Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-5688: Fix template text for MD5 links in release notes transformer.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1353718 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
012a4edf7c5f670985a17974121a245ae90009db,2014-09-18T07:36:10Z,['java/client/org/apache/derby/client/am/ClientResultSet.java'],"DERBY-6737: CLOB retrieve exceptions after moving cursor around

Always fetch the row again from the server when moving the position of
a scrollable result set that contains LOB columns.

Without this fix, if one of the absolute positioning methods is used
(first(), last() or absolute(int)), and the old position is the same
as the new position, the result set will use the values it already has
for the row on that position. Any locators will have been released,
though, so accessing LOBs in the row will fail with 'invalid locator'.

By fetching the row again from the server, we get a fresh and valid
locator for the LOB columns in that row.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1625904 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
398a04307c6b4cda51ce5e553da17935ad9c3c8a,2012-02-02T22:44:46Z,['java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java'],"DERBY-5567 AlterTableTest#testDropColumn fails: drop view cannot be performed due to dependency

When a view (b) is defined on another view (a), dropping a column in
the base table can lead to both view being invalidated. This patch
(DERBY-5567-1) fixes a problem in the logic:

Depending on the order in which dependencies of the base table column
are registered, the invalidation will happen either view a or view b.
If it happens on view a first, this view in turn will try to
invalidate view b (since that depends on view a), but with the
DROP_VIEW action which fails. The patch changes this recursive
invalidation to use the original action, e.g. DROP_COLUMN which will
allow dropping the dependent view (dropping a column is allowed to
cause cascading drops of dependent views).


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1239898 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f2fad755786fe08bf2e65632d2b3bb1e17f32990,2013-05-17T16:52:52Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ColumnDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DefaultDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DependencyDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/FileInfoDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/GenericDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PrivilegedSQLObject.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SchemaDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SequenceDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SubConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UniqueSQLObjectDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UniqueTupleDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/RoleClosureIteratorImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CollectNodesVisitor.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java']","DERBY-6213: Generify impl/sql/catalog and impl/sql/depend.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1483911 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b7d90735b810e03d78391d7ea14d7adecbc53fba,2012-06-14T18:25:03Z,['java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java'],"DERBY-5424 On z/OS testConnectWrongSubprotocolWithSystemProperty(org.apache.derbyTesting.functionTests.tests.tools.ConnectWrongSubprotocolTest)junit.framework.AssertiFailedError

Fix code and test to read and write to service.properties with a consistent 
encoding 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1350361 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
daaa04666ffa6ece04f5ab9a78caab0560352602,2013-07-03T08:33:12Z,['java/engine/org/apache/derby/jdbc/InternalDriver.java'],"DERBY-6285: Use factory method to create thread pool for timed login

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499257 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
953afd7067e35b3982ef2f2bb8703f6e814c4501,2014-08-25T17:19:30Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java']","DERBY-6680 Other jar files may need to be granted permission to read derby.ui.* properties

derby-6680-2. This patch moves the reading of the two system properties up into
NetworkServerControlImpl. Other usage of LocalizedResource is
unaffected and might still try to read those system properties,
i.e. as called from ij.

Removes the note about LocalizedResource in the policy template file.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620378 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
b046e716ceb502db5aa051b444271b7aaf37c72c,2013-04-29T20:27:44Z,['java/engine/org/apache/derby/impl/sql/GenericResultDescription.java'],"DERBY-6206: Cleanup mutability problem in GenericResultDescription.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1477320 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
31bea464f5e7f8b67b15ee02b379cc8ca5527798,2012-07-02T16:43:15Z,['java/engine/org/apache/derby/impl/sql/LanguageDbPropertySetter.java'],"DERBY-5838: Prevent users from changing the value of the DataDictionaryVersion property.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356333 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
abf8151ced3b29509be8abb9360ef8fccb98c0f1,2011-11-11T17:52:16Z,"['java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/impl/io/DirFile4.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer4.java']","DERBY-5498 ClosedByInterruptException in AuthenticationTest

Patch d5498b plugs a hole in the handling of NIO channel closures due
to interrupt in DirFile4#getExclusiveFileLock.
 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1200995 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
45da2f58ad14179d96ad5d7951762cc36e663a36,2014-06-02T22:36:14Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RISetChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6576 A immediate Fk constraint blows up iff its referenced PK is deferred and we modify a duplicate key column

Patch derby-6576-forbid-deferred+cascade-set-null-1. It simplifies the
code of the previous patch for thi sissue that handles RESTRICT and NO
ACTION in combination with a deferrable primary key. It also forbids
CASCADE and SET NULL of the target primary key is deferrable, at least
for now until a satisfactory implementation can be found. Test have
been added for the new cases.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1599383 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3e293c2435ff52a91169f8ec8f555c0b83fbec2c,2014-03-07T10:34:25Z,"['java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-4403: Disallow subqueries in the GROUP BY list

Queries that were grouped by subqueries used to fail with a
NullPointerException or an assert failure. Make them fail with a
proper syntax error instead.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1575226 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e6ea6446ed9a9f6363ba9b682536f0db6c5e1e61,2013-08-26T12:57:04Z,['java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java'],"DERBY-6314: Upgrade from 10.10 fails with ClassCastException

Make sure stored plans for metadata queries are cleared the same
way as trigger plans during upgrade, so that upgrade doesn't fail
if the format of the old metadata plans cannot be read by the new
version.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1517533 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
28f8292610de77f669aef987d9cc1b66a5aa137b,2011-11-21T21:21:39Z,"['java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java']","DERBY-5501 Subquery is only allowed to return a single column - When using derby with hibernate (or JPA) queries are created per JPA spec. For tables with multi-column PK, subqueries are created with two columns in select clause.

Patch derby-5501-3 lift the restriction that the select list in a
[NOT] EXISTS subquery may only contain ""*"" or a single column. This
implements SQL feature T501 ""Enhanced * EXISTS predicate"".



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1204712 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
586ae9de73d7861cd5c26b8749d2984861a07221,2013-12-12T20:50:37Z,['java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java'],"DERBY-5196; Correct the layout of log.ctrl as described on the Derby web site
   fixing the header in the source file


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550525 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
46e89a99d1651323c61d3be4b9f92fcb3d4bf4bb,2012-08-13T12:54:04Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterMetaData30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterMetaData40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-5880: Move java.sql.Wrapper implementations to base classes in embedded driver

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1372403 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
69884a3304fa81afc39bea482a4211937eb6be49,2011-12-19T16:25:55Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-866: Fix javadoc problem introduced by revision 1220807.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1220828 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
23643e8a3660f8bfcad0d7ac156d3490a7dd65f9,2013-06-10T15:13:05Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6256: Commit derby-6256-02-aa-allowParentTags.diff, allowing XmlVTIs to inherit columns from outer xml elements in which the primary row element is nested.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1491490 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5107349bda75befc505c8d9d18b356ac26f40f27,2012-01-19T13:51:13Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/jdbc/AuthenticationService.java', 'java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/iapi/services/monitor/ModuleFactory.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/SpecificAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","First version of NATIVE authentication service, including first tranche of tests for it.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1233377 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
f54263274562543167f266652f90031fd4ff1482,2012-11-26T13:05:33Z,"['java/engine/org/apache/derby/iapi/reference/ClassName.java', 'java/engine/org/apache/derby/iapi/services/compiler/ClassBuilder.java', 'java/engine/org/apache/derby/iapi/services/compiler/MethodBuilder.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCMethod.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstantActionActivation.java']","DERBY-5947: Factor out common code from generated classes

Move execution count from generated class to GenericPreparedStatement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1413586 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8ab3fa6dde0979bc580fd2bf77cd4856347cc831,2012-06-11T12:30:29Z,['java/tools/org/apache/derby/impl/tools/ij/xaHelper.java'],"DERBY-5803: Make error handling in xaHelper more explicit 

Make error handling method return an execption and raise it explicitly.
Note that the method may still throw runtime exceptions.

Patch file: derby-5803-1a-explict_throw.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1348818 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
29136120613dd82122c3d7bc2ce51bde1d2d215f,2013-01-30T03:46:07Z,"['java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedSimpleDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-javadoc, which updates the javadoc with a single line
usage advice at the top of the javadoc for all the data sources, and
also adds description of the new data sources to the jdbc package's
javadoc. Removed ClientBaseDataSource from the public api, added
adding ClientDriver40 to the jdbc4 instead of ClientDriver.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1440264 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
94388c5ad367d9357cee4e0d07b42107b77a8cfb,2012-05-18T06:03:23Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-5746: Minor refactoring of DataDictionaryImpl.getSetAutoincrementValue 

Add debug asserts for two cases where the return value of
ConglomerateController.fetch is ignored (primarily for consistency with other
cases).

Patch file: derby-5746-2a-assert_on_fetch.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1339986 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
f26c60c74666fce3053f41341b6c1bcb09f802b9,2013-01-29T13:14:39Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/BatchUpdateException.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/Utils.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java']","DERBY-6000: Add the JDBC 4.2 large update methods to the client implementation of Statement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1439883 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4cedf31f836a56771d19284970ebc1e41ebde2d7,2014-05-10T13:42:43Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Change the special NO_CEILING value from 0 to NULL for the scoreCeiling argument to the Lucene query table function; commit derby-590-30-aa-nullableScoreCeiling.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593701 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1c42a9373424fee8c5b0d3112819b73ac8e4db38,2013-12-05T13:17:54Z,['java/engine/org/apache/derby/impl/sql/compile/TableName.java'],"DERBY-6362: CHECK constraint uses wrong schema for unqualified routine invocations

Part 2: Fix offset of qualified table names. Their begin offset
pointed to the beginning of the table name token, but should point to
the beginning of the schema name token if they have one.

Also leave begin and end offset unspecified (-1 implied) for some
synthetic table name nodes that previously set the offsets to 0
explicitly. This makes it easier to tell whether they are synthetic
later.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1548128 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9700792cdc71ae8b84958b9bd9934a9c8823d071,2012-10-05T08:40:58Z,['java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java'],"DERBY-5937: File handle is leaked when a Slave replication is shutdown with failover=true

Recovery should close current log file before opening a new one.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1394407 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3bbf7e286891618068ba350b00d7ba61de179133,2012-03-05T12:05:16Z,['java/drda/org/apache/derby/drda/NetServlet.java'],"DERBY-5639: Minor code cleanup for NetServlet

Removed the unused 'request' parameter from several methods.

Patch file: derby-5639-1a-removed_request_param.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1297016 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
78c2db1dfb013500d6ec709df5384b9ade7f002a,2012-03-20T11:04:13Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/store/access/FileResource.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/RFResource.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_Jar.java', 'java/tools/org/apache/derby/tools/dblook.java']","DERBY-5357 SQLJ.INSTALL_JAR shouldn't use identifier as file name

Since SQL identifiers can contain arbitrary characters, it is not safe
to use them as is as part of a file name. Trying ot map parts of the
name by excluding unsafe characters leads to a chance of name
collision. So, we have changed the naming altogether.

This patch, derby-5357-with-tests-4, changes the name (and location)
of the jar files stored in a database. The name is now based on UUID,
and no subdirectories under the directory ""jar"" are used: all
jar-files reside directly in the ""jar"" database directory, and the
name is of the form

<Derby uuid string>[.]jar[.]G[0-9]+

where <Derby uuid string> has the form hhhhhhhh-hhhh-hhhh-hhhh-hhhhhhhhhhhh
where h id a lower case hex digit, and the suffix "".G[0-9]+"" is the
version number as before.

The format is changed on hard upgrade, cf tests in Changes10_9.

Also, dblook has been updated to cater for this change.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1302836 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
2db96c55e9d3a5691bb39f7ac308fc3c1f602682,2014-07-29T12:38:16Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLSingleTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java']","DERBY-6665 Violation of deferred constraints not detected when conglomerates are shared

Patch (derby-6665-dhw-dont-share) to fix missing logic to exclude
deferrable foreign key constrants form sharing supporting index. Adds
repro tests to ForeignKeysDeferrableTest.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1614327 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
152986e7386f5c5afdc42692e2f694427831cc2e,2012-01-12T10:50:54Z,['java/engine/org/apache/derby/jdbc/XATransactionState.java'],"DERBY-5562: A read-only XA transaction that has a timeout never has the timer canceled when the transaction is complete

Cancel the timer when a read-only transaction is prepared and implicitly committed.

Based on a fix contributed by Brett Bergquist.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1230480 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
adbd39fc7485d000b57687d7a6299dcb0781fd0b,2014-07-03T09:52:38Z,['java/engine/org/apache/derby/impl/services/reflect/ReflectLoaderJava2.java'],"DERBY-6621: Reduce the visibility of more classes and methods

Make ReflectLoaderJava2.loadGeneratedClass() package-private.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1607575 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b4cda60309bc30086f5e19dabc68ca31f6e136ac,2013-10-28T20:37:34Z,"['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java']","DERBY-6378 OFFSET/FETCH NEXT ignored when query is enclosed in parentheses

Patch derby-6378-4.

To address the required generality of several layers of nested
multiple clauses allowed by SQL, this patch introduces a stack
mechanism for order by and offset/fetch clauses, factored out into
ResultSetNode#QueryExpressionClause (nested class). From the javadoc
for that class:

For ease of handling order by clause, offset clause and fetch
first/next clauses in subclasses. Clauses on the same nesting level
have the same index in the lists, so at any level, any of the lists'
elements may be empty. For example, (select * from t order by a fetch
next 5 rows only) order by b would have

            obl[0] = ""order by a"",
            offset[0] = null,
            fetchFirst[0] = ""next 5 rows""
and
            obl[1] = ""order by b"",
            offset[1] = null
            fetchFirst[1] = null

When starting a new level, always remember to do a push() before
adding clauses via
setOffset(org.apache.derby.impl.sql.compile.ValueNode),
setFetchFirst(org.apache.derby.impl.sql.compile.ValueNode),
setOrderByList(org.apache.derby.impl.sql.compile.OrderByList) and
setHasJDBCLimitClause(java.lang.Boolean).

Added tests to OrderByAndOffsetFetchInSubqueries in #testDerby6378,
running regressions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1536507 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
01c7acbe13e4045a0f7c6e239a7864c24b97b2cf,2012-06-19T13:49:54Z,['java/engine/org/apache/derby/diag/SpaceTable.java'],"DERBY-5554: Add a trailing tableid column to the SPACE_TABLE vti.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1351714 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c604fffb925467c94c824f663b4ee7097320f5bf,2011-11-30T20:58:23Z,['java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java'],"DERBY-5096 DisconnectException: ""Connection was refused because the database DB was not found"" when 
creating db for first time

Change to unconditionally setCononicalName after the database directory is created.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1208775 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
5ae7bc1026c1ab31bf1067f4c0448b0fd5366698,2013-06-28T13:32:54Z,['java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java'],"DERBY-673: Get rid of the NodeFactory

Followup fix to patch derby-673-typesafe-lists-2. The patch introduced
a bug in FromSubquery: wrong loop upper bound. Roll back that change.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497767 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
2a4654bba0315686b7569e5365b32c78cf111442,2013-07-13T15:02:42Z,"['java/engine/org/apache/derby/impl/sql/execute/AnyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/BulkTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/CurrentOfResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashTableResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MaterializedResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MultiProbeTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NestedLoopJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NestedLoopLeftOuterJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NormalizeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/OnceResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowCountResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScrollInsensitiveResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SetOpResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SortResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UnionResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/WindowResultSet.java']","DERBY-6216: XPLAIN feature does not work, gives XCL16: ResultSet not open

This change adjusts the implementation of the explain-only mode feature,
which is enabled via syscs_util.syscs_set_xplain_mode(1).

Prior to this change, the implementation short-circuited the open() method
of the ResultSet classes, causing the execution engine to terminate
immediately because the result sets were not open.

This change takes an alternate approach, suggested by Knut Anders: the open()
is allowed to proceed normally, but we short-circuit the getNextRow()
method of the ResultSet classes. This way, the result sets all appear to be
normal result sets, open and ready for business, but they do no work and
always produce an empty result.

Then, at the end of the execution, the statistics are gathered. They show
that no work was done, but they contain information about the overall ""shape""
of the query plan (which result sets were constructed, and what the overall
result set tree looks like).

We also discovered that we were completely missing regression tests for the
explain-only feature, so this change adds a handful of regression tests,
including an IJ-based test, a simple embedded query, and a test that verifies
that explain-only mode can be turned on and off between executions of a
prepared query.

More testing would clearly be beneficial, but this should at least give us
a feature that basically works.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1502795 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
7b9e6859859a990d1edf93b1aaf10ee24ef81acb,2014-04-22T08:02:26Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-6543: Syntax error when reference to transition variable has whitespace around it

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1589036 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1a58030d62478e73f58d0e9645f4cc8f245111f9,2013-10-01T08:04:20Z,"['java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java']","DERBY-6357: CREATE TRIGGER doesn't detect all illegal references to SESSION schema

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1527963 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
99ae840866cfb8d1619fa64d0c15ed9f02adcaa7,2013-06-20T14:38:48Z,"['java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection40.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection40.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java']","DERBY-1984: Re-factor JDBC classes to remove support for JDBC 2

Remove version-specific sub-classes of EmbedPooledConnection and
EmbedXAConnection.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495024 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
92dc6b812a2645ca665c0f3af5f48fbcedc76311,2012-05-02T16:19:41Z,['java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java'],"Added a code comment.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1333096 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
3c065e9bd1eadad7335626a22dbb4ac1c7baac8f,2012-07-05T15:41:16Z,['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java'],"DERBY-5554: Forbid the joining of VTIs to one another in the FROM list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1357692 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
edcd5111a24e45079be28f7097aad4fc9186338a,2014-09-22T15:16:24Z,['java/engine/org/apache/derby/impl/services/reflect/ReflectClassesJava2.java'],"DERBY-6654: Require that generated code live in the org.apache.derby.exe package; commit derby-6654-01-aa-requireCorrectPackage.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1626806 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ca998af8fb8c7136a5957de18166a6ca925d9966,2012-03-06T09:20:06Z,"['java/engine/org/apache/derby/vti/StringColumnVTI.java', 'java/engine/org/apache/derby/vti/VTITemplate.java', 'java/engine/org/apache/derby/vti/VTITemplateBase.java']","DERBY-5635: Provide implementation for getMetaData() in VTITemplate

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1297396 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
25c1e7bc3b1d8801b2410e0fda41b541c23a5637,2013-03-08T22:05:09Z,"['java/build/org/apache/derbyBuild/splitmessages.java', 'java/client/org/apache/derby/client/am/SQLExceptionFactory40.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStoredProcedure.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory40.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/jdbc/Driver169.java', 'java/engine/org/apache/derby/jdbc/Driver20.java', 'java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedSimpleDataSource.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6094: Enforce login timeouts in the embedded driver and data sources.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1454600 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
508f8f6cf73cff347f9aeaf2ed5c76964e922d3f,2013-03-26T02:19:19Z,"['java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java']","DERBY-6125 Code clean up in client driver

Patch 2derby-6125-01-b; removes dead code and refactors a mutable
public static.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1460949 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
a37ea51466aef71e21e44778844177c6397587a3,2015-08-10T19:40:42Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5466: Raise a useful error when someone attempts to use DISTINCT with the statistics aggregates. Commit derby-5466-03-aa-distinctError.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1695154 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8c39c1c30655853ee29d6317a6cc1f4f5f112fe7,2014-03-17T17:37:58Z,"['java/engine/org/apache/derby/iapi/types/JSQLType.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java']","DERBY-6511: Convert primitives to wrapper types as appropriate when chaining functions; tests passed cleanly on derby-6511-01-aa-fixPrimitiveToWrapper.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1578479 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ea335da7476079fe7c556ee8695aaea583abfc94,2013-01-03T17:48:50Z,"['java/build/org/apache/derbyBuild/classlister.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/tools/org/apache/derby/impl/tools/optional/DBMDWrapper.java']","DERBY-6022: Add optional dbmd tool which creates wrapper routines for the DatabaseMetaData methods so that they can be invoked in queries.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428506 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e1c9e2b761b08e29f28c1ea5756346da8cc4b855,2013-07-08T06:16:16Z,['java/engine/org/apache/derby/jdbc/InternalDriver.java'],"DERBY-6167: Interrupt restarts clock for login timeout

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1500585 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4ce6a9b488aff11cc705a26c1ca30d61091a3ca2,2013-05-10T07:58:13Z,['java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java'],"DERBY-6212: NullPointerException when calling a procedure with sub-query as argument

Raise a syntax error instead of a NullPointerException if a sub-query
is given as argument to a CALL statement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480909 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2ad822f414b27104425edd8faaeac6bed9e36b99,2014-06-04T18:40:35Z,"['java/engine/org/apache/derby/impl/store/raw/data/AllocPage.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6504; change AllocPage.ReadContainerInfo to catch ArrayIndexOutOfBoundsException and turn it into Derby error.
   Adding error message XSDG4 to provide analysis info if this exception is hit


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1600417 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
67d855a1dba58b0e4f47110de88f3692ee38d0be,2014-05-07T19:31:05Z,['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java'],"Fix typo

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593124 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f3ade652da6361a22f6601c49eeda6e8a12b0d95,2012-08-07T19:18:00Z,['java/tools/org/apache/derby/impl/tools/dblook/DB_Trigger.java'],"DERBY-5839 (dblook run on toursdb fails on triggers with java.lang.StringIndexOutOfBoundsException in dblook.log)

We document that SYSTRIGGERS.REFERENCEDCOLUMNS is not part of the public API and hence that allows Derby to change underneath the behavior of the column. Prior to 10.9, this column only had information about columns referenced by UPDATE trigger. But, with 10.9, we use this column to also hold information about the trigger columns being used inside trigger action plan. This enables Derby to read only necessary columns from trigger table. But because of this change, it is not enough in dblook to check if SYSTRIGGERS.REFERENCEDCOLUMNS.wasNull. We need to also check if the string representation of that column is ""NULL"". Making this change fixes DERBY-5839




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1370446 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
7f3bcb486739425d7c66f3032f489208545b932a,2014-09-29T22:27:13Z,['java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java'],"DERBY-6722(GenericStatementContext.cleanupOnError() needs protection from later errors during statement cleanup.

Handle unexpected exceptions while preserving the original exception for debugging purposes.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1628331 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
d1ad6c975b076860aaec888713d29205f6fa7885,2014-01-15T20:26:05Z,['java/engine/org/apache/derby/impl/sql/compile/InsertNode.java'],"DERBY-6434: Don't make INSERT statements require USAGE privilege on the datatypes of generated columns; fix remaining problem described by DERBY-6433; commit derby-6434-04-aa-dontNeedPrivOnGeneratedColumnTypeForInsert.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1558559 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6f52e78a436ac3e815a16c6b14e2b61b7ea4d315,2014-06-02T09:45:45Z,"['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-2002: Case expression allows NULL in all parts of <result>

Require at least one expression with a known type (that is, not NULL or
a ? parameter) in the THEN and ELSE clauses of a CASE expression.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1599142 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f9a06892da20e79f82799d231cfd0c9b4e77ce32,2011-11-23T15:03:19Z,"['java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/PreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java']","DERBY-5459 Result set metadata are out of sync on client after underlying table is altered

Patch derby-5459-3. We now resend the result set metadata to the
client when the cursor is opened if the prepared statement gets
recompiled due to it being out of date when the server tries to
execute it (DRDAConnThread line 871). To detect this we introduce a
version counter which is incremented each time a statement is
(re)compiled and make a note which version's metadata gets sent to the
client as part of the explicit prepare. That version is compared with
the current version when we execute to make the decision whether to
resend metadata or not.

This also fixes DERBY-2402, a duplicate.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1205426 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7adbb9a9e129e9bf744fd97837775fd329739ef5,2012-02-23T09:31:05Z,['java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java'],"DERBY-5623: Loosen up synchronization in FileMonitor

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1292724 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a8f9739f28237cc81352a6987ff92ff03e3d5f6c,2013-06-20T12:32:02Z,"['java/engine/org/apache/derby/impl/sql/compile/TableName.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java']","DERBY-6211: Use schema-qualified names in plan summaries printed by the xml-based optimizer tracer; commit derby-6211-07-ab-useSchemaQualifiedNamesInSummaries.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494954 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
401072ff096573fdf8de953c0597af7c6a3d284a,2013-01-14T23:39:56Z,['java/engine/org/apache/derby/iapi/reference/Attribute.java'],"Fixed a comment typo.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1433218 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e8e1864a540ec5061e6769a53b9ebfe28df398da,2013-10-23T17:07:37Z,"['java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6320 Log a page dump to derby.log if ERROR nospc: nospc.U is returned to the user
This patch adds the ability to dump a page in an insane build, and adds 2 calls to do so in 2 outstanding nospc error cases. In those two cases a new user
level error is thrown and nests the nospc.U error so that we still know the
original stack trace where the lowest error was thrown.  
The patch passes all tests and the specific errors were hand tested, one of 
them using the test case filed in DERBY-4923 and in the other case just by hand forcing the codepath.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535075 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
fd584b02cf9232770eb109f69542e692cedf83f1,2013-05-28T15:02:54Z,"['java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-6213: Cleanup published javadoc for the Derby DataSources now that we have removed support for Java 5 and CDC.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486949 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bde481bd2c6a910703178426879ac2865d3bebbb,2014-07-30T23:56:16Z,['java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java'],"DERBY-6666 Deferred constraint validation fails with ""dead statement"" when query plan logging is enabled

Patch derby-6666c.

It removes this issue by adding push and push of the statement context
to the lcc before we execute the internal query to check for check
constraint violation. We had neglected to do this, which caused a
problem for the logging since the statement context should always be
properly initialized during execution.

This patch also adds a new test, derby6666 to
ConstraintCharacteristicsTest which fails without the fix in this
patch (equivalent to repro).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1614796 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f96fbeb240c14c95300115692104f165f515a881,2013-03-14T18:06:15Z,"['java/engine/org/apache/derby/iapi/db/OptimizerTrace.java', 'java/tools/org/apache/derby/impl/tools/optional/OptimizerTracer.java']","DERBY-6022: Add filename argument to the optional tool which turns off optimizer tracing, so that the trace can be dumped to a file.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1456579 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
63e09107058a04b1d4ab4396593a6b7af48e06b5,2012-10-17T17:57:59Z,"['java/engine/org/apache/derby/impl/sql/compile/CollectNodesVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-672: Forbid user-defined aggregates in GROUP BY clauses just as builtin aggregates are illegal there.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1399364 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e03c074514d193c8b6366ee750dfafa8f6e98096,2013-12-11T22:07:15Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-532 Support deferrable constraints

Patch derby-532-fix-drop-not-nullable. Fixes a broken predicate when
recreating the index when going from UNIQUE NOT NULL to plain UNIQUE:
the existing predicate missed the deferrable case, so the index was not
recreated.

Added a test case.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550284 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
71c8e86b3ab5d573761ea37a96a691cb361aa96f,2013-05-22T18:51:15Z,"['java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionControl.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnectionContext.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/CursorInfo.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericResultDescription.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CollectNodesVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowNumberFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/VTIDeferModPolicy.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/AggregatorInfoList.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLSingleTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerEventActivator.java']","DERBY-6213: Generify more classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485333 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c3f6b1be087031bd2e6344348bd2d4d4feeef14f,2013-09-17T12:56:19Z,['java/engine/org/apache/derby/impl/jdbc/Util.java'],"DERBY-6346: Dump wrapped Java exceptions to derby.log; tests passed cleanly on derby-6346-01-aa-logJavaException.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1524026 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5658baeaf825c8fbe287319d89538cbe06a788ac,2014-05-05T14:38:50Z,['java/optional/org/apache/derby/optional/lucene/DerbyLuceneDir.java'],"DERBY-590: Change the checked-in version of Lucene from 4.5.0 to 4.7.1; commit derby-590-29-aa-useLucene_4.7.1.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1592543 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
57f2b05c18ef54f30a30fd52d418cd9da6b3e3fa,2013-06-28T12:03:42Z,['java/engine/org/apache/derby/impl/sql/compile/PredicateList.java'],"DERBY-673: Get rid of the NodeFactory

Followup fix to patch derby-673-typesafe-lists-2. The patch introduced
an issue causing ConcurrentModificationException. Roll back that change.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497742 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e44d6245f49ae0cb1c5693277d6967cc13bc415a,2013-07-11T08:48:04Z,['java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java'],"DERBY-6267: Fix javadoc warning

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1502155 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fa87f1c03efeb780fa4ccfdc650ed79ecfc3d3f4,2013-03-14T07:29:28Z,"['java/engine/org/apache/derby/impl/store/access/CacheableConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java']","DERBY-5632: Logical deadlock happened when freezing/unfreezing the database

Stop using explicit synchronization on the conglomerate cache.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1456352 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8e352d60fa7b0eae8b95541f34af48a3be40dd84,2012-04-18T12:23:17Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceGenerator.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-5493: Fix correctness problem with sequences by introducing syscs_peek_at_sequence and simplifying the SequenceUpdater code.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1327471 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3a2ad96bbf2e41c72487b6545871d2f1f9787ded,2014-07-08T07:01:52Z,['java/engine/org/apache/derby/security/SystemPermission.java'],"Fix javadoc warnings.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1608674 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
40b723cf7bacce64be759031e7b1f3932316a012,2013-02-07T20:39:35Z,"['java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java']","DERBY-6000: Rename DatabaseMetaData.getMaxLogicalLOBSize() to getMaxLogicalLobSize().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1443712 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
23714700b4e906635af899db3851e92c42a990bf,2012-06-05T04:17:36Z,"['java/client/org/apache/derby/client/net/DynamicByteArrayOutputStream.java', 'java/client/org/apache/derby/client/net/EncodedInputStream.java', 'java/client/org/apache/derby/client/net/InputStreamUtil.java', 'java/client/org/apache/derby/client/net/PublicBufferOutputStream.java', 'java/client/org/apache/derby/client/net/Request.java']","DERBY-5786: Duplicate copies of InputStreamUtil and DynamicByteArrayOutputStream

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

In solving DERBY-4491, the InputStreamUtil and DynamicByteArrayOutputStream
classes were copied from org.apache.derby.iapi.services.io to create duplicate
copies of those classes in the org.apache.derby.client.net package.

Since the client uses only a small part of the functionality those classes
provide, this change modifies the client to use the PublicBufferOutputStream
which was present as a nested class within the EncodedInputStream class,
promoting the class into a top-level class to enable this use.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1346234 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
b4af06bb172dee4a06ac4e1ed7160c6348183bf0,2012-07-11T12:11:59Z,"['java/drda/org/apache/derby/impl/drda/ClientThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-5847: Clean up IDE warnings in DRDAConnThread

Silence warning about possible leak of reference to ""this"" from
constructor.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360137 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4b58cc07fb95805b67bd294ef75e9140ca7773f1,2015-07-11T16:25:21Z,"['java/engine/org/apache/derby/iapi/error/ShutdownException.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/context/SystemContext.java', 'java/engine/org/apache/derby/iapi/services/i18n/MessageService.java', 'java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/shared/org/apache/derby/shared/common/error/ShutdownException.java']","DERBY-6824: Refactor ShutdownException into shared code area

Having the ShutdownException as a common shared exception class offers no
benefit on its own, but it is an enabler for being able to share the
exception encoding/decoding routines between the network client and the
network server.

There should be no functional changes as a result of this patch, and there
are no new tests added. Subsequent projects intend to build on this change
to introduce functional enhancements and they will include tests for that.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1690384 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
c9ec6b98d90b335b3609f8d169cc072685a68865,2011-11-22T11:45:07Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java']","DERBY-4845: Improve the dependency tracking for our build targets

Get rid of a call to Util.notImplemented() from BrokeredStatement by
pulling the isClosed() method up from BrokeredStatement40,
BrokeredPreparedStatement40 and BrokeredCallableStatement40 to their
common super-class.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1204934 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f3c6217515c36cd50e767e72b2fbd21db4e49710,2012-09-03T11:13:31Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementGenericPermission.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_GrantRevoke.java']","DERBY-672: Adding GRANT/REVOKE support for user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1380202 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
44a867f867a2eef04dd70a72402cbb7a7b4b12d1,2012-07-17T12:13:47Z,"['java/stubs/jdbc3/java/sql/CallableStatement.java', 'java/stubs/jdbc3/java/sql/Connection.java', 'java/stubs/jdbc3/java/sql/DriverManager.java']","DERBY-5840: Update JDBC 3.0 stubs for Java 5

Some JDBC signatures were changed to generics between 1.4.2 and 1.5.0.
Update the stubs so that we get the same results when we compile against
the stubs as when we compile against Java 5 class libraries.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1362464 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ddc67070ac8b8d79dc75274f2f18ab561f7d0825,2013-10-10T10:57:58Z,['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java'],"DERBY-6371: DROP COLUMN looks in wrong schema when checking trigger dependencies

Fix another occurrence where the wrong schema is used. This occurrence
doesn't cause any problems currently, since it's only used for
parsing, and the problems wouldn't appear until one attempt to do
binding with the incorrect schema. Fix it anyway for consistency.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1530913 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
66527ec1a468b9eeb1d008c19d62b96bd446b332,2012-07-25T06:47:20Z,"['java/client/org/apache/derby/client/am/Blob.java', 'java/client/org/apache/derby/client/am/CallableStatement.java', 'java/client/org/apache/derby/client/am/Clob.java', 'java/client/org/apache/derby/client/am/ClobWriter.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/SectionManager.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/net/CodePointNameTable.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/Reply.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/drda/org/apache/derby/impl/drda/CharacterEncodings.java', 'java/drda/org/apache/derby/impl/drda/CodePointNameTable.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-5873: Avoid unnecessary allocation of Number instances in client/server

Replace explicit calls to constructors for java.lang.Number sub-classes and
java.lang.Boolean with valueOf() calls or with auto-boxing.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1365468 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9efa649289613c214813f678438088c1b5d86b46,2012-01-26T18:25:24Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-866: Add new upgrade test for NATIVE authentication and improve error raised when trying to read credentials in a database which hasn't been hard-upgraded to 10.9.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1236340 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7f17ba1a4e0e76bdd1aa0734b515ec5386e43824,2013-06-07T19:44:14Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6256: Commit derby-6256-01-aa-move-XmlVTI-into-product.diff, moving the XmlVTI into the vti package of the product.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1490799 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7f0f7751440bc8d28123d3ea9e93d8cce3095aa8,2013-04-04T01:12:55Z,['java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java'],"DERBY-6096 OutOfMemoryError with Clob or Blob hash join: DataTypeDescriptor.estimatedMemoryUsage() has no case for BLOB or CLOB so would underestimate memory usage for those types at zero 

Estimate BLOB/CLOB size at 10000 like other long types.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1464247 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
1725dd14b63de6717b2157e30242b1fce1fd8de1,2013-09-17T09:47:50Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/RowTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/StatementTriggerExecutor.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Add the WHEN clause syntax to the grammar and wire it together with the
existing partial code for the WHEN clause.

Make RowTriggerExecutor and StatementTriggerExecutor execute the WHEN
clause and use the result to decide whether the trigger action should
be executed.

Add some basic positive tests for the currently supported subset of the
functionality.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1523965 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
418e135af40d59f709f91ab8e87c7451d9c79019,2011-12-05T22:35:34Z,['java/engine/org/apache/derby/jdbc/EmbedXAResource.java'],"DERBY-1016; javax.transaction.xa.forget (Xid) raises XAER_NOTA exception instead of XA_PROTO on a prepared transaction
  patch contributed by Jayaram Subramanian (rsjay1976 at gmail dot com).


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1210686 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
02fcca3729ed28a4be5900f965da3f8413b4026e,2014-03-06T02:25:54Z,['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java'],"DERBY-6496: Fix NPE while loading optional tools; tests passed cleanly on derby-6496-01-ab-useClassFactoryContext.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574752 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
91405aff2fdbb312ba4b3a3348e286b1e73768b8,2013-06-14T15:39:24Z,['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java'],"DERBY-6263: Make the Visitor logic inspect ORDER BY, FETCH, and OFFSET CLAUSES. Tests passed cleanly for me on derby-6263-01-aa-visit-ignored-clauses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493123 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
17efc1624e1ab53955c3a725f6892c2b632883ba,2013-02-12T19:57:17Z,"['java/client/org/apache/derby/client/am/CallableStatement42.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement42.java']","DERBY-6000: Add new CallableStatement.setObject() overloads introduced by JDBC 4.2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1445327 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
89a66256b35c2c820177258a0de360ad446be198,2012-09-26T20:01:43Z,"['java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/data/RawContainerHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/log/LogFactory.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptContainerOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/InputStreamContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/ReadOnly.java']","DERBY-5792: Make it possible to turn off encryption on an already encrypted database.

A set of changes made in preparation of adding database decryption support.
These modifications should not cause functional changes.

Description:
 o DataFactory.setDatabaseEncrypted: introduced boolean flag to be able
   to tell the data factory that encryption has been turned off.
   Updated implementing method in BaseDataFileFactory
 o setDatabaseEncrypted: introduced second boolean flag to be able to
   tell the log factory that encryption has been turned off.
   Updated implementing methods in LogToFile and ReadOnly.
 o RawContainerHandle.encryptContainer: renamed to
   encryptOrDecryptContainer, added boolean flag to control crypto
   operation.
   Updated implementing method in BaseContainerHandle
 o BaseContainer.encryptContainer: renamed to encryptOrDecryptContainer,
   added boolean flag to control crypto operation.
   Updated implementing methods in RAFContainer and InputStreamContainer
 o EncryptData: renamed to EncryptOrDecryptData, added method
   decryptAllContainers, whitespace changes.
 o RawStore:
    - removed import
    - removed instance variable encryptDatabase
    - removed unused instance variable dataDirectory
    - renamed databaseEncrypted to isEncryptedDatabase
    - renamed configureDatabaseForEncryption to applyBulkCryptoOperation
    - made setupEncryptionEngines return a boolean: whether or not
      existing data must be transformed (applyBulkCryptoOperation)
    - simplified parts of the logic in setupEncryptionEngines
    - introduced isTrue/isSet for property sets
    - removed unused method privList(File)

Patch file: derby-5792-1b-boilerplate_and_preparation.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1390712 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
2782d722ba60a29b994e2453a0a18c561059d2df,2015-08-09T22:05:00Z,"['java/engine/org/apache/derby/catalog/TypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java']","DERBY-5466: Enable the new var_pop(), var_samp(), stddev_pop(), and stddev_samp() aggregates by wiring Scott's aggregators into the Derby bind logic. Commit derby-5466-02-ab-bindLogic.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1694918 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
271e7dd1c768307c9b4e86cc77446c066be9c439,2012-06-19T18:29:00Z,"['java/engine/org/apache/derby/diag/SpaceTable.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-5554: Add 0-arg constructor to SPACE_TABLE vti.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1351795 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5ea170fe8653213edeb11a12145a9b3384030b63,2012-05-15T15:44:38Z,['java/engine/org/apache/derby/catalog/SystemProcedures.java'],"DERBY-5762: Normalize casing of username inside NATIVE procedures.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1338760 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a2f00b4a3a7c213e2b2c09dba239e70b806d6d71,2013-07-11T18:26:03Z,['java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java'],"DERBY-6283 indexStat daemon processing tables over and over even when there are no changes in the tables in soft upgraded database.

Changed system to always drop orphaned stats during update statistics call.  

Without this change soft upgraded systems running on 10.8 or higher derby 
software, that had an orphaned statistic would spin forever in the index 
stat daemon due to the same problem fixed by DERBY-5680 for hard 
upgraded databases.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1502319 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
19aa0ac9fcf3b9999bf5fde677373bb31113b181,2013-07-25T11:35:34Z,['java/engine/org/apache/derby/impl/sql/compile/ValueNode.java'],"Java doc fix

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1506904 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
1ed2c9984c48870c8a111712fa7e0488337adef9,2013-02-08T17:21:37Z,['java/engine/org/apache/derby/diag/StatementCache.java'],"DERBY-6065: LockTable API link in the documentation is broken

Fix to javadoc for java/engine/org/apache/derby/diag/StatementCache.java.

Patch: DERBY-6065-code.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1444154 13f79535-47bb-0310-9956-ffa450edef68
",chaase3@apache.org,Camilla Haase
bf32514bd617d9fc6d68c1304c57d1e74d46c337,2014-07-10T16:50:34Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/db/ConsistencyChecker.java', 'java/engine/org/apache/derby/iapi/db/PropertyInfo.java', 'java/engine/org/apache/derby/iapi/security/Securable.java', 'java/engine/org/apache/derby/iapi/security/SecurityUtil.java', 'java/engine/org/apache/derby/iapi/sql/conn/Authorizer.java', 'java/engine/org/apache/derby/impl/load/Export.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericAuthorizer.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java']","DERBY-6616: Prevent applications from bypassing SQL authorization by directly calling system procedure entry points; commit derby-6616-01-ad-reauthorize.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609501 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d976a70c0ef867a0b0849e571900fa5de25250b2,2013-04-18T18:11:15Z,"['java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RFResource.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5886 FILE_CANNOT_REMOVE_FILE exception prints garbage. 

Added new messages to cover cases where no exception was available for
the second argument, and made text of those messages more specific to 
the actual usage.  Fixed the calls in RAFContainer.java to be consistent, and
still use original error.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469505 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
54655611dcf48b2f2e74ed42636162d74559c2fd,2013-08-23T07:16:58Z,"['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/types/DTSClassInfo.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/J2SEDataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/NumberDataValue.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/execute/AvgAggregator.java', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/tools/org/apache/derby/impl/tools/ij/util.java']","DERBY-6213: Deprecate support for Java 5 and CDC

Remove reflection code that guards access to the BigDecimal class,
which is now available on all supported platforms.

Remove J2SEDataValueFactory and move all functionality to the base
class DataValueFactoryImpl.

Remove initalization code for DECIMAL in DataValueFactory.boot(), no
longer needed since there is just a single implementation of the
DECIMAL type.

Make the parser represent DECIMAL literals as BigDecimals instead of
Strings.

Remove now unused methods in DataValueFactory for constructing
SQLDecimal values from String values.

Clean up references to CDC in comments.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1516715 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d7f41dde542ce3c94015778452ef5d7ca14d3668,2012-09-25T22:56:00Z,['java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java'],"DERBY-5933 SQL sorting error

Patch ""d5933-remap+test"", which fixes a problem in column reference
remapping in connection with flattening of a left outer join with a
base table. See the Javadoc for the new test case
JoinTest#testDerby_5933 for details.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1390205 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
2e57170bd821f8ec1a4cdb84fbfb64c45e6a0e91,2012-12-21T12:11:19Z,['java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java'],"DERBY-6017: IN lists with mixed types may return wrong results

Fix the case where all the constant values in an IN list get reduced
to a single constant after conversion to the dominant type. In such
cases, the remaining constant should be converted to the dominant type.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1424889 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0c5bc3acda255bb4c1a29675fd6ea12009ce1e28,2013-11-25T20:30:45Z,"['java/engine/org/apache/derby/catalog/IndexDescriptor.java', 'java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/SQLSessionContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/StatementContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java', 'java/engine/org/apache/derby/iapi/store/access/SortObserver.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/TabInfoImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/SQLSessionContextImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLSingleTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DeferredDuplicates.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MaterializedResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueIndexSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueWithDuplicateNullsIndexSortObserver.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeSort.java', 'java/engine/org/apache/derby/impl/store/access/sort/UniqueWithDuplicateNullsMergeSort.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-532 Support deferrable constraints

Patch derby-532-post-scan-4 implements basic support for deferred
constraints for PRIMARY KEY and UNIQUE constraints. Deferrable
constraints are not enabled by default yet; one needs to set a
property to try the feature: ""derby.constraintsTesting"".

This patch enables deferred constraints for:

    a) primary key constraints
    b) unique constraint with not nullable columns
    c) unique constraint with nullable columns

by new logic in insertion and sorts.

The patch includes relaxing the constraint at insertion and update
time, as well as adding a constraint to an existing table. 

Derby treats constraints a) and b) the same, and in the code these are
marked as ""unique"" when they are not deferrable (as in existing code).

Constraint type c) is currently marked as
""uniqueWithDuplicateNulls"". Insert/update of these is implemented in
the BTree by including the RowLocation of the base row in the set of
keys in the index row (DERBY-3330). This makes them trivially unique,
but there is an extra code path in BTreeController that checks
neighbor rows for duplicates, and only allows insertion if the key
contains a null. When adding a constraint to an existing table, these
are handled by a specially crafted sorter
(UniqueWithDuplicateNullsMergeSort).

The implementation of insert/update of deferrable indexes is based on
a similar approach, i.e. by backing with a non-unique index, and checking 
duplicates in the language layer, notably IndexChanger.

In IndexChanger, after inserting a row, we check if it is unique by
performing a scan of the BTree. A time-out here leads to a pessimistic
assumption that there is a duplicate. Duplicate key values are saved
until checking time (usually commit time), when a new scan is
performed to validate the uniqueness property.

[This means a) and b) if deferrable are no longer marked ""unique""].

Deferrable indexes are not shared.

If there are duplicates and we have deferred constraint mode (a
dynamic session property), we save the duplicate index row in a disk
based hash table (DeferredDuplicates#rememberDuplicate).

For a) and b), constraints which are deferrable are marked as
""uniqueDeferrable"" and ""hasDeferrableChecking"". Constraints of type c)
which are deferrable are marked ""uniqueWithDuplicateNulls"" and
""hasDeferrableChecking"". These marks determines the code paths
used. Note that existing indexes and non-deferrable constraint do not
get a new code path, which should preserve correctness and performance
of those.

Now, with these markers in place, deferral of checks happens in three
places:

    {{ IndexChanger#insertAndCheckDups}}

    {{CreateIndexConstantAction#executeConstantAction +
     MergeSort#compare and UniqueWithDuplicateNullsMergeSort#compare }}

    {{InsertResultSet#setUpAllSorts}}


The former is active for deferral under INSERT and UPDATE. The middle
when adding a deferrable constraint to an existing table, when we sort
existing rows detecting any duplicates. The last is used when importing
rows.

At transaction commit (1), or when the constraint mode for a deferred
constraint is changed back to immediate (2), we validate the
constraint (DeferredDuplicates#validate) by replaying the hash table
and scanning the index for the duplicate index rows to ascertain there
are none, or else we have an error: transaction or statement severity
respectively for (1) and (2).

The constraint mode is a SQL session level variable, and inside
routines (nested connections), we push this on the stack. This means
change of the constraint mode inside nested connections will be popped
on routine exit. If, as part of this, a constraint changes from
deferred to immediate mode, we also validate it for correctness. If
this fail, the transaction rolls back
We needed to do this from a newly introduced method,
GenericLanguageConnectionContext#popNestedSessionContext. This
pops the SQL session context.
That hook is called from GenericPreparedStatement#executeStmt. As a
part of this effort, we also renamed #setupNestedSessionContext to
#pushNestedSessionContext.

The patch also adds support for checking deferred constraints in
xa_prepare and xa_commit (.., true), cf. specification attached to the
JIRA issue.

Concurrency: if a transaction gets a lock time-out when trying to
establish if a row just inserted is a duplicate (another transaction
may have just inserted a row with a similar index key), we use a
pessimistics assumption and add that key to the set of keys to be
checked at commit time. If a key can't be grabbed then, a time-out is
thrown. We plan to add an optimized scan to avoid waiting for the lock
at insertion time, cf DERBY-6419.

The ""not enforced"" feature is not yet implemented in this patch.

Several new test cases been added to ConstraintCharacteristicsTest to
test these basic behaviors.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1545394 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
4394bdd1e21def171e722031402157269bbcbfeb,2015-07-30T21:28:02Z,"['java/optional/org/apache/derby/optional/api/SimpleJsonUtils.java', 'java/optional/org/apache/derby/optional/api/SimpleJsonVTI.java', 'java/optional/org/apache/derby/optional/json/SimpleJsonTool.java']","DERBY-6825: Add SimpleJsonVTI and helper functions to the simpleJson optional tool; commit derby-6825-02-aa-vti.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1693506 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
70516989758107f419c5dc7bde5cf7d5f75ad5f0,2013-05-28T19:12:29Z,"['java/stubs/felix/org/osgi/framework/AdminPermission.java', 'java/stubs/felix/org/osgi/framework/BundlePermission.java', 'java/stubs/felix/org/osgi/framework/FrameworkUtil.java', 'java/stubs/felix/org/osgi/framework/PackagePermission.java', 'java/stubs/felix/org/osgi/framework/ServicePermission.java']","DERBY-6213: Generify the Felix stubs in order to remove a lint diagnostic at build time.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487051 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
63ecb285f23d6087e4bf314e7e3f02dc2bc8d555,2014-03-06T15:48:24Z,['java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java'],"DERBY-6496: Fix NPE in loading of the optimizer tracing tool; tests passed cleanly on derby-6496-02-aa-optimizerTracer.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574927 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2cf546d5479758e2815529aaebece0e66652741a,2012-10-15T16:00:08Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java']","DERBY-672: Add implicit casts and handle string truncation for user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1398352 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c670aa4404d9fb5bff961bf724fc02173b94d604,2014-10-03T12:36:06Z,['java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java'],"DERBY-6635: Prevent the optimizerTracing optional tool from writing its output over an existing file; commit derby-6635-01-ab-noOverwrite.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1629192 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a4094369b12a88c90eea067c22559ab07ffcd493,2014-06-06T12:21:45Z,"['java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-6600: Make Derby resolve custom Lucene Analyzers and QueryParsers by using the database classpath.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1600866 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2ae1afef523aefff51367b4b4e8adf82b5927cbf,2013-06-13T12:30:36Z,"['java/engine/org/apache/derby/impl/sql/compile/CostEstimateImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2CostEstimateImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java']","DERBY-6259: Commit derby-6259-01-aa-collapseOptimizers.diff, eliminating the level 2 optimizer.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492641 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fc9b418d86b26971132218b15c6ce093d063dbec,2013-02-08T20:03:39Z,"['java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/client/org/apache/derby/client/net/NetResultSet42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet42.java', 'java/engine/org/apache/derby/jdbc/Driver42.java']","DERBY-6000: Add support for new JDBC 4.2 methods in ResultSet.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1444210 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bc23e21c7fd33d04a6dbac18c92bcb6ee93d890d,2011-11-24T08:54:48Z,['java/drda/org/apache/derby/impl/drda/DRDAStatement.java'],"Fix javadoc

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1205757 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c66c15d5f1fa4f7638def1bf9b13f63799d98059,2013-10-14T09:10:15Z,"['java/engine/org/apache/derby/iapi/types/DataTypeUtilities.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java']","DERBY-2423: Make EmbedResultSetMetaData.isCrurrency() return false for DECIMAL and NUMERIC columns.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1531821 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
996ca721561d0507997d33180a5b8b85e539bfac,2013-05-08T17:25:00Z,"['java/engine/org/apache/derby/iapi/services/classfile/Attributes.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassEnumeration.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassHolder.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java', 'java/engine/org/apache/derby/iapi/services/classfile/MemberTable.java', 'java/engine/org/apache/derby/iapi/services/info/JVMInfo.java', 'java/engine/org/apache/derby/iapi/services/locks/Lockable.java', 'java/engine/org/apache/derby/iapi/services/locks/ShExLockable.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyValidation.java', 'java/engine/org/apache/derby/vti/VTITemplate.java']","DERBY-6213: Convert a couple misc packages to Java 6.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480365 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b89bd48b39d8d2cf1f5a5d5804aa8dc695248a88,2013-08-30T16:02:59Z,['java/engine/org/apache/derby/impl/store/access/sort/SortBufferScan.java'],"DERBY-6322: Remove erreoneous warning in NetBeans: superfluous use of super to access inherited member variable

This code in SortBufferScan makes NetBeans (7.4beta) issue a warning:

return (super.current != null);

""Incompatible types: boolean is not a functional interface <identifier expected>
; expected""

Patch derby-6322 removes the redundant ""super."" prefix.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1519007 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9d9f6dd03af6d44d7eac9c7a12e1bdb80c4cf7ae,2013-12-05T13:26:42Z,"['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OffsetOrderVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java']","DERBY-6362: CHECK constraint uses wrong schema for unqualified routine invocations

Part 3:

- Refactor code that rewrites trigger actions so that it can be reused
  for rewriting CHECK constraints.

- Rewrite CHECK constraints and make all identifiers schema qualified
  before storing them in the dictionary.

- Make the parser preserve the TableName node for the target type in
  CAST expressions for user-defined types, so that they get detected
  by the rewrite logic.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1548132 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
404a2f06f6de30e22b6be7ffc76de2c6c0bf0530,2014-01-13T19:42:22Z,['java/build/org/apache/derbyPreBuild/ReleaseProperties.java'],"DERBY-5463: Don't alter the value of drdamaint when generating a new release.properties file; commit derby-5463-01-aa-leaveDRDAmaintIDAlone.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1557823 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6b8ad3897e554d8abef570eb925c8a6db195609a,2015-08-02T17:33:17Z,"['java/optional/org/apache/derby/optional/api/LuceneUtils.java', 'java/optional/org/apache/derby/optional/api/SimpleJsonUtils.java', 'java/optional/org/apache/derby/optional/api/SimpleJsonVTI.java', 'java/optional/org/apache/derby/optional/json/SimpleJsonTool.java', 'java/optional/org/apache/derby/optional/lucene/DerbyLuceneDir.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/optional/org/apache/derby/optional/utils/ToolUtilities.java']","DERBY-6825: Grant public privileges to the users of the UDT and FUNCTIONS created by the simpleJson optional tool. Tests passed cleanly for me on derby-6825-04-aa-grantPrivileges.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1693818 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
af88ec8d24fca7550282198fbd5802251b30cf85,2013-05-30T07:19:33Z,['java/engine/org/apache/derby/iapi/util/ReuseFactory.java'],"DERBY-6230: Use the JVM's cache of Number instances in ReuseFactory

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487773 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8b47bc7a65ebcacbab628781dea7f4edaa1e87e5,2013-05-22T18:30:41Z,"['java/build/org/apache/derbyBuild/ClassSizeCrawler.java', 'java/engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/engine/org/apache/derby/iapi/services/cache/ClassSizeCatalog.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Refactor ClassSizeCatalog to prevent unchecked conversion warnings when
ClassSize creates an instance via reflection and casts the result to
Hashtable<String, int[]>.

Introduce a new abstract ClassSizeCatalog class and rename the generated
class to ClassSizeCatalogImpl, which extends ClassSizeCatalog. ClassSize
can now access the catalog via the abstract class instead of casting it
unchecked to Hashtable<String, int[]>.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485322 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
68e682544bdc8e831532a778ba35040345c5e2ec,2014-05-07T19:42:21Z,['java/engine/org/apache/derby/iapi/sql/dictionary/ForeignKeyConstraintDescriptor.java'],"Fix typos and add some Javadoc and @Override tags

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593126 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e744e8406bb1545e6871bec9902d090af86f1df9,2012-11-02T12:30:47Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5969: Raise a SQLWarning if someone attempts to change the encryption state of an already booted database.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1404947 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fed9c08fd6198e8106156887720cfd5c83f61256,2014-02-21T08:34:35Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-4160: getMetaData().getIndexInfo crashes with ""ERROR X0Y68: Column 'PARAM1' already exists.""

Use a shared code path for adding parameters to SYS.SYSCOLUMNS on the
first compilation and subsequent compilations of a meta-data query.
Previously, the first compilation took a different code path, but that
caused problems if two threads compiled a meta-data query at the same
time, and both threads thought they were first.

Set a savepoint before attempting to write a stored prepared statement
to the system tables in a nested transaction, and roll back to the
savepoint if an error happens. This prevents partially stored prepared
statements from lying around in the system tables after an error.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1570488 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ed8967c0b5de3bfaacf58d82272ad371571f1624,2014-08-06T20:01:46Z,['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java'],"DERBY-6689 Assert failure/NPE when using ROW_NUMBER in MERGE ... INSERT

Patch derby-6689. Adds checking for presence of window functions in
the matching clause nodes and throws 42ZC2 is that's the case. Adds a
test case.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616334 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
b6cc9d73b92275e25f231f80c4b0492a70d6821e,2013-06-11T18:29:46Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/compile/JoinStrategy.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/OptTraceViewer.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java']","DERBY-6211: Committed derby-6211-05-aa-xmlOptimizerTracer, which adds xml-based optimizer tracing.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1491893 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c8603c409254e00c631896c2ea83ccc20fad6104,2012-08-29T16:52:58Z,"['java/engine/org/apache/derby/agg/Aggregator.java', 'java/engine/org/apache/derby/catalog/types/AggregateAliasInfo.java', 'java/engine/org/apache/derby/iapi/reference/ClassName.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/Java5ClassInspector.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecAggregator.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/Java5ClassFactory.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectClassesJava2.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/execute/CountAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/MaxMinAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/OrderableAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-672: Wire in bind and execute logic for non-distinct user-defined aggregates in the SELECT list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1378639 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
70a608eb80c7dc1843038322e693a6b4eae9e2f5,2012-07-09T12:13:49Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

- Compare SQL states with String.equals() instead of !=

- Remove unused variable

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359098 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f99d2075ca8e3dfd99ee7579d572e2a2f9f50923,2013-01-03T01:10:46Z,['java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java'],"DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161) 

Trivial Javadoc fix.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428130 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
36b5480b6f1e04effe610f7440afc4e48a35c807,2012-10-01T09:14:57Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-5740: Remove unsued code in AlterTableConstantaction.columnDroppedAndTriggerDependencies

Removed unused code.

Patch file: derby-5740-1a-code_removal.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1392243 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
93590dfd72ef5dfbf3bd4fa334b30b153911a5ff,2014-06-24T19:40:12Z,['java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java'],"DERBY-6621: Reduce the visibility of StreamFileContainer; tests passed cleanly on derby-6621-04-aa-StreamFileContainer.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605165 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ba70926bc377813bf22baec7952c16f25d8c2429,2012-12-13T00:23:29Z,"['java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-3069: Fix varargs bugs in handling of primitive args and out/inout args.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1421052 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d35198dbcaca20f26a38cec3f70f864e96dca912,2012-09-12T16:53:37Z,['java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java'],"DERBY-5911 WHERE condition getting pushed into sub-query with FETCH

Patch ""derby5911b"", which changes logic in ProjectRestrictNode#pushExpressions to avoid pushing WHERE conditions into SELECTs that uses windowing and/or FETCH FIRST/OFFSET clauses. This fixes the bug in this issue. 

Adds new test cases in OrderByAndOffsetFetchInSubqueries.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1384035 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
0be21896e2056ad699004dacdc664ec0ce3bf90f,2013-02-01T13:07:56Z,"['java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java']","DERBY-6000: Add JDBC 4.2 DatabaseMetaData changes to embedded and client drivers.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441436 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
da3d219ad64cd229869d9627b30ffa542b0afe45,2013-06-24T08:07:56Z,['java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java'],"DERBY-6268: Run-time statistics not collected if query contains always false predicate

Make ProjectRestrictResultSet.close() call super.close() so that the
logic for dumping run-time statistics gets executed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495943 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c40b7edf6ceda44519c8a2fde3442a2c50446eb6,2014-03-26T10:09:20Z,['java/engine/org/apache/derby/iapi/services/info/JVMInfo.java'],"DERBY-6518: JVMInfo should not use parseFloat() to parse java.specification.version

Change the parse logic so that it recognizes that version 1.10 is greater than 1.9.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1581777 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c3c7b7b97d35255043a7c98c4ddaec17c9022a5f,2012-04-17T11:42:11Z,"['java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java']","DERBY-2031: Convert derbynet/testProtocol.java to JUnit 

Removed the files associated with the old harness test.
Removed references to the hold harness test.
Adjusted some comments, and removed some now deprecated code.

Patch file: derby-2031-7a-old_harness_test_removal.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1327050 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
888d12ea88f0edf1afc9ef98170d15efed5f1b78,2014-11-24T16:37:38Z,"['java/engine/org/apache/derby/iapi/store/access/conglomerate/ConglomerateFactory.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/TransactionManager.java', 'java/engine/org/apache/derby/iapi/store/raw/Page.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/Transaction.java', 'java/engine/org/apache/derby/iapi/store/raw/UndoHandler.java', 'java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessUndoHandler.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IFactory.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapConglomerateFactory.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapPostCommit.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapScan.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/InsertOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java']","DERBY-4057 Space is not reclaimed if transaction is rolled back

Added infrastructure called at insert abort time to queue post abort work.
After the abort work is queued in the case of aborted inserts to reclaim
space and if possible mark pages free, which then in turn allows them to
be used by subsequent work on the table.  This work queues this work
on heap tables when the aborted insert is the last row on a page, or
if the aborted insert is a row that contains a long column (a row that
is bigger than a page - usually a blob or clob), or a long row (a row
that spans multiple pages).



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1641418 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
9f6c678304b332e80616ed226291b785c99f8abc,2012-05-14T11:47:40Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-5755: Minor cleanup of DataDictionaryImpl.getRoutineList()

Use java.util.Collections to create empty and single-element lists.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1338167 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7b6cb41f1d72059e2f5b17ce0ccb5c9ce91906ba,2012-07-31T15:18:50Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DefaultDescriptor.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5879: Fix capitalization and punctuation problems in messages with SQLStates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1367610 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
34681435dea29ea2207b860d3f25dd95433b3514,2012-07-16T17:36:29Z,"['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java']","DERBY-5779: Prevent VTIS in FROM list subqueries from referencing other elements in the FROM list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1362159 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e358ca7c9b1c03f222e979d0db9f840f8cd791ae,2014-12-17T19:14:17Z,['java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java'],"fixing some long lines and comments in a file I am looking
at changing for a new fix, rather have format only changes
separate from real changes.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1646311 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
f9596d49421ef01dac027363f1154c63aaa510d0,2012-12-06T13:18:54Z,"['java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3069: DDL for varargs routines.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1417835 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2335e5c56b07edf073dfcf3f368215040a1d9ffb,2013-10-04T08:22:29Z,['java/engine/org/apache/derby/impl/sql/compile/OrNode.java'],"DERBY-6363: Incorrect evaluation of logical expressions in CASE

Skip conversion of OR nodes to IN lists if the OR node is not on
conjunctive normal form.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1529099 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
aa841e74eb1d3d575d51b36c47c4e92a8874ed0d,2014-08-01T12:40:56Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6588: Bump trunk version number to 10.12; commit derby-6588-06-aa-bumpTrunkVersionNumber.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1615084 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c1a0ff21aef510df65aeca6758a9a5134d818341,2014-02-17T09:56:50Z,"['java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/sql/compile/DateTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/TimeTypeCompiler.java']","DERBY-896: Allow casts from DATE and TIME to TIMESTAMP

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1568924 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fd4430da1dcb0f86a939115742a1987c0296d773,2011-11-08T17:03:57Z,"['java/engine/org/apache/derby/iapi/sql/compile/RequiredRowOrdering.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ColumnDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java']","DERBY-4845: Improve the dependency tracking for our build targets

Remove unused import statements that cause unnecessary dependencies
on implementation classes in the iapi package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1199348 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a24588ccc34d4f5479d18492e3104d114e4d0a58,2013-02-03T07:56:38Z,"['java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Javadoc formatting fix: derby-5955-javadoc-followup-2.diff

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441869 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
c0f956b48966bcf9abd230e78939b684cb3886b0,2014-08-26T09:17:19Z,['java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java'],"DERBY-6619: Improve comments

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620539 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
393f243f0caa7584ce4fb5c5c9b309a5ddc0d5f6,2012-10-30T18:02:38Z,"['java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java']","DERBY-5232 (Put a stern README file in log and seg0 directories to warn users of corrpution they will cause if they touch files there)

The earlier commit caused test failures because readme file creation was not getting done inside a privileged block. This commit fixes that problem and it was also fixes so typo and gets rid of redundant file close since that is already happening in the finally block.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1403807 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
4a4b0a8f7a4a191fa2e55f9820801aa14cfdda9f,2011-11-07T09:01:16Z,"['java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/engine/org/apache/derby/iapi/store/access/RowUtil.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/WorkHorseForCollatorDatatypes.java', 'java/engine/org/apache/derby/impl/load/ExportWriteData.java', 'java/engine/org/apache/derby/impl/services/locks/ConcurrentLockSet.java', 'java/engine/org/apache/derby/impl/services/locks/LockSet.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/btree/D_BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/heap/D_HeapController.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainerHandle.java']","DERBY-5491: new String("""") or new String() is pointless, and just allocates memory needlessly

Patch contributed by Dave Brosius <dbrosius@apache.org>.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1198653 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5d9ef3f01f3f0f6f93711ccf23648065140922e6,2013-03-04T15:41:22Z,['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java'],"DERBY-6075: Use modern collections in impl/sql/compile

Replace use of java.util.Vector with java.util.ArrayList in
DMLModStatementNode.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1452350 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
863daa05f92c2e531c3340dff6f1b6a8c525e8ba,2013-06-18T08:51:42Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/jdbc/Driver40.java']","DERBY-1984: Re-factor JDBC classes to remove support for JDBC 2

Collapse BrokeredStatement, BrokeredConnection, EngineConnection and
EmbedConnection class hierarchies.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494071 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b98b60eae63f4bfef55affeda6685db315cd394d,2013-01-03T10:04:44Z,['java/client/org/apache/derby/client/am/PreparedStatement.java'],"DERBY-2516: Network Client allows execution of callable statement when one of the parameters is not set

Check that INOUT parameters are set, not only registered with registerOutParam().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428256 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
64635d6896553993a9b548599ec3bf03389f49eb,2013-03-11T19:20:14Z,['java/build/org/apache/derbyBuild/ReleaseNotesGenerator.java'],"DERBY-6104: Publish first rev of 10.10.1 release notes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455291 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d27662da5855eac51763785c399e5b0bf3c7c89d,2014-04-07T06:59:08Z,['java/engine/org/apache/derby/iapi/services/io/FilePermissionServiceImpl.java'],"DERBY-6410: ClassCastException when launching derby from windows subst drive

Avoid calling Files.getFileStore() since it fails when called on a
file that lives on a subst drive. (Because of a bug in the JVM:
JDK-8034057.)

It is used for checking if a specific FileAttributeView is supported
on the file system. The same information can be found by checking if
Files.getFileAttributeView() returns null, which we already do, so
skip the failing call.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1585407 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5e39436ed025892a46da580b99f064b60ce2b2ed,2012-05-03T04:24:22Z,['java/client/org/apache/derby/client/am/LogicalConnection.java'],"DERBY-5561: Race conditions in LogicalConnection checking for a null physical connection

Made methods calling checkForNullPhysicalConnection synchronized.

Patch contributed by Brett Bergquist (brett at thebergquistfamily dot com).


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1333305 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
9f0dc0eb1c0354e7fd85303733e155e8851520a6,2013-05-24T06:03:17Z,"['java/engine/org/apache/derby/iapi/sql/compile/RequiredRowOrdering.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java']","DERBY-6148 Wrong sort elimination when using permuted sort order

Patch derby-6148-3. Adds lacking use of join order index map into
optimizableList in method OrderByList#sortRequired. Also adds
regression tests for previously failing (and a some good) queries.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485938 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
770bedf7f98ddffbacea6976f8654f4b5dda5b35,2014-04-28T21:56:07Z,['java/engine/org/apache/derby/iapi/services/context/ContextService.java'],"DERBY-6352; Access denied (""java.lang.RuntimePermission"" ""modifyThread"") highly intermittent, but e.g. in store.RecoveryAfterBackup test
  When we see a AccessControlException during shutdown in the notifyAll call, do nothing, which lets the Thread finish on its own.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1590817 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
073b862de35afe70afc288b34da12140633e39da,2013-05-21T14:31:49Z,"['java/engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/info/ProductVersionHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FileUtil.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableHashtable.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInfo.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/sql/depend/ProviderList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/DiskHashtable.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerKey.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/UserType.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/iapi/util/IdUtil.java', 'java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/ProtocolKey.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/monitor/TopService.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java']","DERBY-6213: Generify more classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484818 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a84fc2679293c30e3ebf1b62443cc8a34225b0df,2012-01-04T13:30:22Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PasswordHasher.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-866: Wire the new NATIVE password-management procedures to the recently checked-in password hashing improvements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1227150 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a784994d20402718277c4cd9417bdfe021d6d75b,2013-05-21T19:51:02Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/services/locks/Deadlock.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Stop suppressing some unchecked conversion warnings. Make the
conversions checked instead.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484920 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5ef7a0d9e4f315a3b0b72012ab3fd8add5e7a6dc,2012-07-21T08:20:50Z,"['java/client/org/apache/derby/client/am/CallableStatement40.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/ColumnMetaData40.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement40.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/ParameterMetaData.java', 'java/client/org/apache/derby/client/am/ParameterMetaData40.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/PreparedStatement40.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/Statement40.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java']","DERBY-5868: Move java.sql.Wrapper implementations to base classes on the client

Moved isWrapperFor() and unwrap() implementations to base classes to
reduce duplication of code.

Also moved some other methods that were duplicated in PreparedStatement40
and CallableStatement40 to their common base class PreparedStatement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1364042 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a3d7a74e38497ff919028f2eb0d38b68255ce3bc,2012-02-07T14:49:57Z,['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java'],"DERBY-866: Prevent authentication service from booting if NATIVE::LOCAL is specified at the system level.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1241479 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9bf29d2d2007bfa19d22f494e22fd05a9150a7c6,2013-06-27T07:38:29Z,['java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java'],"DERBY-673: Get rid of the NodeFactory 

Remove an erroneously re-introduced ""public"" keyword from method
getParameterTypes. This removes a FindBugs warning about ""exposing
internal representation by returning reference to mutable object"".



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497230 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d3347b5f7da5ca4c00634c30761fab58aa0464d7,2014-03-10T18:04:43Z,"['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Add datatype tests for MERGE statement and fix bug involving xml types in MERGE statements; tests passed cleanly on derby-3155-38-aa-datatypes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1576027 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
02876822cf3b0be7097db1b3c6530e05470e2fe1,2013-04-07T12:07:48Z,['java/client/org/apache/derby/client/am/Section.java'],"Fix javadoc warning.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1465369 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b37283b3d704f980fea3b4186783fbfd99456a21,2013-08-17T02:26:26Z,['java/shared/org/apache/derby/shared/common/sanity/SanityManager.java'],"DERBY-6299: Remove org.apache.derby.iapi.services.sanity package.

This change is a followup to revision 1514927 and removes the javadoc warnings.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1514936 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
d6401b1d9169446beeee792170224e2ecd001e00,2014-02-25T08:47:23Z,"['java/client/org/apache/derby/client/am/SqlException.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java']","DERBY-6484: Include SQLState in client exception messages

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1571615 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ed7f8b90560cfb8b4f6369a9e5e60e4caea35ffb,2014-06-25T07:58:04Z,['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java'],"DERBY-6634: Improve test coverage of SqlXmlUtil.java

Remove dead code from the time when SqlXmlUtil implemented the
Formatable interface (before DERBY-3870).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605285 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
537fdabe84ce6a09a46b3c8f2bb07c298ddf8060,2013-08-29T19:07:32Z,['java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java'],"DERBY-5553 System property for client tracing -Dderby.client.traceDirectory does not work with XADataSource 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1518766 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
651c99e8578fe7ab29dde92faed4a84eedf31a75,2012-10-30T04:03:45Z,"['java/engine/org/apache/derby/iapi/services/monitor/PersistentService.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java', 'java/storeless/org/apache/derby/impl/storeless/StorelessService.java']","DERBY-5232 (Put a stern README file in log and seg0 directories to warn users of corrpution they will cause if they touch files there)

This will create 3 readme(README_DONT_TOUCH_FILES.txt) files at database creation time, One at the database level, one in the ""log"" directory and another in the ""seg0"" directory. 
a)Content of the readme file at the database level are as follows 
# ************************************************************************* 
# *** Do not touch files in this directory! *** 
# *** FILES IN THIS DIRECTORY AND SUB-DIRECTORIES CONSTITUES DERBY *** 
# *** DATABASE WHICH INCLUDES THE DATA(USER AND SYSTEM) AND THE *** 
# *** NECESSARY FILES FOR DATABASE RECOVERY. *** 
# *** EDITING, ADDITING OR DELETING ANY OF THESE FILES MAY CAUSE DATA *** 
# *** CORRUPTION AND LEAVE THE DATABASE IN NON-RECOVERABLE STATE. *** 
# ************************************************************************* 
b)Content of the readme file at ""seg0"" directory are as follows 
# ************************************************************************* 
# *** Do not touch files in this directory! *** 
# *** FILES IN THIS DIRECTORY ARE USED BY THE DERBY DATABASE TO STORE *** 
# *** USER AND SYSTEM DATA. EDITING, ADDING, OR DELETING FILES IN THIS *** 
# *** DIRECTORY WILL CORRUPT THE ASSOCIATED DERBY DATABASE, AND WILL *** 
# *** NOT BE RECOVERABLE. *** 
# ************************************************************************* 
c)Content of the readme file at ""log"" directory are as follows 
# ************************************************************************* 
# *** Do not touch files in this directory! *** 
# *** FILES IN THIS DIRECTORY ARE USED BY THE DERBY DATABASE RECOVERY *** 
# *** SYSTEM. EDITING, ADDING OR DELETING FILES IN THIS DIRECTORY WILL *** 
# *** CAUSE THE DERBY RECOVERY SYSTEM TO FAIL LEADING TO UNRECOVERABLE *** 
# *** CORRUPT DATABASES. *** 
# ************************************************************************* 





git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1403611 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
ff02576059331e1864119c91a2abda79e8a04023,2011-11-03T15:03:54Z,"['java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement20.java']","DERBY-5488: Make setObject( int, BigInteger ) rely on the existing setObject( int, BigDecimal ) logic.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1197172 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
05623b686ef5ba583291e5d6a6061739db8910af,2013-05-13T12:18:20Z,"['java/engine/org/apache/derby/iapi/sql/compile/Optimizable.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RelationalOperator.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericExecutionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/RowTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/StatementTriggerExecutor.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Changes to prevent exposing package-private classes outside the
package via public or protected fields or methods:

- Reduce visibility to package or private if possible

- Remove the code if it's not actually used

- Use public interfaces rather than implementation classes in the
  method signatures if the methods have to be public

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1481816 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7258ed2200b3ddce051cb1e6849632b109a6026b,2014-12-18T18:07:14Z,['java/drda/org/apache/derby/drda/NetworkServerControl.java'],"DERBY-3195; Describe if default security manager & policy is installed or not on each of the mechanisms to start the network server.
   Adding a period to finish the headers in two places, for readability.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1646502 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
74fb1b0a1eabae280f124b4deffd2978ae80f624,2013-11-07T07:47:58Z,"['java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/client/org/apache/derby/client/am/MaterialStatement.java', 'java/client/org/apache/derby/client/net/NetResultSet.java']","DERBY-6082: Removed re-prepares trigged by openOnServer_

Changed piggy-backing of prepare of preparedStatementForAutogeneratedKeys_ so that it doesn't need openOnServer_ 

Removed MaterialStatement.markClosedOnServer and implementation since it did not do anything.

Since this reduced ClientStatement.markClosedOnServer() to a cleanup-method for section_, it was removed and section_ was encapsulated as a private member where setSection is responsible for cleanup.

Patch file derby-6082a.diff. (+ review comment) 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1539540 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
006b542c078fca7f23d0859c6b795435aa50e6bb,2011-12-19T11:02:42Z,['java/engine/org/apache/derby/iapi/services/property/PropertyValidation.java'],"DERBY-5507: Orderly shutdown fails if you are using BUILTIN authentication and turn on derby.database.propertiesOnly

Make sure passwords are mapped to a hashed token before they are stored
in the database, also if the password is already defined in a system
property.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1220685 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f6d02c92a45dc8883c9be38704ec9d2699589c9d,2014-07-30T21:51:54Z,"['java/engine/org/apache/derby/catalog/UUID.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/SQLSessionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/SQLSessionContextImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueIndexSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueWithDuplicateNullsIndexSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ValidateCheckConstraintResultSet.java']","DERBY-6670 Rollback to savepoint allows violation of deferrable constraints

Patch derby-6670-2-c. This patch is a rewrite of the prototype patch
derby-6665-01-ae-deferredCheckAndDroppedFK.diff which moves from using
physical conglomerate ids as keys in the internal identification of
constraints and their indexes for deferrable constraints to

- UUID for the constraints for primary key, unique and foreign key
- UUID for base table (or constraint dependening on where in the code)
  for check constraints

This is essentially only a refactoring which simplifies the code. But
it also makes possible the fix for this issue, which is to stop
removing the deferrable constraint violation information when
constraints are dropped (directory or as a result of the table being
dropped), since a rollback to savepoint might undo drops, at which
point we need the violation information again. The solution is to make
the validation code robust against the absence of dictionary objects
(tables, constraints): if at commit or ""set immediate"", the objects
are gone we know there is no checking to be done.

The patch also adds rollback to savepoint test cases in
ConstraintCharacteristicsTest#testDerby6670_a, including the repro for
this issue.

Also removed the release of violation information at a successful
change to immediate constraint mode as part of a SET CONSTRAINTS
statement, since a rollback to savepoint might re-introduce the
violations. New test cases added for this, too (#testDerby6670_b).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1614777 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
a0b894382f7fd9616d694fa51c901905cf6de8b6,2013-05-30T07:19:54Z,"['java/client/org/apache/derby/client/am/ClientClob.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/am/Decimal.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/net/EncodedInputStream.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/Reply.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/client/net/Utf8CcsidManager.java']","DERBY-6231: Remove unnecessary checks for UnsupportedEncodingException in the client

Refer to encodings with Charset constants instead of names.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487774 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
55d3591dd22183a7216e1d12f5d03dd891e8dd23,2012-07-23T15:55:23Z,['java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java'],"DERBY-5407 When run across the network, dblook produces unusable DDL for VARCHAR FOR BIT DATA columns. 

The serialization of UDT associated with SYSCOLUMNS.COLUMNBDATATYPE on the wire from the network server end happens correctly. The same serialized data is received by the client but when we try to instantiate the UDT's TypeDescriptor based on this serialized data, we get confused between ""VARCHAR () FOR BIT DATA"" and ""VARCHAR FOR BIT DATA"". The deserialization on the client side happens through BaseTypeIdImpl.getTypeFormatId(). Here, we look at the string representation of the type descriptor that we received on the wire and choose the appropriate format id based on that string. The problem is in this 
BaseTypeIdImpl.getTypeFormatId() code, where the code looks for ""VARCHAR FOR BIT DATA"" rather than ""VARCHAR () FOR BIT DATA"" (notice the missing parentheses) 
            else if ( ""VARCHAR FOR BIT DATA"".equals( unqualifiedName ) ) { return StoredFormatIds.VARBIT_TYPE_ID_IMPL; } 
Since ""VARCHAR FOR BIT DATA"" and ""VARCHAR () FOR BIT DATA"" do not match, we do not use format id VARBIT_TYPE_ID_IMPL.
 
Later, we go through a switch statement based on the format id in BaseTypeIdlImpl.toParsableString(TypeDescriptor). In the switch statement, we are supposed to stuff in the width of the varchar for bit data into the parentheses ie string ""VARCHAR () FOR BIT DATA"" should get converted into ""VARCHAR (NUMBER) FOR BIT DATA"" but we don't do it because of getTypeFormatd() code problem explained earlier.

To fix this, the patch has added check for 
If there might be dependencies on the original ""VARCHAR FOR BIT DATA"" check, then we can add additional check for ""VARCHAR () FOR BIT DATA"" in addition to the existing check for ""VARCHAR FOR BIT DATA"" as shown below and that fixes the problem
            else if ( ""VARCHAR FOR BIT DATA"".equals( unqualifiedName ) ) { return StoredFormatIds.VARBIT_TYPE_ID_IMPL; } 
            else if ( ""VARCHAR () FOR BIT DATA"".equals( unqualifiedName ) ) { return StoredFormatIds.VARBIT_TYPE_ID_IMPL; } 
This commit does similar thing for ""CHAR FOR BIT DATA"", ie in addition to the existing test for ""CHAR FOR BIT DATA"", it adds a check for ""CHAR () FOR BIT DATA"". 

Keeping the existing checks will not break any dependencies that might exist on ""VARCHAR FOR BIT DATA"" check and ""CHAR FOR BIT DATA"" check.

Have added a test for SYSCOLUMNS.COLUMNBDATATYPE for all the supported data types. This test will be run in both embedded and network server mode.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1364690 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
3546404ba20c7181bc0e59558179da41b9ac3081,2013-04-12T08:11:51Z,"['java/engine/org/apache/derby/impl/store/raw/data/AllocPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/ChainAllocPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/CompressSpacePageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/CompressSpacePageOperation10_2.java', 'java/engine/org/apache/derby/impl/store/raw/data/CopyRowsOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/DeleteOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/InitPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/InsertOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/InvalidatePageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/LogicalPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/LogicalUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PageBasicOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PhysicalPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PurgeOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/RawField.java', 'java/engine/org/apache/derby/impl/store/raw/data/SetReservedSpaceOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/UpdateFieldOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/UpdateOperation.java']","DERBY-6163: Reduce visibility of methods in subclasses of PageBasicOperation

Make all abstract classes in the PageBasicOperation class hierarchy
package protected. Make all constructors in the class hieararchy
package protected, except the no-argument constructors as the
Formatable interface requires them to be public.

Also reduce visibility of the RawField class, which is only used by
StoredPage in the same package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1467197 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2945dbb8c8722c678779b5b4e6bdbcb7925bb177,2014-01-16T20:46:00Z,['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java'],"DERBY-3155: Allow system and temp tables in MERGE statements; commit derby-3155-13-aa-allowSystemAndTempTables.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1558912 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a19ac61c58127cf95cb6ddefb802c30272ccdbff,2014-03-06T19:56:43Z,['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java'],"DERBY-3155: Add lock mode comment to master MERGE node; commit derby-3155-36-aa-lockModeComment.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1575026 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9d5bd0e49030e2eb12a919b5bf93f53fb8cbb499,2013-05-20T19:05:51Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeNode.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealAnyResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealBasicNoPutResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDistinctScalarAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealGroupedAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealIndexRowToBaseRowStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealMaterializedResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNestedLoopJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNoRowsResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNormalizeResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealOnceResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealProjectRestrictStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealRowCountStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealScalarAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealScrollInsensitiveResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSetOpResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSortStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUnionResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealWindowResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RunTimeStatisticsImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/xplain/XPLAINSystemTableVisitor.java']","DERBY-6213: Generify impl/sql/compile and impl/sql/execute.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484566 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2c50eb383e31c366aad7c6b8bbc5fd0d681dabda,2013-05-06T17:00:12Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/tools/org/apache/derby/impl/tools/optional/OptimizerTracer.java']","DERBY-6211: Move optimizer tracer from tools jar to engine jar.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1479642 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2706d1f7201e57c2ad41aa0e79d77166bddf477d,2013-07-25T07:12:46Z,"['java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AllResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/AlterTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BitConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BooleanConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GetCurrentConnectionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNullNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LockTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeSubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NOPStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NotNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RenameNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowNumberFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SavepointNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetTransactionIsolationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java', 'java/engine/org/apache/derby/impl/sql/compile/TablePrivilegesNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserTypeConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/VarbitConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/VirtualColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLConstantNode.java']","DERBY-673: Get rid of the NodeFactory

Patch derby-673-nuke-ctypes-without-enum-3.

This patch removes the usage of the global nodeType integer (see
QueryTreeNode) defined by C_NodeType.java. After the removal of the
node factory, this global quantity whose use mimicked ""instanceof"" can
be discarded, mostly. For some node which represent several logical
node types, e.g. BinaryArithmeticOperatorNode which can represent for
example both + and minus, a new quantity, ""kind"" is introduced to
differentiate between the logical types of nodes.

We introduce a default method ValueNode#isSameNodeKind which the
classes that implement several kinds need to override to add the extra
kind check. This is then called from the isEquivalent overrides as
needed.

JavaDoc for isSameNodeKind:

/**
 * Some node classes represent several logical node types (to reduce
 * footprint), which we call kinds.
 * This means that implementations of {@link #isEquivalent()}
 * cannot always just use instanceof to check if the other node
 * represents the same kind. Hence this method needs to be
 * implemented by all node classes that represent several kinds.
 * It is only called from implementations of isEquivalent.
 *
 * @param other The other value node whose kind we want to compare with.
 * @return true if this and o represent the same
 *         logical node type, i.e. kind.
 */

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1506827 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d11ed0893582387510ebc63c1478832b16745227,2012-10-19T10:18:55Z,"['java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstantActionActivation.java']","DERBY-5947: Factor out common code from generated classes

Moved more code to BaseActivation.execute(). Specifically, code to
initialize BaseActivation's resultSet field and marking the root of
the result set tree as the top-level result set.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400023 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c14b3d44d1cfb8ecdfd7f235b16760d195b08ff0,2011-12-19T09:32:26Z,"['java/engine/org/apache/derby/impl/io/DirFile4.java', 'java/engine/org/apache/derby/impl/io/DirStorageFactory4.java']","DERBY-5541: Remove unnecessary field rwsOK in DirStorageFactory4

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1220670 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
82bf2d5095fb262d6e6831d7d34801cc6b764aa5,2012-10-31T15:13:23Z,['java/engine/org/apache/derby/iapi/types/SQLBoolean.java'],"DERBY-5971: Improve test coverage for SQLBoolean class

Remove two unused methods and add test cases for binary operators.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1404190 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6eb29f67238d5a33089acf436712ed2eba969ee4,2012-08-09T16:41:32Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/am/AsciiStream.java', 'java/client/org/apache/derby/client/am/CloseFilterInputStream.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/FailedProperties40.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/LogicalConnection40.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/Types.java', 'java/client/org/apache/derby/client/net/CodePoint.java', 'java/client/org/apache/derby/client/net/EncodedInputStream.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientDriver40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java']","DERBY-5896 Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client

Change client tabs to spaces.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1371306 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
b3f38f87e62a95d53852ab199144b4e6be2e46b0,2014-02-07T22:12:23Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3155: Forbid synonyms in MERGE statement; tests passed cleanly for me on derby-3155-21-ac-cleanupAndForbidSynonyms.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1565830 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6d4d95d4142be4cdb94927093372d2b085034e21,2012-12-17T10:49:42Z,['java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java'],"DERBY-5894: NPE in OnlineBackupTest1 while backing up in stubFileToRemoveAfterCheckPoint

Stop using the shared run() method from RAFContainer.backupContainer(),
as it is not safe to use without synchronization (which is why the
NullPointerException happened).

Also, use doPrivileged() only to execute those parts of the code that
need to run with privileges, as most of the code called from
backupContainer() does not need privileges.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1422845 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e3720ab07a808863f45eeb5c896d87aa78dfc7dd,2013-11-13T10:49:57Z,"['java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java']","DERBY-6411: Minimal select privilege should be checked in subqueries

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1541461 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
54d20ec0a3064b7acd58be9f828601a4b2cec6a4,2013-06-17T14:44:21Z,['java/engine/org/apache/derby/impl/sql/compile/SelectNode.java'],"DERBY-6263: Add missing clauses to Visitor logic of SelectNode; tests passed cleanly on derby-6263-02-aa-ignored-clauses-in-SelectNode.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493789 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
831e54e7651e6c9debb9c9034b93edb5acdab69b,2014-01-03T03:38:05Z,"['java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java']","DERBY-532 Support deferrable constraints

Patch derby-532-allow-pk-unique-1, which opens up for using deferrable
constraints for primary key and unique constraints, i.e. it is no
longer required that the special property ""derby.constraintsTesting""
be used for those constraints, since the implementation is complete
modulo bugs. Upgrade tests still remain to be built, though.

For foreign key and check constraints as well as for ""not enforced"",
the property will still required till the implementation for those is
completed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1555006 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
a844e87535561d46cfeabff23b49fdb8bb093ec6,2012-06-11T09:31:26Z,"['java/engine/org/apache/derby/iapi/util/DoubleProperties.java', 'java/engine/org/apache/derby/iapi/util/JBitSet.java', 'java/engine/org/apache/derby/iapi/util/Matchable.java', 'java/engine/org/apache/derby/iapi/util/Operator.java', 'java/engine/org/apache/derby/iapi/util/ReuseFactory.java']","Fixed package names in headers from com.ihost.cs to org.apache.derby.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1348768 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
11da6184ebcad1be6ce3916cbaa32af61ba752fb,2014-07-01T16:36:34Z,['java/drda/org/apache/derby/mbeans/drda/NetworkServerMBean.java'],"DERBY-6611 Broken link in API docs to derby.drda.keepAlive documentation

Javadoc fixup for this issue: Use textual cross reference instead.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1607135 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
bde7b3b8c7e25af5f4e3eb246ef090109c2dbd03,2012-04-26T07:20:03Z,"['java/client/org/apache/derby/client/am/ResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java']","DERBY-5489: getBinary() returns incorrect data after getObject() call on BLOB column

o Added missing check to getObject on LOB columns in the client driver.
o Added new checks to getBytes/getString for LOB columns in both drivers,
  which stands out from the rest of the getters because invoking them multiple
  times on a LOB column is allowed (this is an exception to the rule).
o Added two new tests which verifies that the data return when invoking the
  mentioned getters multiple times returns correct data, including when you
  first invoke getBytes/getString and then invoke one of the other valid
  getters for LOB columns. Some refactoring of LobRsGetterTest.
o Adjusted access pattern in UpdatableResultSetTest to comply with the rules.

At a later time it may be possible to lift this restriction on LOB columns.

Patch file: derby-5489-2b-fixes.diff
--This line, and tose below, will be ignored--

M    java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/LobRsGetterTest.java
M    java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/_Suite.java
M    java/testing/org/apache/derbyTesting/functionTests/tests/lang/UpdatableResultSetTest.java
M    java/client/org/apache/derby/client/am/ResultSet.java
M    java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1330681 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
6790718a3af595ef956fcbcef877c9472d8383eb,2012-09-26T09:18:13Z,"['java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/GCInstanceFactory.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectClassesJava2.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectGeneratedClass.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectLoaderJava2.java']","DERBY-5935: Remove unused code for factory classes in the reflection service

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1390342 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
daffaee4b8323b1f248e539e3db747f22740de8c,2014-02-27T17:50:25Z,"['java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-3155: Enforce correct privileges for DELETE actions of MERGE statements; tests passed cleanly on derby-3155-31-aa-deletePrivs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1572665 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
526b9ed4c2de25f68336d4327efbfb51f43f5ce1,2012-08-03T15:31:57Z,['java/build/org/apache/derbyBuild/MessageBuilder.java'],"DERBY-5878: Add bracketed argument numbers to comments in generated English properties file.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1369040 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4c2fc4ab4ad58001bcd18e39152b0212a53721f7,2013-03-12T16:21:35Z,"['java/client/org/apache/derby/client/am/CallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet42.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/jdbc/Util42.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java']","DERBY-6089: Make old overloads of CallableStatement.registerOutParameter raise a SQLFeatureNotSupportedException when illegal types are used.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455602 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
121a5329dd496b579dfd9faefecf7e156bb26c86,2013-10-24T15:27:15Z,['java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java'],"DERBY-4923 update of a long row can fail with ERROR nospc: nospc.U exception.

This checkin fixes the problem repro'd by the included new test, which shows
an update of an existing row in db failing with a nosp.U exception. 
The problem was an off by 1 error in checking for enough space to update a row
on an overflow page to just an overflow pointer. The intent of the code is to 
always reserve enough space in every overflow row to allow for this update. 
In this case there was exactly enough space, but the code mistaken thought it 
needed 1 more byte.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535413 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
51d91d5c614e4cd32dc37c129b11c7432843193c,2013-10-14T11:12:46Z,"['java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java']","DERBY-3573: Remove incorrect check against maxRows when setting fetchSize. Patch contributed by Nirmal Fernando.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1531854 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
661c2e6c456ac261cbcaff6e0832de9e93ea2b87,2013-08-21T13:26:06Z,"['java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3155: Add grammar and bind logic for MERGE statement; commit derby-3155-01-ac-grammar.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1516157 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9819cf8e6a4208f0c0b61d5331127ec01e541a34,2014-05-10T13:55:50Z,"['java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/services/locks/LockOwner.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/TransactionFactory.java', 'java/engine/org/apache/derby/impl/services/locks/ConcurrentLockSet.java', 'java/engine/org/apache/derby/impl/services/locks/LockControl.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/xact/InternalXact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6554: Raise SelfDeadlock when a nested subtransaction can't immediately get a lock because it is blocked by its parent transaction; commit derby-6554-02-ae-selfDeadlock_sps_compress.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593702 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
dda453ed9a8ade48793d8bcbbdc6b2ae7da018a6,2013-04-22T12:39:46Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/CursorInfo.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

- Remove the unused targetColumns fields in CursorInfo and
  GenericPreparedStatement

- Replace the getter for the updateColumns field in
  GenericPreparedStatement with more specific accessor methods that
  don't expose the underlying array

- Make CursorInfo.updateColumns a list instead of an array to take
  advantage of helper methods in java.util.List

- Make ArrayUtil.readStringArray() create one array rather than two

- Move QueryTreeNode.getCursorInfo() to StatementNode, since it's only
  called on nodes of that type

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1470478 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9495b40dcf0f9d31d1de6fb87a0a6482194b2187,2012-07-12T15:53:35Z,['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java'],"DERBY-5779: Forbid joining to VTI/tableFunction args in <joined table> clauses.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360736 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
35d6658fa4f241267698246384e44f6e7212937d,2013-01-10T10:28:33Z,['java/engine/org/apache/derby/iapi/types/WorkHorseForCollatorDatatypes.java'],"DERBY-6030: Length of escape string in LIKE ... ESCAPE not properly checked with territory based collation

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1431259 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4222fe98ddeecbedbca29e6d9a5eddc7bd8de43d,2014-08-06T18:41:29Z,['java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java'],"DERBY-6692: Fix self-deadlock regression in soft-upgraded database; commit derby-6692-01-ab-withTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616299 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
68a67abc9df6b44a180eb9b14c4f5db772475790,2012-07-09T12:30:34Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Removed unnecessary return statements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359110 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
38d132995fd1953832b1d585252a101f8956dc60,2014-12-06T17:27:21Z,['java/engine/org/apache/derby/impl/store/access/CacheableConglomerate.java'],"just comment changes.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1643573 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
84cc283ad61509e72d98c48ebf1552cda99e821b,2013-09-14T21:44:54Z,"['java/engine/org/apache/derby/impl/io/InputStreamFile.java', 'java/engine/org/apache/derby/impl/io/JarDBFile.java', 'java/engine/org/apache/derby/io/StorageFile.java']","DERBY-6315: Improve test coverage of org.apache.derby.impl.io.InputStreamFile

This patch was contributed by Ahsan Shamsudeen (ahsan dot competition at gmail dot com)

This patch removes the unused method StorageFile.length().

The length method is removed from the StorageFile interface, as well as
from the InputStreamFile, JarDBFile, and CorruptFile implementations.

The method was not called anywhere, and removing it simplifies this area
of the Derby code.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1523334 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
3221b8c5d0baad798d0bdd123d9b8f7bf912e0f0,2013-04-18T09:25:11Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UserDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTRIGGERSRowFactory.java']","DERBY-6186: Encapsulation improvements

- Use DataDescriptorGenerator.newTriggerDescriptor() to build descriptor
  in SYSTRIGGERSRowFactory instead of calling constructor directly

- Make TriggerDescriptor's constructor package private

- Make UserDescriptor's constructor package private

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469240 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9e26acc4550922c1f2232f366e3670297a454f4c,2012-01-26T19:59:44Z,['java/engine/org/apache/derby/impl/io/DirFile.java'],"DERBY-5574 encryption test in encryption nightly suite test fails with ERROR XBM0S: Unable to rename file error

Catch errors on rename, and retry hoping that error is caused by some 
temporary file system resource issue.  Similar methodology that other
parts of the system uses on read and write errors.  Worst case system
retries 5 times and still throws the error, best case a subsequent retry
succeeds and user application is never aware an error was encountered.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1236370 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
1ffa77b9a6a836e0da12f8144c92282628985dc0,2014-06-23T11:44:08Z,"['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/engine/org/apache/derby/iapi/types/XML.java']","DERBY-6624: Use javax.xml.xpath interfaces for XPath support

Stop using the interfaces in the org.w3c.dom.xpath package, since they
are not part of the Java SE specification.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1604758 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
dd9ad0704f2415ad4a80894f1f0fc63b1c29d382,2012-10-19T10:19:12Z,"['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/CursorActivation.java']","DERBY-5947: Factor out common code from generated classes

Move authorization check for CursorNodes from generated code to
CursorActivation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400024 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
aa5c5de5eb62b79a8519e216a711858161ed1072,2013-06-17T10:00:30Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatementControl.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/ExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory40.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver40.java', 'java/engine/org/apache/derby/jdbc/Driver40.java', 'java/engine/org/apache/derby/jdbc/XAStatementControl.java']","DERBY-6253: Collapse SQLException factories

- Move functionality from SQLExceptionFactory40 to SQLExceptionFactory

- Move logic for retrieving the exception factory from Util to
  ExceptionFactory in order to reduce compile-time dependencies on
  impl classes from iapi classes

- Use varargs in Util's helper methods in order to reduce the number
  of methods

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493701 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1705596ae1f17af8d826864411d9f78eeb38af7a,2014-02-18T15:47:36Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java']","DERBY-3155: Propagate RowLocations out of index probes as necessary for the driving left join of a MERGE statement; commits derby-3155-26-aa-copyRowLocationForIndexScans.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1569396 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a56ecfa31c1400e7113a6b3e28477a1c06b56f86,2013-07-02T16:49:01Z,"['java/engine/org/apache/derby/iapi/sql/StatementUtil.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerFactory.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6267: Add first rev of complete plan overrides; merged derby-6267-01-ae-compactSyntax.diff to head of trunk.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499012 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c8afd4ff6ee581b2e69b2ca9e13636b474ef0cfc,2011-12-09T17:46:50Z,['java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java'],"DERBY-5526  on upgrade from 10.5 to 10.8.2 , getting ERROR XBM0A: The database directory 'C:\cygwin\home\debugfat\clientdb' exists.
 However, it does not contain the expected 'service.properties' file.

Change to only throw this message if there is a seg0 directory so  this looks
like a partially created database




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1212541 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
69f8afa5c014b4405d3989e0bf82e42da9758cd3,2013-12-05T13:17:11Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AllResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/LockTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RenameNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-6362: CHECK constraint uses wrong schema for unqualified routine invocations

Part 1: Make sure visitors descend into all TableName nodes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1548127 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
78bdf3609f28001f8801bf9bc7a738f53d349d41,2013-05-28T13:43:39Z,"['java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-6213: Collapse the embedded DataSources into their Java 6 base classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486921 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9206d5b23e712140f0efd733d5b640c9e1f5f319,2013-02-11T20:59:19Z,"['java/client/org/apache/derby/client/am/CallableStatement.java', 'java/client/org/apache/derby/client/am/CallableStatement42.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement42.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement42.java', 'java/engine/org/apache/derby/jdbc/Driver42.java']","DERBY-6000: Add new CallableStatement.registerOutParameter() overloads introduced by JDBC 4.2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1444960 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c712a5b8374c0fc28dbedec71dd9ceef57ab34b2,2013-06-04T09:09:36Z,"['java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java', 'java/tools/org/apache/derby/tools/SignatureChecker.java']","DERBY-6213: Deprecate support for Java 5 and CDC

Add @deprecated tag to the DataSource classes that have been removed
from the public API.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1489349 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
16d3334c536d40d284ac1cf3cc451d96a4298942,2013-05-23T18:47:45Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/shared/org/apache/derby/shared/common/sanity/AssertFailure.java', 'java/shared/org/apache/derby/shared/common/sanity/SanityManager.java', 'java/tools/org/apache/derby/impl/tools/ij/AttributeHolder.java', 'java/tools/org/apache/derby/impl/tools/ij/ConnectionEnv.java', 'java/tools/org/apache/derby/impl/tools/ij/Main.java', 'java/tools/org/apache/derby/impl/tools/ij/Session.java', 'java/tools/org/apache/derby/impl/tools/ij/URLCheck.java', 'java/tools/org/apache/derby/impl/tools/ij/ijMultipleResultSetResult.java', 'java/tools/org/apache/derby/impl/tools/ij/ijResult.java', 'java/tools/org/apache/derby/impl/tools/ij/ijResultImpl.java', 'java/tools/org/apache/derby/impl/tools/ij/ijVectorResult.java', 'java/tools/org/apache/derby/impl/tools/ij/util.java', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/tools/org/apache/derby/impl/tools/ij/xaHelper.java', 'java/tools/org/apache/derby/impl/tools/planexporter/CreateXMLFile.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/tools/org/apache/derby/tools/JDBCDisplayUtil.java', 'java/tools/org/apache/derby/tools/dblook.java']","DERBY-6213: Generify remaining classes needed to remove lint warnings in Derby build.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485822 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3bb140c798f2e5afae03749cd4ed328cdc50aa7d,2013-06-21T07:47:47Z,"['java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/TypesImplInstanceGetter.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/ResultColumnDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/compile/C_NodeTypes.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/compile/Node.java', 'java/engine/org/apache/derby/iapi/sql/compile/NodeFactory.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizablePredicate.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerFactory.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionFactory.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AccessPathImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AllResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/AlterTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseTableNumbersVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BitConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BitTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/BooleanConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BooleanTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CLOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/C_NodeNames.java', 'java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharStream.java', 'java/engine/org/apache/derby/impl/sql/compile/CharTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CostEstimateImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CountAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DateTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GetCurrentConnectionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HasCorrelatedCRsVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/HasNodeVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/HasTableFunctionVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/HasVariantValueNodeVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNullNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LockTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeSubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaxMinAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MiscellaneousStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NOPStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NodeFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NotNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/OperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptTraceViewer.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParseException.java', 'java/engine/org/apache/derby/impl/sql/compile/ParserImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/RefTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/ReferencedTablesVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/RelationalOperator.java', 'java/engine/org/apache/derby/impl/sql/compile/RemapCRsVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/RenameNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ReplaceAggregatesWithCRVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ReplaceWindowFuncCallsWithCRVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RoutineDesignator.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowNumberFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLBooleanConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SavepointNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetTransactionIsolationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubstituteExpressionVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/SumAvgAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TablePrivilegesNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimeTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/Token.java', 'java/engine/org/apache/derby/impl/sql/compile/TransactionStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TriggerReferencingStruct.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/UCode_CharStream.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/UserDefinedTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/UserTypeConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/VTIDeferModPolicy.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/VarbitConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/VerifyAggregateExpressionsVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/VirtualColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/AvgAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateAliasConstantAction.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-673 Get rid of the NodeFactory

Patch derby-673-3.

a) Replaced the old init methods in ""*Node.java"" classes with
   constructors. Some logical node types have different ""C_NodeType""
   values in their nodeType field after construction but still share
   the same node class. I have not attempted to increase the number of
   node classes to match logical == physical node classes this
   once. Actually one class was removed because it unused:
   ""SQLBooleanConstantNode"". ""IsNode"" is also currently unused but
   there is a JIRA to make use of it (DERBY-5973), so I left it in
   place.

   Boxed argument types were replaced by primitive types except in a
   few cases where instanceof was used on them to detect type
   overloading; this could be gotten rid of by adding more
   constructors.

   Since the constructor arguments are now strongly typed, a great
   many casts were removed in the process and readability is improved
   a lot.

   In some cases the old init procedures did computations before
   calling ""super.init"". Since the call to the corresponding super
   constructor needs to be the first code in a constructor, I
   sometimes had to introduce new private static methods to compute
   the correct arguments to send on to the super class constructor,
   e.g. ""getTypeId"" in ""UserTypeConstantNode"". I think there is some
   redundancy here that could be removed in a follow-up patch.

   All the non-abstract node classes (still) set their corresponding
   ""C_NodeType"" value; but in many (most?) cases the field is no
   longer needed. This could be improved by removing them altogether
   and introduced class constants where needed to differentiate
   between logical node type mapped to one class. This is already done
   halfheartedly to some extent, e.g. enum ""Sign"" in ""IsNullNode"".

   The old ""tools/jar/DBMSnodes.properties"" file could be removed
   altogether since the node classes are now added automatically due
   to dependencies that the compiler can see (no longer constructed by
   reflection).

   The old nodeFactory method ""doJoinOrderOptimization"" was moved to
   the OptimizerFactory now that the NodeFactory has gone.

b) Added @Override tags to methods that override existing methods (not those
   that merely implement an interface)

c) Removed unused imports and sorted import statements for ease of future
   maintenance by IDEs

d) Renamed variables that shadowed class members

e) Replaced usage of StringBuffer with StringBuilder

f) Restricted public visibility to package private for all classes, methods and
   members in compile/impl unless they needed more visibility according to
   actual usage.

g) Made List arguments to node classes use generics in those cases it was
   missing.

e) Renamed some node types to make the the type mirror the node class correctly
   (there were only very few exceptions to that rule), e.g. LIKE_OPERATOR_NODE
   -> LIKE_ESCAPE_OPERATOR_NODE since the class is called
   LikeEscapeOperatorNode.

f) Reduced scope of some variables: initialized to null values never used long
   before actual usage in code. By moving the declaration closed to usage, the
   unnecessary initialization could often be removed.

g) Fixed some spelling errors in comments.

h) Renamed some SQL-related constants (StoredFormatIds, TypeId) from ""longint""
   "" to ""bigint"" to reflect Derby SQL syntax.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495305 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
92a2169d3910ceeda47cbac68783a9cabd9ec3e8,2012-02-15T19:22:58Z,['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java'],"DERBY-866: Add tests for NATIVE/LOCAL authentication in databases accessed via the jar and classpath subprotocols.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1244666 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0ede6f3a860d9ce45021047180bfa63301ca38e0,2012-06-01T14:30:38Z,"['java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-5488: Adjust top level index.html (and JDBC 4.1 javadoc) to note that the JDBC 4.1 DataSources should be used on Java 7 and higher as well as on Java 6.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1345197 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bbd6aff4a0747159737ba23d5cbc9c56a63d5cd3,2014-02-18T20:33:20Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Point matching refinement clauses into the row returned by the driving left join of the MERGE statement; commit derby-3155-27-aa-adjustMatchingRefinements.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1569521 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
20b2fd9c5a42c6e9f1fd09fc641a325fecfe85e1,2013-01-31T17:49:44Z,"['java/client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java']","DERBY-6000: Add JDBC 4.2 java.sql.PreparedStatement.executeLargeUpdate() to embedded and client drivers.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441088 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b4177107285e33dbe1ed123c930fb6e15428b94f,2013-08-12T18:23:39Z,['java/client/org/apache/derby/client/am/LogicalConnection.java'],"DERBY-5560 Java deadlock between LogicalConnection40 and ClientXAConnection40

Patch contributed by Brett Bergquist



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1513218 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
ceaf7dfd1aeec51b52713792391ec6a3b77f4a1e,2012-05-30T00:47:27Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/TransactionFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/xact/InternalXact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/storeless/org/apache/derby/impl/storeless/NoOpTransaction.java']","DERBY-5494 Same value returned by successive calls to a sequence generator flanking an unorderly shutdown.
DERBY-5780 identity column performance has degredated 

The previous patch for DERBY-5494 had the unintended affect of forcing a 
synchronous write for all nested user transactions at abort time.  This
in turn caused identity column inserts to have one synchronous write per
insert as the nested user transaction is destroyed for each insert which
does an abort each time.

To solve this interfaces were changed so that calling code could set the
default commit sync behavior when the transaction was committed rather than
count on the ""type"" of transaction.  Nested user transactions used for identity
columns have default set to not sync, and the rest of the nested user transactions
default to syncing.  Behavior of other types of transactions should not
be affected.  User transactions still sync by default and internal and ntt's still
default to not sync.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1344065 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
27fbf3305bc9b531f7b1d60409eeee5aed4e74de,2012-07-16T07:22:45Z,"['java/build/org/apache/derbyBuild/classlister.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/CharacterEncodings.java', 'java/drda/org/apache/derby/impl/drda/ClientThread.java', 'java/drda/org/apache/derby/impl/drda/CodePointNameTable.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/Session.java']","DERBY-5840: Compile network server code with source and target level 1.5

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1361925 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5baee936bfc3cfad872489a9b57eb39bec6900b6,2012-11-19T13:22:58Z,"['java/engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableHashtable.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableIntHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableLongHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableProperties.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IUndo.java']","DERBY-2920: Remove unused readExternal() methods


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1411164 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f6fea403ba3055ddac66c2b3fa1f72fa8cc245f8,2013-01-15T09:52:24Z,"['java/engine/org/apache/derby/impl/store/access/btree/BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeForwardScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeLockingPolicy.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeMaxScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2INoLocking.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLocking1.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLockingRR.java']","DERBY-6041: Remove unused parameters from the BTreeLockingPolicy interface

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1433331 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b60a998f0120af0e71da30cf6475b308ba88ec67,2012-03-13T17:26:17Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/error/SQLWarningFactory.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5648: Raise an error if NATIVE password maintenance is performed on a missing user.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1300248 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a2ecbd3eaa631be3ff5eefc86561c287b43e1603,2014-08-13T14:47:30Z,"['java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java']","DERBY-6117 Silently swallowed SecurityExceptions may disable Derby features, including security features.

Patch derby-6617-3b. It adds reporting of the swallowed
SecurityException in FileMonitor#createDaemonGroup.

To get that printed I also i had to to make sure to dump the temporary
log in a change added to BaseMonitor#runWithState.

Additionally, I discovered that Derby became unbootable if we lack the
modifyThreadGroup permission: the monitor in such an event, lacking a
proper handler, thought it was already initialized so subsequent boot
attempts (from a non-system thread so we wouldn't see the
modifyThreadGroup issue) would also fail. I added a handler to clear
the monitor to fix this.

A new test fixture, testModifyThreadGroup checks that the warning
message being written to the console.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1617737 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7b87db0674fdb92e2ebf23356c313afe7feedb94,2013-07-27T23:36:00Z,['java/engine/org/apache/derby/impl/sql/compile/ValueNode.java'],"DERBY-673: Get rid of the NodeFactory

Javadoc fix.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1507747 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
4bdaec2078aab325696701b34b59f2b5b19a5e1f,2013-11-01T09:50:15Z,"['java/client/org/apache/derby/client/am/ClientStatement.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java']","DERBY-5806: Fix parsing of empty string in DRDAConnThread. Set ClientStatement.sqlMode_ correctly for empty statements.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537874 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
57465efaee83ee70e8fcf4b11992b5ab90fd1657,2013-04-15T17:00:53Z,"['java/engine/org/apache/derby/catalog/types/DefaultInfoImpl.java', 'java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/engine/org/apache/derby/catalog/types/ReferencedColumnsDescriptorImpl.java', 'java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/engine/org/apache/derby/catalog/types/RowMultiSetImpl.java', 'java/engine/org/apache/derby/catalog/types/TypeDescriptorImpl.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java']","DERBY-3177: Cleanup suspect coding practices in the types package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1468143 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8dc2ebcadad5971a6abeb4b077ec2916a4164e53,2012-04-02T11:00:51Z,['java/drda/org/apache/derby/drda/NetServlet.java'],"DERBY-5639: Minor code cleanup for NetServlet

Added basic protection against XSS.

Patch file: derby-5639-4a-xss.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1308297 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
8a0b9782ac6582bbf37959a103ed5378cdea0d5e,2015-05-22T02:45:45Z,['java/shared/org/apache/derby/shared/common/error/DerbySQLIntegrityConstraintViolationException.java'],"DERBY-6800: Implement DerbySQLIntegrityConstraintViolationException class

This change adds the new DerbySQLIntegrityConstraintViolationException class,
which extends java.sql.SQLIntegrityConstraintViolationException, but adds
additional methods getConstraintName and getTableName.

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1680979 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
434e1655b2c2e96c37880c44e93c5bc94496a1f7,2013-06-25T12:36:30Z,"['java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java']","DERBY-6262: Simplify message-generating methods using varargs

Use varargs in EmbedConnection.newSQLException() and
ConnectionChild.newSQLException().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1496449 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
bbd82de408c9ca1a68a13da938c3019c9fd39875,2012-11-28T14:16:31Z,"['java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/sql/catalog/SystemColumnImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-6003: Create row templates outside of the generated code

Initial cleanup: Remove unused field from TypeId, and remove the
corresponding parameter from the constructor.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1414718 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
62907283eecdf6d88372f643231d7e7c66378576,2013-06-27T03:58:38Z,['java/engine/org/apache/derby/iapi/db/PropertyInfo.java'],"DERBY-6264: Improve test coverage of org.apache.derby.iapi.db.PropertyInfo

This patch was contributed by Ahsan Shamsudeen (ahsan dot competition at gmail dot com)

This patch removes several unused methods from the PropertyInfo class. These
classes were part of the original Cloudscape SQL-J language many years ago,
but are not used in Derby.

Removing the unused methods simplifies the class. Should we ever decide to
revive the features of the SQL-J language, we can recover these methods from
the older versions of the class in Subversion.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497205 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
b23250c05588b32f307283d1564963d264ddc67c,2014-06-25T12:13:32Z,['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java'],"DERBY-6637: test errors failures in lang.XMLTypeAndOpsTest, XMLBindingTest and XMLConcurrencyTest with ibm jvms

Work around quirk in IBM JVMs when security manager is enabled by
broadening a catch block to include the exception thrown by IBM in
such cases.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605364 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c69a52975c86adc6d1ded5863284e2c913a61689,2011-12-07T01:21:25Z,['java/engine/org/apache/derby/iapi/services/info/JVMInfo.java'],"DERBY-5519 Update code in JVMInfo#derbyVMLevel to give correct results for Java 7 and provisionally for 8.

Fixed with patch derby-5519.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1211257 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
300e268c33b999c2e3b92c3b7a729df05f0eec88,2013-01-08T07:13:43Z,['java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java'],"DERBY-6027 ORDER BY a cast expression gives NPE

Patch derby-6027b, plugging this hole and adding accompanying tests.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1430150 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
18a6fb272a26cab64131c81304162f4e3765d429,2014-05-16T23:16:13Z,"['java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RISetChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","DERBY-6576 A immediate Fk constraint blows up iff its referenced PK is deferred and we modify a duplicate key column

Patch derby-6576-3. We need to keep better track of how many rows are
deleted/modified of each key when we are doing deferred code path
deletes since the actual deletes doesn't happen until after all the
checking.

The patch does this by using a disk based hash table. Then after going
through all the rows/keys to be deleted/updated and adding them to the
hash table (one entry per unique key, with a counter), we compare the
number of key duplicate instances present with the number of (planned)
deletes. Unless at least one row would remain in the referenced table,
we have a violation of the foreign key constraint.

This method is used for both deletes in deferred row processing mode
and for updates, which always has this mode in the presence of foreign
key).

For deletes in direct delete code path, we simply check that at least
one row would remain when we do the delete.

Added extra tests, including a test that uses a compound fk/pk to
check that the index mapping happens correctly when we save the keys
to the temporary hash table.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1595384 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9eb1bd1219a56341e58528b3bf3ec1bb0666a360,2011-11-07T10:43:27Z,"['java/engine/org/apache/derby/iapi/sql/compile/NodeFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NodeFactoryImpl.java']","DERBY-4845: Improve the dependency tracking for our build targets

Move getCreateAliasNode() and mapTableAsVTI() out of NodeFactory to
prevent that they expose impl classes to iapi code.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1198695 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9f8442735d3d1d33a0ec0c7d007003702b9ed99b,2012-10-06T01:10:58Z,['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java'],"DERBY-5916 (java.lang.NullPointerException org.apache.derby.impl.store.raw.data.BaseDataFileFactory.stop() connecting to network server)

Check for the nullability of storageFactory before using it in shutdown code



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1394883 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
281f90334ade03375929047b9e1f68f372da4dbc,2014-08-29T08:02:59Z,['java/engine/org/apache/derby/security/SystemPermission.java'],"DERBY-6717: Policies with multiple SystemPermissions are not handled well

Override newPermissionCollection() and return an instance that is able
to distinguish between SystemPermissions with the same name and
different actions. The default implementation in BasicPermission only
considers the name of the permission.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1621257 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
373cf9d41b2c4744fc51c385980f63c8f552e7e0,2013-04-12T08:15:29Z,"['java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java']","DERBY-6168: Clean up registered format ids

Removed the format ids for the run-time statistics classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1467200 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9858a84876f60af70e43a53dfb20a2925eb0884d,2013-05-02T12:34:13Z,"['java/engine/org/apache/derby/iapi/sql/compile/OptTrace.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java']","DERBY-6211: Make it possible to plug alternative trace logic into the Optimizer.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1478347 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1ede0a8c4b6d407bf39d2a5e587dc8b11d9f7d40,2011-12-21T10:33:01Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java']","DERBY-5539: Harden password hashing in the builtin authentication service

Add random salt before hashing the credentials, and apply the hash
function multiple times.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1221666 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2f759ba313a308b5079ad576df57e00dbc0a2bd2,2012-05-25T10:44:38Z,['java/engine/org/apache/derby/impl/store/access/RAMTransaction.java'],"DERBY-3371: Remove unnecessary remove() before put()
in RAMTransaction.addColumnToConglomerate()

Map.put() replaces the old mapping for the key, if there is one, so
there is no need to remove it first.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1342566 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c9ef16647d6e139c54c35c8ed80246c7a0b965d9,2012-01-11T15:46:20Z,"['java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/LockTableConstantAction.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreePostCommit.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapPostCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/ReclaimSpaceHelper.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5564 Code does different things depending if derby.locks.deadlockTrace=true is set

original patch by Brett Bergquist, then modified by Mike Matrigali for submission.

Changes the code to always return 40XL1 as the SQL state when a lock timeout
occurs.  Previous to this change if deadlock diagnostics were enabled then
40X02 would be returned.  Internally multiple places in the code was not
expecting the second error code for a lock timeout.  Also it was agreed that
it was confusing for user applications to have to code for both states in
case they wanted to turn diagnostics on and off.  

Existing test cases were changed to match the new expected behavior.

The behavior in DDLConstantaction to immediately throw an error on first try
if a lock timeout is encounted with diagnostics enabled was preserved.  The
error thrown now will be with sql state 40XL1 and not 40X02 as before.  




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1230100 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
092cf8b28bf6e07ea2978305142a2a7ca01c3713,2013-01-02T16:55:38Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/OptionalTool.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6022: Add a system procedure for (un)registering optional packages of tools.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1427859 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b5a921a8be79ba72dadb0ea05c1f7f9a20fec5ef,2013-06-25T11:02:32Z,['java/client/org/apache/derby/client/am/LogWriter.java'],"DERBY-6262: Simplify message-generating methods using varargs

Reduce number of trace methods in LogWriter using varargs and
auto-boxing.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1496410 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
53cda201bf2465d684eac831bc5a4268df64507d,2012-07-27T12:26:08Z,"['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java']","DERBY-5871: Fix capitalization errors in messages with error codes in MessageId.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1366362 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
56c1dc22dc5036b048a2c0b6b772d7a0eae13c9f,2014-09-26T17:12:31Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/engine/org/apache/derby/iapi/services/context/SystemContext.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/db/DatabaseContextImpl.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCJava.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCache.java', 'java/engine/org/apache/derby/impl/services/daemon/BasicDaemon.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/daemon/SingleThreadDaemonFactory.java', 'java/engine/org/apache/derby/impl/services/jmx/JMXManagementService.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/services/stream/SingleStream.java', 'java/engine/org/apache/derby/impl/services/uuid/BasicUUIDFactory.java', 'java/engine/org/apache/derby/impl/sql/GenericLanguageFactory.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/DropDependencyFilter.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionFactory.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericExecutionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IFactory.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapConglomerateFactory.java', 'java/engine/org/apache/derby/impl/store/access/sort/ExternalSortFactory.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/D_DiagnosticUtil.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/jdbc/ResourceAdapterImpl.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java', 'java/engine/org/apache/derby/mbeans/Management.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/storeless/org/apache/derby/impl/storeless/StorelessDatabase.java']","DERBY-6648: Prevent application code from calling the public static Monitor methods; commit derby-6648-03-ac-monitor.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1627831 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
086e8176419d334504bbdebff447367c1108b3b7,2013-01-24T07:18:37Z,"['java/build/org/apache/derbyBuild/GeneratorBase.java', 'java/build/org/apache/derbyBuild/ReleaseNotesGenerator.java']","DERBY-6044: Fix poor word breaking in table on download page(s)

Some browsers break up DERBY-XXXX at the hyphen even though they shouldn't.
Work around this by using a div-element to size the first column of the table.

Patch file: derby-6044-1a-stop_breaking_up_jira_id.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1437872 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
a045b63998bac9369524ddcf09fd22e885c24e53,2013-05-23T08:26:21Z,"['java/engine/org/apache/derby/impl/services/locks/LockSpace.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Make the declared type of the lock groups HashMap<Lock, Lock> instead
of HashMap<Lock, Object>.

Stop suppressing unchecked conversion warnings in
PropertyConglomerate, and make all conversions checked.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485609 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9495437c8b640d689c8a67563097b86cb0cd6fca,2011-12-22T13:16:15Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/TypesImplInstanceGetter.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/ParameterValueSet.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRow.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/ReaderToUTF8Stream.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLPassword.java', 'java/engine/org/apache/derby/iapi/types/SQLRef.java', 'java/engine/org/apache/derby/iapi/types/SQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/StringDataValue.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/GenericParameter.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CharTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexValueRow.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ValueRow.java']","DERBY-866: Remove SQLPassword internal data type.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1222215 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4020781552ef30e828af0b9b60a15ae2e2614112,2012-08-13T12:54:48Z,"['java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/Decimal.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java']","DERBY-5873: Avoid unnecessary allocation of Number instances in client/server

Use BigDecimal's valueOf() factory methods instead of explicit constructor
calls where possible.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1372405 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c030c7861751591258e40cec0a9872ba52f6c284,2014-02-04T21:27:50Z,"['java/demo/localcal/src/AddEventRequest.java', 'java/demo/localcal/src/CalEvent.java', 'java/demo/localcal/src/CalendarController.java', 'java/demo/localcal/src/DatabaseManager.java', 'java/demo/localcal/src/DeleteEventRequest.java', 'java/demo/localcal/src/EventManager.java', 'java/demo/localcal/src/GCalendar.java', 'java/demo/localcal/src/GCalendarRequest.java', 'java/demo/localcal/src/NetworkDownException.java', 'java/demo/localcal/src/RequestManager.java', 'java/demo/localcal/src/UpdateEventRequest.java']","DERBY-6463  localcal demo seems to be obsolete and should be removed

Removed localcal directory, modified HTML files that referred to it.

Patch: DERBY-6463-2.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1564508 13f79535-47bb-0310-9956-ffa450edef68
",chaase3@apache.org,Camilla Haase
bbd2a0173145e78c1778858a4a3295a2137cd9f4,2013-06-12T19:09:33Z,['java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java'],"DERBY-6211: Commit derby-6211-06-ab-packageProtect-XMLOptTrace.diff, reducing the visibility of XMLOptTrace.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492378 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c0399dced2e026990bce930eead660637cdb756a,2012-01-25T14:14:03Z,"['java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-866: Prevent illegal changes to the on-disk version of derby.authentication.provider.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1235750 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6a270cbc09d9c007e0ad9dfba120c69a55122127,2013-08-02T12:46:53Z,"['java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java']","DERBY-6211: Don't instantiate new optimizers just to create empty CostEstimate objects; commit derby-6211-10-aa-makingCostEstimateObject.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1509671 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
870f7cd3a3f74712c5e83b43a17ffcd83d97a1a7,2012-07-30T16:27:06Z,"['java/build/org/apache/derbyBuild/MessageBuilder.java', 'java/client/org/apache/derby/client/am/SectionManager.java', 'java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5885: Re-order message args to correspond with argument numbers.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1367150 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1966619e30575bd99c30783d153ae658cf6bb0bc,2012-06-26T08:11:58Z,['java/engine/org/apache/derby/iapi/util/DoubleProperties.java'],"DERBY-5830: Make DoubleProperties.propertyNames() thread-safe

Don't store the property values in the intermediate Hashtable as they
are not needed. They may be null if the Properties instances are
modified after the recursive calls to Properties.propertyNames(), and
trying to store a null value in a Hashtable results in a
NullPointerException, causing issues such as DERBY-4269.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1353852 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
493b80e2839ae5cd71d2014b4b1db40736e9ebb7,2014-08-25T17:20:12Z,['java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java'],"DERBY-6619 After silently swallowing SecurityExceptions, Derby can leak class loaders

Patch derby-6619-2.

The fix introduced in DERBY-3745 correctly is there in order to
protect against the case where the thread that starts Derby, has a
context class loader that is different from the system class
loader. In such cases, if the timer thread inherits the context class
loader, the context class loader will stay in memory until the Derby
engine is shut down, even if all other references to the class loader
are gone.

If the context class loader is the same as the system class loader, on
the other hand, such a ""leak"" would not be a problem, since the system
class loader will stay in memory until the JVM is shut down anyway.

We take advantage of this and only attempt to change the context class
loader if it is different from the system class loader.  With this
patch, no warning is printed to derby.log when starting the server
from the command line, and there's no warning when starting the server
using the API with a security manager installed when the context class
loader hasn't been changed from the default. However, if the server is
started using the API with a non-default context class loader, we do
see warnings in derby.log if a security manager is installed and the
permission to set the class loader is missing.

Added tests for this behavior. Moved utility methods from
UpgradeClassLoader to ClassLoaderTestSetup, a new decorator. It seemed
more logical to put them there to allow reuse.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620379 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
049f993f04e57f5dbd562367f559204d9ae0058c,2013-05-03T19:16:33Z,"['java/engine/org/apache/derby/iapi/db/OptimizerTrace.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptTrace.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/Level2OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/tools/org/apache/derby/impl/tools/optional/OptimizerTracer.java']","DERBY-6211: Cleanup optimizer trace support.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1478932 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a6e95d8080245d813c573cbac1ac4afb732b1c55,2013-06-03T08:55:21Z,"['java/engine/org/apache/derby/impl/services/locks/D_ActiveLock.java', 'java/engine/org/apache/derby/impl/services/locks/D_Lock.java', 'java/engine/org/apache/derby/impl/services/locks/LockSet.java', 'java/engine/org/apache/derby/impl/services/locks/SinglePool.java']","DERBY-6241: Remove SinglePool from trunk

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488904 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e3320c9cfe6a08f48dd3c2238467a275e1fc5cba,2012-02-22T06:05:55Z,['java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java'],"DERBY-5584: distinct grouped aggregates can return wrong results

This change addresses a problem that can arise when a GroupedAggregateResultSet
that contains a distinct aggregate is processed multiple times in the
same query execution.

The problem involves this section of GroupedAggregateResultSet:

                        /*
                        ** If there was a distinct aggregate, then that column
                        ** was automatically included as the last column in
                        ** the sort ordering. But we don't want it to be part
                        ** of the ordering anymore, because we aren't grouping
                        ** by that column, we just sorted it so that distinct
                        ** aggregation would see the values in order.
                        */

The solution that was implemented in GroupedAggregateResultSet prior to this
change was assuming that the result set was only opened and read once; it
physically removed the last column from the ordering columns as a side effect
of processing the result set.

However, during a query plan such as this cartesian product, the GROUP BY
subquery is created, then opened/read/closed, opened/read/closed, etc.,
once per row of the other side of the cartesian product.

In that case, we can't physically remove the last column each time, because
then the second and subsequent times that we read the result set, we are
sorting on the wrong columns and we produce the wrong results.

The solution is to have a better way of handling that extra invisible column,
so that we can consider it sometimes, and ignore it other times,
without doing something as destructive as physically removing it from the
ordering array, which is what we do now. 

Note that Derby has had a limitation that there be at most one DISTINCT
aggregate in a query for a long time, probably ever since it was written.
See, for example, this link from the 10.2 docs:
http://db.apache.org/derby/docs/10.2/ref/rrefsqlj32693.html

        Only one DISTINCT aggregate expression per SelectExpression is allowed.
        For example, the following query is not valid:

            SELECT AVG (DISTINCT flying_time), SUM (DISTINCT miles) FROM Flights

The GroupedAggregateResultSet implementation is aware of this limit, and knows
that there is at most one distinct aggregate in the result set. This change
neither increases that dependency nor lessens it; I'm just noting it here
for the record.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1292134 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
c655d66cd0cf1350b8174c6098e417dec92e7955,2014-02-26T07:07:24Z,['java/engine/org/apache/derby/iapi/types/SQLDecimal.java'],"DERBY-6213: Deprecate support for Java 5 and CDC

Remove reflection code in SQLDecimal.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1571938 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5d3b815a4f6d000eddb231beef898859c54ab8ab,2012-04-19T11:59:39Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java']","DERBY-5693: BUILTIN should say passwords are hashed not encrypted

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1327910 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
856f8920445ea07819fcffe3d8140265cc0e0444,2014-01-17T16:54:43Z,['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java'],"DERBY-3155: Replace correlation names on the left side of the SET clauses in MERGE statements: commit derby-3155-14-aa-replaceCorrelationNamesOnLeftSideOfSETclauses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1559183 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
49901a4baf2c4c69cc3d104c52df6c3b37780b6f,2012-01-31T18:14:41Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-866: Add expiration limits for NATIVE passwords.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1238727 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
f17b81fe74871b4700817d2eb2fbf979d215d506,2012-08-13T12:54:27Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement169.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement169.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet169.java', 'java/engine/org/apache/derby/jdbc/Driver169.java']","DERBY-5883: Simplify JSR-169 implementation class tree

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1372404 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a57220c2ddbbafeea6f66d565263aceefa5b8228,2014-10-07T12:28:52Z,"['java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSavepoint.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java']","DERBY-6751: Improve performance of ResultSet.next() by caching the lcc in ConnectionChild; tests passed cleanly on derby-6751-02-ab-cacheLCC.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1629866 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ec69f5f301c0caee54512c9a0ce06753a132ddec,2013-04-10T15:00:28Z,"['java/engine/org/apache/derby/impl/jdbc/EncryptedLOBFile.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java']","DERBY-6161: Simplify code that handles LOB files

- remove EncryptedLOBFile.close() and let it inherit from super class

- move code that doesn't need privileges out of privileged block in
  LOBStreamControl.init()

- remove unnecessary exception handling in privileged block in
  LOBStreamControl.deleteFile()

- fix typos and misformatted @throws clauses in javadoc comments

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1466503 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7e7a589002905adf5d945daef7b8fd7bd8dbc5bd,2013-05-15T18:06:28Z,"['java/engine/org/apache/derby/iapi/store/access/conglomerate/Sort.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeInserter.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeScan.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeScanRowSource.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeSort.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/MemByteHolder.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RFResource.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogAccessFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/xact/ConcurrentTransactionMapFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionMapFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTable.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactXAResourceManager.java', 'java/engine/org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.java', 'java/engine/org/apache/derby/impl/store/replication/net/ReplicationMessageReceive.java', 'java/engine/org/apache/derby/impl/store/replication/net/ReplicationMessageTransmit.java']","DERBY-6213: Generify impl/store packages.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482984 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7ed0ef04265fdaa8f926d8f6273693c5f32f6014,2015-06-29T20:11:49Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6820: Improve error handling in XmlVTI

This patch refines some of the error-handling behavior in the XmlVTI class:
- next() no longer calls printStackTrace if an exception is encountered.
- the SQLException thrown by next() now chains the original exception as cause
- an XMLErrorHandler is installed to process any internal parsing errors
- the XMLErrorHandler closes the input source, so resources can be freed

No new tests are included in this change. Additional new tests which exercise
these code paths are being developed as part of DERBY-6810, however, and
will be submitted in the near future.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1688297 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
4f7eee8a87813dab15257f7974d62a24ac0fd79d,2014-03-24T09:13:13Z,"['java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/engine/org/apache/derby/iapi/services/io/FilePermissionService.java', 'java/engine/org/apache/derby/iapi/services/io/FilePermissionServiceImpl.java', 'java/engine/org/apache/derby/iapi/services/io/FileUtil.java', 'java/engine/org/apache/derby/impl/io/DirFile.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/io/StorageFile.java']","DERBY-6503: ClassCastException when network server cannot restrict file permissions

Make sure the underlying IOException is exposed if the network server
fails to restrict file permissions. The original exception used to be
shadowed by a ClassCastException.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1580789 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
cc2307182cad0a900d9651f5d251d578cf35eee9,2012-03-06T08:49:03Z,"['java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java', 'java/storeless/org/apache/derby/impl/storeless/NoOpTransaction.java', 'java/storeless/org/apache/derby/impl/storeless/StorelessService.java']","Removed TODO from the comments - there is nothing left to do as the storeless
service will never have a working store. The TODOs are also annoying because
they typically show up in the task list of IDEs.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1297385 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
96e2ea4066ce8b3351533f1012ede24631057e8a,2014-04-04T01:17:37Z,['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java'],"DERBY-590: Require hard-upgrade to 10.11 in order to use the Lucene plugin; commit derby-590-15-aa-requireHardUpgrade.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1584493 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
aad605761b7f5ef0c6f22459155fac97c75974f9,2012-10-23T14:30:01Z,['java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java'],"DERBY-672: Add support and tests for dependencies between user-defined types and aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1401303 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
78b8a9c8b2a30ea0f6e350ffca19df6237efc00a,2012-02-28T08:01:18Z,['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java'],"DERBY-5603: EmbedConnection.clearLOBMapping() incorrectly clears lobFiles causing a ConcurrentModificationException 

Rewrote map iteration code.
Fixed incorrect comment.
Made getlobHMObj private.

Patch file: derby-5603-1a-avoid_concurrentmodification.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1294512 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
475fc20137eae7067a89175f8e924d8fc2c3cc40,2013-04-26T05:15:49Z,"['java/client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java']","DERBY-6125 Code clean up in client driver. 

Javadoc fixup after changes in derby-6125-rename-01-c (svn 1471245).



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476040 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
c6892a1d01448ac745a16afcf57d6793b60609a5,2012-10-05T12:26:41Z,"['java/build/org/apache/derbyBuild/MessageBuilder.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/locks/Lockable.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/ConglomerateFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/log/LogFactory.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/ReadOnly.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTable.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTableEntry.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_GrantRevoke.java']","Fix some common typos in code comments.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1394480 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6ab10839d238b59ae3e43177ead275935278a834,2013-11-25T17:02:40Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapRowLocation.java']","DERBY-3155: Add support for UPDATE action of MERGE statement: derby-3155-08-ah-updateAction.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1545343 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b8c92c0fa25c7f47c18314a442a879eeea4989a3,2012-05-07T05:00:46Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"Removed inaccurate comment. While integer reads/writes are atomic, we must also
use volatile for this code to be thread safe. We are, and that means we are 
using synchronization.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1334873 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
878e2115faf34ceb0b761cfeb859cbb1887e706b,2012-01-23T13:14:52Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java']","DERBY-5406: Intermittent failures in CompressTableTest and TruncateTableTest

Retry compilation if it fails because a conglomerate has disappeared.
This may happen if DDL, compress, truncate or similar operations happen
while the statement is being compiled. When trying again, the compilation
should find the new conglomerate if one exists, or fail with a proper
error message if the SQL object has been removed.

This is a workaround for a race condition in the dependency management.
When binding a statement, the compiler typically builds descriptor
objects (like a TableDescriptor) from the system tables and then registers
the statement as a dependent on that descriptor. However, another thread
may at the same time be invalidating all dependents of that descriptor.
It is possible that this happens right before the current statement has
been registered as a dependent, and it will never see the invalidation
request. Once it actually tries to access the conglomerate associated with
the descriptor, it will fail with a ""conglomerate does not exist"" error,
and since the statement did not see the invalidation request, the compiler
doesn't know that it should retry the compilation.

This fix also backs out the changes made in revision 1187204, as they
addressed a subset of the cases handled by this broader fix, and are not
needed any more.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1234776 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
11f7ee3bcbc9799ba4bff23505bbf6e32fa95dd5,2014-02-14T18:28:21Z,"['java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-6464: Improve the encapsulation of ResultSetNode; commit derby-6464-04-ac-ResultSetNode.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1568436 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8f8881fd32b2a4cf924dff56b5226a2dc9f7f80e,2013-11-01T10:31:02Z,['java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java'],"DERBY-5823: Multi-row insert fails on table without generated keys with RETURN_GENERATED_KEYS

The fix contains two parts:

1. Don't collect generated keys if the statement does not actually
   generate key values. (This is the fix for the reported problem.)

2. Cache the array of generated key columns between executions. In the
   existing code, the array of key columns was created only on the
   first execution. Since it wasn't cached, it was null on all
   subsequent executions. When it is null, all columns are collected
   into the temporary row holder, which wastes space. Now, only the
   key columns are collected, also on re-execution.

The test case was contributed by Kristian Waagan.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537888 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
41935d54ad973f2b0f50f8af06db990ce014e753,2014-06-18T18:40:33Z,['java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java'],"DERBY-6552 The public api includes methods inherited from superclasses which aren't in the public api and so have no javadoc comments

Javadoc fix.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603568 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
211adc3c4892aa47bbc68185505dce7f3b0eabc2,2013-10-25T08:22:25Z,"['java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor_v10_10.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerInfo.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Remove logic in the readExternal() and writeExternal() methods of
TriggerInfo and TriggerDescriptor that was originally put there for
compatibility between different Derby versions. Since these objects
are only persisted as part of a stored prepared statement, and Derby
always clears all stored prepared statements on version change, there
is no requirement that TriggerInfo and TriggerDescriptor instances
written by one Derby version must be possible to read by other Derby
versions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535654 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
99aa241182f5f914609d6207b6738d020458e491,2013-10-17T07:46:39Z,['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java'],"DERBY-6361: Valid statements rejected if Derby has not implicitly
created the current user's schema.

Make compilation of the generation clause accept that the original
compilation schema does not exist.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1532997 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e8afaebfd73a50955da5eef5d6b6db2b63fc3b2a,2011-11-09T09:35:15Z,['java/engine/org/apache/derby/iapi/services/io/FileUtil.java'],"DERBY-5492 Restrictive file permissions: permissions removed also for owner on NTFS if Acl does not contain explicit entry for owner

Patch derby-5492-2 which solves this issue plus make one other
adjustment, see item two below.

- Construct a new AclEntry for the owner with all rights, and removed
  existing ones (NTFS). This should handle the error seen in Oracle's
  regressions.

- For Solaris/ZFS and similar file systems which support both Posix
  file attributes view and ACLs, don't touch the ACLs but stick to the
  Posix flags.

 For the latter my rationale is as follows: Principle of least
 surprise: most users never touch the ACLs but use the more familiar
 Posix file masks. It turned out the existing Derby implementation,
 although protecting the file adequately, showed a ""+"" in the ls(1)
 listing indicating that the settings could not be directly mapped
 onto the Posix model. The reason was that we removed more permissions
 than the plain read,write, and execute. Since ZFS internally builds
 on ACLs, the ls(1) listing would should that Derby had been tinkering
 with the non-mappable ACL permissions. I think it is better to stick
 to the Posix permissions by default. If people are using ACL
 functionality they are likely more than average concerned with
 security and can run with default file permissions and take full
 responsibility of the permissions fo created filed.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1199673 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
bda7291d62819bc38c1535f40ab397191feb9111,2012-12-27T10:02:11Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java']","DERBY-6003: Create row templates outside of the generated code

Make IndexRowToBaseRowResultSet use an ExecRowBuilder instead of a
generated method to produce row templates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1426151 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1f18dc31619390bfee7e71c55eb315db2bd7662b,2013-06-17T11:14:45Z,"['java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/SqlWarning.java', 'java/engine/org/apache/derby/iapi/error/SQLWarningFactory.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/services/i18n/MessageService.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedClob.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/shared/org/apache/derby/shared/common/i18n/MessageUtil.java']","DERBY-6262: Simplify message-generating methods using varargs

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493714 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6da88fc6f2325cc1dceda3ff740161504683536e,2014-09-15T09:03:33Z,"['java/engine/org/apache/derby/iapi/services/cache/CacheManager.java', 'java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/impl/services/cache/ClockPolicy.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCache.java', 'java/engine/org/apache/derby/impl/services/cache/ReplacementPolicy.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java']","DERBY-6733: Implement an MBean for monitoring caches

Add an MBean for the statement cache.

Fix the values returned from getAllocatedEntries() and
getUsedEntries(). The first patch got them mixed up.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1624974 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
bce78c96d721837c39ab32fd0074e71a54cc1838,2012-05-22T14:01:33Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java']","DERBY-3790: Investigate if request for update statistics can be skipped for certain kind of indexes, one instance may be unique indexes based on one column.

Make update statistics code skip generation of statistics for single-column
unique indexes. This affects the istat daemon, the create index code, and the
SYSCS_UTIL.SYSCS_UPDATE_STATISTICS system procedure.
As a safe-guard a temporary debug property has been added to allow users to
revert to the old behavior in case the changes mess up their query plans.
Adjusted tests for the reduced number of statistics entries.
Added new tests for the debug property, for upgrade, and for behavior
verification.

Patch file: derby-3790-1c-skip_stats_scui.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341481 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
0af1f882a8d733446656542a4f55aba7785828a3,2012-11-06T17:41:53Z,['java/engine/org/apache/derby/impl/sql/compile/SelectNode.java'],"DERBY-5954 NPE in SELECT involving subselects and windows functions

Patch ""derby-5954-with-test-2"" makes the code only look for in-lined
window specification in simply contained select lists. Adds a new test
case to OLAPTest which would fail with an NPE before this patch,
cf. original JIRA problem.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1406240 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d389f7d54c5e7c63f5423b6745d98e98a5bfa302,2012-08-31T16:55:20Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java']","DERBY-672: Add support for DISTINCT user defined aggregates in the SELECT list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1379505 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2277df22efd124bc5fef9e1d9650687499daa4df,2014-03-29T17:32:18Z,"['java/engine/org/apache/derby/impl/optional/lucene/LuceneListIndexesVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneQueryVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneSupport.java', 'java/engine/org/apache/derby/optional/LuceneUtils.java']","DERBY-590: Make the Lucene plugin locale-sensitive; commit derby-590-09-aa-localeSensitiveAnalysis.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583032 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
f798a41afd09048c795a955626c4c14c7276a1d0,2012-10-10T13:31:41Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java']","DERBY-672: Add tests of user-defined aggregates on all builtin Derby types except for XML.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1396589 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ea36b4207a2ce0c62e1a81b0f7db369270a3b26f,2013-12-11T22:36:47Z,['java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java'],"DERBY-6419 Make BTree scan honor OPENMODE_LOCK_NOWAIT for row locks

A follow-up patch: derby-6419-followup.

Only short circuit waiting for lock in BTree scan to check duplicates
for a deferred unique/pk constraint if constraint mode is deferred
(i.e. not if immediate).

Added a test case lifted from UniqueConstraintMultiThreadedTest, which
exposed the issue when we run the regressions with default deferrable
by default (see DERBY-532).



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550299 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
503b49c47247f8d797a861c985aae475f1498b21,2013-05-24T09:28:29Z,"['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerEventActivator.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Fix compiler warning in CursorNode.init() by changing parameter from
List<String> to String[] so that the cast from Object can be checked.

Fix compiler warning in TriggerEventActivator by using a List instead
of an array to store generic types.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485984 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a809756dcaaf253cdbe727b271452609251b94c6,2013-06-03T08:56:40Z,"['java/engine/org/apache/derby/impl/store/raw/xact/ConcurrentTransactionMapFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/ConcurrentXactFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionMapFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTable.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java']","DERBY-6242: Merge ConcurrentXactFactory into XactFactory

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488905 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6ac51606d9f69026df51465fc74e088a9cecdbac,2014-06-19T17:41:36Z,"['java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java']","DERBY-6621: Make client-side getLogWriter() method private; tests passed cleanly on derby-6621-02-aa-move-getPrintWriter.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603973 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7e7bd0bd935681590707a249e712a207058ce157,2012-05-29T08:04:43Z,['java/engine/org/apache/derby/impl/sql/compile/JoinNode.java'],"DERBY-5787: [patch] remove dead allocation 

Removed dead allocation.
Patch contributed by Dave Brosius (dbrosius at apache dot org).

Patch file: remove_dead_allocation.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1343593 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
87c74010813e4c18f87142af426caefd684e9be8,2014-08-12T14:19:45Z,['java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java'],"DERBY-5003 NPE in ReplicationRun_Local_3_p5 when stopping slave after purposefully crashing master

Patch to collect diagnostics (sane jars only): derby-5003-diagnostics.diff

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1617484 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
cb25c6566a700bd4013c106eb5981f104031819e,2012-10-19T13:14:43Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java']","DERBY-672: More negative tests for illegal placement of user-defined aggregates in various statements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400083 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
aa302c30bc69cb120be583bf9011f942df7c07c3,2014-10-01T04:28:01Z,"['java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteGeneratedColumnsResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","DERBY-6742(For update statement, collect generated keys if Statement.RETURN_GENERATED_KEYS flag is supplied to the JDBC call.)

This commit now allows JDBC statement to receive a resultset for auto generated keys for an UPDATE statement updating the generated values with DEFAULT clause. Such a resultset will be generated only if the UPDATE statement updated a single row and there were generated columns involved in the update. This functionality already exists for INSERT statement. It is currently implemented for INSERT statement by calling VALUES IDENTITY_VAL_LOCAL() from EmbedStatement.getGeneratedKeys(). I have used this existing mechanism to collect generated values resultset for UPDATE too. This means that the scope of IDENTITY_VAL_LOCAL() function has grown from INSERT statement to also include UPDATE statement. This will require us to update the documentation for IDENTITY_VAL_LOCAL(). I have created DERBY-6753(Docs for IDENTITY_VAL_LOCAL needs to be updated to indicate that the return value will be impacted by single row UPDATE of identity column) for the documentation task.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1628596 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
374d58fee6063b6f96f3b6c0c6f24fb6d21d5fcb,2013-10-31T19:28:47Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-6383(Update trigger defined on one column fires on update of other columns). 

This regression is caused by DERBY-4874(Trigger does not recognize new size of VARCHAR column expanded with ALTER TABLE. It fails with ERROR 22001: A truncation error was
encountered trying to shrink VARCHAR)

The regression is for Statement level triggers. The statement trigger gets fired incorrectly for any column update rather than just the column specified in the UPDATE of column clause. The fix is going to ensure that SYSTRIGGERS has the correct list of columns on which trigger should be fired. Row level triggers work fine. The only workaround at this point is to drop and recreate the statement triggers. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537593 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
2a8df97dc47beb1dd093e6396b985686ba8ab3a2,2014-04-03T01:18:49Z,['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java'],"DERBY-590: Enforce coarse-grained authorization checks in the Lucene plugin; commit derby-590-14-aa-coarseGrainedAuthorization.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1584242 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bb4cfe91c4b83d555d6425353e778540f71f9db8,2012-04-09T15:38:53Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SequenceDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-5687: Back out the concurrency improvements introduced by DERBY-4437.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1311285 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a69ff90a5f97f98d2cb7f0ae3a7d34d43d2a498c,2014-07-11T09:00:32Z,['java/optional/org/apache/derby/optional/lucene/DerbyIndexInput.java'],"DERBY-6650: Lucene tests fail on compact profile 2

Implement the IndexInput.slice() method required by Lucene 4.9. Lucene
4.9 works on compact profile 2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609655 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2f8e6fbd1c003ccb657a56b9009902c5449f4be0,2014-02-05T18:44:05Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java']","DERBY-3155: Revamp how columns referenced by WHEN [ NOT ] MATCHED clauses are linked to the columns coming back from the driving left join of a MERGE statement; commit derby-3155-20-aa-reworkColumnMatching.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1564874 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5705f5bf26152d6c837b8f788d66d9932b24b609,2012-04-17T18:40:15Z,"['java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java']","DERBY-5494

Prior to this fix the nested user update transaction used by sequence updater
was doing a ""lazy"" commit, where the log record for the commit waw written
to the stream but not forced to disk.  It would get forced to disk by any
subsequent user transaction commit.

Changed system to default doing a real commit for all nested user update
transactions, and those that don't need that behavior should use commitNoSync().
Changed identity columns to use the commitNoSync() to keep same performance
for those operations.

Includes the test contributed by rickh as part of DERBY-5493 change.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1327218 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
0919fda2d9173dfc9eff3d108227cb4f02560a30,2012-07-30T19:19:41Z,['java/build/org/apache/derbyBuild/MessageBuilder.java'],"DERBY-5878: Add ability to add comments for translators to the message descriptors in messages.xml.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1367230 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
af2d9d288206fe647639cb22201b7ac774db57d1,2013-02-05T11:48:28Z,['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java'],"DERBY-6011: Prefer unique index when accessing a small number of rows

If there is a choice between accessing a table with a unique index scan
that is guaranteed to return at most one row, and some other non-covering
index scan that might return multiple rows, adjust the cost of the other
scan so that it includes the cost of fetching at least one row from the
base table.

This change makes it more likely that the unique index is chosen if both
of the index scans are believed to return no more than one row on average.
The unique index is the safer choice since it is guaranteed to return at
most one row. The other index may in the worst case return many rows,
which requires more locking and increases the likelihood of deadlocks.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1442554 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
80d6162294ce31d6215152a3d7e32a7ba433f2c3,2013-04-23T18:42:44Z,"['java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/engine/org/apache/derby/vti/StringColumnVTI.java', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java', 'java/tools/org/apache/derby/tools/JDBCDisplayUtil.java']","DERBY-6197: Cleanup various encapsulation problems.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471087 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e081c8565e18f2ac7901a781e7b716aff46ce71a,2013-01-09T20:23:27Z,"['java/build/org/apache/derbyBuild/classlister.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/tools/org/apache/derby/impl/tools/optional/ForeignDBViews.java']","DERBY-6022: Add optional tool for bulk-importing data from foreign databases.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1431041 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
63729073dad740153e675b6723787657589b63ae,2013-07-23T08:07:21Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java']","DERBY-1028: Change constructors in NetConnection classes to use LogWriter instead of NetLogWriter

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1505928 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
10acff8dce3450075bdc631046c9250ccecd5bb3,2014-12-18T02:04:59Z,['java/drda/org/apache/derby/drda/NetworkServerControl.java'],"DERBY-3195; Describe if default security manager & policy is installed or not on each of the mechanisms to start the network server.
   updating the javadoc for NetworkServerControl to reflect information about the security manager.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1646373 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
5b79ae0774a8f30b1eeedbcf256d6a46d3687a4d,2014-03-23T20:10:25Z,"['java/engine/org/apache/derby/impl/optional/lucene/LuceneQueryVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneSupport.java']","DERBY-590: Cleanup some suspect coding practices disclosed by running the Findbugs lint tool; commit derby-590-02-aa-cleanupFindbugsErrors.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1580587 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1b06de684f3bc3780abe6b61b33567cdd9d7d344,2012-03-30T13:05:49Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-5083: Document automatic update and creation of index cardinality statistics (istat)

Fixed comment, which used an incorrect value for the trace property.
Removed two TODOs.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1307392 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
4cc0287cfe5318155d8b4a5bf33df8752ff61b42,2014-04-29T00:23:52Z,"['java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RISetChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-532 Support deferrable constraints

Deferred foreign key constraint. Patch derby-532-fk-7.

The approach taken for deferring foreign keys is similar to that taken
for the other constraints: when we detect a violation inserting or
updating the referring table, and when detecting a violation when
deleting or updating the referenced table (only when we have ON DELETE
(or UPDATE) NO ACTION), we save the key in a temporary table instead
of throwing an exception. At check time, typically on commit, we
revisit first the supporting index of referencing table to see if
there might still be a problem. If that key is (still) present, we
must also check the corresponding index in the referenced table. If
that is found, all is good. Otherwise we throw.

Patch details:

M       java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java
M       java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java

Move logic related to constraints checking to
DeferredConstraintsMemory. 

M       java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java

New logic from LanguageConnectionContext; added logic for the case of
foreign key constraints violation memory and checking. Make old ""if""s
on object type object oriented: new interface methods in
ValidationInfo: possiblyValidateOnReturn and validateConstraint which
are implemented differently for each constraint type.

M       java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java
M       java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java
M       java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java

More fk info to bulk insert; smaller refactorings.

M       java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java

Change the method hasNonSelfReferencingFK to getNonSelfReferencingFK;
we need to get at them, see AlterTableConstantAction for truncate.

M       java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java

Refactored logic to DeferredConstraintsMemory#compressOrTruncate.
Allow truncate (if deferred and NO_ACTION constraints only) of
deferenced table.

M       java/engine/org/apache/derby/iapi/types/SQLBoolean.java
M       java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java
M       java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java

Minor refactorings.

M       java/engine/org/apache/derby/impl/sql/execute/FKInfo.java

Extended with information about deferred constraints; conglomerate ids and constrain ids.

M       java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java

More information collection to support extended FKInfo, see above.

M       java/engine/org/apache/derby/impl/sql/compile/TableElementList.java

Extra predicates to avoid logic for unique and primary key constraints to inferere with
deferred foreign keys.

M       java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java

Remove foreign keys as ""not supported"", minor refactorings.

M       java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java

Added arguments, refactorings.

M       java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java

This is where we actually defer when we see a fk violation at insert/update of referencing table.

M       java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java

Minor interface changes: new member variable: lcc

M       java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java

This is where we actually defer when we see a fk violation at bulk insert
into referencing table.

M       java/engine/org/apache/derby/impl/sql/execute/RISetChecker.java

Minor interface changes; added parameters.

M       java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java

This is where we actually defer when we see a fk violation at delete or update of
a row in the referenced table.

M       java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java

Make SET CONSTRAINTS work also for foreign keys.

M       java/shared/org/apache/derby/shared/common/reference/SQLState.java
M       java/engine/org/apache/derby/loc/messages.xml

New error messages.

M       java/testing/org/apache/derbyTesting/functionTests/tests/lang/ConstraintCharacteristicsTest.java

Extended existing deferrable constraints to also work for foreign constraints.

A       java/testing/org/apache/derbyTesting/functionTests/tests/lang/ForeignKeysDeferrableTest.java

New tests only for foreign key constraints.

M       java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_11.java

Remove asserts for not implemented on deferrable foreign key
constraints, check basic sanity iff hard upgraded.

M       java/testing/org/apache/derbyTesting/junit/BaseJDBCTestCase.java

Added assertCommitError; minor changes to support fk testing.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1590849 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9179199d2b58bea97f8b79000b89cc2d4f262113,2014-05-09T14:58:00Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java']","DERBY-6559 A immediate Fk constraint blows up iff its referenced PK is deferred and we delete a duplicate

Patch derby-6559 changes ReferencedKeyRIChecker to omit checking
dependent tables iff the referenced key is deferred and has rows with
duplicate keys one of whom is attempted deleted. So, in effect, the
check in such a case happens only if the row is ""the last of its
kind"", i.e. the last row having a particular referenced key. Added
tests for this behavior. To determine whether we have duplicates, we
open an extra scan on the index.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593557 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
0ad97c9a2e0aba019a72867189ccc60943c366bd,2012-10-22T18:25:37Z,"['java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/Java5ClassInspector.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java']","DERBY-672: Tighten up the bounds checking for input and return types of user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400984 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6a17f800eb0fef898ea947901c2c3c346ce521b0,2013-09-30T09:00:51Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Reject references to generated columns in the NEW transition variables
of BEFORE triggers, as required by the SQL standard. See also
DERBY-3948.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1527489 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6b2380215f8a8cdc70416ee113cf2d3e66fed493,2013-04-19T16:39:05Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java']","DERBY-6188: Improve encapsulation in Formatable machinery.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469948 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c0a807c0e14c958aa3653bd341deed228b610bc2,2013-02-20T10:32:03Z,"['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CollectNodesVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Make CollectNodesVisitor return a List instead of a Vector.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448064 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2cd035c179bcb5fcb28387c755ed298abaa1fe5f,2012-07-03T14:52:38Z,['java/engine/org/apache/derby/impl/db/SlaveDatabase.java'],"DERBY-4269 Failover did not succeed in 2 min.: testReplication_Local_3_p6_autocommit_OK

Patch fix-ignored-runtime-exceptions-b

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356766 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f78eb01cd75e9064599e3fc71f45c5db0e504ea1,2014-11-04T06:03:15Z,"['java/client/org/apache/derby/client/net/NaiveTrustManager.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/drda/org/apache/derby/impl/drda/NaiveTrustManager.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-6764(analyze impact of poodle security alert on Derby client - server ssl support)

Removed SSLv3 and SSLv2Hello from list of enabled protocols on the client and server side to avoid poodle security breach. Also, changed  NaiveTrustManager to use TLS as the default protocol rather than SSL. If NaiveTrustManager used SSL, then it won't find any enabled protocols for SSL after the removal of SSLv3 and SSLv2Hello. Changing it to TLS makes TLS protocols available for communication.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1636509 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
edb7fcc6cf66fc79fcb2c8d827aa986ec93502a6,2012-10-17T07:45:35Z,"['java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstantActionActivation.java']","DERBY-5947: Factor out common code from generated classes

- Move common code from the generated execute() method to a method
  in BaseActivation, and rename the generated execute() method to
  doExecute(), called from BaseActivation.execute().

- Simplify generated code in doExecute(). Specifically, fetch the
  resultSet field only once.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1399140 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1ea68f8c16845ba4dec5db71a8f413542d0c57de,2011-11-10T09:16:55Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSTATEMENTSRowFactory.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-4845: Improve the dependency tracking for our build targets

Don't access the readOnlyUpgrade field in DataDictionaryImpl directly
from iapi code. Added a method to the DataDictionary interface instead.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1200232 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e5b33f3d186613eb0d26a5d4a628702ffd2fcb79,2014-08-28T22:09:08Z,['java/client/org/apache/derby/jdbc/BasicClientDataSource40.java'],"DERBY-6620 Network client DataSources silently swallow SecurityExceptions when trying to read the tracing properties

Added explanatory comments in the source where we swallow the
SecurityException.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1621216 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
db9a0131c4858d543589defbd90fec9c3c35f6ca,2012-08-14T09:53:09Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/CodePoint.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolExceptionInfo.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/DecryptionManager.java', 'java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAInputStream.java', 'java/drda/org/apache/derby/impl/drda/EbcdicCcsidManager.java', 'java/drda/org/apache/derby/impl/drda/FdocaConstants.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/SQLTypes.java', 'java/drda/org/apache/derby/impl/drda/Session.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java']","DERBY-5896: Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client

Align with tab stops if the replaced tab character itself wasn't located on a tab stop.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1372814 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e76d29e44b0b9a0481113d11e820a755be0cd670,2013-05-28T07:03:46Z,['java/engine/org/apache/derby/iapi/store/access/DiskHashtable.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Remove SuppressWarnings annotation in DiskHashtable and use strongly
typed variables instead of an overloaded Object variable to prevent
the warnings.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486780 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
68968aa7b668c388f1ebe217beedf8ecba0b70ad,2013-04-05T05:38:40Z,"['java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/net/NetConnection.java']","DERBY-6125 Code clean up in client driver.

Patch derby-6125-03-04-followup. Incorporates Knut's further
simplification suggestions for patches 03 and 04:

After the 04-a patch, these three methods in NetConnection do nothing except calling the method with the same name in the super class:

  - close()
  - closeX()
  - closeResources()

Removed, let NetConnection inherit them from its super class.

Make Connection.closeX() private and unsynchronized, as it will only
be called from Connection.close().

The patch also touches NetConnection's closeForReuse() method, which
doesn't have any callers. Removed.

Replaces System.arraycopy with Object.clone for byte array copies as
suggested.

NetConnection.completeConnect(): remove the override and make the
super method final instead.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1464835 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
80e4af5c0cf39a49170932e75e55eae18dae780a,2013-02-21T06:30:12Z,['java/engine/org/apache/derby/iapi/types/NumberDataType.java'],"DERBY-3398: Fixed JavaDoc tag typo.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448521 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
ae72a30839ef93a03eeb6031f3a1c3c5c05ce602,2012-12-07T13:06:26Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6003: Create row templates outside of the generated code

Upgrade test fix in preparation for the actual fix for this issue.

Improve SYSCS_INVALIDATE_STORED_STATEMENTS by making it null out the
plans in SYS.SYSSTATEMENTS. Previously, it only marked them as invalid.

Use the improved SYSCS_INVALIDATE_STORED_STATEMENTS to work around
problems in the upgrade tests when downgrading to a version that suffers
from DERBY-4835 or DERBY-5289. Remove the old workarounds for DERBY-4835,
DERBY-5105, DERBY-5263 and DERBY-5289, as they are now handled by the
centralized workaround that uses SYSCS_INVALIDATE_STORED_STATEMENTS.

This change is needed because later patches for this issue will change
the format of many stored plans, so more of the test cases need to work
around the downgrade bugs in some old versions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1418296 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3d59ed14168161a60900e951be4e8fa8bea58214,2012-06-22T15:04:24Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-5688: Remove eclipse plugins from the download page produced by the transformrelnotes build target.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1352913 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b565f41eb31d118c572770aaf69bd0c568538ff5,2013-05-10T06:26:13Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/am/ClientBlob.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/ClientStatement.java', 'java/client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/client/org/apache/derby/client/am/CloseFilterInputStream.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/am/Diagnosable.java', 'java/client/org/apache/derby/client/am/ExceptionFormatter.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/MaterialPreparedStatement.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/SqlState.java', 'java/client/org/apache/derby/client/am/SqlWarning.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/am/Utils.java', 'java/client/org/apache/derby/client/am/XaException.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/client/net/DssConstants.java', 'java/client/org/apache/derby/client/net/FdocaConstants.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetConfiguration.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetConnectionRequest.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetPackageReply.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/client/org/apache/derby/client/net/NetResultSet40.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetXACallInfo.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java']","DERBY-6125 Code clean up in client driver

Patch derby-6125-misc-01-b, which further removes dead code opened up
by previous removals, further limits visibility, and corrects one
error introduced in a previous patch for this issue.

* deleted:    client/am/SqlState.java

Removed this class as there were no longer any references to it.

* modified:   client/ClientPooledConnection.java

Removed unused field netPhysicalConnection_.

* modified:   client/ClientXAConnection.java

Removed unused method createControlConnection; import fix.

* modified:   client/am/ClientBlob.java

Removed unused method getBinaryString.

* modified:   client/am/ClobLocatorWriter.java

Corrected error introduced in a previous patch.

* modified:   client/am/ClientConnection.java
* modified:   client/am/ClientDatabaseMetaData.java
* modified:   client/am/ClientPreparedStatement.java
* modified:   client/am/DateTime.java
* modified:   client/am/ExceptionFormatter.java
* modified:   client/am/SqlWarning.java
* modified:   client/am/Sqlca.java
* modified:   client/am/StatementCacheInteractor.java
* modified:   client/net/NetConnectionReply.java
* modified:   client/net/NetConnectionRequest.java
* modified:   client/net/NetStatementReply.java

Visibility restrictions.

* modified:   client/am/ClientJDBCObjectFactory.java
* modified:   client/net/ClientJDBCObjectFactoryImpl.java

Removed unused method newClientPooledConnection(ClientBaseDataSourceRoot, LogWriter, String, String, int)
Removed unused method newNetConnection(LogWriter, String, Properties)
Removed unused method newNetConnection(LogWriter, ClientBaseDataSourceRoot, String, String)
Removed unused method newNetConnection(LogWriter, String, int, ClientBaseDataSourceRoot, boolean)
Removed unused method newStatement(Agent, ClientConnection)

* modified:   client/am/ClientResultSet.java

Removed unused fields updatability_delete__, updatability_update__. Visibility restrictions.

* modified:   client/am/ClientStatement.java
* modified:   client/am/Configuration.java
* modified:   client/am/Lob.java

Visibility restrictions. Import fix.

* modified:   client/am/CloseFilterInputStream.java
* modified:   client/am/ColumnMetaData.java
* modified:   client/am/Utils.java
* modified:   client/net/NetCursor.java
* modified:   client/net/NetResultSet40.java
* modified:   client/net/NetSqlca.java
* modified:   client/net/NetXAResource.java
* modified:   client/net/NetXAConnection.java
* modified:   client/net/Typdef.java
* modified:   jdbc/ClientConnectionPoolDataSource.java
* modified:   jdbc/ClientXADataSource.java

Import fixes.

* modified:   client/am/Cursor.java

Import fix, visibility restrictions, removed unused constants
SBCS_CLOB, MBCS_CLOB, DBCS_CLOB, VARIABLE_BYTES.

* modified:   client/am/Diagnosable.java

Import fixes. Removed interface method printTrace (+ implementations).

* modified:   client/am/LogWriter.java

Removed unused method traceEntry(Object, String, int, Object, Object, Object)

* modified:   client/am/LogicalConnection.java

Removed unused method preparePositionedUpdateStatement

* modified:   client/am/MaterialPreparedStatement.java

Removed unused abstract methods methods writeDescribeOutput_ and readDescribeOutput_ (+ implementations)

* modified:   client/am/SqlException.java

Import fixes.  Visibility restrictions. Removed unused method printTrace(PrintWriter, String)

* modified:   client/am/XaException.java

Import fixes. Removed unused method printTrace(PrintWriter, String)

* modified:   client/net/ClientJDBCObjectFactoryImpl40.java

Removed unused method newClientPooledConnection(ClientBaseDataSourceRoot, LogWriter, String, String, int)
Removed unused method newNetConnection(LogWriter, String, Properties)
Removed unused method newNetConnection(LogWriter, ClientBaseDataSourceRoot, String, String)

* modified:   client/net/DssConstants.java

Removed unused constant GDSFMT_RQSDSS_NOREPLY

* modified:   client/net/FdocaConstants.java

Removed unused constants FDOCA_TYPE_FIXEDBYTES,
FDOCA_TYPE_NFIXEDBYTES, FDOCA_TYPE_NVARBYTES, FDOCA_TYPE_NTBYTES,
FDOCA_TYPE_NNTBYTES, FDOCA_TYPE_NPSCLBYTE, FDOCA_TYPE_FIXEDCHAR,
FDOCA_TYPE_NFIXEDCHAR, FDOCA_TYPE_NVARCHAR , FDOCA_TYPE_NTCHAR,
FDOCA_TYPE_NNTCHAR, FDOCA_TYPE_NPSCLCHAR, FDOCA_TYPE_INTEGER_BE,
FDOCA_TYPE_NINTEGER_BE, FDOCA_TYPE_NDECIMAL, FDOCA_TYPE_FLOAT_IEEE,
FDOCA_TYPE_NFLOAT_IEEE, FDOCA_TYPE_NLOBBYTES, FDOCA_TYPE_NLOBCHAR.

* modified:   client/net/NetAgent.java

Visibility restriction. Removed unused method getPort.

* modified:   client/net/NetConfiguration.java

Visibility restriction. Removed unused constant SECMEC_USRIDNWPWD.

* modified:   client/net/NetConnection.java

Import fix. Removed unused fields cnntkn_, readOnlyTransaction. Removed unused methods getCnnToken.
Removed useless method setReadOnlyTransactionFlag.
Removed unused constructor NetConnection40(NetLogWriter, String, int, ClientBaseDataSourceRoot, boolean)

* modified:   client/net/NetConnection40.java

Visibility restrictions. Removed unused constructor NetConnection40(NetLogWriter, String, int, ClientBaseDataSourceRoot, boolean)

* modified:   client/net/NetPackageReply.java

Import fixes. Removed unused field rdbnam. Unused ultimately useless
setting of netConnection_.setReadOnlyTransactionFlag, cd. NetConnction changes.

* modified:   client/net/NetPackageRequest.java

Removed unused field collectionName.

* modified:   client/net/NetPreparedStatement.java

Removed unused methods writeDescribeOutput_, readDescribeOutput_.

* modified:   client/net/NetXACallInfo.java

Removed unused field crrtkn_

* modified:   jdbc/ClientBaseDataSourceRoot.java

Import fixes. Visibility restrictions. Removed unused constant SUPPORTS_EUSRIDPWD.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480892 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
ea25568c625904993e4bca03d22e867dabec3efc,2013-10-23T11:28:24Z,"['java/tools/org/apache/derby/impl/tools/dblook/DB_Trigger.java', 'java/tools/org/apache/derby/tools/dblook.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Add dblook support for triggers with a WHEN clause.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1534988 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b93f9db8c6b9415539d059d8d33d25a8fa0fa565,2014-02-28T18:46:35Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java']","DERBY-6491: Don't require USAGE priv on the datatypes of SELECTed columns; commit derby-6491-ab-stopRequiringUsagePriv.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1573030 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0f43aec711b158ad9a142d688f7940caba4bd84c,2014-03-28T14:02:13Z,['java/engine/org/apache/derby/impl/io/CPFile.java'],"DERBY-5615: Permission problems with classpath subsubprotocol

Change the structure of CPFile.getInputStream() back to what it was
before the original fix for this issue (revision 1582655), but with
doPrivileged() calls around all operations that require privileges.

The restructuring in the original fix apparently prevented some
resources from being freed, so that DatabaseClassLoadingTest and
NativeAuthenticationServiceTest failed on Windows platforms because
they could not delete the jar file that contained the classpath
database.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1582754 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
daaebdbdcb37bf4751567ce244274f2484d19bd3,2013-06-04T09:23:18Z,"['java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java']","DERBY-6168: Clean up registered format ids

Remove entries that reference non-existing classes or classes that do
not implement the TypedFormat interface or the InstanceGetter interface.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1489354 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
05b022f3e5e341b4f695d93f74e74962ea89dee0,2013-10-16T07:36:10Z,['java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java'],"DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Fix incorrect null check when merging subqueryTrackingArray and
materializedSubqueries in GenericStatementContext.setTopResultSet().
Used to cause NullPointerException in some cases when a WHEN clause
contained a subquery.

Add more tests for scalar subqueries in WHEN clauses.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1532666 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1695a5dd72119b5f9286fff6d1204762d8f4874f,2014-02-18T18:46:02Z,"['java/demo/nserverdemo/NsSample.java', 'java/demo/nserverdemo/NsSampleClientThread.java', 'java/demo/nserverdemo/SimpleNetworkClientSample.java', 'java/demo/nserverdemo/SimpleNetworkServerSample.java', 'java/demo/scores/java/client/org/apache/derbyDemo/scores/data/Database.java', 'java/demo/scores/java/server/org/apache/derbyDemo/scores/proc/Functions.java', 'java/demo/simple/SimpleApp.java', 'java/demo/workingwithderby/WwdClientExample.java', 'java/demo/workingwithderby/WwdEmbedded.java']","DERBY-6459  Remove Class.forName calls that load JDBC driver from Derby samples/demos

Modified 9 Java files and 7 documentation files, and replaced 2 documentation text files with HTML files.

Patch: DERBY-6459-2.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1569470 13f79535-47bb-0310-9956-ffa450edef68
",chaase3@apache.org,Camilla Haase
cb184fe833ba1e5564ee05c030295f9b7d1ea32d,2014-03-05T11:06:10Z,"['java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectMethod.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java']","DERBY-6493: Improve reporting of exceptions wrapped in InvocationTargetException

Unwrap InvocationTargetException and PrivilegedActionException before
reporting them so that it is easier to see what the real error is.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574425 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3541af3cb3051bfc3d63fa090ec29e764c867c40,2013-03-08T09:13:04Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/VTIDeferModPolicy.java']","DERBY-6075: Use modern collections in impl/sql/compile

Replace Hashtable fields with HashSets.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1454296 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8514aa2013d181b6edfd2dc3dfd4c5a476dfcec1,2013-06-17T10:12:42Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/engine/org/apache/derby/diag/ContainedRoles.java', 'java/engine/org/apache/derby/diag/ErrorLogReader.java', 'java/engine/org/apache/derby/diag/ErrorMessages.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/diag/SpaceTable.java', 'java/engine/org/apache/derby/diag/StatementCache.java', 'java/engine/org/apache/derby/diag/StatementDuration.java', 'java/engine/org/apache/derby/diag/TransactionTable.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineParameterMetaData.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterMetaData30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData40.java', 'java/engine/org/apache/derby/jdbc/Driver40.java']","DERBY-1984: Re-factor JDBC classes to remove support for JDBC 2

Move methods supporting JDBC versions up to 4.1 into the base class
for the implementations of the following JDBC interfaces in the
embedded driver:

java.sql.ResultSet
java.sql.DatabaseMetaData
java.sql.ParameterMetaData
java.sql.ResultSetMetaData

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493707 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5b0cb063a824eae2a078808adae854b56e108e40,2014-08-06T20:02:23Z,['java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java'],"DERBY-6691 ROW_NUMBER should not be allowed as argument in a procedure call

Patch *derby-6691* makes this usage throw 42ZC2 and adds a test to
OLAPTest#testBasicOperations.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616335 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
209fdc067b286a8186c2cdb9e551a5e06322588a,2013-05-28T19:01:13Z,"['java/build/org/apache/derbyPreBuild/PropertySetter.java', 'java/stubs/jdbc3/java/sql/Array.java', 'java/stubs/jdbc3/java/sql/BatchUpdateException.java', 'java/stubs/jdbc3/java/sql/Blob.java', 'java/stubs/jdbc3/java/sql/CallableStatement.java', 'java/stubs/jdbc3/java/sql/Clob.java', 'java/stubs/jdbc3/java/sql/Connection.java', 'java/stubs/jdbc3/java/sql/DataTruncation.java', 'java/stubs/jdbc3/java/sql/DatabaseMetaData.java', 'java/stubs/jdbc3/java/sql/Date.java', 'java/stubs/jdbc3/java/sql/Driver.java', 'java/stubs/jdbc3/java/sql/DriverManager.java', 'java/stubs/jdbc3/java/sql/DriverPropertyInfo.java', 'java/stubs/jdbc3/java/sql/ParameterMetaData.java', 'java/stubs/jdbc3/java/sql/PreparedStatement.java', 'java/stubs/jdbc3/java/sql/Ref.java', 'java/stubs/jdbc3/java/sql/ResultSet.java', 'java/stubs/jdbc3/java/sql/ResultSetMetaData.java', 'java/stubs/jdbc3/java/sql/SQLData.java', 'java/stubs/jdbc3/java/sql/SQLException.java', 'java/stubs/jdbc3/java/sql/SQLInput.java', 'java/stubs/jdbc3/java/sql/SQLOutput.java', 'java/stubs/jdbc3/java/sql/SQLPermission.java', 'java/stubs/jdbc3/java/sql/SQLWarning.java', 'java/stubs/jdbc3/java/sql/Savepoint.java', 'java/stubs/jdbc3/java/sql/Statement.java', 'java/stubs/jdbc3/java/sql/Struct.java', 'java/stubs/jdbc3/java/sql/Time.java', 'java/stubs/jdbc3/java/sql/Timestamp.java', 'java/stubs/jdbc3/java/sql/Types.java', 'java/stubs/jdbc3/javax/sql/ConnectionEvent.java', 'java/stubs/jdbc3/javax/sql/ConnectionEventListener.java', 'java/stubs/jdbc3/javax/sql/ConnectionPoolDataSource.java', 'java/stubs/jdbc3/javax/sql/DataSource.java', 'java/stubs/jdbc3/javax/sql/PooledConnection.java', 'java/stubs/jdbc3/javax/sql/RowSet.java', 'java/stubs/jdbc3/javax/sql/RowSetEvent.java', 'java/stubs/jdbc3/javax/sql/RowSetInternal.java', 'java/stubs/jdbc3/javax/sql/RowSetListener.java', 'java/stubs/jdbc3/javax/sql/RowSetMetaData.java', 'java/stubs/jdbc3/javax/sql/RowSetReader.java', 'java/stubs/jdbc3/javax/sql/RowSetWriter.java', 'java/stubs/jdbc3/javax/sql/XAConnection.java', 'java/stubs/jdbc3/javax/sql/XADataSource.java', 'java/stubs/jsr169/java/sql/BatchUpdateException.java', 'java/stubs/jsr169/java/sql/Blob.java', 'java/stubs/jsr169/java/sql/CallableStatement.java', 'java/stubs/jsr169/java/sql/Clob.java', 'java/stubs/jsr169/java/sql/Connection.java', 'java/stubs/jsr169/java/sql/DataTruncation.java', 'java/stubs/jsr169/java/sql/DatabaseMetaData.java', 'java/stubs/jsr169/java/sql/Date.java', 'java/stubs/jsr169/java/sql/PreparedStatement.java', 'java/stubs/jsr169/java/sql/ResultSet.java', 'java/stubs/jsr169/java/sql/ResultSetMetaData.java', 'java/stubs/jsr169/java/sql/SQLException.java', 'java/stubs/jsr169/java/sql/SQLWarning.java', 'java/stubs/jsr169/java/sql/Savepoint.java', 'java/stubs/jsr169/java/sql/Statement.java', 'java/stubs/jsr169/java/sql/Time.java', 'java/stubs/jsr169/java/sql/Timestamp.java', 'java/stubs/jsr169/java/sql/Types.java', 'java/stubs/jsr169/javax/sql/DataSource.java', 'java/stubs/jsr169/javax/sql/RowSet.java', 'java/stubs/jsr169/javax/sql/RowSetEvent.java', 'java/stubs/jsr169/javax/sql/RowSetInternal.java', 'java/stubs/jsr169/javax/sql/RowSetListener.java', 'java/stubs/jsr169/javax/sql/RowSetMetaData.java', 'java/stubs/jsr169/javax/sql/RowSetReader.java', 'java/stubs/jsr169/javax/sql/RowSetWriter.java']","DERBY-6213: Remove java15compile.classpath build variable and the JDBC 3 and JSR 169 stubs.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487040 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fe1ac60a9fb28bec7474abea019106122889a761,2013-04-05T12:01:53Z,"['java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/engine/org/apache/derby/vti/VTITemplateBase.java']","DERBY-6151: Preserve the SQLWarnings raised by table functions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1464934 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4772c7ee2b0f7c59edf32db2f21294904e286293,2012-07-17T09:08:07Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/am/ByteArrayCombinerStream.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/LogicalConnection40.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/SectionManager.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/am/stmtcache/JDBCStatementCache.java', 'java/client/org/apache/derby/client/net/CodePointNameTable.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSource.java']","DERBY-5840: Compile network client with source and target level 1.5

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1362419 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
90f33a99ac10ac9cbbb5f64c2a34af3700fe75cb,2011-11-18T17:19:38Z,"['java/client/org/apache/derby/client/net/NetDatabaseMetaData40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData40.java']","DERBY-5488: Change jdbc level to 4.1 when running on Java 6 or 7.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1203754 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
eb79cc039ea7f312351f25e1d7e04a0dbe5a11ce,2014-06-26T14:21:05Z,"['java/optional/org/apache/derby/optional/lucene/DerbyIndexInput.java', 'java/optional/org/apache/derby/optional/lucene/DerbyIndexOutput.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java']","DERBY-6621: Reduce the visibility of some classes and methods in the Lucene plugin; commit derby-6621-05-aa-luceneClasses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605794 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
edd6d3c8f69dc4c81bea245e3be4e26ed4f153c4,2013-07-03T10:52:59Z,['java/engine/org/apache/derby/iapi/services/io/FileUtil.java'],"DERBY-6287: Don't use reflection to call Java 6 methods in FileUtil

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499317 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
83446d06e95e318eed66568c6972368138ffd57e,2012-06-07T06:27:00Z,['java/tools/org/apache/derby/impl/tools/dblook/DB_Jar.java'],"DERBY-5357: SQLJ.INSTALL_JAR shouldn't use identifier as file name

Removed unused local variable.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1347412 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
efa1efa9520fb98a271853e7a0b3cce00fe96bb2,2014-02-20T15:37:51Z,"['java/engine/org/apache/derby/iapi/types/SQLRef.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3155: Prevent a MERGE statement from altering the same target row twice; commit derby-3155-28-aa-cardinalityViolations.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1570230 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7e7983048ba0bc384c45bfe18c75253281e20cbf,2013-04-23T14:40:29Z,"['java/tools/org/apache/derby/iapi/tools/ToolUtils.java', 'java/tools/org/apache/derby/impl/tools/ij/ParseException.java', 'java/tools/org/apache/derby/impl/tools/ij/URLCheck.java', 'java/tools/org/apache/derby/impl/tools/ij/ijMultipleResultSetResult.java', 'java/tools/org/apache/derby/impl/tools/ij/ijResultSetResult.java']","DERBY-6195: Cleanup encapsulation problems in ij.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1470982 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2e9fed48db3e589fa6e04a382a512466cd21dfc1,2014-08-27T19:19:36Z,['maven2/SetDerbyVersion.java'],"DERBY-6720: Add support for publishing the derbyoptionaltools jar to the maven repositories; commit derby-6720-01-aa-installOptionaltools.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620961 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
cf427292d8ca32e457abb97887d50a836632f732,2013-01-03T11:50:03Z,"['java/engine/org/apache/derby/iapi/types/CollationElementsInterface.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLChar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLClob.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLLongvarchar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/WorkHorseForCollatorDatatypes.java']","DERBY-2699: Change how collation elements for ESCAPE clause are calculated

Since we only need to know whether or not there is a single collation
element, just look at the first two elements to see if we have none, one
or many.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428305 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b1f3176d1175ce355d1e7fee9c18c421dded1422,2013-03-14T09:00:23Z,['java/shared/org/apache/derby/shared/common/reference/SQLState.java'],"DERBY-6075: Use modern collections in impl/sql/compile

- Remove dead code for old syntax that allowed declaring columns as
  nullable explicitly.

- Remove unneeded imports.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1456369 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e81e52cca13a06846b8fd39b68fc159432ca0c58,2013-10-23T12:15:25Z,"['java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/iapi/types/LocatedRow.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ScrollInsensitiveResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/store/access/BackingStoreHashTableFromScan.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeForwardScan.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericScanController.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapScan.java', 'java/storeless/org/apache/derby/impl/storeless/NoOpTransaction.java']","DERBY-3155: Add (optional) row locations to backing hash tables: derby-3155-03-ag-backingStoreHashtableWithRowLocation.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535001 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8fbaf268aa244ee6b662bb3575179ddf8b830f17,2014-04-04T18:19:44Z,['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java'],"DERBY-590: Eliminate some file-closure race conditions by explicitly closing the stream from which index properties are read; commit derby-590-17-aa-closeInputStreamOnPropertiesFile.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1584859 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b197ffafa17a9fc627e87232016a488ee80fc358,2013-06-18T12:29:58Z,"['java/engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java']","DERBY-6266: Add ability to print Derby execution ResultSet graph as xml.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494115 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c5b9acbe447a05fade161d85178d083a57a35116,2012-03-20T13:07:54Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-866: Mark a database as a credentials DB iff the DBO's credentials are stored in SYS.SYSUSERS.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1302868 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
46e7e7c5d2d10a6a4d661d1d6a9707e1ffe44887,2012-10-17T15:25:12Z,['java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java'],"DERBY-5918: Allow BOOLEAN columns in CREATE TABLE ... AS SELECT statements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1399306 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8d5db17f62016b37f5aae30b5fa7209f1c8ac5a4,2013-05-31T08:08:36Z,"['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java']","DERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission

Add the missing permission to the tests' policy files and wrap
AutoloadedDriver's calls to DriverManager.deregisterDriver() in a
privileged block.

Make the deregister=false attribute really prevent
DriverManager.deregisterDriver() from being called during system
shutdown, and make the network server shutdown logic use the attribute
to prevent the need for an extra permission in the default server
policy.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488125 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
843145a211f76c83672df5c64b538d299b5d0d7d,2014-08-07T16:16:30Z,"['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6693 Assert failure/ArrayIndexOutOfBoundsException when using COUNT in MERGE matching clause

Patch derby-6693 which forbids aggregates in the matching clauses, and
adds a test case to MergeStatementTest, but:
the checked in code using assertCompileError instead of
assertStatementError for more precision (in MergeStatementTest).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616523 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
94b316d381af0abc70442d39d56c976796db5406,2013-03-18T14:05:35Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6104: Bump the release id on the trunk to 10.11.0.0 beta.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1457771 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
09c30dd3e88b78235bdeebe1aef27b4aaf18e88f,2014-03-03T12:50:08Z,"['java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java']","DERBY-6408: EXISTS returns NULL instead of FALSE

Make sure EXISTS subqueries are wrapped in an IsNullNode to convert
NULL to a BOOLEAN. Before, only NOT EXISTS subqueries were wrapped.

Make RowResultSetNode.preprocess() invoke preprocess() on the result
columns instead of directly on the subquery nodes. Calling it directly
on the subquery nodes prevented the result columns from seeing the
added IsNullNode.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1573548 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0d15ddc0664094557ca0250c4e9acc2bbfa08709,2013-05-24T14:22:36Z,['java/tools/org/apache/derby/impl/tools/ij/ijMultipleResultSetResult.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Use ArrayList's constructor instead of Object.clone() to create a copy of
a list in a type-safe way.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486071 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
38f02ec549fbf03d6453731c53c2141ead319045,2013-04-26T16:59:37Z,"['java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecutionContext.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionControl.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java']","DERBY-6206: Encapsulate constants and names used for isolation levels.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476291 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
959fef25ed69208f7a83e35f253eec9007bdaa4b,2012-12-07T13:08:04Z,"['java/engine/org/apache/derby/iapi/sql/compile/JoinStrategy.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRowBuilder.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BulkTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MultiProbeTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdatableVTIConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/WriteCursorConstantAction.java']","DERBY-6003: Create row templates outside of the generated code

Create and store an ExecRowBuilder in the GenericPreparedStatement
instead of creating a generated method for allocating row templates.

This patch makes ScanResultSet and its sub-classes use the new approach.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1418297 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c44e39a922c4af3acf5b91041b075d54427897a6,2012-05-03T08:30:33Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/GenericDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerInfo.java']","DERBY-5737: Remove GenericDescriptorList.elements and replace Enumerator usage with Iterator

Removed elements-methods and use of Enumerator in preparation of refactoring.

Patch file: derby-5737-1a-iterator.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1333356 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
93fd82e115124755aa598feee896a231089fa603,2013-07-03T09:20:47Z,['java/build/org/apache/derbyPreBuild/ReleaseProperties.java'],"DERBY-5979: Part a: Do not use \n to terminate lines in Apache License header String constant and instead join the line strings with the value of line.separator property.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499287 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
38b200a310aedb5635b8802f1abdb4fb262607ee,2013-02-15T13:06:27Z,['java/engine/org/apache/derby/impl/jdbc/EmbedResultSet42.java'],"DERBY-6000: Fix NPE in embedded implemention of new ResultSet.updateObject() overloads added by JDBC 4.2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1446562 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c2fe2805b35932f5f2d66c015f20c5ffbfb69354,2013-02-19T13:56:54Z,['java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java'],"DERBY-5752: LOBStreamControl should materialize less aggressively

Only materialize LOBs that are smaller than 32 KB in memory.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1447722 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f65be8f9e8ee8e7b77680e3f014b0205848f31e4,2014-07-15T20:22:33Z,['java/engine/org/apache/derby/impl/sql/execute/FKInfo.java'],"DERBY-6664: Schema 'null' does not exist when trigger inserts into table with deferred foreign key

Make sure the FKInfo class stores its schemaName field.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1610836 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4d09732dd2c06f0913a0e66e193216e091453eca,2013-02-20T07:57:49Z,"['java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java']","DERBY-6017: IN lists with mixed types may return wrong results

Cast the left operand to the dominant type if it isn't already of
that type. This ensures the dominant type is always used in all the
comparison operations when evaluating an IN predicate.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448025 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9c18af12a7e63821fc7804806b119ec4952d229f,2013-04-15T20:57:33Z,"['java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java']","DERBY-6182: Shore up the encapsulation of StandardException.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1468225 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
f661a5fafea5e9bbbf011396e1328e3a902a0989,2012-05-22T21:02:14Z,['java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java'],"DERBY-5680: indexStat daemon processing tables over an over even when there are no changes in the tables

Removed redundant check.

Patch file: derby-5680-2a-remove_redundant_check.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341622 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
2d622c69a993c089f8f614c10ef0427588875a27,2011-12-14T19:46:59Z,['java/client/org/apache/derby/client/am/CrossConverters.java'],"DERBY-5535 Remove unused methods from client's CrossConverters class

Patch derby-5535 removes the unused methods.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1214423 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d9878ca0e7ef3de5e19f7b11710322832125513e,2013-09-27T08:41:47Z,"['java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/compile/Parser.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CatalogRowFactory.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor_v10_10.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTRIGGERSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParserImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Allow references to transition variables and transition tables in the
WHEN clause. To support this, a new column WHENCLAUSETEXT is added to
the SYS.SYSTRIGGERS table, and a corresponding field is added to the
TriggerDescriptor class.

The logic that transforms triggered SQL statements to internal syntax
for accessing the transition variables and transition tables (via Java
method calls and VTIs) is reused on the WHEN clause text so that the
same transformation happens there.

Upgrade logic is added so that the new column in SYS.SYSTRIGGERS will
be created when a database is upgraded from an older version. The WHEN
clause is now disabled in the parser when running in soft upgrade
mode. An upgrade test case checks that the WHEN clause can only be
used in a hard-upgraded database, and that a reasonable error is
raised otherwise.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1526831 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
54dce4451acaa2df512b538ad8c1ce08dda1fa9e,2013-09-11T11:56:44Z,['java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java'],"DERBY-6330: Simplify StringBuffer use, as they are mutable

Patch contributed by Dave Brosius.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1521816 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
13d34b0c4ffdda31d8b627314b479e084ada4b92,2014-05-21T06:51:40Z,"['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-1576: Extend the CASE expression syntax for ""simple case""

Forbid untyped parameters in the case operand.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1596492 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d08ab9b87a1b0a9ecb6e7cb7a8b136740463bdfd,2013-07-08T13:00:34Z,"['java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/vti/XmlVTI.java']","DERBY-6256: Add basic tests for XmlVTIs, including a new way to create XmlVTIs from url strings; tests passed cleanly on derby-6256-04-aa-addURLFactoryMethodAndTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1500706 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d02bb72fb23b16ca38713ea2c2decabe074539e1,2015-08-19T23:38:59Z,"['java/client/org/apache/derby/client/am/SQLExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory.java', 'java/shared/org/apache/derby/shared/common/error/DerbySQLIntegrityConstraintViolationException.java']","DERBY-6773: Derby throws plain SQLIntegrityConstraintViolationException

This patch includes contributions from Abhinav Gupta (abhinavgupta2004 at gmail dot com)

This patch enables use of the new Derby-specific subclass
of SQLIntegrityConstraintViolationException in both the embedded
and client-server configurations of the SQLExceptionFactory.

In addition, a number of new tests are added to verify that
the new exception is thrown and can be caught as we expect,
and that the accessor methods on the new exception allow
applications to determine which table name and constraint
name were responsible for the exception.

We still have a couple cleanup tasks before DERBY-6773 is
fully complete, but as of this patch the new behavior is
in effect.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1696690 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
8fe3166c0b20d693bfd71f4478b2ead935e8895b,2013-05-08T08:57:47Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeSubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MiscellaneousStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NotNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetTransactionIsolationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserTypeConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/VirtualColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Reduce visibility of the following methods, and all overrides of them,
to package:

- QueryTreeNode.generate()
- QueryTreeNode.getNullNode()
- ResultSetNode.bindResultColumns()
- ResultSetNode.generateNormalizationResultSet()
- ResultSetNode.generateResultSet()
- ResultSetNode.getFromTableByName()
- ValueNode.generateExpression()

Remove unused method:

- ValueNode.generateFilter()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480187 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0758fb61a79b071e6c6fbb1cc8b49c37a8afc770,2013-05-08T12:37:32Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/engine/org/apache/derby/catalog/TriggerNewTransitionRows.java', 'java/engine/org/apache/derby/diag/ErrorLogReader.java', 'java/engine/org/apache/derby/diag/ErrorMessages.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/diag/StatementCache.java', 'java/engine/org/apache/derby/diag/StatementDuration.java', 'java/engine/org/apache/derby/vti/UpdatableVTITemplate.java', 'java/tools/org/apache/derby/tools/PlanExporter.java', 'java/tools/org/apache/derby/tools/SignatureChecker.java']","DERBY-6213: Convert misc packages to Java 6.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480251 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2f455bb5d5a10cc7a4d600fa766a83bcca5eee86,2014-04-09T21:50:06Z,['java/tools/org/apache/derby/impl/tools/sysinfo/Main.java'],"DERBY-6532; sysinfo does not show derbyTesting package info if junit.jar not in classpath
   switching the indicator class from BaseTestCase to XATestUtil.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1586158 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
ca6ed1764c149402787d151c9c957976da64b7d0,2013-04-12T08:22:16Z,"['java/engine/org/apache/derby/iapi/db/TriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/AggregateSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRow.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexSetChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdatableVTIConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ValueRow.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

- Reduce visibility of some classes, fields and constructors under
  impl/sql/execute

- Expose InternalTriggerExecutionContext.getAutoincrementValue()
  through the interface so that callers don't have to cast the
  context to the internal implementation type

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1467201 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1690ef635636afe5ebb5f03e393e5e9525de694b,2012-01-27T21:16:21Z,['java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java'],"DERBY-5582 Access denied (java.lang.RuntimePermission modifyThreadGroup) in IndexStatisticsDaemonImpl.schedule()

Put index-stat thread in derby daemon group.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1236887 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
ac5a3a2dd8aaeee21707f3051420d5c7784041df,2014-09-17T11:34:18Z,['java/engine/org/apache/derby/impl/services/cache/CachedItem.java'],"DERBY-2051: Remove the unused CachedItem class

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1625521 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3397f9f0920679b9cfcf4c495a05144201c015c8,2013-07-03T17:17:36Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6256: Make XmlVTI take a file name argument rather than a file URL argument; commit derby-6256-03-aa-useFileNotURL.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499484 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4f996a414c659869c5eb4d8918632e78e518df25,2012-08-08T06:54:46Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/ClientThread.java', 'java/drda/org/apache/derby/impl/drda/CodePoint.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolExceptionInfo.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java', 'java/drda/org/apache/derby/impl/drda/DRDAXid.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/DecryptionManager.java', 'java/drda/org/apache/derby/impl/drda/DssConstants.java', 'java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAInputStream.java', 'java/drda/org/apache/derby/impl/drda/EbcdicCcsidManager.java', 'java/drda/org/apache/derby/impl/drda/FdocaConstants.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/ReEncodedInputStream.java', 'java/drda/org/apache/derby/impl/drda/SQLTypes.java', 'java/drda/org/apache/derby/impl/drda/Session.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/drda/org/apache/derby/impl/drda/memCheck.java']","DERBY-5896 Change java/drda source code to use  spaces instead of tabs



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1370674 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
9765d83737ce221d67758a7ccf775c0622a291ae,2012-05-08T11:29:58Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-5730: DataDictionaryImpl leaks references to itself via SYSFUN_AD

Make the AliasDescriptors for SYSFUN functions private to a single
DataDictionaryImpl instance instead of shared between them.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1335423 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
04fc939ba516a4b6f84952dea3fca68702eeab61,2013-05-14T22:44:13Z,"['java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java']","DERBY-6213: Deprecate support for Java 5 and CDC

Move getParentLogger() to ClientBaseDataSourceRoot and remove it
from all the *40 leaf classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482632 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
85e98cb02d77cb945696f3a903eee0acc48d64ac,2013-05-06T12:46:32Z,['java/tools/org/apache/derby/impl/tools/optional/OptimizerTracer.java'],"DERBY-6211: Add ability to plug custom trace logic into the optimizer.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1479552 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5c2ad7166434bc3245aba29323e40772b1778419,2014-08-08T15:43:53Z,"['java/engine/org/apache/derby/impl/services/bytecode/Conditional.java', 'java/engine/org/apache/derby/impl/services/bytecode/Type.java']","DERBY-6699 Error in PredicatePushdownTest.test_predicatePushdown

Patch derby-6699-diagnostics makes the sane build print information about the contents
of the two stacks when the ASSERT fails. Since this error is intermittent it may
help debug the issue.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616807 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3ed1ad12ab4044cccf31a75874d41a5573ac5db2,2012-05-09T13:30:40Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"Added a comment about the istat daemon.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1336197 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
fbf176c8d2ac784f2f6ffc9a0b3aaa9b4e78b50e,2014-03-30T22:23:28Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneListIndexesVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneQueryVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneSupport.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/optional/LuceneUtils.java', 'java/optional/org/apache/derby/optional/api/LuceneUtils.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Move Lucene code to a new directory tree intended for optional code; commit derby-590-11-aa-moveCode.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583216 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
218eb5267ac58a0c9098c79a1c3c42a02289597f,2012-08-07T13:51:30Z,['java/shared/org/apache/derby/shared/common/reference/SQLState.java'],"DERBY-5879: Delete an unused message fragment.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1370266 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
213d360ea9dbdf2cfe669d90398c8c20981cebfa,2012-05-17T12:41:16Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY_5652: Improve error handling when credentials db name ends in trailing garbage.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1339575 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e22e8dc70c075d79da132fd42cc20204ceb77bb7,2013-04-24T12:22:35Z,"['java/engine/org/apache/derby/iapi/db/TriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/catalog/DDColumnDependableFinder.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Remove unused methods and make DDColumnDependableFinder's constructor
package private.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471382 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9e951e287c93824f8647e43734ac2d3b922358dc,2012-02-02T22:42:48Z,['java/engine/org/apache/derby/impl/store/raw/data/OverflowInputStream.java'],"fixing a comment.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1239893 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
04cfd282fc15f44eb9c9841476c85b7dd21e8a5a,2011-12-20T18:44:33Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSUSERSRowFactory.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-866: Add syscs_reset_password() and syscs_modify_password() system procedures.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1221423 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4c9b831a0cfc770fc8029e7e6f19846e0b5efb8f,2013-11-01T10:13:45Z,"['java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/LOBStateTracker.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/net/NetResultSetReply.java']","DERBY-6228: Add parsing of SQLCARD warnings after next(). Don't commit tx when calling getWarnings(). Fix various locator-release errors when navigating SURs. 

Patch file derby-6228-a.diff. (+ typo fix mentioned in review) 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537881 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
e1f49caa894e522705f3254a44761a24451125d9,2013-06-28T04:32:08Z,"['java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HasNodeVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/ReplaceAggregatesWithCRVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ReplaceWindowFuncCallsWithCRVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubstituteExpressionVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/VTIDeferModPolicy.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-673: Get rid of the NodeFactory

Patch derby-673-typesafe-lists-2, which introduces generics to the
lists based on QueryTreeNodeVector. I also let the latter implement
the Iterable interface, which opens up for using Java 6 ""foreach""
syntax in many cases. The patch makes use of this. Together, these
changes enables many casts to be eliminated and code clarification in
the compiler implementation.

It also removes most -Xlint warnings from impl/sql/compile classes, so
it should be ready to run with full lint.

Diffstat summary:
63 files changed, 854 insertions(+), 1236 deletions(-)

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497644 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d23659a09e9d6b3cfdbe95db53fc9a7b9a85f35d,2013-10-10T09:14:20Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Reuse code for dependency checking of the triggered SQL statement for
checking dependencies in the WHEN clause.

Add test to verify that attempts to drop columns referenced in the WHEN
clause detect that the trigger is dependent on the columns.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1530887 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
615cb37cc1e569b5ff5838722d102dc17dcf6d14,2013-01-18T17:43:20Z,['java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java'],"DERBY-6047: Fix NPE in routine resolution introduced by work on DERBY-3069.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1435267 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
643e68c9a99bf42b30075bd09da416ed6d132ce1,2013-08-28T08:57:40Z,['java/tools/org/apache/derby/impl/tools/planexporter/AccessDatabase.java'],"DERBY-6297: Intermittent failures in XplainStatisticsTest.testSimpleXplainOnly

Make AccessDatabase.schemaExists() close the ResultSet.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1518111 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f7066326cfd5357aacae179ac47b0b5cfce3c0d4,2012-07-02T03:49:22Z,['java/client/org/apache/derby/client/net/NetStatementReply.java'],"DERBY-5827: Remove unused methods in NetStatementReply class

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

This change removes several unused methods from the NetStatementReply
class. Code inspection of the NetStatementReply class reveals that
the following methods are not used at all:

parseQRYPRCTYP()
parseSQLCSRHLD()
parseQRYATTSCR()
parseQRYATTSET()
parseQRYATTSNS()
parseQRYATTUPD() 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356065 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
db4c995379b44bce61ae08fbd12d892e0e10f22a,2012-07-20T06:13:51Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/ClientThread.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAResultSet.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/DecryptionManager.java', 'java/drda/org/apache/derby/impl/drda/DssTrace.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAInputStream.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAReaderInputStream.java', 'java/drda/org/apache/derby/impl/drda/FdocaConstants.java', 'java/drda/org/apache/derby/impl/drda/LayerBStreamedEXTDTAReaderInputStream.java', 'java/drda/org/apache/derby/impl/drda/NaiveTrustManager.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerMBeanImpl.java', 'java/drda/org/apache/derby/impl/drda/ReEncodedInputStream.java', 'java/drda/org/apache/derby/impl/drda/SQLTypes.java', 'java/drda/org/apache/derby/impl/drda/Session.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java']","DERBY-436: Clean up imports and static field references in DRDA classes

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1363662 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
42544c4b9aaa77cf216d7690956beaaca2099a29,2013-05-02T07:46:59Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TablePrivilegesNode.java', 'java/engine/org/apache/derby/impl/sql/execute/ColumnInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/TablePrivilegeInfo.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

- Reduce visibility of fields in ColumnInfo, FKInfo,
  InsertConstantAction and TablePrivilegeInfo to private or package.

- Reduce visibility of TablePrivilegesNode.makePrivilegeInfo() and
  InsertConstantAction.getAutoincRowLocation() to package.

- Clone arrays passed in to public constructors of the above mentioned
  classes as well as ConstraintInfo.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1478295 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7de985b1c3f008b5e2dbf3aeaa832374956a6618,2014-01-13T19:58:28Z,['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java'],"DERBY-6453; Remove dead code in InsertResultSet and flag skipCheckConstraints
   fixing a javadoc error by removing the javadoc comment relating to the removed parameter skipCheckConstraints


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1557832 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
9cc25e287512df42800ce134b5655d9f03208eb5,2014-04-06T16:32:08Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Add a windowSize parameter to the lucene query function; commit derby-590-19-aa-cleanupAPI2.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1585315 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2455f1ac2eb3bab1eb004959861dae7d6ca23d6f,2014-05-19T08:23:11Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-1576: Extend the CASE expression syntax for ""simple case""

Implement simple case as described by the SQL:1999 standard, including the
SQL:2003 extension F262 ""Extended CASE expression"", and the SQL:2011
extension F263 ""Comma-separated predicates in simple CASE expression"".

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1595778 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1562d537b863f92274af0706754f9ae4b580c9d7,2012-07-11T12:11:12Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Replace use of obsolete collection class Vector with ArrayList.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360133 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
866d96b3987f63b3dbcbc0c9065955ddccb2bccf,2013-06-27T19:56:40Z,['java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java'],"DERBY-6211: Fix NPE in xml-based optimizer tracing; committing derby-6211-08-aa-fixNPE.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1497537 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
96748ad12e1da41f237504adef5e9ae0ef15d2b1,2011-11-08T19:16:46Z,"['java/engine/org/apache/derby/iapi/types/BigIntegerDecimal.java', 'java/engine/org/apache/derby/iapi/types/J2SEDataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java']","DERBY-5488: Eliminate some NPEs in ParameterMappingTest when run on OJEC.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1199392 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
757bc0e12832474d0a3e107c9053140593b5b7c6,2014-03-20T19:50:05Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java']","DERBY-3155: Cleanup MERGE statement in order to make the code more readable; commit derby-3155-49-aa-cleanup1.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1579725 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8032298dd0eec06d1826ff2d89c0573e81ae617b,2013-07-03T08:32:34Z,"['java/engine/org/apache/derby/impl/services/timer/Java5SingletonTimerFactory.java', 'java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java']","DERBY-6114: Fold Java5SingletonTimerFactory into SingletonTimerFactory

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1499256 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f9a152bd9d452c8af38efc4578835052cdc8686c,2013-05-22T18:29:56Z,"['java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/jmx/ManagementService.java', 'java/engine/org/apache/derby/impl/services/jmx/JMXManagementService.java', 'java/engine/org/apache/derby/impl/services/jmxnone/NoManagementService.java', 'java/engine/org/apache/derby/impl/services/locks/LockSpace.java', 'java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/engine/org/apache/derby/vti/VTITemplate.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Remove various @SuppressWarnings annotations and adjust the code so
that the compiler doesn't complain.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485321 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
296695c04476f262b61cf394ba5ef34c607fcdbe,2012-07-11T12:11:45Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Fix warnings:

- Remove if statement that was previously disabled by prepending
  ""false &&"" to the condition. Silences ""unreachable code"" warning.
- Remove no-op bitwise shift operation.
- Rename local variable that hides field.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360135 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d31131199c0511c089317a07709d3d3fd0df7d2c,2014-07-07T14:24:51Z,['tools/release/jirasoap/src/main/java/org/apache/derbyBuild/jirasoap/FilteredIssueLister.java'],"DERBY-6588: Third draft of release notes for 10.11.1; commit derby-6588-05-aa-thirdDraftReleaseNotes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1608471 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
49300a73c96bca79d4ae44cf10dba18645b8dd3a,2013-01-03T03:58:41Z,"['java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6009 Need stricter checking of ORDER BY clause in VALUES expressions

This patch, derby-6009c, improves on the restriction that ORDER BY for
VALUES be limited to column numbers (SQL-92 style) only. It should now
give an understandable error message if anything else is tried. It
adds a new error message, ""4287B"" and test cases.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428160 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
29007f04870842cee939c2e51a8978d4d0147d1e,2014-01-27T13:28:09Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/engine/org/apache/derby/vti/AwareVTI.java', 'java/engine/org/apache/derby/vti/VTIContext.java', 'java/engine/org/apache/derby/vti/VTITemplate.java']","DERBY-6117: Give table functions more information about their execution environment; commit derby-6117-01-ab-AwareVTI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1561668 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
10f4b0f6a46228e931f1b0a06a16c5298d3aa8c2,2012-03-06T15:33:21Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-866: Prevent credentials db from being created with empty username or password.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1297528 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e82e672f46368c266f8ab5507ac0d2c30a2a33ab,2012-10-25T11:55:34Z,"['java/engine/org/apache/derby/impl/io/vfmem/VirtualFile.java', 'java/engine/org/apache/derby/impl/io/vfmem/VirtualRandomAccessFile.java']","DERBY-5960: VirtualRandomAccessFile.close() is not idempotent

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1402111 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
aa1dc7a9d4a4564c6d57f94106a54fa452d38d14,2012-04-20T16:10:05Z,['java/engine/org/apache/derby/catalog/SystemProcedures.java'],"DERBY-866: Prevent anyone other than the DBO from turning on NATIVE authentication.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1328431 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
576d3b75bab93c1eb9b73074d6e753f3da7d3985,2012-12-06T16:33:42Z,['java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java'],"DERBY-6006: NullPointerException in INSERT INTO ... SELECT FROM ... ORDER BY

A NormalizeResultSet should not expose generated ORDER BY columns to
its parent.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1417991 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6b8d71bb4b84f56d0c46053dd55f928e8a66ddec,2014-04-14T20:56:58Z,['java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java'],"DERBY-3155: Fix bug in MERGE statement fired by a trigger; commit derby-3155-53-aa-transitionSimpleColumn.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1587317 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org =  rhillegas = Richard N. Hillegas rhillegas@apache.org@apache.org,Richard N. Hillegas
92268ace63e4f0abff9901cafb634de221852c5a,2011-12-19T15:49:19Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/TypesImplInstanceGetter.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/ParameterValueSet.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRow.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/ReaderToUTF8Stream.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLPassword.java', 'java/engine/org/apache/derby/iapi/types/SQLRef.java', 'java/engine/org/apache/derby/iapi/types/SQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/StringDataValue.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/GenericParameter.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CharTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexValueRow.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ValueRow.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-866: Add syscs_create_user() and syscs_drop_user() system procedures.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1220807 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1d5c5918cb09f5f947df7bbee706e6520d35d04c,2014-01-21T08:59:08Z,['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java'],"DERBY-6455: Infinite loop in NetworkServerControlImpl.ensureDataInBuffer

Make NetworkServerControlImpl.ensureDataInBuffer() stop immediately if
it reaches end-of-stream.

Based on patch contributed by Martin Janda.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1559946 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0e07b2e922474440854e4d500c075daca04a3f6f,2013-03-22T15:16:16Z,['java/engine/org/apache/derby/agg/Aggregator.java'],"DERBY-672: Improve the javadoc for the merge method of Aggregator so that implementors can figure out how to test their code.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1459837 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
dc4894328d01ce132ddf4de4606b8a3fba736841,2012-07-11T12:11:27Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

NetBeans warns about synchronization on non-final objects. Since
the synchronization is only used to ensure that set operations are
visible in other threads, make the fields volatile instead of having
a separate synchronization object per field.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360134 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c465481d7a09c47ab55247013cf9a1d13e864d02,2013-06-20T14:37:46Z,"['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/tools/org/apache/derby/tools/SignatureChecker.java']","DERBY-6262: Simplify message-generating methods using varargs

Reduce number of methods that format messages in tools classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495023 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
35c061a65d9e20a7515a69812d63b673f4e207f2,2013-12-05T12:08:59Z,['java/engine/org/apache/derby/impl/sql/compile/CastNode.java'],"DERBY-6421: Cast to UDT in CHECK constraint causes NPE or assert failure

Delay binding of target UDT in CastNode till bind time.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1548104 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b5392dbeee7daa38895fd7a10356735d73c2d2c7,2014-09-19T08:15:44Z,"['java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3888: ALTER TABLE ... ADD COLUMN cannot add identity columns

Enable support for adding identity columns with ALTER TABLE. It is
only enabled if identity columns are backed by sequences. That is, the
database format has to be 10.11 or higher.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1626141 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3cc631bb8e1a76b642a35c2ea247e93c515782cf,2014-02-10T15:10:31Z,"['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3155: Forbid derived column lists in MERGE statements; commit derby-3155-23-aa-forbidDerivedColumnLists.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1566649 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b53de62806da613f9cf158a4b03f5e6ffb84a772,2011-11-08T14:03:55Z,['java/build/org/apache/derbyPreBuild/PropertySetter.java'],"DERBY-5485: Reduce the responsibility of PropertySetter in order to make it less brittle.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1199248 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ce930bc12da42ae56ba4db19df0a521212c690b3,2013-02-13T13:40:29Z,"['java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java']","DERBY-6000: Make DatabaseMetaData.getMaxLogicalLobSize() return the value which means unknown.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1445591 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bedbcf27db930b48c13dad32b3af23b973cbc1b8,2014-06-02T23:36:32Z,"['java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java']","import fix, type

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1599391 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9f0c37aef1916a60ac622bf6d3604abe894b4d3f,2013-02-26T13:53:08Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/Utils42.java']","DERBY_6089: Make client behave more like embedded when invoking the new registerOutParameter overloads added to CallableStatement by JDBC 4.2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1450168 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6395944fed56beb14219d0efc55307f0183160c2,2013-04-10T15:00:48Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java']","DERBY-6161: Simplify code that handles LOB files

Remove unused method in EngineConnection and BrokeredConnection,
and reduce the visibility of the method with the same name in
EmbedConnection.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1466504 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ba954df72631ef63128332fa632f698c7c187859,2011-11-23T12:18:12Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineCallableStatement40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement40.java']","DERBY-4845: Improve the dependency tracking for our build targets

Remove dependency on EmbedCallableStatement40 from
BrokeredCallableStatement40.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1205378 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f422f446f671502d2dab5fc7a79e462a974240bb,2012-05-22T21:14:36Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java']","DERBY-5680: indexStat daemon processing tables over an over even when there are no changes in the tables

Renamed debug property to a more descriptive name.

Patch file: derby-5680-3a-rename_debug_property.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341629 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
4fc5f9c837aab62a44f559e5bbb38abb2be3299a,2014-08-15T08:20:30Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-6703: MERGE statement fails with NullPointerException if ON clause references non-existent column

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1618114 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d8df14045bf24156d9833fcfe634fee1d75080da,2014-05-30T09:48:06Z,['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java'],"DERBY-1576: Fix javadoc warning


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1598529 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2489f473faeda0917c793c2b3ef7866eb7ce0c93,2012-03-15T16:06:50Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5657: Split complex error message into 3 shorter messages.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1301064 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8ef7e92c6c78ca39864b1d4162907478502b77b4,2012-12-27T23:04:48Z,"['java/engine/org/apache/derby/iapi/services/cache/CacheFactory.java', 'java/engine/org/apache/derby/impl/services/cache/Clock.java']","DERBY-3275: Mismatch between comments and actual use of initialSize parameter in CacheFactory and Clock

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1426360 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
841c8990e1ffecaeb1770e6111f0f57e09879c01,2013-02-20T04:19:02Z,"['java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java']","DERBY-5546 ResultSet#updateBigDecimal on a REAL column does not do underflow checking 

Patch derby-5546-2. For both Real and Double, check for underflow. For
Double underflow is currently detected but only because we didn't fix
DERBY-3398 yet, so we introduce the same check now as for Real.  Once
DERBY-3398 it will no longer be redundant. The tests are still guarded
by a check for embedded until DERBY-5534 is fixed.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1447996 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
ab2cc4a686f92c5bab8a6982411d79dc7b48a466,2013-06-21T08:14:22Z,"['java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentRowLocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java']","DERBY-673 Get rid of the NodeFactory

Patch derby-673-fixcomments; which fixes a couple of comments that
were accidentally changed by the first patch (""public"" keyword was
removed).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495317 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
a0e4e78c9146669a43032623ed1bffc40e5c6db5,2015-08-06T03:27:00Z,"['java/engine/org/apache/derby/impl/sql/execute/StdDevPAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/StdDevSAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/VarPAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/VarSAggregator.java']","DERBY-5466: Check in Scott Lewis' aggregator classes for var_pop(), var_samp(), stddev_pop() and stddev_samp(); tests passed cleanly for me on derby-5466-01-aa-aggregatorClasses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1694392 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c67f5dd273d5ff2db6be8fac36f561ac28294b91,2013-04-30T05:34:56Z,"['java/engine/org/apache/derby/iapi/db/TriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericExecutionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerEventActivator.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Remove two unused methods in the TriggerExecutionContext interface,
and their implementations in InternalTriggerExecutionContext. This
also made it possible to remove some fields that were only used by the
removed methods, and also corresponding fields and parameters in
neighbour classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1477477 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
341974802a52be88f1a774e8f733d2a52fc3fcf6,2012-01-09T10:18:05Z,"['java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/Decimal.java']","DERBY-5536 Client's ResultSet#getLong does not range check when converting from a DECIMAL column

Patch derby-5536-3, which fixes this issue and adds new tests.  It
changes the implementation of am.Decimal#getLong to allow it to detect
overflow. If the number of digits indicate it can't happen, we use an
optimized path.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1229082 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
801cf0d354e0fae9e30dbba9a1ca157f6c0eb0f6,2013-07-14T12:41:09Z,"['java/engine/org/apache/derby/catalog/DependableFinder.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ColumnDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/GenericDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexLister.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/impl/services/locks/TableNameInfo.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericAuthorizer.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java', 'java/engine/org/apache/derby/impl/sql/execute/AggregatorInfoList.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseExpressionActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericExecutionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerEventActivator.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ValueRow.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-673: Get rid of the NodeFactory

Patch, derby-673-more-typesafe-6. This cleans up most compiler
warnings in the classes touched, including unnecessary casts due to
changes introduced by this use, but also others.  Some warnings were
silenced using the @SuppressWarning tag (mostly use of old classes
like Vector, Hashtable), in other cases the underlying problem was
fixed by changing the code as required.

It also introduces an explicit TriggerDescriptorList class extending a
generified GenericDescriptorList<TriggerDescriptor>.

Some local variables shadowing others are renamed and in in case
the two variables were merged into one.

I left in place warnings about missing serialVersionUID in
serializable classes since I am not sure whether they can be safely
suppressed; it would need further analysis.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1502965 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
6ae5bb7961e76f8d3ad226587d80a7ed0042cd5f,2011-11-10T13:37:40Z,['java/engine/org/apache/derby/impl/jdbc/LOBStoredProcedure.java'],"DERBY-4845: Improve the dependency tracking for our build targets

Fixed javadoc warnings introduced by the previous commit.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1200327 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
23e89ebd15ab1a666488c4c62f216edb9c2e7f86,2013-07-05T16:17:17Z,"['java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java', 'java/engine/org/apache/derby/vti/XmlVTI.java']","DERBY-6211: Add basic tests for xml-based optimizer tracing; tests passed cleanly on derby-6211-09-aa-addTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1500056 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
28dc366eb6cb39ddb58e4837215686aaa80b18eb,2014-03-03T12:14:06Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/iapi/error/DerbySQLException.java', 'java/engine/org/apache/derby/iapi/error/PublicAPI.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSQLException.java', 'java/engine/org/apache/derby/impl/jdbc/SQLExceptionFactory.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6488: Remove the EmbedSQLException class and the associated DerbySQLException interface.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1573534 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
47d4a4c195b07fcf18eae0af91a541d6e9240437,2013-03-06T09:40:32Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowReferenceNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Replace use of Vector in method signatures and field declarations
with List. The actual instances are still Vectors.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1453240 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f74cf7a6a51653e960d845a1b5f6a43088589545,2012-02-14T11:10:13Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-5530: SQLChar.getCollationKey NPE in index-stat-thread 

Propagate collation information to the new indexes on TRAUNCATE TABLE.

Patch file: derby-5530-1a-propagate_collation_info.diff (trivially modified)



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1243878 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
c05d3df3cb62a287c7bc20bc67123bf499125b45,2014-12-12T20:13:25Z,"['java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapPostCommit.java']","DERBY-6774 background post commit threads cause ASSERTS/errors on interaction with alter table add column

Renable the tests that were failing on some platforms, and adds tests that
were failing consistently in my environment (laptop, windows 7, ibm17). 

The fix was to insure that background threads waited on table intent lock 
before going to the conglomerate cache.

Before doing this an inconsistent conglomerate would sometimes be faulted into 
the cache between time when alter table abort was invalidating the cache and 
abort had finished backing out the alter table. Then a subsequent alter table 
would fail as it correctly passed in that there was 1 existing column, but the
conglomerate cache thought there were 2 columns.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1645055 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
6469ca64dab8d27b2c9f9da9db07db599a94114d,2013-05-15T06:45:54Z,['java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java'],"Fixed javadoc warning.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482695 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
97f7c7af7af711cccc8cc9e8cfb0f1a21ce6a9f6,2013-06-10T08:07:04Z,['java/engine/org/apache/derby/iapi/error/StandardException.java'],"DERBY-6254: Reduce number of factory methods in StandardException

Generalize the factory methods by using varargs.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1491366 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
eec86ed87462846a8683a5082a55f357142579d1,2013-05-13T19:34:03Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/store/raw/data/RecordId.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/Driver20.java', 'java/engine/org/apache/derby/jdbc/Driver30.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection.java', 'java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java']","DERBY-6213: Convert JDBC build scripts to Java 6 and misc merges.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482044 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4d04d503efe82beb045522a1ec097b9b66e407b0,2012-06-05T09:49:35Z,['java/client/org/apache/derby/client/am/DateTime.java'],"DERBY-5796: Remove unused methods in client.am.DateTime

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1346320 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
00df88c3ac8b24cb4586010ca2057fa01cd6285e,2013-08-30T18:23:08Z,['java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java'],"DERBY-532: Support deferrable constraints

Patch derby-532-testAlterConstraintInvalidation.

Adds a fixture to test that prepared statement is invalidated when a
table its depends on undergoes an ALTER TABLE ALTER CONSTRAINT
statement. As it turns out, this is already handled by the common
machinery for ALTER TABLE.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1519045 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3c3e7dbfdd405ebfd650c3fdc362fa95fb7f2fa5,2013-08-07T13:50:13Z,"['java/engine/org/apache/derby/iapi/sql/compile/OptTrace.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLOptTrace.java']","DERBY-6211: Trace the end of optimizing a query block so that the xml-based optimizer tracer can associate trace information with the correct query block; commits derby-6211-12-aa-traceEndOfQueryBlock.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1511315 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5d7388daa95c98f2cbf281945d98556086329dad,2014-05-12T07:30:46Z,"['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java']","DERBY-6566: Simplify handling of untyped nulls in CASE and NULLIF expressions

Make the parser represent untyped nulls the same way in CASE
expressions as in NULLIF expressions, so that ConditionalNode can
handle the two kinds of expressions uniformly.

Make the parser create a single ConditionalNode for each CASE
expression, instead of creating a tree of ConditionalNodes for a
single CASE expression.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593898 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
69ab4bd8f72122e9af37033d5cbd7b5f8aacc088,2014-01-16T18:32:15Z,['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java'],"DERBY-3155: Make the INSERT column list optional in the WHEN NOT MATCHED clause of a MERGE statement provided that the number of values in the VALUES subclause equals the number of columns in the target table; commit derby-3155-12-aa-canOmitInsertColumnList.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1558871 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d5beee79b6d55e9f6bdc1d0fc35c1c221cfe2927,2013-03-11T16:50:06Z,['java/engine/org/apache/derby/jdbc/Driver20.java'],"DERBY-6094: Make login timeouts recover from interrupts and retry.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455230 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7e333995c5e9ba4433a8c5559d1e39d76fcc29f4,2012-05-19T19:31:18Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java']","DERBY-5680: indexStat daemon processing tables over an over even when there are no changes in the tables 

Added functionality in the update statistics code to drop statistics considered
disposable; orphaned (i.e. the referenced index doesn't exist), or not
required (the optimizer doesn't need the statistics).
Disposable statistics are only dropped when the istat daemon kicks in, or
SYSCS_UPDATE_STATISTICS is run without specifying an index.
The functionality is not enabled for soft-upgraded databases.
Included a debug property to force the old behavior.


Patch file: derby-5680-1b-remove_disposable_stats.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1340549 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
91f376ccb33ab6ba23a37a88e270df0aac3f2c35,2012-07-09T10:52:11Z,"['java/engine/org/apache/derby/impl/sql/execute/CurrentOfResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","DERBY-5425: Updateable holdable ResultSet terminates early after 65638 updates

Use a BackingStoreHashtable to store rows updated in such a way that
they may be seen again later in the scan. The BackingStoreHashtable is
made holdable if the ResultSet is holdable so that rows are not lost on
commit, as they were before.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359052 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f80e3cee4f81eb674b78311b39a20bb4cbde70e3,2014-07-30T15:17:43Z,['java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java'],"DERBY-6672: Allow the renaming of referenced tables; commit derby-6672-01-ab-addTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1614681 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2e87a4cf5ff53c10fa48ebe422d360b81c085ba4,2013-04-29T12:17:12Z,"['java/client/org/apache/derby/client/am/ClientStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSQLException.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java']","DERBY-6206: Cleanup mutability problems in org.apache.derby.impl.jdbc.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476983 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
75ec275f8f143d7113402389010c97ba6c01614c,2012-05-21T14:30:24Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/engine/org/apache/derby/iapi/services/io/CounterOutputStream.java', 'java/engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBit.java', 'java/engine/org/apache/derby/iapi/types/SQLBlob.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLVarbit.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-129: CAST should warn about truncation

Made subclasses of SQLChar and SQLBinary generate a DataTruncation
warning when they are truncated to a shorter value.

Pass warnings up to the statement from NoRowsResultSetImpl.

Make the network server transfer DataTruncation in a way the client
accepts.

Update test canons to expect warnings on truncation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341046 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c57876e39914ebb70d685abcf0f4a9185014669a,2013-03-08T20:42:08Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/tools/org/apache/derby/impl/tools/optional/OptimizerTracer.java']","DERBY-6022: Add an optional tool for turning on optimizer tracing and dumping the trace to the console.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1454537 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
33605bd716f12b196e752cecc151e83bd66cc5c4,2012-05-07T13:23:17Z,['java/engine/org/apache/derby/impl/jdbc/authentication/SpecificAuthenticationServiceImpl.java'],"DERBY-5741: Improve error reporting for missing UserAuthenticators.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1335010 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c40208a653e89c78705e6087d838d9ae14327e04,2013-05-31T18:24:53Z,['java/engine/org/apache/derby/iapi/reference/Property.java'],"DERBY-6220: Flag additional Derby properties which are undocumented and remove an unused property.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488345 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
dbde907f04fc32a8ad6d10a62937d46d5bfe90a0,2014-11-26T02:48:06Z,['java/engine/org/apache/derby/impl/store/access/heap/Heap.java'],"DERBY-6774 org.apache.derbyTesting.functionTests.tests.lang.AlterTableTest.testAddIdentityColumn failed with assert in nightlys

Temporarily removing assert that is failing, looks like code should handle
the condition anyway.  Will renable after figuring out what is going on, 
hoping this will allow for clean runs from others while I work on this issue.
My current theory is that there is a long time problem with alter table
and the conglomerate cache that has been uncovered by this relatively new
test and the new background work introduced by DERBY-4057.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1641753 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
10608cf4ff6e0361ae97b6ef96a882fcd90aeaea,2011-11-03T18:43:42Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement20.java']","DERBY-5488: Move BigDecimal getters/setters from JDBC 2.0 implementation into JSR 169 implementation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1197264 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8c02f7457b0041a3700b143ff8587c43134a51f7,2013-09-25T13:34:36Z,['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java'],"ServerPropertiesTest prints .java.net.SocketException: Connection reset to console but test passes 

Remove e.printStackTrace() of error if log writer is null, unless derby.drda.debug is true



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1526172 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
0d74a93a3bdbedc1d1a19f1044b73e9f5b3cb092,2013-04-23T16:48:55Z,['java/tools/org/apache/derby/impl/tools/ij/utilMain.java'],"DERBY-6195:  Cleanup encapsulation problem in utilMain.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471037 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
54844c3a13aff719d4d758f5cfd9e90c75b609d2,2015-06-28T20:21:53Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-6783: WHEN clause in CREATE TRIGGER for UPDATE is not working.

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)

The main challenge raised by this issue involved the analysis of which
columns are referenced by the trigger. Trigger statements can reference
columns in a number of ways, including the ""AFTER UPDATE OF"" clause, the
trigger's action statement, and the trigger's ""WHEN"" clause.

When the WHEN clause support was introduced, this added a new way in which
a TRIGGER could reference columns, and the compiler code which translated
the trigger's logic into specific column references at runtime wasn't
getting the right set of columns.

The intent of this patch is to successfully run sql queries in Derby that
trigger updates in a table, affecting only a certain rows of data that
is determined by the when clause. This patch tries to cover a wide range
of possible ways in which rows are conditionally updated after an event.

Before this patch such trigger commands failed to execute correctly and
left the data in an inconsistent state.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1688062 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
5d1ab6314bec5cf3a935e51a05685ab9cda39d72,2014-02-11T20:41:08Z,['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java'],"DERBY-3155: Add support for ? parameters as INSERT values in MERGE statements; commit derby-3155-25-aa-parametersAsInsertValues.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1567368 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e25c098c0cf4415bbd2e4baba370b27ae240994b,2013-02-20T16:24:09Z,"['java/client/org/apache/derby/client/am/Utils42.java', 'java/engine/org/apache/derby/impl/jdbc/Util42.java']","DERBY-6081: JDBC 4.2 setObject() and updateObject() methods throw NPE when type is null

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448278 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
eb88678a9d52db210c75059af801feea4c5d15dd,2013-07-25T11:07:33Z,"['java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java']","Java doc warning fixes

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1506885 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
cd5717c780b8b41031ed25c3efeb4aafcc410b3a,2013-06-26T08:56:46Z,['java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java'],"DERBY-6273: NullPointerException when using more than one parameter in COALESCE

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1496837 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9b8c04f9062c0f12219274ca7c2364e9df43f256,2014-07-02T07:47:49Z,"['java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6626: Check type of user-supplied modules before creating instances

Check that the encryptionProvider connection attribute specifies an
implementation of java.security.Provider before trying to create an
instance of it.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1607266 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
810f2b9658ddcbd881600c6a9e0cff232c9d4d35,2012-04-18T21:06:04Z,['java/engine/org/apache/derby/impl/sql/catalog/SequenceRange.java'],"DERBY-5493: Boost the size of preallocated sequence ranges from 20 to 100 in order to boost concurrency.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1327682 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b153b241b7dbf4de0e40262b8cc6c9e46be817e2,2013-04-07T12:02:50Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IndexToBaseRowNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Rename variables that have ""vector"" in their names and update
comments.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1465368 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3abd440fbdd6d1c66d2b50f9eacd2980d9ae4213,2012-04-26T14:38:44Z,['java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java'],"DERBY-5679: Fill nonexistent columns with NULLS during update of later column in the row.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1330877 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5355fd279c89855562c74dccb8d59cc75fee2913,2012-06-26T13:46:14Z,['java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java'],"DERBY-5358: SYSCS_COMPRESS_TABLE failed with conglomerate not found exception

Make TableDescriptor.heapConglomNumber volatile to ensure that
getHeapConglomerateId() never sees a partly initialized value.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1354015 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b25e3a7880ec2bf24aa035e64a109ed84970550e,2013-09-09T22:59:51Z,['java/engine/org/apache/derby/impl/store/access/btree/BTreeCostController.java'],"DERBY-6317 Optmizer can choose the wrong path when BTreeCostController.java returns an estimate cost and row count of 0.0 

The Optimizer estimates do not handle well 0 row counts coming out of store.
These estimates end up getting multiplied by other estimates and the resulting
0 costs caused the incorrect plan to be picked in the repro included with
this fix.  This fix changes store cost to always return at least a minimum
of one row when asked to estimate the number of rows in an exact range of
keys from an index.  This minimum is consistent with the optimizer assumption
that an exact key match on a unique index will also return 1 row.

Thanks to Brett Bergquist for debugging and suggesting a fix and to mamta 
satoor for providing a reproducible test case for the bug.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1521310 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
8251716446eb659969fd046a7cfeab1b16028e8b,2013-06-14T14:05:03Z,"['java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/shared/org/apache/derby/shared/common/reference/MessageId.java']","DERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission

Continue shutdown if deregistering fails, and report the failure in derby.log.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1493077 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a8dfc0a0c98b20634796c44c26f1f0149a75b2d3,2013-01-14T18:46:22Z,"['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java']","DERBY-6040: Fix sort order bug when selecting a partial column list from a table function.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1433031 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c3c7251ea354b11f12e64d42b2657325dfa01014,2014-11-04T18:06:08Z,"['java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-674(analyze impact of poodle security alert on Derby client - server ssl support)

Changes based on Knut's feedback.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1636668 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
232d09ab72168cdc641ddaea67c7a585f92971b9,2012-12-11T13:59:13Z,"['java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/Java5ClassInspector.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java']","DERBY-3069: Enable the execution of varargs routines.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1420165 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9e741396c3242c9b54a02ab0eda659a9ff7d4464,2013-04-24T17:46:55Z,"['java/engine/org/apache/derby/iapi/types/CharStreamHeaderGenerator.java', 'java/engine/org/apache/derby/iapi/types/ClobStreamHeaderGenerator.java', 'java/engine/org/apache/derby/iapi/types/StreamHeaderGenerator.java']","DERBY-6200: Encapsulate the bytes in the eof marker for character streams.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471562 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
003b97517e76d5943aa414b53c751994ca966a35,2013-02-21T06:27:34Z,['java/engine/org/apache/derby/impl/sql/compile/AndNode.java'],"Backed out temporary JavaDoc error.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448520 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
232f5efcc70c6433ea3511099fde4dd8e8683369,2013-04-04T15:27:56Z,['java/engine/org/apache/derby/impl/sql/compile/PredicateList.java'],"DERBY-6131 select from view with ""upper"" and ""in"" list throws a ClassCastException 

Prior to this fix the following query on a view would throw a ClassCastException
    select name from myView where upper(name) in ('AA', 'BB');
This query got in code that was trying to ""push"" predicates down, and
that code is only currently build to push constants and column references.
In this case it was mistakenly trying to push down the ""upper"" call, and
when it tried to cast it as a column reference it got the error.  The fix
was to check the type of the node and not push in this case.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1464594 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
8612b0bfab1f4f6f8b6e2438e95490aef343c36d,2014-05-21T16:54:55Z,['java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java'],"DERBY-6542: Raise LockTimeout when there is too much contention on an identity column; commit derby-6542-03-aa-lockTimeoutForIdentityContention.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1596619 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d7582c6e843a3afca910e879e023734ce792fe17,2013-05-20T15:49:26Z,['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java'],"DERBY-5610 ServerPropertiesTest prints .java.net.SocketException: Connection reset to console but test passes 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484507 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
7f8154de8fba4665f3019cd5cf6cdc6b2ddc9ca1,2014-01-22T18:14:16Z,['java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java'],"DERBY-3155: Make MERGE statement serialize SQLRefs rather than HeapRowLocations; commit derby-3155-17-aa-serializingRowLocations.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1560452 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e9ac824113c436a74aa642fc4995071a6c4366cf,2014-08-06T20:01:26Z,['java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java'],"DERBY-6688 NPE (or sane: ASSERT failure) with ROW_NUMBER in some subqueries

In FromSubquery (used in the OK subquery) the phasing is different
than in SubqueryNode (used in the failing query): the order by list is
pushed down too late in the SubqueryNode (after the
SelectNode#preprocess), so that the fact that the order by carries an
implicit window definition isn't recorded, causing the ""windows"" field
to be null, leading to missing rewriting in the getProjectRestrict
phase, hence the error.

In FromSubquery, the order by list is pushed down into the child
select node just before calling its preprocess method, i.e. the order
by list is present what that happens.

The patch (derby-6688-b) moves the pushing down of the order by list
in SubqueryNode#preprocess to the resultSet (the SelectNode) to just
before the call to preprocess of the resultSet, so the rest of the
windows rewriting machinery kicks in.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616332 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
72446ed8a0d3f60d4fa4a2507dd08e71f7e3ebb3,2014-06-05T22:00:26Z,['java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java'],"DERBY-6576 A immediate Fk constraint blows up iff its referenced PK is deferred and we modify a duplicate key column

A follow-up patch, derby-6576-repeatable-read. In the case where we do
not throw an exception because the deferred unique/pk constraint
referenced by an fk is upheld by another row, we need to make sure
that condition holds until we commit. This patch changes the check (in
ReferencedKeyRIChecker#isDuplicated) to scan using repeatable read
isolation level instead of read committed. This will set a read lock
on any (well, the first we find) duplicate row till transaction end
and thus ensure things are good till we commit.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1600779 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
bff25717b15fa8e7ec071ea85bc133a9afb60260,2013-10-24T17:17:02Z,"['java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeConstantAction.java']","DERBY-3155: Fix some serialization bugs in the MERGE ConstantActions and add test cases for using trigger transition tables as the source tables of MERGE statements; check in derby-3155-06-aa-triggerTransitionTableAsSource.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535447 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ead987318e2697045e670a4e22e85bd1c2857c1a,2013-12-23T07:07:45Z,"['java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/iapi/reference/Property.java']","DERBY-6438: Explicitly grant SocketPermission ""listen"" in default server policy

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1553081 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
898f3f5adb736a5de8b464b5d6e9e3e65cd20b4f,2014-01-17T18:50:15Z,['java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java'],"DERBY-3155: Make cleanup logic in MergeResultSet more closely resemble the cleanup logic in InsertResultSet; commit derby-3155-15-aa-replumbMergeResultSetCleanup.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1559218 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a2b37c2a1064eaf3070b30c23853781efbb57714,2014-03-17T19:54:43Z,['java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java'],"DERBY-3155: Materialize LOBs before buffering them up for processing by WHEN [ NOT ] MATCHED clauses; commit derby-3155-44-aa-lobsInTriggers.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1578535 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ab750e37554eb3e8795994b81cc8bd3a06a9e0df,2012-07-02T04:32:38Z,['java/client/org/apache/derby/client/net/NetCallableStatement.java'],"DERBY-5833: Remove unused methods in NetCallableStatement class

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

This change removes the following unused methods from the
NetCallableStatement class:

- resetNetCallableStatement(NetAgent netAgent, NetConnection netConnection, String sql, Section section)
- resetNetCallableStatement(NetAgent netAgent, NetConnection netConnection, String sql, Section section, ColumnMetaData parameterMetaData, ColumnMetaData resultSetMetaData) 

I suspect that, of the two remaining overloads of the resetNetCallableStatement
method, the 3-argument variant could be made private, as it is called only
by the 6-argument variant. That might be a further improvement we could do
at some future time. For now, this change simply removes the two variants
that are wholly unused.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356066 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
ccbbcd4bc0608a5a52979bd32e3503eb342f9912,2014-04-01T12:45:57Z,"['java/engine/org/apache/derby/impl/io/CPFile.java', 'java/engine/org/apache/derby/impl/io/InputStreamFile.java', 'java/engine/org/apache/derby/impl/io/JarDBFile.java', 'java/engine/org/apache/derby/impl/io/URLFile.java']","DERBY-6535: Remove storageFactory field from subclasses of InputStreamFile

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583650 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
353a4990b68b8c1b5b40f75470f01a6e65284dc3,2012-07-20T06:13:28Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Last chunk of warnings: Missing override annotation and missing
braces in if/else and for statements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1363661 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f44e479b7d17331e66859d57ef6ea18470d74fb4,2012-07-25T06:33:53Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement30.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection30.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement30.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement40.java', 'java/engine/org/apache/derby/jdbc/Driver30.java']","DERBY-5877: Prune the brokered class tree

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1365465 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
92fee619d03181622a4a67e2aa82f1bec57eb354,2012-03-09T06:27:10Z,['java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java'],"DERBY-5641: Remove unused BaseDataFileFactory methods plus minor cleanups
Removed methods syncSideLog, pageToDirty and getTempDirectory.
Additional cleanups:
 o removed unused imports
 o removed unnecessary return statement
 o made synchronization object freezeSemaphore final
 o removed unused instance variable backupPath
 o removed unused local variable (and exception instantiation)
   multipleJBMSWarning
 o replaces new Boolean with Boolean.valueOf 

Patch file: derby-5641-1a-unused_methods_plus_cleanup.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1298709 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
4f7c14304132c8b3549c478110056d738e1050c2,2014-06-09T18:25:34Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6596: Forbid null args to lucene support routines; derby-6596-01-aa-checkNotNull.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1601465 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
66ed10161bafe4140f89c8be8c6cde80e229b5af,2012-08-28T16:24:19Z,['java/engine/org/apache/derby/impl/store/access/btree/OpenBTree.java'],"DERBY-5531 Assert failure when inserting NULL into indexed column with territory-based collation

At bind time of insert node, we go through the individual columns in the insert statement to determine if there is a need for normalization or not. In case if the insert resultset has all null values, we conclude that we do not need normalization. At execution time, as part of normalization, the data type conversion from datatypes like SQLVarchar to CollatorSQLVarchar will happen if we are dealing with territory based database. But this never happens if insert resultset has all null values and hence a later assert check in OpenBTree fails because the datatypes do not match(in the example given in this jira, SQLVarchar and CollatorSQLVarchar mismatch at runtime will cause an assert failure). Here is the relevant code in InsertNode.bindStatement() 
/* Insert a NormalizeResultSetNode above the source if the source 
* and target column types and lengths do not match. 
  */ 
if (! resultColumnList.columnTypesAndLengthsMatch( 
resultSet.getResultColumns())) 
{ 
             
   resultSet = 
          (ResultSetNode) getNodeFactory().getNode( 
              C_NodeTypes.NORMALIZE_RESULT_SET_NODE, resultSet, 
              resultColumnList, null, Boolean.FALSE, 
              getContextManager()); 
} 

To fix this problem, we are changing OpenBTree.isIndexableRowConsistent to not throw an assert failure if dealing with null values. If the value is null, then we will not assert the column datatypes. As it is, this method is meaningful only in sane mode. Insane jars do not give any error for the test case provided in the jira because assertion only happens with sane jars.

In short, the fix is, if the row column's value is null, then don't worry about the data type match at execution time.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1378206 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
22f9da71b619e93a05615c8239521f9abf2d30b5,2013-10-31T09:46:58Z,['java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java'],"DERBY-6378: Silence javadoc warning

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537420 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
946f53dc7e3c8ebe3b6882311239f2cd2378428c,2013-01-05T03:13:35Z,"['java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5945 Inappropriate error message when calling a procedure as a function (as if it had a return value) 

Committed patch ""DERBY-5945"". It adds new usage checks for a procedure
called as a function and vice versa, two new eror messages,
LANG_PROC_USED_AS_FUNCTION (42Y03.S.3) and LANG_FUNCTION_USED_AS_PROC
(42Y03.S.4) as well as new test cases to LangProcedureTest.

The patch also does some cleanup of LangProcedureTest and activates to
be run as a standard part of the regressions in the lang suite.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1429197 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f0f1666bf7e01df57e678a2e5b0ac2983a36c62f,2012-11-02T12:23:52Z,['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java'],"DERBY-5970: Forbid illegal settings of the dataEncryption attribute.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1404944 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1bb2c59c7f142255c0f0f2a57dc2ab69753e8f7b,2012-11-08T17:13:36Z,"['java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java']","DERBY-5232 (Put a stern README file in log and seg0 directories to warn users of corrpution they will cause if they touch files there)

This commit fixes 
a)a typo in the readme file content.
b)uses OutputStreamWrtier to deal with UTF-8 encoding for the readme files.
c)fixes the if condition used to create readme files



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1407170 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
18792e22b2e025d650619cab20376346ea3b5e99,2014-03-04T16:46:21Z,"['java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Add privilege checks for the INSERT actions of MERGE statements; tests passed cleanly on derby-3155-33-ab-insertPrivs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574131 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
85e788bae2148c7f33e75ea7854b39b3972e3d1a,2012-10-16T18:25:11Z,"['java/engine/org/apache/derby/iapi/types/CollatorSQLClob.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java']","DERBY-5951: Supply missing CLOB instantiator.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1398914 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
df73e361d05673d88dfe17006b55f5069fac360c,2013-10-02T09:58:43Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Forbid CREATE TRIGGER statements whose WHEN clause contains a
parameter marker or returns a non-BOOLEAN value.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1528401 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
72344982ef3a4e04d75e2a163ae8619f0cdcf6ad,2014-05-21T12:21:44Z,"['java/optional/org/apache/derby/optional/lucene/DerbyIndexInput.java', 'java/optional/org/apache/derby/optional/lucene/DerbyLuceneDir.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Remove handling of impossible exceptions

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1596552 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ddfefebc5205f026d556edf08287fa8607d66bf7,2014-03-06T20:36:09Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Implement printSubNodes() for MergeNode and MatchingClauseNode; commit derby-3155-37-aa-printSubNodes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1575032 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3dbd09b77dfeac9180da9fd6e6c434393a34b30f,2012-06-25T14:35:05Z,"['java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-5688: Add 10.9.1.0 as a starting point in the upgrade tests.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1353578 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e4ad0a5cf64b55ff00762d6baa0b8457d5382ef2,2013-04-19T19:17:30Z,['java/engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java'],"DERBY-6188: Improve the encapsulation of FormatableArrayHolder.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469992 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c7f0048d4f770bd2812b8880d585ce04e5ed6f38,2013-02-07T16:42:55Z,['java/client/org/apache/derby/client/am/Connection.java'],"DERBY-6053 (Client should use a prepared statement rather than regular statement for Connection.setTransactionIsolation)

Sinnce Connection object is already synchronized, no need to use synchronized Hashtable, instead us HashMap.

Also parameterize HashMap object declaration for easier usage and tighter type checking by the compiler.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1443599 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
3c2347618cea21db0f0a08c37c40b6a4acc98434,2014-07-09T07:36:39Z,"['java/engine/org/apache/derby/iapi/util/StringUtil.java', 'java/engine/org/apache/derby/security/DatabasePermission.java', 'java/engine/org/apache/derby/security/SystemPermission.java']","DERBY-3476: Improve serialization of DatabasePermission

Store the URL only once (remove the url field, as the URL is already
stored in Permission.name).

Make the pathType field transient, since it is recalculated on
deserialization anyway.

Store the actions portion of the permission.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609039 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a826375a5482ff797e90b93a83b12173964fd181,2014-09-18T03:52:34Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModGeneratedColumnsStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteGeneratedColumnsResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java']","CERBY-6414(Incorrect handling when using an UPDATE to SET an identity column to DEFAULT)

I have created DERBY-6742 for JDBC part of this feature so we can generate auto generated resultset for an update statement updating generated columns. This implementation is supported through Statement.RETURN_GENERATED_KEYS flag.

Junit tests for this feature are in GeneratedColumnsTest.java. Upgrade tests are in Changes10_12.java. Upgrade test shows that a soft upgrade from pre-10.11 will not support update of generated columns using DEFAULT but 10.11 to trunk soft upgrade will allow it. This is because starting 10.11, we have started using sequence generator to create unique ids. If we want to support updating of idetity columns for pre-10.11 releases, we will need to maintain the code for old way of generating unique ids. In order to avoid that, this feature is available to only 10.11 db during soft upgrade.

For UPDATE of identity column to work in the MERGE sql, we need to make changes to MERGE code(DERBY-6743). MERGE already has required code for insert putting DEFAULT in generated columns. Implementation needs to be added for update putting DEFAULT in generated columns in case of MERGE. In the mean time, I have renamed existing junit test test_015_bug_6414 to atest_015_bug_6414 in MergeStatementTest.java so we do not run into failures.

Some detail about the part of the implementation that was tricky for DERBY-6414.
The existing code was originally written to handle inserting values in identity columns using DEFAULT. In case of insert, InsertResultSet uses ColumnDescriptors in resultDescription to find the type of the generated columns. This data structure holds the column descriptors of all the columns in the table. All the columns are in this data structure because even though INSERT statement may not explicitly assign a value to each and every column in the table, all the columns end up getting some value in them through an INSERT statement. The code in InsertResultSet.initializeAIcache method relies on availability of all the columns type information. But in case of Update, resultDescription does not include all the columns in the table. It only has the columns being touched by the Update statement(the rest of the columns in the table will retain their original values), and for each of those touched columns, it has a duplicate entry in resultDescription in order to have before and after values for the changed column values. This difference in array content of resultDescription requires us to have separate implementation of initializeAIcache method for insert and update.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1625884 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
f16776261c331f4b37a4e702a7be2d6539e571a7,2014-01-09T20:22:16Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java']","DERBY-6453 Remove dead code in InsertResultSet and flag skipCheckConstraints

Patch _*cleanup-misc-3*_ which removes dead code but inserts asserts
in sane mode if we should somehow end up with triggers in bulk insert
mode and also removes a boolean variable in some interfaces which was
always called with false: {{skipCheckConstraints}}.
It adds a new test case, {{CheckConstraintTest#testbulkInsert}}.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1556938 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
b49cc553807c95b00c2eb852c5caa2c17e84d987,2013-04-29T08:21:18Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/compile/CharStream.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Token.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

- Change visibility of all classes generated from sqlgrammar.jj to
  package protected.

- Make CompilerContextImpl.getParameterTypes() package protected since
  it's never called from outside the package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476915 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b9bd28c82bcd0c78fe862b5b1e6ed8380e2326e1,2012-02-24T09:40:55Z,"['java/engine/org/apache/derby/catalog/UUID.java', 'java/engine/org/apache/derby/iapi/services/uuid/UUIDFactory.java', 'java/engine/org/apache/derby/impl/services/uuid/BasicUUID.java', 'java/engine/org/apache/derby/impl/services/uuid/BasicUUIDFactory.java']","DERBY-5627: Remove unused methods from the UUID classes

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1293147 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
850aba4e86ceef21caf1ce22aa2c9653dfd7ce98,2012-07-24T06:40:39Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement30.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/engine/org/apache/derby/iapi/security/SecurityUtil.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSavepoint.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSavepoint30.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/LDAPAuthenticationSchemeImpl.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/ProtocolKey.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/engine/org/apache/derby/jdbc/Driver169.java', 'java/engine/org/apache/derby/jdbc/Driver30.java', 'java/engine/org/apache/derby/jdbc/Driver40.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/engine/org/apache/derby/jdbc/EmbeddedSimpleDataSource.java', 'java/engine/org/apache/derby/jdbc/ResourceAdapterImpl.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java']","DERBY-5840: Compile embedded JDBC 3.0 classes for Java 5

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1364917 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
383bfd5fabf836838130d78b37bead95dc2791ea,2014-11-05T05:52:53Z,"['java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-6764(analyze impact of poodle security alert on Derby client - server ssl support)

Fixed problem with array counter.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1636798 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
2543043c2f9be8a0ba962348142a1cb7298f6a2a,2014-05-07T20:33:11Z,['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java'],"Reformat an unwieldy call.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593131 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
270c77b20db418493eaac566629e9a09edc23165,2013-08-09T13:22:40Z,"['java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java']","DERBY-6211: Mark the end of join optimization with a call to traceEndQueryBlock(); commit derby-6211-13-aa-SelectNode_optimizer.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1512294 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0889c64d6b43fb48896fead0be174731d4304ba4,2013-12-11T22:12:08Z,['java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java'],"DERBY-6426 Fix isLoginException
code treats any StandardException as a login exception due to curious no-op code. Added login state check to make it work as expected. 

Contributed by Dave Brosius



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550287 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
a516dd2cf979eada9ff2b14c174a0a6848248da2,2014-06-26T11:22:40Z,['java/tools/org/apache/derby/tools/SignatureChecker.java'],"DERBY-6638 Remove unnecessary use of reflection in SignatureChecker

Remove the reflection + some missing javadocs and IDE warning fixes.

Removes unused argument from method ""checkSignature"", and changes all
StringBuilder usage to avoid concatenation.

I tested the tool manually for a simple case, but see DERBY-6639.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605738 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
c7000cb792440a317184a4187542d272709bb1d4,2013-02-28T07:24:39Z,"['java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java']","DERBY-6075: Use modern collections in impl/sql/compile

- Use ArrayList instead of Vector in ColumnOrdering and RowOrderingImpl

- Use ReuseFactory to allocate Integer instances for table number and
  column number

- Use library methods List.contains() and List.isEmpty()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1451125 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
70d436bd39cf8c1fa637fc72f2dd176e174c7142,2014-01-31T14:01:17Z,"['java/engine/org/apache/derby/vti/StringColumnVTI.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6117: Allow StringColumnVTIs to change their column names (once) based on their runtime environment; tests passed cleanly for me on derby-6117-02-aa-changeColumnNamesInStringColumnVTI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1563135 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bc76319d03acd9a84543bd10d9b274bc0b94974c,2014-06-20T13:14:44Z,['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java'],"DERBY-6621: Remove unused method; commit derby-6621-03-aa-removeUnusedMethod.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1604168 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d349a1fb8b67f8b819f993410437490a5fc44977,2012-05-22T08:36:16Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedClob.java', 'java/engine/org/apache/derby/impl/jdbc/TemporaryClob.java']","DERBY-5760: Missing argument in some XJ022 errors

Use helper method that sets the argument automatically.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341350 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
44db2d0ad2faf83c24d8f1dfe2c5682b3d23de42,2013-07-11T02:47:48Z,"['java/engine/org/apache/derby/iapi/db/ConnectionInfo.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java']","DERBY-6284: Improve test coverage of org.apache.derby.iapi.db.ConnectionInfo

This patch was contributed by Ahsan Shamsudeen (ahsan dot competition at gmail dot com)

This patch removes the method lastAutoincrementValue from the ConnectionInfo
class. This method is no longer part of the public Derby API; Derby
applications should be using java.sql.Statement.getGeneratedKeys() instead.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1502089 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
0196a8f1782dfd7f03c0a769b8046c3e3f8f2404,2014-07-09T11:07:19Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6626: Check type of user-supplied modules before creating instances

Check explicitly that a custom tool implements the OptionalTool interface.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609099 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
36b48921cc5a71a29fdf7d6f3ec65e3cc58724d5,2013-04-24T21:59:51Z,"['java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteCascadeResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashTableStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealProjectRestrictStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RunTimeStatisticsImpl.java']","DERBY-6201: Fix mutability issues in plan statistics package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471715 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
601e027b04418d0d7c37ef12a66fac944396ff77,2012-02-29T17:26:20Z,['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java'],"DERBY-866: Cleanup an NPE in NATIVE authentication and add some defensive code to frustrate blackhats.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1295189 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
02a05f82727e3da744b89f8c2ebd2885b4503444,2013-10-31T20:14:27Z,['java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java'],"DERBY-6378 OFFSET/FETCH NEXT ignored when query is enclosed in parentheses

Javadoc fix.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537618 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
345f23d478d8005e66030f8d1fbd5ad7391e97a3,2012-10-30T15:19:21Z,['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java'],"DERBY-5970: Prevent user from setting the decryptDatabase attribute to anything other than true.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1403735 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c31614772ac2cf9da87d8340e599c988389dfdc8,2014-07-11T13:55:14Z,['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java'],"DERBY-6650: Parse Lucene versions leniently

Lucene 4.9 changed the format of version strings (from LUCENE_48 to
LUCENE_4_9). We need to recognize both in order to detect if an
upgrade has happened.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609716 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
43fb59eefadbb6a87ad96fa09d06fb2f01134c93,2013-04-01T03:59:38Z,"['java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Version.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java']","DERBY-6125 Code clean up in client driver

Patch derby-6125-04-a. Patch details:

- removed unused var Configuration.traceFileSuffixIndex__,
  #enableConnectivityToTargetServer__, #jvmSupportsMicrosClock

- made #dncCompatibleJREVersions private, added ""1.8"" as a legal JRE,
  and added accessor getDncCompatibleJREVersions

- made NetConnection#msgutil final

- removed unused var targetExtnam_

- made #indoubtTransactions_ private and changed to genericized
  HashMap, I believe this is multi thread safe, being used within a XA
  connection. Added accessors #getIndoubtTransaction and
  #getIndoubtTransactionIds

- made some methods final (e.g. #completeConnect, #flowConnect,
  #flowSimpleConnect, #isConnectionNull)

- removed unused extnam

- reduced some variable's scopes to silence FindBugs.

- made #targetPublicKey_ private, changed accessor #getTargetPublicKey
  to copy the the mutable array's contents

- removed instances of useless code of this shape:
      :
      if (!isXAConnection_)
           return;
      if (isOpen()) { // <--- has no side effects
           return; // still open, return
      }
  } <---- we return here anyway...

- removed unused vars NetConnectionReply#srvdgnReceived, #srvdgn

- replaced StringBuffer with StringBuilder in
  NetConnectionReply#doMgrlvlrmSemantics

- removed unused var NetXAResource#numXid

- removed unused var ClientBaseDataSourceRoot#globaltraceFileSuffixIndex

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1463080 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
d54c775bbfebe6ef48792b6250c4764d95ab723e,2014-06-12T17:05:30Z,['java/engine/org/apache/derby/impl/io/JarStorageFactory.java'],"DERBY-4381; Connection to Derby database using jar subprotocol doesn't work if the path has round bracket in it
   fixing formatting, comments, and removing an unnecessary import


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1602232 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
4e29c88dde7b8fa25dc82ad289d6674562d26a21,2011-11-22T22:22:45Z,"['java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineConnection40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection40.java']","DERBY-4845: Improve the dependency tracking for our build targets

Remove dependency on EmbedConnection40 from BrokeredConnection40.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1205195 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
00db860ec67146d2559c2cfb8e4349137932a128,2013-04-02T04:42:15Z,['java/engine/org/apache/derby/impl/sql/execute/HashTableResultSet.java'],"DERBY-6133 simple array index typo 

Patch 6133.txt contributed by Dave Brosius (dbrosius at mebigfatguy
dot com).



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1463379 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
4a2a03864caf1bf9487efa991a7baaf54ebd092c,2014-01-21T08:58:12Z,"['java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-6456: Infinite loop in NetworkServerControlImpl when reply >= 32k

Make sure the reply buffer in NetworkServerControlImpl is able to hold
the longest possible reply that it could see.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1559943 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
065a81f2db882a299b700b582e1a6e0b79e219f8,2014-01-09T14:18:03Z,['java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java'],"DERBY-6443: ArrayIndexOutOfBoundsException when calling function from trigger

StaticMethodCallNode.bindExpression() was a no-op if the node had
already been bound. This caused problems for queries that need to bind
expressions multiple times (for example INSERT INTO ... SELECT).

This fix makes StaticMethodCallNode.bindExpression() work if it's
called a second time, while still making it a no-op if it is called
recursively in order to prevent infinite recursion.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1556809 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c784df507ab6b6b8082377a5476f21bb1a7be0d0,2012-07-17T09:08:25Z,"['java/client/org/apache/derby/client/am/Clob.java', 'java/client/org/apache/derby/client/am/ClobOutputStream.java', 'java/client/org/apache/derby/client/am/ClobWriter.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/client/org/apache/derby/client/am/ResultSet.java']","DERBY-5840: Silence deprecation warnings in the network client

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1362420 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
19ca71c195adffddc2ca134a439cda35e3217845,2014-09-12T12:00:04Z,['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java'],"DERBY-6730: Allow spaces in the names of key names used by Lucene indexes; commit derby-6730-02-ab-spacesInKeyName.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1624507 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a0dbbd7285ba1ad5e560e5fc18c336c4fa5890dc,2014-09-18T12:29:24Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/diag/DiagUtil.java', 'java/engine/org/apache/derby/diag/StatementCache.java', 'java/engine/org/apache/derby/iapi/security/SecurityUtil.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/io/FormatIdInputStream.java', 'java/engine/org/apache/derby/iapi/sql/conn/ConnectionUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/store/access/DiskHashtable.java', 'java/engine/org/apache/derby/iapi/types/ClobStreamHeaderGenerator.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/db/DatabaseContextImpl.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/daemon/SingleThreadDaemonFactory.java', 'java/engine/org/apache/derby/impl/services/locks/Deadlock.java', 'java/engine/org/apache/derby/impl/services/locks/Timeout.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStorablePreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/LanguageDbPropertySetter.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/MaxMinAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SumAvgAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/D_DiagnosticUtil.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RFResource.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/security/SystemPermission.java']","DERBY-6648: Prevent user code from calling the public static entry points in ContextService; commit derby-6648-01-ae-regressionTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1625960 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
eebc9c7199b435b1296cf548a03ead27f538545d,2013-12-11T10:57:34Z,['java/engine/org/apache/derby/impl/store/access/sort/MergeInserter.java'],"DERBY-5416: SYSCS_COMPRESS_TABLE causes an OutOfMemoryError when the
heap is full at call time and then gets mostly garbage collected later
on.

Improve the accuracy of the code that estimates the memory requirement
of the sort buffer. When it detects that the current memory usage is
lower than the initial memory usage, it now records the current usage
and uses that value instead of the initial memory usage in future
calculations.

This compensates to some degree, but not fully, for the skew in the
estimates due to garbage collection happening after the initial memory
usage. The memory requirement will not be as badly underestimated, and
the likelihood of OutOfMemoryErrors is reduced.

There is no regression test case for this bug, since the only
reliable, reproducible test case that we currently have, needs too
much time, disk space and memory to be included in the regression test
suite.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550103 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
28f9484370226d9356bd4f604d14242d4aed7d9c,2013-04-16T07:07:10Z,"['java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParseException.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Changes under impl/sql/compile:

- Reduce visibility of some classes, fields and methods

- Remove some unused methods (including one actually used setter
  method where the field it sets is unused)

- Make last parameter of UnaryOperatorNode.init() a scalar rather
  than an array, since it's always a single value

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1468317 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a18028722d0d3ee9ec76cca7cb2a69eea24b87ed,2014-05-21T12:05:25Z,"['java/engine/org/apache/derby/iapi/db/ConnectionInfo.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/BulkInsertCounter.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceGenerator.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-6542: Use sequence generators to create identity values; commit derby-6542-02-af-useNewSequenceGenerator.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1596548 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
59dbeaa15aed3ebe9ce59bafc11325d3cf6bcde2,2012-09-17T06:02:28Z,['java/engine/org/apache/derby/impl/store/raw/RawStore.java'],"DERBY-5930: Reformat RawStore.setupEncryptionEngines

Fixed indentation, typos, long lines, and adjusted some comments.
Replaced tabs with spaces.

Patch file: derby-5930-1a-reformat.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1386483 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
e1a79c33113291fafe8dff00172625b02fc9c535,2013-06-19T10:49:39Z,"['java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/Decimal.java', 'java/client/org/apache/derby/client/am/DisconnectException.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java']","DERBY-6262: Simplify message-generating methods using varargs

Use varargs in more constructors in SqlException and
DisconnectException. Since the message arguments in some of those
methods were not the last arguments, some reordering of arguments in
the callers was needed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494541 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
27905092e72ba64271310444606fb8edffa28960,2014-03-26T15:27:10Z,['java/tools/org/apache/derby/impl/tools/sysinfo/Main.java'],"DERBY-6468; Add a version number to derbyTesting.jar
   - a new properties file, org/apache/derby/info/tsting.properties, is generated with the required info
   - this file is inserted in to derbyTesting.jar
   - sysinfo reflects the location of the org.apache.derbyTesting package if an indicative class is found in the classpath


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1581885 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
ab098e217d8b785d543a9c11d38011577baf2443,2013-05-07T19:53:08Z,"['java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/engine/org/apache/derby/vti/VTITemplate.java']","DERBY-6213: Fix some compilation problems in the vti package when compiling on Java 7.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480052 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d56ee6a7a494e027ed3617ad2596408ba3469217,2014-03-12T09:40:03Z,['java/engine/org/apache/derby/iapi/services/io/FileUtil.java'],"DERBY-6505: Clean up dead code in FileUtil

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1576673 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3d1bc57ed18277bc7c52d98a6ad48fec69d6c9e8,2012-10-23T11:25:52Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java']","DERBY-672: Remove unneeded exceptions and a redundant null check

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1401250 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0b71ff5e6a1b96b77fb324e0f238cc880a0d486d,2014-04-07T14:14:22Z,"['java/optional/org/apache/derby/optional/api/LuceneUtils.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Add the ability to configure the query parser used for lucene queries; commit derby-590-20-aa-customQueryParser.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1585488 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3e77b5adbd5b197ecbfe0849a720fc07f93a396f,2014-02-25T20:13:00Z,"['java/engine/org/apache/derby/iapi/sql/compile/TagFilter.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-3155: More improvements to column resolution in MERGE statements; tests passed cleanly for me on derby-3155-30-ab-moreCorrelationNames.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1571808 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c0a5ce180fe1f888a31d4e0955db0847fd6c7eef,2013-02-20T04:42:57Z,"['java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/iapi/types/DataTypeUtilities.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java']","DERBY-3398 Support min/max values for Java types float/double in real/double columns

Patch derby-3398-8.

Removes the legacy DB limits on floating point numbers.

This lets the application use Derby for all Java float and double
values with the exception of NaN (not a number), -0.0 (normalized to
+0.0) and +/- infinity as defined in the IEEE-754 1985 floating-point
standard.

After this change, on soft upgrade, instead of throwing on the DB2
limits when calling ResultSet#updateXXX or PreparedStatement#setXXX,
the check throws on ResultSet#updateRow, or #insertRow, and similarly
on PreparedStatement#execute.

Upgrade tests test this behavior. But don't run floating ResultSet#updateXXX on old
releases prior to 10.2 (they don't support forward updatable result
sets).

The patch also fixes max display width for real and double numbers
since some values's printed representation were truncated by ij (even
before the DB2 limits change). This accounts for the all the canons
changes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448002 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7f6e8aad927c0ae7ca2b941ba06e689d63ac8544,2012-08-14T11:17:14Z,"['java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Types.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java']","DERBY-5896: Change java/drda source code to use spaces instead of tabs and clean up tab creep in java/client

Align with tab stops in java/client.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1372841 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4e5e9650b77c23ae33a1240f2ef7bee6e548ff08,2013-06-04T08:03:37Z,"['java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/Java5ClassInspector.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/Java5ClassFactory.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6243: Fold Java5ClassFactory into ReflectClassesJava2

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1489314 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fac3fe7b118b7f021471546faf970b07589752dd,2013-04-10T13:30:37Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/DropSequenceConstantAction.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-6137: Don't clear the sequence cache during most DDL write operations.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1466481 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3f7581c05bb94eb6050ecb7ffc39c6aac683d97e,2013-05-23T12:56:45Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexLister.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericResultDescription.java', 'java/engine/org/apache/derby/impl/sql/execute/ColumnInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteCascadeResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashTableStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealProjectRestrictStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RunTimeStatisticsImpl.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

- Make ArrayUtil.asReadOnlyList() use checked conversions and remove
  SuppressWarnings annotation

- Generify the signature of ArrayUtil.copy(Object[]), remove the now
  redundant copy(String[]) overload, and remove the now redundant
  casts in many of the call sites

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485676 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7cfb7e6fe52a683abd962207fdbd80b2f1de8588,2013-02-07T20:17:08Z,"['java/build/org/apache/derbyBuild/classlister.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement42.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/PreparedStatement42.java', 'java/client/org/apache/derby/client/am/Utils42.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection42.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement42.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java', 'java/engine/org/apache/derby/iapi/types/SQLBlob.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/jdbc/Util42.java', 'java/engine/org/apache/derby/jdbc/Driver42.java', 'java/shared/org/apache/derby/shared/common/reference/JDBC40Translation.java']","DERBY-6000: Add new PreparedStatement.setObject() overloads introduced by JDBC 4.2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1443697 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bc2c59e81758b22a9172134476e27ecd91d65607,2013-04-25T14:57:01Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CatalogRowFactory.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexLister.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PasswordHasher.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatisticsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UserDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataTypeUtilities.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RunTimeStatisticsImpl.java']","DERBY-6202: Cleanup mutability issues in org.apache.derby.iapi.sql.dictionary package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1475809 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0e00e5eae686a6c12f414a0df9a3efce07969d59,2011-11-29T01:36:12Z,"['java/engine/org/apache/derby/impl/io/BaseStorageFactory.java', 'java/engine/org/apache/derby/impl/io/VFMemoryStorageFactory.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/io/StorageFactory.java']","DERBY-5096 DisconnectException: ""Connection was refused because the database DB was not found"" when creating db for first time

Patch adjusts the canonicalName after mkdirs() if it does not match getCanonicalPAth()




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1207729 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
b306655c2eb85315f66a3e31dc28874f2082ff3f,2014-06-05T19:08:57Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-6595: Fix sequence cache-flushing problem during trigger re-compilation: tests passed cleanly on derby-6595-01-aa-dontClearSequenceCache.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1600729 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a6a07338a44375205fd44a1a090cae102b6e0cfe,2012-05-14T01:02:56Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AlterTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java']","DERBY-4115 Provide a way to drop statistics information

The details of all the changes in this commit are listed below. 
1)Added a new routine SYSCS_DROP_STATISTICS, with public access similar to SYSCS_UPDATE_STATISTICS. This happens in DataDictionaryImpl, where SYSCS_DROP_STATISTICS is added to the list of public access procedures in sysUtilProceduresWithPublicAccess 
2)The new stored procedure implementation is similar to update statistics, ie allow the routine to go through ALTER TABLE where permission/privilege checking, table/schema/index name validations happen automatically and we implement the routine logic through extension of ALTER TABLE syntax. This new syntax for ALTER TABLE syntax(same as we did for update statistics) is an internal syntax only and won't be available to an end user directly. 
3)This commit changes sqlgrammar.jj to recognize the following internal syntaxes for ALTER TABLE 
a)ALTER TABLE tablename ALL DROP STATISTICS 
The existing(corresponding syntax) for update statistics is as follows 
ALTER TABLE tablename ALL UPDATE STATISTICS 
b)ALTER TABLE tablename STATISTICS DROP indexname 
The existing(corresponding syntax) for update statistics is as follows 
ALTER TABLE tablename UPDATE STATISTICS indexname 
Notice the two syntaxes for index level statistics are different for drop vs update.(the reason for the syntax difference is explained above) 
4)After the statistics are dropped, we send invalidation signal to dependent statements so they would get recompiled when they are executed next time. This will make sure that they pick the correct plan given the statistics for the table. 
5)The commit takes care of some of the test failures(expected failures because of the addition of a new system procedure). 
6)The commit adds basic upgrade test for the new procedure. This test ensures that drop statistics procedure is available only after hard upgrade. 
7)While writing the upgrade tests, I found that a meaningful test for drop statistics could only be written for Derby releases 10.5 and higher. We have found that when constraints end up sharing same backing index, Derby won't create statistics for them. This is issue DERBY-5702. But if we run update statistics on that constraint, we will be able to get the statistics for such a constraint. Later, when the constraint is dropped, because of DERBY-5681, the statistics row for such a constraint(one that shares it's backing index with another constraint) is never dropped. We can use drop statistics procedure introduced in this jira to take care of such hanging indexes. But since update statistics procedure is only available in 10.5 and higher, I couldn't demonstrate use of drop statistics to drop hanging statistics rows. 




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1338017 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
5570eb085195529674c75459be4af57b820037e8,2013-05-11T01:40:09Z,"['java/demo/simplemobile/SimpleMobileApp.java', 'java/engine/org/apache/derby/diag/ContainedRoles.java', 'java/engine/org/apache/derby/diag/ErrorLogReader.java', 'java/engine/org/apache/derby/diag/ErrorMessages.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/diag/SpaceTable.java', 'java/engine/org/apache/derby/diag/StatementCache.java', 'java/engine/org/apache/derby/diag/StatementDuration.java', 'java/engine/org/apache/derby/diag/TransactionTable.java', 'java/engine/org/apache/derby/jdbc/Driver169.java', 'java/engine/org/apache/derby/jdbc/EmbeddedSimpleDataSource.java', 'java/stubs/jdbc4/javax/sql/ConnectionEvent.java', 'java/tools/org/apache/derby/tools/SignatureChecker.java']","DERBY-6213: Remove CDC DataSource and Driver.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1481248 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
656a1ad2819f13024ec3a7cec0c347323f88dbcc,2014-09-25T21:26:12Z,['java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java'],"DERBY-6662; DatabaseMetaData.usesLocalFiles() returns true for in-memory databases
   Making the usesLocalFiles and usesLocalFilePerTable method return false if it's a memory database and add a test.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1627671 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
b09644478ea9e14f4fd1b9abbdc521267ffe2c70,2013-04-26T19:02:48Z,"['java/engine/org/apache/derby/impl/sql/catalog/XPLAINStatementDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/XPLAINStatementTimingsDescriptor.java']","DERBY-6206: Clone timestamps in XPLAIN code to fix mutability problems.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476344 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a4c1c3a384f4deeb4fa5fc1a15a3ebf0d8508ba3,2012-06-21T17:31:17Z,"['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5779: Do not let table function parameters refer to other tables in the same FROM list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1352631 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9496f49a652b3f16b0c5afa8a8fcd939683f3449,2012-12-08T00:36:44Z,"['java/engine/org/apache/derby/iapi/store/access/AccessFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/log/LogFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/ReadOnly.java']","DERBY-5996(Create readme files (cautioning users against modifying database files) at database hard upgrade time)

During hard upgrade to 10.10, Derby will create 3 readme files, one in database directory, one in ""seg0"" directory and one in log directory. These readme files warn users against touching any of files associated with derby database




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1418568 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
8d64950dbb1586c51523fdd309d5db452d8c8e56,2014-06-27T07:58:19Z,"['java/tools/org/apache/derby/impl/tools/ij/util.java', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java']","DERBY-6621: Reduce the visibility of more classes and methods

Make util.getResourceAsStream() package-private, and make utilMain use
that method instead of implementing its own.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605981 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d3f7a7c179d9722a399375c76b3df2e5ffc62ac8,2014-07-10T09:50:08Z,['java/optional/org/apache/derby/optional/lucene/DerbyIndexOutput.java'],"DERBY-6650: Lucene tests fail on compact profile 2

Implement IndexOutput.getChecksum() which is required by Lucene 4.8.
Lucene 4.8 works on compact profile 2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609428 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b3834d357bc2dfa7886c0f954026521a7903cbaf,2012-10-19T16:47:39Z,"['java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java']","DERBY-672: Add support for loading user-defined aggregates from jars stored in the database.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1400161 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e2245e624e18bd503bf99dcdea762027086577c2,2013-04-26T14:50:50Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java']","DERBY-6202: Fix bug involving upgrade, triggers, and dropped columns.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1476235 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
60dc440d58a4a90c4a8c95fcbb9ef2ed4161b162,2012-07-11T17:14:49Z,['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java'],"DERBY-5554: Allow multiple tables in FROM lists which join tables to VTI arguments.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1360306 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
542c2b74796aceb6e9c8ccd19cde994fd58e8560,2012-07-18T10:02:34Z,"['java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java']","DERBY-5860: Remove unused methods in DDMReader and DDMWriter

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1362837 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
dcd69d386e335bf049b9018b5356083406bfb4b0,2012-02-23T08:35:53Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java']","DERBY-5539: Harden password hashing in the builtin authentication service

Always generate a hashed token, also if there is no user with the
specified user name. This way, authentication failures take the same
amount of time regardless of the user's existence, which will make it
harder for attackers to tell whether a user exists.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1292704 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d043e29ff73801bb9e12b44fd0fe919c6fddca0d,2014-08-18T06:17:18Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-6705: Triggers should not allow MERGE statements that reference temporary tables

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1618544 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
88fc5dd00aeb7fec1a7ed964b80d897ecfbd6530,2012-11-06T06:28:57Z,['java/engine/org/apache/derby/iapi/services/info/JVMInfo.java'],"DERBY-5948 Update JVMInfo to include JDK8



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1406053 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
65bdc4d2cf3058a5f7d825b8310fab203f6ddf7e,2012-05-17T21:24:20Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5768: Remove references to NATIVE::LOCAL from Derby messages.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1339869 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a15a470293c2e960c95ccde71099d7f4724be397,2013-05-14T20:46:59Z,"['java/engine/org/apache/derby/impl/services/bytecode/BCClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCMethod.java', 'java/engine/org/apache/derby/impl/services/bytecode/GClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/d_BCValidate.java', 'java/engine/org/apache/derby/impl/services/cache/Clock.java', 'java/engine/org/apache/derby/impl/services/daemon/BasicDaemon.java', 'java/engine/org/apache/derby/impl/services/daemon/SingleThreadDaemonFactory.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/locks/ConcurrentLockSet.java', 'java/engine/org/apache/derby/impl/services/locks/Control.java', 'java/engine/org/apache/derby/impl/services/locks/Deadlock.java', 'java/engine/org/apache/derby/impl/services/locks/LockControl.java', 'java/engine/org/apache/derby/impl/services/locks/LockSet.java', 'java/engine/org/apache/derby/impl/services/locks/LockSpace.java', 'java/engine/org/apache/derby/impl/services/locks/LockTable.java', 'java/engine/org/apache/derby/impl/services/locks/TableNameInfo.java', 'java/engine/org/apache/derby/impl/services/locks/Timeout.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/engine/org/apache/derby/impl/services/reflect/LoadedGeneratedClass.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectClassesJava2.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectGeneratedClass.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/services/stream/SingleStream.java', 'java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java']","DERBY-6213: Generify impl/services packages.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482578 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0b963b2bd3d3e981ca02bd39a679d9465580a3d6,2013-02-05T05:14:01Z,['java/client/org/apache/derby/client/am/Connection.java'],"DERBY-6053(Client should use a prepared statement rather than regular statement for Connection.setTransactionIsolation)

Use prepared statements rather than regular statement to change the isolation level in client server mode. This will be better for performance and will also avoid possible garbage collection issues.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1442474 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
f1c232e415e5cb0badf3460d6c50f60302ddcc6a,2012-06-26T14:05:41Z,['java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java'],"DERBY-5829 Lift DB2 restriction on the DEFAULT clause

It removes the restriction on VARCHAR defaults length to maximally 254 characters.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1354024 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
0b0a105a0f40f20050e00cd3b5f4f6e58603b017,2013-01-29T18:02:00Z,"['java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6000: Add JDBC 4.2 method Statement.executeLargeBatch() to embedded and client drivers.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1440035 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7d889ca12512499738fb4c520cfa568a54db5b39,2014-04-08T16:21:42Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-590: Prevent Derby from using an earlier version of Lucene to read an index created by a later version of Lucene; commit derby-590-21-aa-noTimeTravel.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1585774 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
01632c255e82eb6f5c284ce993703d7b77cf099d,2013-11-11T13:40:27Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/NoPutResultSet.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CallStatementResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MiscResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdatableVTIConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/WriteCursorConstantAction.java']","DERBY-3155: Add support for INSERT action of MERGE statement; commit derby-3155-07-ad-insertAction.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1540713 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
519bfa7404b4b7620c77c1d48f0f8a3f3f6cad9f,2013-05-06T13:18:58Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Remove the CreateViewNode.getProviderInfo() method in which a bug (it
returns colInfos instead of providerInfos) was introduced in revision
1477476.

Also remove the single caller of that method, as it appears to be dead
code that was only needed for views that had been created with a
pre-Derby version of the engine. Since upgrade is only supported from
other Derby versions, that logic should not be needed anymore.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1479562 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6cc0702d2f966f4311e4cf5b343cf9d2aa3a7b50,2013-04-29T17:33:41Z,"['java/engine/org/apache/derby/iapi/sql/PreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/ResultDescription.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericResultDescription.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregator.java']","DERBY-6206: Cleanup some mutability problems in the rg.apache.derby.impl.sql package.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1477222 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b1008f380eb0ac261c99371263281744c3c8f8a0,2014-09-29T15:41:56Z,"['java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactoryBuilder.java']","DERBY-6630: Reduce visibility of JCECipherFactory and protect it with the usederbyinternals permission; tests passed cleanly on derby-6630-01-aa-usederbyinternals.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1628206 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
badaed78c952b2b43205ffd21e4886121c5fbfaa,2014-01-22T10:50:24Z,['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java'],"DERBY-6457: NetworkServerControl API breaks when username or password
contains non-ascii characters

Make NetworkServerControlImpl.writeLDString() write the length in
bytes instead of characters to match how it is read by
NetworkServerControlImpl.readLDString().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1560311 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2c38f3ce2c6ffa90ef1cf1ded971713e9db4e49e,2015-07-13T20:29:48Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/optional/org/apache/derby/optional/api/SimpleJsonUtils.java', 'java/optional/org/apache/derby/optional/json/SimpleJsonTool.java']","DERBY-6825: First rev of the simpleJson optional tool.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1690814 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ee33904c48eb6a8f81a0a462682daabc11f7ce2d,2013-04-09T10:11:30Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXid.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/client/org/apache/derby/client/am/ClobOutputStream.java', 'java/client/org/apache/derby/client/am/ClobWriter.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/Section.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveBlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveLOBLocatorInputStream.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java']","DERBY-6125 Code cleanup in client driver

Patch derby-6125-visibility-01-b; details

- limits visibility of many classes, methods and fields to what's
  necessary,

- adds final specification to ClobWriter#clob_ and

- removes ClientPooledConnection.getNetXAConnection by inlining its
  content in the one usage location.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1465956 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
4d044a3f7a7b8bc70860629bded778972f617ce1,2012-12-15T00:34:47Z,"['java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java']","DERBY-6008 Allow ORDER BY and FETCH/OFFSET in set operands

Patch derby-6008-e; adds this feature as well as accompanying new tests.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1422164 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3235c139809c43f995bda506cb6dcd378d60c169,2014-06-07T20:13:33Z,['java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java'],"DERBY-6587; Foreign Key constraint not matched when using UUID in a composite foreign key when using SYSCS_UTIL.SYSCS_IMPORT_TABLE
  test data and fix patch contributed by Pascal Grn (pascal dot gruen at gmail dot com)


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1601169 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
86ee0a0d31ca72d3c710d1f68489904414c20eb2,2014-09-12T07:41:12Z,"['java/engine/org/apache/derby/iapi/services/cache/CacheManager.java', 'java/engine/org/apache/derby/iapi/services/jmx/ManagementService.java', 'java/engine/org/apache/derby/impl/services/cache/ClockPolicy.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCache.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCacheMBeanImpl.java', 'java/engine/org/apache/derby/impl/services/cache/ReplacementPolicy.java', 'java/engine/org/apache/derby/impl/services/jmx/JMXManagementService.java', 'java/engine/org/apache/derby/impl/services/jmxnone/NoManagementService.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/mbeans/CacheManagerMBean.java', 'java/engine/org/apache/derby/security/SystemPermission.java']","DERBY-6733: Implement an MBean for monitoring caches

Add a new MBean called CacheManagerMBean, which provides information
about a CacheManager instance.

Create CacheManagerMBean instances for the page cache and the
container cache when a database is booted.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1624469 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b06ac7aeb94196b200f4c037b439deae8e509a09,2013-06-26T10:16:17Z,['java/demo/workingwithderby/WwdEmbedded.java'],"DERBY-1997: Remove custom exception printing methods and replace with printStackTrace as suggested

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1496870 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
b13b17c2ae2b4f2fc47b06be04d5be8aa7088928,2013-04-14T04:17:07Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientPooledConnection40.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/ClientXid.java', 'java/client/org/apache/derby/client/am/Blob.java', 'java/client/org/apache/derby/client/am/BlobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/CachingLogicalConnection.java', 'java/client/org/apache/derby/client/am/CachingLogicalConnection40.java', 'java/client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/client/org/apache/derby/client/am/CallableStatement40.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/Clob.java', 'java/client/org/apache/derby/client/am/ClobLocatorOutputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/client/org/apache/derby/client/am/ClobOutputStream.java', 'java/client/org/apache/derby/client/am/ClobWriter.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/DatabaseMetaData.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/Lob.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/client/org/apache/derby/client/am/LogicalCallableStatement40.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/am/LogicalConnection40.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/LogicalDatabaseMetaData40.java', 'java/client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/PreparedStatement40.java', 'java/client/org/apache/derby/client/am/PreparedStatement42.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveBlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/UpdateSensitiveLOBLocatorInputStream.java', 'java/client/org/apache/derby/client/am/stmtcache/JDBCStatementCache.java', 'java/client/org/apache/derby/client/am/stmtcache/StatementKey.java', 'java/client/org/apache/derby/client/am/stmtcache/StatementKeyFactory.java', 'java/client/org/apache/derby/client/net/CcsidManager.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/client/org/apache/derby/client/net/ConnectionReply.java', 'java/client/org/apache/derby/client/net/ConnectionRequestInterface.java', 'java/client/org/apache/derby/client/net/EbcdicCcsidManager.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData.java', 'java/client/org/apache/derby/client/net/NetDatabaseMetaData40.java', 'java/client/org/apache/derby/client/net/NetLogWriter.java', 'java/client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/client/org/apache/derby/client/net/NetResultSet.java', 'java/client/org/apache/derby/client/net/NetResultSet40.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetSqldta.java', 'java/client/org/apache/derby/client/net/NetStatement.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/client/org/apache/derby/client/net/NetXAResource.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/client/net/Reply.java', 'java/client/org/apache/derby/client/net/ResultSetReplyInterface.java', 'java/client/org/apache/derby/client/net/ResultSetRequestInterface.java', 'java/client/org/apache/derby/client/net/StatementRequestInterface.java', 'java/client/org/apache/derby/client/net/Typdef.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java']","DERBY-6125 Code clean up in client driver.

derby-6125-imports-01-a. This ""horizontal"" patch makes the import
policy consistent for the client driver:

- iff a class from java.sql.* can be shadowed by a Derby class
  (i.e. Clob, ResultSet); we do not import such java.sql.* classes but
  refer to them using the full package and class name. The Derby
  classes are always imported and referenced in the short form. This
  makes the code much more readable IMHO.

- I'd like to change the names of the Derby classes that can shadow
  java.sql.* classes (so we can import such classes from java.sql.*
  too), but I need to investigate whether that can have any
  compatibility issues first. Does anyone know?

- removes unused public static variable ClientXid#MAXGTRIDSIZE

- removes a few unused initial values to silence NetBeans warnings

- removes unused Cursor#getUnicodeStream

Otherwise, the patch contains a few Javadoc improvements and typo
fixes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1467726 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
217bf8a087837f6d88c9f77a7def596b9251c763,2013-04-18T07:18:53Z,['java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java'],"DERBY-6128 Examine Derby classes to determine if we need to add serialVersionUID to any of them 

Patch derby-6128-ecpds40.diff. 

Added comment to EmbeddedConnectionPoolDataSource40:

// This explicit UID was missing for releases 10.10.1.1 and lower.
// The default changed between 10.7 and 10.8,
// so even with this explicit UID in place, serialized data sources
// created with 10.7 or older would not be readable.
// The default UID in 10.7 was -2155993232624542236.
// This was not caught by the serialization tests at the time since
// the ""40""-suffixed data sources were not tested back then, cf DERBY-5955
// http://svn.apache.org/viewvc?view=revision&revision=1438035 .




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469197 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f2dfe0602572c0b3f819fa584d33788b6e6f2779,2014-05-28T11:35:25Z,"['java/engine/org/apache/derby/impl/sql/compile/CachedValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java']","DERBY-1576: Extend the CASE expression syntax for ""simple case""

Cache the case operand so that it is only evaluated once per
evaluation of the CASE expression.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1597979 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
643af3da699a0f1505ade3e2232582d160a60e7f,2013-04-10T08:04:52Z,['java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java'],"DERBY-6092: IOException when closing LOBFile at end of transaction

A bug in Java 5 may cause IOException if two threads attempt to
close the same RandomAccessFile at the same time.

Avoid this situation by removing the LOBFile from the list of open
files before closing it from LOBStreamControl's finalizer. Then the
cleanup code at the end of the transaction won't find the file and
try to close it if the finalizer is about to close it.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1466362 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ebe46425fa8d97d73769d3fc6c5c577485415151,2012-05-18T07:04:52Z,['java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java'],"DERBY-5770: Reduce window of opportunity for queries being compiled without statistics on istat update 

Moved invalidation to after the new statistics have been written.

Patch file: derby-5770-1a-move_invalidation.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1339999 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
62d63f668d5ab98928d897a34bfde37fffb9e15e,2012-08-03T19:26:51Z,"['java/engine/org/apache/derby/iapi/sql/StatementUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/tools/org/apache/derby/impl/tools/ij/xaHelper.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java']","DERBY-5879: Fix translatability problems having to do with ALL CAPS and camelCase words.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1369173 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fd0d01feddc5ee8c9c506ac97250627c2df7da58,2015-08-01T14:05:42Z,['java/optional/org/apache/derby/optional/api/SimpleJsonUtils.java'],"DERBY-6825: Add datatype tests for SimpleJsonVTI. Also, close InputStreams opened by that VTI. Commit derby-6825-03-aa-datatypeTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1693708 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ae40e9f8c0b10c379a1b2f029f15967caf811c54,2011-12-17T00:24:38Z,"['java/build/org/apache/derbyBuild/splitmessages.java', 'java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5533 Client differs from embedded when rs.updateInt overflows: 22015 vs 22003

Patch derby-5533b. Changes the client driver to throw SQL state 22003
as does the embedded driver.  Also adds tests for over- and underflow
conditions with ResultSet#updateXXX and ResultSet#getXXX, which were
seen to be lacking in our coverage.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1215365 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
65a5491f15f85c74e97415b0ba82430894ca87fd,2012-03-13T13:41:49Z,"['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5647: Add a separate warning message for the expiration of the DBO's password.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1300120 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0d23c0d8112e8a50e715e1525fb629f7181040e6,2014-03-05T16:31:07Z,"['java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseExpressionActivation.java']","DERBY-6025(Wrong results with IN lists and indexes in territory based collation)

Basically, when all the elements in the inlist are not all constants, then we can not figure out at compile time the minimum and maximum values in the list. Mimimum and maximum values in the in list are required to be passed as start and stop keys if compiler decides to use an index for the inlist predicate. Since these can not be determined at compile time for non constant elements, InListOperatorNoce.generateStartStopKey ends up generating code which will run at execution time of the query and at that time, we will compare the values of the individual elements in the in list to determine the minimum and maximum values. The porblem is that currently, Derby does not pass the collation information of the left operand of the inlist to execution time and because of that, we end up doing English comparison of the values rather than terriroty based comparison in case of territory based database. The fix is to have InListOperatorNoce.generateStartStopKey generate code to pass collation information also. This way, we will do collation based comparison of in list elements in case of territory based database. I have run the reproducible case from jira against my changes and the query now returns correct row. I have run derbyall against the changes and it finished with no errors. The junit suite is running into following 3 failures but I have verified that those 3 failures happen without my changes too. So I will assume that these failures are not caused by my changes. The failures are copied below.
There were 3 failures:
1) testStartNetworkServerLogMessageOnDualStart(org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetAutoStartTest)junit.framework.AssertionFailedError: did not find the expected string: An exception was thrown during network server startup within the maximum wait time 240000
at org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetAutoStartTest.testStartNetworkServerLogMessageOnDualStart(DerbyNetAutoStartTest.java:272)
2) test_5391(org.apache.derbyTesting.functionTests.tests.lang.SysDiagVTIMappingTest)junit.framework.AssertionFailedError
at org.apache.derbyTesting.functionTests.tests.lang.SysDiagVTIMappingTest.vetTimestamp(SysDiagVTIMappingTest.java:933)
3) test_5391(org.apache.derbyTesting.functionTests.tests.lang.SysDiagVTIMappingTest)junit.framework.AssertionFailedError
at org.apache.derbyTesting.functionTests.tests.lang.SysDiagVTIMappingTest.vetTimestamp(SysDiagVTIMappingTest.java:933)




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574565 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
040d5c506d2fc6418c1e9cb13b7d70d45c79b418,2013-12-11T13:39:52Z,"['java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerHandle.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java']","DERBY-6419 Make BTree scan honor OPENMODE_LOCK_NOWAIT for row locks

Patch derby-6419-1 introduces a mode to avoid waiting for row locks in
BTeee scans.  Using the debugger I can see that the current wait in
ConstraintCharactericsTest#testLocking, line 417 as of svn 1545394 is
no longer waiting with the patch, and stepping through the code in
IndexChanger I can see that the second next() which currently waits
returns immediately with an exception as desired.

Instead of overloading the current flag OPENMODE_LOCK_NOWAIT, I
introduced a new flag OPENMODE_LOCK_ROW_NOWAIT instead. The short
circuiting logic was added in B2IRowLocking3#LockRowOnPage: I had to
added an accessor to HeapController to get at the open_mode of the
base table's conglomerate; not sure if that's kosher or not. An
alternative could be to keep to flag in the B2IForwardScan object.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550135 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
98d628e878cd7724f20ad2b62335daf42d4a4283,2013-03-12T13:21:23Z,['java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java'],"DERBY-6075: Use modern collections in impl/sql/compile

Remove use of java.util.Stack.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455523 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4e0e1f13ce0b429a3b552cb4880f57597a64c2ae,2013-01-12T04:16:49Z,"['java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientDataSource40.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientXADataSource40.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/iapi/services/info/JVMInfo.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedXADataSource40.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-new-non-jndi-ds-02. This introduced the six (three
for embedded, three for client drivers) new reduced functionality data
sources that will work in the absence of JNDI. It adds a sanity test
which will run even on a full Java SE platform. Full tests to be
exercised when running in a constrained environment will follow in a
subsequent patch.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1432380 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
1c6c2e8318851afcd6bbaca2b2b3fb261fe32f4b,2013-03-12T13:01:06Z,"['java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Replace remaining Vectors with ArrayLists.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455518 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
59f54f8f3d86449bb12d10d8e8c63b4d730959a6,2011-11-02T16:41:10Z,"['java/client/org/apache/derby/client/am/CrossConverters.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java']","DERBY-5488: First changes to implement new JDBC 4.1 object mappings.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1196680 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fdaf2b584d789b48b93c3b78dfb5a16d2ee90e3d,2012-03-06T15:06:16Z,['java/drda/org/apache/derby/impl/drda/ProtocolTestAdapter.java'],"DERBY-2031: Convert derbynet/testProtocol.java to JUnit

Rewrote testProtocol to JUnit, now called ProtocolTest. The tests themselves
still live in a separate file.
Added the new adapter ProtocolTestAdapter, which lives in the impl.drda
package. Added this file to the list of extra files to include in derbynet.jar.
Enabled the new test as part of derbynet._Suite and thus suites.All.
The test is compiled to JDK 1.5 level, and doesn't run on J2ME.

Patch file: derby-2031-5b-new_adapter.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1297517 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
a280bebe82f0143903a92b3a4d9fc6a7c2ff80f9,2012-11-23T07:11:28Z,"['java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SetOpResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UnionResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java']","DERBY-6003: Create row templates outside of the generated code

Initial cleanup: Remove unused fields in ResultSet classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1412763 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f5868b548c2921243e02721c719afeb5ceeb3f1c,2012-06-25T13:03:38Z,['java/build/org/apache/derbyBuild/ReleaseNotesGenerator.java'],"DERBY-4593 (fallout): Track tasks needed to release Derby 10.6.1

Adjusted argument count check according to the changes made.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1353507 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
e7deac451eaaa3626b5f9301e5b35ef9d3b749e6,2014-08-26T08:54:33Z,"['java/engine/org/apache/derby/iapi/services/monitor/ModuleFactory.java', 'java/engine/org/apache/derby/impl/services/daemon/BasicDaemon.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java']","DERBY-6631: FileMonitor can be used to elevate an application's privileges

Don't elevate privileges in the setThreadPriority() method. Instead, let
the callers use doPrivileges() themselves.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620534 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8ab61cc58611d28489c447bab15c4ccedb5f35b6,2014-02-12T11:49:45Z,['java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java'],"DERBY-6477: OutOfMemoryError selecting from SYS.SYSALIASES

Disable LIKE optimization for very long columns.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1567604 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
4e1453d18376dfa611f9e2f6be66782306c4e692,2014-06-09T14:23:09Z,['java/optional/org/apache/derby/optional/lucene/LuceneSupport.java'],"DERBY-6597: Write the properties for a Lucene index only once and not for each indexed row; commit derby-6597-01-aa-writePropertiesOutsideIndexingLoop.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1601391 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a42c32ea298f47a55f00a72591ad9997dec5d95c,2014-07-31T19:20:07Z,"['java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ValidateCheckConstraintResultSet.java']","DERBY-6674 Cleanup brittle code in ValidateCheckConstraintResultSet

Patch derby-6674. Refactors the code by reusing getNextRowCore (to
avoid the redundancy) for ValidateCheckConstraintResultSet but
abstracting out the loop control, which is overridden by
ValidateCheckConstraintResultSet.

fix

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1614963 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e6a4a471f71206285dd657822ff2a166d069c7b1,2013-02-01T18:20:38Z,['java/build/org/apache/derbyPreBuild/PropertySetter.java'],"DERBY-5949: Add Java 8 to the list of build environments understood by PropertySetter.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441568 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5c29a4d2f30e0eee6253db738d76dc99f548992b,2012-08-01T13:39:38Z,"['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/tools/org/apache/derby/impl/tools/ij/ijException.java']","DERBY-5879: Add comments for translators to some error messages, fix some string concatenation problems.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1367985 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0342a825a138d49e6e2bcac5be4328c5bb9d6a3f,2014-05-06T09:41:09Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-6370: dblook doesn't schema-qualify identifiers in trigger actions

Remove no longer needed offset fields in CreateTriggerNode.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1592695 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2684c7723b3a98f20462cb5c4c2b1c7d14c81c25,2013-04-10T15:37:25Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-6137: Cleanup cache manager usage by SYSCS_UTIL.SYSCS_PEEK_AT_SEQUENCE.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1466522 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
70ddc118f3577b7cbc02adb22dc285bcb8c95a03,2012-11-15T05:48:33Z,['java/engine/org/apache/derby/iapi/services/monitor/PersistentService.java'],"DERBY-5232 (Put a stern README file in log and seg0 directories to warn users of corrpution they will cause if they touch files there)

Change the readme file's name to README_DO_NOT_TOUCH_FILES.txt



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1409654 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
d8804a852ab6312b845ba250d9a65553a067ea97,2014-04-10T06:26:46Z,"['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java']","DERBY-6540: Schema-qualified table names could be mistaken for transition tables

Don't treat schema-qualified table names as transition tables, as
transition table names are always unqualified.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1586226 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
acd0d8b7c83e51dcb7e6e56b9c298c7e21a433db,2014-05-07T19:58:20Z,['java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java'],"Javadoc and typo fixes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593127 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
e33b8d871ece038784769f3e95d16bc1b259eb09,2013-06-03T09:13:48Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/ClientTypes.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/drda/org/apache/derby/impl/drda/DRDAStatement.java', 'java/engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/engine/org/apache/derby/catalog/types/TypeDescriptorImpl.java', 'java/engine/org/apache/derby/iapi/reference/JDBC30Translation.java', 'java/engine/org/apache/derby/iapi/types/DataTypeUtilities.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/sql/GenericParameter.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSROUTINEPERMSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/shared/org/apache/derby/shared/common/reference/JDBC30Translation.java', 'java/shared/org/apache/derby/shared/common/reference/JDBC40Translation.java', 'java/tools/org/apache/derby/tools/SignatureChecker.java']","DERBY-2438: Remove JDBC30Translation and most of JDBC40Translation

- Replace references to JDBC30Translation constants with direct
  references to the corresponding constants in
  java.sql.ParameterMetaData where possible.

- Replace references to JDBC40Translation constants with direct
  references to the corresponding constants in
  java.sql.DatabaseMetaData and java.sql.Types where possible.

- Move the non-JDBC constants in JDBC30Translation to
  JDBC40Translation.

- Remove JDBC30Translation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488929 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
35d6997095897464dc1057c5c1dbf6305a8b3f9a,2013-04-02T04:28:23Z,['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java'],"DERBY-6045 (in list multi-probe by primary key not chosen on tables with >256 rows)

Changes for DERBY-3790 (Investigate if request for update statistics can be skipped for certain kind of indexes, one instance may be unique indexes based on one column.) caused Derby to use table scan rather than index scan since we do not generate stats for single column unique index. As part of that change, we forgot to make code changes in optimizer to compensate for missing stats for such indexes. As found in DERBY-6045 (in list multi-probe by primary key not chosen on tables with >256 rows), even though we do not keep the statistics for single-column unique indexes, we should improve the selectivity of such an index when the index is being considered by the optimizer.

Making the relevant code changes now allows us to enable the tests in InListMultiProbeTest.java since they will now run correctly by picking up index scan rather than table scan.

Additionally, one test in refActions1.sql does not have order by to it and there are only 3 rows in the table. Without the changes for DERBY-6045 we were using index scan for it but now it uses table scan which is giving the rows in different order. I have added order by to the query so plan selection does not change order of the rows. The reason behind table scan might be that with only 3 rows in the table, it is cheaper to do table sccan rather than index scan. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1463378 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
b737f16b1e20d4150656912e59473186271437f4,2014-08-06T22:19:26Z,"['java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java']","DERBY-6690 ROW_NUMBER should not be allowed in generation clause

Patch *derby-6690* makes this illegal by adding a check in
TableElementList#bindAndValidateGeneration. I had to add an
acceptChildren method to GenerationClauseNode for the visitor to reach
down into the generation clause. Added a test to
OLAPTest#testBasicOperations for both CREATE TABLE and ALTER TABLE ADD
COLUMN.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1616365 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
db69e7016768198af1bbf9f1082755094b671072,2012-10-15T20:13:36Z,['java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java'],"DERBY-672: Let user-defined aggregates have different input and return types.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1398489 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c69fcab5a7e7cbad423cee7106fa334f8a06a1ee,2012-04-09T16:16:16Z,['java/engine/org/apache/derby/catalog/SequencePreallocator.java'],"DERBY-5687: Adjust the public api javadoc for SequencePreallocator so that it no longer refers to identity columns.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1311310 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bd2bc2bb09fdcc7d086c97104b76094e35ab94f4,2013-04-02T21:15:37Z,['java/client/org/apache/derby/client/am/LogWriter.java'],"DERBY-6138 org.apache.derbyTesting.functionTests.tests.store.ClassLoaderBootTest fails with sealing violation: package org.apache.derby.iapi.services.sanity is sealed depending on classpath order

Correct import to use shared SanityManager


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1463757 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
a35cf8de296e09f6b65372f790eae96aa5c1bc90,2012-10-16T19:42:54Z,"['java/engine/org/apache/derby/catalog/types/AggregateAliasInfo.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java']","DERBY-672: Set the collation of the input and return types of user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1398952 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
1cd5dd1c1eafbac029e84e2fdae2c4ee71a221b2,2013-12-05T20:49:16Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Improve support for correlation names for the source tables of MERGE statements; tests passed cleanly for me on derby-3155-10-aa-correlationNames.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1548298 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ffbe8135876ae861feb9995f51a251723b469a8a,2014-03-05T16:38:40Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-3155: Add privilege checks for the UPDATE actions of MERGE statements; commit derby-3155-34-ab-updatePrivs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1574566 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
bbc882f87e0a360ef9731b391b0a79dc9500f733,2013-05-07T16:27:11Z,"['java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/engine/org/apache/derby/vti/VTITemplate.java', 'java/engine/org/apache/derby/vti/VTITemplateBase.java']","DERBY-6213: Convert the org.apache.derby.vti package to Java 6.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1479972 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
93ded62646342103944c36b95a7110d562158d5c,2013-10-22T00:19:43Z,['java/client/org/apache/derby/client/net/Request.java'],"DERBY-6386 - Errors in jdbc4.LobStreamTest if derbyclient.jar is first in the classpath


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1534425 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
cb621993d29a362d73ac3fc745490efa482968cd,2014-03-25T13:16:08Z,"['java/engine/org/apache/derby/impl/optional/lucene/LuceneListIndexesVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneSupport.java']","DERBY-590: Remove the ID column from the Lucene plugin listIndexes() table function; commit derby-590-04-aa-removeIDFromListIndexes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1581312 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
64521e8b5a87f5a267f1275369b9f2f64d625bb2,2013-06-21T10:03:41Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java']","DERBY-673: Fixed javadoc warnings.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1495361 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b3b16bf31a11da891c66f3c088ada42e6a57b493,2013-05-23T19:04:48Z,['java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Fix warning in DDUtils by using Hashtable's constructor instead of
clone() for type-safety.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485827 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6048528d42980e27c7774a3eb5c01a17086f3c5b,2014-03-20T21:37:34Z,['java/engine/org/apache/derby/iapi/sql/dictionary/IndexLister.java'],"DERBY-5111 NullPointerException on unique constraint violation with unique index

Patch derby-5111.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1579766 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
f3e70a15395d82cfd5c9f3c63a349d624453839f,2014-05-16T06:38:47Z,"['java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java']","DERBY-6577: Preserve return value from recursive calls to preprocess()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1595121 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
59f29e43d89d0f3c378d235128d1ae4e27f9c183,2014-07-04T08:33:31Z,"['java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/tools/org/apache/derby/impl/tools/ij/util.java', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/tools/org/apache/derby/tools/dblook.java']","DERBY-6626: Check type of user-supplied modules before creating instances

Make SequenceUpdater verify that the class specified by the
derby.language.sequence.preallocator property is a
SequencePreallocator before attempting to create an instance of it.

Make dblook and ij verify that user-specified JDBC driver class names
and DataSource class names implement the correct interfaces before
attempting to create and use them.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1607795 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
400cc602c9de23105bdaca4c790e5c6afbac451e,2013-12-11T14:34:31Z,"['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTree.java']","DERBY-532 Support deferrable constraints

Patch derby-532-nullableUniqueFix. When we changed the implementation from
special treatment of deferrable constraints in the BTree, a couple of extra
predicates needed to be added were omitted - added those here: we should not
mark the physical index with ""uniqueWithDuplicateNulls"" if it is deferrable.
This error was found when running the regressions with default deferrable for
all pk and unique constraints.

We also removed an unused flag ""hasDeferrableChecking"" in the same places (it is
not longer used by the physical index).

Added a new test case, testCompressTable, which tests the
""uniqueWithDuplicateNulls"" case.

We also change the behavior in the following way for deferrable, but not
deferred constraints: if we hit a time-out or dead-lock when checking uniqueness
(in the BTree scan), we throw that time-out or dead-lock. Up till now we
converted it to a duplicate exception. We will only assume it can be a duplicate
- for later checking - iff the constraint mode is deferrable.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1550152 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7e51e9dee30476b9d0f35203c5fe1e58e7bcbd2b,2013-08-17T00:24:25Z,"['java/build/org/apache/derbyBuild/ODBCMetadataGenerator.java', 'java/build/org/apache/derbyBuild/classlister.java', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/DRDAProtocolException.java', 'java/drda/org/apache/derby/impl/drda/DRDAXAProtocol.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAInputStream.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/Utf8CcsidManager.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/OldRoutineType.java', 'java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/engine/org/apache/derby/catalog/types/RowMultiSetImpl.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/diag/SpaceTable.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/engine/org/apache/derby/iapi/services/classfile/ClassHolder.java', 'java/engine/org/apache/derby/iapi/services/classfile/ConstantPoolEntry.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/daemon/DaemonService.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/CompressedNumber.java', 'java/engine/org/apache/derby/iapi/services/io/DebugByteTeeOutputStream.java', 'java/engine/org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatIdInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatIdOutputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableHashtable.java', 'java/engine/org/apache/derby/iapi/services/io/SQLExceptionWrapper.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/locks/ShExLockable.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/iapi/services/sanity/AssertFailure.java', 'java/engine/org/apache/derby/iapi/services/sanity/SanityManager.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CatalogRowFactory.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CheckConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ColumnDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DefaultDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/FileInfoDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ForeignKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/KeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PasswordHasher.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermissionsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoleGrantDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SequenceDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementRolePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementSchemaPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SubCheckConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SubConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SubKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TupleDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRowBuilder.java', 'java/engine/org/apache/derby/iapi/sql/execute/RowChanger.java', 'java/engine/org/apache/derby/iapi/sql/execute/TemporaryRowHolder.java', 'java/engine/org/apache/derby/iapi/store/access/DiskHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/KeyHasher.java', 'java/engine/org/apache/derby/iapi/store/access/RowUtil.java', 'java/engine/org/apache/derby/iapi/store/access/xa/XAXactId.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerKey.java', 'java/engine/org/apache/derby/iapi/store/raw/FetchDescriptor.java', 'java/engine/org/apache/derby/iapi/store/raw/PageKey.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLChar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLClob.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLLongvarchar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/Like.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/ReaderToUTF8Stream.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBlob.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLClob.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLInteger.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLLongvarchar.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/SQLRef.java', 'java/engine/org/apache/derby/iapi/types/SQLSmallint.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/types/SQLTinyint.java', 'java/engine/org/apache/derby/iapi/types/SQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/engine/org/apache/derby/iapi/types/TypeId.java', 'java/engine/org/apache/derby/iapi/types/UserType.java', 'java/engine/org/apache/derby/iapi/types/WorkHorseForCollatorDatatypes.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/iapi/util/JBitSet.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/io/CPStorageFactory.java', 'java/engine/org/apache/derby/impl/io/DirFile.java', 'java/engine/org/apache/derby/impl/io/DirRandomAccessFile.java', 'java/engine/org/apache/derby/impl/io/InputStreamFile.java', 'java/engine/org/apache/derby/impl/io/JarDBFile.java', 'java/engine/org/apache/derby/impl/io/URLFile.java', 'java/engine/org/apache/derby/impl/io/URLStorageFactory.java', 'java/engine/org/apache/derby/impl/io/vfmem/BlockedByteArray.java', 'java/engine/org/apache/derby/impl/jdbc/AutoPositioningStream.java', 'java/engine/org/apache/derby/impl/jdbc/BinaryToRawStream.java', 'java/engine/org/apache/derby/impl/jdbc/ClobUpdatableReader.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedClob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/LOBInputStream.java', 'java/engine/org/apache/derby/impl/jdbc/PositionedStoreStream.java', 'java/engine/org/apache/derby/impl/jdbc/StoreStreamClob.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/UTF8Reader.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/JNDIAuthenticationSchemeBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/LDAPAuthenticationSchemeImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/load/ImportReadData.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCJava.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCMethod.java', 'java/engine/org/apache/derby/impl/services/bytecode/CodeChunk.java', 'java/engine/org/apache/derby/impl/services/bytecode/Conditional.java', 'java/engine/org/apache/derby/impl/services/bytecode/GClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/OpcodeDebug.java', 'java/engine/org/apache/derby/impl/services/bytecode/VMTypeIdCacheable.java', 'java/engine/org/apache/derby/impl/services/bytecode/d_BCValidate.java', 'java/engine/org/apache/derby/impl/services/cache/CacheEntry.java', 'java/engine/org/apache/derby/impl/services/cache/CachedItem.java', 'java/engine/org/apache/derby/impl/services/cache/ClockPolicy.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCache.java', 'java/engine/org/apache/derby/impl/services/daemon/BasicDaemon.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherProvider.java', 'java/engine/org/apache/derby/impl/services/locks/AbstractPool.java', 'java/engine/org/apache/derby/impl/services/locks/ConcurrentLockSet.java', 'java/engine/org/apache/derby/impl/services/locks/D_LockControl.java', 'java/engine/org/apache/derby/impl/services/locks/Lock.java', 'java/engine/org/apache/derby/impl/services/locks/LockControl.java', 'java/engine/org/apache/derby/impl/services/locks/LockSpace.java', 'java/engine/org/apache/derby/impl/services/locks/TableNameInfo.java', 'java/engine/org/apache/derby/impl/services/locks/Timeout.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/monitor/TopService.java', 'java/engine/org/apache/derby/impl/services/monitor/UpdateServiceProperties.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/sql/CursorInfo.java', 'java/engine/org/apache/derby/impl/sql/CursorTableReference.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/GenericColumnDescriptor.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericResultDescription.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStorablePreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/LanguageDbPropertySetter.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DDdependableFinder.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/IndexInfoImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/NameTDCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/OIDTDCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/PermissionsCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/RoleClosureIteratorImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SPSNameCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSALIASESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCHECKSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCOLPERMSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCOLUMNSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCONGLOMERATESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSCONSTRAINTSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSDEPENDSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSDUMMY1RowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSFILESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSFOREIGNKEYSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSKEYSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSPERMSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSROLESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSROUTINEPERMSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSCHEMASRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSEQUENCESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSTATEMENTSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSSTATISTICSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTABLEPERMSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTABLESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSTRIGGERSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSUSERSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSVIEWSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/catalog/TDCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/TabInfoImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AccessPathImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AllResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/AlterTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BitTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CLOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnOrdering.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CostEstimateImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentDatetimeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultOptTrace.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GrantRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HasVariantValueNodeVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/HashTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IsNullNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LOBTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LockTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MaterializeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OrNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNodeVector.java', 'java/engine/org/apache/derby/impl/sql/compile/RefTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/RenameNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RevokeRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowOrderingImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SQLToJavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SavepointNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ScrollInsensitiveResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetTransactionIsolationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SingleChildResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SpecialFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SumAvgAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TypeCompilerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserTypeConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/VarbitConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/VirtualColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/XMLTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/conn/CachedStatement.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericAuthorizer.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionFactory.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicProviderInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/AggregateSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/AggregatorInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AnyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/AutoincrementCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/AvgAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/BulkTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ColumnInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/CountAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateAliasConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateSchemaConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateViewConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CurrentOfResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLSingleTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DropConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropViewConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/FKInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericPrivilegeInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericQualifier.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericScanQualifier.java', 'java/engine/org/apache/derby/impl/sql/execute/GrantRevokeConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GrantRoleConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashTableResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexColumnOrder.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRow.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexSetChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexValueRow.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/JoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/LockTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MaterializedResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MaxMinAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MultiProbeTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NormalizeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/OnceResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/OrderableAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/PrivilegeInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RIBulkChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RISetChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RealResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RenameConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/RevokeRoleConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/RoutinePrivilegeInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/RowCountResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/ScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScrollInsensitiveResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetOpResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SetSchemaConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetTransactionResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SortResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SumAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/SystemAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerEventActivator.java', 'java/engine/org/apache/derby/impl/sql/execute/TriggerInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/UnionResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateVTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/WindowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/WriteCursorConstantAction.java', 'java/engine/org/apache/derby/impl/store/access/CacheableConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/PropertyConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/RAMAccessManager.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransaction.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransactionContext.java', 'java/engine/org/apache/derby/impl/store/access/StorableFormatId.java', 'java/engine/org/apache/derby/impl/store/access/UTF.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTree.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeCostController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeForwardScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeMaxScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreePostCommit.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeRowPosition.java', 'java/engine/org/apache/derby/impl/store/access/btree/BTreeScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/BranchControlRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/BranchRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/ControlRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/D_BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/LeafControlRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/OpenBTree.java', 'java/engine/org/apache/derby/impl/store/access/btree/SearchParameters.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2I.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IController.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2ICostController.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IFactory.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IMaxScan.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLocking2.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLocking3.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IRowLockingRR.java', 'java/engine/org/apache/derby/impl/store/access/btree/index/B2IUndo.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/BinaryOrderableWrapper.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/ConglomerateUtil.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericConglomerateController.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericController.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/GenericScanController.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/OpenConglomerate.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/OpenConglomerateScratchSpace.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/RowPosition.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/TemplateRow.java', 'java/engine/org/apache/derby/impl/store/access/heap/D_HeapController.java', 'java/engine/org/apache/derby/impl/store/access/heap/Heap.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapCompressScan.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapConglomerateFactory.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapCostController.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapPostCommit.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapRowLocation.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapScan.java', 'java/engine/org/apache/derby/impl/store/access/sort/ExternalSortFactory.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeInserter.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeScan.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeScanRowSource.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeSort.java', 'java/engine/org/apache/derby/impl/store/access/sort/Node.java', 'java/engine/org/apache/derby/impl/store/access/sort/SortBuffer.java', 'java/engine/org/apache/derby/impl/store/access/sort/SortBufferRowSource.java', 'java/engine/org/apache/derby/impl/store/access/sort/SortBufferScan.java', 'java/engine/org/apache/derby/impl/store/access/sort/SortScan.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocExtent.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocationCache.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java', 'java/engine/org/apache/derby/impl/store/raw/data/CachedPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/ChainAllocPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/CompressSpacePageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/ContainerBasicOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/ContainerHandleActionOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/ContainerOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/ContainerUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/CopyRowsOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/D_StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/DeleteOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/DirectActions.java', 'java/engine/org/apache/derby/impl/store/raw/data/DirectAllocActions.java', 'java/engine/org/apache/derby/impl/store/raw/data/DropOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptContainerOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptContainerUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java', 'java/engine/org/apache/derby/impl/store/raw/data/FileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/InitPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/InputStreamContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/InsertOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/InvalidatePageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/LoggableActions.java', 'java/engine/org/apache/derby/impl/store/raw/data/LoggableAllocActions.java', 'java/engine/org/apache/derby/impl/store/raw/data/LogicalPageOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/LogicalUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/MemByteHolder.java', 'java/engine/org/apache/derby/impl/store/raw/data/PageBasicOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PhysicalUndoOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/PurgeOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/RAFContainer4.java', 'java/engine/org/apache/derby/impl/store/raw/data/ReclaimSpace.java', 'java/engine/org/apache/derby/impl/store/raw/data/ReclaimSpaceHelper.java', 'java/engine/org/apache/derby/impl/store/raw/data/RecordId.java', 'java/engine/org/apache/derby/impl/store/raw/data/RememberBytesInputStream.java', 'java/engine/org/apache/derby/impl/store/raw/data/RemoveFileOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/SetReservedSpaceOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredFieldHeader.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredRecordHeader.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainerHandle.java', 'java/engine/org/apache/derby/impl/store/raw/data/SyncOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/TempRAFContainer.java', 'java/engine/org/apache/derby/impl/store/raw/data/TruncateOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/data/UpdateFieldOperation.java', 'java/engine/org/apache/derby/impl/store/raw/data/UpdateOperation.java', 'java/engine/org/apache/derby/impl/store/raw/log/CheckpointOperation.java', 'java/engine/org/apache/derby/impl/store/raw/log/ChecksumOperation.java', 'java/engine/org/apache/derby/impl/store/raw/log/FileLogger.java', 'java/engine/org/apache/derby/impl/store/raw/log/FlushedScan.java', 'java/engine/org/apache/derby/impl/store/raw/log/FlushedScanHandle.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogAccessFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogCounter.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogRecord.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/log/ReadOnly.java', 'java/engine/org/apache/derby/impl/store/raw/log/Scan.java', 'java/engine/org/apache/derby/impl/store/raw/xact/BeginXact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/EndXact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/GlobalXactId.java', 'java/engine/org/apache/derby/impl/store/raw/xact/InternalXact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLocking1.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLocking2.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLocking2nohold.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLocking3.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLocking3Escalate.java', 'java/engine/org/apache/derby/impl/store/raw/xact/RowLockingRR.java', 'java/engine/org/apache/derby/impl/store/raw/xact/SavePoint.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTable.java', 'java/engine/org/apache/derby/impl/store/raw/xact/TransactionTableEntry.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactContext.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactId.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactXAResourceManager.java', 'java/engine/org/apache/derby/impl/store/replication/buffer/LogBufferElement.java', 'java/engine/org/apache/derby/impl/store/replication/buffer/ReplicationLogBuffer.java', 'java/engine/org/apache/derby/impl/store/replication/master/AsynchronousLogShipper.java', 'java/engine/org/apache/derby/impl/store/replication/master/MasterController.java', 'java/engine/org/apache/derby/impl/store/replication/slave/ReplicationLogScan.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/ResourceAdapterImpl.java']","DERBY-6299: Improve code coverage of org.apache.derby.iapi.services.sanity

This patch was contributed by Ahsan Shamsudeen (ahsan dot competition at gmail dot com)

This patch removes the classes SanityManager and AssertFailure from the
org.apache.derby.iapi.services.sanity package, replacing all uses of those
classes with references to the same-named classes in the
org.apache.derby.shared.common.sanity package.

This change is a follow-on to DERBY-1115, which moved the body of these
classes to the new location, but left the old classes around as wrappers.

Removing the wrapper classes simplifies the code, but is not intended to have
any other effect. There are no known bugs fixed by these changes, although
as pointed out during review, there may be behavior changes as a result of
this change. For example, code which specifies

	if (re instanceof AssertFailure)

may have different behavior now, since it is testing for an instance of the
underlying type, not an instance of the wrapper type.

This change affects a large set of files, but the change itself is quite simple.

Each of the files has a diff roughly like:

-import org.apache.derby.iapi.services.sanity.SanityManager;
+import org.apache.derby.shared.common.sanity.SanityManager;
 
In addition to modifying the import statement in all such .java files, we are
also deleting the two files

D       java\engine\org\apache\derby\iapi\services\sanity\AssertFailure.java
D       java\engine\org\apache\derby\iapi\services\sanity\SanityManager.java

These two files, left over from DERBY-1115, are trivial wrappers around the
same-named classes in o.a.d.shared.common.sanity package.

So all we're doing, then, is following up on DERBY-1115 by fixing the import
statements and removing the two wrapper classes.

So it's a big change, but conceptually quite simple.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1514927 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
5cf7a467dfbae703497d3306b4aa2e3340dcdf56,2014-04-22T13:25:37Z,"['java/engine/org/apache/derby/impl/io/DirRandomAccessFile.java', 'java/engine/org/apache/derby/impl/io/vfmem/VirtualRandomAccessFile.java', 'java/engine/org/apache/derby/io/StorageRandomAccessFile.java', 'java/optional/org/apache/derby/optional/lucene/DerbyIndexInput.java', 'java/optional/org/apache/derby/optional/lucene/DerbyIndexOutput.java', 'java/optional/org/apache/derby/optional/lucene/DerbyLuceneDir.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Add support for creating Lucene indexes in in-memory databases; commit derby-590-24-ad-luceneDirectory.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1589124 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7a94b75e13e2e5cc4984804e23e7c3c9e91f656d,2014-05-07T20:06:20Z,"['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java']","Typo fixes

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593128 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
47a8183bee4c86d4bebffaee59f92420357f779e,2013-01-30T20:35:56Z,"['java/client/org/apache/derby/client/am/Cursor.java', 'java/client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/client/org/apache/derby/client/am/ResultSet.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/ScrollInsensitiveResultSet.java']","DERBY-6000: Add JDBC 4.2 large max rows methods to Derby's embedded and client implementations of java.sql.Statement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1440656 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
fa6bcd6bd16dc632f764a5570f01157f01f7d36f,2013-10-22T02:37:12Z,['java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java'],"DERBY-2130 - Optimizer performance slowdown from 10.1 to 10.2

Patch contributed by Army Brown



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1534465 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
1ae0d7dc30707229ad752e668b9fd747e0198829,2014-10-01T22:41:22Z,"['java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnectionContext.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSavepoint.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java']","DERBY-6751: Prevent user code from getting a LanguageConnectionContext out of an EmbedConnection; tests passed cleanly on derby-6751-01-ad-usederbyinternals.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1628855 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
58253325c18289e90d401415b30ed4d69eacbd8c,2011-11-02T11:20:11Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetStatistics.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/xplain/XPLAINVisitor.java', 'java/engine/org/apache/derby/impl/sql/execute/RealResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealAnyResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealBasicNoPutResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteCascadeResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDeleteVTIResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealDistinctScalarAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealGroupedAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashLeftOuterJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashTableStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealIndexRowToBaseRowStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealInsertResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealInsertVTIResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealMaterializedResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNestedLoopJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNestedLoopLeftOuterJoinStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNoRowsResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealNormalizeResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealOnceResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealProjectRestrictStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealRowCountStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealScalarAggregateStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealScrollInsensitiveResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSetOpResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealSortStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUnionResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUpdateResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealWindowResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/ResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RunTimeStatisticsImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/xplain/XPLAINDefaultVisitor.java', 'java/engine/org/apache/derby/impl/sql/execute/xplain/XPLAINSystemTableVisitor.java']","DERBY-4845: Improve the dependency tracking for our build targets

Move ResultSetStatistics interface from impl to iapi in order to
remove dependencies on impl packages in iapi code.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1196542 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
515a63e8d3a3b751c72fbdf0012900aca7ff78f2,2014-06-06T15:35:56Z,['java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java'],"DERBY-6600: Make it possible to bind functions to methods in the org.apache.derby.optional.api package; tests passed cleanly on derby-6600-02-aa-addAPIpackage.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1600928 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
45f517449bf498473001804ae6e107e9e11b148c,2012-05-28T20:11:08Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-5688: Bump version on trunk to 10.10.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1343384 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4f1dcde01543d1e64d04e66ee020ec2542d9d31e,2014-08-26T14:23:18Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/Session.java']","DERBY-6714: RuntimeInfoTest failed with insufficient data from server

Tighten up checks for sessions being closed while reading runtime info from
them, in order to protect against NullPointerExceptions on the server.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620608 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
45a820416dbfad9bbdf7918dba7388ae86a00bc7,2013-02-26T22:43:26Z,['java/client/org/apache/derby/client/am/Connection.java'],"DERBY-6066(Client should use a prepared statement rather than regular statement for Connection.getTransactionIsolation)

This commit has the client user a PreparedStatement rather than a Statement to get the current isolation level. 
Additionally, we found while working on this issue, that the calls to get isolation level were not always getting sent to the server side. The research on this found following

The get transaction isolation call will be sent to the server on the wire in at least following 2 cases
1)When a newer client is working with the older versions of servers(ie server that do not have support for isolation level caching) - Server version 10.3 and earlier do not support isolation level caching and hence when a newer client(10.4 and higher) is talking to a 10.3 and earlier server, there will be no information available about the current isolation level on the client side and client will ask for the isolation level from the server by sending ""VALUES CURRENT ISOLATION"" over the wire. 
  For server versions 10.4 and above, there is a possibility that the current isolation level was already piggybacked to the client as part of some other client server communication and hence the current isolation level is already available to the client and there is no need to send ""VALUES CURRENT ISOLATION"" over the wire to the server.
2)Additionally, as per DERBY-4314 and write up on piggybacking at http://wiki.apache.org/db-derby/Derby3192Writeup, there might be cases, where even though server has support for isolation level caching, server has not had a chance to send the isolation level piggybacked to the client as part of some other communication between client and server and hence the client will actually need to send ""VALUES CURRENT ISOLATION"" to the server to get the current isolation level.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1450499 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
a8b9c708164175707848183de5104337a9a1ac53,2013-05-10T20:59:51Z,['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java'],"DERBY-6213: Deprecate support for Java 5 and CDC

- Revive build target for SqlXmlUtil to ensure that it always includes
  the org.w3c.dom.xpath interfaces on the compile classpath.

- Update SqlXmlUtil.java so that no warnings are printed during
  compilation.

- Remove code that's only used on Java 1.4 and CDC.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1481187 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
473d692ea94c2cc625fed807c2fa69549797420b,2013-07-19T09:35:05Z,"['java/engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/execute/ColumnInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/HashTableResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SortResultSet.java']","DERBY-6292: Use Arrays.copyOf() in FormatableArrayHolder.getArray()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1504808 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
480456f6622db69484bb88b291e5e458a328ef70,2014-01-21T18:38:08Z,"['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java']","DERBY-3155: Allow for row location columns in the result column list of base tables; tests passed cleanly for me on derby-3155-16-aa-treatCurrentRowLocationNodeLikeBaseColumnNode.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1560134 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
29435de7f6ac85f280bba0ee053d6225aa1e8d51,2013-06-12T08:28:35Z,['java/engine/org/apache/derby/impl/io/DirFile4.java'],"DERBY-6258: Restrict permissions on BACKUP.HISTORY

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492110 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fe9655204590626d480bfbb7c616446fb82cfd27,2013-12-10T22:10:06Z,['java/engine/org/apache/derby/impl/store/raw/data/RAFContainer4.java'],"DERBY-6354 DatabaseMetaDataTest.testGetColumnsReadOnly fails with NPE when releasing page

Diagnostics patch; to be removed when issue is fixed.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1549983 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
b5f27763c7c2c9dc1d24eeb4ddf2d6673db8211e,2013-06-13T07:07:27Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineCallableStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineCallableStatement40.java', 'java/engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement20.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement30.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement40.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement40.java', 'java/engine/org/apache/derby/jdbc/Driver40.java']","DERBY-1984: Re-factor JDBC classes to remove support for JDBC 2

Collapsed sub-classes of EmbedStatement by moving functionality
to the base class and removing specialized sub-classes for
JDBC 2.0, JDBC 3.0 and JDBC 4.0.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492544 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
3a3894282c267aee160ac7f7604418ad4c46d7c2,2012-06-13T15:40:40Z,['java/client/org/apache/derby/client/am/ErrorKey.java'],"DERBY-5813 Remove unused class ErrorKey

Patch removing client.am.ErrorKey


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1349921 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
44ea8afbad2f6b8aaa7d8eebc44ca7e41a1c5a7b,2014-07-09T12:52:10Z,['java/engine/org/apache/derby/authentication/SystemPrincipal.java'],"DERBY-3476: Improve serialization of SystemPrincipal

Validate the name when reading a SystemPrincipal object from a stream.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609138 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2b467cf8e31ceeaecc5e7334f9372108e06f0741,2013-05-08T11:40:50Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java'],"Fix javadoc warning (mismatch between @param and actual parameter name)

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1480232 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a4e629822d2034810243b184b3ef0b3f10e184e8,2014-06-27T17:44:20Z,"['java/optional/org/apache/derby/optional/api/LuceneIndexDescriptor.java', 'java/optional/org/apache/derby/optional/api/LuceneUtils.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Add multi-field support to the Lucene plugin; commit derby-590-31-aa-multiField.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1606161 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
e828232ee333129964ccae4c0ac7a1684c67ef28,2014-03-10T08:09:06Z,['java/engine/org/apache/derby/impl/sql/compile/GroupByList.java'],"DERBY-5313: Assert failure with CASE expression in GROUP BY clause

Remove assert that doesn't expect expressions in the GROUP BY list.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1575866 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
43fdf4505306f282aacb8d14ea9c516de2c5ea6e,2013-03-11T08:18:12Z,"['java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java']","DERBY-6075: Use modern collections in impl/sql/compile

Use ArrayLists for the aggregate vectors.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1455045 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
eea0d50c8d732cad9ba563ddfa786b7028eb092f,2012-12-31T07:02:09Z,"['java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java']","DERBY-4955 Prepare Derby to run with Compact Profiles (JEP 161) 

Patch derby-5955-embed-restructure-followup, some white space changes
plus a missed fix to EmbeddedDataSource40 which was in the original
proff-of-concept patch but fell through the cracks in the committed
patch derby-5955-embed-restructure-04.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1427047 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
80fb744986ff0c81de35d506b943cbdf27d62623,2012-11-14T08:59:07Z,['java/engine/org/apache/derby/impl/sql/compile/PredicateList.java'],"DERBY-5989: Stop producing byte code for non-existent qualifiers

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1409120 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9881ca44cbe7b515f315f20d7d83b735840f2e48,2013-08-02T19:05:28Z,"['java/engine/org/apache/derby/iapi/sql/compile/Optimizable.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java']","DERBY-6211: Move the tracer out of the optimizer; tests passed cleanly on derby-6211-11-ab-moveTracerOutOfOptimizer.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1509815 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
063dd554d30bb6ef19425e10b91b86cf973cbd0d,2012-02-29T13:07:23Z,['java/engine/org/apache/derby/impl/sql/compile/InsertNode.java'],"DERBY-5614: NullPointerException with INSERT INTO [global temporary table] SELECT ... FROM [VTI]

Disables bulk-insert for GTTs when selecting from a VTI.
Added a new test case.
Added SampleVTI, which is an incomplete (only supports a few getters) VTI
intended for basic testing.

Patch file: derby-5614-1b-disable_bulkinsert_gtt.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1295085 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
508a010301af3c7d01e94cc5dc9f6dcf7b071583,2013-10-24T12:41:59Z,"['java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/execute/ConstantAction.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BulkTableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScanResultSet.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapRowLocation.java']","DERBY-3155: Add support for DELETE action of MERGE statement; checking in derby-3155-04-af-deleteAction.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1535360 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
eaa0d8cf018a0e5866888f1b60b97faf82db332e,2013-04-23T18:13:30Z,"['java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-4729 add more information to the XACT_PROTOCOL_VIOLATION returned from sto
re.

When this error is reported it is often hard to reproduce, so adding
printing of internal state of the Transaction when it is hit.  Hopefully
this help in understanding what is going on when the error is hit.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471079 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
99d48bafbde84402be89088feb039db191e6e0a4,2014-11-14T23:29:37Z,['java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java'],"DERBY-6768(List the enabled protocols in derby.log for network server configuration)

With this change, we will now print the enabled protocols list in the log file when the server starts up. A sample new line in the log will look as follows
 Wed Nov 12 21:32:21 PST 2014 : Apache Derby Network Server - 10.12.0.0 alpha - (1636020M) Enabled Protocols are SSLv3, TLSv1, TLSv1.1, TLSv1.2




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1639804 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
6cc865c5eddced904a2a173e92d6a1ec75c30f7b,2012-03-13T06:13:00Z,['java/drda/org/apache/derby/drda/NetServlet.java'],"DERBY-5639: Minor code cleanup for NetServlet

Fixed some HTML errors.

Patch file: derby-5639-3a-html.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1299982 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
06797bdb7e8df219c7c897e7507a231f92939365,2013-04-25T19:26:59Z,"['java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/impl/drda/DDMReader.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-6206: Cleanup encapsulation problems in NetworkServerControlImpl.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1475919 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
846080f8c379165d37dbf5627f5c347a9f6098b0,2014-06-03T15:33:07Z,['tools/release/jirasoap/src/main/java/org/apache/derbyBuild/jirasoap/FilteredIssueLister.java'],"DERBY-6588: First draft of 10.11.1 release notes; commit derby-6588-01-aa-firstDraftReleaseNotes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1599609 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
a6532d02e5861ba8e0cb0fb23434414ed60774d5,2011-11-10T12:31:20Z,"['java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStoredProcedure.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java']","DERBY-4845: Improve the dependency tracking for our build targets

Don't call code that only works on Java SE platforms from code that's
supposed to work on CDC/Foundation Profile platforms.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1200293 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7643f9651406e12c9563a92b3dd258505e6c7144,2015-07-14T02:37:16Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6807: XXE attack possible by using XmlVTI and the XML datatype

This change enhances the DocumentBuilderFactory which is used by the
XmlVTI for parsing XML documents. The XmlVTI now automatically disables
external entity expansion and enables FEATURE_SECURE_PROCESSING.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1690855 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
fcf3e6db342c920597a7afd7b749e9b9494f03bf,2014-04-02T02:01:36Z,"['java/engine/org/apache/derby/vti/VTITemplate.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Add ability to create a Lucene index on an arbitrary view; commit derby-590-13-aa-indexViews.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583855 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d466c8048377303cde3a806959e9f3584984fd57,2012-09-19T14:27:18Z,['java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java'],"Made init-method private.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1387611 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
d94fffbd7149946f630e01e524db5a057676f408,2012-02-08T21:24:11Z,['java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java'],"DERBY-5607: Use InternalDriver rather than a JDBC DataSource in order to get a connection to the credentials db when creating a database with NATIVE authentication enabled.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1242105 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
49aa62a255f569b6bebc45db0967873ede7c5f9f,2012-07-03T14:21:03Z,['java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java'],"DERBY-5622: Reduce chance for hash collisions when changing boot passwords.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1356749 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
75d58b2a87c2ef0468b213f9b45bbaaa0a3528e9,2014-10-02T16:44:52Z,['java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java'],"DERBY-6269(Misleading warning text if you create an index duplicating a constraint.)

Improve the warning text if a user requests an index creation which duplicates a constraint.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1629014 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
22d64f57ef38696c84d9245ca6d3d3a1aefcf27a,2012-08-17T19:07:46Z,"['java/engine/org/apache/derby/catalog/AliasInfo.java', 'java/engine/org/apache/derby/catalog/types/AggregateAliasInfo.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/depend/DependencyManager.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSALIASESRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropAliasNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateAliasConstantAction.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_Alias.java', 'java/tools/org/apache/derby/tools/dblook.java']","Add CREATE and DROP ddl for user-defined aggregates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1374399 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
502ed2ea556ca92ee5fd23ea72c237d9beafb6e2,2014-05-02T13:55:51Z,"['java/engine/org/apache/derby/database/Database.java', 'java/engine/org/apache/derby/iapi/util/StringUtil.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/io/vfmem/DataStore.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/optional/org/apache/derby/optional/lucene/DerbyLuceneDir.java', 'java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-590: Add backup/restore support for Lucene indexes and prevent the Lucene plugin from being used in an encrypted database; commit derby-590-26-ad-backupRestoreEncryption.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1591910 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
108093d02f567932f9e46de5f4af3de07f3f5062,2012-05-29T11:04:25Z,['java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java'],"DERBY-5789: Improve istat log message when dropping disposable statistics

Modified a log message, and removed a TODO.

Patch file: derby-5789-1a.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1343667 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
89f21fb483b1a2d98bd44f1d2e5013b964b5d8b9,2013-05-21T14:42:53Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/ColumnDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/GenericDescriptorList.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java']","DERBY-6213: Deprecate support for Java 5 and CDC

- Make ColumnDescriptorList extend ArrayList<ColumnDescriptor> instead
  of ArrayList<TupleDescriptor>

- Make ConglomerateDescriptor extend ArrayList<ConglomerateDescriptor>
  instead of ArrayList<TupleDescriptor>

- Make GenericDescriptorList extend ArrayList<UniqueTupleDescriptor>
  instead of ArrayList<TupleDescriptor>

- Change signatures of getDescriptorViaIndex() and
  getDescriptorViaHeap() so that they can take lists of more specific
  types than List<TupleDescriptor>, and so that they can return a more
  specific type than TupleDescriptor

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1484821 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fbf52ee492c624169e72cd35cc918b452a370e20,2013-01-16T20:23:34Z,['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java'],"DERBY-6022: Fix NPE when resolving a function/aggregate name in a schema which hasn't been created yet.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1434363 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b412f102f0e8b14d9f7bef30c029af1daf9b18d1,2013-12-24T13:09:05Z,"['java/engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/tools/org/apache/derby/impl/tools/optional/ForeignDBViews.java']","DERBY-6440: Drop connection to foreign database when foreignViews optional tool is unloaded.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1553269 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4cf6633b3aa0c1ff7147a31aee21a32ec152b3c0,2014-03-21T14:59:49Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Improve comments for compilation of MERGE statements; commit derby-3155-51-aa-cleanup2.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1579950 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
db60062ac410d5d0708674b7d089d8a55dd2898a,2013-09-19T07:51:45Z,"['java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/RowTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/StatementTriggerExecutor.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Move common logic for executing WHEN clause and trigger action to the
base class GenericTriggerExecutor. In addition to reducing code
duplication, the change makes row triggers reuse the prepared
statement for the WHEN clause (same as it already does for the trigger
action), and it makes statement triggers not leave the before and
after result sets open if the WHEN clause evaluates to false.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1524645 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
18ab492a15ae0e50108e1b1dd0f1ae68d2266c8e,2012-05-08T11:22:18Z,['java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java'],"DERBY-5736: NullPointerException in GenericTriggerExecutor.executeSPS() caused by OutOfMemoryError

Guard the cleanup with a null check to prevent masking the original
error with a NullPointerException.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1335418 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7baf56256ba953e46a4d3d5ee2f5d54a28d02dc5,2012-08-08T19:03:23Z,"['java/engine/org/apache/derby/impl/sql/execute/rts/RealDistinctScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealHashScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealTableScanStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUnionResultSetStatistics.java', 'java/engine/org/apache/derby/impl/sql/execute/rts/RealUpdateResultSetStatistics.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5879: Remove untranslatable tokens from messages.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1370897 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
93448896c012e8acefa2cbb4ede3a899b033e170,2014-04-09T19:59:26Z,"['java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-590: Hide doPrivileged() blocks inside private methods, seal derbyoptionaltools.jar, and create more relevant SQLExceptions; commit derby-590-22-aa-cleanupPrivacy.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1586114 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
921e39eae66a8196924d0aa214641361fe3c471c,2014-08-25T17:33:49Z,['java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java'],"DERBY-6619 After silently swallowing SecurityExceptions, Derby can leak class loaders

Patch derby-6619-2-refinement which implements the following
refinements to the test to avoid changing the context class loader in
SingletonTimerFactory (suggested by Knut):

The orginal test tested against the system class loader. This new patch will:

1) Check if the context class loader is the same as the loader of the
SingletonTimerFactory class (that is, the class loader from which
Derby classes are loaded). Even if this isn't the same as the system
class loader, it would be safe to skip the workaround for DERBY-3745,
since the class loader for the Derby classes would not be eligible for
garbage collection until the engine is shut down anyway. This would
prevent some more false positives from being reported in
derby.log. I'd assume this is a kind of false positive that could
easily occur in an application server environment where the Derby
classes are not found on the system class loader.

2) Check against Thread.class.getClassLoader() instead of
ClassLoader.getSystemClassLoader(). Normally, those two checks would
be identical. If however the setup is such that they aren't identical,
we'd still know that the class loader actually used for system classes
such as the Thread class would have to stay in memory for as long as
the timer thread is alive, regardless of the context class loader of
the thread, so the workaround for DERBY-3745 can be skipped if it's
the same as the context class loader. The check will be a bit more
specific this way.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1620385 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
0cefeda9118c57813f6d2bc80f5a39c11d7ab5ab,2014-04-30T09:05:23Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OffsetOrderVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-6370: dblook doesn't schema-qualify identifiers in trigger actions

Rewrite the triggered SQL statement and the WHEN clause of a trigger
so that all identifiers are fully qualified, before they are stored in
SYS.SYSTRIGGERS and SYS.SYSSTATEMENTS. This way, dblook is able to use
the information in the system tables to produce DDL that is
independent of the schema in which it is executed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1591216 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
fc9fd0d2a33cc8adc462a7489b8d95c9c4ef6709,2014-01-15T14:03:50Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/compile/ScopeFilter.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java']","DERBY-6434: Correct privilege checks for DELETE statements; commit derby-6434-02-ac-correctDeletePrivs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1558387 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b6cdb88b8a6e69493cd4363f1801188ceac1a575,2013-09-03T18:29:11Z,"['java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/engine/org/apache/derby/iapi/services/info/JVMInfo.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java']","DERBY-6324; DatabaseMetaData.getJDBCMinorVersion() should return 2 now that we've implemented JDBC 4.2
  Adding logic to JVMInfo to identify the supported JDBC level based on the 
  (currently supported) JVM versions, which then is used in the client and embedded drivers.
  Tests are changed to reflect this.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1519785 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
f448bbbd1716e4c80d60375add40fb89e52b55da,2012-06-08T23:20:07Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-5578 Provide a way to invalidate stored prepared statements 

Commiting changes for adding a new procedure(SYSCS_UTIL.SYSCS_INVALIDATE_STORED_STATEMENTS) which will allow users to invalidate all the stored statements inside SYS.SYSSTATEMENTS. At this point, there are only two types of stored statements in SYS.SYSSTATEMENTS system table - statements for metadata calls and statements for trigger action plans. I have also added test cases including the regression tests and upgrade tests. Upgrade tests show that this procedure is available only after hard upgrade. Regression test show how the procedure can be executed only by dba unless dba grants execute permission to other users. Additionally, it has test cases showing statements getting invalidated by the procedure call and subsequent execution of metadata call or trigger causing their corresponding statements to become valid. 

Since these changes fiddle around with system tables, this jira can't be backported to released branches. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1348275 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
99c48bc061860b57dadf3f2897cbbb8965b2151d,2013-07-15T09:54:16Z,['java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java'],"DERBY-4478: Use AtomicLong for XactFactory.tranId

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1503157 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f668d94de58a55f31318cfe288b5d57ec9b5d8d2,2013-09-04T09:25:10Z,"['java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientResultSet.java', 'java/client/org/apache/derby/client/am/LogicalConnection.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/db/Database.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/DataInputUtil.java', 'java/engine/org/apache/derby/iapi/services/io/Limit.java', 'java/engine/org/apache/derby/iapi/services/io/LimitInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/LimitReader.java', 'java/engine/org/apache/derby/iapi/services/jmx/ManagementService.java', 'java/engine/org/apache/derby/iapi/services/locks/LockFactory.java', 'java/engine/org/apache/derby/iapi/services/monitor/PersistentService.java', 'java/engine/org/apache/derby/iapi/sql/ResultColumnDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerFactory.java', 'java/engine/org/apache/derby/iapi/sql/compile/TypeCompilerFactory.java', 'java/engine/org/apache/derby/iapi/sql/conn/Authorizer.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/store/access/FileResource.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/Conglomerate.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/FetchDescriptor.java', 'java/engine/org/apache/derby/iapi/store/raw/Page.java', 'java/engine/org/apache/derby/iapi/store/raw/Transaction.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java', 'java/engine/org/apache/derby/iapi/types/PositionedStream.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/iapi/types/XMLDataValue.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/load/Export.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerFactoryImpl.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/store/access/UTFQualifier.java', 'java/engine/org/apache/derby/impl/store/access/btree/ControlRow.java', 'java/engine/org/apache/derby/impl/store/access/conglomerate/OpenConglomerateScratchSpace.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocExtent.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredFieldHeader.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredRecordHeader.java', 'java/engine/org/apache/derby/impl/store/raw/data/StreamFileContainer.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/io/StorageRandomAccessFile.java']","DERBY-6323: Fix incorrect @throws and @exception tags in javadoc

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1519954 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
30e18dbac5c139059b56da54c4adc87d2923ff4c,2014-02-20T20:57:08Z,['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java'],"DERBY-3155: Remove some obsolete code which was causing a cross-schema MERGE statement to raise a missing schema error: commit derby-3155-29-aa-missingSchema.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1570352 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
7f6b163b8af17ee861236e58810000bc18c50d0b,2013-06-13T17:06:02Z,"['java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/TableOperatorNode.java']","DERBY-6259: Make optimizer fields private: tests passed cleanly on derby-6259-02-aa-increasePrivacy.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492766 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
43e6876913f11c9e3b3cff6964d5566ef6860a61,2012-05-10T16:18:00Z,"['java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java']","DERBY-3146 Adjust length restriction on user identifiers (authorization ids) to same as other identifiers

Patch DERBY-3146 lift this DB2 legacy restriction. The new restriction
is 128, the same as other SQLIdentifiers. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1336775 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
25959e322bf0c93202dad6cdde96cc1e814f3e8f,2013-01-10T17:48:58Z,['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java'],"DERBY-6022: Add ability to load/unload custom tool packages via syscs_util.syscs_register_tool().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1431526 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8c151840af228b7bcb22f0de1df9ae6bdfc0f66d,2013-04-23T16:02:35Z,"['java/engine/org/apache/derby/impl/sql/compile/BetweenOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryRelationalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/InListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/Predicate.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java']","DERBY-6185 (Query against view  with ""where name LIKE 'Col1' ESCAPE '\' "" failed)

During optimizer's pre-processing phase, while cloning a BinaryComparisonOperatorNode, we were not copying the entire state.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471022 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
761351a0791cdd1531f43e5b4a50d46985c531d7,2012-07-10T12:04:04Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Remove assignment of values that are never used.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359624 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
57f53e3ec6afdb9a61fb5ef798c5626f33aa874d,2014-07-10T12:18:14Z,"['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6652: Disable the use of views as the source data sets of MERGE statements; tests passed cleanly for me on derby-6652-01-aa-disableSourceViews.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609450 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d3fbd72700c8839e8eafb5d4c45049e0a9661549,2013-10-22T07:14:24Z,['java/client/org/apache/derby/client/am/SqlWarning.java'],"DERBY-6373: NPE in Statement.getWarnings()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1534523 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
38b597972601b7b89d0841a1b8af1fd9aa860b7c,2013-02-22T12:48:55Z,"['java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/SetRoleNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetSchemaNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Change signatures of

  CompilerContext.setParameterList(Vector)
  CompilerContext.getParameterList()
  ResultColumnList.bindExpressions(FromList, SubqueryList, Vector)

to use List instead of Vector.

Also change overrides of those methods, as well as signatures of
local variables, fields and methods used by those methods.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1449020 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
38667d90c4142b29af466282e30981d29a1f098f,2013-01-30T03:42:50Z,"['java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientDataSource40.java', 'java/client/org/apache/derby/jdbc/NonJNDIClientXADataSource40.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/NonJNDIEmbeddedXADataSource40.java', 'java/tools/org/apache/derby/impl/tools/ij/xaHelper.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-rename. Rename the new datasources from using prefix
""NonJNDI"" to prefix ""Basic"".

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1440262 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
7b6ad6daa38a43b5fee2e297403f0791f671fa25,2014-02-21T08:39:24Z,"['java/engine/org/apache/derby/iapi/sql/PreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java']","DERBY-4753: ""ERROR 42X01: Syntax error: FALSE."" during call to java.sql.DatabaseMetaData.getIndexInfo

When recompiling a meta-data query after detecting that its plan is
stale, pass down a flag to the compiler to say that it's a meta-data
query and that use of internal syntax is allowed.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1570490 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
eab88ec51aad407c3cb77723bd69cd46e46a7f9a,2014-05-06T11:57:11Z,"['java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableName.java']","DERBY-6370: dblook doesn't schema-qualify identifiers in trigger actions

Remove unnecessary DataDictionary parameter from TableName.bind().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1592726 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0ae3b6de0233efefe0e5342cb1ced8faa38ec424,2014-03-21T13:07:45Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java']","DERBY-3155: Simplify processing of then rows for the DELETE actions of MERGE statements; commit derby-3155-50-aa-revampDeleteThenRows.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1579937 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5ea999a73bf83cb3205fcf4a34766afae2c33f5a,2012-03-12T09:54:36Z,['java/drda/org/apache/derby/drda/NetServlet.java'],"DERBY-5639: Minor code cleanup for NetServlet

Code cleanups:
 o made 'Runnable service' local
 o removed three unused messages
 o made getHtmlLabelledMessageInstance private
 o removed a bunch of unused local variable initialization values 

Patch file: derby-5639-2a-misc.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1299600 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
595307e2d7839dff5c6ffacf74f479ff686a8afa,2013-06-19T07:28:36Z,"['java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/Driver20.java', 'java/engine/org/apache/derby/jdbc/Driver30.java', 'java/engine/org/apache/derby/jdbc/Driver40.java', 'java/engine/org/apache/derby/jdbc/Driver42.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java']","DERBY-1984: Re-factor JDBC classes to remove support for JDBC 2

Move all functionality from Driver20, Driver30 and Driver40 to
InternalDriver. Move all functionality from AutoloadedDriver40
to AutoloadedDriver.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494482 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
50734d82d276fa9ed8e8d5caad2be8ecec410910,2013-10-11T08:29:14Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java']","DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Make the code in TriggerDescriptor.getActionSPS() reusable for
TriggerDescriptor.getWhenClauseSPS() so that the fixes for DERBY-4874
and Cloudscape bug 4821 also get applied to the WHEN clause.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1531226 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b004dff2b30832cbef090d292d4fc655cf2c2c1d,2014-06-18T17:38:21Z,"['java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java']","DERBY-6552 The public api includes methods inherited from superclasses which aren't in the public api and so have no javadoc comments

Patch derby-6552-only-public-members.

Changes the way we generate public API javadocs by restricting it to
public class members.

Adds back Javadocs for private, class private and protected members
removed before.

Added some missing Javadocs.

Moved the top level class javadocs that were nto visible (root
classes) down to the first level visible data sources, so we can get
the data source properties documented for embedded. Added this for
client.  Cf. BasicEmbeddedDataSource40 and BasicClientDataSource40
respectively.

Added missing @serial tags

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603549 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
af1c18c5023d0a43dc2d404a44edd30f20cfeac2,2014-03-11T14:46:15Z,"['java/engine/org/apache/derby/iapi/error/ExceptionUtil.java', 'java/engine/org/apache/derby/iapi/sql/compile/JoinStrategy.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/SQLSessionContext.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/NoPutResultSet.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/RowChanger.java', 'java/engine/org/apache/derby/iapi/sql/execute/TargetResultSet.java', 'java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/RowLocationRetRowSource.java', 'java/engine/org/apache/derby/iapi/store/access/ScanController.java', 'java/engine/org/apache/derby/iapi/types/BooleanDataValue.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNoShortCircuitNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AndNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/SQLSessionContextImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java', 'java/engine/org/apache/derby/impl/sql/execute/DeferredDuplicates.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueIndexSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/UniqueWithDuplicateNullsIndexSortObserver.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ValidateCheckConstraintResultSet.java', 'java/engine/org/apache/derby/impl/store/access/heap/HeapController.java', 'java/engine/org/apache/derby/impl/store/access/sort/MergeScanRowSource.java', 'java/engine/org/apache/derby/impl/store/access/sort/SortBufferRowSource.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-532 Support deferrable constraints

Patch derby-532-check-constraints-2 which implements deferred CHECK
constraints and supporting tests.

The high level approach is as follows.  When a violation occurs, we note the row
location in the base table of the offending row. At commit time (or when
switching a constraint to immediate), we revisit those rows using the row
locations if they are still valid, and validate those rows again. This is
achieved by positioning to the saved row locations in combination with a
specially crafted result set: ValidateCheckConstraintResultSet (see
ProjectRestrictResultSet#getNextRowCore) which positions to the offending base
row using ValidateCheckConstraintResultSet#positionScanAtRowLocation before
letting ValidateCheckConstraintResultSet read the row. If the row locations are
no longer valid, e.g. an intervening compress happened, we do a full table scan
to verify the constraints instead.

Adding a constraint in deferred constraint mode is currently sub-optimal, since
we currently do a full table scan via an internally generated ""SELECT .. WHERE
NOT <constraints>"", and we don't have a way the get at the row locations of the
offending rows in this case. I might add a specially tailored result set for
that purpose later.

Normally, when a row is inserted or updated, we execute a generated method which
combines evaluation of all check constraints on the table relevant for the
inserted or updated columns. This evaluation is performed using McCarthy boolean
evaluation (short-circuits as soon as result is known). This isn't optimal for
deferred constraints, as we'd need to assume all constraints were violated in
such a case. The implementation replaces the short-circuited evaluation with a
full evaluation, so we can remember exactly which constraints were violated,
cf. AndNoShortCircuitNode and SQLBoolean#throwExceptionIfImmediateAndFalse. A
violation in throwExceptionIfImmediateAndFalse when we have a deferred
constraint is noted (DMLWriteResultSet#rememberConstraint implemented by
UpdateResultSet and InsertResultSet) by adding the violation to a list for that
row. After the insert/update is completed, the set of violations is remembered
for posterity, cf. InsertResultSet#normalInsertCode and
UpdateResultSet#collectAffectedRows by inspecting the lists
(#violatingCheckConstraints).

Note that we currently do not note which constraints were violated *for each
individual row*, only per table in the transaction. This means that we visit
potentially more rows over again when a single constraint is changed to
immediate.  This could be improved further by storing the set of violated
constraints along with the row location.

For bulk insert and deferred (see panel 1 below) insert row processing there is
special code paths, cf.  InsertResultSet#offendingRowLocation which is invoked
via a callback from HeapController#load and another path in
InsertResultSet#normalInsertCode respectively.

For update, the code for deferred treatment is in in one of
UpdateResultSet#collectAffectedRows and UpdateResultSet#updateDeferredRows
depending on whether there are triggers.

The existing test ConstraintCharacteristcsTest has been built out by adding
check constraint to those fixture for which it is relevant, as well as adding
new ones which are only relevant for check constraints.

[1] This ""deferred"" refers to Derby special handling of rows in certain
situation, for example when doing an insert which uses the same table as a
source result set, we need to make sure we don't get confused and see the
incrementally inserted rows ""again"" as we process the original result set,
essentially we do a snapshot of the source result set, hence ""deferred rows"".

All regressions passed.

Detailed code comments:

M java/engine/org/apache/derby/iapi/sql/conn/SQLSessionContext.java
M java/engine/org/apache/derby/impl/sql/conn/SQLSessionContextImpl.java
M java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java
M java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java
D java/engine/org/apache/derby/impl/sql/execute/DeferredDuplicates.java
A java/engine/org/apache/derby/impl/sql/execute/DeferredConstraintsMemory.java

Extended and refactored slightly existing mechanism for deferred primary
key/unique constraints to also cater for check constraints. Since the hash key
we used for the memory of primary key and unique constraints was the
conglomerate id of the indexes, and those are guaranteed to be disjoint from the
conglomerate ids of the base tables having deferred constraints, we can use the
same hash table to find the ""memory"" in the form of the disk based hash table
(BackingStoreHashtable), cf.  LCC#getDeferredHashTables.--

M java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java-

Code to drop any deferred constraints memory in the transaction when a
constraint is dropped.-

M java/engine/org/apache/derby/impl/store/access/heap/HeapController.java

Call back added for bulk insert in the presence of deferrable check constraints.

M java/engine/org/apache/derby/iapi/sql/execute/NoPutResultSet.java
M java/engine/org/apache/derby/impl/sql/execute/NoPutResultSetImpl.java
M java/engine/org/apache/derby/iapi/store/access/RowLocationRetRowSource.java

Extra plumbing to be able to signal to HeapController that we need to do a
callback with the inserted row location (for bulk insert)

M java/engine/org/apache/derby/iapi/sql/execute/TargetResultSet.java

Extra interface method, offendingRowLocation. Only implemented with meaningful
semantics for NoPutResultSetImpl which calls it for its targetResultSet, an
InsertResultSet.

M java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java
M java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java

More parameters to getProjectRestrictResult set to do the magic mention in the
overview for that result set, pass along schema and table name to
InsertResultSet so we can remember them for check violations. They are used to
produced checking SQL statements. This may be a bit fragile, since a rename
schema or table could make those invalid. However, there is presently no RENAME
SCHEMA in Derby and the RENAME TABLE is illegal in certain cases, notably if
there is a check constraint defined on it, so the solution should be OK for
now. Also adds an interface method, getValidateCheckConstraintResultSet, to
allow the execution run-time to build one of those, cf. code generation logic in
NestedLoopStrategy#resultSetMethodName.

M java/engine/org/apache/derby/iapi/sql/execute/RowChanger.java
M java/engine/org/apache/derby/impl/sql/execute/RowChangerImpl.java

Extra parameter to insertRow to get at the row location if needed.

M java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java
M java/engine/org/apache/derby/iapi/store/access/ScanController.java

Javadoc fixes.

M java/engine/org/apache/derby/iapi/types/BooleanDataValue.java
M java/engine/org/apache/derby/iapi/types/SQLBoolean.java

Extra method throwExceptionIfImmediateAndFalse used by deferred check
constraints to make a note of all violated constraints as evaluated by the
generated method. Picked up by InsertResultSet or UpdateResultSet.

A java/engine/org/apache/derby/impl/sql/compile/AndNoShortCircuitNode.java
M java/engine/org/apache/derby/impl/sql/compile/AndNode.java
M java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java

AndNoShortCircuitNode is used to represent a non-McCarthy evaluation of the
combined check constraints. See usage in DMLModStatementNode#generateCheckTree.

M java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java

Extra dummy parameter added for call to super#bindConstraints
(DMLModStatementNode). Only used by insert.

M java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java

Pick up the DERBY_PROPERTIES value for property ""validateCheckConstraint =
<conlomerateId>"" we provide to the checking query (internal syntax only)
generated by DeferredConstraintsMemory#validateCheck.  The conglomerate id is
used to retrieve the violating rows information set up by
ProjectRestrictResultSet#openCore to drive ValidateCheckConstraintResultSet.

M java/engine/org/apache/derby/impl/sql/compile/InsertNode.java

Boolean member variable to know if we have a deferrable check constraint; also
pass only schema and table name to the result set. Passed on to the
InsertConstantAction from which InsertResultSet can pick it up.

M java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java

Logic to keep track of whether we are used by the special internal query to
check violated check constraints.  In this case we also do not push the check
predicates down to store for simpler handling.

M java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java

Code to parse a long value from ""--DERBY-PROPERTIES"" property.

M java/engine/org/apache/derby/impl/sql/compile/SetConstraintsNode.java

Extra code to comply with the sane mode parse tree printing conventions.

M java/engine/org/apache/derby/impl/sql/compile/TestConstraintNode.java

Handle different code generation for deferrable check contraints.

M java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java

Pass on more info: schema and table name + small refactoring.

M  java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj

Handle the new internal query to validate violated check constraints. Cf. query
in DeferredConstraintsMemory#validateCheck.

M java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java
M java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java

Open up for check constraints.

M java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java
M java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java

ATCA: Special handling of adding a deferred check constraint: need different
code path to get the UUID of constraint soon enough to be able to note any
constraint violations. CCA: note any violation and remember it.  We'd like to
remember that row locations of the offending rows here, but not done for now, so
at checking time, we'll need a full table scan. This can be improved upon, see
code comment.

M java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java
M java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java
M java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java

Pass on more info to InsertConstantAction and UpdateConstantAction needed by the
result sets.

M java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java

Drives the checking for check constraints, and picks up the result. If we have
violations and deferred constraints, we remember that. Also some refactorings to
avoid local variables shadowing globals.

M java/engine/org/apache/derby/impl/sql/execute/UpdateResultSet.java

Drives the checking for check constraints, and picks up the result. If we have
violations and deferred constraints, we remember that.

M java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java

Removed unused method.

M java/engine/org/apache/derby/impl/sql/execute/ProjectRestrictResultSet.java

Drive the special result set, ValidateCheckConstraintResultSet by positioning it
correctly for each row retrieved, using the remembered row locations from
violation time.

M java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java

Added logic for check constraints. Also added a new check that the user don't
specify the same constraint twice, cf new test case for it.

M java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java

Make some members protected rather than private, to let the new result set
ValidateCheckConstraintResultSet inherit from it.

M java/engine/org/apache/derby/impl/sql/execute/TemporaryRowHolderResultSet.java
M java/engine/org/apache/derby/impl/store/access/sort/MergeScanRowSource.java
M java/engine/org/apache/derby/impl/store/access/sort/SortBufferRowSource.java
M java/engine/org/apache/derby/impl/sql/execute/CardinalityCounter.java
M java/engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java

Boiler plate to comply with interface (not used).

M java/engine/org/apache/derby/impl/sql/execute/UniqueIndexSortObserver.java
M java/engine/org/apache/derby/impl/sql/execute/UniqueWithDuplicateNullsIndexSortObserver.java
M java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java
M java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java

Refactoring only.

A java/engine/org/apache/derby/impl/sql/execute/ValidateCheckConstraintResultSet.java

The new result we use to check violating rows only based on row location

M java/engine/org/apache/derby/iapi/sql/compile/JoinStrategy.java
M java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java
M java/engine/org/apache/derby/impl/sql/compile/NestedLoopJoinStrategy.java

New boolean to signal that we want ValidateCheckConstraintResultSet

M java/engine/org/apache/derby/jdbc/EmbedXAResource.java
M java/engine/org/apache/derby/jdbc/XATransactionState.java

Extra logic to handle check constraints (already had it for primary key and unique).

M java/engine/org/apache/derby/iapi/error/ExceptionUtil.java

Utility method to determine if an exception if a transaction deferred constraint
violation. Needed by the XA code.

M java/engine/org/apache/derby/loc/messages.xml
M java/shared/org/apache/derby/shared/common/reference/SQLState.java

New error messages

M java/testing/org/apache/derbyTesting/functionTests/tests/lang/ConstraintCharacteristicsTest.java

New test cases and extension of present ones to include check constraints

M java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_11.java

Extension of present test cases to include check constraints.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1576367 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
1061fd2082258262eccb55c3194a79c28b3bc8cf,2013-10-31T07:30:24Z,['java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java'],"DERBY-6348: NPE or assert failure in recursive trigger

Reset the activation in the statement context before setting up the
activation for the next trigger, so that the nested trigger activation
is a child of the top-level activation, and not a child of the
previous trigger's activation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537393 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
01c7f8356c2c8dfc2a42a52f65fa2715b59662cb,2013-02-26T21:05:14Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/CallableStatement42.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/PreparedStatement42.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/jdbc/JDBC.java', 'java/engine/org/apache/derby/mbeans/JDBCMBean.java']","DERBY-6000: Fix misc issues raised by JDBC 4.2 buddy testing.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1450422 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
cb88209e90383bd21fa06b7047c66b6b83c143d5,2013-02-01T07:42:53Z,"['java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource40.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161)

Patch derby-5955-javadoc-followup; typo fix plus clarify usage: JDBC 4.2/Java
8/Java 8 Compact profile 2.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441327 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
b6a45f5eb530689b5f4b5951ced4ab69bc4e12da,2014-09-19T16:57:04Z,"['java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java']","DERBY-6741: Add a privilege barrier to prevent users from getting a ContextManager from an embedded connection object; tests passed cleanly on derby-6741-01-aa-usederbyinternals.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1626274 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c2a0bdd90984cc77cca542949902407445de95db,2014-01-22T20:56:58Z,['java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java'],"DERBY-3155: Basic support for views as the source tables of MERGE statements; commit derby-3155-18-aa-basicView.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1560507 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3511a12d7c0ce3f381375447bad8f91ef7ed8f24,2013-12-03T20:42:26Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java']","DERBY-3155: Improve handling of correlation names for the target tables in MERGE statements; commit derby-3155-09-aa-correlationNames.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1547585 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
489530b1ca52d8f8b240d8d713d5ba94f93d7427,2013-08-27T08:16:00Z,"['java/engine/org/apache/derby/iapi/services/io/FormatIdInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/engine/org/apache/derby/iapi/services/io/StoredFormatIds.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRowBuilder.java']","DERBY-6314: Upgrade from 10.10 fails with ClassCastException

Make ExecRowBuilder implement the Formatable interface so that any
Formatable instances referenced from its fields are stored using
Formatable logic instead of Serializable logic.

Add type checking in FormatIdInputStream's error handlers to prevent
the underlying exception from being shadowed by a ClassCastException
under certain circumstances.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1517761 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6c2e1b4adc783bba21353b4f662677a0fd0eb0fc,2013-10-09T07:55:48Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-6371: DROP COLUMN looks in wrong schema when checking trigger dependencies

Use the same schema during dependency checking as during compilation
of the trigger action.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1530517 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
51f910f6aec93a0a23b93660149cd81deba0ffda,2013-10-01T09:31:26Z,['java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java'],"DERBY-534: Support use of the WHEN clause in CREATE TRIGGER statements

Disallow references to tables in the SESSION schema in the WHEN clause.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1527993 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7d9c8c771ef2efc55c5cf4dc3ed5a183e08c2c14,2014-04-01T01:27:56Z,"['java/engine/org/apache/derby/iapi/services/info/ProductGenusNames.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/tools/org/apache/derby/tools/sysinfo.java']","DERBY-590: Move the Lucene plugin into a new derbyoptionaltools.jar file; commit derby-590-12-aa-newJar.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583505 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2bd5cbdb7a4add150415817766981851b71ad52c,2014-05-30T07:13:22Z,"['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ReplaceNodeVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-1576: Extend the CASE expression syntax for ""simple case""

Allow untyped parameters in the case operand.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1598472 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
49be70bcc98a7265bd64f89c8a85de8729f2eda0,2013-04-01T03:58:20Z,"['java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/net/NetLogWriter.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java']","DERBY-6125 Code clean up in client driver.

    Patch derby-6125-03-a. This patch

    - makes a mutable public array (dncPackageConsistencyToken) private.
    - removes a couple of assignment with values that are never used (e.g. myPVH)
    - makes some members final and public
    - reworks an invariant to use SanityManager assert
    - replaces a StringBuffer with StringBuilder
    - makes a lazy initialization thread safe (codePointNameTable__)
    - removes a couple of noop bit operations
    - removes an unused method (computeDncLogWriter with existing connection overload)

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1463079 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
9fb8a065102a49966cfb9df971ffc8055645c432,2014-11-25T03:40:20Z,"['java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/BasePage.java']","DERBY-4057 Space is not reclaimed if transaction is rolled back

javadoc fixes for previous checkin.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1641521 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
b54918e7ce530ca391f4cdf7b949b717da630199,2013-02-04T17:39:46Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/BatchUpdateException.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/PreparedStatement.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6000: Add support for JDBC 4.2 changes to BatchUpdateException.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1442195 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0fad4e6d5ce5911fddb7afd24820eaca3a1dcba6,2013-04-18T09:29:00Z,"['java/engine/org/apache/derby/iapi/store/access/xa/XAXactId.java', 'java/engine/org/apache/derby/iapi/store/raw/GlobalTransactionId.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/RawTransaction.java', 'java/engine/org/apache/derby/impl/store/raw/xact/GlobalXactId.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactFactory.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactXAResourceManager.java']","DERBY-6184: Clean up warnings in XA transaction id classes

- simplify existing cloning of arrays by using clone() instead of
  calling new and arraycopy

- reduce visibility of array-returning methods in GlobalXactId to make
  it clearer for code analysis tools that they are not called from
  outside of the package in which the class lives

- remove said methods from the GlobalTransactionId to allow them to be
  non-public

- make the public, array-returning methods in XAXactId return copies
  of the internal arrays to protect the internal state, as instances
  of this class may be returned all the way out to the user

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1469243 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1d3aaa1ef1e34e5a702e54e1dceecdbc3919edcd,2012-05-07T08:18:10Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-5745: Remove unused local variables from DataDictionaryImpl 

Removed a bunch of unused local variables in DDI. Some of them were obtained
by invoking various methods, but they should not cause side-effects on the
system.

Patch file: derby-5745-1a-remove_unused_lvars.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1334910 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
95049cfc37248d0187a8c7d8158938ea3143a5c7,2013-04-06T05:47:58Z,"['java/client/org/apache/derby/client/ClientXid.java', 'java/client/org/apache/derby/client/am/EncryptionManager.java', 'java/client/org/apache/derby/client/am/ExceptionFormatter.java', 'java/client/org/apache/derby/client/am/Section.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/client/org/apache/derby/client/am/Statement.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetResultSetReply.java', 'java/client/org/apache/derby/client/net/NetResultSetRequest.java', 'java/client/org/apache/derby/client/net/NetSqlca.java', 'java/client/org/apache/derby/client/net/NetStatement.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetXACallInfo.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/Typdef.java']","DERBY-6125 Code clean up in client driver.
Patch derby-6125-05-d; details:

** ClientXid

- reworked ClientXid#equals to find favor with FindBugs: now tests for null and wrong type.
  The old version would get classcastexception if a wrong type object was compared.

- made ClientXid#getData clone the result - it is a byte array

** Section

- clone bytes in Section#setPKGNAMCBytes to avoid having a package private variable
  wriable from outside the package (it's an array).

- make Section#getPKGNAMCBytes return a clone

** Sqlca

- removed unnecessary a priori allocation to Sqlca#sqlErrd_.

- made Sqlca#sqlWarn_ private

- changed #getSqlWarn to return String since all its uses need a String anyway.

- made Sqlca#getSqlErrd private

- simplified implementation of Sqlca#getSqlWarn

- made Sqlca#rowsetRowCount_ private

- made Sqlca#containsSqlcax_ private

- made Sqlca#sqlErrmcMessages_ private

- removed argument sqlErrpBytes from Sqlca#setContainsSqlcax (only called once; with null).

- removed argument sqlErrpBytes from Sqlca#resetRowsetSqlca  (only called with null).

- introduced Sqlca#getReturnValue in Statement#completeExecute instead
  of allowing access to sqlca.getSqlErrd()[0]

- removed unused Sqlca#sqlErrmcCcsid_

- introduced public String Sqlca#formatSqlErrd as replacement for
  direct access to Sqlca#sqlErrd_.

** NetSqlca

- made NetSqlca#setSqlwarnBytes package private

- made NetSqlca#setSqlerrmcBytes package private and removed its
  argument sqlErrmcCcsid

- made NetSqlca#setSqlerrd package private

- removed unnecessary test for BIG_ENDIAN in NetSqlca#getRowCount: the
  protocol always uses big endian (SignedBinary.BIG_ENDIAN = 1 is final).

- removed unnecessary type argument to NetSqlca#getRowCount now that endian test is no longer done

** Statement

- made Statement#materialStatement_ private; new accessors

** NetConnection

- removed unnecessary default NetConnection finalizer

- three methods in NetConnection do nothing except calling the method with the same name in the super class:

  - close()
  - closeX()
  - closeResources()

  Remove them and let NetConnection inherit them from its super class.

- Since we remove these methods from NetConnection, we also make
  Connection.closeX() private and unsynchronized, as it will only be
  called from Connection.close().

- NetConnection's closeForReuse() method doesn't have any callers;
  remove that one too.

- NetConnection.completeConnect() doesn't actually do anything except
  calling super.completeConnect(). Remove the override and make the
  super method final instead.

** NetXAConnection

- removed potentially harmful finalizer in NetXAConnection: it calls a
  finalizer for another class (NetConnection). FindBugs advice on this
  (quote):

  ""If a connected set of objects beings finalizable, then the VM will
  invoke the finalize method on all the finalizable object, possibly
  at the same time in different threads. Thus, it is a particularly
  bad idea, in the finalize method for a class X, invoke finalize on
  objects referenced by X, because they may already be getting
  finalized in a separate thread. ""

  It also neglected to call super.finalize()...

** Typdef

- made Typdef#FdocaSimpleDataArray private

- removed unused TypDef#getByteOrder

- made Typdef#environmentTables_ private

** SqlException

- made SqlException#SQLExceptionFactory package private (was protected)

** EncryptionManager

- removed unused methods EncryptionManager#setInitVector and #setSecKey

** NetXACallInfo

- removed unused NetXACallInfo#getCorrelatorToken

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1465193 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
8d4d0876793ac1104024f39db60b8d3b40a33c77,2014-03-13T10:15:02Z,"['java/engine/org/apache/derby/iapi/services/io/FileUtil.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java']","DERBY-6505: Clean up dead code in FileUtil

Remove FileUtil.newFile(), which is a workaround for a bug in old Java
versions that are no longer supported.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1577083 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6f660672993bbce667d04d1dda8190680639b410,2012-07-24T17:07:56Z,['java/client/org/apache/derby/client/am/Statement.java'],"DERBY-5874: Remove JDBC 3 constants from client.am.Statement

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1365173 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9f1b314645ee725b3b94fe8372efc2da4d52800c,2014-03-28T09:44:37Z,['java/engine/org/apache/derby/impl/io/CPFile.java'],"DERBY-5615: Permission problems with classpath subsubprotocol

Wrap CPFile's privileged operations in doPrivileged() so that
classpath databases can be accessed with a security manager.

Make more of the test cases in DatabaseClassLoadingTest and
NativeAuthenticationServiceTest run with a security manager.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1582655 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
400f6eb4c5ebd30de379479a6cb980f102970c5b,2013-05-14T16:43:56Z,"['java/engine/org/apache/derby/impl/io/VFMemoryStorageFactory.java', 'java/engine/org/apache/derby/impl/io/vfmem/DataStore.java', 'java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/load/Export.java', 'java/engine/org/apache/derby/impl/load/ExportWriteData.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/ImportLobFile.java', 'java/engine/org/apache/derby/impl/load/ImportReadData.java', 'java/engine/org/apache/derby/security/DatabasePermission.java', 'java/engine/org/apache/derby/security/SystemPermission.java']","DERBY-6213: Cleanup Java6 related lint warnings in types, load, db, io, and security.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1482443 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
afe6225b8a675bb2979fc61a7e9dffb335f2ca88,2012-06-14T15:15:36Z,"['java/engine/org/apache/derby/impl/sql/catalog/DropDependencyFilter.java', 'java/engine/org/apache/derby/impl/sql/catalog/SPSNameCacheable.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceGenerator.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java']","DERBY-5814 Source cleanup in catalogs ""impl.sql.catalog"" and ""impl.sql.compile""

Patch catalog-compile-cleaning-2, which:

a) removed unused private methods
b) removed unused local variables and members
c) cleaned up imports
d) remove unused formal arguments 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1350289 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
2ff02ef7eb120880f846a419740cde8e21fe09f0,2012-07-23T07:09:54Z,['java/client/org/apache/derby/client/am/LogicalStatementEntity.java'],"DERBY-5872: Inconsistency between isWrapperFor() and unwrap() in logical statements

Make LogicalStatementEntity's isWrapperFor() only check the interfaces
implemented by the logical statement. This makes it consistent with the
unwrap() method, and also consistent with how isWrapperFor() works in
LogicalConnection40 and LogicalDatabaseMetaData40.

Add test cases for the new behaviour in PreparedStatementTest and
CallableStatementTest.

Enable ClosedObjectTest for logical statements.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1364524 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
f40e25a589bb8b0bc8ac7bfaf9f0eeb7bc6e47eb,2014-03-31T11:42:30Z,['java/engine/org/apache/derby/jdbc/InternalDriver.java'],"DERBY-6107: Connection to classpath database fails when login timeout is set

Don't cache threads used for connecting to the database when a login
timeout is set, to prevent that the connection attempt uses the wrong
context class loader.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583304 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
e3a636576a08f92b75ec6936ffc4f07725844a3b,2012-04-20T12:58:29Z,['java/build/org/apache/derbyBuild/MessageBuilder.java'],"DERBY-5640: Make MessageBuilder add a desc element to the tables it generates so that they satisfy accessibility guidelines.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1328359 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
2a57bb0842fb71a6cf17354420072db90ade1bd2,2013-05-28T09:03:08Z,['java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java'],"DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Store lists of implementation classes in a list instead of an array,
since arrays cannot have generic types. This silences an unchecked
conversion warning and allows us to remove a SuppressWarnings
annotation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1486826 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
64b63085233fe33674a06eda4d7999da6cc7c59c,2014-07-17T12:38:43Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-6668: Forbid TRUNCATE on tables referenced by deferred foreign keys; commit derby-6668-01-ab-disallowTruncateOnReferencedTable.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1611342 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
65ffd9b1f5a61e60105eaa1e995322ee3f9589f6,2013-06-18T17:27:15Z,['java/engine/org/apache/derby/impl/sql/compile/SelectNode.java'],"DERBY-6263: Add defensive code to Visitor support in SelectNode; tests passed cleanly on derby-6263-03-ab-defensiveNullChecking-in-SelectNode.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1494220 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b0456a0d2fb2f2f2d3689d544632817c2e86d11d,2014-02-01T03:08:48Z,"['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AllResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/PredicateList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java']","DERBY-6464: Improve encapsulation of ResultColumn and ColumnReference; tests passed cleanly for me on derby-6464-01-aa-makeFieldsPrivate.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1563368 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
13673bddb42525a5ae9704ca5de8e920b9616d9f,2013-06-12T07:35:40Z,"['java/engine/org/apache/derby/iapi/services/timer/TimerFactory.java', 'java/engine/org/apache/derby/impl/services/timer/Java5SingletonTimerFactory.java', 'java/engine/org/apache/derby/impl/services/timer/SingletonTimerFactory.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java']","DERBY-6114: OOME in XAMemTest.testDerby4137_TransactionTimeoutSpecifiedNotExceeded

Periodically run purge() on the cancellation timer to reclaim the
space occupied by cancelled tasks.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1492094 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
987bbcbe0509c7aff4d44a2afc5dec9112be148d,2012-02-21T23:50:17Z,"['java/engine/org/apache/derby/impl/store/raw/data/DropOnCommit.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java']","DERBY-5624 System can run out of stack space while processing DropOnCommit requests.

Taking care of cleanup after a commit is handled by notifying all ""Observers""
that an event has taken place that they might want to act on and cleanup.  In
the added test case this is triggered by off line commit which effectively
drops and recreates the base table and all of its indexes after loading the
data into them.  

Sometimes these Observers may execute work which adds to the Observer queue,
and that queue can ""miss"" them in the first pass through.

A previous fix for this problem added a recursive call to notifyObservers in
the place that could cause this addition of observers.  This recursive call
was causing stack problems when the number of Observers became large.  For
the checked in test case this was 1000 indexes on 1000 columns of the table.
For other users I believe the cause was a by product of sorts on large disk
based sorts for multi-gigabyte tables and indexes.  2 users were reporting
similar failed stacks for failing compresses of large tables, and one was
able to take this fix to their environment and then successfully run the
compress.

The fix was to remove the recursion and instead loop at the outermost point
until there were no Observers.

Adding the test to the largedata suite as it takes over 10 minutes to run
on my machine.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1292079 13f79535-47bb-0310-9956-ffa450edef68
",mikem@apache.org,Mike Matrigali
f273581666ded6d82fda7179687466753d6440e6,2014-05-07T07:56:37Z,['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java'],"DERBY-6563: NOT elimination for CASE expressions is broken

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1592945 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
6995fff99e95d4129fc0f65d01f9b278387d9d2c,2014-02-10T14:28:27Z,"['java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java']","DERBY-2380: Make the generated class eligible for gc once the statement is invalidated

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1566635 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
cc67949e80eec15b60334500c608ae4a50938861,2013-11-25T08:59:24Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericConstantActionFactory.java']","DERBY-2041: Trigger should register a dependency on tables and columns used in its body

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1545179 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
892463481d96b49fd998851cf9fb58058a17ec32,2013-12-16T18:44:36Z,['java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java'],"DERBY-5196; Correct the layout of log.ctrl as described on the Derby web site
   adding a comment to warn about updating the web site when updating the code.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1551307 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
9fd9272eb990835a9d30b100a36c538d1037903b,2013-03-29T04:30:40Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/net/NetLogWriter.java']","DERBY-6125 Code clean up in client driver.

Patch derby-6125-02-a. Removes the always false public static
Configuration#traceSuspended__ and its uses. It also removes a couple
of unused methods.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1462394 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
0a8f8408a5e4070ec8a88f786601e601c30d3da0,2012-10-05T13:49:10Z,"['java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/EncryptOrDecryptData.java']","DERBY-5792: Make it possible to turn off encryption on an already encrypted database.

Simplified code removing old container files generated during encryption and
decryption of a database. There were two implementations, I removed one of them
and removed the parameter of EncryptOrDecryptData.removeOldVersionOfContainers
(and calling methods).

Patch file: derby-5792-5b-old_container_removal_cleanup.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1394522 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
dfc9ab0c17d3d0f68e3cf70ab27b1461797ca7a5,2013-05-11T17:20:06Z,"['java/engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/engine/org/apache/derby/iapi/error/ExceptionUtil.java', 'java/engine/org/apache/derby/iapi/util/DoubleProperties.java', 'java/engine/org/apache/derby/impl/io/DirFile.java', 'java/engine/org/apache/derby/impl/io/JarDBFile.java', 'java/engine/org/apache/derby/impl/load/ImportBlob.java', 'java/engine/org/apache/derby/impl/load/ImportClob.java', 'java/engine/org/apache/derby/vti/VTIMetaDataTemplate.java']","DERBY-6213: Convert remaining non-JDBC packages to Java 6 build.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1481379 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3c9599fa1519c346a47c695974c596ce65c37729,2012-08-10T12:07:11Z,['java/drda/org/apache/derby/impl/drda/DRDAStatement.java'],"Cleanup code in network server's DRDAStatement class
* pkgcnstkn, pkgid, pkgsn variables removed from DRDAStatement since these are derived from pkgnamcsn object.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1371677 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
f5ac375aad5ef67068d3194327b7645eac623941,2014-07-08T06:18:11Z,['java/engine/org/apache/derby/security/SystemPermission.java'],"DERBY-3476: Improve serialization logic for SystemPermission

Validate name and actions fields when deserializing a stored
SystemPermission, and throw an exception if the stored
SystemPermission is not a valid one.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1608670 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
87d06c2d3fe28dcd1707cf0dd80eb4d3b7585af1,2011-11-11T19:02:01Z,"['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java']","DERBY-5488: Eliminate needless Boolean object creation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1201025 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8eec7a946d2ff628e58021b22fa65025619f0348,2013-05-30T17:36:06Z,['java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java'],"DERBY-6221: Check for invisible PASSWORD column at preprocessing time.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487946 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
70a4f2da3c64dda14c404633e736d50ab89ab199,2011-11-02T13:03:52Z,"['java/engine/org/apache/derby/iapi/sql/compile/Parser.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DefaultNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParserImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java']","DERBY-4845: Improve the dependency tracking for our build targets

Don't use impl class StatementNode in iapi classes.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1196560 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
7863d831e22bebb1786a92eda74f4892c80fa3db,2014-06-16T23:00:34Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSource.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/ReferenceableDataSource.java']","DERBY-6552 The public api includes methods inherited from superclasses which aren't in the public api and so have no javadoc comments

Patch derby-6552-restructure-more:

- adds wrappers so that the exposed classes have the expected methods
  and constants.

- changes the doc build for publishedapi so that we have a
  ""sourcepath"" for Javadoc which contains all the sources. This is
  necessary to make the wrappers inherit the (common for Basic* and
  regular data sources) javadoc from a class that is otherwise not in
  the API.

- added reference ""link""s to official Java Javadocs for ease of
  reading (SE: 8, J2EE: 7)

- removed ClientBaseDataSourceRoot putting its contents into
  BasicClientDataSource40

- removed ClientBaseDataSource moving its contents into ClientDataSource

- added new serialized data source tests for 10.11

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603019 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3240e21f622d7d8822cf4d3f4409f68c9833baaa,2014-09-09T12:21:27Z,"['java/optional/org/apache/derby/optional/lucene/LuceneListIndexesVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java']","DERBY-6730: Allow case-sensitive names for key columns when creating Lucene indexes; commit derby-6730-01-aa-correctCasing.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1623782 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
234a2b69bcd3d3ae90bb4383b77876814eec6d69,2013-03-07T09:36:31Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderedColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java']","DERBY-6075: Use modern collections in impl/sql/compile

Replace Hashtables used for duplicate checking with HashSets.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1453745 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
894a72f1366e7544503b49a6a75b7f9fa5f1bf45,2014-06-12T01:11:17Z,['java/engine/org/apache/derby/impl/io/JarStorageFactory.java'],"DERBY-4381; Connection to Derby database using jar subprotocol doesn't work if the path has round braket  in it
   adding a test and changing search for matching bracket to be from the last occurrence.
   fix suggested by Rafael Soares (rafael dot enq at gmail dot com) 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1602054 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
3249e7733839797302d24e6460ae8f5ee2adda59,2013-09-17T19:52:18Z,['java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java'],"DERBY-6346: Fix LEFT JOIN involving a table with a generated column; tests passed cleanly on derby-6346-02-aa-generateNullForLeftJoins.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1524194 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
6a9200600ce2b5082d75ccbe1d4c7866c7528d67,2014-06-17T09:10:14Z,['java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java'],"DERBY-6615: Remove unused newInstance() method in BaseMonitor

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603099 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d32b042dd2b5ad4403988d21310f28d9c0ac2a77,2013-10-31T07:33:58Z,['java/engine/org/apache/derby/impl/io/DirFile.java'],"DERBY-6396: NullPointerException in DirFile

Check that the array returned by File.list() is non-null before
attempting to iterate through it. Null is a valid return value.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1537394 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0750c7b224c808228f11d9b8d883a17fe86acf6f,2012-02-10T03:44:49Z,"['java/engine/org/apache/derby/impl/store/access/btree/BTreeController.java', 'java/engine/org/apache/derby/impl/store/access/btree/BranchControlRow.java', 'java/engine/org/apache/derby/impl/store/access/btree/LeafControlRow.java']","DERBY-5604 access static constants with static references

Patch 'use_static_reference' makes this change to simplify code and reflect
member status correctly in the access pattern.

Patch provided by dbrosius at apache dot org. 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1242656 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
24d620a6ad34dc39c10f997669c69a7e5b9191a6,2013-10-18T04:10:51Z,"['java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/impl/services/stream/RollingFileStream.java', 'java/engine/org/apache/derby/impl/services/stream/RollingFileStreamProvider.java', 'java/engine/org/apache/derby/impl/services/stream/SingleStream.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java']","DERBY-6350 (Provide a rolling file implementation of derby.log)

Committing patch submitted by Brett Bergquist



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1533320 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
a08662010a66201a4765ad5da09b4cefc21d50b9,2014-06-16T23:09:03Z,"['java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAConnection.java', 'java/engine/org/apache/derby/jdbc/EmbeddedBaseDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/jdbc/ReferenceableDataSource.java']","DERBY-6552 The public api includes methods inherited from superclasses which aren't in the public api and so have no javadoc comments

Follow-up patch derby-6552-restructure-even-more. This restructures
the embedded hierarchy to avoid duplication also. It eliminates
EmbeddedBaseDataSource. Removed a slew of warnings in the IDE also by
some code washing, and regenerated the 10.11 serialized data sources
for the SerializedDataSourceTest. I removed some Javadoc from
non-public members in the API classes, and replaced them with
end-of-line comments instead (to avoid user confusion).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603022 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
3f9d81236eb25e7ab61622b261f875b3a6c38369,2011-11-20T05:58:05Z,"['java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java']","DERBY-5509; javadoc for NetServlet and NetworkServerControl are missing a few closing tags
  adding the missing tags.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1204128 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
5db352a4ee042f60c31b9c80bd01d239b7ed9cf9,2012-05-15T10:12:13Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"DERBY-5746: Minor refactoring of DataDictionaryImpl.getSetAutoincrementValue

Dropped unused return value from the fetch-call.
Moved the instantiation/delcaration/modification of the bit set inside the code
block where it is actually used.

Patch file: derby-5746-1a-minor_refactoring.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1338618 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
636f0a05c3fcc83d186719835d803cbaa4598ee7,2013-10-13T17:34:50Z,['java/engine/org/apache/derby/iapi/services/context/ContextService.java'],"DERBY-6352; Access denied (""java.lang.RuntimePermission"" ""modifyThread"") in store.RecoveryAfterBackup test
  adding try/catch code to provide more information when this happens


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1531721 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
b08f4211aa72f8fa43cb04a12d0258f06e4b461f,2014-07-15T14:22:09Z,['java/engine/org/apache/derby/impl/sql/execute/FKInfo.java'],"DERBY-6663: NPE when a trigger tries to insert into a table with a foreign key

Make sure FKInfo serializes its fkIds field so that the information is
available in stored prepared plans too.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1610711 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
57c1b5cf652d2c49f063f3bfe11f1c89d6284ffd,2011-11-10T19:31:56Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromSubquery.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/IntersectOrExceptNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NormalizeResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ProjectRestrictNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowCountNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/RowCountResultSet.java']","DERBY-5488: Add JDBC limit/offset escape syntax.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1200492 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
600780d1b84363d5e786f992a7ca6c3eb3f43ec4,2013-04-30T05:34:02Z,"['java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicDependencyManager.java', 'java/engine/org/apache/derby/impl/sql/depend/BasicProviderInfo.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

- Make all fields of CreateViewNode and BasicProviderInfo private.

- Make BasicProviderInfo's constructor package private.

- Make CreateViewNode.getProviderInfo() return an immutable list
  instead of the actual array to prevent accidental modification by
  the caller.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1477476 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
2be23a9276b41b8b760be13087b70158cf6993a8,2012-05-07T09:05:48Z,['java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java'],"Remove comment that referred to old code.

The code was changed to use Calendar.setTimeInMillis() in DERBY-2397, so
there is no longer a need for a comment explaining why setTimeInMillis()
is not used.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1334929 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
9fb7cc55d2def22078e725e76732667649ed37e6,2014-03-24T13:32:04Z,['java/engine/org/apache/derby/iapi/services/io/FileUtil.java'],"DERBY-6503: Ignore LinkageErrors when loading FilePermissionServiceImpl

When attempting to load the class on Java 6, an
UnsupportedClassVersionError is (correctly) raised, but it is not
among the exceptions that are caught and ignored. Add a catch clause
for its superclass LinkageError to handle it.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1580845 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d6b5ab3577f01559b8ae5ec03de3a9cbbf6900c3,2014-05-09T07:12:47Z,['java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java'],"DERBY-6567: Incorrect nullability for CASE expression with parameter

Make sure the result of a CASE expression is nullable if (and only if)
at least one of the result expressions is nullable.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1593495 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5afd169ece516df0489cd356c0f0cb22d10dece0,2014-09-22T11:34:10Z,"['java/engine/org/apache/derby/impl/sql/execute/InsertConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/UpdateConstantAction.java']","Make some methods added in DERBY-6414 non-public to avoid exposing
internal arrays publicly.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1626735 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
554386cc4618d0b60dbafaa8f6e9e482d672e56d,2013-04-24T09:43:12Z,"['java/engine/org/apache/derby/iapi/services/io/ArrayUtil.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java']","DERBY-6169: Reduce visibility of classes and methods under impl/sql

Stop exposing references to the internal array of saved objects in
GenericPreparedStatement by making the following changes:

- IndexRowToBaseRowResultSet: Since it doesn't need the complete
  array, make it use getSavedObject(int) instead of getSavedObjects()
  so that it only retrieves the single object that the caller is
  interested in.

- VTIResultSet: Remove code that may perform lazy initialization of
  one of the saved objects at run time if it was initially null.
  Instead, make sure it is initialized when the query is compiled.

- GenericPreparedStatement: Change getSavedObjects() to return a
  read-only view of the internal array, so that callers cannot
  accidentally modify it.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1471331 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
29a19ff96bceb0c2b60cc07b73e6a785e8c1976a,2012-04-23T18:22:25Z,['java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java'],"DERBY-5681 When a foreign key constraint on a table is dropped, the associated statistics row for the conglomerate is not removed

This problem happens because when two constraints share the same backing index, we conditionally dropped the statistics. Instead, this fix will make sure that the statistics are always dropped even if the underneath backing index is still valid(and hence won't be dropped and recreated) for other constraints. I ran derbyall and junit suite and they both ran fine with no errors.I have also dded few tests for the issue. 



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1329359 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
cbdf82746a9ea2a8f8549e3f6bf3e0671217ed43,2014-04-06T15:23:32Z,"['java/optional/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/optional/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-590: Rename rank to score and forbid duplicate column names for the Lucene plugin; commit derby-590-18-aa-cleanupAPI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1585313 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
0d4cef5892793a4c0e6b6cdb2daa139f16b5ca5f,2013-12-18T13:29:51Z,['java/tools/org/apache/derby/impl/tools/dblook/DB_Trigger.java'],"DERBY-6387: Incorrect ordering of triggers in dblook

Order the triggers by the CREATIONTIMESTAMP column so that dblook
produces a script that recreates the triggers in the same order as
they were originally created.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1551940 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
a72ebf9def427bd0e3838eb0e3fa9c3266e88297,2015-07-17T00:13:38Z,['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java'],"DERBY-6807: XXE attack possible by using XmlVTI and the XML datatype


I believe that, when a Java Security Manager is in place, the XML Parser
instantiated by SqlXmlUtil obeys the policies defined by that security
manager, and hence is not vulnerable to XXE attacks (in the sense that
the only attacks that will succeed are those which are permitted by the
security policy).

But when a Java Security Manager is not in place, the SqlXmlUtil code
could be more secure.

This change modifies SqlXmlUtil so that it can detect that there is no
active Security Manager, and, if so, it now disables external entity
expansion and enables FEATURE_SECURE_PROCESSING.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1691461 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
706f2eb0fd89eeb1e6d070ca4e6ff14c466b1a31,2013-04-30T16:17:32Z,"['java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java']","DERBY-6206: Cleanup mutability issues in BaseActivation.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1477711 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ad188f4439279260a6246a876e8ddb5ddd0c8f28,2012-09-06T19:45:37Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5912; testIsValidImplemented fails for NetworkServer in some slow running machines/configurations
  This commits the following changes:
  - changes the timeout in ConnectionMethodsTest from isValid(1) to isValid(200) and adds a comment
  - updates the comment in ConnectionTest so it refers to ConnectionMethodsTest
  - has commented out sleep code in DRDAConnThread that can be uncommented to test this
  - adds a fixture, testIsValidWithTimeout, that is disabled by having an 'x' in front of it, to ConnectionTest. 


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1381731 13f79535-47bb-0310-9956-ffa450edef68
",myrnavl@apache.org,Myrna van Lunteren
ca3a6774d4a2a0a64b72a312bcd0bf865ff81b6d,2012-04-04T06:55:01Z,['java/drda/org/apache/derby/drda/NetServlet.java'],"DERBY-5328: The private fields of the NetServlet can be changed by multiple threads, giving rise to race conditions and corruptions.

Made doGet synchronized.

Patch file: derby-5328-02-aa-synchronized_doget.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1309264 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
666ab8f5e87e16bb44c88dc04acbb77b53b6b7ab,2012-07-01T17:27:54Z,['java/client/org/apache/derby/client/net/NetConnectionReply.java'],"DERBY-5826: Remove unused methods in NetConnectionReply class

This patch was contributed by Mohamed Nufail (nufail56 at gmail dot com)

This change removes several unused methods from the NetConnectionReply
class. Code inspection of the NetConnectionReply class reveals that
the following methods are not used at all:

- verifyConnectReply(int codept)
- readDummyExchangeServerAttributes(Connection connection)
- checkRequiredObjects(boolean receivedFlag, boolean receivedFlag2, boolean receivedFlag3, boolean receivedFlag4, boolean receivedFlag5, boolean receivedFlag6)
- checkRequiredObjects(boolean receivedFlag, boolean receivedFlag2, boolean receivedFlag3, boolean receivedFlag4, boolean receivedFlag5, boolean receivedFlag6, boolean receivedFlag7)

The change also removes the method parseConnectError() which is being used
only by the removed method verifyConnectReply(int codept)


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1355959 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
06a9c554ac150214a8deef2aca4c4d9fc9c33e3a,2012-05-07T08:35:50Z,['java/client/org/apache/derby/client/am/LogicalConnection.java'],"DERBY-5561: Race conditions in LogicalConnection checking for a null physical connection 

Changes:
 o converted docs to Javadoc
 o removed stale doc
 o corrected/improved some comments
 o made physicalConnection_ package-private
 o made checkForNullPhysicalConnection final

Patch file: derby-5561-2a-minor_cleanups.diff



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1334919 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
03937751e49fccb943d80e089452155250ac1b7d,2012-10-17T07:45:15Z,"['java/engine/org/apache/derby/iapi/reference/ClassName.java', 'java/engine/org/apache/derby/iapi/services/compiler/ClassBuilder.java', 'java/engine/org/apache/derby/iapi/services/compiler/MethodBuilder.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCClass.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCMethod.java', 'java/engine/org/apache/derby/impl/sql/compile/ActivationClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/ExpressionClassBuilder.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstantActionActivation.java']","DERBY-5947: Factor out common code from generated classes

Remove three generated fields and six corresponding accessor methods
with a single field (an instance of a class with three fields) and one
getter method.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1399139 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
b5b131644fb270152a47fd3d52d7e7bd2334a2c1,2013-05-28T22:00:29Z,"['java/demo/nserverdemo/SimpleNetworkClientSample.java', 'java/demo/simple/SimpleApp.java', 'java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java']","DERBY-6213: Convert 1.4 and 1.5 to 1.6 in source/target clauses of compilation tasks.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487133 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
221abb6f4e9735b1333db4ae5d2ee7caa7f5b9e1,2013-07-19T09:35:17Z,['java/engine/org/apache/derby/iapi/util/PropertyUtil.java'],"DERBY-6296: Simplify PropertyUtil using Properties.stringPropertyNames()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1504809 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
591ff9f9781e2b2dc2964366dc118d14ad3adff4,2014-08-05T19:20:50Z,"['java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java']","DERBY-6565 ROW_NUMBER function throws NullPointerException in UPDATE statement

Patch *derby-6565-forbid.diff* which makes it illegal to use window
functions in the update source. Adds a new test for this error
condition. Also cleans up some Javadocs and modernizes some loops.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1615982 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
2054f14589be2dc4c5f3394eafe318b1644c613b,2013-02-20T21:16:58Z,"['java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UntypedNullConstantNode.java']","DERBY-6075: Use modern collections in impl/sql/compile

Fix javadoc warnings.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1448421 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
1484b835a3fba878d1cba9f7c6ab3dfa3d28fd5a,2014-01-27T13:36:12Z,"['java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-3155: Forbid subqueries in the WHEN [ NOT ] MATCHED clauses of MERGE statements; commit derby-3155-19-aa-forbidSubqueriesInMatchedClauses.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1561671 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
d34c2cebd37dfde8d2114c95bdc819d2b2242bae,2011-11-17T05:08:32Z,['java/drda/org/apache/derby/impl/drda/ClientThread.java'],"DERBY-5347 Derby loops filling logs and consuming all CPU with repeated error: java.net.SocketException: EDC5122I Input/output error.

If accept does not block and continues to throw errors, retry and log the exception two more times  times at 1 second intervals and then if it still fails, shutdown the server.





git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1203050 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
bbb545efcd8af459b33241813e9eb3f1bdda7fde,2013-07-09T18:07:05Z,"['java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregateResultSet.java']","DERBY-6267: Count row sources in optimizer overrides at optimize() time rather than bind() time; add more tests for optimizer overrides; tests passed cleanly on derby-6267-02-aa-moreTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1501411 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8b3b6fcb2bada1427923ec621fad772d7fc33b33,2013-05-29T17:33:10Z,['java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java'],"DERBY-6213: Make BasicClientConnectionPoolDataSource40 public.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487559 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
c87505f3e4889ce4301a354eb39e1d934cb3a7f3,2013-01-03T20:04:33Z,"['java/engine/org/apache/derby/iapi/reference/Limits.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-6033: Remove the arbitrary limit on the number of parameters allowed for a Derby routine.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1428567 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3130800aa6986b70e5c8072220b27c655103a1ee,2014-07-15T21:33:52Z,"['java/engine/org/apache/derby/impl/sql/catalog/SYSCONSTRAINTSRowFactory.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_Check.java', 'java/tools/org/apache/derby/impl/tools/dblook/DB_Key.java']","DERBY-6661: Make dblook recognize deferrable constraints; tests passed cleanly on derby-6661-01-aa-recreateDeferrableConstraints.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1610858 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
8269b78486a5ad7fa66942b2f47a0cce1ea3c968,2013-01-09T01:24:35Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientPooledConnection40.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection40.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/Connection.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl40.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnection40.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSource.java', 'java/client/org/apache/derby/jdbc/ClientBaseDataSourceRoot.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDataSource.java', 'java/client/org/apache/derby/jdbc/ClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java']","DERBY-5955 Prepare Derby to run with Compact Profiles (JEP 161) 

Patch derby-5955-client-restructure-02 (as modified by the delta patch
derby-5955-client-restructure-02-delta.diff) restructures the client
data source hierarchy in anticipation for the non-JNDI dependent
datasources to be introduced into Derby to work on SE with compact
profile 2. The current API is kept as is.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1430648 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
12cc1f1d8108524e2c62726efc09847365f624c5,2012-11-23T08:55:30Z,['java/engine/org/apache/derby/impl/sql/execute/LastIndexKeyResultSet.java'],"Fix javadoc warning.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1412780 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
699ab55ab351ad2c32179166360699ec47a2c38d,2014-07-10T18:34:51Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6256: Improve javadoc for constructor for XmlVTI; commit derby-6256-07-aa-constructorJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1609549 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b862050f562929ba2760f051fa984da04d2750c6,2013-10-09T16:40:31Z,"['java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/BlobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorInputStream.java', 'java/client/org/apache/derby/client/am/ClobLocatorReader.java', 'java/client/org/apache/derby/client/net/NetAgent.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-5317: Detect attempts to reuse a connection that in the middle of sending a request to the server. Use this to provide a better error message and avoid the NPE.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1530704 13f79535-47bb-0310-9956-ffa450edef68
",dyre@apache.org,Dyre Tjeldvoll
7139f7c7802892c820ead435823795030e7209f0,2014-07-01T08:30:32Z,['java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java'],"DERBY-6634: Improve test coverage of SqlXmlUtil.java

Remove impossible code paths so that they don't show up as untested
code. In particular:

- Remove some unnecessary null tests. The callers already make sure
  that the arguments cannot be null, so it's better to skip the checks
  so that potential future bugs get reported as NPEs instead of being
  silently ignored.

- Remove code that serializes lists of atomic values. Derby only
  supports queries that return single atomic values.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1607017 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
d847cede36f79454a35275a76801ace0a981d32d,2014-03-23T00:17:56Z,"['java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneListIndexesVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneQueryVTI.java', 'java/engine/org/apache/derby/impl/optional/lucene/LuceneSupport.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/vti/VTITemplate.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-590: First increment of support for Lucene indexing of Derby text columns; tests passed cleanly on derby-590-01-am-publicAccessToLuceneRoutines.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1580387 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b54db0f3cad0f9345c574eb8ba8c53d772462b8a,2012-06-06T11:53:23Z,"['java/client/org/apache/derby/client/am/SQLExceptionFactory40.java', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/am/Sqlca.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java']","DERBY-2601: Server SQLException error codes are not returned to client

Encode the error code in the SQLCODE value sent from the server. This
value used to be -1 for all errors, but the client was OK with any
negative value. Now it's a negative value equal to -(errorCode+1).

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1346833 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8072e989d9a72e1e7cdb185934eee3a52b21264c,2013-02-01T11:40:50Z,"['java/engine/org/apache/derby/impl/sql/catalog/TabInfoImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/store/access/btree/ControlRow.java']","DERBY-6063: Access static variables by class name in TabInfoImpl, InsertResultSet and ControlRow

Replaced occurrences of accessing static variables via instances with access via class names.
Removed unused meothod in ControlRow.
Removed a few unused local variables.

Patch file: derby-6063-1a_statics-by-class_and_unused_method.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1441396 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
6f55de19d898430fec96d3041a03b25fd218454f,2013-12-10T19:06:32Z,['java/engine/org/apache/derby/vti/XmlVTI.java'],"DERBY-6256: Fix typo in javadoc header of XmlVTI; commit derby-6256-05-aa-javadocTypo.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1549938 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
638cea5ec7403363f454b7f82580f82125adca81,2013-08-29T08:01:56Z,"['java/engine/org/apache/derby/impl/sql/catalog/XPLAINResultSetDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/XPLAINResultSetTimingsDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/XPLAINScanPropsDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/XPLAINSortPropsDescriptor.java', 'java/engine/org/apache/derby/impl/sql/catalog/XPLAINStatementTimingsDescriptor.java']","DERBY-6318: Simplify setting of possibly null parameters in XPLAIN descriptors

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1518534 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
0eb98f10af965e418aa0b5f7e350482e8db23114,2012-05-21T21:02:27Z,"['java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/HalfOuterJoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java']","DERBY-4631 Wrong join column returned by right outer join with NATURAL or USING and territory-based collation 

To recap this issue, SQL:2003 says that the join columns in a natural join or in a named columns join should be added to the select list by coalescing the column from the left table with the column from the right table 

Derby has it's on logic to retrieve the join column values. It always picks up join column's value from the left table when we are working with natural left outer join and it picks up the join column's value from the right table when we are working with natural right outer join. 

But this logic does not work for all cases for right outer join. The fix provided in this patch will pick the join column's value based on following logic(this logic mimics the functionality of COALESCE) 
1)if the left table's column value is null then pick up the right table's column's value. 
2)If the left table's column value is non-null, then pick up that value 




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1341204 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
aba4ea11771ffe282e3b19820b5af7cd11de5782,2014-06-24T07:37:46Z,"['java/tools/org/apache/derby/impl/tools/planexporter/CreateXMLFile.java', 'java/tools/org/apache/derby/tools/PlanExporter.java']","DERBY-6629: Restrict privileged operation in CreateXMLFile

Remove the privileged operation in the CreateXMLFile class. Instead, let
the caller do the privileged operation and pass in a Writer object that
CreateXMLFile can write the file to.

Make the tests invoke the plan exporter tool via its main class instead
of calling the internal API.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605021 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
cd1db93397d46667e38f7b7b06ccd4099189429e,2013-02-06T17:39:42Z,"['java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java']","DERBY-6000: Fix bug on contruction of BatchUpdateExceptions.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1443086 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
4f3aa606000212a5f59285af8029db8243bc62be,2012-10-01T11:50:53Z,['java/client/org/apache/derby/client/am/Configuration.java'],"DERBY-5914: Incorrect list of compatible JRE versions in client trace #2

Removed 1.4 and added 1.7.

Patch file: derby-5914-1a-versions.diff


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1392294 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
0972a574699cd885a2053ea1870bfabe309597ef,2012-07-10T12:27:05Z,['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java'],"DERBY-5847: Clean up IDE warnings in DRDAConnThread

Clean up performance warnings:

- Use System.arraycopy() instead of manual copy
- Use StringBuilder instead of StringBuffer where synchronization is
  not needed
- Don't use string concatenation in arguments to StringBuffer.append()
- In convertToHexString(), replace use of StringBuffer with
  StringUtil.toHexString()

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1359635 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
5acdc77499679b29bd67bc95702792f1d3ac9937,2015-08-05T02:12:49Z,['java/shared/org/apache/derby/shared/common/error/MessageUtils.java'],"DERBY-6801: Implement MessageUtils class so client/server can share error code.

This patch was contributed by Abhinav Gupta (abhinavgupta2004 at gmail dot com)

This change implements a new class in the ""shared"" portion of the Derby code
tree. The MessageUtils class contains code which was refactored from various
Engine and Network Server classes, including MessageService and DRDAConnThread.

The purpose of this class is to encapsulate certain details about how error
messages and exceptions are encoded and decoded when passed between the Network
Server and the Network Client, so that the Network Client can decode the
error information to access the arguments to the message when needed.

Nothing about the protocol between the client and server is changed, nor is
anything about the encoding of the data changed. The only change is to make
the logic which implements the encoding/decoding available to both the server
and the client so that they can both use it without duplicating the logic.

As of this change, nothing uses the MessageUtils class. That is, this change
adds the new class, but doesn't remove any of the existing implementations in
the Engine and Network Server code bases.

Follow-on changes will (incrementally) change the Engine, the Network Server,
and the Network Client to use the code in this new MessageUtils class.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1694134 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
74e2f88a4d2b9424c78af045bae606d331ef97bd,2012-05-08T15:10:18Z,"['java/engine/org/apache/derby/impl/store/raw/data/AllocExtent.java', 'java/engine/org/apache/derby/impl/store/raw/data/AllocPage.java']","DERBY-5234: Fix database corruption during table compression.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1335570 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
5b2aa2714ba535b31d8b4ea7ade912f290f633f2,2013-05-29T12:39:07Z,['java/demo/simplemobile/SimpleMobileApp.java'],"DERBY-6213: Remove SimpleMobileApp.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1487461 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
b69f59c6fecd655d7bf7000505eef9ac31d979be,2014-06-25T16:24:40Z,"['java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java']","DERBY-6623 DatabaseMetaDataTest fails intermittently

Patch *derby-6623-2a*, which adds an extra ordering [1] using
IndexDescriptor's *getBaseColumns* method as input to
*Arrays.toString()*. This imposes a total order on the rows returned
from the metadata query, so hopefully we get rid of the
Heisenbug. Note that this caused another unique constraint to be
chosen in the example that failed.

[1] *after* the number of columns in the index: small numbers
    before higher numbers since constraints with a small number of
    columns are considered better

The ordering makes sorting stable iff:

    - the row layout doesn't change
    - no indexes or constraint are added or removed.

Mostly, indexes with early base columns will be sorted first (and
selected as best), although not always: ""[11,1]"" sorts before ""[2,1]"",
but the main thing is the same index will be selected for the same
(unchanged) database always.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1605478 13f79535-47bb-0310-9956-ffa450edef68
",dag@apache.org,Dag H. Wanvik
de00d25c2ab570533e28acc2495b671723ec5e8e,2014-06-18T12:54:52Z,"['java/engine/org/apache/derby/impl/load/ImportResultSetMetaData.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java']","DERBY-6621: Reduce the visibility of two methods; commit derby-6621-01-aa-reduce1.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1603436 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
9548d383f0272d5584d11ffa9330abb85bea9837,2013-05-22T06:13:15Z,"['java/engine/org/apache/derby/iapi/types/BigIntegerDecimal.java', 'java/engine/org/apache/derby/iapi/types/BinaryDecimal.java', 'java/engine/org/apache/derby/iapi/types/CDCDataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataValueDescriptor.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLClob.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/UserType.java']","DERBY-5840: Clean up compiler warnings introduced by using Java 5 language features

Make DataValueDescriptor.setBigDecimal() take a BigDecimal instead of
a Number. The argument is always null or a BigDecimal instance, but
its declared type had to be Number in order to compile on CDC, which
is no longer supported.

By making the declared type BigDecimal, we avoid an unchecked cast to
Comparable in NumberDataType's implementation of the method.

Also remove the classes that contain the CDC-specific implementation
of the DECIMAL data type.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1485076 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
8ae4e1581db22486e8433b83c1d8381cd0d3e1cd,2014-04-01T09:04:37Z,"['java/engine/org/apache/derby/impl/io/CPFile.java', 'java/engine/org/apache/derby/impl/io/DirFile.java', 'java/engine/org/apache/derby/impl/io/InputStreamFile.java', 'java/engine/org/apache/derby/impl/io/JarDBFile.java', 'java/engine/org/apache/derby/impl/io/vfmem/VirtualFile.java', 'java/engine/org/apache/derby/io/StorageFile.java']","DERBY-6534: Remove StorageFile.getURL() and its implementations

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1583578 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
813aa38e55d9dd4b54c5e28bb189318afe8d8526,2014-02-07T00:00:20Z,"['java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/net/NetConfiguration.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetConnectionReply.java', 'java/client/org/apache/derby/client/net/NetConnectionRequest.java', 'java/client/org/apache/derby/client/net/NetCursor.java', 'java/client/org/apache/derby/client/net/NetPackageRequest.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/drda/org/apache/derby/impl/drda/CodePoint.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java']","DERBY-4805(Increase the length of the RDBNAM field in the DRDA implementation)

This commit will allow RDBNAM to be 1024 bytes, thus lifting the limit from current 255bytes. I have changed the existing boundary test case to test for the new limit but the tests now use in-memory db jdbc url since on disk long urls were running into problem because of OS/file system limitation on the length of file name length.

As for newer client(version 10.11 and higher) going against an older server(10.10 and lower which will not have the fix for DERBY-4805 and hence will not accept the longer RDBNAM) with new RDBNAM limit, it will result in protocol exception. This is because when the client makes the first connect request to server, it has no way of knowing what server version it is talking to and hence there is no way to catch the length violation on the client side at this point.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1565491 13f79535-47bb-0310-9956-ffa450edef68
",mamta@apache.org,Mamta Satoor
584c0fb11be30148e06b54818948e697acf96ce1,2014-01-09T14:18:53Z,"['java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java']","DERBY-6447: Use StrictMath for more functions in SYSFUN

Make LOG10, COSH, SINH and TANH use the corresponding methods in
java.lang.StrictMath instead of custom implementations.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1556810 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
c8563f47c66aef1867646485a70613090615c403,2012-08-31T10:01:00Z,"['java/client/org/apache/derby/client/am/GetFileInputStreamAction.java', 'java/client/org/apache/derby/client/am/GetResourceBundleAction.java', 'java/client/org/apache/derby/client/am/GetResourceInputStreamAction.java', 'java/client/org/apache/derby/client/am/GetSystemPropertiesAction.java', 'java/client/org/apache/derby/client/am/SetAccessibleAction.java']","DERBY-5913: Remove unused classes [GS]et*Action in client.am

Removed unused classes.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1379390 13f79535-47bb-0310-9956-ffa450edef68
",kristwaa@apache.org,Kristian Waagan
e474e5100c78811d8408ccf8e04c81feb8b0369d,2012-07-19T08:54:35Z,"['java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java']","DERBY-5840: Use for-each loops in the network server code

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1363264 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
ee16f470126e0491b3ff6d1a78082d37614ce4f0,2013-06-03T08:54:18Z,"['java/engine/org/apache/derby/impl/services/cache/CacheStat.java', 'java/engine/org/apache/derby/impl/services/cache/Clock.java', 'java/engine/org/apache/derby/impl/services/cache/ClockFactory.java']","DERBY-6240: Remove Clock cache manager from trunk

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1488903 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
77b6e859ea23e8162d311b3af9843c73a88742ae,2014-03-14T15:20:45Z,['java/engine/org/apache/derby/impl/sql/compile/MergeNode.java'],"DERBY-3155: Eliminate redundant copies of columns in the select list of the driving left join for MERGE statements; commit derby-3155-43-aa-eliminateDuplicateColumnRefs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1577566 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
aa609d54c3d69d8286bef629ded719b2ddbd0523,2011-12-09T18:19:58Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UserDescriptor.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLVarchar.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSUSERSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/shared/org/apache/derby/shared/common/reference/SQLState.java']","DERBY-866: Add SYSUSERS table.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1212562 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
ce664ad502539e6a1065879be1b2c56ed52c603d,2011-11-21T20:20:47Z,['java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java'],"DERBY-5488: Rename SCOPE_CATLOG to SCOPE_CATALOG and add a redundant trailing SCOPE_CATLOG column to the ResultSet returned by DatabaseMetaData.getColumns().

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1204684 13f79535-47bb-0310-9956-ffa450edef68
",rhillegas@apache.org,Richard N. Hillegas
3fe228177494b1d94eba1acce545fbc468f94452,2012-02-25T00:32:10Z,['java/engine/org/apache/derby/jdbc/XATransactionState.java'],"DERBY-5552 Derby threads hanging when using ClientXADataSource and a deadlock or lock timeout occurs

Code patch contributed by Brett Bergquist - brett at thebergquistfamily dot com 
Derby will no longer null out the connection on lock timeout or deadlock.

I added test to verify proper behavior for the conneciton and transaction
state after the lock timeout occurs.




git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1293494 13f79535-47bb-0310-9956-ffa450edef68
",kmarsden@apache.org,Katherine Marsden
d868eed096b89da2862d87b898deddb379eba1c2,2012-12-12T09:14:44Z,"['java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/compile/DistinctNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctGroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DistinctScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericResultSetFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/GroupedAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/ScalarAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SortResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/VTIResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/WindowResultSet.java']","DERBY-6003: Create row templates outside of the generated code

Make SortResultSet, VTIResultSet, aggregates and WindowResultSet use an
ExecRowBuilder instead of a generated method to allocate row templates.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1420579 13f79535-47bb-0310-9956-ffa450edef68
",kahatlen@apache.org,Knut Anders Hatlen
43d83c685ec81455c5f5eb12a0eb0476fa331bd6,2016-12-03T03:54:46Z,"['java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java']","DERBY-6918: Problem with schema name containing a period

When processing DELETE statements in a database schema including
referential integrity constraints that specify ON DELETE CASCADE,
it is easiest to keep the schema name and table name separate,
rather than pasting them together into a compound name joined with
a period, because pasting them together results in ambiguity about
which period separates the schema name from the table name, and
which period was simply part of the schema name proper.

Adjusted the logic in DeleteNode and DMLModStatementNode accordingly.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1772428 13f79535-47bb-0310-9956-ffa450edef68
",bpendleton@apache.org,Bryan Pendleton
4253dcf4aa37dc64cf7235d494cd2f00f72e678a,2019-08-18T23:21:51Z,['build.xml'],"DERBY-7052: Streamline dependencies in the top build script; commit patch submitted by Davide Grandi.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1865408 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
fa53c9725bf1df69cc46070f1b29e2fd32f23641,2019-07-26T02:45:32Z,['build.xml'],"DERBY-7050: Remove dead engine_169_opt target, a legacy of an old solution for small device support; commit patch submitted by Davide Grandi.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1863766 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
6fdd3618ce674ca410511035935297556705f50e,2019-06-25T13:23:20Z,['build.xml'],"DERBY-7046: Add derbytools.jar to the classpath scribbled into the manifest of derbynet.jar; commit derby-7046-01-aa-addToolsJarToServerManifest.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1862062 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
577c3bbe9ea213ff96629fb818d25b689c00340e,2019-05-14T02:10:42Z,['build.xml'],"DERBY-7038: Revert the javadoc build to use the <javadoc> task rather than the <exec> task; commit derby-7038-02-aa-use-ant-javadoc-task.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1859203 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8406131eedafdd3461e1337eecb791cea44cd4b9,2019-05-12T16:32:58Z,"['BUILDING.html', 'build.xml']","DERBY-7038: Require ant version 1.10.6 or higher in order to build Derby; commit derby-7038-01-aa-require-Ant-1.10.6.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1859158 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c4413121038113efde36e8717f827a5b825bd572,2019-04-01T13:22:39Z,"['java/org.apache.derby.engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/AggBuiltinTest.java']","DERBY-7041: Do not create persistent dependencies between views and the system-supplied statistical aggregates; commit derby-7041-01-aa-omitDependencyOnSystemSuppliedAggregate.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1856730 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5a9ae97502571ed86f1770fdfeb1a4673045e87d,2019-03-31T22:03:59Z,"['maven2/client/pom.xml', 'maven2/engine/pom.xml', 'maven2/net/pom.xml', 'maven2/optionaltools/pom.xml', 'maven2/tools/pom.xml']","DERBY-7040: Add hard module dependencies to the maven poms which we publish at the end of a release; commit derby-7040-01-aa-addDependenciesToPOMs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1856701 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
bd246fc89d4fce3f82f8344074ecb8a4713418df,2019-03-14T13:42:40Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-7010: Fix the verification link generated when we transform the release notes; commit derby-7010-24-aa-fixVerifyLink.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855520 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c14946ce10c7c4d47424f22bcd3832677b251c86,2019-03-13T00:56:55Z,['releaseSummary.xml'],"DERBY-7010: Update the release page link to the KEYS file per new advice from infrastructure; commit derby-7010-22-aa-updateLinkToKEYS.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855362 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
fd7fe847e0d020a2c8ce8ee2c545a93030e5a0e8,2019-03-13T00:45:44Z,['STATUS'],"DERBY-7010: Update STATUS page; commit derby-7010-21-aa-updateSTATUSpage.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855360 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
38707bf505fb42ce7d5be9a443d480aeee158e64,2019-03-12T14:09:06Z,"['RELEASE-NOTES.html', 'releaseSummary.xml']","DERBY-7010: Change http: to https: in releaseSummary.xml for security reasons; commit derby-7010-19-aa-changeHttpToHttpsInReleaseSummary.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855326 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
de6d306a22d80401445641c49d379a65f1f85995,2019-03-12T13:55:28Z,['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java'],"DERBY-7010: Change links on future download pages from http: to https:; commit derby-7010-18-aa-changeHttpToHttpsOnReleasePage.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855325 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
fd324184c9478a0c690b7a4063d33d327f298c85,2019-03-11T14:08:17Z,['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/OldVersions.java'],"DERBY-7010: Add 10.15.1.3 as the starting point of an upgrade test trajectory; commit derby-7010-16-aa-add10.15.1.3ToUpgradeTest.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855233 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0ab1a41d75f18a55d1b623cb458385ac151519d1,2019-03-10T22:59:28Z,['maven2/pom.xml'],"DERBY-7010: Add commons module to the list of modules deployed by release publication; commit derby-7010-15-aa-addCommonsModuleToDeploymentPOM.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1855177 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5c7cca4a5859b10b0f51eccf7882b313dee092c9,2019-03-07T15:55:19Z,['maven2/war/pom.xml'],"DERBY-7010: Update the pom used to deploy derby.war to the staging repos; commit derby-7010-12-aa-updateWarPom.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1854986 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
e561f0a07af731fe1b75be5837fc2dc0439f545d,2019-03-06T14:55:33Z,"['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java', 'tools/release/build.xml']","DERBY-6973: Change the name of the SHA-512 extension from .sha-512 to .sha512; commit derby-6973-02-aa-renameChecksumFiles.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1854928 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
9fe9eeef6ae52dc696033174d999c2811ecab772,2019-01-31T03:27:31Z,['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/PhaseChanger.java'],"DERBY-7031: Adjust the upgrade test to handle 10.15 (and later) as starting points for the upgrade tests; commit derby-7031-01-aa-adjustFor10.15.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1852567 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
4dd6ea9b3d10ad7a62fc898c8c03cc025fe5d451,2019-01-21T00:35:59Z,"['java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.runner/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tools/module-info.java']","DERBY-7028: Add borders to module diagrams in an html5-compliant way; commit derby-7028-02-aa-html5borders.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1851720 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
43c8930331a4ca711482d5c1ec3dbb01ddce35df,2019-01-20T23:46:57Z,"['build.xml', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.runner/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tools/module-info.java']","DERBY-7028: Put module diagrams in different directories, depending on whether the javadoc is being built by JDK 11 or pre JDK 11; commit derby-7028-01-aa-jdkSpecificImageLocations.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1851719 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
6688719b2b32f93d797910703db5c7038f3fbd74,2019-01-06T18:10:21Z,"['java/org.apache.derby.engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'tools/ant/properties/release.properties']","DERBY-7010: Bump release number on trunk to 10.16.0.0; commit derby-7010-03-aa-bumpTrunkTo10.16.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1850581 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
3e358310cf18df2bb3d80851e221a1cb8550cf03,2019-01-05T17:23:49Z,"['RELEASE-NOTES.html', 'releaseSummary.xml']","DERBY-7010: Improve 10.15.1 release notes; commit derby-7010-02-aa-releaseNotesForExistingUsers.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1850504 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0da1510c94d226ba4800f82102feb8a85f510be3,2018-12-30T22:34:50Z,"['RELEASE-NOTES.html', 'releaseSummary.xml']","DERBY-7010: Check in initial version of release notes for 10.15.1; commit derby-7010-01-aa-initialReleaseNotes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1850006 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
d5ac4929dfbb134ae285f927e8d6c883dcc40df1,2018-12-10T01:34:43Z,['java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.xml'],"DERBY-3547: Correct previous canonicalization-supporting privilege; commit derby-3547-05-aa-fixCanonicalization.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1848543 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
dd14b455fb02eef2ec82aa34581ccc495c25e305,2018-12-09T22:51:05Z,['java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.xml'],"DERBY-3547: Add extra permission to that the engine can canonicalize file names on windows, as part of the test for system permissions; commit derby-3547-04-aa-canonicalizeFileNamesOnWindows.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1848540 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
3cdcbae8aa70ad04d0f022717db69e4f5b41dc86,2018-12-06T13:57:04Z,['java/org.apache.derby.tests/org/apache/derbyTesting/junit/BaseTestCase.java'],"DERBY-6945: Correct the classpath used on Windows by tests which spawn JVMs; commit derby-6945-63-aa-correctWindowsTestClasspath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1848312 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
ae6ae9749c9aafd22753fd42d48600b08b2ae1ac,2018-12-05T17:12:42Z,['build.xml'],"DERBY-6945: Add a top level target for running a single JUnit test class with the modulepath; commit derby-6945-62-aa-runOneJUnitTestWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1848228 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2190d6e76a4e7f70a20a583a7289a048566b7291,2018-12-02T15:28:49Z,"['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunList.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunSuite.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunTest.java']","DERBY-6998: Make it possible to run old harness tests on JDK 10 again; commit derby-6998-05-ab-use-java.specification.version.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1848004 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
94157c55cf4c3435f51ab9f9b3c374d5e572f856,2018-12-01T16:37:13Z,['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/suites/AllPackages.java'],"DERBY-7011: Add lang suite to short-circuited tests; commit derby-7011-02-aa-shortCircuitAfterLangSuite.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847903 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
befd49f3968d6b213779d9c54d919dc6d1c7e36a,2018-11-30T23:27:39Z,"['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/suites/AllPackages.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/BaseTestCase.java']","DERBY-7011: Short-circuit the Jenkins tests when running with the modulepath--in order to get more diagnostic information; tests ran cleanly on derby-7011-01-aa-shortCircuitAfterDerbyNetSuite.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847862 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
ae1112b2c104cb80369f81e5c1e11b76473ace83,2018-11-29T23:31:39Z,['build.xml'],"DERBY-6980: Add module diagrams for the client and runner modules to the public api; commit derby-6980-15-aa-addClientAndRunnerDiagramsToPublicAPI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847769 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
f1464f6fa548f095a970815ec76adfdb848045c4,2018-11-29T23:10:22Z,"['java/build/org/apache/derbyBuild/ReleaseNotesTransformer.java', 'releaseSummary.xml', 'tools/release/build.xml']","DERBY-6973: Replace MD5 checksums with SHA-512 checksums; commit derby-6973-01-aa-useSHA512.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847768 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
850a113226e21d376a6c227f9ff5c972f071fdac,2018-11-28T17:44:06Z,['build.xml'],"DERBY-7020: Make the release machinery pick up the current min.version value so that the generated user docs will report the correct minimum JDK version; commit derby-7020-02-aa-fixMinJDKVersionInDocs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847661 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
323c80efda5293f7a7aafc3936feeea6c6307db9,2018-11-28T15:51:56Z,"['NOTICE', 'build.xml', 'java/build/org/apache/derbyBuild/maintversion2props.java', 'java/build/org/apache/derbyPreBuild/ReleaseProperties.java', 'java/build/org/apache/derbyPreBuild/build.xml', 'java/demo/build.xml', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.runner/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tools/module-info.java', 'maven2/README.txt', 'maven2/SetDerbyVersion.java', 'maven2/commons/pom.xml', 'tools/release/build.xml']","DERBY-7020: Update release machinery to account for the re-location of files by the modularization work done on DERBY-6945; commit derby-7020-01-ab-updateReleaseMachinery.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1847648 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
037739dbf698de03acda311c5dd7d6532df34c0e,2018-11-18T23:56:51Z,"['bin/derby_common.bat', 'bin/setEmbeddedCP', 'bin/setEmbeddedCP.bat', 'bin/setNetworkClientCP', 'bin/setNetworkClientCP.bat', 'bin/setNetworkServerCP', 'bin/setNetworkServerCP.bat', 'bin/templates/derby_common.sh', 'java/org.apache.derby.tools/module-info.java']","DERBY-7016: Add derbyshared.jar to the CLASSPATH set by the Derby *CP scripts and set the MODULEPATH variable correspondingly; commit derby-7016-01-ab-addSharedModule-setModulepath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1846875 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
1ff489db57aeac4374b99935c56e1cdc08ea0d70,2018-11-18T20:22:41Z,['build.xml'],"DERBY-6980: Make the release machinery build the docs with the correct minimum JVM version; commit derby-6980-06-aa-updateMinimumJDK-inDocs.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1846856 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
d479b80ac19b07249049ad75257eeee1ea26d457,2018-11-07T14:07:07Z,"['java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.xml', 'java/org.apache.derby.server/org/apache/derby/drda/template.policy', 'tools/release/build.xml']","DERBY-3547: Replace source template.policy with four, more specific template policies; commit derby-3547-03-aa-removeTemplatePolicy.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1846022 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
56e10318bd336e0b74b50eacf4cda8d8410c08e3,2018-11-06T13:59:10Z,"['java/build/org/apache/derbyBuild/SecurityPolicyGenerator.java', 'java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.xml', 'java/org.apache.derby.engine/org/apache/derby/security/securityTests.properties', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/compatibility/VersionCombinationConfigurator.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ServerPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPAuthenticationTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/no_derby_internals.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withoutPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/replicationTests/Derby5937SlaveShutdownTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/tools/derbyrunjartest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/unit/fillLog.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/nwsvr.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/useprocessfalse.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/AssertFailureTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/AssertFailureTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest1.policy']","DERBY-3547: Convert the remaining test policy files into descriptors which are expressed as deltas from derby_tests.policy; commit derby-3547-02-aa-remainingTestPolicies.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1845919 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2e76233a14308e568208a562e88c8c9964860bcd,2018-11-04T14:44:41Z,"['build.xml', 'java/build/org/apache/derbyBuild/MessageBuilder.java', 'java/build/org/apache/derbyBuild/SecurityPolicyGenerator.java', 'java/org.apache.derby.engine/org/apache/derby/security/securityDocExample.properties', 'java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.dtd', 'java/org.apache.derby.engine/org/apache/derby/security/securityPolicies.xml', 'java/org.apache.derby.engine/org/apache/derby/security/securityProduct.properties', 'java/org.apache.derby.engine/org/apache/derby/security/securityTests.properties', 'java/org.apache.derby.server/build.xml', 'java/org.apache.derby.server/org/apache/derby/drda/server.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/derby_tests.policy']","DERBY-3547: Generate server.policy, derby_tests.policy, and DITA policy templates from descriptors which express policies as deltas from one another; commit derby-3547-01-ab-policyGenerator.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1845742 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
f68ebf2cbd7d48227b9260dbe167c2dfeb830248,2018-10-18T14:27:03Z,['build.xml'],"DERBY-6980: Give the internal javadoc an overview page with a legend which explains the color-coding scheme used by the module diagrams; commit derby-6980-02-aa-addOverviewPageToInternalJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1844245 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
a89b3b8f6288c0f301a530ae92d7c5459b74af32,2018-10-18T03:36:02Z,"['build.xml', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.runner/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tools/module-info.java', 'published_api_overview.html', 'tools/javadoc/moduleDiagrams/client.svg', 'tools/javadoc/moduleDiagrams/commons.svg', 'tools/javadoc/moduleDiagrams/engine.svg', 'tools/javadoc/moduleDiagrams/optionaltools.svg', 'tools/javadoc/moduleDiagrams/runner.svg', 'tools/javadoc/moduleDiagrams/server.svg', 'tools/javadoc/moduleDiagrams/tests.svg', 'tools/javadoc/moduleDiagrams/tools.svg']","DERBY-6980: Add module diagrams to the Derby javadoc; commit derby-6980-01-aa-moduleDiagramsInJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1844197 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
56e7418b9921c5439457462d1c19a531f002e48d,2018-10-03T14:22:34Z,['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SSLTestServerKey.key'],"DERBY-6998: Increase the lifetime of the certificate used by SSLTTest; commit derby-6998-04-aa-increaseCertificateLifetime.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1842727 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
aed08f8a7ffb34875a1e86ec89fd4ed19835d1c2,2018-09-27T00:16:28Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/JavaVersionHolder.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk100.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk110.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk111.java']","DERBY-6998: Re-enable encryption tests when running on Java 11; tests passed cleanly on derby-6998-03-aa-reenableEncryptionTestsOnJDK11.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1842064 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
be56126e1c1bff6c8003a4a818d3bfac68657aaf,2018-09-26T13:22:56Z,['build.xml'],"DERBY-6945: Add top level ant target for running the JUnit tests with a module path; commit derby-6945-61-aa-antTargetToRunJUnitTestsWithModules.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1842021 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
dffeb277932fd20c792b34e93aa9b3649b144152,2018-09-25T13:06:08Z,"['build.xml', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/NetServer.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk19.java']","DERBY-6945: Add a build target for running the old harness tests with a module path; commit derby-6945-60-aa-antTargetToRunOldHarnessTestsWithModules.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1841933 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8a7830f3ac7d5feb62674b33363ea49c2a4c1ad2,2018-09-24T13:11:08Z,"['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun.java']","DERBY-6945: Run JUnit All suite with a module path; commit derby-6945-59-ab-runAllSuiteWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1841845 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
887faf03f013db87d07b9296d5ed2dee177b2727,2018-09-14T19:23:58Z,"['java/org.apache.derby.commons/org/apache/derby/shared/common/info/ProductVersionHolder.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/compatibility/_Suite.java']","DERBY-6945: Disable the compatibility tests when running with the module path; commit derby-6945-58-aa-disableCompatibilityTestsWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840949 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5f5eba3e785d436ce03e0edfbd3ffa314fa79b5a,2018-09-14T12:07:04Z,"['java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.java']","DERBY-6945: Run the junit suite cleanly with a module path; commit derby-6945-57-aa-runJunitSuiteWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840913 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
1cf233ab3d437fb002b6d4f58e6e6ce0688c0e15,2018-09-13T17:56:56Z,['java/org.apache.derby.engine/module-info.java'],"DERBY-6945: Expose engine mbeans package to reflective access from the unnamed module; commit derby-6945-56-aa-mbeansWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840844 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c0a46723a32156db194f99f77fcc3b604011be26,2018-09-13T12:20:29Z,"['java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/tools/SysinfoLocaleTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/tools/_Suite.java']","DERBY-6945: Run tool suite with module path; commit derby-6945-55-aa-runToolSuiteWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840805 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
db54937b552620344f667eadc6348e362cacf4f9,2018-09-12T18:49:22Z,"['java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/AutoloadTest.java']","DERBY-6945: Fix JDBC driver autoloading when running with a module path; commit derby-6945-54-aa-driverAutoloading.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840736 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
3eb16a3d76ac7ec03b0fa52edb6659998e86795d,2018-09-11T23:43:36Z,['java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/UpgradeRun.java'],"DERBY-6945: Fix javadoc warning; commit derby-6945-53-aa-fixJavadocWarning.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840617 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
254dc7f2b66b3df013c43f5d21f2ba48da2a35ce,2018-09-11T13:25:40Z,"['java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.tools/module-info.java']","DERBY-6945: Run JUnit lang suite cleanly with a module path; commit derby-6945-52-aa-runLangSuiteWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840562 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c60829a816bab0b4ac6c55a6fa90a558f5a58830,2018-09-10T15:13:51Z,"['java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ShutDownDBWhenNSShutsDownTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/BasicSetup.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_10.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_6.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_9.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/PhaseChanger.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/UpgradeClassLoader.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/UpgradeRun.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/upgradeTests/Version.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/BaseTestCase.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/NetworkServerTestSetup.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/TestConfiguration.java']","DERBY-6945: Run upgrade tests with a module path; commit derby-6945-51-ab-runUpgradeTestsWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1840470 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
20d98876ef03d5f86e68e91a08124fc6884e8385,2018-09-03T15:00:27Z,"['java/org.apache.derby.commons/org/apache/derby/shared/common/reference/ModuleUtil.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunList.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunSuite.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/SysInfoLog.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk100.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jdk13.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/NetworkServerTestSetup.java', 'java/org.apache.derby.tools/module-info.java', 'java/org.apache.derby.tools/org/apache/derby/impl/tools/ij/util.java']","DERBY-6945: Make it possible to run the derbyall suite under the old test harness with a module path; commit derby-6945-50-aa-runOldTestHarnessWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1839969 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
24083643c35e9c5c78b6b71a50a169564f7c0bae,2018-09-02T12:53:38Z,"['java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/FileCompare.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/RunTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/harness/jvm.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/BaseTestCase.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/DerbyConstants.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/NetworkServerTestSetup.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/junit/SecurityManagerSetup.java', 'java/org.apache.derby.tools/org/apache/derby/impl/tools/sysinfo/Main.java']","DERBY-6945: Make it possible to run some Derby tests using the module path; commit derby-6945-49-aa-runSomeTestsWithModulePath.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1839878 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
04d32e4a344909d849f766aed390be48092493bb,2018-08-26T15:06:22Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyoptionaltools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyrun.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbytools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyoptionaltools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyrun.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/locales/DerbyModule.template', 'java/locales/module-info.template', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.client/org/apache/derby/info/client/DerbyModule.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.commons/org/apache/derby/info/shared/DerbyModule.java', 'java/org.apache.derby.commons/org/apache/derby/shared/api/DerbyModuleAPI.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageService.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/ModuleUtil.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.engine/org/apache/derby/info/engine/DerbyModule.java', 'java/org.apache.derby.engine/org/apache/derby/loc/build.xml', 'java/org.apache.derby.optionaltools/module-info.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/info/DerbyModule.java', 'java/org.apache.derby.runner/build.xml', 'java/org.apache.derby.runner/module-info.java', 'java/org.apache.derby.runner/org/apache/derby/run/info/DerbyModule.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.server/org/apache/derby/drda/server.policy', 'java/org.apache.derby.server/org/apache/derby/drda/template.policy', 'java/org.apache.derby.server/org/apache/derby/info/net/DerbyModule.java', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tests/org/apache/derby/info/tsting/DerbyModule.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ServerPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/no_derby_internals.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withoutPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/replicationTests/Derby5937SlaveShutdownTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/tools/derbyrunjartest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/unit/fillLog.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/nwsvr.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/useprocessfalse.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/AssertFailureTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest1.policy', 'java/org.apache.derby.tools/module-info.java', 'java/org.apache.derby.tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/org.apache.derby.tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/org.apache.derby.tools/org/apache/derby/info/tools/DerbyModule.java']","DERBY-6945: Make it possible to run the server with a module path, using the default security policy; commit derby-6945-48-ac-serverWithSecurityPolicy.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1839223 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
9ae3e17b15061da904f3e3d0315afd5edc9446fe,2018-08-09T15:01:23Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/locales/module-info.template', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.client/org/apache/derby/loc/client/clientmessagesProviderImpl.java', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.commons/org/apache/derby/loc/client/spi/clientmessagesProvider.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageService.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageUtil.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/JVMInfo.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/ModuleUtil.java', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.server/module-info.java', 'java/org.apache.derby.server/org/apache/derby/drda/server.policy', 'java/org.apache.derby.server/org/apache/derby/drda/template.policy', 'java/org.apache.derby.tests/module-info.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/ServerPropertiesTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/no_derby_internals.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withoutPerm.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/replicationTests/Derby5937SlaveShutdownTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/tools/derbyrunjartest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/unit/fillLog.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/nwsvr.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/useprocessfalse.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/AssertFailureTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/AssertFailureTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest1.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest1.policy', 'java/org.apache.derby.tools/module-info.java', 'java/org.apache.derby.tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/org.apache.derby.tools/org/apache/derby/impl/tools/sysinfo/Main.java']","DERBY-6945: Make engine, client, and tools localization logic work when Derby runs with a module path; commit derby-6945-47-aa-runModulesWithLocalizations.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1837739 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0b09cc33dfe8c60a63af8d9ddbe496b9ff014a55,2018-07-11T12:35:20Z,"['build.xml', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/org.apache.derby.tests/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy']","DERBY-7003: Add extra FilePermission to the jacoco test runs; tests passed cleanly on derby-7003-01-ab-extraJacocoPermission.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1835636 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8aa3bc0f5c9681db0b854482380378f66ec4be9f,2018-07-05T23:15:09Z,['build.xml'],"DERBY-6945: Correct the source and generated source root directories used by the jacoco target; commit derby-6945-46-aa-jacocoSourceRoots.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1835199 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
24ae80f6225d9073bd8cf03a70b81f286f185269,2018-07-04T16:20:11Z,"['java/org.apache.derby.engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/execute/DMLWriteResultSet.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/lucene/LuceneQueryVTI.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/lucene/LuceneSupport.java', 'java/org.apache.derby.server/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/org.apache.derby.tests/org/apache/derbyTesting/functionTests/tests/lang/IdentitySequenceTest.java']","DERBY-6945: Fix some javadoc warnings and a grammar LOOKAHEAD block; commit derby-6945-45-aa-fixWarnings.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1835064 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
69d9bb2e363fb2244a344dbc69613dcbce847e6a,2018-07-02T12:35:47Z,"['build.xml', 'tools/ant/properties/release.properties', 'tools/javadoc/publishedapi.ant', 'tools/javadoc/publishedapi_jdbc.ant']","DERBY-6945: Generate module-aware javadoc; tests passed cleanly on derby-6945-44-aa-moduleAwareJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1834841 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c0a56e1824eda0e894a787e17731e8aa0674f7da,2018-07-01T14:20:12Z,"['java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.server/module-info.java']","DERBY-6945: Publish a couple more packages in the public API; tests passed cleanly on derby-6945-43-aa-cleanupPublicAPIforJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1834793 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
7b2d24cf55d83aafe057604de987d9593eb27ca0,2018-06-30T21:39:29Z,"['build.xml', 'java/org.apache.derby.tests/build.xml', 'tools/ant/properties/dirs.properties']","DERBY-6945: Add generated source directory to facilitate the building of module-aware javadoc; tests passed cleanly on derby-6945-42-aa-cleanupTestJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1834766 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0e1cdc79b13d6be78cec7a4697b182809b0a76fc,2018-06-30T18:10:32Z,"['java/org.apache.derby.client/org/apache/derby/client/ClientDataSourceFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/FailedProperties40.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Sqlca.java', 'java/org.apache.derby.client/org/apache/derby/client/am/stmtcache/package.html', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/StandardException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/EngineType.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Property.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/FailedProperties40.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/types/BooleanDataValue.java', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/GenericClassInfo.java', 'java/org.apache.derby.engine/org/apache/derby/impl/sql/execute/rts/RealSetOpResultSetStatistics.java', 'java/org.apache.derby.engine/org/apache/derby/impl/store/access/btree/index/package.html', 'java/org.apache.derby.engine/org/apache/derby/mbeans/Version.java', 'java/org.apache.derby.engine/org/apache/derby/mbeans/VersionMBean.java']","DERBY-6945: Cleanup some header comments so that module-aware javadoc can be generated from the product codeline; commit derby-6945-41-ac-cleanupProductJavadoc.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1834756 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
cc457a99b575db678e490cfb1c916100bae31dd7,2018-06-25T23:19:49Z,"['java/build/org/apache/derbyBuild/JarDriftTest.java', 'tools/ant/properties/dirs.properties']","DERBY-6945: Change names of root directories in the generated tree so that they match their target modules; commit derby-6945-40-aa-generatedSource-dirNames.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1834384 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
6e42472cde249d8fe81a2ecfc75238b3d911424e,2018-06-14T23:29:38Z,"['java/org.apache.derby.engine/org/apache/derby/agg/Aggregator.java', 'java/org.apache.derby.engine/org/apache/derby/authentication/SystemPrincipal.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/AliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/DefaultInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/IndexDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/SequencePreallocator.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/Statistics.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/SystemProcedures.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/TypeDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/UUID.java', 'java/org.apache.derby.engine/org/apache/derby/database/Database.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/ConnectionInfo.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/Database.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/Factory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/OptimizerTrace.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/TriggerExecutionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/AuthenticationService.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnection42.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnectionControl.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredStatementControl.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/ConnectionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EmbeddedDataSourceInterface.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineResultSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/FailedProperties40.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/InternalDriver.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/ResourceAdapter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheManager.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/Cacheable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheableFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/context/Context.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/crypto/CipherFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/crypto/CipherFactoryBuilder.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/crypto/CipherProvider.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/daemon/DaemonFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/daemon/Serviceable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/diag/Diagnosticable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/AccessibleByteArrayOutputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/ArrayOutputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/CompressedNumber.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/CounterOutputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/DynamicByteArrayOutputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/FileUtil.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/FormatableInstanceGetter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/InputStreamUtil.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/Limit.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/LimitInputStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/LimitReader.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/RegisteredFormatIds.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/io/StreamStorable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/jmx/ManagementService.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/ClassFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/ClassFactoryContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/ClassInfo.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/GeneratedByteCode.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/GeneratedClass.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/GeneratedMethod.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/InstanceGetter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/loader/JarReader.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/locks/Latch.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/locks/LockFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/locks/LockOwner.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/locks/Lockable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/monitor/ModuleControl.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/property/PersistentSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/property/PropertyFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/uuid/UUIDFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/Activation.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/LanguageFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/ParameterValueSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/PreparedStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/ResultColumnDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/ResultDescription.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/Row.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/Statement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/dictionary/RoleGrantDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/execute/ExecAggregator.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/AccessFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/ColumnOrdering.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/Qualifier.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/RowUtil.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/SpaceInfo.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/StoreCostController.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/StoreCostResult.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/conglomerate/ScanManager.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/access/conglomerate/TransactionManager.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/raw/ContainerHandle.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/raw/ContainerLock.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/raw/Loggable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/store/raw/Undoable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/types/RawToBinaryFormatStream.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/types/Resetable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/util/StringUtil.java', 'java/org.apache.derby.engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/org.apache.derby.engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/org.apache.derby.engine/org/apache/derby/mbeans/JDBCMBean.java', 'java/org.apache.derby.engine/org/apache/derby/vti/AwareVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/ForeignTableVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/ForwardingVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/IFastPath.java', 'java/org.apache.derby.engine/org/apache/derby/vti/IQualifyable.java', 'java/org.apache.derby.engine/org/apache/derby/vti/Pushable.java', 'java/org.apache.derby.engine/org/apache/derby/vti/RestrictedVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/Restriction.java', 'java/org.apache.derby.engine/org/apache/derby/vti/StringColumnVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/VTIContext.java', 'java/org.apache.derby.engine/org/apache/derby/vti/VTIEnvironment.java', 'java/org.apache.derby.engine/org/apache/derby/vti/VTIMetaDataTemplate.java', 'java/org.apache.derby.engine/org/apache/derby/vti/VTITemplate.java', 'java/org.apache.derby.engine/org/apache/derby/vti/XmlVTI.java', 'java/org.apache.derby.engine/org/apache/derby/vti/package.html']","DERBY-6945: Cleanup more javadoc warnings; commit derby-6945-39-aa-javadocCleanup.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1833569 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
bc277cb9f9c04c54fea21812c8330473a9169bb9,2018-06-10T14:54:50Z,"['java/org.apache.derby.client/org/apache/derby/client/BasicClientDataSource.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientAutoloadedDriver.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientDataSourceInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientBlob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientCallableStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientCallableStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientClob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientMessageId.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientPreparedStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientResultSet.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Configuration.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Cursor.java', 'java/org.apache.derby.client/org/apache/derby/client/am/DateTime.java', 'java/org.apache.derby.client/org/apache/derby/client/am/DateTimeValue.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Decimal.java', 'java/org.apache.derby.client/org/apache/derby/client/am/EncryptionManager.java', 'java/org.apache.derby.client/org/apache/derby/client/am/FailedProperties40.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Lob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SQLExceptionFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Section.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SignedBinary.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SqlException.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SqlWarning.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Sqlca.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Utils.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Utils42.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAResource.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/drda/NaiveTrustManager.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ErrorStringBuilder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/MessageUtils.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/PublicAPI.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/StandardException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/BundleFinder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/LocaleFinder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageService.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageUtil.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/JVMInfo.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/ProductVersionHolder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Attribute.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Property.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/SQLState.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/sanity/SanityManager.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/stream/HeaderPrintWriter.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/stream/InfoStreams.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/util/ArrayUtil.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/api/LuceneIndexDescriptor.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/api/LuceneUtils.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/api/SimpleJsonUtils.java', 'java/org.apache.derby.optionaltools/org/apache/derby/optional/api/SimpleJsonVTI.java', 'java/org.apache.derby.server/org/apache/derby/drda/NetworkServerControl.java', 'java/org.apache.derby.server/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/org.apache.derby.server/org/apache/derby/impl/drda/ProtocolTestAdapter.java', 'java/org.apache.derby.server/org/apache/derby/impl/drda/package.html']","DERBY-6945: Cleanup javadoc warnings; commit derby-6945-38-aa-javadocCleanup.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1833280 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
f16c46cbdd5be8dd9bdcee935ec1f68970146478,2018-06-09T13:09:18Z,"['java/org.apache.derby.client/build.xml', 'java/org.apache.derby.client/module-info.java', 'java/org.apache.derby.client/org/apache/derby/client/BasicClientDataSource.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientAutoloadedDriver.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientConnectionPoolDataSourceInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientDataSourceFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientDataSourceInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientPooledConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientXAConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientXADataSourceInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/ClientXid.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Agent.java', 'java/org.apache.derby.client/org/apache/derby/client/am/AsciiStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/BlobLocatorInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/BlobLocatorOutputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/BlobOutputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ByteArrayCombinerStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/CachingLogicalConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/am/CallableLocatorProcedures.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientBlob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientCallableStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientCallableStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientClob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientMessageId.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientParameterMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientPreparedStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientResultSet.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientSavepoint.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClientTypes.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobLocatorInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobLocatorOutputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobLocatorReader.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobLocatorWriter.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobOutputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ClobWriter.java', 'java/org.apache.derby.client/org/apache/derby/client/am/CloseFilterInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ColumnMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Configuration.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ConnectionCallbackInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/am/CrossConverters.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Cursor.java', 'java/org.apache.derby.client/org/apache/derby/client/am/DateTime.java', 'java/org.apache.derby.client/org/apache/derby/client/am/DateTimeValue.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Decimal.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Diagnosable.java', 'java/org.apache.derby.client/org/apache/derby/client/am/DisconnectException.java', 'java/org.apache.derby.client/org/apache/derby/client/am/EncryptionManager.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ExceptionFormatter.java', 'java/org.apache.derby.client/org/apache/derby/client/am/FailedProperties40.java', 'java/org.apache.derby.client/org/apache/derby/client/am/FloatingPoint.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LOBStateTracker.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Lob.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogWriter.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalCallableStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalCallableStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalDatabaseMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalPreparedStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalPreparedStatement42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/LogicalStatementEntity.java', 'java/org.apache.derby.client/org/apache/derby/client/am/MaterialPreparedStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/MaterialStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/am/PreparedStatementCallbackInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ProductLevel.java', 'java/org.apache.derby.client/org/apache/derby/client/am/ResultSetCallbackInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SQLExceptionFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Section.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SectionManager.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SignedBinary.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SqlCode.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SqlException.java', 'java/org.apache.derby.client/org/apache/derby/client/am/SqlWarning.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Sqlca.java', 'java/org.apache.derby.client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/org.apache.derby.client/org/apache/derby/client/am/StatementCallbackInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/am/UnitOfWorkListener.java', 'java/org.apache.derby.client/org/apache/derby/client/am/UpdateSensitiveBlobLocatorInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/UpdateSensitiveClobLocatorInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/UpdateSensitiveClobLocatorReader.java', 'java/org.apache.derby.client/org/apache/derby/client/am/UpdateSensitiveLOBLocatorInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Utils.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Utils42.java', 'java/org.apache.derby.client/org/apache/derby/client/am/Version.java', 'java/org.apache.derby.client/org/apache/derby/client/am/XaException.java', 'java/org.apache.derby.client/org/apache/derby/client/am/stmtcache/JDBCStatementCache.java', 'java/org.apache.derby.client/org/apache/derby/client/am/stmtcache/StatementKey.java', 'java/org.apache.derby.client/org/apache/derby/client/am/stmtcache/StatementKeyFactory.java', 'java/org.apache.derby.client/org/apache/derby/client/am/stmtcache/package.html', 'java/org.apache.derby.client/org/apache/derby/client/net/CcsidManager.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl42.java', 'java/org.apache.derby.client/org/apache/derby/client/net/CodePoint.java', 'java/org.apache.derby.client/org/apache/derby/client/net/CodePointNameTable.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ConnectionReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ConnectionReplyInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ConnectionRequestInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/DssConstants.java', 'java/org.apache.derby.client/org/apache/derby/client/net/EbcdicCcsidManager.java', 'java/org.apache.derby.client/org/apache/derby/client/net/EncodedInputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/net/FdocaConstants.java', 'java/org.apache.derby.client/org/apache/derby/client/net/FdocaSimpleDataArray.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetAgent.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetCallableStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetConfiguration.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetConnectionReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetConnectionRequest.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetCursor.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetDatabaseMetaData.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetLogWriter.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetPackageReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetPackageRequest.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetResultSet.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetResultSet42.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetResultSetReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetResultSetRequest.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetSqlca.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetSqldta.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetStatement.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetStatementReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetStatementRequest.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXACallInfo.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAConnection.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAConnectionReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAConnectionRequest.java', 'java/org.apache.derby.client/org/apache/derby/client/net/NetXAResource.java', 'java/org.apache.derby.client/org/apache/derby/client/net/OpenSocketAction.java', 'java/org.apache.derby.client/org/apache/derby/client/net/PublicBufferOutputStream.java', 'java/org.apache.derby.client/org/apache/derby/client/net/Reply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/Request.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ResultSetReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ResultSetReplyInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/ResultSetRequestInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/StatementReply.java', 'java/org.apache.derby.client/org/apache/derby/client/net/StatementReplyInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/StatementRequestInterface.java', 'java/org.apache.derby.client/org/apache/derby/client/net/Typdef.java', 'java/org.apache.derby.client/org/apache/derby/client/net/Utf8CcsidManager.java', 'java/org.apache.derby.client/org/apache/derby/loc/client/clientmessagesProviderImpl.java', 'java/org.apache.derby.commons/build.xml', 'java/org.apache.derby.commons/module-info.java', 'java/org.apache.derby.commons/org/apache/derby/loc/client/spi/clientmessagesProvider.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/drda/NaiveTrustManager.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/DerbySQLIntegrityConstraintViolationException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ErrorStringBuilder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ExceptionFactory.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ExceptionSeverity.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ExceptionUtil.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/MessageUtils.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/PassThroughException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/PublicAPI.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/SQLWarningFactory.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/ShutdownException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/error/StandardException.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/BundleFinder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/LocaleFinder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageService.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/i18n/MessageUtil.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/JVMInfo.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/ProductGenusNames.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/ProductVersionHolder.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/info/PropertyNames.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Attribute.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/ClassName.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/ContextId.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/DRDAConstants.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/EngineType.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/JDBC40Translation.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Limits.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/MessageId.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Module.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/Property.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/SQLState.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/reference/package.html', 'java/org.apache.derby.commons/org/apache/derby/shared/common/sanity/AssertFailure.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/sanity/SanityManager.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/sanity/SanityState.tmpl', 'java/org.apache.derby.commons/org/apache/derby/shared/common/sanity/ThreadDump.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/security/SystemPermission.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/stream/HeaderPrintWriter.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/stream/InfoStreams.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/stream/PrintWriterGetHeader.java', 'java/org.apache.derby.commons/org/apache/derby/shared/common/util/ArrayUtil.java', 'java/org.apache.derby.commons/org/apache/derby/shared/package.html', 'java/org.apache.derby.engine/build.xml', 'java/org.apache.derby.engine/module-info.java', 'java/org.apache.derby.engine/org/apache/derby/agg/Aggregator.java', 'java/org.apache.derby.engine/org/apache/derby/authentication/SystemPrincipal.java', 'java/org.apache.derby.engine/org/apache/derby/authentication/UserAuthenticator.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/AliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/DefaultInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/Dependable.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/DependableFinder.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/GetProcedureColumns.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/IndexDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/ReferencedColumns.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/SequencePreallocator.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/Statistics.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/SystemProcedures.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/TriggerNewTransitionRows.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/TriggerOldTransitionRows.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/TypeDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/UUID.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/AggregateAliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/DecimalTypeIdImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/DefaultInfoImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/MethodAliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/OldRoutineType.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/ReferencedColumnsDescriptorImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/RowMultiSetImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/StatisticsImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/SynonymAliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/TypeDescriptorImpl.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/TypesImplInstanceGetter.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/UDTAliasInfo.java', 'java/org.apache.derby.engine/org/apache/derby/catalog/types/UserDefinedTypeIdImpl.java', 'java/org.apache.derby.engine/org/apache/derby/database/Database.java', 'java/org.apache.derby.engine/org/apache/derby/diag/ContainedRoles.java', 'java/org.apache.derby.engine/org/apache/derby/diag/DiagUtil.java', 'java/org.apache.derby.engine/org/apache/derby/diag/ErrorLogReader.java', 'java/org.apache.derby.engine/org/apache/derby/diag/ErrorMessages.java', 'java/org.apache.derby.engine/org/apache/derby/diag/LockTable.java', 'java/org.apache.derby.engine/org/apache/derby/diag/SpaceTable.java', 'java/org.apache.derby.engine/org/apache/derby/diag/StatementCache.java', 'java/org.apache.derby.engine/org/apache/derby/diag/StatementDuration.java', 'java/org.apache.derby.engine/org/apache/derby/diag/TransactionTable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/ConnectionInfo.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/ConsistencyChecker.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/Database.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/DatabaseContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/Factory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/OptimizerTrace.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/PropertyInfo.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/db/TriggerExecutionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/AuthenticationService.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/AutoloadedDriver.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredCallableStatement42.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnection42.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredConnectionControl.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredPreparedStatement42.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/BrokeredStatementControl.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/CharacterStreamDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/ConnectionContext.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/Driver42.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EmbeddedConnectionPoolDataSourceInterface.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EmbeddedDataSourceInterface.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EmbeddedXADataSourceInterface.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineCallableStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineConnection.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineLOB.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EnginePreparedStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineResultSet.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/EngineStatement.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/FailedProperties40.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/InternalDriver.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/JDBC.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/jdbc/ResourceAdapter.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/security/Securable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/security/SecurityUtil.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheManager.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/Cacheable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/CacheableFactory.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/ClassSize.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/ClassSizeCatalog.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/cache/SizedCacheable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/AttributeEntry.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/Attributes.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Double_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Float_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Index_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Integer_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Long_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/CONSTANT_Utf8_info.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassEnumeration.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassFormatOutput.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassHolder.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassInput.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassInvestigator.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ClassMember.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/ConstantPoolEntry.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/MemberTable.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/VMDescriptor.java', 'java/org.apache.derby.engine/org/apache/derby/iapi/services/classfile/VMOpcode.java']","-d

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1833236 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
975ff5a9e8ad76aeeb6fe98ca4c06c60570d1d08,2018-06-02T22:17:16Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/testing/org/apache/derbyTesting/functionTests/harness/JavaVersionHolder.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/jdk100.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/jdk110.java']","DERBY-6998: Add testing support for JDK 11; commit derby-6998-02-aa-supportForJDK11.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1832750 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
1e4e631a8f11ec6d1dac9869dd947e5cdd951045,2018-06-02T14:15:43Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/JavaVersionHolder.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/jdk100.java']","DERBY-6998: Fix compilation warning when building with JDK 10; commit derby-6998-01-ab-tightenReturnType.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1832736 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
87e155e6e79805457cb7a2522a4c5129d50b732f,2018-05-16T00:05:59Z,"['build.xml', 'java/engine/org/apache/derby/loc/build.xml', 'java/locales/module-info.template', 'java/tools/build.xml', 'tools/ant/properties/dirs.properties']","DERBY-6945: Add module descriptors to locale jars; commit derby-6945-36-aa-moduleDescriptorsForLocaleJars.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831666 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
cb69c52325e1d056a36da97e4bb7b7fcac79da7e,2018-05-15T13:49:08Z,['build.xml'],"DERBY-6945: Include echoproperties to diagnose Jenkins test failures

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831637 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
22cee18b29481c870643e7ac2abefe364e04e3e7,2018-05-14T01:55:28Z,['build.xml'],"DERBY-6945: adjust javadoc api urls for java 9

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831532 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
b8e712782b98e40418e5375165dcaeb92e5c75c1,2018-05-12T18:41:38Z,['java/client/org/apache/derby/loc/client/clientmessagesProviderImpl.java'],"DERBY-6945: Remove a spurious character from a method signature; commit derby-6945-35-aa-removeSpuriousCharacter.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831487 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
48812e3570d40a91455b5eeb9a571c99071dcb40,2018-05-10T01:28:13Z,"['java/client/module-info.java', 'java/drda/module-info.java', 'java/engine/module-info.java', 'java/optional/module-info.java', 'java/run/module-info.java', 'java/shared/module-info.java', 'java/stubs/felix/module-info.java', 'java/testing/module-info.java', 'java/tools/module-info.java']","DERBY-6945: Add Apache license headers to module descriptors; commit derby-6945-34-aa-licenseHeaders.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831293 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
bea99bd89946de4e801b22a6f4bb54bb78542ff8,2018-05-09T00:10:48Z,"['java/build/org/apache/derbyBuild/splitmessages.java', 'java/shared/org/apache/derby/shared/common/i18n/MessageService.java', 'java/tools/build.xml']","DERBY-6945: Move localizations into packages which are specific to the jar files containing them; commit derby-6945-33-ab-moveLocalizations.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831216 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
d73279acd15134d3d6e4e29fe11e0286abc68ffa,2018-05-06T14:25:47Z,"['build.xml', 'java/build/org/apache/derbyBuild/MessageBundleTest.java', 'java/shared/org/apache/derby/shared/common/error/MessageUtils.java', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java']","DERBY-6945: Misc cleanup related to message localization; commit derby-6945-32-aa-messageLookupCleanup.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1831026 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
3cefcec01e267cb2da7857855cd353b4d7258b08,2018-05-05T14:39:48Z,['STATUS'],"DERBY-6988: Update STATUS page for 10.14.2.0

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1830984 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
3eb6116e2c6fc4c4c88ae98527181ce24f130e11,2018-05-05T14:17:38Z,['java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/OldVersions.java'],"DERBY-6988: Add 10.14.2.0 to versions table

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1830980 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
c9698aa08b020ed34bcc34b15abc6dee2b9c2965,2018-05-05T13:51:44Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/client/module-info.java', 'java/client/org/apache/derby/loc/client/clientmessagesProviderImpl.java', 'java/shared/module-info.java', 'java/shared/org/apache/derby/loc/client/spi/clientmessagesProvider.java']","DERBY-6945: Add a ResourceBundleProvider for the client messages so that they can be found when Derby is run using a modulepath; commit derby-6945-31-aa-clientmessages-ResourceBundleProvider.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1830975 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
a8e109a98394159f3decd0a7b305ea6c7e5c8eea,2018-04-28T15:50:47Z,"['build.xml', 'java/client/org/apache/derby/client/am/SqlException.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/shared/org/apache/derby/shared/common/i18n/MessageUtil.java', 'java/tools/build.xml', 'java/tools/org/apache/derby/iapi/tools/i18n/LocalizedResource.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/tools/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/tools/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'tools/ant/properties/dirs.properties']","DERBY-6945: Move the client and tool messages into separate package spaces so that Derby can be booted using a module path; commit derby-6945-30-ab-move-clientmessages-toolsmessages.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1830459 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
17ed7d4901edac7c48ac9a59cb293f26bebe5625,2018-04-21T15:33:21Z,"['java/testing/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/suites/derbyall.properties']","DERBY-6945: Disable SimpleApp test until the demo moves out of the root package; commit derby-6945-29-aa-disable-SimpleApp-test.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1829712 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
37998fbb58f5f360f2b9f310c7e1509038d97d5b,2018-04-15T15:24:54Z,"['build.xml', 'java/testing/build.xml', 'java/testing/module-info.java', 'tools/ant/properties/dirs.properties']","DERBY-6945: Add module for derby tests; commit derby-6945-28-aa-testingModuleDescriptor.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1829212 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
e3af361b478ae00c28ba468a8739f078df48dace,2018-04-13T01:35:59Z,"['java/client/module-info.java', 'java/engine/module-info.java', 'java/optional/module-info.java', 'java/tools/module-info.java']","DERBY-6945: Correct module descriptors which the coming test module will depend on; commit derby-6945-27-aa-adjustModulesForTests.diff after clean test results.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1829025 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
1aae304985354f36a414665d3ab2ccf4ed00d680,2018-04-07T22:45:38Z,"['build.xml', 'java/pptesting/build.xml', 'java/pptesting/org/apache/derby/PackagePrivateTestSuite.java', 'java/pptesting/org/apache/derby/client/am/LogicalStatementEntityTest.java', 'java/pptesting/org/apache/derby/client/am/_Suite.java', 'java/pptesting/org/apache/derby/impl/jdbc/BiggerStoreStreamClobTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/BiggerTemporaryClobTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/InternalClobTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/SmallStoreStreamClobTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/SmallTemporaryClobTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/UTF8ReaderTest.java', 'java/pptesting/org/apache/derby/impl/jdbc/_Suite.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/VetJigsawTest.java', 'tools/ant/properties/dirs.properties']","DERBY-6945: Move the package-private tests into their own branch of the source directory; commit derby-6945-26-aa-packagePrivateTests.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1828620 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5e1e3373298b3bdb98a319d8d9a2b314f0c0020e,2018-04-01T17:35:39Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyoptionaltools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyrun.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbytools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyoptionaltools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyrun.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/client/build.xml', 'java/client/module-info.java', 'java/drda/build.xml', 'java/drda/module-info.java', 'java/engine/build.xml', 'java/engine/module-info.java', 'java/optional/build.xml', 'java/optional/module-info.java', 'java/run/build.xml', 'java/run/module-info.java', 'java/shared/module-info.java', 'java/stubs/felix/module-info.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/VetJigsawTest.java', 'java/tools/build.xml', 'java/tools/module-info.java']","DERBY-6934: Add module descriptors to product jars; commit derby-6945-25-ab-moduleDescriptors.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1828145 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0aa0953f20c84ba89c823efc1f7fdf3046ccac2c,2018-03-31T19:54:19Z,"['java/testing/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/NativeAuthenticationServiceTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/nast1.jar', 'tools/ant/properties/dirs.properties']","DERBY-6945: Fix NativeAuthenticationServiceTest; commit derby-6945-24-aa-fixNativeAuthenticationServiceTest.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1828120 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
c7aa48bb74d16a6c72d49ffeb91e3658ea1854ff,2018-03-24T23:09:37Z,['tools/release/build.xml'],"DERBY-6990: Deprecate the broken SOAP-based logic for listing fixed bugs on behalf of the release notes generator; commit derby-6990-01-aa-removeSOAPlogic.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1827681 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
79f860dbce4dd748df58d02518ecb657e42ce59f,2018-03-15T01:20:12Z,"['BUILDING.html', 'build.xml', 'java/testing/build.xml']","DERBY-6945: Upgrade build script to require ant 1.10.2 or higher; commit derby-6945-23-aa-upgradeToAnt_1.10.2.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1826764 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
4da5b2db5f3a60c1fa8ef616d88a7efe28b0c9de,2018-03-12T01:32:23Z,"['java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/drda/server.policy', 'java/drda/org/apache/derby/drda/template.policy', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/shared/org/apache/derby/shared/common/reference/Property.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/nast1.jar', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java']","Merge revision 1826467 from 10.14 to trunk. Original commit message:

Remove support for COMMAND_TESTCONNECTION connectToDatabase feature.
It was never documented, and was never part of the regression tests.

A new regression test demonstrates that attempting to use this feature
now results in a ""usage"" response from the Network Server.

Also, change the Network Server's default security policy file, as well
as the template security policy file that we distribute with the
release and in the documentation. The new policy files do not use
the <<ALL FILES>> permission; instead they restrict the permission
to certain directories only.

Also, change the implementation of the Network Server's ""sysinfo""
sub-command. Prior to this change, that feature would open each
jar file on the Network Server's class path, and would report on
whatever information it could find about that jar file. Now, the
only jar files that are opened and reported on are the known Derby
jar files; a table of those jar file names is compiled into the
sysinfo command. This causes sysinfo to return less information,
but it also means that it only needs the permission to access the
known Derby jar files on the classpath.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1826481 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
74fdc0b4801ca97c9fa679870d3448250c4758f9,2018-03-10T16:24:00Z,"['build.xml', 'java/build/org/apache/derbyBuild/JarDriftTest.java', 'java/build/org/apache/derbyBuild/build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/splitmessages.java', 'java/build/org/apache/derbyPreBuild/build.xml', 'java/client/build.xml', 'java/demo/build.xml', 'java/demo/toursdb/build.xml', 'java/drda/build.xml', 'java/engine/build.xml', 'java/engine/org/apache/derby/loc/build.xml', 'java/optional/build.xml', 'java/run/build.xml', 'java/shared/build.xml', 'java/storeless/build.xml', 'java/testing/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/compatibility/VersionCombinationConfigurator.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ProtocolTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ServerPropertiesTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/_Suite.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/no_derby_internals.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withPerm.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withoutPerm.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/Derby5937SlaveShutdownTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/tools/derbyrunjartest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/unit/fillLog.policy', 'java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/testing/org/apache/derbyTesting/functionTests/util/useprocessfalse.policy', 'java/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.java', 'java/testing/org/apache/derbyTesting/unitTests/junit/AssertFailureTest.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/AssertFailureTest1.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.java', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest1.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest1.policy', 'java/tools/build.xml', 'tools/ant/properties/dirs.properties']","DERBY-6945: Split generated class directory into separate subdirectories for generated shared, engine, and tools classes; commit derby-6945-22-af-isolateClassesByArtifact.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1826417 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2781e2038bd802959efecbf796de01deee2e4c04,2018-02-18T22:58:33Z,"['build.xml', 'java/client/build.xml', 'java/drda/build.xml', 'java/drda/org/apache/derby/drda/build.xml', 'java/drda/org/apache/derby/impl/drda/build.xml', 'java/drda/org/apache/derby/loc/drda/build.xml', 'java/engine/build.xml', 'java/engine/org/apache/derby/agg/build.xml', 'java/engine/org/apache/derby/authentication/build.xml', 'java/engine/org/apache/derby/catalog/build.xml', 'java/engine/org/apache/derby/database/build.xml', 'java/engine/org/apache/derby/diag/build.xml', 'java/engine/org/apache/derby/iapi/build.xml', 'java/engine/org/apache/derby/iapi/db/build.xml', 'java/engine/org/apache/derby/iapi/jdbc/build.xml', 'java/engine/org/apache/derby/iapi/services/build.xml', 'java/engine/org/apache/derby/iapi/services/crypto/build.xml', 'java/engine/org/apache/derby/iapi/services/io/build.xml', 'java/engine/org/apache/derby/iapi/sql/build.xml', 'java/engine/org/apache/derby/iapi/store/build.xml', 'java/engine/org/apache/derby/iapi/types/build.xml', 'java/engine/org/apache/derby/iapi/util/build.xml', 'java/engine/org/apache/derby/impl/build.xml', 'java/engine/org/apache/derby/impl/db/build.xml', 'java/engine/org/apache/derby/impl/io/build.xml', 'java/engine/org/apache/derby/impl/jdbc/build.xml', 'java/engine/org/apache/derby/impl/load/build.xml', 'java/engine/org/apache/derby/impl/services/build.xml', 'java/engine/org/apache/derby/impl/sql/build.xml', 'java/engine/org/apache/derby/impl/store/build.xml', 'java/engine/org/apache/derby/io/build.xml', 'java/engine/org/apache/derby/mbeans/build.xml', 'java/engine/org/apache/derby/osgi/build.xml', 'java/engine/org/apache/derby/security/build.xml', 'java/engine/org/apache/derby/vti/build.xml', 'java/shared/build.xml', 'java/testing/build.xml', 'java/testing/org/apache/derby/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/harness/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/master/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/multi/stress/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/suites/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/testData/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/compatibility/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/demo/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/engine/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/i18n/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/nast1.jar', 'java/testing/org/apache/derbyTesting/functionTests/tests/largedata/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/management/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/memory/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/memorydb/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/multi/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/nist/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/perf/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/store/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/storetests/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/tools/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/unit/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/util/build.xml', 'java/testing/org/apache/derbyTesting/junit/build.xml', 'java/testing/org/apache/derbyTesting/perf/build.xml', 'java/testing/org/apache/derbyTesting/system/mailjdbc/build.xml', 'java/testing/org/apache/derbyTesting/system/nstest/build.xml', 'java/testing/org/apache/derbyTesting/system/oe/build.xml', 'java/testing/org/apache/derbyTesting/system/optimizer/build.xml', 'java/testing/org/apache/derbyTesting/system/sttest/build.xml', 'java/testing/org/apache/derbyTesting/unitTests/build.xml', 'java/tools/build.xml', 'java/tools/org/apache/derby/iapi/tools/build.xml', 'java/tools/org/apache/derby/impl/tools/build.xml', 'java/tools/org/apache/derby/jdbc/build.xml', 'java/tools/org/apache/derby/loc/build.xml', 'java/tools/org/apache/derby/tools/build.xml']","DERBY-6945: Simplify the compilation of artifacts so that each jar file is compiled by a single javac command; commit derby-6945-21-ab-simplifyBuildScripts.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1824712 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
e3f263c96ff67393b413b2de71b6c1c2a8d3ba58,2018-02-14T01:50:58Z,"['build.xml', 'java/build/org/apache/derbyBuild/classlister.java', 'java/build/org/apache/derbyBuild/maintversion2props.java', 'tools/jar/dnc.1.8.properties', 'tools/jar/dnc.properties', 'tools/jar/extraDBMSclasses.properties', 'tools/jar/extraDBMStypes.properties', 'tools/jar/net.properties', 'tools/jar/tools.properties']","DERBY-6945: Remove obsolete classlister program; commit derby-6945-20-aa-removeClasslister.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1824192 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5a6efccce73b05ac7a27512563868192303f564d,2018-02-13T01:47:33Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbytools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/client/org/apache/derby/client/BasicClientDataSource.java', 'java/drda/org/apache/derby/drda/server.policy', 'java/drda/org/apache/derby/drda/template.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/GetCurrentPropertiesTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/NetworkServerControlApiTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/ServerPropertiesTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.modified.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.unreloadable.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/VetJigsawTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/_Suite.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/luceneSupport.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/no_derby_internals.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/resultSetReader.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withPerm.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/management/CacheManagerMBeanTest.withoutPerm.policy', 'java/testing/org/apache/derbyTesting/functionTests/tests/store/ClassLoaderBootTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy', 'java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/testing/org/apache/derbyTesting/junit/Derby.java', 'java/testing/org/apache/derbyTesting/junit/DerbyDistribution.java', 'java/testing/org/apache/derbyTesting/junit/DerbyVersion.java', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest1.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/MissingPermissionsTest2.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest.policy', 'java/testing/org/apache/derbyTesting/unitTests/junit/SystemPrivilegesPermissionTest1.policy']","DERBY-6945: Move org.apache.derby.jdbc package into derbytools.jar; tests passed cleanly on derby-6945-19-ad-movePublicAPIintoToolsJar.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1824087 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8f3b7b2fa2f3e775dc90fb3cfa9f46257ae8df0e,2018-02-03T16:33:40Z,['build.xml'],"DERBY-6945: Re-seal the localization package; commit derby-6945-18-aa-resealLocalizationPackage.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1823042 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
32439582d1039a00d7d1c578e6304d45688ca100,2018-02-03T16:09:48Z,"['java/engine/org/apache/derby/impl/sql/execute/TableScanResultSet.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/UpdatableResultSetTest.java']","DERBY-6981: NullPointerException when re-executing PreparedStatement query.

TableScanResultSet's past2FutureTbl is a hash table containing updated
rows that are thrown into the future direction of the index scan, so
that the scan knows it's seen these rows already and should skip them
subsequently.

When the TableScanResultSet.close() method was called, it was closing the
past2FutureTbl, but not clearing the pointer, which caused the lazy
initialization of the past2FutureTbl to be incorrectly performed the
next time the same TableScanResultSet was opened and scanned, resulting
in the NullPointerException in the underlying BackingStoreHashtable code
in that second scan.

The fix is to clear the old instance and freshly initialize a new instance,
each time the TableScanResultSet is closed and reopened.



git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1823037 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
6d3942652ecf6025501fc08acb10d3e192a9662c,2018-02-01T02:09:37Z,['build.xml'],"DERBY-6945: Re-seal most of the packages which migrated into derbyshared.jar; commit derby-6945-17-aa-resealPackagesIn-derbyshared.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1822843 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
a2a9aedcd3281ae1c089f5d724fd00bd0c8f39ec,2018-01-30T02:00:41Z,"['build.xml', 'java/client/org/apache/derby/client/net/NetLogWriter.java', 'java/engine/build.xml', 'java/engine/org/apache/derby/osgi/EmbeddedActivator.java', 'java/tools/build.xml', 'java/tools/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/tools/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/tools/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/tools/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/tools/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/tools/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/tools/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/tools/org/apache/derby/jdbc/ClientConnectionPoolDataSource40.java', 'java/tools/org/apache/derby/jdbc/ClientDataSource.java', 'java/tools/org/apache/derby/jdbc/ClientDataSource40.java', 'java/tools/org/apache/derby/jdbc/ClientDriver.java', 'java/tools/org/apache/derby/jdbc/ClientDriver40.java', 'java/tools/org/apache/derby/jdbc/ClientXADataSource.java', 'java/tools/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/tools/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/tools/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource40.java', 'java/tools/org/apache/derby/jdbc/EmbeddedDataSource.java', 'java/tools/org/apache/derby/jdbc/EmbeddedDataSource40.java', 'java/tools/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/tools/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/tools/org/apache/derby/jdbc/EmbeddedXADataSource40.java', 'java/tools/org/apache/derby/jdbc/ReferenceableDataSource.java', 'java/tools/org/apache/derby/jdbc/build.xml', 'java/tools/org/apache/derby/jdbc/package.html']","DERBY-6945: Combine engine and client classes from org.apache.derby.jdbc in a single directory under the tools branch of the source tree; commit derby-6945-16-aa-consolidatePublicAPI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1822601 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2bc26b84f798814b76c3d0a0061518d2ca276451,2018-01-28T19:03:32Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/client/org/apache/derby/client/ClientConnectionPoolDataSourceInterface.java', 'java/client/org/apache/derby/client/ClientXADataSourceInterface.java', 'java/client/org/apache/derby/jdbc/BasicClientConnectionPoolDataSource40.java', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ClientConnectionPoolDataSourceTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/J2EEDataSourceTest.java']","DERBY-6945: Move unnecessary client classes out of the public api package and into packages internal to the client jar; commit derby-6945-15-aa-moveMoreClientClassesOutOfPublicAPI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1822475 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
fbf9e797d95a7017b10dbb34b3c8126738091ff8,2018-01-28T15:43:11Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/iapi/jdbc/EmbeddedConnectionPoolDataSourceInterface.java', 'java/engine/org/apache/derby/iapi/jdbc/EmbeddedDataSourceInterface.java', 'java/engine/org/apache/derby/iapi/jdbc/EmbeddedXADataSourceInterface.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedXAConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/impl/jdbc/ResourceAdapterImpl.java', 'java/engine/org/apache/derby/impl/jdbc/XAStatementControl.java', 'java/engine/org/apache/derby/impl/jdbc/XATransactionState.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/engine/org/apache/derby/modules.properties']","DERBY-6945: Move more engine classes out of the public api package and into engine-internal packages; commit derby-6945-14-aa-moveMoreEmbeddedClassesOutOfPublicAPI.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1822464 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
b97fbd63e1fe75bc63517c4a1711ed44d142163d,2018-01-23T01:00:23Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/client/org/apache/derby/client/BasicClientDataSource.java', 'java/client/org/apache/derby/client/ClientAutoloadedDriver.java', 'java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/am/Agent.java', 'java/client/org/apache/derby/client/am/ClientPreparedStatement.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/StatementCacheInteractor.java', 'java/client/org/apache/derby/client/net/NetCallableStatement.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetPreparedStatement.java', 'java/client/org/apache/derby/client/net/NetStatement.java', 'java/client/org/apache/derby/client/net/NetStatementReply.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/Wrapper41Driver.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/AutoloadTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DriverTest.java']","DERBY-6945: Move the autoloaded client driver out of the public api package and into a package internal to derbyclient.jar; commit derby-6945-13-aa-create-ClientAutoloadedDriver.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1821953 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
790f899e347d8c52b3407a97f038abe582b504bd,2018-01-17T23:36:31Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/client/org/apache/derby/client/BasicClientDataSource.java', 'java/client/org/apache/derby/client/ClientDataSourceInterface.java', 'java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/ClientXAConnection.java', 'java/client/org/apache/derby/client/am/ClientConnection.java', 'java/client/org/apache/derby/client/am/ClientJDBCObjectFactory.java', 'java/client/org/apache/derby/client/am/LogWriter.java', 'java/client/org/apache/derby/client/net/ClientJDBCObjectFactoryImpl.java', 'java/client/org/apache/derby/client/net/NetConnection.java', 'java/client/org/apache/derby/client/net/NetXAConnection.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/client/org/apache/derby/jdbc/BasicClientDataSource40.java', 'java/client/org/apache/derby/jdbc/ClientConnectionPoolDataSourceInterface.java', 'java/client/org/apache/derby/jdbc/ClientDriver.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/DataSourceTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_1Indexing.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p3.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p4.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_3_p6.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/ReplicationRun_Local_Encrypted_1.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/SimplePerfTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/replicationTests/SimplePerfTest_Verify.java']","DERBY-6945: Move ClientDataSourceInterface and the guts of BasicClientDataSource40 out of the public api package and into the client-internal api package; commit derby-6945-12-ab-moveClientDataSourceInterface.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1821435 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8672b0f73633dc1d7474e5e7bed6e4c99037173d,2018-01-14T16:19:21Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/engine/org/apache/derby/iapi/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/iapi/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/engine/ShutdownWithoutDeregisterPermissionTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/Wrapper41Driver.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/AutoloadTest.java']","DERBY-6945: Move AutoloadedDriver out of the public api and into the engine-internal api; commit derby-6945-11-ab-moveAutoloadedDriver.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1821111 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
96e5ec2d6da49816015dbf96bcbe61bceec962a5,2018-01-10T01:00:38Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/engine/org/apache/derby/iapi/jdbc/Driver42.java', 'java/engine/org/apache/derby/modules.properties']","DERBY-6945: Move Driver42 out of the public api package and into the engine-internal api package; commit derby-6945-10-aa-moveDriver42.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1820717 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
8b2f38c83eaf079d075b8e7d49e464381db59792,2018-01-09T02:03:24Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/iapi/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBC.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/ConnectionChild.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStoredProcedure.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedConnectionPoolDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedXADataSource40.java', 'java/engine/org/apache/derby/jdbc/Driver42.java', 'java/engine/org/apache/derby/jdbc/EmbeddedConnectionPoolDataSource.java', 'java/engine/org/apache/derby/jdbc/EmbeddedDriver.java', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSource.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/Wrapper41Driver.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/ConcurrentAutoloadTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/tools/RollBackWrappingWhenFailOnImportTest.java']","DERBY-6945: Move InternalDriver out of public api package and into an engine-only api package; commit derby-6945-09-ab-moveInternalDriver.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1820615 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
676b961fb7f23fca9eb9ee2ddf56dab7d9402824,2017-12-29T21:40:07Z,"['build.xml', 'java/build/org/apache/derbyBuild/classlister.java', 'java/build/org/apache/derbyBuild/eclipse/DerbyEclipsePlugin.java', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/splitmessages.java', 'java/build/org/apache/derbyPreBuild/ReleaseProperties.java', 'java/client/org/apache/derby/client/am/ClientDatabaseMetaData.java', 'java/client/org/apache/derby/client/am/ClientTypes.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/client/org/apache/derby/client/am/DateTime.java', 'java/client/org/apache/derby/client/net/DssConstants.java', 'java/client/org/apache/derby/client/net/NetConfiguration.java', 'java/client/org/apache/derby/client/net/NetStatementRequest.java', 'java/client/org/apache/derby/client/net/Request.java', 'java/drda/org/apache/derby/drda/NetServlet.java', 'java/drda/org/apache/derby/drda/NetworkServerControl.java', 'java/drda/org/apache/derby/drda/server.policy', 'java/drda/org/apache/derby/drda/template.policy', 'java/drda/org/apache/derby/impl/drda/AppRequester.java', 'java/drda/org/apache/derby/impl/drda/DDMWriter.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAInputStream.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAReaderInputStream.java', 'java/drda/org/apache/derby/impl/drda/FdocaConstants.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerMBeanImpl.java', 'java/drda/org/apache/derby/impl/drda/SQLTypes.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/drda/org/apache/derby/mbeans/drda/NetworkServerMBean.java', 'java/engine/build.xml', 'java/engine/org/apache/derby/catalog/DependableFinder.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/DefaultInfoImpl.java', 'java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/engine/org/apache/derby/catalog/types/ReferencedColumnsDescriptorImpl.java', 'java/engine/org/apache/derby/catalog/types/RoutineAliasInfo.java', 'java/engine/org/apache/derby/catalog/types/RowMultiSetImpl.java', 'java/engine/org/apache/derby/catalog/types/UserDefinedTypeIdImpl.java', 'java/engine/org/apache/derby/diag/ContainedRoles.java', 'java/engine/org/apache/derby/diag/DiagUtil.java', 'java/engine/org/apache/derby/diag/ErrorLogReader.java', 'java/engine/org/apache/derby/diag/ErrorMessages.java', 'java/engine/org/apache/derby/diag/LockTable.java', 'java/engine/org/apache/derby/diag/SpaceTable.java', 'java/engine/org/apache/derby/diag/StatementCache.java', 'java/engine/org/apache/derby/diag/StatementDuration.java', 'java/engine/org/apache/derby/diag/TransactionTable.java', 'java/engine/org/apache/derby/iapi/db/ConsistencyChecker.java', 'java/engine/org/apache/derby/iapi/db/Database.java', 'java/engine/org/apache/derby/iapi/db/PropertyInfo.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredConnection.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/engine/org/apache/derby/iapi/jdbc/ResourceAdapter.java', 'java/engine/org/apache/derby/iapi/reference/build.xml', 'java/engine/org/apache/derby/iapi/security/SecurityUtil.java', 'java/engine/org/apache/derby/iapi/services/cache/CacheManager.java', 'java/engine/org/apache/derby/iapi/services/cache/Cacheable.java', 'java/engine/org/apache/derby/iapi/services/compiler/ClassBuilder.java', 'java/engine/org/apache/derby/iapi/services/context/Context.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/context/ContextService.java', 'java/engine/org/apache/derby/iapi/services/context/SystemContext.java', 'java/engine/org/apache/derby/iapi/services/crypto/CipherFactory.java', 'java/engine/org/apache/derby/iapi/services/crypto/CipherFactoryBuilder.java', 'java/engine/org/apache/derby/iapi/services/crypto/CipherProvider.java', 'java/engine/org/apache/derby/iapi/services/daemon/DaemonFactory.java', 'java/engine/org/apache/derby/iapi/services/daemon/IndexStatisticsDaemon.java', 'java/engine/org/apache/derby/iapi/services/daemon/Serviceable.java', 'java/engine/org/apache/derby/iapi/services/diag/Diagnosticable.java', 'java/engine/org/apache/derby/iapi/services/diag/DiagnosticableGeneric.java', 'java/engine/org/apache/derby/iapi/services/io/ArrayInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/CloseFilterInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FileUtil.java', 'java/engine/org/apache/derby/iapi/services/io/FormatIdInputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatIdOutputStream.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableArrayHolder.java', 'java/engine/org/apache/derby/iapi/services/io/FormatableBitSet.java', 'java/engine/org/apache/derby/iapi/services/io/StreamStorable.java', 'java/engine/org/apache/derby/iapi/services/jmx/ManagementService.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassFactory.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassFactoryContext.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/loader/GeneratedByteCode.java', 'java/engine/org/apache/derby/iapi/services/loader/GeneratedClass.java', 'java/engine/org/apache/derby/iapi/services/loader/GeneratedMethod.java', 'java/engine/org/apache/derby/iapi/services/loader/JarReader.java', 'java/engine/org/apache/derby/iapi/services/locks/Limit.java', 'java/engine/org/apache/derby/iapi/services/locks/LockFactory.java', 'java/engine/org/apache/derby/iapi/services/monitor/ModuleControl.java', 'java/engine/org/apache/derby/iapi/services/monitor/ModuleFactory.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/iapi/services/monitor/PersistentService.java', 'java/engine/org/apache/derby/iapi/services/property/PersistentSet.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyFactory.java', 'java/engine/org/apache/derby/iapi/services/property/PropertySetCallback.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyValidation.java', 'java/engine/org/apache/derby/iapi/sql/Activation.java', 'java/engine/org/apache/derby/iapi/sql/LanguageFactory.java', 'java/engine/org/apache/derby/iapi/sql/ParameterValueSet.java', 'java/engine/org/apache/derby/iapi/sql/PreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/ResultSet.java', 'java/engine/org/apache/derby/iapi/sql/Row.java', 'java/engine/org/apache/derby/iapi/sql/Statement.java', 'java/engine/org/apache/derby/iapi/sql/StatementUtil.java', 'java/engine/org/apache/derby/iapi/sql/StorablePreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/compile/ASTVisitor.java', 'java/engine/org/apache/derby/iapi/sql/compile/AccessPath.java', 'java/engine/org/apache/derby/iapi/sql/compile/CompilerContext.java', 'java/engine/org/apache/derby/iapi/sql/compile/IgnoreFilter.java', 'java/engine/org/apache/derby/iapi/sql/compile/JoinStrategy.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizable.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizableList.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizablePredicate.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizablePredicateList.java', 'java/engine/org/apache/derby/iapi/sql/compile/Optimizer.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerFactory.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java', 'java/engine/org/apache/derby/iapi/sql/compile/Parser.java', 'java/engine/org/apache/derby/iapi/sql/compile/RequiredRowOrdering.java', 'java/engine/org/apache/derby/iapi/sql/compile/RowOrdering.java', 'java/engine/org/apache/derby/iapi/sql/compile/ScopeFilter.java', 'java/engine/org/apache/derby/iapi/sql/compile/TagFilter.java', 'java/engine/org/apache/derby/iapi/sql/compile/TypeCompiler.java', 'java/engine/org/apache/derby/iapi/sql/compile/Visitable.java', 'java/engine/org/apache/derby/iapi/sql/compile/VisitableFilter.java', 'java/engine/org/apache/derby/iapi/sql/compile/Visitor.java', 'java/engine/org/apache/derby/iapi/sql/conn/Authorizer.java', 'java/engine/org/apache/derby/iapi/sql/conn/ConnectionUtil.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/LanguageConnectionFactory.java', 'java/engine/org/apache/derby/iapi/sql/conn/StatementContext.java', 'java/engine/org/apache/derby/iapi/sql/depend/Dependency.java', 'java/engine/org/apache/derby/iapi/sql/depend/DependencyManager.java', 'java/engine/org/apache/derby/iapi/sql/depend/Dependent.java', 'java/engine/org/apache/derby/iapi/sql/depend/Provider.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/BulkInsertCounter.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CatalogRowFactory.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/CheckConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ColPermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptorList.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConsInfo.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDescriptorGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DefaultDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/FileInfoDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ForeignKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexLister.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/KeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PasswordHasher.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermissionsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ReferencedKeyConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoleClosureIterator.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoleGrantDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/RoutinePermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SchemaDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SequenceDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementColumnPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementGenericPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementRolePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementRoutinePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementSchemaPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementTablePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TablePermsDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/UniqueSQLObjectDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/execute/ConstantAction.java', 'java/engine/org/apache/derby/iapi/sql/execute/CursorResultSet.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecAggregator.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecCursorTableReference.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecPreparedStatement.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecRowBuilder.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecutionFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/ExecutionStmtValidator.java', 'java/engine/org/apache/derby/iapi/sql/execute/NoPutResultSet.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/ResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/iapi/sql/execute/RowChanger.java', 'java/engine/org/apache/derby/iapi/sql/execute/ScanQualifier.java', 'java/engine/org/apache/derby/iapi/sql/execute/TargetResultSet.java', 'java/engine/org/apache/derby/iapi/sql/execute/TemporaryRowHolder.java', 'java/engine/org/apache/derby/iapi/sql/execute/TupleFilter.java', 'java/engine/org/apache/derby/iapi/sql/execute/xplain/XPLAINFactoryIF.java', 'java/engine/org/apache/derby/iapi/sql/execute/xplain/XPLAINVisitor.java', 'java/engine/org/apache/derby/iapi/store/access/AccessFactory.java', 'java/engine/org/apache/derby/iapi/store/access/BackingStoreHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/BinaryOrderable.java', 'java/engine/org/apache/derby/iapi/store/access/ColumnOrdering.java', 'java/engine/org/apache/derby/iapi/store/access/ConglomPropertyQueryable.java', 'java/engine/org/apache/derby/iapi/store/access/ConglomerateController.java', 'java/engine/org/apache/derby/iapi/store/access/DiskHashtable.java', 'java/engine/org/apache/derby/iapi/store/access/DynamicCompiledOpenConglomInfo.java', 'java/engine/org/apache/derby/iapi/store/access/FileResource.java', 'java/engine/org/apache/derby/iapi/store/access/GenericScanController.java', 'java/engine/org/apache/derby/iapi/store/access/GroupFetchScanController.java', 'java/engine/org/apache/derby/iapi/store/access/Qualifier.java', 'java/engine/org/apache/derby/iapi/store/access/RowCountable.java', 'java/engine/org/apache/derby/iapi/store/access/RowLocationRetRowSource.java', 'java/engine/org/apache/derby/iapi/store/access/RowSource.java', 'java/engine/org/apache/derby/iapi/store/access/RowUtil.java', 'java/engine/org/apache/derby/iapi/store/access/ScanController.java', 'java/engine/org/apache/derby/iapi/store/access/ScanInfo.java', 'java/engine/org/apache/derby/iapi/store/access/SortController.java', 'java/engine/org/apache/derby/iapi/store/access/SortCostController.java', 'java/engine/org/apache/derby/iapi/store/access/SortInfo.java', 'java/engine/org/apache/derby/iapi/store/access/SortObserver.java', 'java/engine/org/apache/derby/iapi/store/access/StaticCompiledOpenConglomInfo.java', 'java/engine/org/apache/derby/iapi/store/access/StoreCostController.java', 'java/engine/org/apache/derby/iapi/store/access/TransactionController.java', 'java/engine/org/apache/derby/iapi/store/access/XATransactionController.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/Conglomerate.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/ConglomerateFactory.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/LogicalUndo.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/MethodFactory.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/ScanManager.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/Sort.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/SortFactory.java', 'java/engine/org/apache/derby/iapi/store/access/conglomerate/TransactionManager.java', 'java/engine/org/apache/derby/iapi/store/access/xa/XAResourceManager.java', 'java/engine/org/apache/derby/iapi/store/raw/ContainerHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/Corruptable.java', 'java/engine/org/apache/derby/iapi/store/raw/D_ContainerLock.java', 'java/engine/org/apache/derby/iapi/store/raw/D_RowLock.java', 'java/engine/org/apache/derby/iapi/store/raw/LockingPolicy.java', 'java/engine/org/apache/derby/iapi/store/raw/Loggable.java', 'java/engine/org/apache/derby/iapi/store/raw/LogicalUndoable.java', 'java/engine/org/apache/derby/iapi/store/raw/Page.java', 'java/engine/org/apache/derby/iapi/store/raw/RawStoreFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/RePreparable.java', 'java/engine/org/apache/derby/iapi/store/raw/ScanHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/ScannedTransactionHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/StreamContainerHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/Transaction.java', 'java/engine/org/apache/derby/iapi/store/raw/UndoHandler.java', 'java/engine/org/apache/derby/iapi/store/raw/Undoable.java', 'java/engine/org/apache/derby/iapi/store/raw/data/DataFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/data/RawContainerHandle.java', 'java/engine/org/apache/derby/iapi/store/raw/log/LogFactory.java', 'java/engine/org/apache/derby/iapi/store/raw/log/Logger.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/RawTransaction.java', 'java/engine/org/apache/derby/iapi/store/raw/xact/TransactionFactory.java', 'java/engine/org/apache/derby/iapi/store/replication/master/MasterFactory.java', 'java/engine/org/apache/derby/iapi/store/replication/slave/SlaveFactory.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionControl.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionListener.java', 'java/engine/org/apache/derby/iapi/types/BitDataValue.java', 'java/engine/org/apache/derby/iapi/types/BooleanDataValue.java', 'java/engine/org/apache/derby/iapi/types/ClobStreamHeaderGenerator.java', 'java/engine/org/apache/derby/iapi/types/CollationElementsInterface.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLChar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLClob.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLLongvarchar.java', 'java/engine/org/apache/derby/iapi/types/CollatorSQLVarchar.java', 'java/engine/org/apache/derby/iapi/types/ConcatableDataValue.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactory.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/DateTimeDataValue.java', 'java/engine/org/apache/derby/iapi/types/DateTimeParser.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialClob.java', 'java/engine/org/apache/derby/iapi/types/JSQLType.java', 'java/engine/org/apache/derby/iapi/types/Like.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/NumberDataValue.java', 'java/engine/org/apache/derby/iapi/types/Orderable.java', 'java/engine/org/apache/derby/iapi/types/PositionedStream.java', 'java/engine/org/apache/derby/iapi/types/RawToBinaryFormatStream.java', 'java/engine/org/apache/derby/iapi/types/ReaderToUTF8Stream.java', 'java/engine/org/apache/derby/iapi/types/Resetable.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBit.java', 'java/engine/org/apache/derby/iapi/types/SQLBlob.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLClob.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java']","DERBY-6945: Move all shared code under trunk/java/shared; commit derby-6945-08-ad-move_shared_iapi_under_shared.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819522 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
b444f66db4ba41f7bebbe250487b6a1c6bf31a02,2017-12-27T20:37:39Z,"['java/client/org/apache/derby/client/net/NaiveTrustManager.java', 'java/client/org/apache/derby/client/net/OpenSocketAction.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/shared/org/apache/derby/shared/common/drda/NaiveTrustManager.java']","DERBY-6945: Move shared class NaiveTrustManager into derbyshared.jar and out of derbynet.jar and derbyclient.jar; commit derby-6945-07-aa-net_client_overlap.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819368 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
02fcca12d0143b891c88d2f8e9a671789b5335c8,2017-12-27T15:52:42Z,"['java/client/org/apache/derby/client/ClientPooledConnection.java', 'java/client/org/apache/derby/client/am/ColumnMetaData.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/drda/org/apache/derby/impl/drda/XADatabase.java', 'java/engine/org/apache/derby/catalog/types/TypeDescriptorImpl.java', 'java/engine/org/apache/derby/diag/ErrorMessages.java', 'java/engine/org/apache/derby/iapi/error/ExceptionSeverity.java', 'java/engine/org/apache/derby/iapi/error/ExceptionUtil.java', 'java/engine/org/apache/derby/iapi/error/SQLWarningFactory.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/error/ThreadDump.java', 'java/engine/org/apache/derby/iapi/jdbc/DRDAServerStarter.java', 'java/engine/org/apache/derby/iapi/jdbc/JDBCBoot.java', 'java/engine/org/apache/derby/iapi/reference/JDBC40Translation.java', 'java/engine/org/apache/derby/iapi/reference/MessageId.java', 'java/engine/org/apache/derby/iapi/reference/Property.java', 'java/engine/org/apache/derby/iapi/services/context/ContextManager.java', 'java/engine/org/apache/derby/iapi/services/context/SystemContext.java', 'java/engine/org/apache/derby/iapi/services/io/CloseFilterInputStream.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassFactoryContext.java', 'java/engine/org/apache/derby/iapi/sql/conn/ConnectionUtil.java', 'java/engine/org/apache/derby/iapi/store/raw/Transaction.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionControl.java', 'java/engine/org/apache/derby/iapi/types/DataTypeUtilities.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/impl/db/DatabaseContextImpl.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/ClobUtf8Writer.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnectionContext.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/LOBInputStream.java', 'java/engine/org/apache/derby/impl/jdbc/LOBOutputStream.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/JNDIAuthenticationSchemeBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/LDAPAuthenticationSchemeImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NoneAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/load/LoadError.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/ServiceBootContext.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/JarLoader.java', 'java/engine/org/apache/derby/impl/services/reflect/UpdateLoader.java', 'java/engine/org/apache/derby/impl/sql/compile/CompilerContextImpl.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/UserDefinedAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/ValidateCheckConstraintResultSet.java', 'java/engine/org/apache/derby/impl/store/access/RAMTransactionContext.java', 'java/engine/org/apache/derby/impl/store/raw/RawStore.java', 'java/engine/org/apache/derby/impl/store/raw/data/BaseDataFileFactory.java', 'java/engine/org/apache/derby/impl/store/raw/data/CachedPage.java', 'java/engine/org/apache/derby/impl/store/raw/data/StoredPage.java', 'java/engine/org/apache/derby/impl/store/raw/log/FileLogger.java', 'java/engine/org/apache/derby/impl/store/raw/log/FlushedScan.java', 'java/engine/org/apache/derby/impl/store/raw/log/LogToFile.java', 'java/engine/org/apache/derby/impl/store/raw/xact/Xact.java', 'java/engine/org/apache/derby/impl/store/raw/xact/XactContext.java', 'java/engine/org/apache/derby/impl/store/replication/ReplicationLogger.java', 'java/engine/org/apache/derby/impl/store/replication/master/MasterController.java', 'java/engine/org/apache/derby/impl/store/replication/net/ReplicationMessageReceive.java', 'java/engine/org/apache/derby/impl/store/replication/slave/SlaveController.java', 'java/engine/org/apache/derby/jdbc/AutoloadedDriver.java', 'java/engine/org/apache/derby/jdbc/BasicEmbeddedDataSource40.java', 'java/engine/org/apache/derby/jdbc/EmbedPooledConnection.java', 'java/engine/org/apache/derby/jdbc/EmbedXAResource.java', 'java/engine/org/apache/derby/jdbc/InternalDriver.java', 'java/engine/org/apache/derby/jdbc/XATransactionState.java', 'java/shared/org/apache/derby/shared/common/error/ExceptionSeverity.java', 'java/shared/org/apache/derby/shared/common/error/ExceptionUtil.java', 'java/testing/org/apache/derbyTesting/junit/NetworkServerTestSetup.java', 'java/testing/org/apache/derbyTesting/unitTests/store/T_RawStoreFactory.java', 'java/testing/org/apache/derbyTesting/unitTests/store/T_Util.java']","DERBY-6945: Eliminate more duplicated classes in derbyshared.jar; commit derby-6945-06-aa-removeOtherSharedDuplicates.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819343 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0378299c172a918a3d9de5d41f9f3df17e254acf,2017-12-26T23:59:56Z,"['java/client/org/apache/derby/client/net/NetConnection.java', 'java/drda/org/apache/derby/impl/drda/DRDAConnThread.java', 'java/drda/org/apache/derby/impl/drda/Database.java', 'java/drda/org/apache/derby/impl/drda/EXTDTAReaderInputStream.java', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/catalog/Java5SystemProcedures.java', 'java/engine/org/apache/derby/catalog/SystemProcedures.java', 'java/engine/org/apache/derby/catalog/types/BaseTypeIdImpl.java', 'java/engine/org/apache/derby/catalog/types/DefaultInfoImpl.java', 'java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java', 'java/engine/org/apache/derby/catalog/types/MethodAliasInfo.java', 'java/engine/org/apache/derby/diag/DiagUtil.java', 'java/engine/org/apache/derby/iapi/db/ConsistencyChecker.java', 'java/engine/org/apache/derby/iapi/error/ExceptionUtil.java', 'java/engine/org/apache/derby/iapi/error/StandardException.java', 'java/engine/org/apache/derby/iapi/jdbc/BrokeredStatement.java', 'java/engine/org/apache/derby/iapi/reference/Attribute.java', 'java/engine/org/apache/derby/iapi/reference/SQLState.java', 'java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java', 'java/engine/org/apache/derby/iapi/services/monitor/Monitor.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyUtil.java', 'java/engine/org/apache/derby/iapi/services/property/PropertyValidation.java', 'java/engine/org/apache/derby/iapi/sql/StatementUtil.java', 'java/engine/org/apache/derby/iapi/sql/compile/OptimizerPlan.java', 'java/engine/org/apache/derby/iapi/sql/conn/ConnectionUtil.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/AliasDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ConstraintDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DDUtils.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/DefaultDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/FileInfoDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/PermDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SPSDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/SchemaDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementColumnPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementGenericPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementRolePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementRoutinePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementSchemaPermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/StatementTablePermission.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TableDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/TriggerDescriptor.java', 'java/engine/org/apache/derby/iapi/sql/dictionary/ViewDescriptor.java', 'java/engine/org/apache/derby/iapi/transaction/TransactionControl.java', 'java/engine/org/apache/derby/iapi/types/DataType.java', 'java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java', 'java/engine/org/apache/derby/iapi/types/DataValueFactoryImpl.java', 'java/engine/org/apache/derby/iapi/types/DateTimeParser.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialBlob.java', 'java/engine/org/apache/derby/iapi/types/HarmonySerialClob.java', 'java/engine/org/apache/derby/iapi/types/Like.java', 'java/engine/org/apache/derby/iapi/types/NumberDataType.java', 'java/engine/org/apache/derby/iapi/types/RawToBinaryFormatStream.java', 'java/engine/org/apache/derby/iapi/types/ReaderToUTF8Stream.java', 'java/engine/org/apache/derby/iapi/types/SQLBinary.java', 'java/engine/org/apache/derby/iapi/types/SQLBit.java', 'java/engine/org/apache/derby/iapi/types/SQLBlob.java', 'java/engine/org/apache/derby/iapi/types/SQLBoolean.java', 'java/engine/org/apache/derby/iapi/types/SQLChar.java', 'java/engine/org/apache/derby/iapi/types/SQLDate.java', 'java/engine/org/apache/derby/iapi/types/SQLDecimal.java', 'java/engine/org/apache/derby/iapi/types/SQLDouble.java', 'java/engine/org/apache/derby/iapi/types/SQLInteger.java', 'java/engine/org/apache/derby/iapi/types/SQLLongint.java', 'java/engine/org/apache/derby/iapi/types/SQLLongvarchar.java', 'java/engine/org/apache/derby/iapi/types/SQLReal.java', 'java/engine/org/apache/derby/iapi/types/SQLSmallint.java', 'java/engine/org/apache/derby/iapi/types/SQLTime.java', 'java/engine/org/apache/derby/iapi/types/SQLTimestamp.java', 'java/engine/org/apache/derby/iapi/types/SQLTinyint.java', 'java/engine/org/apache/derby/iapi/types/SQLVarbit.java', 'java/engine/org/apache/derby/iapi/types/SqlXmlUtil.java', 'java/engine/org/apache/derby/iapi/types/UserType.java', 'java/engine/org/apache/derby/iapi/types/WorkHorseForCollatorDatatypes.java', 'java/engine/org/apache/derby/iapi/types/XML.java', 'java/engine/org/apache/derby/iapi/util/IdUtil.java', 'java/engine/org/apache/derby/iapi/util/InterruptStatus.java', 'java/engine/org/apache/derby/impl/db/BasicDatabase.java', 'java/engine/org/apache/derby/impl/db/SlaveDatabase.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedBlob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedCallableStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedClob.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedConnection.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedDatabaseMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedParameterSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedPreparedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedSavepoint.java', 'java/engine/org/apache/derby/impl/jdbc/EmbedStatement.java', 'java/engine/org/apache/derby/impl/jdbc/EncryptedLOBFile.java', 'java/engine/org/apache/derby/impl/jdbc/LOBInputStream.java', 'java/engine/org/apache/derby/impl/jdbc/LOBOutputStream.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStoredProcedure.java', 'java/engine/org/apache/derby/impl/jdbc/LOBStreamControl.java', 'java/engine/org/apache/derby/impl/jdbc/StoreStreamClob.java', 'java/engine/org/apache/derby/impl/jdbc/TransactionResourceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/Util.java', 'java/engine/org/apache/derby/impl/jdbc/Util42.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/AuthenticationServiceBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/BasicAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/JNDIAuthenticationSchemeBase.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/NativeAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/jdbc/authentication/SpecificAuthenticationServiceImpl.java', 'java/engine/org/apache/derby/impl/load/ColumnInfo.java', 'java/engine/org/apache/derby/impl/load/Export.java', 'java/engine/org/apache/derby/impl/load/Import.java', 'java/engine/org/apache/derby/impl/load/ImportAbstract.java', 'java/engine/org/apache/derby/impl/load/ImportLobFile.java', 'java/engine/org/apache/derby/impl/load/LoadError.java', 'java/engine/org/apache/derby/impl/services/bytecode/BCClass.java', 'java/engine/org/apache/derby/impl/services/cache/ConcurrentCache.java', 'java/engine/org/apache/derby/impl/services/daemon/IndexStatisticsDaemonImpl.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherFactory.java', 'java/engine/org/apache/derby/impl/services/jce/JCECipherProvider.java', 'java/engine/org/apache/derby/impl/services/locks/AbstractPool.java', 'java/engine/org/apache/derby/impl/services/locks/ConcurrentLockSet.java', 'java/engine/org/apache/derby/impl/services/locks/Deadlock.java', 'java/engine/org/apache/derby/impl/services/locks/Timeout.java', 'java/engine/org/apache/derby/impl/services/monitor/BaseMonitor.java', 'java/engine/org/apache/derby/impl/services/monitor/StorageFactoryService.java', 'java/engine/org/apache/derby/impl/services/monitor/TopService.java', 'java/engine/org/apache/derby/impl/services/reflect/DatabaseClasses.java', 'java/engine/org/apache/derby/impl/services/reflect/LoadedGeneratedClass.java', 'java/engine/org/apache/derby/impl/services/reflect/ReflectGeneratedClass.java', 'java/engine/org/apache/derby/impl/sql/GenericActivationHolder.java', 'java/engine/org/apache/derby/impl/sql/GenericParameter.java', 'java/engine/org/apache/derby/impl/sql/GenericParameterValueSet.java', 'java/engine/org/apache/derby/impl/sql/GenericPreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStatement.java', 'java/engine/org/apache/derby/impl/sql/GenericStorablePreparedStatement.java', 'java/engine/org/apache/derby/impl/sql/LanguageDbPropertySetter.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DDdependableFinder.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/engine/org/apache/derby/impl/sql/catalog/SYSDEPENDSRowFactory.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceGenerator.java', 'java/engine/org/apache/derby/impl/sql/catalog/SequenceUpdater.java', 'java/engine/org/apache/derby/impl/sql/compile/AccessPathImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AggregateWindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/AlterTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BaseTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryComparisonOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryListOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/BinaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CallStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CastNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CharConstantNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CoalesceFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ColumnReference.java', 'java/engine/org/apache/derby/impl/sql/compile/ConcatenationOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConditionalNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CreateViewNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CurrentOfNode.java', 'java/engine/org/apache/derby/impl/sql/compile/CursorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DB2LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DDLStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DMLModStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DeleteNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropAliasNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropIndexNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSchemaNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/DropTriggerNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExecSPSNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ExtractOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FKConstraintDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromList.java', 'java/engine/org/apache/derby/impl/sql/compile/FromTable.java', 'java/engine/org/apache/derby/impl/sql/compile/FromVTI.java', 'java/engine/org/apache/derby/impl/sql/compile/GenerationClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByList.java', 'java/engine/org/apache/derby/impl/sql/compile/GroupByNode.java', 'java/engine/org/apache/derby/impl/sql/compile/HashJoinStrategy.java', 'java/engine/org/apache/derby/impl/sql/compile/InsertNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaToSQLValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JavaValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/JoinNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LengthOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LikeEscapeOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/LockTableNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MatchingClauseNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MergeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/MethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ModifyColumnNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NOPStatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NewInvocationNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NextSequenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NonStaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/NumericTypeCompiler.java', 'java/engine/org/apache/derby/impl/sql/compile/OptTraceViewer.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/OptimizerTracer.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/OrderByList.java', 'java/engine/org/apache/derby/impl/sql/compile/ParameterNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ParserImpl.java', 'java/engine/org/apache/derby/impl/sql/compile/PrivilegeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/QueryTreeNode.java', 'java/engine/org/apache/derby/impl/sql/compile/RenameNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumn.java', 'java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java', 'java/engine/org/apache/derby/impl/sql/compile/RowResultSetNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SelectNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SetOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SimpleStringOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StatementNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticClassFieldReferenceNode.java', 'java/engine/org/apache/derby/impl/sql/compile/StaticMethodCallNode.java', 'java/engine/org/apache/derby/impl/sql/compile/SubqueryNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TableElementList.java', 'java/engine/org/apache/derby/impl/sql/compile/TablePrivilegesNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TernaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/TimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryArithmeticOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryDateTimestampOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryLogicalOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnaryOperatorNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UnionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UpdateNode.java', 'java/engine/org/apache/derby/impl/sql/compile/UserAggregateDefinition.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNode.java', 'java/engine/org/apache/derby/impl/sql/compile/ValueNodeList.java', 'java/engine/org/apache/derby/impl/sql/compile/VerifyAggregateExpressionsVisitor.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowDefinitionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/WindowFunctionNode.java', 'java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj', 'java/engine/org/apache/derby/impl/sql/conn/GenericAuthorizer.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionFactory.java', 'java/engine/org/apache/derby/impl/sql/conn/GenericStatementContext.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/AutoincrementCounter.java', 'java/engine/org/apache/derby/impl/sql/execute/AvgAggregator.java', 'java/engine/org/apache/derby/impl/sql/execute/BaseActivation.java', 'java/engine/org/apache/derby/impl/sql/execute/BasicNoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/ConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateAliasConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateSchemaConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CreateViewConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/CurrentOfResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DDLConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DMLWriteGeneratedColumnsResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteCascadeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DeleteResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DependentResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/DropAliasConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropConstraintConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropIndexConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropTriggerConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/DropViewConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ForeignKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericAggregateResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/GenericTriggerExecutor.java', 'java/engine/org/apache/derby/impl/sql/execute/HashScanResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexChanger.java', 'java/engine/org/apache/derby/impl/sql/execute/IndexRowToBaseRowResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InsertResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/InternalTriggerExecutionContext.java', 'java/engine/org/apache/derby/impl/sql/execute/JarUtil.java', 'java/engine/org/apache/derby/impl/sql/execute/LockTableConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MatchingClauseConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/MaterializedResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/MergeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NestedLoopJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NestedLoopLeftOuterJoinResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/NoPutResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NoRowsResultSetImpl.java', 'java/engine/org/apache/derby/impl/sql/execute/NormalizeResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/OnceResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/PrivilegeInfo.java', 'java/engine/org/apache/derby/impl/sql/execute/RealResultSetStatisticsFactory.java', 'java/engine/org/apache/derby/impl/sql/execute/ReferencedKeyRIChecker.java', 'java/engine/org/apache/derby/impl/sql/execute/RenameConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/RowCountResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SavepointConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/ScrollInsensitiveResultSet.java', 'java/engine/org/apache/derby/impl/sql/execute/SetConstraintsConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetRoleConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetSchemaConstantAction.java', 'java/engine/org/apache/derby/impl/sql/execute/SetTransactionIsolationConstantAction.java']","DERBY-6945: Remove redundant copies of Attribute.java and SQLState.java; commit derby-6945-05-aa-removeRedundant_Attribute_SQLState.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819309 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
338fa3785d8c859ea3c2752983c4032ad0021a41,2017-12-25T19:24:00Z,"['build.xml', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyrun.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyrun.jar.lastcontents', 'java/run/build.xml', 'java/run/org/apache/derby/run/run.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/tools/derbyrunjartest.java', 'tools/ant/properties/dirs.properties']","DERBY-6945: Put java.run in its own package so that derbyrun.jar and derbytools.jar do not overlap; commit derby-6945-04-aa-moveRunClass.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819254 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
ca1da9276769b8e46e4bfd61fdb5c6daad87af4c,2017-12-23T00:47:17Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbytools.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derby.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyclient.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbynet.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbytools.jar.lastcontents', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/EnumeratorTableFunction.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/VetJigsawTest.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/ZipFileTableFunction.java']","DERBY-6945: Check in new regression test to verify that packages do not straddle jar files; commit derby-6945-03-aa-partitionTest.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1819103 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
0a4eab5024553bdc178a2abf6d21e668beca90f6,2017-12-21T01:35:15Z,"['build.xml', 'java/build/org/apache/derbyBuild/classlister.java', 'java/build/org/apache/derbyBuild/eclipse/DerbyEclipsePlugin.java', 'java/client/org/apache/derby/client/am/Configuration.java', 'java/drda/org/apache/derby/drda/server.policy', 'java/drda/org/apache/derby/drda/template.policy', 'java/drda/org/apache/derby/impl/drda/NetworkServerControlImpl.java', 'java/engine/org/apache/derby/iapi/services/info/ProductGenusNames.java', 'java/engine/org/apache/derby/iapi/services/info/ProductVersionHolder.java', 'java/engine/org/apache/derby/impl/services/monitor/FileMonitor.java', 'java/shared/org/apache/derby/shared/common/i18n/MessageUtil.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/FileCompare.java', 'java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy', 'java/testing/org/apache/derbyTesting/junit/SecurityManagerSetup.java', 'java/testing/org/apache/derbyTesting/junit/TestConfiguration.java', 'java/testing/org/apache/derbyTesting/unitTests/junit/AssertFailureTest.policy', 'java/tools/org/apache/derby/impl/tools/ij/utilMain.java', 'java/tools/org/apache/derby/impl/tools/sysinfo/Main.java', 'java/tools/org/apache/derby/tools/sysinfo.java', 'tools/jar/dnc.properties', 'tools/jar/extraDBMSclasses.properties', 'tools/jar/tools.properties']","DERBY-6945: Create new derbyshared.jar file to hold code which was previously coned across several jar files; commit derby-6945-02-ac-newDerbySharedJar.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1818865 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2c0b91644cd10e0890c6f49c928fc71adc6a6192,2017-12-02T23:05:49Z,"['java/build/org/apache/derbyPreBuild/ReleaseProperties.java', 'java/build/org/apache/derbyPreBuild/build.xml', 'java/engine/org/apache/derby/iapi/services/info/ProductVersionHolder.java', 'java/engine/org/apache/derby/iapi/services/info/PropertyNames.java']","DERBY-6945: Remove dependency of proposed modules on derbyPreBuild; commit derby-6945-01-aa-remove_derbyPreBuild_dep.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1817002 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
7f3984246d625b811bf2557d75d26835229f747a,2017-11-15T13:38:05Z,['tools/ant/properties/defaultcompiler.properties'],"DERBY-6974: Change byte code level generated by Derby build from Java 8 to Java 9; commit derby-6974-02-ab-minVersion9.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1815316 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5cc99059172067c30973d4d664f6cd269718243d,2017-11-14T00:44:27Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'java/testing/org/apache/derbyTesting/functionTests/harness/Sed.java', 'java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/dblook_test_net.out', 'java/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/dblook_test_net_territory.out', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/SelectivityTest.java', 'java/testing/org/apache/derbyTesting/junit/JDBC.java']","DERBY-6977: Eliminate collisions on generated names for constraints; commit derby-6977-01-ad-useUUID.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1815172 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5bb8f051711c2ecbf50d82e514f2f56135a10a5c,2017-11-06T23:50:06Z,"['BUILDING.html', 'build.xml', 'java/build/org/apache/derbyBuild/build.xml', 'java/client/build.xml', 'java/demo/build.xml', 'java/demo/toursdb/build.xml', 'java/drda/org/apache/derby/drda/build.xml', 'java/drda/org/apache/derby/impl/drda/build.xml', 'java/engine/org/apache/derby/agg/build.xml', 'java/engine/org/apache/derby/authentication/build.xml', 'java/engine/org/apache/derby/catalog/build.xml', 'java/engine/org/apache/derby/database/build.xml', 'java/engine/org/apache/derby/diag/build.xml', 'java/engine/org/apache/derby/iapi/build.xml', 'java/engine/org/apache/derby/iapi/db/build.xml', 'java/engine/org/apache/derby/iapi/jdbc/build.xml', 'java/engine/org/apache/derby/iapi/reference/build.xml', 'java/engine/org/apache/derby/iapi/services/build.xml', 'java/engine/org/apache/derby/iapi/services/crypto/build.xml', 'java/engine/org/apache/derby/iapi/services/io/build.xml', 'java/engine/org/apache/derby/iapi/sql/build.xml', 'java/engine/org/apache/derby/iapi/store/build.xml', 'java/engine/org/apache/derby/iapi/types/build.xml', 'java/engine/org/apache/derby/iapi/util/build.xml', 'java/engine/org/apache/derby/impl/db/build.xml', 'java/engine/org/apache/derby/impl/io/build.xml', 'java/engine/org/apache/derby/impl/jdbc/build.xml', 'java/engine/org/apache/derby/impl/load/build.xml', 'java/engine/org/apache/derby/impl/services/build.xml', 'java/engine/org/apache/derby/impl/sql/build.xml', 'java/engine/org/apache/derby/impl/store/build.xml', 'java/engine/org/apache/derby/io/build.xml', 'java/engine/org/apache/derby/jdbc/build.xml', 'java/engine/org/apache/derby/mbeans/build.xml', 'java/engine/org/apache/derby/osgi/build.xml', 'java/engine/org/apache/derby/security/build.xml', 'java/engine/org/apache/derby/vti/build.xml', 'java/optional/build.xml', 'java/shared/build.xml', 'java/storeless/build.xml', 'java/tools/org/apache/derby/iapi/tools/build.xml', 'java/tools/org/apache/derby/impl/tools/build.xml', 'java/tools/org/apache/derby/tools/build.xml', 'tools/ant/properties/sanefalse.properties', 'tools/ant/properties/sanetrue.properties']","DERBY-5543: Add line numbers to stack traces produced by production artifacts; commit derby-5543-01-ab-insaneWithLineNumbers.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1814447 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
d2099519d901f110447cc87dd488a3b5d140fa4f,2017-11-05T22:53:22Z,['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java'],"DERBY-6941: Fix javadoc problem which bombs the javadoc jenkins build for 10.14.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1814381 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
e1dddd62f13390c47d37a7af1aa47cb905264e7e,2017-10-29T21:01:10Z,"['BUILDING.html', 'build.xml', 'java/build/org/apache/derbyBuild/javadoc/DiskLayoutTaglet.java', 'java/build/org/apache/derbyBuild/javadoc/EndFormatTaglet.java', 'java/build/org/apache/derbyBuild/javadoc/FormatIdTaglet.java', 'java/build/org/apache/derbyBuild/javadoc/PurposeTaglet.java', 'java/build/org/apache/derbyBuild/javadoc/UpgradeTaglet.java', 'java/client/build.xml', 'java/client/org/apache/derby/jdbc/BasicClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource.java', 'java/client/org/apache/derby/jdbc/ClientXADataSource40.java', 'java/client/org/apache/derby/jdbc/ClientXADataSourceInterface.java', 'java/engine/org/apache/derby/iapi/jdbc/build.xml', 'java/engine/org/apache/derby/impl/jdbc/build.xml', 'java/engine/org/apache/derby/jdbc/EmbeddedXADataSourceInterface.java', 'java/engine/org/apache/derby/jdbc/build.xml', 'java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/build.xml']","DERBY-6974: Convert Derby build to JDK 9 and compile at Java 9 byte code level.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1813709 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
5210e122304423bf35c5cb5aa90ff1885a7fa741,2017-09-19T02:37:01Z,"['java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java', 'java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java', 'java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java', 'tools/ant/properties/release.properties']","DERBY-6941: Bump version number on trunk to 10.15: commit derby-6941-05-aa-bumpTrunkDDto10_15.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808812 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
7159f2462d9309549083a59de0956ad312ed072e,2017-09-19T01:28:09Z,['build.xml'],"DERBY-6941: Remove revision spec from svn command in branchRepository target because svn complains that it is no longer wanted; commit derby-6941-04-aa-createBranchWithoutRevisionSpec.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808800 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
796b792d8d07ebb922fc20090f12e1341c49a18e,2017-09-19T01:10:21Z,['STATUS'],"DERBY-6941: Update STATUS file prior to generating first release candidate; commit derby-6941-03-aa-updateSTATUSfile.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808795 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
71bdb5f4d4ed060e21012c750190131baab0f215,2017-09-18T01:31:07Z,"['java/engine/org/apache/derby/impl/sql/execute/AlterTableConstantAction.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/AlterTableTest.java']","DERBY-6961: Correctly handle ALTER TABLE...SET [NO] CYCLE on exhausted identity columns; commit derby-6961-01-aa-recyclingExhaustedIdentityColumns.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808668 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
76deb0268abb010c484d01066f5ecd995dd9fd31,2017-09-17T02:00:00Z,"['java/build/org/apache/derbyBuild/lastgoodjarcontents/insane.derbyTesting.jar.lastcontents', 'java/build/org/apache/derbyBuild/lastgoodjarcontents/sane.derbyTesting.jar.lastcontents', 'java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj', 'java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/Changes10_14.java', 'java/testing/org/apache/derbyTesting/functionTests/tests/upgradeTests/UpgradeRun.java']","DERBY-6962: Forbid attempts to change the cycling behavior of identity columns in pre-10.11 databases; commit derby-6962-01-ab-forbidSetCycleOn10_10.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808600 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2636edd9b498fbf5c19cdbf7d60e8fc965137f1d,2017-09-12T00:05:28Z,"['java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj', 'java/testing/org/apache/derbyTesting/functionTests/tests/lang/AutoIncrementTest.java']","DERBY-6959: Require Standard SET keyword when changing the cycling behavior of an identity column; commit derby-6959-01-ab-requireSETkeyword.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1808071 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
21e03ad480b9957552c5472d14b5883a17a5e644,2017-08-20T18:24:50Z,"['RELEASE-NOTES.html', 'java/build/org/apache/derbyBuild/ReleaseNotesGenerator.java', 'releaseSummary.xml', 'tools/release/jirasoap/src/main/java/org/apache/derbyBuild/jirasoap/FilteredIssueLister.java']","DERBY-6941: Check in improvements based on a dry-run of the release notes generator: derby-6941-aa-dryRunOfReleaseNotes.diff.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1805575 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
2a5acb4be69990f3e639fb93c6195e2d48eb212d,2017-08-18T01:32:24Z,['java/testing/org/apache/derbyTesting/functionTests/tests/lang/CreateTableFromQueryTest.java'],"DERBY-6956: CREATE TABLE AS SELECT cannot copy DECIMAL(31,6)

This change adds several test tests to serve as regression tests.


git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1805356 13f79535-47bb-0310-9956-ffa450edef68",bpendleton@apache.org,Bryan Pendleton
1c21009920a63793c567fa23cc3070aed57f833a,2017-08-17T01:27:17Z,['java/engine/org/apache/derby/iapi/types/DataTypeDescriptor.java'],"DERBY-6956: Commit patch derby-6956-01-aa-removeSpuriousCheck.diff, removing a needless restriction on the kind of DECIMAL types which can be column types in a CREATE TABLE AS SELECT statement.

git-svn-id: https://svn.apache.org/repos/asf/db/derby/code/trunk@1805249 13f79535-47bb-0310-9956-ffa450edef68",rhillegas@apache.org,Richard N. Hillegas
